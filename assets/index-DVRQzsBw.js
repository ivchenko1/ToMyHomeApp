function NT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var jT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var v_={exports:{}},bh={},x_={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zc=Symbol.for("react.element"),TT=Symbol.for("react.portal"),ET=Symbol.for("react.fragment"),kT=Symbol.for("react.strict_mode"),PT=Symbol.for("react.profiler"),ST=Symbol.for("react.provider"),IT=Symbol.for("react.context"),CT=Symbol.for("react.forward_ref"),AT=Symbol.for("react.suspense"),RT=Symbol.for("react.memo"),zT=Symbol.for("react.lazy"),pv=Symbol.iterator;function LT(t){return t===null||typeof t!="object"?null:(t=pv&&t[pv]||t["@@iterator"],typeof t=="function"?t:null)}var __={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w_=Object.assign,b_={};function Ao(t,e,n){this.props=t,this.context=e,this.refs=b_,this.updater=n||__}Ao.prototype.isReactComponent={};Ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N_(){}N_.prototype=Ao.prototype;function Wp(t,e,n){this.props=t,this.context=e,this.refs=b_,this.updater=n||__}var Hp=Wp.prototype=new N_;Hp.constructor=Wp;w_(Hp,Ao.prototype);Hp.isPureReactComponent=!0;var gv=Array.isArray,j_=Object.prototype.hasOwnProperty,$p={current:null},T_={key:!0,ref:!0,__self:!0,__source:!0};function E_(t,e,n){var r,i={},a=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(a=""+e.key),e)j_.call(e,r)&&!T_.hasOwnProperty(r)&&(i[r]=e[r]);var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){for(var f=Array(h),m=0;m<h;m++)f[m]=arguments[m+2];i.children=f}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)i[r]===void 0&&(i[r]=h[r]);return{$$typeof:zc,type:t,key:a,ref:c,props:i,_owner:$p.current}}function DT(t,e){return{$$typeof:zc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===zc}function OT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yv=/\/+/g;function bf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?OT(""+t.key):e.toString(36)}function ad(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case zc:case TT:c=!0}}if(c)return c=t,i=i(c),t=r===""?"."+bf(c,0):r,gv(i)?(n="",t!=null&&(n=t.replace(yv,"$&/")+"/"),ad(i,e,n,"",function(m){return m})):i!=null&&(Zp(i)&&(i=DT(i,n+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(yv,"$&/")+"/")+t)),e.push(i)),1;if(c=0,r=r===""?".":r+":",gv(t))for(var h=0;h<t.length;h++){a=t[h];var f=r+bf(a,h);c+=ad(a,e,n,f,i)}else if(f=LT(t),typeof f=="function")for(t=f.call(t),h=0;!(a=t.next()).done;)a=a.value,f=r+bf(a,h++),c+=ad(a,e,n,f,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Lu(t,e,n){if(t==null)return t;var r=[],i=0;return ad(t,r,"","",function(a){return e.call(n,a,i++)}),r}function MT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},od={transition:null},VT={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:od,ReactCurrentOwner:$p};function k_(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Lu,forEach:function(t,e,n){Lu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lu(t,function(){e++}),e},toArray:function(t){return Lu(t,function(e){return e})||[]},only:function(t){if(!Zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=Ao;ze.Fragment=ET;ze.Profiler=PT;ze.PureComponent=Wp;ze.StrictMode=kT;ze.Suspense=AT;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VT;ze.act=k_;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=w_({},t.props),i=t.key,a=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,c=$p.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(f in e)j_.call(e,f)&&!T_.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&h!==void 0?h[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){h=Array(f);for(var m=0;m<f;m++)h[m]=arguments[m+2];r.children=h}return{$$typeof:zc,type:t.type,key:i,ref:a,props:r,_owner:c}};ze.createContext=function(t){return t={$$typeof:IT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ST,_context:t},t.Consumer=t};ze.createElement=E_;ze.createFactory=function(t){var e=E_.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:CT,render:t}};ze.isValidElement=Zp;ze.lazy=function(t){return{$$typeof:zT,_payload:{_status:-1,_result:t},_init:MT}};ze.memo=function(t,e){return{$$typeof:RT,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=od.transition;od.transition={};try{t()}finally{od.transition=e}};ze.unstable_act=k_;ze.useCallback=function(t,e){return on.current.useCallback(t,e)};ze.useContext=function(t){return on.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return on.current.useDeferredValue(t)};ze.useEffect=function(t,e){return on.current.useEffect(t,e)};ze.useId=function(){return on.current.useId()};ze.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return on.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};ze.useRef=function(t){return on.current.useRef(t)};ze.useState=function(t){return on.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return on.current.useTransition()};ze.version="18.3.1";x_.exports=ze;var V=x_.exports;const ic=y_(V),FT=NT({__proto__:null,default:ic},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT=V,BT=Symbol.for("react.element"),WT=Symbol.for("react.fragment"),HT=Object.prototype.hasOwnProperty,$T=UT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZT={key:!0,ref:!0,__self:!0,__source:!0};function P_(t,e,n){var r,i={},a=null,c=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)HT.call(e,r)&&!ZT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:BT,type:t,key:a,ref:c,props:i,_owner:$T.current}}bh.Fragment=WT;bh.jsx=P_;bh.jsxs=P_;v_.exports=bh;var o=v_.exports,lm={},S_={exports:{}},Pn={},I_={exports:{}},C_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,de){var W=G.length;G.push(de);e:for(;0<W;){var te=W-1>>>1,he=G[te];if(0<i(he,de))G[te]=de,G[W]=he,W=te;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var de=G[0],W=G.pop();if(W!==de){G[0]=W;e:for(var te=0,he=G.length,Ne=he>>>1;te<Ne;){var Ie=2*(te+1)-1,Te=G[Ie],be=Ie+1,nt=G[be];if(0>i(Te,W))be<he&&0>i(nt,Te)?(G[te]=nt,G[be]=W,te=be):(G[te]=Te,G[Ie]=W,te=Ie);else if(be<he&&0>i(nt,W))G[te]=nt,G[be]=W,te=be;else break e}}return de}function i(G,de){var W=G.sortIndex-de.sortIndex;return W!==0?W:G.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var f=[],m=[],y=1,x=null,w=3,R=!1,M=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var de=n(m);de!==null;){if(de.callback===null)r(m);else if(de.startTime<=G)r(m),de.sortIndex=de.expirationTime,e(f,de);else break;de=n(m)}}function H(G){if(C=!1,S(G),!M)if(n(f)!==null)M=!0,ie(F);else{var de=n(m);de!==null&&se(H,de.startTime-G)}}function F(G,de){M=!1,C&&(C=!1,P(N),N=-1),R=!0;var W=w;try{for(S(de),x=n(f);x!==null&&(!(x.expirationTime>de)||G&&!E());){var te=x.callback;if(typeof te=="function"){x.callback=null,w=x.priorityLevel;var he=te(x.expirationTime<=de);de=t.unstable_now(),typeof he=="function"?x.callback=he:x===n(f)&&r(f),S(de)}else r(f);x=n(f)}if(x!==null)var Ne=!0;else{var Ie=n(m);Ie!==null&&se(H,Ie.startTime-de),Ne=!1}return Ne}finally{x=null,w=W,R=!1}}var B=!1,I=null,N=-1,O=5,k=-1;function E(){return!(t.unstable_now()-k<O)}function z(){if(I!==null){var G=t.unstable_now();k=G;var de=!0;try{de=I(!0,G)}finally{de?D():(B=!1,I=null)}}else B=!1}var D;if(typeof j=="function")D=function(){j(z)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ue=ne.port2;ne.port1.onmessage=z,D=function(){ue.postMessage(null)}}else D=function(){A(z,0)};function ie(G){I=G,B||(B=!0,D())}function se(G,de){N=A(function(){G(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){M||R||(M=!0,ie(F))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(G){switch(w){case 1:case 2:case 3:var de=3;break;default:de=w}var W=w;w=de;try{return G()}finally{w=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,de){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=w;w=G;try{return de()}finally{w=W}},t.unstable_scheduleCallback=function(G,de,W){var te=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?te+W:te):W=te,G){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=W+he,G={id:y++,callback:de,priorityLevel:G,startTime:W,expirationTime:he,sortIndex:-1},W>te?(G.sortIndex=W,e(m,G),n(f)===null&&G===n(m)&&(C?(P(N),N=-1):C=!0,se(H,W-te))):(G.sortIndex=he,e(f,G),M||R||(M=!0,ie(F))),G},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(G){var de=w;return function(){var W=w;w=de;try{return G.apply(this,arguments)}finally{w=W}}}})(C_);I_.exports=C_;var qT=I_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=V,kn=qT;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A_=new Set,sc={};function aa(t,e){xo(t,e),xo(t+"Capture",e)}function xo(t,e){for(sc[t]=e,t=0;t<e.length;t++)A_.add(e[t])}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cm=Object.prototype.hasOwnProperty,GT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vv={},xv={};function QT(t){return cm.call(xv,t)?!0:cm.call(vv,t)?!1:GT.test(t)?xv[t]=!0:(vv[t]=!0,!1)}function JT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YT(t,e,n,r){if(e===null||typeof e>"u"||JT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ln(t,e,n,r,i,a,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=c}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new ln(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new ln(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new ln(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new ln(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new ln(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new ln(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new ln(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new ln(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new ln(t,5,!1,t.toLowerCase(),null,!1,!1)});var qp=/[\-:]([a-z])/g;function Kp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qp,Kp);$t[e]=new ln(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qp,Kp);$t[e]=new ln(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qp,Kp);$t[e]=new ln(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new ln(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new ln(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gp(t,e,n,r){var i=$t.hasOwnProperty(e)?$t[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YT(e,n,i,r)&&(n=null),r||i===null?QT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ui=KT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Du=Symbol.for("react.element"),Ga=Symbol.for("react.portal"),Qa=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),R_=Symbol.for("react.provider"),z_=Symbol.for("react.context"),Jp=Symbol.for("react.forward_ref"),dm=Symbol.for("react.suspense"),hm=Symbol.for("react.suspense_list"),Yp=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),L_=Symbol.for("react.offscreen"),_v=Symbol.iterator;function wl(t){return t===null||typeof t!="object"?null:(t=_v&&t[_v]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,Nf;function Il(t){if(Nf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nf=e&&e[1]||""}return`
`+Nf+t}var jf=!1;function Tf(t,e){if(!t||jf)return"";jf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){r=m}t.call(e.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),a=r.stack.split(`
`),c=i.length-1,h=a.length-1;1<=c&&0<=h&&i[c]!==a[h];)h--;for(;1<=c&&0<=h;c--,h--)if(i[c]!==a[h]){if(c!==1||h!==1)do if(c--,h--,0>h||i[c]!==a[h]){var f=`
`+i[c].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=c&&0<=h);break}}}finally{jf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Il(t):""}function XT(t){switch(t.tag){case 5:return Il(t.type);case 16:return Il("Lazy");case 13:return Il("Suspense");case 19:return Il("SuspenseList");case 0:case 2:case 15:return t=Tf(t.type,!1),t;case 11:return t=Tf(t.type.render,!1),t;case 1:return t=Tf(t.type,!0),t;default:return""}}function fm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qa:return"Fragment";case Ga:return"Portal";case um:return"Profiler";case Qp:return"StrictMode";case dm:return"Suspense";case hm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case z_:return(t.displayName||"Context")+".Consumer";case R_:return(t._context.displayName||"Context")+".Provider";case Jp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yp:return e=t.displayName||null,e!==null?e:fm(t.type)||"Memo";case Ti:e=t._payload,t=t._init;try{return fm(t(e))}catch{}}return null}function eE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fm(e);case 8:return e===Qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tE(t){var e=D_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(c){r=""+c,a.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ou(t){t._valueTracker||(t._valueTracker=tE(t))}function O_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=D_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mm(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M_(t,e){e=e.checked,e!=null&&Gp(t,"checked",e,!1)}function pm(t,e){M_(t,e);var n=Yi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gm(t,e.type,n):e.hasOwnProperty("defaultValue")&&gm(t,e.type,Yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gm(t,e,n){(e!=="number"||Pd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cl=Array.isArray;function lo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ym(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Cl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yi(n)}}function V_(t,e){var n=Yi(e.value),r=Yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function F_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?F_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mu,U_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mu=Mu||document.createElement("div"),Mu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ac(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nE=["Webkit","ms","Moz","O"];Object.keys(Fl).forEach(function(t){nE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fl[e]=Fl[t]})});function B_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fl.hasOwnProperty(t)&&Fl[t]?(""+e).trim():e+"px"}function W_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=B_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rE=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xm(t,e){if(e){if(rE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function _m(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wm=null;function Xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bm=null,co=null,uo=null;function Tv(t){if(t=Oc(t)){if(typeof bm!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=kh(e),bm(t.stateNode,t.type,e))}}function H_(t){co?uo?uo.push(t):uo=[t]:co=t}function $_(){if(co){var t=co,e=uo;if(uo=co=null,Tv(t),e)for(t=0;t<e.length;t++)Tv(e[t])}}function Z_(t,e){return t(e)}function q_(){}var Ef=!1;function K_(t,e,n){if(Ef)return t(e,n);Ef=!0;try{return Z_(t,e,n)}finally{Ef=!1,(co!==null||uo!==null)&&(q_(),$_())}}function oc(t,e){var n=t.stateNode;if(n===null)return null;var r=kh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Nm=!1;if(ni)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){Nm=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{Nm=!1}function iE(t,e,n,r,i,a,c,h,f){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(y){this.onError(y)}}var Ul=!1,Sd=null,Id=!1,jm=null,sE={onError:function(t){Ul=!0,Sd=t}};function aE(t,e,n,r,i,a,c,h,f){Ul=!1,Sd=null,iE.apply(sE,arguments)}function oE(t,e,n,r,i,a,c,h,f){if(aE.apply(this,arguments),Ul){if(Ul){var m=Sd;Ul=!1,Sd=null}else throw Error(ee(198));Id||(Id=!0,jm=m)}}function oa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function G_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ev(t){if(oa(t)!==t)throw Error(ee(188))}function lE(t){var e=t.alternate;if(!e){if(e=oa(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ev(i),t;if(a===r)return Ev(i),e;a=a.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=a;else{for(var c=!1,h=i.child;h;){if(h===n){c=!0,n=i,r=a;break}if(h===r){c=!0,r=i,n=a;break}h=h.sibling}if(!c){for(h=a.child;h;){if(h===n){c=!0,n=a,r=i;break}if(h===r){c=!0,r=a,n=i;break}h=h.sibling}if(!c)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function Q_(t){return t=lE(t),t!==null?J_(t):null}function J_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=J_(t);if(e!==null)return e;t=t.sibling}return null}var Y_=kn.unstable_scheduleCallback,kv=kn.unstable_cancelCallback,cE=kn.unstable_shouldYield,uE=kn.unstable_requestPaint,vt=kn.unstable_now,dE=kn.unstable_getCurrentPriorityLevel,eg=kn.unstable_ImmediatePriority,X_=kn.unstable_UserBlockingPriority,Cd=kn.unstable_NormalPriority,hE=kn.unstable_LowPriority,ew=kn.unstable_IdlePriority,Nh=null,xr=null;function fE(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(Nh,t,void 0,(t.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:gE,mE=Math.log,pE=Math.LN2;function gE(t){return t>>>=0,t===0?32:31-(mE(t)/pE|0)|0}var Vu=64,Fu=4194304;function Al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ad(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,c=n&268435455;if(c!==0){var h=c&~i;h!==0?r=Al(h):(a&=c,a!==0&&(r=Al(a)))}else c=n&~i,c!==0?r=Al(c):a!==0&&(r=Al(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rr(e),i=1<<n,r|=t[n],e&=~i;return r}function yE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var c=31-rr(a),h=1<<c,f=i[c];f===-1?(!(h&n)||h&r)&&(i[c]=yE(h,e)):f<=e&&(t.expiredLanes|=h),a&=~h}}function Tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tw(){var t=Vu;return Vu<<=1,!(Vu&4194240)&&(Vu=64),t}function kf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rr(e),t[e]=n}function xE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rr(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function tg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var He=0;function nw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rw,ng,iw,sw,aw,Em=!1,Uu=[],Mi=null,Vi=null,Fi=null,lc=new Map,cc=new Map,ki=[],_E="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pv(t,e){switch(t){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":lc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(e.pointerId)}}function Nl(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Oc(e),e!==null&&ng(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wE(t,e,n,r,i){switch(e){case"focusin":return Mi=Nl(Mi,t,e,n,r,i),!0;case"dragenter":return Vi=Nl(Vi,t,e,n,r,i),!0;case"mouseover":return Fi=Nl(Fi,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return lc.set(a,Nl(lc.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,cc.set(a,Nl(cc.get(a)||null,t,e,n,r,i)),!0}return!1}function ow(t){var e=Os(t.target);if(e!==null){var n=oa(e);if(n!==null){if(e=n.tag,e===13){if(e=G_(n),e!==null){t.blockedOn=e,aw(t.priority,function(){iw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ld(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=km(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wm=r,n.target.dispatchEvent(r),wm=null}else return e=Oc(n),e!==null&&ng(e),t.blockedOn=n,!1;e.shift()}return!0}function Sv(t,e,n){ld(t)&&n.delete(e)}function bE(){Em=!1,Mi!==null&&ld(Mi)&&(Mi=null),Vi!==null&&ld(Vi)&&(Vi=null),Fi!==null&&ld(Fi)&&(Fi=null),lc.forEach(Sv),cc.forEach(Sv)}function jl(t,e){t.blockedOn===e&&(t.blockedOn=null,Em||(Em=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,bE)))}function uc(t){function e(i){return jl(i,t)}if(0<Uu.length){jl(Uu[0],t);for(var n=1;n<Uu.length;n++){var r=Uu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mi!==null&&jl(Mi,t),Vi!==null&&jl(Vi,t),Fi!==null&&jl(Fi,t),lc.forEach(e),cc.forEach(e),n=0;n<ki.length;n++)r=ki[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ki.length&&(n=ki[0],n.blockedOn===null);)ow(n),n.blockedOn===null&&ki.shift()}var ho=ui.ReactCurrentBatchConfig,Rd=!0;function NE(t,e,n,r){var i=He,a=ho.transition;ho.transition=null;try{He=1,rg(t,e,n,r)}finally{He=i,ho.transition=a}}function jE(t,e,n,r){var i=He,a=ho.transition;ho.transition=null;try{He=4,rg(t,e,n,r)}finally{He=i,ho.transition=a}}function rg(t,e,n,r){if(Rd){var i=km(t,e,n,r);if(i===null)Of(t,e,r,zd,n),Pv(t,r);else if(wE(i,t,e,n,r))r.stopPropagation();else if(Pv(t,r),e&4&&-1<_E.indexOf(t)){for(;i!==null;){var a=Oc(i);if(a!==null&&rw(a),a=km(t,e,n,r),a===null&&Of(t,e,r,zd,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Of(t,e,r,null,n)}}var zd=null;function km(t,e,n,r){if(zd=null,t=Xp(r),t=Os(t),t!==null)if(e=oa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=G_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zd=t,null}function lw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dE()){case eg:return 1;case X_:return 4;case Cd:case hE:return 16;case ew:return 536870912;default:return 16}default:return 16}}var zi=null,ig=null,cd=null;function cw(){if(cd)return cd;var t,e=ig,n=e.length,r,i="value"in zi?zi.value:zi.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var c=n-t;for(r=1;r<=c&&e[n-r]===i[a-r];r++);return cd=i.slice(t,1<r?1-r:void 0)}function ud(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bu(){return!0}function Iv(){return!1}function Sn(t){function e(n,r,i,a,c){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=c,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Bu:Iv,this.isPropagationStopped=Iv,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),e}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sg=Sn(Ro),Dc=ct({},Ro,{view:0,detail:0}),TE=Sn(Dc),Pf,Sf,Tl,jh=ct({},Dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(Pf=t.screenX-Tl.screenX,Sf=t.screenY-Tl.screenY):Sf=Pf=0,Tl=t),Pf)},movementY:function(t){return"movementY"in t?t.movementY:Sf}}),Cv=Sn(jh),EE=ct({},jh,{dataTransfer:0}),kE=Sn(EE),PE=ct({},Dc,{relatedTarget:0}),If=Sn(PE),SE=ct({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),IE=Sn(SE),CE=ct({},Ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AE=Sn(CE),RE=ct({},Ro,{data:0}),Av=Sn(RE),zE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DE[t])?!!e[t]:!1}function ag(){return OE}var ME=ct({},Dc,{key:function(t){if(t.key){var e=zE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ud(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ag,charCode:function(t){return t.type==="keypress"?ud(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ud(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VE=Sn(ME),FE=ct({},jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rv=Sn(FE),UE=ct({},Dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ag}),BE=Sn(UE),WE=ct({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),HE=Sn(WE),$E=ct({},jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZE=Sn($E),qE=[9,13,27,32],og=ni&&"CompositionEvent"in window,Bl=null;ni&&"documentMode"in document&&(Bl=document.documentMode);var KE=ni&&"TextEvent"in window&&!Bl,uw=ni&&(!og||Bl&&8<Bl&&11>=Bl),zv=" ",Lv=!1;function dw(t,e){switch(t){case"keyup":return qE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ja=!1;function GE(t,e){switch(t){case"compositionend":return hw(e);case"keypress":return e.which!==32?null:(Lv=!0,zv);case"textInput":return t=e.data,t===zv&&Lv?null:t;default:return null}}function QE(t,e){if(Ja)return t==="compositionend"||!og&&dw(t,e)?(t=cw(),cd=ig=zi=null,Ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uw&&e.locale!=="ko"?null:e.data;default:return null}}var JE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JE[t.type]:e==="textarea"}function fw(t,e,n,r){H_(r),e=Ld(e,"onChange"),0<e.length&&(n=new sg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wl=null,dc=null;function YE(t){jw(t,0)}function Th(t){var e=eo(t);if(O_(e))return t}function XE(t,e){if(t==="change")return e}var mw=!1;if(ni){var Cf;if(ni){var Af="oninput"in document;if(!Af){var Ov=document.createElement("div");Ov.setAttribute("oninput","return;"),Af=typeof Ov.oninput=="function"}Cf=Af}else Cf=!1;mw=Cf&&(!document.documentMode||9<document.documentMode)}function Mv(){Wl&&(Wl.detachEvent("onpropertychange",pw),dc=Wl=null)}function pw(t){if(t.propertyName==="value"&&Th(dc)){var e=[];fw(e,dc,t,Xp(t)),K_(YE,e)}}function ek(t,e,n){t==="focusin"?(Mv(),Wl=e,dc=n,Wl.attachEvent("onpropertychange",pw)):t==="focusout"&&Mv()}function tk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Th(dc)}function nk(t,e){if(t==="click")return Th(e)}function rk(t,e){if(t==="input"||t==="change")return Th(e)}function ik(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var or=typeof Object.is=="function"?Object.is:ik;function hc(t,e){if(or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cm.call(e,i)||!or(t[i],e[i]))return!1}return!0}function Vv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fv(t,e){var n=Vv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vv(n)}}function gw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yw(){for(var t=window,e=Pd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pd(t.document)}return e}function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sk(t){var e=yw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gw(n.ownerDocument.documentElement,n)){if(r!==null&&lg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=Fv(n,a);var c=Fv(n,r);i&&c&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ak=ni&&"documentMode"in document&&11>=document.documentMode,Ya=null,Pm=null,Hl=null,Sm=!1;function Uv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sm||Ya==null||Ya!==Pd(r)||(r=Ya,"selectionStart"in r&&lg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hl&&hc(Hl,r)||(Hl=r,r=Ld(Pm,"onSelect"),0<r.length&&(e=new sg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ya)))}function Wu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xa={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionend:Wu("Transition","TransitionEnd")},Rf={},vw={};ni&&(vw=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function Eh(t){if(Rf[t])return Rf[t];if(!Xa[t])return t;var e=Xa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vw)return Rf[t]=e[n];return t}var xw=Eh("animationend"),_w=Eh("animationiteration"),ww=Eh("animationstart"),bw=Eh("transitionend"),Nw=new Map,Bv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){Nw.set(t,e),aa(e,[t])}for(var zf=0;zf<Bv.length;zf++){var Lf=Bv[zf],ok=Lf.toLowerCase(),lk=Lf[0].toUpperCase()+Lf.slice(1);hs(ok,"on"+lk)}hs(xw,"onAnimationEnd");hs(_w,"onAnimationIteration");hs(ww,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(bw,"onTransitionEnd");xo("onMouseEnter",["mouseout","mouseover"]);xo("onMouseLeave",["mouseout","mouseover"]);xo("onPointerEnter",["pointerout","pointerover"]);xo("onPointerLeave",["pointerout","pointerover"]);aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function Wv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oE(r,e,void 0,t),t.currentTarget=null}function jw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var c=r.length-1;0<=c;c--){var h=r[c],f=h.instance,m=h.currentTarget;if(h=h.listener,f!==a&&i.isPropagationStopped())break e;Wv(i,h,m),a=f}else for(c=0;c<r.length;c++){if(h=r[c],f=h.instance,m=h.currentTarget,h=h.listener,f!==a&&i.isPropagationStopped())break e;Wv(i,h,m),a=f}}}if(Id)throw t=jm,Id=!1,jm=null,t}function Ge(t,e){var n=e[zm];n===void 0&&(n=e[zm]=new Set);var r=t+"__bubble";n.has(r)||(Tw(e,t,2,!1),n.add(r))}function Df(t,e,n){var r=0;e&&(r|=4),Tw(n,t,r,e)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function fc(t){if(!t[Hu]){t[Hu]=!0,A_.forEach(function(n){n!=="selectionchange"&&(ck.has(n)||Df(n,!1,t),Df(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hu]||(e[Hu]=!0,Df("selectionchange",!1,e))}}function Tw(t,e,n,r){switch(lw(e)){case 1:var i=NE;break;case 4:i=jE;break;default:i=rg}n=i.bind(null,e,n,t),i=void 0,!Nm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Of(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var h=r.stateNode.containerInfo;if(h===i||h.nodeType===8&&h.parentNode===i)break;if(c===4)for(c=r.return;c!==null;){var f=c.tag;if((f===3||f===4)&&(f=c.stateNode.containerInfo,f===i||f.nodeType===8&&f.parentNode===i))return;c=c.return}for(;h!==null;){if(c=Os(h),c===null)return;if(f=c.tag,f===5||f===6){r=a=c;continue e}h=h.parentNode}}r=r.return}K_(function(){var m=a,y=Xp(n),x=[];e:{var w=Nw.get(t);if(w!==void 0){var R=sg,M=t;switch(t){case"keypress":if(ud(n)===0)break e;case"keydown":case"keyup":R=VE;break;case"focusin":M="focus",R=If;break;case"focusout":M="blur",R=If;break;case"beforeblur":case"afterblur":R=If;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Cv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=kE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=BE;break;case xw:case _w:case ww:R=IE;break;case bw:R=HE;break;case"scroll":R=TE;break;case"wheel":R=ZE;break;case"copy":case"cut":case"paste":R=AE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Rv}var C=(e&4)!==0,A=!C&&t==="scroll",P=C?w!==null?w+"Capture":null:w;C=[];for(var j=m,S;j!==null;){S=j;var H=S.stateNode;if(S.tag===5&&H!==null&&(S=H,P!==null&&(H=oc(j,P),H!=null&&C.push(mc(j,H,S)))),A)break;j=j.return}0<C.length&&(w=new R(w,M,null,n,y),x.push({event:w,listeners:C}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",w&&n!==wm&&(M=n.relatedTarget||n.fromElement)&&(Os(M)||M[ri]))break e;if((R||w)&&(w=y.window===y?y:(w=y.ownerDocument)?w.defaultView||w.parentWindow:window,R?(M=n.relatedTarget||n.toElement,R=m,M=M?Os(M):null,M!==null&&(A=oa(M),M!==A||M.tag!==5&&M.tag!==6)&&(M=null)):(R=null,M=m),R!==M)){if(C=Cv,H="onMouseLeave",P="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(C=Rv,H="onPointerLeave",P="onPointerEnter",j="pointer"),A=R==null?w:eo(R),S=M==null?w:eo(M),w=new C(H,j+"leave",R,n,y),w.target=A,w.relatedTarget=S,H=null,Os(y)===m&&(C=new C(P,j+"enter",M,n,y),C.target=S,C.relatedTarget=A,H=C),A=H,R&&M)t:{for(C=R,P=M,j=0,S=C;S;S=Wa(S))j++;for(S=0,H=P;H;H=Wa(H))S++;for(;0<j-S;)C=Wa(C),j--;for(;0<S-j;)P=Wa(P),S--;for(;j--;){if(C===P||P!==null&&C===P.alternate)break t;C=Wa(C),P=Wa(P)}C=null}else C=null;R!==null&&Hv(x,w,R,C,!1),M!==null&&A!==null&&Hv(x,A,M,C,!0)}}e:{if(w=m?eo(m):window,R=w.nodeName&&w.nodeName.toLowerCase(),R==="select"||R==="input"&&w.type==="file")var F=XE;else if(Dv(w))if(mw)F=rk;else{F=tk;var B=ek}else(R=w.nodeName)&&R.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(F=nk);if(F&&(F=F(t,m))){fw(x,F,n,y);break e}B&&B(t,w,m),t==="focusout"&&(B=w._wrapperState)&&B.controlled&&w.type==="number"&&gm(w,"number",w.value)}switch(B=m?eo(m):window,t){case"focusin":(Dv(B)||B.contentEditable==="true")&&(Ya=B,Pm=m,Hl=null);break;case"focusout":Hl=Pm=Ya=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,Uv(x,n,y);break;case"selectionchange":if(ak)break;case"keydown":case"keyup":Uv(x,n,y)}var I;if(og)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ja?dw(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(uw&&n.locale!=="ko"&&(Ja||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ja&&(I=cw()):(zi=y,ig="value"in zi?zi.value:zi.textContent,Ja=!0)),B=Ld(m,N),0<B.length&&(N=new Av(N,t,null,n,y),x.push({event:N,listeners:B}),I?N.data=I:(I=hw(n),I!==null&&(N.data=I)))),(I=KE?GE(t,n):QE(t,n))&&(m=Ld(m,"onBeforeInput"),0<m.length&&(y=new Av("onBeforeInput","beforeinput",null,n,y),x.push({event:y,listeners:m}),y.data=I))}jw(x,e)})}function mc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ld(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=oc(t,n),a!=null&&r.unshift(mc(t,a,i)),a=oc(t,e),a!=null&&r.push(mc(t,a,i))),t=t.return}return r}function Wa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hv(t,e,n,r,i){for(var a=e._reactName,c=[];n!==null&&n!==r;){var h=n,f=h.alternate,m=h.stateNode;if(f!==null&&f===r)break;h.tag===5&&m!==null&&(h=m,i?(f=oc(n,a),f!=null&&c.unshift(mc(n,f,h))):i||(f=oc(n,a),f!=null&&c.push(mc(n,f,h)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var uk=/\r\n?/g,dk=/\u0000|\uFFFD/g;function $v(t){return(typeof t=="string"?t:""+t).replace(uk,`
`).replace(dk,"")}function $u(t,e,n){if(e=$v(e),$v(t)!==e&&n)throw Error(ee(425))}function Dd(){}var Im=null,Cm=null;function Am(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rm=typeof setTimeout=="function"?setTimeout:void 0,hk=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,fk=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(t){return Zv.resolve(null).then(t).catch(mk)}:Rm;function mk(t){setTimeout(function(){throw t})}function Mf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),uc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);uc(e)}function Ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),gr="__reactFiber$"+zo,pc="__reactProps$"+zo,ri="__reactContainer$"+zo,zm="__reactEvents$"+zo,pk="__reactListeners$"+zo,gk="__reactHandles$"+zo;function Os(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ri]||n[gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qv(t);t!==null;){if(n=t[gr])return n;t=qv(t)}return e}t=n,n=t.parentNode}return null}function Oc(t){return t=t[gr]||t[ri],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function kh(t){return t[pc]||null}var Lm=[],to=-1;function fs(t){return{current:t}}function Je(t){0>to||(t.current=Lm[to],Lm[to]=null,to--)}function Ke(t,e){to++,Lm[to]=t.current,t.current=e}var Xi={},Xt=fs(Xi),pn=fs(!1),Zs=Xi;function _o(t,e){var n=t.type.contextTypes;if(!n)return Xi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gn(t){return t=t.childContextTypes,t!=null}function Od(){Je(pn),Je(Xt)}function Kv(t,e,n){if(Xt.current!==Xi)throw Error(ee(168));Ke(Xt,e),Ke(pn,n)}function Ew(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,eE(t)||"Unknown",i));return ct({},n,r)}function Md(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xi,Zs=Xt.current,Ke(Xt,t),Ke(pn,pn.current),!0}function Gv(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=Ew(t,e,Zs),r.__reactInternalMemoizedMergedChildContext=t,Je(pn),Je(Xt),Ke(Xt,t)):Je(pn),Ke(pn,n)}var Kr=null,Ph=!1,Vf=!1;function kw(t){Kr===null?Kr=[t]:Kr.push(t)}function yk(t){Ph=!0,kw(t)}function ms(){if(!Vf&&Kr!==null){Vf=!0;var t=0,e=He;try{var n=Kr;for(He=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kr=null,Ph=!1}catch(i){throw Kr!==null&&(Kr=Kr.slice(t+1)),Y_(eg,ms),i}finally{He=e,Vf=!1}}return null}var no=[],ro=0,Vd=null,Fd=0,Mn=[],Vn=0,qs=null,Gr=1,Qr="";function zs(t,e){no[ro++]=Fd,no[ro++]=Vd,Vd=t,Fd=e}function Pw(t,e,n){Mn[Vn++]=Gr,Mn[Vn++]=Qr,Mn[Vn++]=qs,qs=t;var r=Gr;t=Qr;var i=32-rr(r)-1;r&=~(1<<i),n+=1;var a=32-rr(e)+i;if(30<a){var c=i-i%5;a=(r&(1<<c)-1).toString(32),r>>=c,i-=c,Gr=1<<32-rr(e)+i|n<<i|r,Qr=a+t}else Gr=1<<a|n<<i|r,Qr=t}function cg(t){t.return!==null&&(zs(t,1),Pw(t,1,0))}function ug(t){for(;t===Vd;)Vd=no[--ro],no[ro]=null,Fd=no[--ro],no[ro]=null;for(;t===qs;)qs=Mn[--Vn],Mn[Vn]=null,Qr=Mn[--Vn],Mn[Vn]=null,Gr=Mn[--Vn],Mn[Vn]=null}var En=null,Nn=null,tt=!1,tr=null;function Sw(t,e){var n=Un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,En=t,Nn=Ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,En=t,Nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qs!==null?{id:Gr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,En=t,Nn=null,!0):!1;default:return!1}}function Dm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Om(t){if(tt){var e=Nn;if(e){var n=e;if(!Qv(t,e)){if(Dm(t))throw Error(ee(418));e=Ui(n.nextSibling);var r=En;e&&Qv(t,e)?Sw(r,n):(t.flags=t.flags&-4097|2,tt=!1,En=t)}}else{if(Dm(t))throw Error(ee(418));t.flags=t.flags&-4097|2,tt=!1,En=t}}}function Jv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function Zu(t){if(t!==En)return!1;if(!tt)return Jv(t),tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Am(t.type,t.memoizedProps)),e&&(e=Nn)){if(Dm(t))throw Iw(),Error(ee(418));for(;e;)Sw(t,e),e=Ui(e.nextSibling)}if(Jv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nn=Ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nn=null}}else Nn=En?Ui(t.stateNode.nextSibling):null;return!0}function Iw(){for(var t=Nn;t;)t=Ui(t.nextSibling)}function wo(){Nn=En=null,tt=!1}function dg(t){tr===null?tr=[t]:tr.push(t)}var vk=ui.ReactCurrentBatchConfig;function El(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(c){var h=i.refs;c===null?delete h[a]:h[a]=c},e._stringRef=a,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function qu(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yv(t){var e=t._init;return e(t._payload)}function Cw(t){function e(P,j){if(t){var S=P.deletions;S===null?(P.deletions=[j],P.flags|=16):S.push(j)}}function n(P,j){if(!t)return null;for(;j!==null;)e(P,j),j=j.sibling;return null}function r(P,j){for(P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function i(P,j){return P=$i(P,j),P.index=0,P.sibling=null,P}function a(P,j,S){return P.index=S,t?(S=P.alternate,S!==null?(S=S.index,S<j?(P.flags|=2,j):S):(P.flags|=2,j)):(P.flags|=1048576,j)}function c(P){return t&&P.alternate===null&&(P.flags|=2),P}function h(P,j,S,H){return j===null||j.tag!==6?(j=Zf(S,P.mode,H),j.return=P,j):(j=i(j,S),j.return=P,j)}function f(P,j,S,H){var F=S.type;return F===Qa?y(P,j,S.props.children,H,S.key):j!==null&&(j.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ti&&Yv(F)===j.type)?(H=i(j,S.props),H.ref=El(P,j,S),H.return=P,H):(H=yd(S.type,S.key,S.props,null,P.mode,H),H.ref=El(P,j,S),H.return=P,H)}function m(P,j,S,H){return j===null||j.tag!==4||j.stateNode.containerInfo!==S.containerInfo||j.stateNode.implementation!==S.implementation?(j=qf(S,P.mode,H),j.return=P,j):(j=i(j,S.children||[]),j.return=P,j)}function y(P,j,S,H,F){return j===null||j.tag!==7?(j=Bs(S,P.mode,H,F),j.return=P,j):(j=i(j,S),j.return=P,j)}function x(P,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Zf(""+j,P.mode,S),j.return=P,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Du:return S=yd(j.type,j.key,j.props,null,P.mode,S),S.ref=El(P,null,j),S.return=P,S;case Ga:return j=qf(j,P.mode,S),j.return=P,j;case Ti:var H=j._init;return x(P,H(j._payload),S)}if(Cl(j)||wl(j))return j=Bs(j,P.mode,S,null),j.return=P,j;qu(P,j)}return null}function w(P,j,S,H){var F=j!==null?j.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return F!==null?null:h(P,j,""+S,H);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Du:return S.key===F?f(P,j,S,H):null;case Ga:return S.key===F?m(P,j,S,H):null;case Ti:return F=S._init,w(P,j,F(S._payload),H)}if(Cl(S)||wl(S))return F!==null?null:y(P,j,S,H,null);qu(P,S)}return null}function R(P,j,S,H,F){if(typeof H=="string"&&H!==""||typeof H=="number")return P=P.get(S)||null,h(j,P,""+H,F);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Du:return P=P.get(H.key===null?S:H.key)||null,f(j,P,H,F);case Ga:return P=P.get(H.key===null?S:H.key)||null,m(j,P,H,F);case Ti:var B=H._init;return R(P,j,S,B(H._payload),F)}if(Cl(H)||wl(H))return P=P.get(S)||null,y(j,P,H,F,null);qu(j,H)}return null}function M(P,j,S,H){for(var F=null,B=null,I=j,N=j=0,O=null;I!==null&&N<S.length;N++){I.index>N?(O=I,I=null):O=I.sibling;var k=w(P,I,S[N],H);if(k===null){I===null&&(I=O);break}t&&I&&k.alternate===null&&e(P,I),j=a(k,j,N),B===null?F=k:B.sibling=k,B=k,I=O}if(N===S.length)return n(P,I),tt&&zs(P,N),F;if(I===null){for(;N<S.length;N++)I=x(P,S[N],H),I!==null&&(j=a(I,j,N),B===null?F=I:B.sibling=I,B=I);return tt&&zs(P,N),F}for(I=r(P,I);N<S.length;N++)O=R(I,P,N,S[N],H),O!==null&&(t&&O.alternate!==null&&I.delete(O.key===null?N:O.key),j=a(O,j,N),B===null?F=O:B.sibling=O,B=O);return t&&I.forEach(function(E){return e(P,E)}),tt&&zs(P,N),F}function C(P,j,S,H){var F=wl(S);if(typeof F!="function")throw Error(ee(150));if(S=F.call(S),S==null)throw Error(ee(151));for(var B=F=null,I=j,N=j=0,O=null,k=S.next();I!==null&&!k.done;N++,k=S.next()){I.index>N?(O=I,I=null):O=I.sibling;var E=w(P,I,k.value,H);if(E===null){I===null&&(I=O);break}t&&I&&E.alternate===null&&e(P,I),j=a(E,j,N),B===null?F=E:B.sibling=E,B=E,I=O}if(k.done)return n(P,I),tt&&zs(P,N),F;if(I===null){for(;!k.done;N++,k=S.next())k=x(P,k.value,H),k!==null&&(j=a(k,j,N),B===null?F=k:B.sibling=k,B=k);return tt&&zs(P,N),F}for(I=r(P,I);!k.done;N++,k=S.next())k=R(I,P,N,k.value,H),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?N:k.key),j=a(k,j,N),B===null?F=k:B.sibling=k,B=k);return t&&I.forEach(function(z){return e(P,z)}),tt&&zs(P,N),F}function A(P,j,S,H){if(typeof S=="object"&&S!==null&&S.type===Qa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Du:e:{for(var F=S.key,B=j;B!==null;){if(B.key===F){if(F=S.type,F===Qa){if(B.tag===7){n(P,B.sibling),j=i(B,S.props.children),j.return=P,P=j;break e}}else if(B.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ti&&Yv(F)===B.type){n(P,B.sibling),j=i(B,S.props),j.ref=El(P,B,S),j.return=P,P=j;break e}n(P,B);break}else e(P,B);B=B.sibling}S.type===Qa?(j=Bs(S.props.children,P.mode,H,S.key),j.return=P,P=j):(H=yd(S.type,S.key,S.props,null,P.mode,H),H.ref=El(P,j,S),H.return=P,P=H)}return c(P);case Ga:e:{for(B=S.key;j!==null;){if(j.key===B)if(j.tag===4&&j.stateNode.containerInfo===S.containerInfo&&j.stateNode.implementation===S.implementation){n(P,j.sibling),j=i(j,S.children||[]),j.return=P,P=j;break e}else{n(P,j);break}else e(P,j);j=j.sibling}j=qf(S,P.mode,H),j.return=P,P=j}return c(P);case Ti:return B=S._init,A(P,j,B(S._payload),H)}if(Cl(S))return M(P,j,S,H);if(wl(S))return C(P,j,S,H);qu(P,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,j!==null&&j.tag===6?(n(P,j.sibling),j=i(j,S),j.return=P,P=j):(n(P,j),j=Zf(S,P.mode,H),j.return=P,P=j),c(P)):n(P,j)}return A}var bo=Cw(!0),Aw=Cw(!1),Ud=fs(null),Bd=null,io=null,hg=null;function fg(){hg=io=Bd=null}function mg(t){var e=Ud.current;Je(Ud),t._currentValue=e}function Mm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fo(t,e){Bd=t,hg=io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function Hn(t){var e=t._currentValue;if(hg!==t)if(t={context:t,memoizedValue:e,next:null},io===null){if(Bd===null)throw Error(ee(308));io=t,Bd.dependencies={lanes:0,firstContext:t}}else io=io.next=t;return e}var Ms=null;function pg(t){Ms===null?Ms=[t]:Ms.push(t)}function Rw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pg(e)):(n.next=i.next,i.next=n),e.interleaved=n,ii(t,r)}function ii(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ei=!1;function gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ii(t,n)}return i=r.interleaved,i===null?(e.next=e,pg(r)):(e.next=i.next,i.next=e),r.interleaved=e,ii(t,n)}function dd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tg(t,n)}}function Xv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=c:a=a.next=c,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wd(t,e,n,r){var i=t.updateQueue;Ei=!1;var a=i.firstBaseUpdate,c=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var f=h,m=f.next;f.next=null,c===null?a=m:c.next=m,c=f;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==c&&(h===null?y.firstBaseUpdate=m:h.next=m,y.lastBaseUpdate=f))}if(a!==null){var x=i.baseState;c=0,y=m=f=null,h=a;do{var w=h.lane,R=h.eventTime;if((r&w)===w){y!==null&&(y=y.next={eventTime:R,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var M=t,C=h;switch(w=e,R=n,C.tag){case 1:if(M=C.payload,typeof M=="function"){x=M.call(R,x,w);break e}x=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=C.payload,w=typeof M=="function"?M.call(R,x,w):M,w==null)break e;x=ct({},x,w);break e;case 2:Ei=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[h]:w.push(h))}else R={eventTime:R,lane:w,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(m=y=R,f=x):y=y.next=R,c|=w;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;w=h,h=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(y===null&&(f=x),i.baseState=f,i.firstBaseUpdate=m,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do c|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Gs|=c,t.lanes=c,t.memoizedState=x}}function e0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var Mc={},_r=fs(Mc),gc=fs(Mc),yc=fs(Mc);function Vs(t){if(t===Mc)throw Error(ee(174));return t}function yg(t,e){switch(Ke(yc,e),Ke(gc,t),Ke(_r,Mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vm(e,t)}Je(_r),Ke(_r,e)}function No(){Je(_r),Je(gc),Je(yc)}function Lw(t){Vs(yc.current);var e=Vs(_r.current),n=vm(e,t.type);e!==n&&(Ke(gc,t),Ke(_r,n))}function vg(t){gc.current===t&&(Je(_r),Je(gc))}var at=fs(0);function Hd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ff=[];function xg(){for(var t=0;t<Ff.length;t++)Ff[t]._workInProgressVersionPrimary=null;Ff.length=0}var hd=ui.ReactCurrentDispatcher,Uf=ui.ReactCurrentBatchConfig,Ks=0,lt=null,kt=null,Ot=null,$d=!1,$l=!1,vc=0,xk=0;function qt(){throw Error(ee(321))}function _g(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!or(t[n],e[n]))return!1;return!0}function wg(t,e,n,r,i,a){if(Ks=a,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hd.current=t===null||t.memoizedState===null?Nk:jk,t=n(r,i),$l){a=0;do{if($l=!1,vc=0,25<=a)throw Error(ee(301));a+=1,Ot=kt=null,e.updateQueue=null,hd.current=Tk,t=n(r,i)}while($l)}if(hd.current=Zd,e=kt!==null&&kt.next!==null,Ks=0,Ot=kt=lt=null,$d=!1,e)throw Error(ee(300));return t}function bg(){var t=vc!==0;return vc=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?lt.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function $n(){if(kt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=Ot===null?lt.memoizedState:Ot.next;if(e!==null)Ot=e,kt=t;else{if(t===null)throw Error(ee(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ot===null?lt.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function xc(t,e){return typeof e=="function"?e(t):e}function Bf(t){var e=$n(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=kt,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var c=i.next;i.next=a.next,a.next=c}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var h=c=null,f=null,m=a;do{var y=m.lane;if((Ks&y)===y)f!==null&&(f=f.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var x={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};f===null?(h=f=x,c=r):f=f.next=x,lt.lanes|=y,Gs|=y}m=m.next}while(m!==null&&m!==a);f===null?c=r:f.next=h,or(r,e.memoizedState)||(mn=!0),e.memoizedState=r,e.baseState=c,e.baseQueue=f,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,lt.lanes|=a,Gs|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wf(t){var e=$n(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var c=i=i.next;do a=t(a,c.action),c=c.next;while(c!==i);or(a,e.memoizedState)||(mn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Dw(){}function Ow(t,e){var n=lt,r=$n(),i=e(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,mn=!0),r=r.queue,Ng(Fw.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,_c(9,Vw.bind(null,n,r,i,e),void 0,null),Mt===null)throw Error(ee(349));Ks&30||Mw(n,e,i)}return i}function Mw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vw(t,e,n,r){e.value=n,e.getSnapshot=r,Uw(e)&&Bw(t)}function Fw(t,e,n){return n(function(){Uw(e)&&Bw(t)})}function Uw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!or(t,n)}catch{return!0}}function Bw(t){var e=ii(t,1);e!==null&&ir(e,t,1,-1)}function t0(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xc,lastRenderedState:t},e.queue=t,t=t.dispatch=bk.bind(null,lt,t),[e.memoizedState,t]}function _c(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ww(){return $n().memoizedState}function fd(t,e,n,r){var i=mr();lt.flags|=t,i.memoizedState=_c(1|e,n,void 0,r===void 0?null:r)}function Sh(t,e,n,r){var i=$n();r=r===void 0?null:r;var a=void 0;if(kt!==null){var c=kt.memoizedState;if(a=c.destroy,r!==null&&_g(r,c.deps)){i.memoizedState=_c(e,n,a,r);return}}lt.flags|=t,i.memoizedState=_c(1|e,n,a,r)}function n0(t,e){return fd(8390656,8,t,e)}function Ng(t,e){return Sh(2048,8,t,e)}function Hw(t,e){return Sh(4,2,t,e)}function $w(t,e){return Sh(4,4,t,e)}function Zw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qw(t,e,n){return n=n!=null?n.concat([t]):null,Sh(4,4,Zw.bind(null,e,t),n)}function jg(){}function Kw(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_g(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gw(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_g(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qw(t,e,n){return Ks&21?(or(n,e)||(n=tw(),lt.lanes|=n,Gs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function _k(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var r=Uf.transition;Uf.transition={};try{t(!1),e()}finally{He=n,Uf.transition=r}}function Jw(){return $n().memoizedState}function wk(t,e,n){var r=Hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yw(t))Xw(e,n);else if(n=Rw(t,e,n,r),n!==null){var i=an();ir(n,t,r,i),eb(n,e,r)}}function bk(t,e,n){var r=Hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yw(t))Xw(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var c=e.lastRenderedState,h=a(c,n);if(i.hasEagerState=!0,i.eagerState=h,or(h,c)){var f=e.interleaved;f===null?(i.next=i,pg(e)):(i.next=f.next,f.next=i),e.interleaved=i;return}}catch{}finally{}n=Rw(t,e,i,r),n!==null&&(i=an(),ir(n,t,r,i),eb(n,e,r))}}function Yw(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function Xw(t,e){$l=$d=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function eb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tg(t,n)}}var Zd={readContext:Hn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},Nk={readContext:Hn,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:Hn,useEffect:n0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fd(4194308,4,Zw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fd(4194308,4,t,e)},useInsertionEffect:function(t,e){return fd(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wk.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:t0,useDebugValue:jg,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=t0(!1),e=t[0];return t=_k.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,i=mr();if(tt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Mt===null)throw Error(ee(349));Ks&30||Mw(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,n0(Fw.bind(null,r,a,t),[t]),r.flags|=2048,_c(9,Vw.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=mr(),e=Mt.identifierPrefix;if(tt){var n=Qr,r=Gr;n=(r&~(1<<32-rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jk={readContext:Hn,useCallback:Kw,useContext:Hn,useEffect:Ng,useImperativeHandle:qw,useInsertionEffect:Hw,useLayoutEffect:$w,useMemo:Gw,useReducer:Bf,useRef:Ww,useState:function(){return Bf(xc)},useDebugValue:jg,useDeferredValue:function(t){var e=$n();return Qw(e,kt.memoizedState,t)},useTransition:function(){var t=Bf(xc)[0],e=$n().memoizedState;return[t,e]},useMutableSource:Dw,useSyncExternalStore:Ow,useId:Jw,unstable_isNewReconciler:!1},Tk={readContext:Hn,useCallback:Kw,useContext:Hn,useEffect:Ng,useImperativeHandle:qw,useInsertionEffect:Hw,useLayoutEffect:$w,useMemo:Gw,useReducer:Wf,useRef:Ww,useState:function(){return Wf(xc)},useDebugValue:jg,useDeferredValue:function(t){var e=$n();return kt===null?e.memoizedState=t:Qw(e,kt.memoizedState,t)},useTransition:function(){var t=Wf(xc)[0],e=$n().memoizedState;return[t,e]},useMutableSource:Dw,useSyncExternalStore:Ow,useId:Jw,unstable_isNewReconciler:!1};function Xn(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ih={isMounted:function(t){return(t=t._reactInternals)?oa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),i=Hi(t),a=ei(r,i);a.payload=e,n!=null&&(a.callback=n),e=Bi(t,a,i),e!==null&&(ir(e,t,i,r),dd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),i=Hi(t),a=ei(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Bi(t,a,i),e!==null&&(ir(e,t,i,r),dd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=Hi(t),i=ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bi(t,i,r),e!==null&&(ir(e,t,r,n),dd(e,t,r))}};function r0(t,e,n,r,i,a,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,c):e.prototype&&e.prototype.isPureReactComponent?!hc(n,r)||!hc(i,a):!0}function tb(t,e,n){var r=!1,i=Xi,a=e.contextType;return typeof a=="object"&&a!==null?a=Hn(a):(i=gn(e)?Zs:Xt.current,r=e.contextTypes,a=(r=r!=null)?_o(t,i):Xi),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ih,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function i0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ih.enqueueReplaceState(e,e.state,null)}function Fm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gg(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Hn(a):(a=gn(e)?Zs:Xt.current,i.context=_o(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Vm(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ih.enqueueReplaceState(i,i.state,null),Wd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function jo(t,e){try{var n="",r=e;do n+=XT(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Hf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Um(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ek=typeof WeakMap=="function"?WeakMap:Map;function nb(t,e,n){n=ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kd||(Kd=!0,Jm=r),Um(t,e)},n}function rb(t,e,n){n=ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Um(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Um(t,e),typeof r!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function s0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ek;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Fk.bind(null,t,e,n),e.then(t,t))}function a0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function o0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ei(-1,1),e.tag=2,Bi(n,e,1))),n.lanes|=1),t)}var kk=ui.ReactCurrentOwner,mn=!1;function sn(t,e,n,r){e.child=t===null?Aw(e,null,n,r):bo(e,t.child,n,r)}function l0(t,e,n,r,i){n=n.render;var a=e.ref;return fo(e,i),r=wg(t,e,n,r,a,i),n=bg(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,si(t,e,i)):(tt&&n&&cg(e),e.flags|=1,sn(t,e,r,i),e.child)}function c0(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!Ag(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,ib(t,e,a,r,i)):(t=yd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var c=a.memoizedProps;if(n=n.compare,n=n!==null?n:hc,n(c,r)&&t.ref===e.ref)return si(t,e,i)}return e.flags|=1,t=$i(a,r),t.ref=e.ref,t.return=e,e.child=t}function ib(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(hc(a,r)&&t.ref===e.ref)if(mn=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,si(t,e,i)}return Bm(t,e,n,r,i)}function sb(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ao,wn),wn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(ao,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ke(ao,wn),wn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Ke(ao,wn),wn|=r;return sn(t,e,i,n),e.child}function ab(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bm(t,e,n,r,i){var a=gn(n)?Zs:Xt.current;return a=_o(e,a),fo(e,i),n=wg(t,e,n,r,a,i),r=bg(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,si(t,e,i)):(tt&&r&&cg(e),e.flags|=1,sn(t,e,n,i),e.child)}function u0(t,e,n,r,i){if(gn(n)){var a=!0;Md(e)}else a=!1;if(fo(e,i),e.stateNode===null)md(t,e),tb(e,n,r),Fm(e,n,r,i),r=!0;else if(t===null){var c=e.stateNode,h=e.memoizedProps;c.props=h;var f=c.context,m=n.contextType;typeof m=="object"&&m!==null?m=Hn(m):(m=gn(n)?Zs:Xt.current,m=_o(e,m));var y=n.getDerivedStateFromProps,x=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function";x||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==r||f!==m)&&i0(e,c,r,m),Ei=!1;var w=e.memoizedState;c.state=w,Wd(e,r,c,i),f=e.memoizedState,h!==r||w!==f||pn.current||Ei?(typeof y=="function"&&(Vm(e,n,y,r),f=e.memoizedState),(h=Ei||r0(e,n,h,r,w,f,m))?(x||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),c.props=r,c.state=f,c.context=m,r=h):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{c=e.stateNode,zw(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:Xn(e.type,h),c.props=m,x=e.pendingProps,w=c.context,f=n.contextType,typeof f=="object"&&f!==null?f=Hn(f):(f=gn(n)?Zs:Xt.current,f=_o(e,f));var R=n.getDerivedStateFromProps;(y=typeof R=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==x||w!==f)&&i0(e,c,r,f),Ei=!1,w=e.memoizedState,c.state=w,Wd(e,r,c,i);var M=e.memoizedState;h!==x||w!==M||pn.current||Ei?(typeof R=="function"&&(Vm(e,n,R,r),M=e.memoizedState),(m=Ei||r0(e,n,m,r,w,M,f)||!1)?(y||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,M,f),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,M,f)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=M),c.props=r,c.state=M,c.context=f,r=m):(typeof c.componentDidUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Wm(t,e,n,r,a,i)}function Wm(t,e,n,r,i,a){ab(t,e);var c=(e.flags&128)!==0;if(!r&&!c)return i&&Gv(e,n,!1),si(t,e,a);r=e.stateNode,kk.current=e;var h=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&c?(e.child=bo(e,t.child,null,a),e.child=bo(e,null,h,a)):sn(t,e,h,a),e.memoizedState=r.state,i&&Gv(e,n,!0),e.child}function ob(t){var e=t.stateNode;e.pendingContext?Kv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kv(t,e.context,!1),yg(t,e.containerInfo)}function d0(t,e,n,r,i){return wo(),dg(i),e.flags|=256,sn(t,e,n,r),e.child}var Hm={dehydrated:null,treeContext:null,retryLane:0};function $m(t){return{baseLanes:t,cachePool:null,transitions:null}}function lb(t,e,n){var r=e.pendingProps,i=at.current,a=!1,c=(e.flags&128)!==0,h;if((h=c)||(h=t!==null&&t.memoizedState===null?!1:(i&2)!==0),h?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ke(at,i&1),t===null)return Om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=r.children,t=r.fallback,a?(r=e.mode,a=e.child,c={mode:"hidden",children:c},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=c):a=Rh(c,r,0,null),t=Bs(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=$m(n),e.memoizedState=Hm,t):Tg(e,c));if(i=t.memoizedState,i!==null&&(h=i.dehydrated,h!==null))return Pk(t,e,c,r,h,i,n);if(a){a=r.fallback,c=e.mode,i=t.child,h=i.sibling;var f={mode:"hidden",children:r.children};return!(c&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=$i(i,f),r.subtreeFlags=i.subtreeFlags&14680064),h!==null?a=$i(h,a):(a=Bs(a,c,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,c=t.child.memoizedState,c=c===null?$m(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=t.childLanes&~n,e.memoizedState=Hm,r}return a=t.child,t=a.sibling,r=$i(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tg(t,e){return e=Rh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ku(t,e,n,r){return r!==null&&dg(r),bo(e,t.child,null,n),t=Tg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Pk(t,e,n,r,i,a,c){if(n)return e.flags&256?(e.flags&=-257,r=Hf(Error(ee(422))),Ku(t,e,c,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Rh({mode:"visible",children:r.children},i,0,null),a=Bs(a,i,c,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&bo(e,t.child,null,c),e.child.memoizedState=$m(c),e.memoizedState=Hm,a);if(!(e.mode&1))return Ku(t,e,c,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var h=r.dgst;return r=h,a=Error(ee(419)),r=Hf(a,r,void 0),Ku(t,e,c,r)}if(h=(c&t.childLanes)!==0,mn||h){if(r=Mt,r!==null){switch(c&-c){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|c)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ii(t,i),ir(r,t,i,-1))}return Cg(),r=Hf(Error(ee(421))),Ku(t,e,c,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Uk.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Nn=Ui(i.nextSibling),En=e,tt=!0,tr=null,t!==null&&(Mn[Vn++]=Gr,Mn[Vn++]=Qr,Mn[Vn++]=qs,Gr=t.id,Qr=t.overflow,qs=e),e=Tg(e,r.children),e.flags|=4096,e)}function h0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mm(t.return,e,n)}function $f(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function cb(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(sn(t,e,r.children,n),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&h0(t,n,e);else if(t.tag===19)h0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(at,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$f(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$f(e,!0,n,null,a);break;case"together":$f(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function md(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=$i(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$i(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Sk(t,e,n){switch(e.tag){case 3:ob(e),wo();break;case 5:Lw(e);break;case 1:gn(e.type)&&Md(e);break;case 4:yg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ke(Ud,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?lb(t,e,n):(Ke(at,at.current&1),t=si(t,e,n),t!==null?t.sibling:null);Ke(at,at.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ke(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,sb(t,e,n)}return si(t,e,n)}var ub,Zm,db,hb;ub=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zm=function(){};db=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Vs(_r.current);var a=null;switch(n){case"input":i=mm(t,i),r=mm(t,r),a=[];break;case"select":i=ct({},i,{value:void 0}),r=ct({},r,{value:void 0}),a=[];break;case"textarea":i=ym(t,i),r=ym(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dd)}xm(n,r);var c;n=null;for(m in i)if(!r.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var h=i[m];for(c in h)h.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(sc.hasOwnProperty(m)?a||(a=[]):(a=a||[]).push(m,null));for(m in r){var f=r[m];if(h=i!=null?i[m]:void 0,r.hasOwnProperty(m)&&f!==h&&(f!=null||h!=null))if(m==="style")if(h){for(c in h)!h.hasOwnProperty(c)||f&&f.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in f)f.hasOwnProperty(c)&&h[c]!==f[c]&&(n||(n={}),n[c]=f[c])}else n||(a||(a=[]),a.push(m,n)),n=f;else m==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(a=a||[]).push(m,f)):m==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(m,""+f):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(sc.hasOwnProperty(m)?(f!=null&&m==="onScroll"&&Ge("scroll",t),a||h===f||(a=[])):(a=a||[]).push(m,f))}n&&(a=a||[]).push("style",n);var m=a;(e.updateQueue=m)&&(e.flags|=4)}};hb=function(t,e,n,r){n!==r&&(e.flags|=4)};function kl(t,e){if(!tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ik(t,e,n){var r=e.pendingProps;switch(ug(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return gn(e.type)&&Od(),Kt(e),null;case 3:return r=e.stateNode,No(),Je(pn),Je(Xt),xg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(ep(tr),tr=null))),Zm(t,e),Kt(e),null;case 5:vg(e);var i=Vs(yc.current);if(n=e.type,t!==null&&e.stateNode!=null)db(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Kt(e),null}if(t=Vs(_r.current),Zu(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[gr]=e,r[pc]=a,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<Rl.length;i++)Ge(Rl[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":wv(r,a),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ge("invalid",r);break;case"textarea":Nv(r,a),Ge("invalid",r)}xm(n,a),i=null;for(var c in a)if(a.hasOwnProperty(c)){var h=a[c];c==="children"?typeof h=="string"?r.textContent!==h&&(a.suppressHydrationWarning!==!0&&$u(r.textContent,h,t),i=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(a.suppressHydrationWarning!==!0&&$u(r.textContent,h,t),i=["children",""+h]):sc.hasOwnProperty(c)&&h!=null&&c==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Ou(r),bv(r,a,!0);break;case"textarea":Ou(r),jv(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Dd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{c=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=F_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),n==="select"&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[gr]=e,t[pc]=r,ub(t,e,!1,!1),e.stateNode=t;e:{switch(c=_m(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rl.length;i++)Ge(Rl[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":wv(t,r),i=mm(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ct({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":Nv(t,r),i=ym(t,r),Ge("invalid",t);break;default:i=r}xm(n,i),h=i;for(a in h)if(h.hasOwnProperty(a)){var f=h[a];a==="style"?W_(t,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&U_(t,f)):a==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&ac(t,f):typeof f=="number"&&ac(t,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(sc.hasOwnProperty(a)?f!=null&&a==="onScroll"&&Ge("scroll",t):f!=null&&Gp(t,a,f,c))}switch(n){case"input":Ou(t),bv(t,r,!1);break;case"textarea":Ou(t),jv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yi(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?lo(t,!!r.multiple,a,!1):r.defaultValue!=null&&lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Dd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)hb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Vs(yc.current),Vs(_r.current),Zu(e)){if(r=e.stateNode,n=e.memoizedProps,r[gr]=e,(a=r.nodeValue!==n)&&(t=En,t!==null))switch(t.tag){case 3:$u(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$u(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gr]=e,e.stateNode=r}return Kt(e),null;case 13:if(Je(at),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&Nn!==null&&e.mode&1&&!(e.flags&128))Iw(),wo(),e.flags|=98560,a=!1;else if(a=Zu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ee(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ee(317));a[gr]=e}else wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),a=!1}else tr!==null&&(ep(tr),tr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?It===0&&(It=3):Cg())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return No(),Zm(t,e),t===null&&fc(e.stateNode.containerInfo),Kt(e),null;case 10:return mg(e.type._context),Kt(e),null;case 17:return gn(e.type)&&Od(),Kt(e),null;case 19:if(Je(at),a=e.memoizedState,a===null)return Kt(e),null;if(r=(e.flags&128)!==0,c=a.rendering,c===null)if(r)kl(a,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=Hd(t),c!==null){for(e.flags|=128,kl(a,!1),r=c.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,c=a.alternate,c===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,t=c.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(at,at.current&1|2),e.child}t=t.sibling}a.tail!==null&&vt()>To&&(e.flags|=128,r=!0,kl(a,!1),e.lanes=4194304)}else{if(!r)if(t=Hd(c),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),kl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!tt)return Kt(e),null}else 2*vt()-a.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,r=!0,kl(a,!1),e.lanes=4194304);a.isBackwards?(c.sibling=e.child,e.child=c):(n=a.last,n!==null?n.sibling=c:e.child=c,a.last=c)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=vt(),e.sibling=null,n=at.current,Ke(at,r?n&1|2:n&1),e):(Kt(e),null);case 22:case 23:return Ig(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function Ck(t,e){switch(ug(e),e.tag){case 1:return gn(e.type)&&Od(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return No(),Je(pn),Je(Xt),xg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vg(e),null;case 13:if(Je(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(at),null;case 4:return No(),null;case 10:return mg(e.type._context),null;case 22:case 23:return Ig(),null;case 24:return null;default:return null}}var Gu=!1,Jt=!1,Ak=typeof WeakSet=="function"?WeakSet:Set,le=null;function so(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function qm(t,e,n){try{n()}catch(r){ft(t,e,r)}}var f0=!1;function Rk(t,e){if(Im=Rd,t=yw(),lg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var c=0,h=-1,f=-1,m=0,y=0,x=t,w=null;t:for(;;){for(var R;x!==n||i!==0&&x.nodeType!==3||(h=c+i),x!==a||r!==0&&x.nodeType!==3||(f=c+r),x.nodeType===3&&(c+=x.nodeValue.length),(R=x.firstChild)!==null;)w=x,x=R;for(;;){if(x===t)break t;if(w===n&&++m===i&&(h=c),w===a&&++y===r&&(f=c),(R=x.nextSibling)!==null)break;x=w,w=x.parentNode}x=R}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cm={focusedElem:t,selectionRange:n},Rd=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var C=M.memoizedProps,A=M.memoizedState,P=e.stateNode,j=P.getSnapshotBeforeUpdate(e.elementType===e.type?C:Xn(e.type,C),A);P.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(H){ft(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return M=f0,f0=!1,M}function Zl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&qm(e,n,a)}i=i.next}while(i!==r)}}function Ch(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Km(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fb(t){var e=t.alternate;e!==null&&(t.alternate=null,fb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[pc],delete e[zm],delete e[pk],delete e[gk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mb(t){return t.tag===5||t.tag===3||t.tag===4}function m0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dd));else if(r!==4&&(t=t.child,t!==null))for(Gm(t,e,n),t=t.sibling;t!==null;)Gm(t,e,n),t=t.sibling}function Qm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qm(t,e,n),t=t.sibling;t!==null;)Qm(t,e,n),t=t.sibling}var Ut=null,er=!1;function Ni(t,e,n){for(n=n.child;n!==null;)pb(t,e,n),n=n.sibling}function pb(t,e,n){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(Nh,n)}catch{}switch(n.tag){case 5:Jt||so(n,e);case 6:var r=Ut,i=er;Ut=null,Ni(t,e,n),Ut=r,er=i,Ut!==null&&(er?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(er?(t=Ut,n=n.stateNode,t.nodeType===8?Mf(t.parentNode,n):t.nodeType===1&&Mf(t,n),uc(t)):Mf(Ut,n.stateNode));break;case 4:r=Ut,i=er,Ut=n.stateNode.containerInfo,er=!0,Ni(t,e,n),Ut=r,er=i;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,c=a.destroy;a=a.tag,c!==void 0&&(a&2||a&4)&&qm(n,e,c),i=i.next}while(i!==r)}Ni(t,e,n);break;case 1:if(!Jt&&(so(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){ft(n,e,h)}Ni(t,e,n);break;case 21:Ni(t,e,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,Ni(t,e,n),Jt=r):Ni(t,e,n);break;default:Ni(t,e,n)}}function p0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ak),e.forEach(function(r){var i=Bk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,c=e,h=c;e:for(;h!==null;){switch(h.tag){case 5:Ut=h.stateNode,er=!1;break e;case 3:Ut=h.stateNode.containerInfo,er=!0;break e;case 4:Ut=h.stateNode.containerInfo,er=!0;break e}h=h.return}if(Ut===null)throw Error(ee(160));pb(a,c,i),Ut=null,er=!1;var f=i.alternate;f!==null&&(f.return=null),i.return=null}catch(m){ft(i,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gb(e,t),e=e.sibling}function gb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yn(e,t),fr(t),r&4){try{Zl(3,t,t.return),Ch(3,t)}catch(C){ft(t,t.return,C)}try{Zl(5,t,t.return)}catch(C){ft(t,t.return,C)}}break;case 1:Yn(e,t),fr(t),r&512&&n!==null&&so(n,n.return);break;case 5:if(Yn(e,t),fr(t),r&512&&n!==null&&so(n,n.return),t.flags&32){var i=t.stateNode;try{ac(i,"")}catch(C){ft(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,c=n!==null?n.memoizedProps:a,h=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{h==="input"&&a.type==="radio"&&a.name!=null&&M_(i,a),_m(h,c);var m=_m(h,a);for(c=0;c<f.length;c+=2){var y=f[c],x=f[c+1];y==="style"?W_(i,x):y==="dangerouslySetInnerHTML"?U_(i,x):y==="children"?ac(i,x):Gp(i,y,x,m)}switch(h){case"input":pm(i,a);break;case"textarea":V_(i,a);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var R=a.value;R!=null?lo(i,!!a.multiple,R,!1):w!==!!a.multiple&&(a.defaultValue!=null?lo(i,!!a.multiple,a.defaultValue,!0):lo(i,!!a.multiple,a.multiple?[]:"",!1))}i[pc]=a}catch(C){ft(t,t.return,C)}}break;case 6:if(Yn(e,t),fr(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(C){ft(t,t.return,C)}}break;case 3:if(Yn(e,t),fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uc(e.containerInfo)}catch(C){ft(t,t.return,C)}break;case 4:Yn(e,t),fr(t);break;case 13:Yn(e,t),fr(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Pg=vt())),r&4&&p0(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(m=Jt)||y,Yn(e,t),Jt=m):Yn(e,t),fr(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!y&&t.mode&1)for(le=t,y=t.child;y!==null;){for(x=le=y;le!==null;){switch(w=le,R=w.child,w.tag){case 0:case 11:case 14:case 15:Zl(4,w,w.return);break;case 1:so(w,w.return);var M=w.stateNode;if(typeof M.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(C){ft(r,n,C)}}break;case 5:so(w,w.return);break;case 22:if(w.memoizedState!==null){y0(x);continue}}R!==null?(R.return=w,le=R):y0(x)}y=y.sibling}e:for(y=null,x=t;;){if(x.tag===5){if(y===null){y=x;try{i=x.stateNode,m?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(h=x.stateNode,f=x.memoizedProps.style,c=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=B_("display",c))}catch(C){ft(t,t.return,C)}}}else if(x.tag===6){if(y===null)try{x.stateNode.nodeValue=m?"":x.memoizedProps}catch(C){ft(t,t.return,C)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;y===x&&(y=null),x=x.return}y===x&&(y=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Yn(e,t),fr(t),r&4&&p0(t);break;case 21:break;default:Yn(e,t),fr(t)}}function fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mb(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ac(i,""),r.flags&=-33);var a=m0(t);Qm(t,a,i);break;case 3:case 4:var c=r.stateNode.containerInfo,h=m0(t);Gm(t,h,c);break;default:throw Error(ee(161))}}catch(f){ft(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zk(t,e,n){le=t,yb(t)}function yb(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var i=le,a=i.child;if(i.tag===22&&r){var c=i.memoizedState!==null||Gu;if(!c){var h=i.alternate,f=h!==null&&h.memoizedState!==null||Jt;h=Gu;var m=Jt;if(Gu=c,(Jt=f)&&!m)for(le=i;le!==null;)c=le,f=c.child,c.tag===22&&c.memoizedState!==null?v0(i):f!==null?(f.return=c,le=f):v0(i);for(;a!==null;)le=a,yb(a),a=a.sibling;le=i,Gu=h,Jt=m}g0(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,le=a):g0(t)}}function g0(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||Ch(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&e0(e,a,r);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e0(e,c,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var x=y.dehydrated;x!==null&&uc(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Jt||e.flags&512&&Km(e)}catch(w){ft(e,e.return,w)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function y0(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function v0(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ch(4,e)}catch(f){ft(e,n,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(f){ft(e,i,f)}}var a=e.return;try{Km(e)}catch(f){ft(e,a,f)}break;case 5:var c=e.return;try{Km(e)}catch(f){ft(e,c,f)}}}catch(f){ft(e,e.return,f)}if(e===t){le=null;break}var h=e.sibling;if(h!==null){h.return=e.return,le=h;break}le=e.return}}var Lk=Math.ceil,qd=ui.ReactCurrentDispatcher,Eg=ui.ReactCurrentOwner,Wn=ui.ReactCurrentBatchConfig,Fe=0,Mt=null,Tt=null,Ht=0,wn=0,ao=fs(0),It=0,wc=null,Gs=0,Ah=0,kg=0,ql=null,hn=null,Pg=0,To=1/0,qr=null,Kd=!1,Jm=null,Wi=null,Qu=!1,Li=null,Gd=0,Kl=0,Ym=null,pd=-1,gd=0;function an(){return Fe&6?vt():pd!==-1?pd:pd=vt()}function Hi(t){return t.mode&1?Fe&2&&Ht!==0?Ht&-Ht:vk.transition!==null?(gd===0&&(gd=tw()),gd):(t=He,t!==0||(t=window.event,t=t===void 0?16:lw(t.type)),t):1}function ir(t,e,n,r){if(50<Kl)throw Kl=0,Ym=null,Error(ee(185));Lc(t,n,r),(!(Fe&2)||t!==Mt)&&(t===Mt&&(!(Fe&2)&&(Ah|=n),It===4&&Pi(t,Ht)),yn(t,r),n===1&&Fe===0&&!(e.mode&1)&&(To=vt()+500,Ph&&ms()))}function yn(t,e){var n=t.callbackNode;vE(t,e);var r=Ad(t,t===Mt?Ht:0);if(r===0)n!==null&&kv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kv(n),e===1)t.tag===0?yk(x0.bind(null,t)):kw(x0.bind(null,t)),fk(function(){!(Fe&6)&&ms()}),n=null;else{switch(nw(r)){case 1:n=eg;break;case 4:n=X_;break;case 16:n=Cd;break;case 536870912:n=ew;break;default:n=Cd}n=Tb(n,vb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vb(t,e){if(pd=-1,gd=0,Fe&6)throw Error(ee(327));var n=t.callbackNode;if(mo()&&t.callbackNode!==n)return null;var r=Ad(t,t===Mt?Ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qd(t,r);else{e=r;var i=Fe;Fe|=2;var a=_b();(Mt!==t||Ht!==e)&&(qr=null,To=vt()+500,Us(t,e));do try{Mk();break}catch(h){xb(t,h)}while(!0);fg(),qd.current=a,Fe=i,Tt!==null?e=0:(Mt=null,Ht=0,e=It)}if(e!==0){if(e===2&&(i=Tm(t),i!==0&&(r=i,e=Xm(t,i))),e===1)throw n=wc,Us(t,0),Pi(t,r),yn(t,vt()),n;if(e===6)Pi(t,r);else{if(i=t.current.alternate,!(r&30)&&!Dk(i)&&(e=Qd(t,r),e===2&&(a=Tm(t),a!==0&&(r=a,e=Xm(t,a))),e===1))throw n=wc,Us(t,0),Pi(t,r),yn(t,vt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:Ls(t,hn,qr);break;case 3:if(Pi(t,r),(r&130023424)===r&&(e=Pg+500-vt(),10<e)){if(Ad(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rm(Ls.bind(null,t,hn,qr),e);break}Ls(t,hn,qr);break;case 4:if(Pi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var c=31-rr(r);a=1<<c,c=e[c],c>i&&(i=c),r&=~a}if(r=i,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lk(r/1960))-r,10<r){t.timeoutHandle=Rm(Ls.bind(null,t,hn,qr),r);break}Ls(t,hn,qr);break;case 5:Ls(t,hn,qr);break;default:throw Error(ee(329))}}}return yn(t,vt()),t.callbackNode===n?vb.bind(null,t):null}function Xm(t,e){var n=ql;return t.current.memoizedState.isDehydrated&&(Us(t,e).flags|=256),t=Qd(t,e),t!==2&&(e=hn,hn=n,e!==null&&ep(e)),t}function ep(t){hn===null?hn=t:hn.push.apply(hn,t)}function Dk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pi(t,e){for(e&=~kg,e&=~Ah,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rr(e),r=1<<n;t[n]=-1,e&=~r}}function x0(t){if(Fe&6)throw Error(ee(327));mo();var e=Ad(t,0);if(!(e&1))return yn(t,vt()),null;var n=Qd(t,e);if(t.tag!==0&&n===2){var r=Tm(t);r!==0&&(e=r,n=Xm(t,r))}if(n===1)throw n=wc,Us(t,0),Pi(t,e),yn(t,vt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ls(t,hn,qr),yn(t,vt()),null}function Sg(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(To=vt()+500,Ph&&ms())}}function Qs(t){Li!==null&&Li.tag===0&&!(Fe&6)&&mo();var e=Fe;Fe|=1;var n=Wn.transition,r=He;try{if(Wn.transition=null,He=1,t)return t()}finally{He=r,Wn.transition=n,Fe=e,!(Fe&6)&&ms()}}function Ig(){wn=ao.current,Je(ao)}function Us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hk(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(ug(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Od();break;case 3:No(),Je(pn),Je(Xt),xg();break;case 5:vg(r);break;case 4:No();break;case 13:Je(at);break;case 19:Je(at);break;case 10:mg(r.type._context);break;case 22:case 23:Ig()}n=n.return}if(Mt=t,Tt=t=$i(t.current,null),Ht=wn=e,It=0,wc=null,kg=Ah=Gs=0,hn=ql=null,Ms!==null){for(e=0;e<Ms.length;e++)if(n=Ms[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var c=a.next;a.next=i,r.next=c}n.pending=r}Ms=null}return t}function xb(t,e){do{var n=Tt;try{if(fg(),hd.current=Zd,$d){for(var r=lt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$d=!1}if(Ks=0,Ot=kt=lt=null,$l=!1,vc=0,Eg.current=null,n===null||n.return===null){It=1,wc=e,Tt=null;break}e:{var a=t,c=n.return,h=n,f=e;if(e=Ht,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=f,y=h,x=y.tag;if(!(y.mode&1)&&(x===0||x===11||x===15)){var w=y.alternate;w?(y.updateQueue=w.updateQueue,y.memoizedState=w.memoizedState,y.lanes=w.lanes):(y.updateQueue=null,y.memoizedState=null)}var R=a0(c);if(R!==null){R.flags&=-257,o0(R,c,h,a,e),R.mode&1&&s0(a,m,e),e=R,f=m;var M=e.updateQueue;if(M===null){var C=new Set;C.add(f),e.updateQueue=C}else M.add(f);break e}else{if(!(e&1)){s0(a,m,e),Cg();break e}f=Error(ee(426))}}else if(tt&&h.mode&1){var A=a0(c);if(A!==null){!(A.flags&65536)&&(A.flags|=256),o0(A,c,h,a,e),dg(jo(f,h));break e}}a=f=jo(f,h),It!==4&&(It=2),ql===null?ql=[a]:ql.push(a),a=c;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var P=nb(a,f,e);Xv(a,P);break e;case 1:h=f;var j=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof j.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Wi===null||!Wi.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var H=rb(a,h,e);Xv(a,H);break e}}a=a.return}while(a!==null)}bb(n)}catch(F){e=F,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function _b(){var t=qd.current;return qd.current=Zd,t===null?Zd:t}function Cg(){(It===0||It===3||It===2)&&(It=4),Mt===null||!(Gs&268435455)&&!(Ah&268435455)||Pi(Mt,Ht)}function Qd(t,e){var n=Fe;Fe|=2;var r=_b();(Mt!==t||Ht!==e)&&(qr=null,Us(t,e));do try{Ok();break}catch(i){xb(t,i)}while(!0);if(fg(),Fe=n,qd.current=r,Tt!==null)throw Error(ee(261));return Mt=null,Ht=0,It}function Ok(){for(;Tt!==null;)wb(Tt)}function Mk(){for(;Tt!==null&&!cE();)wb(Tt)}function wb(t){var e=jb(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?bb(t):Tt=e,Eg.current=null}function bb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ck(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,Tt=null;return}}else if(n=Ik(n,e,wn),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);It===0&&(It=5)}function Ls(t,e,n){var r=He,i=Wn.transition;try{Wn.transition=null,He=1,Vk(t,e,n,r)}finally{Wn.transition=i,He=r}return null}function Vk(t,e,n,r){do mo();while(Li!==null);if(Fe&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(xE(t,a),t===Mt&&(Tt=Mt=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qu||(Qu=!0,Tb(Cd,function(){return mo(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Wn.transition,Wn.transition=null;var c=He;He=1;var h=Fe;Fe|=4,Eg.current=null,Rk(t,n),gb(n,t),sk(Cm),Rd=!!Im,Cm=Im=null,t.current=n,zk(n),uE(),Fe=h,He=c,Wn.transition=a}else t.current=n;if(Qu&&(Qu=!1,Li=t,Gd=i),a=t.pendingLanes,a===0&&(Wi=null),fE(n.stateNode),yn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kd)throw Kd=!1,t=Jm,Jm=null,t;return Gd&1&&t.tag!==0&&mo(),a=t.pendingLanes,a&1?t===Ym?Kl++:(Kl=0,Ym=t):Kl=0,ms(),null}function mo(){if(Li!==null){var t=nw(Gd),e=Wn.transition,n=He;try{if(Wn.transition=null,He=16>t?16:t,Li===null)var r=!1;else{if(t=Li,Li=null,Gd=0,Fe&6)throw Error(ee(331));var i=Fe;for(Fe|=4,le=t.current;le!==null;){var a=le,c=a.child;if(le.flags&16){var h=a.deletions;if(h!==null){for(var f=0;f<h.length;f++){var m=h[f];for(le=m;le!==null;){var y=le;switch(y.tag){case 0:case 11:case 15:Zl(8,y,a)}var x=y.child;if(x!==null)x.return=y,le=x;else for(;le!==null;){y=le;var w=y.sibling,R=y.return;if(fb(y),y===m){le=null;break}if(w!==null){w.return=R,le=w;break}le=R}}}var M=a.alternate;if(M!==null){var C=M.child;if(C!==null){M.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}le=a}}if(a.subtreeFlags&2064&&c!==null)c.return=a,le=c;else e:for(;le!==null;){if(a=le,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Zl(9,a,a.return)}var P=a.sibling;if(P!==null){P.return=a.return,le=P;break e}le=a.return}}var j=t.current;for(le=j;le!==null;){c=le;var S=c.child;if(c.subtreeFlags&2064&&S!==null)S.return=c,le=S;else e:for(c=j;le!==null;){if(h=le,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Ch(9,h)}}catch(F){ft(h,h.return,F)}if(h===c){le=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,le=H;break e}le=h.return}}if(Fe=i,ms(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(Nh,t)}catch{}r=!0}return r}finally{He=n,Wn.transition=e}}return!1}function _0(t,e,n){e=jo(n,e),e=nb(t,e,1),t=Bi(t,e,1),e=an(),t!==null&&(Lc(t,1,e),yn(t,e))}function ft(t,e,n){if(t.tag===3)_0(t,t,n);else for(;e!==null;){if(e.tag===3){_0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wi===null||!Wi.has(r))){t=jo(n,t),t=rb(e,t,1),e=Bi(e,t,1),t=an(),e!==null&&(Lc(e,1,t),yn(e,t));break}}e=e.return}}function Fk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Mt===t&&(Ht&n)===n&&(It===4||It===3&&(Ht&130023424)===Ht&&500>vt()-Pg?Us(t,0):kg|=n),yn(t,e)}function Nb(t,e){e===0&&(t.mode&1?(e=Fu,Fu<<=1,!(Fu&130023424)&&(Fu=4194304)):e=1);var n=an();t=ii(t,e),t!==null&&(Lc(t,e,n),yn(t,n))}function Uk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nb(t,n)}function Bk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),Nb(t,n)}var jb;jb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,Sk(t,e,n);mn=!!(t.flags&131072)}else mn=!1,tt&&e.flags&1048576&&Pw(e,Fd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;md(t,e),t=e.pendingProps;var i=_o(e,Xt.current);fo(e,n),i=wg(null,e,r,t,i,n);var a=bg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(a=!0,Md(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gg(e),i.updater=Ih,e.stateNode=i,i._reactInternals=e,Fm(e,r,t,n),e=Wm(null,e,r,!0,a,n)):(e.tag=0,tt&&a&&cg(e),sn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(md(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Hk(r),t=Xn(r,t),i){case 0:e=Bm(null,e,r,t,n);break e;case 1:e=u0(null,e,r,t,n);break e;case 11:e=l0(null,e,r,t,n);break e;case 14:e=c0(null,e,r,Xn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),Bm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),u0(t,e,r,i,n);case 3:e:{if(ob(e),t===null)throw Error(ee(387));r=e.pendingProps,a=e.memoizedState,i=a.element,zw(t,e),Wd(e,r,null,n);var c=e.memoizedState;if(r=c.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=jo(Error(ee(423)),e),e=d0(t,e,r,n,i);break e}else if(r!==i){i=jo(Error(ee(424)),e),e=d0(t,e,r,n,i);break e}else for(Nn=Ui(e.stateNode.containerInfo.firstChild),En=e,tt=!0,tr=null,n=Aw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wo(),r===i){e=si(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return Lw(e),t===null&&Om(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,c=i.children,Am(r,i)?c=null:a!==null&&Am(r,a)&&(e.flags|=32),ab(t,e),sn(t,e,c,n),e.child;case 6:return t===null&&Om(e),null;case 13:return lb(t,e,n);case 4:return yg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),l0(t,e,r,i,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,c=i.value,Ke(Ud,r._currentValue),r._currentValue=c,a!==null)if(or(a.value,c)){if(a.children===i.children&&!pn.current){e=si(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var h=a.dependencies;if(h!==null){c=a.child;for(var f=h.firstContext;f!==null;){if(f.context===r){if(a.tag===1){f=ei(-1,n&-n),f.tag=2;var m=a.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?f.next=f:(f.next=y.next,y.next=f),m.pending=f}}a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),Mm(a.return,n,e),h.lanes|=n;break}f=f.next}}else if(a.tag===10)c=a.type===e.type?null:a.child;else if(a.tag===18){if(c=a.return,c===null)throw Error(ee(341));c.lanes|=n,h=c.alternate,h!==null&&(h.lanes|=n),Mm(c,n,e),c=a.sibling}else c=a.child;if(c!==null)c.return=a;else for(c=a;c!==null;){if(c===e){c=null;break}if(a=c.sibling,a!==null){a.return=c.return,c=a;break}c=c.return}a=c}sn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fo(e,n),i=Hn(i),r=r(i),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,i=Xn(r,e.pendingProps),i=Xn(r.type,i),c0(t,e,r,i,n);case 15:return ib(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),md(t,e),e.tag=1,gn(r)?(t=!0,Md(e)):t=!1,fo(e,n),tb(e,r,i),Fm(e,r,i,n),Wm(null,e,r,!0,t,n);case 19:return cb(t,e,n);case 22:return sb(t,e,n)}throw Error(ee(156,e.tag))};function Tb(t,e){return Y_(t,e)}function Wk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,e,n,r){return new Wk(t,e,n,r)}function Ag(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hk(t){if(typeof t=="function")return Ag(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jp)return 11;if(t===Yp)return 14}return 2}function $i(t,e){var n=t.alternate;return n===null?(n=Un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yd(t,e,n,r,i,a){var c=2;if(r=t,typeof t=="function")Ag(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case Qa:return Bs(n.children,i,a,e);case Qp:c=8,i|=8;break;case um:return t=Un(12,n,e,i|2),t.elementType=um,t.lanes=a,t;case dm:return t=Un(13,n,e,i),t.elementType=dm,t.lanes=a,t;case hm:return t=Un(19,n,e,i),t.elementType=hm,t.lanes=a,t;case L_:return Rh(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R_:c=10;break e;case z_:c=9;break e;case Jp:c=11;break e;case Yp:c=14;break e;case Ti:c=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Un(c,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Bs(t,e,n,r){return t=Un(7,t,r,e),t.lanes=n,t}function Rh(t,e,n,r){return t=Un(22,t,r,e),t.elementType=L_,t.lanes=n,t.stateNode={isHidden:!1},t}function Zf(t,e,n){return t=Un(6,t,null,e),t.lanes=n,t}function qf(t,e,n){return e=Un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $k(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kf(0),this.expirationTimes=kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rg(t,e,n,r,i,a,c,h,f){return t=new $k(t,e,n,h,f),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Un(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gg(a),t}function Zk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ga,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Eb(t){if(!t)return Xi;t=t._reactInternals;e:{if(oa(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(gn(n))return Ew(t,n,e)}return e}function kb(t,e,n,r,i,a,c,h,f){return t=Rg(n,r,!0,t,i,a,c,h,f),t.context=Eb(null),n=t.current,r=an(),i=Hi(n),a=ei(r,i),a.callback=e??null,Bi(n,a,i),t.current.lanes=i,Lc(t,i,r),yn(t,r),t}function zh(t,e,n,r){var i=e.current,a=an(),c=Hi(i);return n=Eb(n),e.context===null?e.context=n:e.pendingContext=n,e=ei(a,c),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bi(i,e,c),t!==null&&(ir(t,i,c,a),dd(t,i,c)),c}function Jd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function w0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zg(t,e){w0(t,e),(t=t.alternate)&&w0(t,e)}function qk(){return null}var Pb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lg(t){this._internalRoot=t}Lh.prototype.render=Lg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));zh(t,e,null,null)};Lh.prototype.unmount=Lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){zh(null,t,null,null)}),e[ri]=null}};function Lh(t){this._internalRoot=t}Lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=sw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ki.length&&e!==0&&e<ki[n].priority;n++);ki.splice(n,0,t),n===0&&ow(t)}};function Dg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b0(){}function Kk(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var m=Jd(c);a.call(m)}}var c=kb(e,r,t,0,null,!1,!1,"",b0);return t._reactRootContainer=c,t[ri]=c.current,fc(t.nodeType===8?t.parentNode:t),Qs(),c}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var h=r;r=function(){var m=Jd(f);h.call(m)}}var f=Rg(t,0,!1,null,null,!1,!1,"",b0);return t._reactRootContainer=f,t[ri]=f.current,fc(t.nodeType===8?t.parentNode:t),Qs(function(){zh(e,f,n,r)}),f}function Oh(t,e,n,r,i){var a=n._reactRootContainer;if(a){var c=a;if(typeof i=="function"){var h=i;i=function(){var f=Jd(c);h.call(f)}}zh(e,c,t,i)}else c=Kk(n,e,t,i,r);return Jd(c)}rw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Al(e.pendingLanes);n!==0&&(tg(e,n|1),yn(e,vt()),!(Fe&6)&&(To=vt()+500,ms()))}break;case 13:Qs(function(){var r=ii(t,1);if(r!==null){var i=an();ir(r,t,1,i)}}),zg(t,1)}};ng=function(t){if(t.tag===13){var e=ii(t,134217728);if(e!==null){var n=an();ir(e,t,134217728,n)}zg(t,134217728)}};iw=function(t){if(t.tag===13){var e=Hi(t),n=ii(t,e);if(n!==null){var r=an();ir(n,t,e,r)}zg(t,e)}};sw=function(){return He};aw=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};bm=function(t,e,n){switch(e){case"input":if(pm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kh(r);if(!i)throw Error(ee(90));O_(r),pm(r,i)}}}break;case"textarea":V_(t,n);break;case"select":e=n.value,e!=null&&lo(t,!!n.multiple,e,!1)}};Z_=Sg;q_=Qs;var Gk={usingClientEntryPoint:!1,Events:[Oc,eo,kh,H_,$_,Sg]},Pl={findFiberByHostInstance:Os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qk={bundleType:Pl.bundleType,version:Pl.version,rendererPackageName:Pl.rendererPackageName,rendererConfig:Pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Q_(t),t===null?null:t.stateNode},findFiberByHostInstance:Pl.findFiberByHostInstance||qk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{Nh=Ju.inject(Qk),xr=Ju}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gk;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dg(e))throw Error(ee(200));return Zk(t,e,null,n)};Pn.createRoot=function(t,e){if(!Dg(t))throw Error(ee(299));var n=!1,r="",i=Pb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rg(t,1,!1,null,null,n,!1,r,i),t[ri]=e.current,fc(t.nodeType===8?t.parentNode:t),new Lg(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=Q_(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return Qs(t)};Pn.hydrate=function(t,e,n){if(!Dh(e))throw Error(ee(200));return Oh(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!Dg(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",c=Pb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=kb(e,null,t,1,n??null,i,!1,a,c),t[ri]=e.current,fc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Lh(e)};Pn.render=function(t,e,n){if(!Dh(e))throw Error(ee(200));return Oh(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!Dh(t))throw Error(ee(40));return t._reactRootContainer?(Qs(function(){Oh(null,null,t,!1,function(){t._reactRootContainer=null,t[ri]=null})}),!0):!1};Pn.unstable_batchedUpdates=Sg;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dh(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Oh(t,e,n,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";function Sb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sb)}catch(t){console.error(t)}}Sb(),S_.exports=Pn;var Jk=S_.exports,N0=Jk;lm.createRoot=N0.createRoot,lm.hydrateRoot=N0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bc.apply(this,arguments)}var Di;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Di||(Di={}));const j0="popstate";function Yk(t){t===void 0&&(t={});function e(i,a){let{pathname:c="/",search:h="",hash:f=""}=la(i.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),tp("",{pathname:c,search:h,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let c=i.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let f=i.location.href,m=f.indexOf("#");h=m===-1?f:f.slice(0,m)}return h+"#"+(typeof a=="string"?a:Yd(a))}function r(i,a){Mh(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return e2(e,n,r,t)}function xt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xk(){return Math.random().toString(36).substr(2,8)}function T0(t,e){return{usr:t.state,key:t.key,idx:e}}function tp(t,e,n,r){return n===void 0&&(n=null),bc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?la(e):e,{state:n,key:e&&e.key||r||Xk()})}function Yd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function la(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function e2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,h=Di.Pop,f=null,m=y();m==null&&(m=0,c.replaceState(bc({},c.state,{idx:m}),""));function y(){return(c.state||{idx:null}).idx}function x(){h=Di.Pop;let A=y(),P=A==null?null:A-m;m=A,f&&f({action:h,location:C.location,delta:P})}function w(A,P){h=Di.Push;let j=tp(C.location,A,P);n&&n(j,A),m=y()+1;let S=T0(j,m),H=C.createHref(j);try{c.pushState(S,"",H)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(H)}a&&f&&f({action:h,location:C.location,delta:1})}function R(A,P){h=Di.Replace;let j=tp(C.location,A,P);n&&n(j,A),m=y();let S=T0(j,m),H=C.createHref(j);c.replaceState(S,"",H),a&&f&&f({action:h,location:C.location,delta:0})}function M(A){let P=i.location.origin!=="null"?i.location.origin:i.location.href,j=typeof A=="string"?A:Yd(A);return j=j.replace(/ $/,"%20"),xt(P,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,P)}let C={get action(){return h},get location(){return t(i,c)},listen(A){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(j0,x),f=A,()=>{i.removeEventListener(j0,x),f=null}},createHref(A){return e(i,A)},createURL:M,encodeLocation(A){let P=M(A);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:w,replace:R,go(A){return c.go(A)}};return C}var E0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(E0||(E0={}));function t2(t,e,n){return n===void 0&&(n="/"),n2(t,e,n)}function n2(t,e,n,r){let i=typeof e=="string"?la(e):e,a=Og(i.pathname||"/",n);if(a==null)return null;let c=Ib(t);r2(c);let h=null;for(let f=0;h==null&&f<c.length;++f){let m=p2(a);h=h2(c[f],m)}return h}function Ib(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,c,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(xt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Zi([r,f.relativePath]),y=n.concat(f);a.children&&a.children.length>0&&(xt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Ib(a.children,e,y,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:u2(m,a.index),routesMeta:y})};return t.forEach((a,c)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))i(a,c);else for(let f of Cb(a.path))i(a,c,f)}),e}function Cb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=Cb(r.join("/")),h=[];return h.push(...c.map(f=>f===""?a:[a,f].join("/"))),i&&h.push(...c),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function r2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const i2=/^:[\w-]+$/,s2=3,a2=2,o2=1,l2=10,c2=-2,k0=t=>t==="*";function u2(t,e){let n=t.split("/"),r=n.length;return n.some(k0)&&(r+=c2),e&&(r+=a2),n.filter(i=>!k0(i)).reduce((i,a)=>i+(i2.test(a)?s2:a===""?o2:l2),r)}function d2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function h2(t,e,n){let{routesMeta:r}=t,i={},a="/",c=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,y=a==="/"?e:e.slice(a.length)||"/",x=f2({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),w=f.route;if(!x)return null;Object.assign(i,x.params),c.push({params:i,pathname:Zi([a,x.pathname]),pathnameBase:_2(Zi([a,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(a=Zi([a,x.pathnameBase]))}return c}function f2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=m2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((m,y,x)=>{let{paramName:w,isOptional:R}=y;if(w==="*"){let C=h[x]||"";c=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const M=h[x];return R&&!M?m[w]=void 0:m[w]=(M||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:t}}function m2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Mh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function p2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Og(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const g2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,y2=t=>g2.test(t);function v2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?la(t):t,a;if(n)if(y2(n))a=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Mh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?a=P0(n.substring(1),"/"):a=P0(n,e)}else a=e;return{pathname:a,search:w2(r),hash:b2(i)}}function P0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Kf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function x2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mg(t,e){let n=x2(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=la(t):(i=bc({},t),xt(!i.pathname||!i.pathname.includes("?"),Kf("?","pathname","search",i)),xt(!i.pathname||!i.pathname.includes("#"),Kf("#","pathname","hash",i)),xt(!i.search||!i.search.includes("#"),Kf("#","search","hash",i)));let a=t===""||i.pathname==="",c=a?"/":i.pathname,h;if(c==null)h=n;else{let x=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),x-=1;i.pathname=w.join("/")}h=x>=0?e[x]:"/"}let f=v2(i,h),m=c&&c!=="/"&&c.endsWith("/"),y=(a||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}const Zi=t=>t.join("/").replace(/\/\/+/g,"/"),_2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),w2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,b2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function N2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ab=["post","put","patch","delete"];new Set(Ab);const j2=["get",...Ab];new Set(j2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}const Fg=V.createContext(null),T2=V.createContext(null),ps=V.createContext(null),Vh=V.createContext(null),Ar=V.createContext({outlet:null,matches:[],isDataRoute:!1}),Rb=V.createContext(null);function E2(t,e){let{relative:n}=e===void 0?{}:e;Lo()||xt(!1);let{basename:r,navigator:i}=V.useContext(ps),{hash:a,pathname:c,search:h}=Db(t,{relative:n}),f=c;return r!=="/"&&(f=c==="/"?r:Zi([r,c])),i.createHref({pathname:f,search:h,hash:a})}function Lo(){return V.useContext(Vh)!=null}function di(){return Lo()||xt(!1),V.useContext(Vh).location}function zb(t){V.useContext(ps).static||V.useLayoutEffect(t)}function hi(){let{isDataRoute:t}=V.useContext(Ar);return t?U2():k2()}function k2(){Lo()||xt(!1);let t=V.useContext(Fg),{basename:e,future:n,navigator:r}=V.useContext(ps),{matches:i}=V.useContext(Ar),{pathname:a}=di(),c=JSON.stringify(Mg(i,n.v7_relativeSplatPath)),h=V.useRef(!1);return zb(()=>{h.current=!0}),V.useCallback(function(m,y){if(y===void 0&&(y={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let x=Vg(m,JSON.parse(c),a,y.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Zi([e,x.pathname])),(y.replace?r.replace:r.push)(x,y.state,y)},[e,r,c,a,t])}const P2=V.createContext(null);function S2(t){let e=V.useContext(Ar).outlet;return e&&V.createElement(P2.Provider,{value:t},e)}function Lb(){let{matches:t}=V.useContext(Ar),e=t[t.length-1];return e?e.params:{}}function Db(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(ps),{matches:i}=V.useContext(Ar),{pathname:a}=di(),c=JSON.stringify(Mg(i,r.v7_relativeSplatPath));return V.useMemo(()=>Vg(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function I2(t,e){return C2(t,e)}function C2(t,e,n,r){Lo()||xt(!1);let{navigator:i}=V.useContext(ps),{matches:a}=V.useContext(Ar),c=a[a.length-1],h=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let m=di(),y;if(e){var x;let A=typeof e=="string"?la(e):e;f==="/"||(x=A.pathname)!=null&&x.startsWith(f)||xt(!1),y=A}else y=m;let w=y.pathname||"/",R=w;if(f!=="/"){let A=f.replace(/^\//,"").split("/");R="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let M=t2(t,{pathname:R}),C=D2(M&&M.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:Zi([f,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:Zi([f,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,n,r);return e&&C?V.createElement(Vh.Provider,{value:{location:Nc({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Di.Pop}},C):C}function A2(){let t=F2(),e=N2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,null)}const R2=V.createElement(A2,null);class z2 extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(Ar.Provider,{value:this.props.routeContext},V.createElement(Rb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L2(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(Fg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Ar.Provider,{value:e},r)}function D2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,h=(i=n)==null?void 0:i.errors;if(h!=null){let y=c.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);y>=0||xt(!1),c=c.slice(0,Math.min(c.length,y+1))}let f=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let x=c[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=y),x.route.id){let{loaderData:w,errors:R}=n,M=x.route.loader&&w[x.route.id]===void 0&&(!R||R[x.route.id]===void 0);if(x.route.lazy||M){f=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((y,x,w)=>{let R,M=!1,C=null,A=null;n&&(R=h&&x.route.id?h[x.route.id]:void 0,C=x.route.errorElement||R2,f&&(m<0&&w===0?(B2("route-fallback"),M=!0,A=null):m===w&&(M=!0,A=x.route.hydrateFallbackElement||null)));let P=e.concat(c.slice(0,w+1)),j=()=>{let S;return R?S=C:M?S=A:x.route.Component?S=V.createElement(x.route.Component,null):x.route.element?S=x.route.element:S=y,V.createElement(L2,{match:x,routeContext:{outlet:y,matches:P,isDataRoute:n!=null},children:S})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?V.createElement(z2,{location:n.location,revalidation:n.revalidation,component:C,error:R,children:j(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):j()},null)}var Ob=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ob||{}),Mb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Mb||{});function O2(t){let e=V.useContext(Fg);return e||xt(!1),e}function M2(t){let e=V.useContext(T2);return e||xt(!1),e}function V2(t){let e=V.useContext(Ar);return e||xt(!1),e}function Vb(t){let e=V2(),n=e.matches[e.matches.length-1];return n.route.id||xt(!1),n.route.id}function F2(){var t;let e=V.useContext(Rb),n=M2(),r=Vb();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function U2(){let{router:t}=O2(Ob.UseNavigateStable),e=Vb(Mb.UseNavigateStable),n=V.useRef(!1);return zb(()=>{n.current=!0}),V.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Nc({fromRouteId:e},a)))},[t,e])}const S0={};function B2(t,e,n){S0[t]||(S0[t]=!0)}function W2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function H2(t){let{to:e,replace:n,state:r,relative:i}=t;Lo()||xt(!1);let{future:a,static:c}=V.useContext(ps),{matches:h}=V.useContext(Ar),{pathname:f}=di(),m=hi(),y=Vg(e,Mg(h,a.v7_relativeSplatPath),f,i==="path"),x=JSON.stringify(y);return V.useEffect(()=>m(JSON.parse(x),{replace:n,state:r,relative:i}),[m,x,i,n,r]),null}function $2(t){return S2(t.context)}function jt(t){xt(!1)}function Z2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Di.Pop,navigator:a,static:c=!1,future:h}=t;Lo()&&xt(!1);let f=e.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:f,navigator:a,static:c,future:Nc({v7_relativeSplatPath:!1},h)}),[f,h,a,c]);typeof r=="string"&&(r=la(r));let{pathname:y="/",search:x="",hash:w="",state:R=null,key:M="default"}=r,C=V.useMemo(()=>{let A=Og(y,f);return A==null?null:{location:{pathname:A,search:x,hash:w,state:R,key:M},navigationType:i}},[f,y,x,w,R,M,i]);return C==null?null:V.createElement(ps.Provider,{value:m},V.createElement(Vh.Provider,{children:n,value:C}))}function Fb(t){let{children:e,location:n}=t;return I2(np(e),n)}new Promise(()=>{});function np(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let a=[...e,i];if(r.type===V.Fragment){n.push.apply(n,np(r.props.children,a));return}r.type!==jt&&xt(!1),!r.props.index||!r.props.children||xt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=np(r.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rp(){return rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rp.apply(this,arguments)}function q2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function K2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function G2(t,e){return t.button===0&&(!e||e==="_self")&&!K2(t)}function ip(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Q2(t,e){let n=ip(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const J2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Y2="6";try{window.__reactRouterVersion=Y2}catch{}const X2="startTransition",I0=FT[X2];function eP(t){let{basename:e,children:n,future:r,window:i}=t,a=V.useRef();a.current==null&&(a.current=Yk({window:i,v5Compat:!0}));let c=a.current,[h,f]=V.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},y=V.useCallback(x=>{m&&I0?I0(()=>f(x)):f(x)},[f,m]);return V.useLayoutEffect(()=>c.listen(y),[c,y]),V.useEffect(()=>W2(r),[r]),V.createElement(Z2,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:c,future:r})}const tP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ye=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:c,state:h,target:f,to:m,preventScrollReset:y,viewTransition:x}=e,w=q2(e,J2),{basename:R}=V.useContext(ps),M,C=!1;if(typeof m=="string"&&nP.test(m)&&(M=m,tP))try{let S=new URL(window.location.href),H=m.startsWith("//")?new URL(S.protocol+m):new URL(m),F=Og(H.pathname,R);H.origin===S.origin&&F!=null?m=F+H.search+H.hash:C=!0}catch{}let A=E2(m,{relative:i}),P=rP(m,{replace:c,state:h,target:f,preventScrollReset:y,relative:i,viewTransition:x});function j(S){r&&r(S),S.defaultPrevented||P(S)}return V.createElement("a",rp({},w,{href:M||A,onClick:C||a?r:j,ref:n,target:f}))});var C0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(C0||(C0={}));var A0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A0||(A0={}));function rP(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:c,viewTransition:h}=e===void 0?{}:e,f=hi(),m=di(),y=Db(t,{relative:c});return V.useCallback(x=>{if(G2(x,n)){x.preventDefault();let w=r!==void 0?r:Yd(m)===Yd(y);f(t,{replace:w,state:i,preventScrollReset:a,relative:c,viewTransition:h})}},[m,f,y,r,i,n,t,a,c,h])}function iP(t){let e=V.useRef(ip(t)),n=V.useRef(!1),r=di(),i=V.useMemo(()=>Q2(r.search,n.current?null:e.current),[r.search]),a=hi(),c=V.useCallback((h,f)=>{const m=ip(typeof h=="function"?h(i):h);n.current=!0,a("?"+m,f)},[a,i]);return[i,c]}const sP=()=>{};var R0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],c=t[n++],h=t[n++],f=((i&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Bb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],c=i+1<t.length,h=c?t[i+1]:0,f=i+2<t.length,m=f?t[i+2]:0,y=a>>2,x=(a&3)<<4|h>>4;let w=(h&15)<<2|m>>6,R=m&63;f||(R=64,c||(w=64)),r.push(n[y],n[x],n[w],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ub(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const x=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||h==null||m==null||x==null)throw new oP;const w=a<<2|h>>4;if(r.push(w),m!==64){const R=h<<4&240|m>>2;if(r.push(R),x!==64){const M=m<<6&192|x;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lP=function(t){const e=Ub(t);return Bb.encodeByteArray(e,!0)},Xd=function(t){return lP(t).replace(/\./g,"")},Wb=function(t){try{return Bb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=()=>cP().__FIREBASE_DEFAULTS__,dP=()=>{if(typeof process>"u"||typeof R0>"u")return;const t=R0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Wb(t[1]);return e&&JSON.parse(e)},Fh=()=>{try{return sP()||uP()||dP()||hP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hb=t=>{var e,n;return(n=(e=Fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$b=t=>{const e=Hb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zb=()=>{var t;return(t=Fh())===null||t===void 0?void 0:t.config},qb=t=>{var e;return(e=Fh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ug(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xd(JSON.stringify(n)),Xd(JSON.stringify(c)),""].join(".")}const Gl={};function mP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gl))Gl[e]?t.emulator.push(e):t.prod.push(e);return t}function pP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let z0=!1;function Bg(t,e){if(typeof window>"u"||typeof document>"u"||!gs(window.location.host)||Gl[t]===e||Gl[t]||z0)return;Gl[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",a=mP().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,R){w.setAttribute("width","24"),w.setAttribute("id",R),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{z0=!0,c()},w}function y(w,R){w.setAttribute("id",R),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function x(){const w=pP(r),R=n("text"),M=document.getElementById(R)||document.createElement("span"),C=n("learnmore"),A=document.getElementById(C)||document.createElement("a"),P=n("preprendIcon"),j=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const S=w.element;h(S),y(A,C);const H=m();f(j,P),S.append(j,M,A,H),document.body.appendChild(S)}a?(M.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function yP(){var t;const e=(t=Fh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _P(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wP(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bP(){return!yP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NP(){try{return typeof indexedDB=="object"}catch{return!1}}function jP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="FirebaseError";class Rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TP,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vc.prototype.create)}}class Vc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?EP(a,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new Rr(i,h,r)}}function EP(t,e){return t.replace(kP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const kP=/\{\$([^}]+)}/g;function PP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Js(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],c=e[i];if(L0(a)&&L0(c)){if(!Js(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function L0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SP(t,e){const n=new IP(t,e);return n.subscribe.bind(n)}class IP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Gf),i.error===void 0&&(i.error=Gf),i.complete===void 0&&(i.complete=Gf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class es{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zP(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&c.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RP(t){return t===Ds?void 0:t}function zP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const DP={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},OP=De.INFO,MP={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},VP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=MP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wg{constructor(e){this.name=e,this._logLevel=OP,this._logHandler=VP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const FP=(t,e)=>e.some(n=>t instanceof n);let D0,O0;function UP(){return D0||(D0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BP(){return O0||(O0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gb=new WeakMap,sp=new WeakMap,Qb=new WeakMap,Qf=new WeakMap,Hg=new WeakMap;function WP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(qi(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&Gb.set(n,t)}).catch(()=>{}),Hg.set(e,t),e}function HP(t){if(sp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});sp.set(t,e)}let ap={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $P(t){ap=t(ap)}function ZP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jf(this),e,...n);return Qb.set(r,e.sort?e.sort():[e]),qi(r)}:BP().includes(t)?function(...e){return t.apply(Jf(this),e),qi(Gb.get(this))}:function(...e){return qi(t.apply(Jf(this),e))}}function qP(t){return typeof t=="function"?ZP(t):(t instanceof IDBTransaction&&HP(t),FP(t,UP())?new Proxy(t,ap):t)}function qi(t){if(t instanceof IDBRequest)return WP(t);if(Qf.has(t))return Qf.get(t);const e=qP(t);return e!==t&&(Qf.set(t,e),Hg.set(e,t)),e}const Jf=t=>Hg.get(t);function KP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(t,e),h=qi(c);return r&&c.addEventListener("upgradeneeded",f=>{r(qi(c.result),f.oldVersion,f.newVersion,qi(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const GP=["get","getKey","getAll","getAllKeys","count"],QP=["put","add","delete","clear"],Yf=new Map;function M0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yf.get(e))return Yf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=QP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GP.includes(n)))return;const a=async function(c,...h){const f=this.transaction(c,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),i&&f.done]))[0]};return Yf.set(e,a),a}$P(t=>({...t,get:(e,n,r)=>M0(e,n)||t.get(e,n,r),has:(e,n)=>!!M0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const op="@firebase/app",V0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Wg("@firebase/app"),XP="@firebase/app-compat",eS="@firebase/analytics-compat",tS="@firebase/analytics",nS="@firebase/app-check-compat",rS="@firebase/app-check",iS="@firebase/auth",sS="@firebase/auth-compat",aS="@firebase/database",oS="@firebase/data-connect",lS="@firebase/database-compat",cS="@firebase/functions",uS="@firebase/functions-compat",dS="@firebase/installations",hS="@firebase/installations-compat",fS="@firebase/messaging",mS="@firebase/messaging-compat",pS="@firebase/performance",gS="@firebase/performance-compat",yS="@firebase/remote-config",vS="@firebase/remote-config-compat",xS="@firebase/storage",_S="@firebase/storage-compat",wS="@firebase/firestore",bS="@firebase/ai",NS="@firebase/firestore-compat",jS="firebase",TS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]",ES={[op]:"fire-core",[XP]:"fire-core-compat",[tS]:"fire-analytics",[eS]:"fire-analytics-compat",[rS]:"fire-app-check",[nS]:"fire-app-check-compat",[iS]:"fire-auth",[sS]:"fire-auth-compat",[aS]:"fire-rtdb",[oS]:"fire-data-connect",[lS]:"fire-rtdb-compat",[cS]:"fire-fn",[uS]:"fire-fn-compat",[dS]:"fire-iid",[hS]:"fire-iid-compat",[fS]:"fire-fcm",[mS]:"fire-fcm-compat",[pS]:"fire-perf",[gS]:"fire-perf-compat",[yS]:"fire-rc",[vS]:"fire-rc-compat",[xS]:"fire-gcs",[_S]:"fire-gcs-compat",[wS]:"fire-fst",[NS]:"fire-fst-compat",[bS]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map,kS=new Map,cp=new Map;function F0(t,e){try{t.container.addComponent(e)}catch(n){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ys(t){const e=t.name;if(cp.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;cp.set(e,t);for(const n of eh.values())F0(n,t);for(const n of kS.values())F0(n,t);return!0}function Uh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ki=new Vc("app","Firebase",PS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=TS;function Jb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lp,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ki.create("bad-app-name",{appName:String(i)});if(n||(n=Zb()),!n)throw Ki.create("no-options");const a=eh.get(i);if(a){if(Js(n,a.options)&&Js(r,a.config))return a;throw Ki.create("duplicate-app",{appName:i})}const c=new LP(i);for(const f of cp.values())c.addComponent(f);const h=new SS(n,r,c);return eh.set(i,h),h}function $g(t=lp){const e=eh.get(t);if(!e&&t===lp&&Zb())return Jb();if(!e)throw Ki.create("no-app",{appName:t});return e}function wr(t,e,n){var r;let i=(r=ES[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${i}" with version "${e}":`];a&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(h.join(" "));return}Ys(new es(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="firebase-heartbeat-database",CS=1,jc="firebase-heartbeat-store";let Xf=null;function Yb(){return Xf||(Xf=KP(IS,CS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ki.create("idb-open",{originalErrorMessage:t.message})})),Xf}async function AS(t){try{const n=(await Yb()).transaction(jc),r=await n.objectStore(jc).get(Xb(t));return await n.done,r}catch(e){if(e instanceof Rr)ai.warn(e.message);else{const n=Ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ai.warn(n.message)}}}async function U0(t,e){try{const r=(await Yb()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,Xb(t)),await r.done}catch(n){if(n instanceof Rr)ai.warn(n.message);else{const r=Ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ai.warn(r.message)}}}function Xb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1024,zS=30;class LS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=B0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>zS){const c=MS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ai.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B0(),{heartbeatsToSend:r,unsentEntries:i}=DS(this._heartbeatsCache.heartbeats),a=Xd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ai.warn(n),""}}}function B0(){return new Date().toISOString().substring(0,10)}function DS(t,e=RS){const n=[];let r=t.slice();for(const i of t){const a=n.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),W0(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),W0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NP()?jP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return U0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return U0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function W0(t){return Xd(JSON.stringify({version:2,heartbeats:t})).length}function MS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){Ys(new es("platform-logger",e=>new JP(e),"PRIVATE")),Ys(new es("heartbeat",e=>new LS(e),"PRIVATE")),wr(op,V0,t),wr(op,V0,"esm2017"),wr("fire-js","")}VS("");function Zg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function e1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FS=e1,t1=new Vc("auth","Firebase",e1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Wg("@firebase/auth");function US(t,...e){th.logLevel<=De.WARN&&th.warn(`Auth (${ca}): ${t}`,...e)}function vd(t,...e){th.logLevel<=De.ERROR&&th.error(`Auth (${ca}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,...e){throw qg(t,...e)}function br(t,...e){return qg(t,...e)}function n1(t,e,n){const r=Object.assign(Object.assign({},FS()),{[e]:n});return new Vc("auth","Firebase",r).create(e,{appName:t.name})}function ti(t){return n1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return t1.create(t,...e)}function _e(t,e,...n){if(!t)throw qg(e,...n)}function Jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vd(e),new Error(e)}function oi(t,e){t||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BS(){return H0()==="http:"||H0()==="https:"}function H0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BS()||xP()||"connection"in navigator)?navigator.onLine:!0}function HS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=gP()||_P()}get(){return WS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qS=new Uc(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zr(t,e,n,r,i={}){return i1(t,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const h=Fc(Object.assign({key:t.config.apiKey},c)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:f},a);return vP()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&gs(t.emulatorConfig.host)&&(m.credentials="include"),r1.fetch()(await s1(t,t.config.apiHost,n,h),m)})}async function i1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$S),e);try{const i=new GS(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Yu(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yu(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Yu(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw Yu(t,"user-disabled",c);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw n1(t,y,m);lr(t,y)}}catch(i){if(i instanceof Rr)throw i;lr(t,"network-request-failed",{message:String(i)})}}async function Bc(t,e,n,r,i={}){const a=await zr(t,e,n,r,i);return"mfaPendingCredential"in a&&lr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function s1(t,e,n,r){const i=`${e}${n}?${r}`,a=t,c=a.config.emulator?Kg(t.config,i):`${t.config.apiScheme}://${i}`;return ZS.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function KS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),qS.get())})}}function Yu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=br(t,e,r);return i.customData._tokenResponse=n,i}function $0(t){return t!==void 0&&t.enterprise!==void 0}class QS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return KS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JS(t,e){return zr(t,"GET","/v2/recaptchaConfig",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(t,e){return zr(t,"POST","/v1/accounts:delete",e)}async function nh(t,e){return zr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XS(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),i=Gg(r);_e(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Ql(em(i.auth_time)),issuedAtTime:Ql(em(i.iat)),expirationTime:Ql(em(i.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function em(t){return Number(t)*1e3}function Gg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Wb(n);return i?JSON.parse(i):(vd("Failed to decode base64 JWT payload"),null)}catch(i){return vd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Z0(t){const e=Gg(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rr&&eI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xs(t,nh(n,{idToken:r}));_e(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?a1(a.providerUserInfo):[],h=rI(t.providerData,c),f=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),y=f?m:!1,x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new dp(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(t,x)}async function nI(t){const e=Ye(t);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rI(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a1(t){return t.map(e=>{var{providerId:n}=e,r=Zg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(t,e){const n=await i1(t,{},async()=>{const r=Fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,c=await s1(t,i,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return t.emulatorConfig&&gs(t.emulatorConfig.host)&&(f.credentials="include"),r1.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sI(t,e){return zr(t,"POST","/v2/accounts:revokeToken",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=Z0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await iI(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,c=new po;return r&&(_e(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(_e(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new po,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Zg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new dp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Xs(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XS(this,e)}reload(){return nI(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(ti(this.auth));const e=await this.getIdToken();return await Xs(this,YS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,c,h,f,m,y;const x=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,R=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,M=(c=n.photoURL)!==null&&c!==void 0?c:void 0,C=(h=n.tenantId)!==null&&h!==void 0?h:void 0,A=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,P=(m=n.createdAt)!==null&&m!==void 0?m:void 0,j=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:S,emailVerified:H,isAnonymous:F,providerData:B,stsTokenManager:I}=n;_e(S&&I,e,"internal-error");const N=po.fromJSON(this.name,I);_e(typeof S=="string",e,"internal-error"),ji(x,e.name),ji(w,e.name),_e(typeof H=="boolean",e,"internal-error"),_e(typeof F=="boolean",e,"internal-error"),ji(R,e.name),ji(M,e.name),ji(C,e.name),ji(A,e.name),ji(P,e.name),ji(j,e.name);const O=new nr({uid:S,auth:e,email:w,emailVerified:H,displayName:x,isAnonymous:F,photoURL:M,phoneNumber:R,tenantId:C,stsTokenManager:N,createdAt:P,lastLoginAt:j});return B&&Array.isArray(B)&&(O.providerData=B.map(k=>Object.assign({},k))),A&&(O._redirectEventId=A),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new po;i.updateFromServerResponse(n);const a=new nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rh(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];_e(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?a1(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),h=new po;h.updateFromIdToken(r);const f=new nr({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new dp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;function Yr(t){oi(t instanceof Function,"Expected a class definition");let e=q0.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,q0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o1.type="NONE";const K0=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e,n){return`firebase:${t}:${e}:${n}`}class go{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=xd(this.userKey,i.apiKey,a),this.fullPersistenceKey=xd("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nh(this.auth,{idToken:e}).catch(()=>{});return n?nr._fromGetAccountInfoResponse(this.auth,n,e):null}return nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new go(Yr(K0),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||Yr(K0);const c=xd(r,e.config.apiKey,e.name);let h=null;for(const m of n)try{const y=await m._get(c);if(y){let x;if(typeof y=="string"){const w=await nh(e,{idToken:y}).catch(()=>{});if(!w)break;x=await nr._fromGetAccountInfoResponse(e,w,y)}else x=nr._fromJSON(e,y);m!==a&&(h=x),a=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new go(a,e,r):(a=f[0],h&&await a._set(c,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new go(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f1(e))return"Blackberry";if(m1(e))return"Webos";if(c1(e))return"Safari";if((e.includes("chrome/")||u1(e))&&!e.includes("edge/"))return"Chrome";if(h1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function l1(t=en()){return/firefox\//i.test(t)}function c1(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u1(t=en()){return/crios\//i.test(t)}function d1(t=en()){return/iemobile/i.test(t)}function h1(t=en()){return/android/i.test(t)}function f1(t=en()){return/blackberry/i.test(t)}function m1(t=en()){return/webos/i.test(t)}function Qg(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aI(t=en()){var e;return Qg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oI(){return wP()&&document.documentMode===10}function p1(t=en()){return Qg(t)||h1(t)||m1(t)||f1(t)||/windows phone/i.test(t)||d1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e=[]){let n;switch(t){case"Browser":n=G0(en());break;case"Worker":n=`${G0(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ca}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,h)=>{try{const f=e(a);c(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(t,e={}){return zr(t,"GET","/v2/passwordPolicy",ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=6;class dI{constructor(e){var n,r,i,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:uI,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,c,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Q0(this),this.idTokenSubscription=new Q0(this),this.beforeStateQueue=new lI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await go.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nh(this,{idToken:e}),r=await nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===h)&&(f!=null&&f.user)&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(ti(this));const n=e?Ye(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cI(this),n=new dI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yr(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await go.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&US(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ua(t){return Ye(t)}class Q0{constructor(e){this.auth=e,this.observer=null,this.addObserver=SP(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fI(t){Bh=t}function y1(t){return Bh.loadJS(t)}function mI(){return Bh.recaptchaEnterpriseScript}function pI(){return Bh.gapiScript}function gI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yI{constructor(){this.enterprise=new vI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xI="recaptcha-enterprise",v1="NO_RECAPTCHA";class _I{constructor(e){this.type=xI,this.auth=ua(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,h)=>{JS(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new QS(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(f=>{h(f)})})}function i(a,c,h){const f=window.grecaptcha;$0(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(v1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yI().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(h=>{if(!n&&$0(window.grecaptcha))i(h,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=mI();f.length!==0&&(f+=h),y1(f).then(()=>{i(h,a,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function J0(t,e,n,r=!1,i=!1){const a=new _I(t);let c;if(i)c=v1;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const h=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function hp(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await J0(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await J0(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t,e){const n=Uh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Js(a,e??{}))return i;lr(i,"already-initialized")}return n.initialize({options:e})}function bI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NI(t,e,n){const r=ua(t);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=x1(e),{host:c,port:h}=jI(e),f=h===null?"":`:${h}`,m={url:`${a}//${c}${f}/`},y=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(Js(m,r.config.emulator)&&Js(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,gs(c)?(Ug(`${a}//${c}${f}`),Bg("Auth",!0)):TI()}function x1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jI(t){const e=x1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Y0(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:Y0(c)}}}function Y0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,n){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}async function EI(t,e){return zr(t,"POST","/v1/accounts:update",e)}async function kI(t,e){return zr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(t,e){return Bc(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function II(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends Jg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Tc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Tc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hp(e,n,"signInWithPassword",PI);case"emailLink":return SI(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hp(e,r,"signUpPassword",kI);case"emailLink":return II(e,{idToken:n,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t,e){return Bc(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="http://localhost";class ea extends Jg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Zg(n,["providerId","signInMethod"]);if(!r||!i)return null;const c=new ea(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yo(e,n)}buildRequest(){const e={requestUri:CI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RI(t){const e=zl(Ll(t)).link,n=e?zl(Ll(e)).deep_link_id:null,r=zl(Ll(t)).deep_link_id;return(r?zl(Ll(r)).link:null)||r||n||e||t}class Yg{constructor(e){var n,r,i,a,c,h;const f=zl(Ll(e)),m=(n=f.apiKey)!==null&&n!==void 0?n:null,y=(r=f.oobCode)!==null&&r!==void 0?r:null,x=AI((i=f.mode)!==null&&i!==void 0?i:null);_e(m&&y&&x,"argument-error"),this.apiKey=m,this.operation=x,this.code=y,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=RI(e);try{return new Yg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.providerId=vs.PROVIDER_ID}static credential(e,n){return Tc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Yg.parseLink(n);return _e(r,"argument-error"),Tc._fromEmailAndCode(e,r.code,r.tenantId)}}vs.PROVIDER_ID="password";vs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends _1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Wc{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com";Si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ii.credential(n,r)}catch{return null}}}Ii.GOOGLE_SIGN_IN_METHOD="google.com";Ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Wc{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Wc{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ai.credential(n,r)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(t,e){return Bc(t,"POST","/v1/accounts:signUp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await nr._fromIdTokenResponse(e,r,i),c=X0(r);return new ta({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=X0(r);return new ta({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function X0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends Rr{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ih.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ih(e,n,r,i)}}function w1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ih._fromErrorAndOperation(t,a,e,r):a})}async function LI(t,e,n=!1){const r=await Xs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ta._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t,e,n=!1){const{auth:r}=t;if(bn(r.app))return Promise.reject(ti(r));const i="reauthenticate";try{const a=await Xs(t,w1(r,i,e,t),n);_e(a.idToken,r,"internal-error");const c=Gg(a.idToken);_e(c,r,"internal-error");const{sub:h}=c;return _e(t.uid===h,r,"user-mismatch"),ta._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&lr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(t,e,n=!1){if(bn(t.app))return Promise.reject(ti(t));const r="signIn",i=await w1(t,r,e),a=await ta._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function DI(t,e){return N1(ua(t),e)}async function j1(t,e){return b1(Ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(t){const e=ua(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OI(t,e,n){if(bn(t.app))return Promise.reject(ti(t));const r=ua(t),c=await hp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zI).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&T1(t),f}),h=await ta._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function MI(t,e,n){return bn(t.app)?Promise.reject(ti(t)):DI(Ye(t),vs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&T1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(t,e){return zr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ye(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Xs(r,VI(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function FI(t,e){return UI(Ye(t),null,e)}async function UI(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const c=await Xs(t,EI(r,a));await t._updateTokensIfNecessary(c,!0)}function BI(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function WI(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function HI(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function $I(t){return Ye(t).signOut()}async function ZI(t){return Ye(t).delete()}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=1e3,KI=10;class k1 extends E1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);oI()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,KI):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}k1.type="LOCAL";const GI=k1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1 extends E1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}P1.type="SESSION";const S1=P1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Wh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(c).map(async m=>m(n.origin,a)),f=await QI(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((h,f)=>{const m=Xg("",20);i.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(x){const w=x;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(w.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function YI(t){Nr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function XI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tC(){return I1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="firebaseLocalStorageDb",nC=1,ah="firebaseLocalStorage",A1="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(t,e){return t.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function rC(){const t=indexedDB.deleteDatabase(C1);return new Hc(t).toPromise()}function mp(){const t=indexedDB.open(C1,nC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ah,{keyPath:A1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ah)?e(r):(r.close(),await rC(),e(await mp()))})})}async function ex(t,e,n){const r=Hh(t,!0).put({[A1]:e,value:n});return new Hc(r).toPromise()}async function iC(t,e){const n=Hh(t,!1).get(e),r=await new Hc(n).toPromise();return r===void 0?null:r.value}function tx(t,e){const n=Hh(t,!0).delete(e);return new Hc(n).toPromise()}const sC=800,aC=3;class R1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wh._getInstance(tC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XI(),!this.activeServiceWorker)return;this.sender=new JI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mp();return await ex(e,sh,"1"),await tx(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ex(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Hh(i,!1).getAll();return new Hc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R1.type="LOCAL";const oC=R1;new Uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t,e){return e?Yr(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends Jg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cC(t){return N1(t.auth,new ey(t),t.bypassAuthState)}function uC(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),b1(n,new ey(t),t.bypassAuthState)}async function dC(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),LI(n,new ey(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cC;case"linkViaPopup":case"linkViaRedirect":return dC;case"reauthViaPopup":case"reauthViaRedirect":return uC;default:lr(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new Uc(2e3,1e4);class oo extends z1{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hC.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="pendingRedirect",_d=new Map;class mC extends z1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const r=await pC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pC(t,e){const n=vC(e),r=yC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function gC(t,e){_d.set(t._key(),e)}function yC(t){return Yr(t._redirectPersistence)}function vC(t){return xd(fC,t.config.apiKey,t.name)}async function xC(t,e,n=!1){if(bn(t.app))return Promise.reject(ti(t));const r=ua(t),i=lC(r,e),c=await new mC(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=10*60*1e3;class wC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!L1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_C&&this.cachedEventUids.clear(),this.cachedEventUids.has(nx(e))}saveEventToCache(e){this.cachedEventUids.add(nx(e)),this.lastProcessedEventTime=Date.now()}}function nx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function L1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(t,e={}){return zr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TC=/^https?/;async function EC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NC(t);for(const n of e)try{if(kC(n))return}catch{}lr(t,"unauthorized-domain")}function kC(t){const e=up(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!TC.test(n))return!1;if(jC.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Uc(3e4,6e4);function rx(){const t=Nr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SC(t){return new Promise((e,n)=>{var r,i,a;function c(){rx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rx(),n(br(t,"network-request-failed"))},timeout:PC.get()})}if(!((i=(r=Nr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Nr().gapi)===null||a===void 0)&&a.load)c();else{const h=gI("iframefcb");return Nr()[h]=()=>{gapi.load?c():n(br(t,"network-request-failed"))},y1(`${pI()}?onload=${h}`).catch(f=>n(f))}}).catch(e=>{throw wd=null,e})}let wd=null;function IC(t){return wd=wd||SC(t),wd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new Uc(5e3,15e3),AC="__/auth/iframe",RC="emulator/auth/iframe",zC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DC(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kg(e,RC):`https://${t.config.authDomain}/${AC}`,r={apiKey:e.apiKey,appName:t.name,v:ca},i=LC.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Fc(r).slice(1)}`}async function OC(t){const e=await IC(t),n=Nr().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:DC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zC,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=br(t,"network-request-failed"),h=Nr().setTimeout(()=>{a(c)},CC.get());function f(){Nr().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VC=500,FC=600,UC="_blank",BC="http://localhost";class ix{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WC(t,e,n,r=VC,i=FC){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},MC),{width:r.toString(),height:i.toString(),top:a,left:c}),m=en().toLowerCase();n&&(h=u1(m)?UC:n),l1(m)&&(e=e||BC,f.scrollbars="yes");const y=Object.entries(f).reduce((w,[R,M])=>`${w}${R}=${M},`,"");if(aI(m)&&h!=="_self")return HC(e||"",h),new ix(null);const x=window.open(e||"",h,y);_e(x,t,"popup-blocked");try{x.focus()}catch{}return new ix(x)}function HC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="__/auth/handler",ZC="emulator/auth/handler",qC=encodeURIComponent("fac");async function sx(t,e,n,r,i,a){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ca,eventId:i};if(e instanceof _1){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",PP(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,x]of Object.entries({}))c[y]=x}if(e instanceof Wc){const y=e.getScopes().filter(x=>x!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await t._getAppCheckToken(),m=f?`#${qC}=${encodeURIComponent(f)}`:"";return`${KC(t)}?${Fc(h).slice(1)}${m}`}function KC({config:t}){return t.emulator?Kg(t,ZC):`https://${t.authDomain}/${$C}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class GC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S1,this._completeRedirectFn=xC,this._overrideRedirectResult=gC}async _openPopup(e,n,r,i){var a;oi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await sx(e,n,r,up(),i);return WC(e,c,Xg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await sx(e,n,r,up(),i);return YI(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(oi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OC(e),r=new wC(e);return n.register("authEvent",i=>(_e(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},i=>{var a;const c=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[tm];c!==void 0&&n(!!c),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p1()||c1()||Qg()}}const QC=GC;var ax="@firebase/auth",ox="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XC(t){Ys(new es("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;_e(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g1(t)},m=new hI(r,i,a,f);return bI(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new es("auth-internal",e=>{const n=ua(e.getProvider("auth").getImmediate());return(r=>new JC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(ax,ox,YC(t)),wr(ax,ox,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=5*60,tA=qb("authIdTokenMaxAge")||eA;let lx=null;const nA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tA)return;const i=n==null?void 0:n.token;lx!==i&&(lx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rA(t=$g()){const e=Uh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wI(t,{popupRedirectResolver:QC,persistence:[oC,GI,S1]}),r=qb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=nA(a.toString());WI(n,c,()=>c(n.currentUser)),BI(n,h=>c(h))}}const i=Hb("auth");return i&&NI(n,`http://${i}`),n}function iA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=br("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",iA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XC("Browser");var cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,D1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,N){function O(){}O.prototype=N.prototype,I.D=N.prototype,I.prototype=new O,I.prototype.constructor=I,I.C=function(k,E,z){for(var D=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)D[ne-2]=arguments[ne];return N.prototype[E].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,N,O){O||(O=0);var k=Array(16);if(typeof N=="string")for(var E=0;16>E;++E)k[E]=N.charCodeAt(O++)|N.charCodeAt(O++)<<8|N.charCodeAt(O++)<<16|N.charCodeAt(O++)<<24;else for(E=0;16>E;++E)k[E]=N[O++]|N[O++]<<8|N[O++]<<16|N[O++]<<24;N=I.g[0],O=I.g[1],E=I.g[2];var z=I.g[3],D=N+(z^O&(E^z))+k[0]+3614090360&4294967295;N=O+(D<<7&4294967295|D>>>25),D=z+(E^N&(O^E))+k[1]+3905402710&4294967295,z=N+(D<<12&4294967295|D>>>20),D=E+(O^z&(N^O))+k[2]+606105819&4294967295,E=z+(D<<17&4294967295|D>>>15),D=O+(N^E&(z^N))+k[3]+3250441966&4294967295,O=E+(D<<22&4294967295|D>>>10),D=N+(z^O&(E^z))+k[4]+4118548399&4294967295,N=O+(D<<7&4294967295|D>>>25),D=z+(E^N&(O^E))+k[5]+1200080426&4294967295,z=N+(D<<12&4294967295|D>>>20),D=E+(O^z&(N^O))+k[6]+2821735955&4294967295,E=z+(D<<17&4294967295|D>>>15),D=O+(N^E&(z^N))+k[7]+4249261313&4294967295,O=E+(D<<22&4294967295|D>>>10),D=N+(z^O&(E^z))+k[8]+1770035416&4294967295,N=O+(D<<7&4294967295|D>>>25),D=z+(E^N&(O^E))+k[9]+2336552879&4294967295,z=N+(D<<12&4294967295|D>>>20),D=E+(O^z&(N^O))+k[10]+4294925233&4294967295,E=z+(D<<17&4294967295|D>>>15),D=O+(N^E&(z^N))+k[11]+2304563134&4294967295,O=E+(D<<22&4294967295|D>>>10),D=N+(z^O&(E^z))+k[12]+1804603682&4294967295,N=O+(D<<7&4294967295|D>>>25),D=z+(E^N&(O^E))+k[13]+4254626195&4294967295,z=N+(D<<12&4294967295|D>>>20),D=E+(O^z&(N^O))+k[14]+2792965006&4294967295,E=z+(D<<17&4294967295|D>>>15),D=O+(N^E&(z^N))+k[15]+1236535329&4294967295,O=E+(D<<22&4294967295|D>>>10),D=N+(E^z&(O^E))+k[1]+4129170786&4294967295,N=O+(D<<5&4294967295|D>>>27),D=z+(O^E&(N^O))+k[6]+3225465664&4294967295,z=N+(D<<9&4294967295|D>>>23),D=E+(N^O&(z^N))+k[11]+643717713&4294967295,E=z+(D<<14&4294967295|D>>>18),D=O+(z^N&(E^z))+k[0]+3921069994&4294967295,O=E+(D<<20&4294967295|D>>>12),D=N+(E^z&(O^E))+k[5]+3593408605&4294967295,N=O+(D<<5&4294967295|D>>>27),D=z+(O^E&(N^O))+k[10]+38016083&4294967295,z=N+(D<<9&4294967295|D>>>23),D=E+(N^O&(z^N))+k[15]+3634488961&4294967295,E=z+(D<<14&4294967295|D>>>18),D=O+(z^N&(E^z))+k[4]+3889429448&4294967295,O=E+(D<<20&4294967295|D>>>12),D=N+(E^z&(O^E))+k[9]+568446438&4294967295,N=O+(D<<5&4294967295|D>>>27),D=z+(O^E&(N^O))+k[14]+3275163606&4294967295,z=N+(D<<9&4294967295|D>>>23),D=E+(N^O&(z^N))+k[3]+4107603335&4294967295,E=z+(D<<14&4294967295|D>>>18),D=O+(z^N&(E^z))+k[8]+1163531501&4294967295,O=E+(D<<20&4294967295|D>>>12),D=N+(E^z&(O^E))+k[13]+2850285829&4294967295,N=O+(D<<5&4294967295|D>>>27),D=z+(O^E&(N^O))+k[2]+4243563512&4294967295,z=N+(D<<9&4294967295|D>>>23),D=E+(N^O&(z^N))+k[7]+1735328473&4294967295,E=z+(D<<14&4294967295|D>>>18),D=O+(z^N&(E^z))+k[12]+2368359562&4294967295,O=E+(D<<20&4294967295|D>>>12),D=N+(O^E^z)+k[5]+4294588738&4294967295,N=O+(D<<4&4294967295|D>>>28),D=z+(N^O^E)+k[8]+2272392833&4294967295,z=N+(D<<11&4294967295|D>>>21),D=E+(z^N^O)+k[11]+1839030562&4294967295,E=z+(D<<16&4294967295|D>>>16),D=O+(E^z^N)+k[14]+4259657740&4294967295,O=E+(D<<23&4294967295|D>>>9),D=N+(O^E^z)+k[1]+2763975236&4294967295,N=O+(D<<4&4294967295|D>>>28),D=z+(N^O^E)+k[4]+1272893353&4294967295,z=N+(D<<11&4294967295|D>>>21),D=E+(z^N^O)+k[7]+4139469664&4294967295,E=z+(D<<16&4294967295|D>>>16),D=O+(E^z^N)+k[10]+3200236656&4294967295,O=E+(D<<23&4294967295|D>>>9),D=N+(O^E^z)+k[13]+681279174&4294967295,N=O+(D<<4&4294967295|D>>>28),D=z+(N^O^E)+k[0]+3936430074&4294967295,z=N+(D<<11&4294967295|D>>>21),D=E+(z^N^O)+k[3]+3572445317&4294967295,E=z+(D<<16&4294967295|D>>>16),D=O+(E^z^N)+k[6]+76029189&4294967295,O=E+(D<<23&4294967295|D>>>9),D=N+(O^E^z)+k[9]+3654602809&4294967295,N=O+(D<<4&4294967295|D>>>28),D=z+(N^O^E)+k[12]+3873151461&4294967295,z=N+(D<<11&4294967295|D>>>21),D=E+(z^N^O)+k[15]+530742520&4294967295,E=z+(D<<16&4294967295|D>>>16),D=O+(E^z^N)+k[2]+3299628645&4294967295,O=E+(D<<23&4294967295|D>>>9),D=N+(E^(O|~z))+k[0]+4096336452&4294967295,N=O+(D<<6&4294967295|D>>>26),D=z+(O^(N|~E))+k[7]+1126891415&4294967295,z=N+(D<<10&4294967295|D>>>22),D=E+(N^(z|~O))+k[14]+2878612391&4294967295,E=z+(D<<15&4294967295|D>>>17),D=O+(z^(E|~N))+k[5]+4237533241&4294967295,O=E+(D<<21&4294967295|D>>>11),D=N+(E^(O|~z))+k[12]+1700485571&4294967295,N=O+(D<<6&4294967295|D>>>26),D=z+(O^(N|~E))+k[3]+2399980690&4294967295,z=N+(D<<10&4294967295|D>>>22),D=E+(N^(z|~O))+k[10]+4293915773&4294967295,E=z+(D<<15&4294967295|D>>>17),D=O+(z^(E|~N))+k[1]+2240044497&4294967295,O=E+(D<<21&4294967295|D>>>11),D=N+(E^(O|~z))+k[8]+1873313359&4294967295,N=O+(D<<6&4294967295|D>>>26),D=z+(O^(N|~E))+k[15]+4264355552&4294967295,z=N+(D<<10&4294967295|D>>>22),D=E+(N^(z|~O))+k[6]+2734768916&4294967295,E=z+(D<<15&4294967295|D>>>17),D=O+(z^(E|~N))+k[13]+1309151649&4294967295,O=E+(D<<21&4294967295|D>>>11),D=N+(E^(O|~z))+k[4]+4149444226&4294967295,N=O+(D<<6&4294967295|D>>>26),D=z+(O^(N|~E))+k[11]+3174756917&4294967295,z=N+(D<<10&4294967295|D>>>22),D=E+(N^(z|~O))+k[2]+718787259&4294967295,E=z+(D<<15&4294967295|D>>>17),D=O+(z^(E|~N))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+N&4294967295,I.g[1]=I.g[1]+(E+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+z&4294967295}r.prototype.u=function(I,N){N===void 0&&(N=I.length);for(var O=N-this.blockSize,k=this.B,E=this.h,z=0;z<N;){if(E==0)for(;z<=O;)i(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<N;)if(k[E++]=I.charCodeAt(z++),E==this.blockSize){i(this,k),E=0;break}}else for(;z<N;)if(k[E++]=I[z++],E==this.blockSize){i(this,k),E=0;break}}this.h=E,this.o+=N},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var N=1;N<I.length-8;++N)I[N]=0;var O=8*this.o;for(N=I.length-8;N<I.length;++N)I[N]=O&255,O/=256;for(this.u(I),I=Array(16),N=O=0;4>N;++N)for(var k=0;32>k;k+=8)I[O++]=this.g[N]>>>k&255;return I};function a(I,N){var O=h;return Object.prototype.hasOwnProperty.call(O,I)?O[I]:O[I]=N(I)}function c(I,N){this.h=N;for(var O=[],k=!0,E=I.length-1;0<=E;E--){var z=I[E]|0;k&&z==N||(O[E]=z,k=!1)}this.g=O}var h={};function f(I){return-128<=I&&128>I?a(I,function(N){return new c([N|0],0>N?-1:0)}):new c([I|0],0>I?-1:0)}function m(I){if(isNaN(I)||!isFinite(I))return x;if(0>I)return A(m(-I));for(var N=[],O=1,k=0;I>=O;k++)N[k]=I/O|0,O*=4294967296;return new c(N,0)}function y(I,N){if(I.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(I.charAt(0)=="-")return A(y(I.substring(1),N));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=m(Math.pow(N,8)),k=x,E=0;E<I.length;E+=8){var z=Math.min(8,I.length-E),D=parseInt(I.substring(E,E+z),N);8>z?(z=m(Math.pow(N,z)),k=k.j(z).add(m(D))):(k=k.j(O),k=k.add(m(D)))}return k}var x=f(0),w=f(1),R=f(16777216);t=c.prototype,t.m=function(){if(C(this))return-A(this).m();for(var I=0,N=1,O=0;O<this.g.length;O++){var k=this.i(O);I+=(0<=k?k:4294967296+k)*N,N*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(M(this))return"0";if(C(this))return"-"+A(this).toString(I);for(var N=m(Math.pow(I,6)),O=this,k="";;){var E=H(O,N).g;O=P(O,E.j(N));var z=((0<O.g.length?O.g[0]:O.h)>>>0).toString(I);if(O=E,M(O))return z+k;for(;6>z.length;)z="0"+z;k=z+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function M(I){if(I.h!=0)return!1;for(var N=0;N<I.g.length;N++)if(I.g[N]!=0)return!1;return!0}function C(I){return I.h==-1}t.l=function(I){return I=P(this,I),C(I)?-1:M(I)?0:1};function A(I){for(var N=I.g.length,O=[],k=0;k<N;k++)O[k]=~I.g[k];return new c(O,~I.h).add(w)}t.abs=function(){return C(this)?A(this):this},t.add=function(I){for(var N=Math.max(this.g.length,I.g.length),O=[],k=0,E=0;E<=N;E++){var z=k+(this.i(E)&65535)+(I.i(E)&65535),D=(z>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);k=D>>>16,z&=65535,D&=65535,O[E]=D<<16|z}return new c(O,O[O.length-1]&-2147483648?-1:0)};function P(I,N){return I.add(A(N))}t.j=function(I){if(M(this)||M(I))return x;if(C(this))return C(I)?A(this).j(A(I)):A(A(this).j(I));if(C(I))return A(this.j(A(I)));if(0>this.l(R)&&0>I.l(R))return m(this.m()*I.m());for(var N=this.g.length+I.g.length,O=[],k=0;k<2*N;k++)O[k]=0;for(k=0;k<this.g.length;k++)for(var E=0;E<I.g.length;E++){var z=this.i(k)>>>16,D=this.i(k)&65535,ne=I.i(E)>>>16,ue=I.i(E)&65535;O[2*k+2*E]+=D*ue,j(O,2*k+2*E),O[2*k+2*E+1]+=z*ue,j(O,2*k+2*E+1),O[2*k+2*E+1]+=D*ne,j(O,2*k+2*E+1),O[2*k+2*E+2]+=z*ne,j(O,2*k+2*E+2)}for(k=0;k<N;k++)O[k]=O[2*k+1]<<16|O[2*k];for(k=N;k<2*N;k++)O[k]=0;return new c(O,0)};function j(I,N){for(;(I[N]&65535)!=I[N];)I[N+1]+=I[N]>>>16,I[N]&=65535,N++}function S(I,N){this.g=I,this.h=N}function H(I,N){if(M(N))throw Error("division by zero");if(M(I))return new S(x,x);if(C(I))return N=H(A(I),N),new S(A(N.g),A(N.h));if(C(N))return N=H(I,A(N)),new S(A(N.g),N.h);if(30<I.g.length){if(C(I)||C(N))throw Error("slowDivide_ only works with positive integers.");for(var O=w,k=N;0>=k.l(I);)O=F(O),k=F(k);var E=B(O,1),z=B(k,1);for(k=B(k,2),O=B(O,2);!M(k);){var D=z.add(k);0>=D.l(I)&&(E=E.add(O),z=D),k=B(k,1),O=B(O,1)}return N=P(I,E.j(N)),new S(E,N)}for(E=x;0<=I.l(N);){for(O=Math.max(1,Math.floor(I.m()/N.m())),k=Math.ceil(Math.log(O)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),z=m(O),D=z.j(N);C(D)||0<D.l(I);)O-=k,z=m(O),D=z.j(N);M(z)&&(z=w),E=E.add(z),I=P(I,D)}return new S(E,I)}t.A=function(I){return H(this,I).h},t.and=function(I){for(var N=Math.max(this.g.length,I.g.length),O=[],k=0;k<N;k++)O[k]=this.i(k)&I.i(k);return new c(O,this.h&I.h)},t.or=function(I){for(var N=Math.max(this.g.length,I.g.length),O=[],k=0;k<N;k++)O[k]=this.i(k)|I.i(k);return new c(O,this.h|I.h)},t.xor=function(I){for(var N=Math.max(this.g.length,I.g.length),O=[],k=0;k<N;k++)O[k]=this.i(k)^I.i(k);return new c(O,this.h^I.h)};function F(I){for(var N=I.g.length+1,O=[],k=0;k<N;k++)O[k]=I.i(k)<<1|I.i(k-1)>>>31;return new c(O,I.h)}function B(I,N){var O=N>>5;N%=32;for(var k=I.g.length-O,E=[],z=0;z<k;z++)E[z]=0<N?I.i(z+O)>>>N|I.i(z+O+1)<<32-N:I.i(z+O);return new c(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,D1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Gi=c}).apply(typeof cx<"u"?cx:typeof self<"u"?self:typeof window<"u"?window:{});var Xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O1,Dl,M1,bd,pp,V1,F1,U1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xu=="object"&&Xu];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(u,g){if(g)e:{var _=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var $=u[T];if(!($ in _))break e;_=_[$]}u=u[u.length-1],T=_[u],g=g(T),g!=T&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function a(u,g){u instanceof String&&(u+="");var _=0,T=!1,$={next:function(){if(!T&&_<u.length){var K=_++;return{value:g(K,u[K]),done:!1}}return T=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(u){return u||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function f(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,_){return u.call.apply(u.bind,arguments)}function x(u,g,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,T),u.apply(g,$)}}return function(){return u.apply(g,arguments)}}function w(u,g,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:x,w.apply(null,arguments)}function R(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function M(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,$,K){for(var re=Array(arguments.length-2),We=2;We<arguments.length;We++)re[We-2]=arguments[We];return g.prototype[$].apply(T,re)}}function C(u){const g=u.length;if(0<g){const _=Array(g);for(let T=0;T<g;T++)_[T]=u[T];return _}return[]}function A(u,g){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(f(T)){const $=u.length||0,K=T.length||0;u.length=$+K;for(let re=0;re<K;re++)u[$+re]=T[re]}else u.push(T)}}class P{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function j(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function B(u,g,_){for(const T in u)g.call(_,u[T],T,u)}function I(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function N(u){const g={};for(const _ in u)g[_]=u[_];return g}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,g){let _,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(_ in T)u[_]=T[_];for(let K=0;K<O.length;K++)_=O[K],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function E(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function z(u){h.setTimeout(()=>{throw u},0)}function D(){var u=de;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ne{constructor(){this.h=this.g=null}add(g,_){const T=ue.get();T.set(g,_),this.h?this.h.next=T:this.g=T,this.h=T}}var ue=new P(()=>new ie,u=>u.reset());class ie{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let se,G=!1,de=new ne,W=()=>{const u=h.Promise.resolve(void 0);se=()=>{u.then(te)}};var te=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(_){z(_)}var g=ue;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}G=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return u}();function Te(u,g){if(Ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(F){e:{try{H(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:be[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Te.aa.h.call(this)}}M(Te,Ne);var be={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function rt(u,g,_,T,$){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!T,this.ha=$,this.key=++Pe,this.da=this.fa=!1}function Q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pe(u){this.src=u,this.g={},this.h=0}pe.prototype.add=function(u,g,_,T,$){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var re=dt(u,g,T,$);return-1<re?(g=u[re],_||(g.fa=!1)):(g=new rt(g,this.src,K,!!T,$),g.fa=_,u.push(g)),g};function Ue(u,g){var _=g.type;if(_ in u.g){var T=u.g[_],$=Array.prototype.indexOf.call(T,g,void 0),K;(K=0<=$)&&Array.prototype.splice.call(T,$,1),K&&(Q(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function dt(u,g,_,T){for(var $=0;$<u.length;++$){var K=u[$];if(!K.da&&K.listener==g&&K.capture==!!_&&K.ha==T)return $}return-1}var Vt="closure_lm_"+(1e6*Math.random()|0),fi={};function Fo(u,g,_,T,$){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Fo(u,g[K],_,T,$);return null}return _=nu(_),u&&u[nt]?u.K(g,_,m(T)?!!T.capture:!1,$):Uo(u,g,_,!1,T,$)}function Uo(u,g,_,T,$,K){if(!g)throw Error("Invalid event type");var re=m($)?!!$.capture:!!$,We=ga(u);if(We||(u[Vt]=We=new pe(u)),_=We.add(g,_,T,re,K),_.proxy)return _;if(T=fa(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ie||($=re),$===void 0&&($=!1),u.addEventListener(g.toString(),T,$);else if(u.attachEvent)u.attachEvent(pa(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function fa(){function u(_){return g.call(u.src,u.listener,_)}const g=tu;return u}function eu(u,g,_,T,$){if(Array.isArray(g))for(var K=0;K<g.length;K++)eu(u,g[K],_,T,$);else T=m(T)?!!T.capture:!!T,_=nu(_),u&&u[nt]?(u=u.i,g=String(g).toString(),g in u.g&&(K=u.g[g],_=dt(K,_,T,$),-1<_&&(Q(K[_]),Array.prototype.splice.call(K,_,1),K.length==0&&(delete u.g[g],u.h--)))):u&&(u=ga(u))&&(g=u.g[g.toString()],u=-1,g&&(u=dt(g,_,T,$)),(_=-1<u?g[u]:null)&&ma(_))}function ma(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[nt])Ue(g.i,u);else{var _=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(_,T,u.capture):g.detachEvent?g.detachEvent(pa(_),T):g.addListener&&g.removeListener&&g.removeListener(T),(_=ga(g))?(Ue(_,u),_.h==0&&(_.src=null,g[Vt]=null)):Q(u)}}}function pa(u){return u in fi?fi[u]:fi[u]="on"+u}function tu(u,g){if(u.da)u=!0;else{g=new Te(g,this);var _=u.listener,T=u.ha||u.src;u.fa&&ma(u),u=_.call(T,g)}return u}function ga(u){return u=u[Vt],u instanceof pe?u:null}var Bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function nu(u){return typeof u=="function"?u:(u[Bo]||(u[Bo]=function(g){return u.handleEvent(g)}),u[Bo])}function _t(){he.call(this),this.i=new pe(this),this.M=this,this.F=null}M(_t,he),_t.prototype[nt]=!0,_t.prototype.removeEventListener=function(u,g,_,T){eu(this,u,g,_,T)};function Rt(u,g){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new Ne(g,u);else if(g instanceof Ne)g.target=g.target||u;else{var $=g;g=new Ne(T,u),k(g,$)}if($=!0,_)for(var K=_.length-1;0<=K;K--){var re=g.g=_[K];$=ws(re,T,!0,g)&&$}if(re=g.g=u,$=ws(re,T,!0,g)&&$,$=ws(re,T,!1,g)&&$,_)for(K=0;K<_.length;K++)re=g.g=_[K],$=ws(re,T,!1,g)&&$}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],T=0;T<_.length;T++)Q(_[T]);delete u.g[g],u.h--}}this.F=null},_t.prototype.K=function(u,g,_,T){return this.i.add(String(u),g,!1,_,T)},_t.prototype.L=function(u,g,_,T){return this.i.add(String(u),g,!0,_,T)};function ws(u,g,_,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,K=0;K<g.length;++K){var re=g[K];if(re&&!re.da&&re.capture==_){var We=re.listener,wt=re.ha||re.src;re.fa&&Ue(u.i,re),$=We.call(wt,T)!==!1&&$}}return $&&!T.defaultPrevented}function ru(u,g,_){if(typeof u=="function")_&&(u=w(u,_));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(u,g||0)}function Wo(u){u.g=ru(()=>{u.g=null,u.i&&(u.i=!1,Wo(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class iu extends he{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Wo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(u){he.call(this),this.h=u,this.g={}}M(bs,he);var Ho=[];function ya(u){B(u.g,function(g,_){this.g.hasOwnProperty(_)&&ma(g)},u),u.g={}}bs.prototype.N=function(){bs.aa.N.call(this),ya(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var va=h.JSON.stringify,mf=h.JSON.parse,Ns=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function $o(){}$o.prototype.h=null;function su(u){return u.h||(u.h=u.i())}function Zo(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xa(){Ne.call(this,"d")}M(xa,Ne);function qo(){Ne.call(this,"c")}M(qo,Ne);var Dr={},au=null;function _a(){return au=au||new _t}Dr.La="serverreachability";function ou(u){Ne.call(this,Dr.La,u)}M(ou,Ne);function js(u){const g=_a();Rt(g,new ou(g))}Dr.STAT_EVENT="statevent";function wa(u,g){Ne.call(this,Dr.STAT_EVENT,u),this.stat=g}M(wa,Ne);function Ft(u){const g=_a();Rt(g,new wa(g,u))}Dr.Ma="timingevent";function lu(u,g){Ne.call(this,Dr.Ma,u),this.size=g}M(lu,Ne);function Ts(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},g)}function Es(){this.g=!0}Es.prototype.xa=function(){this.g=!1};function In(u,g,_,T,$,K){u.info(function(){if(u.g)if(K)for(var re="",We=K.split("&"),wt=0;wt<We.length;wt++){var Me=We[wt].split("=");if(1<Me.length){var Ze=Me[0];Me=Me[1];var st=Ze.split("_");re=2<=st.length&&st[1]=="type"?re+(Ze+"="+Me+"&"):re+(Ze+"=redacted&")}}else re=null;else re=K;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+g+`
`+_+`
`+re})}function fe(u,g,_,T,$,K,re){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+g+`
`+_+`
`+K+" "+re})}function Or(u,g,_,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+uu(u,_)+(T?" "+T:"")})}function cu(u,g){u.info(function(){return"TIMEOUT: "+g})}Es.prototype.info=function(){};function uu(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var $=T[1];if(Array.isArray($)&&!(1>$.length)){var K=$[0];if(K!="noop"&&K!="stop"&&K!="close")for(var re=1;re<$.length;re++)$[re]=""}}}}return va(_)}catch{return g}}var ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ba={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Na;function qn(){}M(qn,$o),qn.prototype.g=function(){return new XMLHttpRequest},qn.prototype.i=function(){return{}},Na=new qn;function Kn(u,g,_,T){this.j=u,this.i=g,this.l=_,this.R=T||1,this.U=new bs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new du}function du(){this.i=null,this.g="",this.h=!1}var hu={},Ko={};function Go(u,g,_){u.L=1,u.v=An(ht(g)),u.m=_,u.P=!0,Qo(u,null)}function Qo(u,g){u.F=Date.now(),Ta(u),u.A=ht(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),pu(_.i,"t",T),u.C=0,_=u.j.J,u.h=new du,u.g=bu(u.j,_?g:null,!u.m),0<u.O&&(u.M=new iu(w(u.Y,u,u.g),u.O)),g=u.U,_=u.g,T=u.ca;var $="readystatechange";Array.isArray($)||($&&(Ho[0]=$.toString()),$=Ho);for(var K=0;K<$.length;K++){var re=Fo(_,$[K],T||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=u.H?N(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),js(),In(u.i,u.u,u.A,u.l,u.R,u.m)}Kn.prototype.ca=function(u){u=u.target;const g=this.M;g&&tn(u)==3?g.j():this.Y(u)},Kn.prototype.Y=function(u){try{if(u==this.g)e:{const st=tn(this.g);var g=this.g.Ba();const wi=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||hl(this.g)))){this.J||st!=4||g==7||(g==8||0>=wi?js(3):js(2)),Jo(this);var _=this.g.Z();this.X=_;t:if(fu(this)){var T=hl(this.g);u="";var $=T.length,K=tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mr(this),Ps(this);var re="";break t}this.h.i=new h.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,u+=this.h.i.decode(T[g],{stream:!(K&&g==$-1)});T.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,fe(this.i,this.u,this.A,this.l,this.R,st,_),this.o){if(this.T&&!this.K){t:{if(this.g){var We,wt=this.g;if((We=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(We)){var Me=We;break t}}Me=null}if(_=Me)Or(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ss(this,_);else{this.o=!1,this.s=3,Ft(12),Mr(this),Ps(this);break e}}if(this.P){_=!0;let gt;for(;!this.J&&this.C<re.length;)if(gt=ja(this,re),gt==Ko){st==4&&(this.s=4,Ft(14),_=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==hu){this.s=4,Ft(15),Or(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else Or(this.i,this.l,gt,null),Ss(this,gt);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||re.length!=0||this.h.h||(this.s=1,Ft(16),_=!1),this.o=this.o&&_,!_)Or(this.i,this.l,re,"[Invalid Chunked Response]"),Mr(this),Ps(this);else if(0<re.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),za(Ze),Ze.M=!0,Ft(11))}}else Or(this.i,this.l,re,null),Ss(this,re);st==4&&Mr(this),this.o&&!this.J&&(st==4?ml(this.j,this):(this.o=!1,Ta(this)))}else pf(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Mr(this),Ps(this)}}}catch{}finally{}};function fu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ja(u,g){var _=u.C,T=g.indexOf(`
`,_);return T==-1?Ko:(_=Number(g.substring(_,T)),isNaN(_)?hu:(T+=1,T+_>g.length?Ko:(g=g.slice(T,T+_),u.C=T+_,g)))}Kn.prototype.cancel=function(){this.J=!0,Mr(this)};function Ta(u){u.S=Date.now()+u.I,mu(u,u.I)}function mu(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ts(w(u.ba,u),g)}function Jo(u){u.B&&(h.clearTimeout(u.B),u.B=null)}Kn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(cu(this.i,this.A),this.L!=2&&(js(),Ft(17)),Mr(this),this.s=2,Ps(this)):mu(this,this.S-u)};function Ps(u){u.j.G==0||u.J||ml(u.j,u)}function Mr(u){Jo(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,ya(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Ss(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||Le(_.h,u))){if(!u.K&&Le(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Da(_),Aa(_);else break e;Ra(_),Ft(18)}}else _.za=$[1],0<_.za-_.T&&37500>$[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ts(w(_.Za,_),6e3));if(1>=pi(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Wr(_,11)}else if((u.K||_.g==u)&&Da(_),!j(g))for($=_.Da.g.parse(g),g=0;g<$.length;g++){let Me=$[g];if(_.T=Me[0],Me=Me[1],_.G==2)if(Me[0]=="c"){_.K=Me[1],_.ia=Me[2];const Ze=Me[3];Ze!=null&&(_.la=Ze,_.j.info("VER="+_.la));const st=Me[4];st!=null&&(_.Aa=st,_.j.info("SVER="+_.Aa));const wi=Me[5];wi!=null&&typeof wi=="number"&&0<wi&&(T=1.5*wi,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const gt=u.g;if(gt){const Ma=gt.g?gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var K=T.h;K.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(qe(K,K.h),K.h=null))}if(T.D){const dr=gt.g?gt.g.getResponseHeader("X-HTTP-Session-Id"):null;dr&&(T.ya=dr,je(T.I,T.D,dr))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var re=u;if(T.qa=Oa(T,T.J?T.ia:null,T.W),re.K){Cs(T.h,re);var We=re,wt=T.L;wt&&(We.I=wt),We.B&&(Jo(We),Ta(We)),T.g=re}else Jn(T);0<_.i.length&&_i(_)}else Me[0]!="stop"&&Me[0]!="close"||Wr(_,7);else _.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Wr(_,7):Ca(_):Me[0]!="noop"&&_.l&&_.l.ta(Me),_.v=0)}}js(4)}catch{}}var Is=class{constructor(u,g){this.g=u,this.map=g}};function Yo(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function pi(u){return u.h?1:u.g?u.g.size:0}function Le(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function qe(u,g){u.g?u.g.add(g):u.h=g}function Cs(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Yo.prototype.cancel=function(){if(this.i=Vr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Vr(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return C(u.i)}function gi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(f(u)){for(var g=[],_=u.length,T=0;T<_;T++)g.push(u[T]);return g}g=[],_=0;for(T in u)g[_++]=u[T];return g}function el(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(f(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const T in u)g[_++]=T;return g}}}function Se(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(f(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=el(u),T=gi(u),$=T.length,K=0;K<$;K++)g.call(void 0,T[K],_&&_[K],u)}var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tl(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),$=null;if(0<=T){var K=u[_].substring(0,T);$=u[_].substring(T+1)}else K=u[_];g(K,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Cn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Cn){this.h=u.h,Ea(this,u.j),this.o=u.o,this.g=u.g,Fr(this,u.s),this.l=u.l;var g=u.i,_=new Ur;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),cr(this,_),this.m=u.m}else u&&(g=String(u).match(Xe))?(this.h=!1,Ea(this,g[1]||"",!0),this.o=Gn(g[2]||""),this.g=Gn(g[3]||"",!0),Fr(this,g[4]),this.l=Gn(g[5]||"",!0),cr(this,g[6]||"",!0),this.m=Gn(g[7]||"")):(this.h=!1,this.i=new Ur(null,this.h))}Cn.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Qn(g,yi,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Qn(g,yi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Qn(_,_.charAt(0)=="/"?il:rl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Qn(_,sl)),u.join("")};function ht(u){return new Cn(u)}function Ea(u,g,_){u.j=_?Gn(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Fr(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function cr(u,g,_){g instanceof Ur?(u.i=g,Rn(u.i,u.h)):(_||(g=Qn(g,ka)),u.i=new Ur(g,u.h))}function je(u,g,_){u.i.set(g,_)}function An(u){return je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Gn(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qn(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,nl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var yi=/[#\/\?@]/g,rl=/[#\?:]/g,il=/[#\?]/g,ka=/[#\?@]/g,sl=/#/g;function Ur(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function vn(u){u.g||(u.g=new Map,u.h=0,u.i&&tl(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=Ur.prototype,t.add=function(u,g){vn(this),this.i=null,u=ve(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function al(u,g){vn(u),g=ve(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Pa(u,g){return vn(u),g=ve(u,g),u.g.has(g)}t.forEach=function(u,g){vn(this),this.g.forEach(function(_,T){_.forEach(function($){u.call(g,$,T,this)},this)},this)},t.na=function(){vn(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let T=0;T<g.length;T++){const $=u[T];for(let K=0;K<$.length;K++)_.push(g[T])}return _},t.V=function(u){vn(this);let g=[];if(typeof u=="string")Pa(this,u)&&(g=g.concat(this.g.get(ve(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},t.set=function(u,g){return vn(this),this.i=null,u=ve(this,u),Pa(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function pu(u,g,_){al(u,g),0<_.length&&(u.i=null,u.g.set(ve(u,g),C(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var T=g[_];const K=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var $=K;re[T]!==""&&($+="="+encodeURIComponent(String(re[T]))),u.push($)}}return this.i=u.join("&")};function ve(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Rn(u,g){g&&!u.j&&(vn(u),u.i=null,u.g.forEach(function(_,T){var $=T.toLowerCase();T!=$&&(al(this,T),pu(this,$,_))},u)),u.j=g}function $e(u,g){const _=new Es;if(h.Image){const T=new Image;T.onload=R(zn,_,"TestLoadImage: loaded",!0,g,T),T.onerror=R(zn,_,"TestLoadImage: error",!1,g,T),T.onabort=R(zn,_,"TestLoadImage: abort",!1,g,T),T.ontimeout=R(zn,_,"TestLoadImage: timeout",!1,g,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function gu(u,g){const _=new Es,T=new AbortController,$=setTimeout(()=>{T.abort(),zn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(K=>{clearTimeout($),K.ok?zn(_,"TestPingServer: ok",!0,g):zn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),zn(_,"TestPingServer: error",!1,g)})}function zn(u,g,_,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(_)}catch{}}function ol(){this.g=new Ns}function ll(u,g,_){const T=_||"";try{Se(u,function($,K){let re=$;m($)&&(re=va($)),g.push(T+K+"="+encodeURIComponent(re))})}catch($){throw g.push(T+"type="+encodeURIComponent("_badmap")),$}}function Ln(u){this.l=u.Ub||null,this.j=u.eb||!1}M(Ln,$o),Ln.prototype.g=function(){return new vi(this.l,this.j)},Ln.prototype.i=function(u){return function(){return u}}({});function vi(u,g){_t.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(vi,_t),t=vi.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,xn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,it(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function xi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?it(this):xn(this),this.readyState==3&&xi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,it(this))},t.Qa=function(u){this.g&&(this.response=u,it(this))},t.ga=function(){this.g&&it(this)};function it(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xn(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function cl(u){let g="";return B(u,function(_,T){g+=T,g+=":",g+=_,g+=`\r
`}),g}function Sa(u,g,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=cl(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):je(u,g,_))}function et(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(et,_t);var yu=/^https?$/i,ul=["POST","PUT"];t=et.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Na.g(),this.v=this.o?su(this.o):su(Na),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){vu(this,K);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)_.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const K of T.keys())_.set(K,T.get(K));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),$=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ul,g,void 0))||T||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,re]of _)this.g.setRequestHeader(K,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cn(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){vu(this,K)}};function vu(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,dl(u),Ia(u)}function dl(u){u.A||(u.A=!0,Rt(u,"complete"),Rt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Rt(this,"complete"),Rt(this,"abort"),Ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Re(this):this.bb())},t.bb=function(){Re(this)};function Re(u){if(u.h&&typeof c<"u"&&(!u.v[1]||tn(u)!=4||u.Z()!=2)){if(u.u&&tn(u)==4)ru(u.Ea,0,u);else if(Rt(u,"readystatechange"),tn(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var T;if(T=re===0){var $=String(u.D).match(Xe)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),T=!yu.test($?$.toLowerCase():"")}_=T}if(_)Rt(u,"complete"),Rt(u,"success");else{u.m=6;try{var K=2<tn(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",dl(u)}}finally{Ia(u)}}}}function Ia(u,g){if(u.g){cn(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Rt(u,"ready");try{_.onreadystatechange=T}catch{}}}function cn(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function tn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),mf(g)}};function hl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pf(u){const g={};u=(u.g&&2<=tn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(j(u[T]))continue;var _=E(u[T]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=g[$]||[];g[$]=K,K.push(_)}I(g,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function xu(u){this.Aa=0,this.i=[],this.j=new Es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Br("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Br("baseRetryDelayMs",5e3,u),this.cb=Br("retryDelaySeedMs",1e4,u),this.Wa=Br("forwardChannelMaxRetries",2,u),this.wa=Br("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Yo(u&&u.concurrentRequestLimit),this.Da=new ol,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xu.prototype,t.la=8,t.G=1,t.connect=function(u,g,_,T){Ft(0),this.W=u,this.H=g||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Oa(this,null,this.W),_i(this)};function Ca(u){if(_u(u),u.G==3){var g=u.U++,_=ht(u.I);if(je(_,"SID",u.K),je(_,"RID",g),je(_,"TYPE","terminate"),As(u,_),g=new Kn(u,u.j,g),g.L=2,g.v=An(ht(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.v,_=!0),_||(g.g=bu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ta(g)}wu(u)}function Aa(u){u.g&&(za(u),u.g.cancel(),u.g=null)}function _u(u){Aa(u),u.u&&(h.clearTimeout(u.u),u.u=null),Da(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function _i(u){if(!Xo(u.h)&&!u.s){u.s=!0;var g=u.Ga;se||W(),G||(se(),G=!0),de.add(g,u),u.B=0}}function gf(u,g){return pi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ts(w(u.Ga,u,g),pl(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const $=new Kn(this,this.j,u);let K=this.o;if(this.S&&(K?(K=N(K),k(K,this.S)):K=this.S),this.m!==null||this.O||($.H=K,K=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=fl(this,$,g),_=ht(this.I),je(_,"RID",u),je(_,"CVER",22),this.D&&je(_,"X-HTTP-Session-Id",this.D),As(this,_),K&&(this.O?g="headers="+encodeURIComponent(String(cl(K)))+"&"+g:this.m&&Sa(_,this.m,K)),qe(this.h,$),this.Ua&&je(_,"TYPE","init"),this.P?(je(_,"$req",g),je(_,"SID","null"),$.T=!0,Go($,_,null)):Go($,_,g),this.G=2}}else this.G==3&&(u?_n(this,u):this.i.length==0||Xo(this.h)||_n(this))};function _n(u,g){var _;g?_=g.l:_=u.U++;const T=ht(u.I);je(T,"SID",u.K),je(T,"RID",_),je(T,"AID",u.T),As(u,T),u.m&&u.o&&Sa(T,u.m,u.o),_=new Kn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=fl(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),qe(u.h,_),Go(_,T,g)}function As(u,g){u.H&&B(u.H,function(_,T){je(g,T,_)}),u.l&&Se({},function(_,T){je(g,T,_)})}function fl(u,g,_){_=Math.min(u.i.length,_);var T=u.l?w(u.l.Na,u.l,u):null;e:{var $=u.i;let K=-1;for(;;){const re=["count="+_];K==-1?0<_?(K=$[0].g,re.push("ofs="+K)):K=0:re.push("ofs="+K);let We=!0;for(let wt=0;wt<_;wt++){let Me=$[wt].g;const Ze=$[wt].map;if(Me-=K,0>Me)K=Math.max(0,$[wt].g-100),We=!1;else try{ll(Ze,re,"req"+Me+"_")}catch{T&&T(Ze)}}if(We){T=re.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,T}function Jn(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;se||W(),G||(se(),G=!0),de.add(g,u),u.v=0}}function Ra(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ts(w(u.Fa,u),pl(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,La(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ts(w(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),Aa(this),La(this))};function za(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function La(u){u.g=new Kn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ht(u.qa);je(g,"RID","rpc"),je(g,"SID",u.K),je(g,"AID",u.T),je(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&je(g,"TO",u.ja),je(g,"TYPE","xmlhttp"),As(u,g),u.m&&u.o&&Sa(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=An(ht(g)),_.m=null,_.P=!0,Qo(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Aa(this),Ra(this),Ft(19))};function Da(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function ml(u,g){var _=null;if(u.g==g){Da(u),za(u),u.g=null;var T=2}else if(Le(u.h,g))_=g.D,Cs(u.h,g),T=1;else return;if(u.G!=0){if(g.o)if(T==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var $=u.B;T=_a(),Rt(T,new lu(T,_)),_i(u)}else Jn(u);else if($=g.s,$==3||$==0&&0<g.X||!(T==1&&gf(u,g)||T==2&&Ra(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),$){case 1:Wr(u,5);break;case 4:Wr(u,10);break;case 3:Wr(u,6);break;default:Wr(u,2)}}}function pl(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function Wr(u,g){if(u.j.info("Error code "+g),g==2){var _=w(u.fb,u),T=u.Xa;const $=!T;T=new Cn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ea(T,"https"),An(T),$?$e(T.toString(),_):gu(T.toString(),_)}else Ft(2);u.G=0,u.l&&u.l.sa(g),wu(u),_u(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function wu(u){if(u.G=0,u.ka=[],u.l){const g=Vr(u.h);(g.length!=0||u.i.length!=0)&&(A(u.ka,g),A(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function Oa(u,g,_){var T=_ instanceof Cn?ht(_):new Cn(_);if(T.g!="")g&&(T.g=g+"."+T.g),Fr(T,T.s);else{var $=h.location;T=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var K=new Cn(null);T&&Ea(K,T),g&&(K.g=g),$&&Fr(K,$),_&&(K.l=_),T=K}return _=u.D,g=u.ya,_&&g&&je(T,_,g),je(T,"VER",u.la),As(u,T),T}function bu(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new et(new Ln({eb:_})):new et(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gl(){}t=gl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Rs(){}Rs.prototype.g=function(u,g){return new zt(u,g)};function zt(u,g){_t.call(this),this.g=new xu(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!j(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!j(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Dn(this)}M(zt,_t),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ca(this.g)},zt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=va(u),u=_);g.i.push(new Is(g.Ya++,u)),g.G==3&&_i(g)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ca(this.g),delete this.g,zt.aa.N.call(this)};function ur(u){xa.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}M(ur,xa);function Nu(){qo.call(this),this.status=1}M(Nu,qo);function Dn(u){this.g=u}M(Dn,gl),Dn.prototype.ua=function(){Rt(this.g,"a")},Dn.prototype.ta=function(u){Rt(this.g,new ur(u))},Dn.prototype.sa=function(u){Rt(this.g,new Nu)},Dn.prototype.ra=function(){Rt(this.g,"b")},Rs.prototype.createWebChannel=Rs.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,U1=function(){return new Rs},F1=function(){return _a()},V1=Dr,pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,bd=ks,ba.COMPLETE="complete",M1=ba,Zo.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Dl=Zo,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,O1=et}).apply(typeof Xu<"u"?Xu:typeof self<"u"?self:typeof window<"u"?window:{});const ux="@firebase/firestore",dx="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=new Wg("@firebase/firestore");function Ha(){return na.logLevel}function oe(t,...e){if(na.logLevel<=De.DEBUG){const n=e.map(ty);na.debug(`Firestore (${Do}): ${t}`,...n)}}function li(t,...e){if(na.logLevel<=De.ERROR){const n=e.map(ty);na.error(`Firestore (${Do}): ${t}`,...n)}}function ts(t,...e){if(na.logLevel<=De.WARN){const n=e.map(ty);na.warn(`Firestore (${Do}): ${t}`,...n)}}function ty(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,B1(t,r,n)}function B1(t,e,n){let r=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw li(r),new Error(r)}function Be(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||B1(e,i,r)}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class aA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oA{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Qi,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},h=f=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qi)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string",31837,{l:r}),new W1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class lA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new lA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Be(this.o===void 0,3512);const r=a=>{a.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=dA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function gp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ce(r,i);{const a=H1(),c=hA(a.encode(fx(t,n)),a.encode(fx(e,n)));return c!==0?c:Ce(r,i)}}n+=r>65535?2:1}return Ce(t.length,e.length)}function fx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function hA(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ce(t[n],e[n]);return Ce(t.length,e.length)}function Eo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="__name__";class pr{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=pr.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Ce(e.length,n.length)}static compareSegments(e,n){const r=pr.isNumericId(e),i=pr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?pr.extractNumericId(e).compare(pr.extractNumericId(n)):gp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gi.fromString(e.substring(4,e.length-2))}}class ot extends pr{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const fA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends pr{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return fA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mx}static keyField(){return new Wt([mx])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new me(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new me(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new me(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(c=!c,i++):h!=="."||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new me(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ot.fromString(e))}static fromName(e){return new ge(ot.fromString(e).popFirst(5))}static empty(){return new ge(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t,e,n){if(!n)throw new me(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pA(t,e,n,r){if(e===!0&&r===!0)throw new me(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function px(t){if(!ge.isDocumentKey(t))throw new me(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ry(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ry(t);throw new me(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e){const n={typeString:t};return e&&(n.value=e),n}function $c(t,e){if(!$1(t))throw new me(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new me(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=-62135596800,yx=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*yx);return new Qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gx)throw new me(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yx}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($c(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Et("string",Qe._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Qe(0,0))}static max(){return new Ee(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=-1;function gA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new rs(i,ge.empty(),e)}function yA(t){return new rs(t.readTime,t.key,Ec)}class rs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rs(Ee.min(),ge.empty(),Ec)}static max(){return new rs(Ee.max(),ge.empty(),Ec)}}function vA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _A{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==xA)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&n()},f=>r(f))}),c=!0,a===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;n(e[m]).next(y=>{c[m]=y,++h,h===a&&r(c)},y=>i(y))}})}static doWhile(e,n){return new J((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function wA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}$h.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-1;function Zh(t){return t==null}function oh(t){return t===0&&1/t==-1/0}function bA(t){return typeof t=="number"&&Number.isInteger(t)&&!oh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="";function NA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vx(e)),e=jA(t.get(n),e);return vx(e)}function jA(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Z1:n+="";break;default:n+=a}}return n}function vx(t){return t+Z1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}}class ed{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Bt.RED,this.left=i??Bt.EMPTY,this.right=a??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Bt(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _x(this.data.getIterator())}getIteratorFrom(e){return new _x(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class _x{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new jn([])}unionWith(e){let n=new At(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new K1("Invalid base64 string: "+a):a}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const TA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(Be(!!t,39018),typeof t=="string"){let e=0;const n=TA.exec(t);if(Be(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="server_timestamp",Q1="__type__",J1="__previous_value__",Y1="__local_write_time__";function sy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Q1])===null||n===void 0?void 0:n.stringValue)===G1}function qh(t){const e=t.mapValue.fields[J1];return sy(e)?qh(e):e}function kc(t){const e=is(t.mapValue.fields[Y1].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,r,i,a,c,h,f,m,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const lh="(default)";class Pc{constructor(e,n){this.projectId=e,this.database=n||lh}static empty(){return new Pc("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof Pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="__type__",kA="__max__",td={mapValue:{}},eN="__vector__",ch="value";function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sy(t)?4:SA(t)?9007199254740991:PA(t)?10:11:we(28295,{value:t})}function Ir(t,e){if(t===e)return!0;const n=as(t);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kc(t).isEqual(kc(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=is(i.timestampValue),h=is(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return ss(i.bytesValue).isEqual(ss(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return yt(i.geoPointValue.latitude)===yt(a.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return yt(i.integerValue)===yt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=yt(i.doubleValue),h=yt(a.doubleValue);return c===h?oh(c)===oh(h):isNaN(c)&&isNaN(h)}return!1}(t,e);case 9:return Eo(t.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return function(i,a){const c=i.mapValue.fields||{},h=a.mapValue.fields||{};if(xx(c)!==xx(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!Ir(c[f],h[f])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Sc(t,e){return(t.values||[]).find(n=>Ir(n,e))!==void 0}function ko(t,e){if(t===e)return 0;const n=as(t),r=as(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(a,c){const h=yt(a.integerValue||a.doubleValue),f=yt(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return wx(t.timestampValue,e.timestampValue);case 4:return wx(kc(t),kc(e));case 5:return gp(t.stringValue,e.stringValue);case 6:return function(a,c){const h=ss(a),f=ss(c);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),f=c.split("/");for(let m=0;m<h.length&&m<f.length;m++){const y=Ce(h[m],f[m]);if(y!==0)return y}return Ce(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Ce(yt(a.latitude),yt(c.latitude));return h!==0?h:Ce(yt(a.longitude),yt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bx(t.arrayValue,e.arrayValue);case 10:return function(a,c){var h,f,m,y;const x=a.fields||{},w=c.fields||{},R=(h=x[ch])===null||h===void 0?void 0:h.arrayValue,M=(f=w[ch])===null||f===void 0?void 0:f.arrayValue,C=Ce(((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0,((y=M==null?void 0:M.values)===null||y===void 0?void 0:y.length)||0);return C!==0?C:bx(R,M)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===td.mapValue&&c===td.mapValue)return 0;if(a===td.mapValue)return 1;if(c===td.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=c.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let x=0;x<f.length&&x<y.length;++x){const w=gp(f[x],y[x]);if(w!==0)return w;const R=ko(h[f[x]],m[y[x]]);if(R!==0)return R}return Ce(f.length,y.length)}(t.mapValue,e.mapValue);default:throw we(23264,{le:n})}}function wx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=is(t),r=is(e),i=Ce(n.seconds,r.seconds);return i!==0?i:Ce(n.nanos,r.nanos)}function bx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=ko(n[i],r[i]);if(a)return a}return Ce(n.length,r.length)}function Po(t){return yp(t)}function yp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=yp(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${yp(n.fields[c])}`;return i+"}"}(t.mapValue):we(61005,{value:t})}function Nd(t){switch(as(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qh(t);return e?16+Nd(e):16;case 5:return 2*t.stringValue.length;case 6:return ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Nd(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return xs(r.fields,(a,c)=>{i+=a.length+Nd(c)}),i}(t.mapValue);default:throw we(13486,{value:t})}}function vp(t){return!!t&&"integerValue"in t}function ay(t){return!!t&&"arrayValue"in t}function Nx(t){return!!t&&"nullValue"in t}function jx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jd(t){return!!t&&"mapValue"in t}function PA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[X1])===null||n===void 0?void 0:n.stringValue)===eN}function Jl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return xs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=h.popLast()}c?r[h.lastSegment()]=Jl(c):i.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());jd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xs(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new fn(Jl(this.value))}}function tN(t){const e=[];return xs(t.fields,(n,r)=>{const i=new Wt([n]);if(jd(r)){const a=tN(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,r,i,a,c,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Yt(e,0,Ee.min(),Ee.min(),Ee.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new Yt(e,1,n,Ee.min(),r,i,0)}static newNoDocument(e,n){return new Yt(e,2,n,Ee.min(),Ee.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,Ee.min(),Ee.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.position=e,this.inclusive=n}}function Tx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],c=t.position[i];if(a.field.isKeyField()?r=ge.comparator(ge.fromName(c.referenceValue),n.key):r=ko(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ex(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n="asc"){this.field=e,this.dir=n}}function IA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nN=class{};class St extends nN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AA(e,n,r):n==="array-contains"?new LA(e,r):n==="in"?new DA(e,r):n==="not-in"?new OA(e,r):n==="array-contains-any"?new MA(e,r):new St(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RA(e,r):new zA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ko(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends nN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Cr(e,n)}matches(e){return rN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function rN(t){return t.op==="and"}function iN(t){return CA(t)&&rN(t)}function CA(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function xp(t){if(t instanceof St)return t.field.canonicalString()+t.op.toString()+Po(t.value);if(iN(t))return t.filters.map(e=>xp(e)).join(",");{const e=t.filters.map(n=>xp(n)).join(",");return`${t.op}(${e})`}}function sN(t,e){return t instanceof St?function(r,i){return i instanceof St&&r.op===i.op&&r.field.isEqual(i.field)&&Ir(r.value,i.value)}(t,e):t instanceof Cr?function(r,i){return i instanceof Cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,c,h)=>a&&sN(c,i.filters[h]),!0):!1}(t,e):void we(19439)}function aN(t){return t instanceof St?function(n){return`${n.field.canonicalString()} ${n.op} ${Po(n.value)}`}(t):t instanceof Cr?function(n){return n.op.toString()+" {"+n.getFilters().map(aN).join(" ,")+"}"}(t):"Filter"}class AA extends St{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class RA extends St{constructor(e,n){super(e,"in",n),this.keys=oN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zA extends St{constructor(e,n){super(e,"not-in",n),this.keys=oN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class LA extends St{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ay(n)&&Sc(n.arrayValue,this.value)}}class DA extends St{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sc(this.value.arrayValue,n)}}class OA extends St{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sc(this.value.arrayValue,n)}}class MA extends St{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ay(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.Pe=null}}function kx(t,e=null,n=[],r=[],i=null,a=null,c=null){return new VA(t,e,n,r,i,a,c)}function oy(t){const e=ke(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Zh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Po(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Po(r)).join(",")),e.Pe=n}return e.Pe}function ly(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ex(t.startAt,e.startAt)&&Ex(t.endAt,e.endAt)}function _p(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n=null,r=[],i=[],a=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function FA(t,e,n,r,i,a,c,h){return new Kh(t,e,n,r,i,a,c,h)}function cy(t){return new Kh(t)}function Px(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UA(t){return t.collectionGroup!==null}function Yl(t){const e=ke(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new At(Wt.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new dh(a,r))}),n.has(Wt.keyField().canonicalString())||e.Te.push(new dh(Wt.keyField(),r))}return e.Te}function jr(t){const e=ke(t);return e.Ie||(e.Ie=BA(e,Yl(t))),e.Ie}function BA(t,e){if(t.limitType==="F")return kx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new dh(i.field,a)});const n=t.endAt?new uh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uh(t.startAt.position,t.startAt.inclusive):null;return kx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wp(t,e,n){return new Kh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gh(t,e){return ly(jr(t),jr(e))&&t.limitType===e.limitType}function lN(t){return`${oy(jr(t))}|lt:${t.limitType}`}function $a(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aN(i)).join(", ")}]`),Zh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Po(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Po(i)).join(",")),`Target(${r})`}(jr(t))}; limitType=${t.limitType})`}function Qh(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ge.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of Yl(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,h,f){const m=Tx(c,h,f);return c.inclusive?m<=0:m<0}(r.startAt,Yl(r),i)||r.endAt&&!function(c,h,f){const m=Tx(c,h,f);return c.inclusive?m>=0:m>0}(r.endAt,Yl(r),i))}(t,e)}function WA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cN(t){return(e,n)=>{let r=!1;for(const i of Yl(t)){const a=HA(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function HA(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(a,c,h){const f=c.data.field(a),m=h.data.field(a);return f!==null&&m!==null?ko(f,m):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return q1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new ut(ge.comparator);function ci(){return $A}const uN=new ut(ge.comparator);function Ol(...t){let e=uN;for(const n of t)e=e.insert(n.key,n);return e}function dN(t){let e=uN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fs(){return Xl()}function hN(){return Xl()}function Xl(){return new da(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZA=new ut(ge.comparator),qA=new At(ge.comparator);function Oe(...t){let e=qA;for(const n of t)e=e.add(n);return e}const KA=new At(Ce);function GA(){return KA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function fN(t){return{integerValue:""+t}}function QA(t,e){return bA(e)?fN(e):uy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this._=void 0}}function JA(t,e,n){return t instanceof Ic?function(i,a){const c={fields:{[Q1]:{stringValue:G1},[Y1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&sy(a)&&(a=qh(a)),a&&(c.fields[J1]=a),{mapValue:c}}(n,e):t instanceof Cc?pN(t,e):t instanceof Ac?gN(t,e):function(i,a){const c=mN(i,a),h=Sx(c)+Sx(i.Ee);return vp(c)&&vp(i.Ee)?fN(h):uy(i.serializer,h)}(t,e)}function YA(t,e,n){return t instanceof Cc?pN(t,e):t instanceof Ac?gN(t,e):n}function mN(t,e){return t instanceof hh?function(r){return vp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ic extends Jh{}class Cc extends Jh{constructor(e){super(),this.elements=e}}function pN(t,e){const n=yN(e);for(const r of t.elements)n.some(i=>Ir(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ac extends Jh{constructor(e){super(),this.elements=e}}function gN(t,e){let n=yN(e);for(const r of t.elements)n=n.filter(i=>!Ir(i,r));return{arrayValue:{values:n}}}class hh extends Jh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Sx(t){return yt(t.integerValue||t.doubleValue)}function yN(t){return ay(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.field=e,this.transform=n}}function eR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Cc&&i instanceof Cc||r instanceof Ac&&i instanceof Ac?Eo(r.elements,i.elements,Ir):r instanceof hh&&i instanceof hh?Ir(r.Ee,i.Ee):r instanceof Ic&&i instanceof Ic}(t.transform,e.transform)}class tR{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Td(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yh{}function vN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dy(t.key,sr.none()):new Zc(t.key,t.data,sr.none());{const n=t.data,r=fn.empty();let i=new At(Wt.comparator);for(let a of e.fields)if(!i.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new _s(t.key,r,new jn(i.toArray()),sr.none())}}function nR(t,e,n){t instanceof Zc?function(i,a,c){const h=i.value.clone(),f=Cx(i.fieldTransforms,a,c.transformResults);h.setAll(f),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):t instanceof _s?function(i,a,c){if(!Td(i.precondition,a))return void a.convertToUnknownDocument(c.version);const h=Cx(i.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(xN(i)),f.setAll(h),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(t,e,n):function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function ec(t,e,n,r){return t instanceof Zc?function(a,c,h,f){if(!Td(a.precondition,c))return h;const m=a.value.clone(),y=Ax(a.fieldTransforms,f,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(t,e,n,r):t instanceof _s?function(a,c,h,f){if(!Td(a.precondition,c))return h;const m=Ax(a.fieldTransforms,f,c),y=c.data;return y.setAll(xN(a)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(t,e,n,r):function(a,c,h){return Td(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(t,e,n)}function rR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=mN(r.transform,i||null);a!=null&&(n===null&&(n=fn.empty()),n.set(r.field,a))}return n||null}function Ix(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Eo(r,i,(a,c)=>eR(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zc extends Yh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _s extends Yh{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Cx(t,e,n){const r=new Map;Be(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,YA(c,h,n[i]))}return r}function Ax(t,e,n){const r=new Map;for(const i of t){const a=i.transform,c=n.data.field(i.field);r.set(i.field,JA(a,c,e))}return r}class dy extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iR extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&nR(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ec(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ec(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hN();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=n.has(i.key)?null:h;const f=vN(c,h);f!==null&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(n,r)=>Ix(n,r))&&Eo(this.baseMutations,e.baseMutations,(n,r)=>Ix(n,r))}}class hy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return ZA}();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new hy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ve;function lR(t){switch(t){case X.OK:return we(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function _N(t){if(t===void 0)return li("GRPC error has no .code"),X.UNKNOWN;switch(t){case Nt.OK:return X.OK;case Nt.CANCELLED:return X.CANCELLED;case Nt.UNKNOWN:return X.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return X.INTERNAL;case Nt.UNAVAILABLE:return X.UNAVAILABLE;case Nt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Nt.NOT_FOUND:return X.NOT_FOUND;case Nt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Nt.ABORTED:return X.ABORTED;case Nt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Nt.DATA_LOSS:return X.DATA_LOSS;default:return we(39323,{code:t})}}(Ve=Nt||(Nt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new Gi([4294967295,4294967295],0);function Rx(t){const e=H1().encode(t),n=new D1;return n.update(e),new Uint8Array(n.digest())}function zx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Gi([n,r],0),new Gi([i,a],0)]}class fy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ml(`Invalid padding: ${n}`);if(r<0)throw new Ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Gi.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Gi.fromNumber(r)));return i.compare(cR)===1&&(i=new Gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Rx(e),[r,i]=zx(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);if(!this.ye(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new fy(a,i,n);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.fe===0)return;const n=Rx(e),[r,i]=zx(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,qc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xh(Ee.min(),i,new ut(Ce),ci(),Oe())}}class qc{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qc(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class wN{constructor(e,n){this.targetId=e,this.De=n}}class bN{constructor(e,n,r=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Lx{constructor(){this.ve=0,this.Ce=Dx(),this.Fe=Zt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Oe(),n=Oe(),r=Oe();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:a})}}),new qc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Dx()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class uR{constructor(e){this.We=e,this.Ge=new Map,this.ze=ci(),this.je=nd(),this.Je=nd(),this.He=new ut(Ce)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(_p(a))if(r===0){const c=new ge(a.path);this.Xe(n,c,Yt.newNoDocument(c,Ee.min()))}else Be(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const h=this._t(e),f=h?this.ut(h,e,c):1;if(f!==0){this.rt(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,m)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let c,h;try{c=ss(r).toUint8Array()}catch(f){if(f instanceof K1)return ts("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new fy(c,i,a)}catch(f){return ts(f instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,c)=>{const h=this.st(c);if(h){if(a.current&&_p(h.target)){const f=new ge(h.target.path);this.Tt(f).has(c)||this.It(c,f)||this.Xe(c,f,Yt.newNoDocument(f,e))}a.Ne&&(n.set(c,a.Le()),a.ke())}});let r=Oe();this.Je.forEach((a,c)=>{let h=!0;c.forEachWhile(f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const i=new Xh(e,n,this.He,this.ze,r);return this.ze=ci(),this.je=nd(),this.Je=nd(),this.He=new ut(Ce),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Lx,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new At(Ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new At(Ce),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Lx),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function nd(){return new ut(ge.comparator)}function Dx(){return new ut(ge.comparator)}const dR={asc:"ASCENDING",desc:"DESCENDING"},hR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fR={and:"AND",or:"OR"};class mR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bp(t,e){return t.useProto3Json||Zh(e)?e:{value:e}}function fh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pR(t,e){return fh(t,e.toTimestamp())}function Tr(t){return Be(!!t,49232),Ee.fromTimestamp(function(n){const r=is(n);return new Qe(r.seconds,r.nanos)}(t))}function my(t,e){return Np(t,e).canonicalString()}function Np(t,e){const n=function(i){return new ot(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jN(t){const e=ot.fromString(t);return Be(SN(e),10190,{key:e.toString()}),e}function jp(t,e){return my(t.databaseId,e.path)}function nm(t,e){const n=jN(e);if(n.get(1)!==t.databaseId.projectId)throw new me(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(EN(n))}function TN(t,e){return my(t.databaseId,e)}function gR(t){const e=jN(t);return e.length===4?ot.emptyPath():EN(e)}function Tp(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EN(t){return Be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ox(t,e,n){return{name:jp(t,e),fields:n.value.mapValue.fields}}function yR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:we(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(m,y){return m.useProto3Json?(Be(y===void 0||typeof y=="string",58123),Zt.fromBase64String(y||"")):(Be(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Zt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const y=m.code===void 0?X.UNKNOWN:_N(m.code);return new me(y,m.message||"")}(c);n=new bN(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=nm(t,r.document.name),a=Tr(r.document.updateTime),c=r.document.createTime?Tr(r.document.createTime):Ee.min(),h=new fn({mapValue:{fields:r.document.fields}}),f=Yt.newFoundDocument(i,a,c,h),m=r.targetIds||[],y=r.removedTargetIds||[];n=new Ed(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=nm(t,r.document),a=r.readTime?Tr(r.readTime):Ee.min(),c=Yt.newNoDocument(i,a),h=r.removedTargetIds||[];n=new Ed([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=nm(t,r.document),a=r.removedTargetIds||[];n=new Ed([],a,i,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new oR(i,a),h=r.targetId;n=new wN(h,c)}}return n}function vR(t,e){let n;if(e instanceof Zc)n={update:Ox(t,e.key,e.value)};else if(e instanceof dy)n={delete:jp(t,e.key)};else if(e instanceof _s)n={update:Ox(t,e.key,e.data),updateMask:kR(e.fieldMask)};else{if(!(e instanceof iR))return we(16599,{Rt:e.type});n={verify:jp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof Ic)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Cc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ac)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof hh)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw we(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:pR(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we(27497)}(t,e.precondition)),n}function xR(t,e){return t&&t.length>0?(Be(e!==void 0,14353),t.map(n=>function(i,a){let c=i.updateTime?Tr(i.updateTime):Tr(a);return c.isEqual(Ee.min())&&(c=Tr(a)),new tR(c,i.transformResults||[])}(n,e))):[]}function _R(t,e){return{documents:[TN(t,e.path)]}}function wR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TN(t,i);const a=function(m){if(m.length!==0)return PN(Cr.create(m,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(y=>function(w){return{field:Za(w.field),direction:jR(w.dir)}}(y))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=bp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:n,parent:i}}function bR(t){let e=gR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Be(r===1,65062);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];n.where&&(a=function(x){const w=kN(x);return w instanceof Cr&&iN(w)?w.getFilters():[w]}(n.where));let c=[];n.orderBy&&(c=function(x){return x.map(w=>function(M){return new dh(qa(M.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let h=null;n.limit&&(h=function(x){let w;return w=typeof x=="object"?x.value:x,Zh(w)?null:w}(n.limit));let f=null;n.startAt&&(f=function(x){const w=!!x.before,R=x.values||[];return new uh(R,w)}(n.startAt));let m=null;return n.endAt&&(m=function(x){const w=!x.before,R=x.values||[];return new uh(R,w)}(n.endAt)),FA(e,i,c,a,h,"F",f,m)}function NR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qa(n.unaryFilter.field);return St.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qa(n.unaryFilter.field);return St.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=qa(n.unaryFilter.field);return St.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qa(n.unaryFilter.field);return St.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return St.create(qa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cr.create(n.compositeFilter.filters.map(r=>kN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function jR(t){return dR[t]}function TR(t){return hR[t]}function ER(t){return fR[t]}function Za(t){return{fieldPath:t.canonicalString()}}function qa(t){return Wt.fromServerFormat(t.fieldPath)}function PN(t){return t instanceof St?function(n){if(n.op==="=="){if(jx(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NAN"}};if(Nx(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jx(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NAN"}};if(Nx(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Za(n.field),op:TR(n.op),value:n.value}}}(t):t instanceof Cr?function(n){const r=n.getFilters().map(i=>PN(i));return r.length===1?r[0]:{compositeFilter:{op:ER(n.op),filters:r}}}(t):we(54877,{filter:t})}function kR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,r,i,a=Ee.min(),c=Ee.min(),h=Zt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.gt=e}}function SR(t){const e=bR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.Dn=new CR}addToCollectionParentIndex(e,n){return this.Dn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(rs.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class CR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new At(ot.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new At(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IN=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(IN,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new So(0)}static ur(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="LruGarbageCollector",AR=1048576;function Fx([t,e],[n,r]){const i=Ce(t,n);return i===0?Ce(e,r):i}class RR{constructor(e){this.Tr=e,this.buffer=new At(Fx),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Fx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(Vx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mo(n)?oe(Vx,"Ignoring IndexedDB error during garbage collection: ",n):await Oo(n)}await this.Rr(3e5)})}}class LR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return J.resolve($h.ue);const r=new RR(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Mx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mx):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,c,h,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,h=Date.now(),this.removeTargets(e,r,n))).next(x=>(a=x,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(m=Date.now(),Ha()<=De.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${i} in `+(h-c)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${x} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}function DR(t,e){return new LR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.changes=new da(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ec(r.mutation,i,jn.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const i=Fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let c=Ol();return a.forEach((h,f)=>{c=c.insert(h,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{n.set(c,h)})})}computeViews(e,n,r,i){let a=ci();const c=Xl(),h=function(){return Xl()}();return n.forEach((f,m)=>{const y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof _s)?a=a.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),ec(y.mutation,m,y.mutation.getFieldMask(),Qe.now())):c.set(m.key,jn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,y)=>c.set(m,y)),n.forEach((m,y)=>{var x;return h.set(m,new MR(y,(x=c.get(m))!==null&&x!==void 0?x:null))}),h))}recalculateAndSaveOverlays(e,n){const r=Xl();let i=new ut((c,h)=>c-h),a=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const h of c)h.keys().forEach(f=>{const m=n.get(f);if(m===null)return;let y=r.get(f)||jn.empty();y=h.applyToLocalView(m,y),r.set(f,y);const x=(i.get(h.batchId)||Oe()).add(f);i=i.insert(h.batchId,x)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,y=f.value,x=hN();y.forEach(w=>{if(!a.has(w)){const R=vN(n.get(w),r.get(w));R!==null&&x.set(w,R),a=a.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,x))}return J.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(c){return ge.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):J.resolve(Fs());let h=Ec,f=a;return c.next(m=>J.forEach(m,(y,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),a.get(y)?J.resolve():this.remoteDocumentCache.getEntry(e,y).next(w=>{f=f.insert(y,w)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,Oe())).next(y=>({batchId:h,changes:dN(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let i=Ol();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let c=Ol();return this.indexManager.getCollectionParents(e,a).next(h=>J.forEach(h,f=>{const m=function(x,w){return new Kh(w,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(y=>{y.forEach((x,w)=>{c=c.insert(x,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(c=>{a.forEach((f,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,Yt.newInvalidDocument(y)))});let h=Ol();return c.forEach((f,m)=>{const y=a.get(f);y!==void 0&&ec(y.mutation,m,jn.empty(),Qe.now()),Qh(n,m)&&(h=h.insert(f,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return J.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Tr(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:SR(i.bundledQuery),readTime:Tr(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.overlays=new ut(ge.comparator),this.kr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fs();return J.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=Fs(),a=n.length+1,c=new ge(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ut((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=Fs(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=Fs(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=i)););return J.resolve(h)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new aR(n,r));let a=this.kr.get(n);a===void 0&&(a=Oe(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.qr=new At(Dt.Qr),this.$r=new At(Dt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Dt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Dt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ge(new ot([])),r=new Dt(n,e),i=new Dt(n,e+1),a=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ge(new ot([])),r=new Dt(n,e),i=new Dt(n,e+1);let a=Oe();return this.$r.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new Dt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ge.comparator(e.key,n.key)||Ce(e.Hr,n.Hr)}static Ur(e,n){return Ce(e.Hr,n.Hr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new At(Dt.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new sR(a,n,r,i);this.mutationQueue.push(c);for(const h of i)this.Yr=this.Yr.add(new Dt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return J.resolve(c)}lookupMutationBatch(e,n){return J.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return J.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?iy:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dt(n,0),i=new Dt(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],c=>{const h=this.Zr(c.Hr);a.push(h)}),J.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Ce);return n.forEach(i=>{const a=new Dt(i,0),c=new Dt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],h=>{r=r.add(h.Hr)})}),J.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ge.isDocumentKey(a)||(a=a.child(""));const c=new Dt(new ge(a),0);let h=new At(Ce);return this.Yr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(f.Hr)),!0)},c),J.resolve(this.ei(h))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Be(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return J.forEach(n.mutations,i=>{const a=new Dt(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Dt(n,0),i=this.Yr.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.ni=e,this.docs=function(){return new ut(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=ci();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Yt.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ci();const c=n.path,h=new ge(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||vA(yA(y),r)<=0||(i.has(y.key)||Qh(n,y))&&(a=a.insert(y.key,y.mutableCopy()))}return J.resolve(a)}getAllFromCollectionGroup(e,n,r,i){we(9500)}ri(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $R(this)}getSize(e){return J.resolve(this.size)}}class $R extends OR{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.persistence=e,this.ii=new da(n=>oy(n),ly),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.si=0,this.oi=new py,this.targetCount=0,this._i=So.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),J.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new So(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.hr(n),J.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((c,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),J.waitFor(a).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),J.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.ai={},this.overlays={},this.ui=new $h(0),this.ci=!1,this.ci=!0,this.li=new BR,this.referenceDelegate=e(this),this.hi=new ZR(this),this.indexManager=new IR,this.remoteDocumentCache=function(i){return new HR(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new PR(n),this.Ti=new FR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new WR(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new qR(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return J.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class qR extends _A{constructor(e){super(),this.currentSequenceNumber=e}}class gy{constructor(e){this.persistence=e,this.Ai=new py,this.Ri=null}static Vi(e){return new gy(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,r=>{const i=ge.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,Ee.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return J.or([()=>J.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class mh{constructor(e,n){this.persistence=e,this.gi=new da(r=>NA(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=DR(this,n)}static Vi(e,n){return new mh(e,n)}Ii(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return J.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?J.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,n).next(h=>{h||(r++,a.removeEntry(c,Ee.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nd(e.data.value)),n}Sr(e,n,r){return J.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Oe(),i=Oe();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new yy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return bP()?8:wA(en())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new KR;return this.ws(e,n,c).next(h=>{if(a.result=h,this.Rs)return this.Ss(e,n,c,h.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ha()<=De.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",$a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(Ha()<=De.DEBUG&&oe("QueryEngine","Query:",$a(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ha()<=De.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",$a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(n))):J.resolve())}ps(e,n){if(Px(n))return J.resolve(null);let r=jr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wp(n,null,"F"),r=jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Oe(...a);return this.gs.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.bs(n,h);return this.Ds(n,m,c,f.readTime)?this.ps(e,wp(n,null,"F")):this.vs(e,m,n,f)}))})))}ys(e,n,r,i){return Px(n)||i.isEqual(Ee.min())?J.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(n,a);return this.Ds(n,c,r,i)?J.resolve(null):(Ha()<=De.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$a(n)),this.vs(e,c,n,gA(i,Ec)).next(h=>h))})}bs(e,n){let r=new At(cN(e));return n.forEach((i,a)=>{Qh(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return Ha()<=De.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",$a(n)),this.gs.getDocumentsMatchingQuery(e,n,rs.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="LocalStore",QR=3e8;class JR{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ut(Ce),this.Ms=new da(a=>oy(a),ly),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function YR(t,e,n,r){return new JR(t,e,n,r)}async function AN(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let f=Oe();for(const m of i){c.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of a){h.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(r,f).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:h}))})})}function XR(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(h,f,m,y){const x=m.batch,w=x.keys();let R=J.resolve();return w.forEach(M=>{R=R.next(()=>y.getEntry(f,M)).next(C=>{const A=m.docVersions.get(M);Be(A!==null,48541),C.version.compareTo(A)<0&&(x.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),y.addEntry(C)))})}),R.next(()=>h.mutationQueue.removeMutationBatch(f,x))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Oe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RN(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function e4(t,e){const n=ke(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const h=[];e.targetChanges.forEach((y,x)=>{const w=i.get(x);if(!w)return;h.push(n.hi.removeMatchingKeys(a,y.removedDocuments,x).next(()=>n.hi.addMatchingKeys(a,y.addedDocuments,x)));let R=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(x)!==null?R=R.withResumeToken(Zt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),i=i.insert(x,R),function(C,A,P){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=QR?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(w,R,y)&&h.push(n.hi.updateTargetData(a,R))});let f=ci(),m=Oe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,y))}),h.push(t4(a,c,e.documentUpdates).next(y=>{f=y.Ls,m=y.ks})),!r.isEqual(Ee.min())){const y=n.hi.getLastRemoteSnapshotVersion(a).next(x=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(y)}return J.waitFor(h).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(n.Fs=i,a))}function t4(t,e,n){let r=Oe(),i=Oe();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=ci();return n.forEach((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(Ee.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):oe(vy,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{Ls:c,ks:i}})}function n4(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function r4(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,J.resolve(i)):n.hi.allocateTargetId(r).next(c=>(i=new Oi(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Ep(t,e,n){const r=ke(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Mo(c))throw c;oe(vy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Ux(t,e,n){const r=ke(t);let i=Ee.min(),a=Oe();return r.persistence.runTransaction("Execute query","readwrite",c=>function(f,m,y){const x=ke(f),w=x.Ms.get(y);return w!==void 0?J.resolve(x.Fs.get(w)):x.hi.getTargetData(m,y)}(r,c,jr(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,h.targetId).next(f=>{a=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:Ee.min(),n?a:Oe())).next(h=>(i4(r,WA(e),h),{documents:h,qs:a})))}function i4(t,e,n){let r=t.xs.get(e)||Ee.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class Bx{constructor(){this.activeTargetIds=GA()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s4{constructor(){this.Fo=new Bx,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Bx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="ConnectivityMonitor";class Hx{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(Wx,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){oe(Wx,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd=null;function kp(){return rd===null?rd=function(){return 268435456+Math.round(2147483648*Math.random())}():rd++,"0x"+rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="RestConnection",o4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class l4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===lh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const c=kp(),h=this.Go(e,n.toUriEncodedString());oe(rm,`Sending RPC '${e}' ${c}:`,h,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,i,a);const{host:m}=new URL(h),y=gs(m);return this.jo(e,h,f,r,y).then(x=>(oe(rm,`Received RPC '${e}' ${c}: `,x),x),x=>{throw ts(rm,`RPC '${e}' ${c} failed with error: `,x,"url: ",h,"request:",r),x})}Jo(e,n,r,i,a,c){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=o4[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class u4 extends l4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const c=kp();return new Promise((h,f)=>{const m=new O1;m.setWithCredentials(!0),m.listenOnce(M1.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case bd.NO_ERROR:const x=m.getResponseJson();oe(Gt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),h(x);break;case bd.TIMEOUT:oe(Gt,`RPC '${e}' ${c} timed out`),f(new me(X.DEADLINE_EXCEEDED,"Request time out"));break;case bd.HTTP_ERROR:const w=m.getStatus();if(oe(Gt,`RPC '${e}' ${c} failed with status:`,w,"response text:",m.getResponseText()),w>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const C=function(P){const j=P.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(j)>=0?j:X.UNKNOWN}(M.status);f(new me(C,M.message))}else f(new me(X.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new me(X.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{oe(Gt,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(i);oe(Gt,`RPC '${e}' ${c} sending request:`,i),m.send(n,"POST",y,r,15)})}P_(e,n,r){const i=kp(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=U1(),h=F1(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const y=a.join("");oe(Gt,`Creating RPC '${e}' stream ${i}: ${y}`,f);const x=c.createWebChannel(y,f);this.T_(x);let w=!1,R=!1;const M=new c4({Ho:A=>{R?oe(Gt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(w||(oe(Gt,`Opening RPC '${e}' stream ${i} transport.`),x.open(),w=!0),oe(Gt,`RPC '${e}' stream ${i} sending:`,A),x.send(A))},Yo:()=>x.close()}),C=(A,P,j)=>{A.listen(P,S=>{try{j(S)}catch(H){setTimeout(()=>{throw H},0)}})};return C(x,Dl.EventType.OPEN,()=>{R||(oe(Gt,`RPC '${e}' stream ${i} transport opened.`),M.s_())}),C(x,Dl.EventType.CLOSE,()=>{R||(R=!0,oe(Gt,`RPC '${e}' stream ${i} transport closed`),M.__(),this.I_(x))}),C(x,Dl.EventType.ERROR,A=>{R||(R=!0,ts(Gt,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),M.__(new me(X.UNAVAILABLE,"The operation could not be completed")))}),C(x,Dl.EventType.MESSAGE,A=>{var P;if(!R){const j=A.data[0];Be(!!j,16349);const S=j,H=(S==null?void 0:S.error)||((P=S[0])===null||P===void 0?void 0:P.error);if(H){oe(Gt,`RPC '${e}' stream ${i} received error:`,H);const F=H.status;let B=function(O){const k=Nt[O];if(k!==void 0)return _N(k)}(F),I=H.message;B===void 0&&(B=X.INTERNAL,I="Unknown error status: "+F+" with message "+H.message),R=!0,M.__(new me(B,I)),x.close()}else oe(Gt,`RPC '${e}' stream ${i} received:`,j),M.a_(j)}}),C(h,V1.STAT_EVENT,A=>{A.stat===pp.PROXY?oe(Gt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===pp.NOPROXY&&oe(Gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.o_()},0),M}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t){return new mR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="PersistentStream";class LN{constructor(e,n,r,i,a,c,h,f){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zN(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new me(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return oe($x,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(oe($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d4 extends LN{constructor(e,n,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=yR(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ee.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?Tr(c.readTime):Ee.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Tp(this.serializer),n.addTarget=function(a,c){let h;const f=c.target;if(h=_p(f)?{documents:_R(a,f)}:{query:wR(a,f).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=NN(a,c.resumeToken);const m=bp(a,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ee.min())>0){h.readTime=fh(a,c.snapshotVersion.toTimestamp());const m=bp(a,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const r=NR(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Tp(this.serializer),n.removeTarget=e,this.k_(n)}}class h4 extends LN{constructor(e,n,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=xR(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Tp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vR(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{}class m4 extends f4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new me(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,Np(n,r),i,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(X.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Jo(e,Np(n,r),i,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(X.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class p4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(li(n),this._a=!1):oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="RemoteStore";class g4{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{ha(this)&&(oe(ra,"Restarting streams for network reachability change."),await async function(f){const m=ke(f);m.Ia.add(4),await Kc(m),m.Aa.set("Unknown"),m.Ia.delete(4),await tf(m)}(this))})}),this.Aa=new p4(r,i)}}async function tf(t){if(ha(t))for(const e of t.da)await e(!0)}async function Kc(t){for(const e of t.da)await e(!1)}function DN(t,e){const n=ke(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),by(n)?wy(n):Vo(n).x_()&&_y(n,e))}function xy(t,e){const n=ke(t),r=Vo(n);n.Ta.delete(e),r.x_()&&ON(n,e),n.Ta.size===0&&(r.x_()?r.B_():ha(n)&&n.Aa.set("Unknown"))}function _y(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vo(t).H_(e)}function ON(t,e){t.Ra.$e(e),Vo(t).Y_(e)}function wy(t){t.Ra=new uR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Vo(t).start(),t.Aa.aa()}function by(t){return ha(t)&&!Vo(t).M_()&&t.Ta.size>0}function ha(t){return ke(t).Ia.size===0}function MN(t){t.Ra=void 0}async function y4(t){t.Aa.set("Online")}async function v4(t){t.Ta.forEach((e,n)=>{_y(t,e)})}async function x4(t,e){MN(t),by(t)?(t.Aa.la(e),wy(t)):t.Aa.set("Unknown")}async function _4(t,e,n){if(t.Aa.set("Online"),e instanceof bN&&e.state===2&&e.cause)try{await async function(i,a){const c=a.cause;for(const h of a.targetIds)i.Ta.has(h)&&(await i.remoteSyncer.rejectListen(h,c),i.Ta.delete(h),i.Ra.removeTarget(h))}(t,e)}catch(r){oe(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ph(t,r)}else if(e instanceof Ed?t.Ra.Ye(e):e instanceof wN?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ee.min()))try{const r=await RN(t.localStore);n.compareTo(r)>=0&&await function(a,c){const h=a.Ra.Pt(c);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ta.get(m);y&&a.Ta.set(m,y.withResumeToken(f.resumeToken,c))}}),h.targetMismatches.forEach((f,m)=>{const y=a.Ta.get(f);if(!y)return;a.Ta.set(f,y.withResumeToken(Zt.EMPTY_BYTE_STRING,y.snapshotVersion)),ON(a,f);const x=new Oi(y.target,f,m,y.sequenceNumber);_y(a,x)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){oe(ra,"Failed to raise snapshot:",r),await ph(t,r)}}async function ph(t,e,n){if(!Mo(e))throw e;t.Ia.add(1),await Kc(t),t.Aa.set("Offline"),n||(n=()=>RN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(ra,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await tf(t)})}function VN(t,e){return e().catch(n=>ph(t,n,e))}async function nf(t){const e=ke(t),n=os(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:iy;for(;w4(e);)try{const i=await n4(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,b4(e,i)}catch(i){await ph(e,i)}FN(e)&&UN(e)}function w4(t){return ha(t)&&t.Pa.length<10}function b4(t,e){t.Pa.push(e);const n=os(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function FN(t){return ha(t)&&!os(t).M_()&&t.Pa.length>0}function UN(t){os(t).start()}async function N4(t){os(t).na()}async function j4(t){const e=os(t);for(const n of t.Pa)e.X_(n.mutations)}async function T4(t,e,n){const r=t.Pa.shift(),i=hy.from(r,e,n);await VN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nf(t)}async function E4(t,e){e&&os(t).Z_&&await async function(r,i){if(function(c){return lR(c)&&c!==X.ABORTED}(i.code)){const a=r.Pa.shift();os(r).N_(),await VN(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await nf(r)}}(t,e),FN(t)&&UN(t)}async function Zx(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),oe(ra,"RemoteStore received new credentials");const r=ha(n);n.Ia.add(3),await Kc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await tf(n)}async function k4(t,e){const n=ke(t);e?(n.Ia.delete(2),await tf(n)):e||(n.Ia.add(2),await Kc(n),n.Aa.set("Unknown"))}function Vo(t){return t.Va||(t.Va=function(n,r,i){const a=ke(n);return a.ia(),new d4(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:y4.bind(null,t),e_:v4.bind(null,t),n_:x4.bind(null,t),J_:_4.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),by(t)?wy(t):t.Aa.set("Unknown")):(await t.Va.stop(),MN(t))})),t.Va}function os(t){return t.ma||(t.ma=function(n,r,i){const a=ke(n);return a.ia(),new h4(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:N4.bind(null,t),n_:E4.bind(null,t),ea:j4.bind(null,t),ta:T4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await nf(t)):(await t.ma.stop(),t.Pa.length>0&&(oe(ra,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const c=Date.now()+r,h=new Ny(e,n,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(t,e){if(li("AsyncQueue",`${e}: ${t}`),Mo(t))return new me(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{static emptySet(e){return new vo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=Ol(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.fa=new ut(ge.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Io{constructor(e,n,r,i,a,c,h,f,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,a){const c=[];return n.forEach(h=>{c.push({type:0,doc:h})}),new Io(e,n,vo.emptySet(n),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class S4{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=ke(n),a=i.queries;i.queries=Kx(),a.forEach((c,h)=>{for(const f of h.wa)f.onError(r)})})(this,new me(X.ABORTED,"Firestore shutting down"))}}function Kx(){return new da(t=>lN(t),Gh)}async function I4(t,e){const n=ke(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new P4,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const h=jy(c,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Ty(n)}async function C4(t,e){const n=ke(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function A4(t,e){const n=ke(t);let r=!1;for(const i of e){const a=i.query,c=n.queries.get(a);if(c){for(const h of c.wa)h.Ca(i)&&(r=!0);c.ya=i}}r&&Ty(n)}function R4(t,e,n){const r=ke(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function Ty(t){t.Da.forEach(e=>{e.next()})}var Pp,Gx;(Gx=Pp||(Pp={})).Fa="default",Gx.Cache="cache";class z4{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.key=e}}class WN{constructor(e){this.key=e}}class L4{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Oe(),this.mutatedKeys=Oe(),this.Xa=cN(e),this.eu=new vo(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new qx,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,c=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,x)=>{const w=i.get(y),R=Qh(this.query,x)?x:null,M=!!w&&this.mutatedKeys.has(w.key),C=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let A=!1;w&&R?w.data.isEqual(R.data)?M!==C&&(r.track({type:3,doc:R}),A=!0):this.iu(w,R)||(r.track({type:2,doc:R}),A=!0,(f&&this.Xa(R,f)>0||m&&this.Xa(R,m)<0)&&(h=!0)):!w&&R?(r.track({type:0,doc:R}),A=!0):w&&!R&&(r.track({type:1,doc:w}),A=!0,(f||m)&&(h=!0)),A&&(R?(c=c.add(R),a=C?a.add(y):a.delete(y)):(c=c.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{eu:c,ru:r,Ds:h,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((y,x)=>function(R,M){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:A})}};return C(R)-C(M)}(y.type,x.type)||this.Xa(y.doc,x.doc)),this.su(r),i=i!=null&&i;const h=n&&!i?this.ou():[],f=this.Za.size===0&&this.current&&!i?1:0,m=f!==this.Ya;return this.Ya=f,c.length!==0||m?{snapshot:new Io(this.query,e.eu,a,c,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Oe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new WN(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new BN(r))}),n}uu(e){this.Ha=e.qs,this.Za=Oe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Io.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ey="SyncEngine";class D4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class O4{constructor(e){this.key=e,this.lu=!1}}class M4{constructor(e,n,r,i,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new da(h=>lN(h),Gh),this.Tu=new Map,this.Iu=new Set,this.du=new ut(ge.comparator),this.Eu=new Map,this.Au=new py,this.Ru={},this.Vu=new Map,this.mu=So.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function V4(t,e,n=!0){const r=GN(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await HN(r,e,n,!0),i}async function F4(t,e){const n=GN(t);await HN(n,e,!0,!1)}async function HN(t,e,n,r){const i=await r4(t.localStore,jr(e)),a=i.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let h;return r&&(h=await U4(t,e,a,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&DN(t.remoteStore,i),h}async function U4(t,e,n,r,i){t.gu=(x,w,R)=>async function(C,A,P,j){let S=A.view.nu(P);S.Ds&&(S=await Ux(C.localStore,A.query,!1).then(({documents:I})=>A.view.nu(I,S)));const H=j&&j.targetChanges.get(A.targetId),F=j&&j.targetMismatches.get(A.targetId)!=null,B=A.view.applyChanges(S,C.isPrimaryClient,H,F);return Jx(C,A.targetId,B._u),B.snapshot}(t,x,w,R);const a=await Ux(t.localStore,e,!0),c=new L4(e,a.qs),h=c.nu(a.documents),f=qc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=c.applyChanges(h,t.isPrimaryClient,f);Jx(t,n,m._u);const y=new D4(e,n,c);return t.Pu.set(e,y),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),m.snapshot}async function B4(t,e,n){const r=ke(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(c=>!Gh(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ep(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xy(r.remoteStore,i.targetId),Sp(r,i.targetId)}).catch(Oo)):(Sp(r,i.targetId),await Ep(r.localStore,i.targetId,!0))}async function W4(t,e){const n=ke(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xy(n.remoteStore,r.targetId))}async function H4(t,e,n){const r=J4(t);try{const i=await function(c,h){const f=ke(c),m=Qe.now(),y=h.reduce((R,M)=>R.add(M.key),Oe());let x,w;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=ci(),C=Oe();return f.Os.getEntries(R,y).next(A=>{M=A,M.forEach((P,j)=>{j.isValidDocument()||(C=C.add(P))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,M)).next(A=>{x=A;const P=[];for(const j of h){const S=rR(j,x.get(j.key).overlayedDocument);S!=null&&P.push(new _s(j.key,S,tN(S.value.mapValue),sr.exists(!0)))}return f.mutationQueue.addMutationBatch(R,m,P,h)}).next(A=>{w=A;const P=A.applyToLocalDocumentSet(x,C);return f.documentOverlayCache.saveOverlays(R,A.batchId,P)})}).then(()=>({batchId:w.batchId,changes:dN(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,h,f){let m=c.Ru[c.currentUser.toKey()];m||(m=new ut(Ce)),m=m.insert(h,f),c.Ru[c.currentUser.toKey()]=m}(r,i.batchId,n),await Gc(r,i.changes),await nf(r.remoteStore)}catch(i){const a=jy(i,"Failed to persist write");n.reject(a)}}async function $N(t,e){const n=ke(t);try{const r=await e4(n.localStore,e);e.targetChanges.forEach((i,a)=>{const c=n.Eu.get(a);c&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?Be(c.lu,14607):i.removedDocuments.size>0&&(Be(c.lu,42227),c.lu=!1))}),await Gc(n,r,e)}catch(r){await Oo(r)}}function Qx(t,e,n){const r=ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,c)=>{const h=c.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(c,h){const f=ke(c);f.onlineState=h;let m=!1;f.queries.forEach((y,x)=>{for(const w of x.wa)w.va(h)&&(m=!0)}),m&&Ty(f)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $4(t,e,n){const r=ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let c=new ut(ge.comparator);c=c.insert(a,Yt.newNoDocument(a,Ee.min()));const h=Oe().add(a),f=new Xh(Ee.min(),new Map,new ut(Ce),c,h);await $N(r,f),r.du=r.du.remove(a),r.Eu.delete(e),ky(r)}else await Ep(r.localStore,e,!1).then(()=>Sp(r,e,n)).catch(Oo)}async function Z4(t,e){const n=ke(t),r=e.batch.batchId;try{const i=await XR(n.localStore,e);qN(n,r,null),ZN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gc(n,i)}catch(i){await Oo(i)}}async function q4(t,e,n){const r=ke(t);try{const i=await function(c,h){const f=ke(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,h).next(x=>(Be(x!==null,37113),y=x.keys(),f.mutationQueue.removeMutationBatch(m,x))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(r.localStore,e);qN(r,e,n),ZN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gc(r,i)}catch(i){await Oo(i)}}function ZN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function qN(t,e,n){const r=ke(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Sp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||KN(t,r)})}function KN(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xy(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),ky(t))}function Jx(t,e,n){for(const r of n)r instanceof BN?(t.Au.addReference(r.key,e),K4(t,r)):r instanceof WN?(oe(Ey,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||KN(t,r.key)):we(19791,{yu:r})}function K4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(oe(Ey,"New document in limbo: "+n),t.Iu.add(r),ky(t))}function ky(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ge(ot.fromString(e)),r=t.mu.next();t.Eu.set(r,new O4(n)),t.du=t.du.insert(n,r),DN(t.remoteStore,new Oi(jr(cy(n.path)),r,"TargetPurposeLimboResolution",$h.ue))}}async function Gc(t,e,n){const r=ke(t),i=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((h,f)=>{c.push(r.gu(f,e,n).then(m=>{var y;if((m||n)&&r.isPrimaryClient){const x=m?!m.fromCache:(y=n==null?void 0:n.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,x?"current":"not-current")}if(m){i.push(m);const x=yy.Es(f.targetId,m);a.push(x)}}))}),await Promise.all(c),r.hu.J_(i),await async function(f,m){const y=ke(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>J.forEach(m,w=>J.forEach(w.Is,R=>y.persistence.referenceDelegate.addReference(x,w.targetId,R)).next(()=>J.forEach(w.ds,R=>y.persistence.referenceDelegate.removeReference(x,w.targetId,R)))))}catch(x){if(!Mo(x))throw x;oe(vy,"Failed to update sequence numbers: "+x)}for(const x of m){const w=x.targetId;if(!x.fromCache){const R=y.Fs.get(w),M=R.snapshotVersion,C=R.withLastLimboFreeSnapshotVersion(M);y.Fs=y.Fs.insert(w,C)}}}(r.localStore,a))}async function G4(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){oe(Ey,"User change. New user:",e.toKey());const r=await AN(n.localStore,e);n.currentUser=e,function(a,c){a.Vu.forEach(h=>{h.forEach(f=>{f.reject(new me(X.CANCELLED,c))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gc(n,r.Bs)}}function Q4(t,e){const n=ke(t),r=n.Eu.get(e);if(r&&r.lu)return Oe().add(r.key);{let i=Oe();const a=n.Tu.get(e);if(!a)return i;for(const c of a){const h=n.Pu.get(c);i=i.unionWith(h.view.tu)}return i}}function GN(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$N.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$4.bind(null,e),e.hu.J_=A4.bind(null,e.eventManager),e.hu.pu=R4.bind(null,e.eventManager),e}function J4(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q4.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ef(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return YR(this.persistence,new GR,e.initialUser,this.serializer)}Du(e){return new CN(gy.Vi,this.serializer)}bu(e){return new s4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class Y4 extends gh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Be(this.persistence.referenceDelegate instanceof mh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zR(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new CN(r=>mh.Vi(r,n),this.serializer)}}class Ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G4.bind(null,this.syncEngine),await k4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new S4}()}createDatastore(e){const n=ef(e.databaseInfo.databaseId),r=function(a){return new u4(a)}(e.databaseInfo);return function(a,c,h,f){return new m4(a,c,h,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,c,h){return new g4(r,i,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Qx(this.syncEngine,n,0),function(){return Hx.C()?new Hx:new a4}())}createSyncEngine(e,n){return function(i,a,c,h,f,m,y){const x=new M4(i,a,c,h,f,m);return y&&(x.fu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=ke(i);oe(ra,"RemoteStore shutting down."),a.Ia.add(5),await Kc(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class ez{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=ny.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{oe(ls,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(oe(ls,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sm(t,e){t.asyncQueue.verifyOperationInProgress(),oe(ls,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await AN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ts("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ts("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function Yx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tz(t);oe(ls,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Zx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Zx(e.remoteStore,i)),t._onlineComponents=e}async function tz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(ls,"Using user provided OfflineComponentProvider");try{await sm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===X.FAILED_PRECONDITION||i.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ts("Error using user provided cache. Falling back to memory cache: "+n),await sm(t,new gh)}}else oe(ls,"Using default OfflineComponentProvider"),await sm(t,new Y4(void 0));return t._offlineComponents}async function QN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(ls,"Using user provided OnlineComponentProvider"),await Yx(t,t._uninitializedComponentsProvider._online)):(oe(ls,"Using default OnlineComponentProvider"),await Yx(t,new Ip))),t._onlineComponents}function nz(t){return QN(t).then(e=>e.syncEngine)}async function rz(t){const e=await QN(t),n=e.eventManager;return n.onListen=V4.bind(null,e.syncEngine),n.onUnlisten=B4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=F4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=W4.bind(null,e.syncEngine),n}function iz(t,e,n={}){const r=new Qi;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,h,f,m){const y=new X4({next:w=>{y.Ou(),c.enqueueAndForget(()=>C4(a,x));const R=w.docs.has(h);!R&&w.fromCache?m.reject(new me(X.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&w.fromCache&&f&&f.source==="server"?m.reject(new me(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),x=new z4(cy(h.path),y,{includeMetadataChanges:!0,ka:!0});return I4(a,x)}(await rz(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="firestore.googleapis.com",e_=!0;class t_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YN,this.ssl=e_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:e_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AR)throw new me(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new me(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new me(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new me(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Py{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sA;switch(r.type){case"firstParty":return new cA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xx.get(n);r&&(oe("ComponentProvider","Removing Datastore"),Xx.delete(n),r.terminate())}(this),Promise.resolve()}}function sz(t,e,n,r={}){var i;t=ns(t,Py);const a=gs(e),c=t._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;a&&(Ug(`https://${f}`),Bg("Firestore",!0)),c.host!==YN&&c.host!==f&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:f,ssl:a,emulatorOptions:r});if(!Js(m,h)&&(t._setSettings(m),r.mockUserToken)){let y,x;if(typeof r.mockUserToken=="string")y=r.mockUserToken,x=Qt.MOCK_USER;else{y=Kb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new me(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Qt(w)}t._authCredentials=new aA(new W1(y,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sy(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($c(n,Ct._jsonSchema))return new Ct(e,r||null,new ge(ot.fromString(n.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Et("string",Ct._jsonSchemaVersion),referencePath:Et("string")};class Rc extends Sy{constructor(e,n,r){super(e,n,cy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new ge(e))}withConverter(e){return new Rc(this.firestore,e,this._path)}}function Qc(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=ny.newId()),mA("doc","path",e),t instanceof Py){const r=ot.fromString(e,...n);return px(r),new Ct(t,null,new ge(r))}{if(!(t instanceof Ct||t instanceof Rc))throw new me(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return px(r),new Ct(t.firestore,t instanceof Rc?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="AsyncQueue";class r_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zN(this,"async_queue_retry"),this.oc=()=>{const r=im();r&&oe(n_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Qi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Mo(e))throw e;oe(n_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,li("INTERNAL UNHANDLED ERROR: ",i_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Ny.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&we(47125,{hc:i_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function i_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Jc extends Py{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new r_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r_(e),this._firestoreClient=void 0,await e}}}function az(t,e){const n=typeof t=="object"?t:$g(),r=typeof t=="string"?t:lh,i=Uh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=$b("firestore");a&&sz(i,...a)}return i}function XN(t){if(t._terminated)throw new me(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oz(t),t._firestoreClient}function oz(t){var e,n,r;const i=t._freezeSettings(),a=function(h,f,m,y){return new EA(h,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,JN(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ez(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(Zt.fromBase64String(e))}catch(n){throw new me(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($c(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:Et("string",Fn._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if($c(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:Et("string",Er._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($c(e,kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new kr(e.vectorValues);throw new me(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:Et("string",kr._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=/^__.*__$/;class cz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zc(e,this.data,n,this.fieldTransforms)}}class ej{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:t})}}class Iy{constructor(e,n,r,i,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Iy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return yh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(tj(this.Ec)&&lz.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class uz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ef(e)}Dc(e,n,r,i=!1){return new Iy({Ec:e,methodName:n,bc:r,path:Wt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nj(t){const e=t._freezeSettings(),n=ef(t._databaseId);return new uz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dz(t,e,n,r,i,a={}){const c=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);Ay("Data must be an object, but it was:",c,r);const h=rj(r,c);let f,m;if(a.merge)f=new jn(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const y=[];for(const x of a.mergeFields){const w=Cp(e,x,n);if(!c.contains(w))throw new me(X.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);sj(y,w)||y.push(w)}f=new jn(y),m=c.fieldTransforms.filter(x=>f.covers(x.field))}else f=null,m=c.fieldTransforms;return new cz(new fn(h),f,m)}class af extends sf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof af}}class Cy extends sf{_toFieldTransform(e){return new XA(e.path,new Ic)}isEqual(e){return e instanceof Cy}}function hz(t,e,n,r){const i=t.Dc(1,e,n);Ay("Data must be an object, but it was:",i,r);const a=[],c=fn.empty();xs(r,(f,m)=>{const y=Ry(e,f,n);m=Ye(m);const x=i.gc(y);if(m instanceof af)a.push(y);else{const w=of(m,x);w!=null&&(a.push(y),c.set(y,w))}});const h=new jn(a);return new ej(c,h,i.fieldTransforms)}function fz(t,e,n,r,i,a){const c=t.Dc(1,e,n),h=[Cp(e,r,n)],f=[i];if(a.length%2!=0)throw new me(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)h.push(Cp(e,a[w])),f.push(a[w+1]);const m=[],y=fn.empty();for(let w=h.length-1;w>=0;--w)if(!sj(m,h[w])){const R=h[w];let M=f[w];M=Ye(M);const C=c.gc(R);if(M instanceof af)m.push(R);else{const A=of(M,C);A!=null&&(m.push(R),y.set(R,A))}}const x=new jn(m);return new ej(y,x,c.fieldTransforms)}function of(t,e){if(ij(t=Ye(t)))return Ay("Unsupported field value:",e,t),rj(t,e);if(t instanceof sf)return function(r,i){if(!tj(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let c=0;for(const h of r){let f=of(h,i.yc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Qe.fromDate(r);return{timestampValue:fh(i.serializer,a)}}if(r instanceof Qe){const a=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fh(i.serializer,a)}}if(r instanceof Er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fn)return{bytesValue:NN(i.serializer,r._byteString)};if(r instanceof Ct){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:my(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kr)return function(c,h){return{mapValue:{fields:{[X1]:{stringValue:eN},[ch]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return uy(h.serializer,m)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${ry(r)}`)}(t,e)}function rj(t,e){const n={};return q1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(t,(r,i)=>{const a=of(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function ij(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Er||t instanceof Fn||t instanceof Ct||t instanceof sf||t instanceof kr)}function Ay(t,e,n){if(!ij(n)||!$1(n)){const r=ry(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Cp(t,e,n){if((e=Ye(e))instanceof rf)return e._internalPath;if(typeof e=="string")return Ry(t,e);throw yh("Field path arguments must be of type string or ",t,!1,void 0,n)}const mz=new RegExp("[~\\*/\\[\\]]");function Ry(t,e,n){if(e.search(mz)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rf(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yh(t,e,n,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new me(X.INVALID_ARGUMENT,h+t+f)}function sj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oj("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pz extends aj{data(){return super.data()}}function oj(t,e){return typeof e=="string"?Ry(t,e):e instanceof rf?e._internalPath:e._delegate._internalPath}class gz{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xs(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[ch].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>yt(c.doubleValue));return new kr(a)}convertGeoPoint(e){return new Er(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){const n=is(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);Be(SN(r),9688,{name:e});const i=new Pc(r.get(1),r.get(3)),a=new ge(r.popFirst(5));return i.isEqual(n)||li(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends aj{constructor(e,n,r,i,a,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(oj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:Et("string",Ws._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class kd extends Ws{data(e={}){return super.data(e)}}class tc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kd(this._firestore,this._userDataWriter,r.key,r,new Vl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(h=>{const f=new kd(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Vl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new kd(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Vl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:vz(h.type),doc:f,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ny.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){t=ns(t,Ct);const e=ns(t.firestore,Jc);return iz(XN(e),t._key).then(n=>Nz(e,t,n))}tc._jsonSchemaVersion="firestore/querySnapshot/1.0",tc._jsonSchema={type:Et("string",tc._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class xz extends gz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function _z(t,e,n){t=ns(t,Ct);const r=ns(t.firestore,Jc),i=yz(t.converter,e);return zy(r,[dz(nj(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sr.none())])}function wz(t,e,n,...r){t=ns(t,Ct);const i=ns(t.firestore,Jc),a=nj(i);let c;return c=typeof(e=Ye(e))=="string"||e instanceof rf?fz(a,"updateDoc",t._key,e,n,r):hz(a,"updateDoc",t._key,e),zy(i,[c.toMutation(t._key,sr.exists(!0))])}function bz(t){return zy(ns(t.firestore,Jc),[new dy(t._key,sr.none())])}function zy(t,e){return function(r,i){const a=new Qi;return r.asyncQueue.enqueueAndForget(async()=>H4(await nz(r),i,a)),a.promise}(XN(t),e)}function Nz(t,e,n){const r=n.docs.get(e._key),i=new xz(t);return new Ws(t,i,e._key,r,new Vl(n.hasPendingWrites,n.fromCache),e.converter)}function jz(){return new Cy("serverTimestamp")}(function(e,n=!0){(function(i){Do=i})(ca),Ys(new es("firestore",(r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),h=new Jc(new oA(r.getProvider("auth-internal")),new uA(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new me(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pc(m.options.projectId,y)}(c,i),c);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),wr(ux,dx,e),wr(ux,dx,"esm2017")})();var Tz="firebase",Ez="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(Tz,Ez,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="firebasestorage.googleapis.com",uj="storageBucket",kz=2*60*1e3,Pz=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends Rr{constructor(e,n,r=0){super(am(e),`Firebase Storage: ${n} (${am(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return am(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mt||(mt={}));function am(t){return"storage/"+t}function Ly(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(mt.UNKNOWN,t)}function Sz(t){return new pt(mt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Iz(t){return new pt(mt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Cz(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(mt.UNAUTHENTICATED,t)}function Az(){return new pt(mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Rz(t){return new pt(mt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function zz(){return new pt(mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lz(){return new pt(mt.CANCELED,"User canceled the upload/download.")}function Dz(t){return new pt(mt.INVALID_URL,"Invalid URL '"+t+"'.")}function Oz(t){return new pt(mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Mz(){return new pt(mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uj+"' property when initializing the app?")}function Vz(){return new pt(mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fz(){return new pt(mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Uz(t){return new pt(mt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ap(t){return new pt(mt.INVALID_ARGUMENT,t)}function dj(){return new pt(mt.APP_DELETED,"The Firebase app was deleted.")}function Bz(t){return new pt(mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nc(t,e){return new pt(mt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Sl(t){throw new pt(mt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Tn.makeFromUrl(e,n)}catch{return new Tn(e,"")}if(r.path==="")return r;throw Oz(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function m(H){H.path_=decodeURIComponent(H.path)}const y="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",R=new RegExp(`^https?://${x}/${y}/b/${i}/o${w}`,"i"),M={bucket:1,path:3},C=n===cj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",P=new RegExp(`^https?://${C}/${i}/${A}`,"i"),S=[{regex:h,indices:f,postModify:a},{regex:R,indices:M,postModify:m},{regex:P,indices:{bucket:1,path:2},postModify:m}];for(let H=0;H<S.length;H++){const F=S[H],B=F.regex.exec(e);if(B){const I=B[F.indices.bucket];let N=B[F.indices.path];N||(N=""),r=new Tn(I,N),F.postModify(r);break}}if(r==null)throw Dz(e);return r}}class Wz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(t,e,n){let r=1,i=null,a=null,c=!1,h=0;function f(){return h===2}let m=!1;function y(...A){m||(m=!0,e.apply(null,A))}function x(A){i=setTimeout(()=>{i=null,t(R,f())},A)}function w(){a&&clearTimeout(a)}function R(A,...P){if(m){w();return}if(A){w(),y.call(null,A,...P);return}if(f()||c){w(),y.call(null,A,...P);return}r<64&&(r*=2);let S;h===1?(h=2,S=0):S=(r+Math.random())*1e3,x(S)}let M=!1;function C(A){M||(M=!0,w(),!m&&(i!==null?(A||(h=2),clearTimeout(i),x(0)):A||(h=1)))}return x(0),a=setTimeout(()=>{c=!0,C(!0)},n),C}function $z(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(t){return t!==void 0}function qz(t){return typeof t=="object"&&!Array.isArray(t)}function Dy(t){return typeof t=="string"||t instanceof String}function s_(t){return Oy()&&t instanceof Blob}function Oy(){return typeof Blob<"u"}function a_(t,e,n,r){if(r<e)throw Ap(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ap(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function hj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Hs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Hs||(Hs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kz(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n,r,i,a,c,h,f,m,y,x,w=!0,R=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=x,this.retry=w,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,C)=>{this.resolve_=M,this.reject_=C,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new id(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{const f=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===Hs.NO_ERROR,f=a.getStatus();if(!h||Kz(f,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===Hs.ABORT;r(!1,new id(!1,null,y));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new id(m,a))})},n=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());Zz(f)?a(f):a()}catch(f){c(f)}else if(h!==null){const f=Ly();f.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,f)):c(f)}else if(i.canceled){const f=this.appDelete_?dj():Lz();c(f)}else{const f=zz();c(f)}};this.canceled_?n(!1,new id(!1,null,!0)):this.backoffId_=Hz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$z(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class id{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Qz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Jz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Yz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Xz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function eL(t,e,n,r,i,a,c=!0,h=!1){const f=hj(t.urlParams),m=t.url+f,y=Object.assign({},t.headers);return Yz(y,e),Qz(y,n),Jz(y,a),Xz(y,r),new Gz(m,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function nL(...t){const e=tL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Oy())return new Blob(t);throw new pt(mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){if(typeof atob>"u")throw Uz("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class om{constructor(e,n){this.data=e,this.contentType=n||null}}function sL(t,e){switch(t){case yr.RAW:return new om(fj(e));case yr.BASE64:case yr.BASE64URL:return new om(mj(t,e));case yr.DATA_URL:return new om(oL(e),lL(e))}throw Ly()}function fj(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,c=t.charCodeAt(++n);r=65536|(a&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function aL(t){let e;try{e=decodeURIComponent(t)}catch{throw nc(yr.DATA_URL,"Malformed data URL.")}return fj(e)}function mj(t,e){switch(t){case yr.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw nc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case yr.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw nc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=iL(e)}catch(i){throw i.message.includes("polyfill")?i:nc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class pj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nc(yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=cL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function oL(t){const e=new pj(t);return e.base64?mj(yr.BASE64,e.rest):aL(e.rest)}function lL(t){return new pj(t).contentType}function cL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){let r=0,i="";s_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(s_(this.data_)){const r=this.data_,i=rL(r,e,n);return i===null?null:new Ri(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ri(r,!0)}}static getBlob(...e){if(Oy()){const n=e.map(r=>r instanceof Ri?r.data_:r);return new Ri(nL.apply(null,n))}else{const n=e.map(c=>Dy(c)?sL(yr.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new Ri(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t){let e;try{e=JSON.parse(t)}catch{return null}return qz(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function dL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function yj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){return e}class rn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||hL}}let sd=null;function fL(t){return!Dy(t)||t.length<2?t:yj(t)}function vj(){if(sd)return sd;const t=[];t.push(new rn("bucket")),t.push(new rn("generation")),t.push(new rn("metageneration")),t.push(new rn("name","fullPath",!0));function e(a,c){return fL(c)}const n=new rn("name");n.xform=e,t.push(n);function r(a,c){return c!==void 0?Number(c):c}const i=new rn("size");return i.xform=r,t.push(i),t.push(new rn("timeCreated")),t.push(new rn("updated")),t.push(new rn("md5Hash",null,!0)),t.push(new rn("cacheControl",null,!0)),t.push(new rn("contentDisposition",null,!0)),t.push(new rn("contentEncoding",null,!0)),t.push(new rn("contentLanguage",null,!0)),t.push(new rn("contentType",null,!0)),t.push(new rn("metadata","customMetadata",!0)),sd=t,sd}function mL(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new Tn(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function pL(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const c=n[a];r[c.local]=c.xform(r,e[c.server])}return mL(r,t),r}function xj(t,e,n){const r=gj(e);return r===null?null:pL(t,r,n)}function gL(t,e,n,r){const i=gj(e);if(i===null||!Dy(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(m=>{const y=t.bucket,x=t.fullPath,w="/b/"+c(y)+"/o/"+c(x),R=lf(w,n,r),M=hj({alt:"media",token:m});return R+M})[0]}function yL(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class My{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){if(!t)throw Ly()}function vL(t,e){function n(r,i){const a=xj(t,i,e);return _j(a!==null),a}return n}function xL(t,e){function n(r,i){const a=xj(t,i,e);return _j(a!==null),gL(a,i,t.host,t._protocol)}return n}function wj(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Az():i=Cz():n.getStatus()===402?i=Iz(t.bucket):n.getStatus()===403?i=Rz(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function bj(t){const e=wj(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=Sz(t.path)),a.serverResponse=i.serverResponse,a}return n}function _L(t,e,n){const r=e.fullServerUrl(),i=lf(r,t.host,t._protocol),a="GET",c=t.maxOperationRetryTime,h=new My(i,a,xL(t,n),c);return h.errorHandler=bj(e),h}function wL(t,e){const n=e.fullServerUrl(),r=lf(n,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function c(f,m){}const h=new My(r,i,c,a);return h.successCodes=[200,204],h.errorHandler=bj(e),h}function bL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function NL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=bL(null,e)),r}function jL(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function h(){let S="";for(let H=0;H<2;H++)S=S+Math.random().toString().slice(2);return S}const f=h();c["Content-Type"]="multipart/related; boundary="+f;const m=NL(e,r,i),y=yL(m,n),x="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,w=`\r
--`+f+"--",R=Ri.getBlob(x,r,w);if(R===null)throw Vz();const M={name:m.fullPath},C=lf(a,t.host,t._protocol),A="POST",P=t.maxUploadRetryTime,j=new My(C,A,vL(t,n),P);return j.urlParams=M,j.headers=c,j.body=R.uploadData(),j.errorHandler=wj(e),j}class TL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw Sl("cannot .send() more than once");if(gs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class EL extends TL{initXhr(){this.xhr_.responseType="text"}}function Vy(){return new EL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this._service=e,n instanceof Tn?this._location=n:this._location=Tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ia(e,n)}get root(){const e=new Tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yj(this._location.path)}get storage(){return this._service}get parent(){const e=uL(this._location.path);if(e===null)return null;const n=new Tn(this._location.bucket,e);return new ia(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Bz(e)}}function kL(t,e,n){t._throwIfRoot("uploadBytes");const r=jL(t.storage,t._location,vj(),new Ri(e,!0),n);return t.storage.makeRequestWithTokens(r,Vy).then(i=>({metadata:i,ref:t}))}function PL(t){t._throwIfRoot("getDownloadURL");const e=_L(t.storage,t._location,vj());return t.storage.makeRequestWithTokens(e,Vy).then(n=>{if(n===null)throw Fz();return n})}function SL(t){t._throwIfRoot("deleteObject");const e=wL(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Vy)}function IL(t,e){const n=dL(t._location.path,e),r=new Tn(t._location.bucket,n);return new ia(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){return/^[A-Za-z]+:\/\//.test(t)}function AL(t,e){return new ia(t,e)}function Nj(t,e){if(t instanceof Fy){const n=t;if(n._bucket==null)throw Mz();const r=new ia(n,n._bucket);return e!=null?Nj(r,e):r}else return e!==void 0?IL(t,e):t}function RL(t,e){if(e&&CL(e)){if(t instanceof Fy)return AL(t,e);throw Ap("To use ref(service, url), the first argument must be a Storage instance.")}else return Nj(t,e)}function o_(t,e){const n=e==null?void 0:e[uj];return n==null?null:Tn.makeFromBucketSpec(n,t)}function zL(t,e,n,r={}){t.host=`${e}:${n}`;const i=gs(e);i&&(Ug(`https://${t.host}/b`),Bg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:Kb(a,t.app.options.projectId))}class Fy{constructor(e,n,r,i,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=cj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kz,this._maxUploadRetryTime=Pz,this._requests=new Set,i!=null?this._bucket=Tn.makeFromBucketSpec(i,this._host):this._bucket=o_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tn.makeFromBucketSpec(this._url,e):this._bucket=o_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ia(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new Wz(dj());{const c=eL(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const l_="@firebase/storage",c_="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="storage";function LL(t,e,n){return t=Ye(t),kL(t,e,n)}function DL(t){return t=Ye(t),PL(t)}function OL(t){return t=Ye(t),SL(t)}function Tj(t,e){return t=Ye(t),RL(t,e)}function ML(t=$g(),e){t=Ye(t);const r=Uh(t,jj).getImmediate({identifier:e}),i=$b("storage");return i&&VL(r,...i),r}function VL(t,e,n,r={}){zL(t,e,n,r)}function FL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Fy(n,r,i,e,ca)}function UL(){Ys(new es(jj,FL,"PUBLIC").setMultipleInstances(!0)),wr(l_,c_,""),wr(l_,c_,"esm2017")}UL();const BL={apiKey:"AIzaSyCBgcl8j_uJDVMpcNFEQvW-EqnshPiW2n8",authDomain:"tomyhomeapp-b7bf1.firebaseapp.com",projectId:"tomyhomeapp-b7bf1",storageBucket:"tomyhomeapp-b7bf1.firebasestorage.app",messagingSenderId:"1034110443870",appId:"1:1034110443870:web:1aa986bfe6fdf770e62fcf",measurementId:"G-Y5P06F4581"},Uy=Jb(BL),vr=rA(Uy),Yc=az(Uy),Ej=ML(Uy),WL=({service:t})=>o.jsxs(ye,{to:`/uslugodawcy/${t.slug}`,className:"card card-hover p-6 text-center group cursor-pointer",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-gradient-to-r from-primary/10 to-secondary/10 flex items-center justify-center transition-transform group-hover:scale-110",children:o.jsx("span",{className:"text-3xl",children:t.icon})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-secondary rounded-2xl opacity-0 group-hover:opacity-20 transition-opacity"})]}),o.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:t.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:["od ",t.price," z"]})]});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:h="",children:f,...m},y)=>V.createElement("svg",{ref:y,...HL,width:i,height:i,stroke:r,strokeWidth:c?Number(a)*24/Number(i):a,className:["lucide",`lucide-${$L(t)}`,h].join(" "),...m},[...e.map(([x,w])=>V.createElement(x,w)),...Array.isArray(f)?f:[f]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=ce("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=ce("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=ce("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=ce("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=ce("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=ce("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=ce("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=ce("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=ce("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=ce("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=ce("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=ce("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=ce("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=ce("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=ce("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=ce("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=ce("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=ce("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=ce("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=ce("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),c5=({review:t})=>{const[e,n]=V.useState(t.helpful),[r,i]=V.useState(!1),a=()=>{r||(n(c=>c+1),i(!0))};return o.jsxs("div",{className:"card card-hover p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-full ${t.gradientClass} flex items-center justify-center text-white font-bold text-lg`,children:t.avatar}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900",children:t.author}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t.service,"  ",t.date]})]})]}),o.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((c,h)=>o.jsx(Bn,{className:`w-4 h-4 ${h<t.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},h))}),o.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:t.content}),o.jsxs("button",{onClick:a,disabled:r,className:`flex items-center gap-2 text-sm transition-colors ${r?"text-accent cursor-default":"text-gray-500 hover:text-accent"}`,children:[o.jsx(r5,{className:"w-4 h-4"}),o.jsxs("span",{children:["Pomocne (",e,")"]})]})]})},u5=({target:t,label:e,suffix:n=""})=>{const[r,i]=V.useState(0),[a,c]=V.useState(!1),h=V.useRef(null);V.useEffect(()=>{const m=new IntersectionObserver(y=>{y[0].isIntersecting&&!a&&(c(!0),f())},{threshold:.5});return h.current&&m.observe(h.current),()=>m.disconnect()},[a,t]);const f=()=>{const x=t/60;let w=0;const R=setInterval(()=>{w+=x,w>=t?(i(t),clearInterval(R)):i(Math.floor(w))},2e3/60)};return o.jsxs("div",{ref:h,className:"text-center",children:[o.jsxs("div",{className:"text-4xl lg:text-5xl font-black text-white mb-2",children:[r.toLocaleString(),n]}),o.jsx("div",{className:"text-white/80",children:e})]})},d5=()=>{const t=[{target:1e4,label:"Zadowolonych klientw",suffix:"+"},{target:500,label:"Specjalistw",suffix:"+"},{target:50,label:"Miast w Polsce",suffix:""},{target:98,label:"Pozytywnych opinii",suffix:"%"}];return o.jsx("section",{className:"py-20 bg-gradient-to-r from-primary to-secondary",children:o.jsx("div",{className:"max-w-7xl mx-auto px-6",children:o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:t.map((e,n)=>o.jsx(u5,{target:e.target,label:e.label,suffix:e.suffix},n))})})})},h5=()=>{const{showToast:t}=Lr(),{isAuthenticated:e,user:n}=Zn(),r=hi(),i=V.useRef(null),a=[{id:"fryzjer",name:"Fryzjer",icon:"",price:80,slug:"fryzjer"},{id:"tatuaze",name:"Tatuae",icon:"",price:200,slug:"tatuaze"},{id:"paznokcie",name:"Paznokcie",icon:"",price:60,slug:"paznokcie"},{id:"masaz",name:"Masa",icon:"",price:120,slug:"masaz"},{id:"makijaz",name:"Makija",icon:"",price:100,slug:"makijaz"},{id:"twarz",name:"Twarz",icon:"",price:120,slug:"twarz"}],c=[{id:1,author:"Anna Kowalska",avatar:"A",service:"Fryzjer",date:"2 dni temu",rating:5,content:"wietna usuga! Fryzjer przyjecha punktualnie, by bardzo profesjonalny. Efekt przekroczy moje oczekiwania. Na pewno skorzystam ponownie!",helpful:23,gradientClass:"bg-gradient-to-r from-primary to-secondary"},{id:2,author:"Krzysztof Chjan",avatar:"K",service:"Masa",date:"Tydzie temu",rating:5,content:"Bardzo wygodne rozwizanie. Masaysta przywiz profesjonalny st, wszystko przebiego sprawnie. Polecam kademu!",helpful:18,gradientClass:"bg-gradient-to-r from-pink-500 to-rose-500"},{id:3,author:"Magdalena Winiewska",avatar:"M",service:"Manicure",date:"3 dni temu",rating:5,content:"Profesjonalny manicure w domu - wietny efekt, przystpna cena. Oszczdno czasu nieoceniona!",helpful:31,gradientClass:"bg-gradient-to-r from-purple-500 to-indigo-500"}],h=[{step:1,title:"Wybierz usug",description:"Przegldaj kategorie i wybierz specjalist wedug opinii i ceny",gradient:"from-red-400 to-orange-500"},{step:2,title:"Zarezerwuj termin",description:"Wybierz dogodny termin i potwierd rezerwacj online",gradient:"from-primary to-secondary"},{step:3,title:"Specjalista przyjeda",description:"Profesjonalista przyjedzie pod wskazany adres z caym sprztem",gradient:"from-pink-400 to-rose-500"}],f=()=>{var m;(m=i.current)==null||m.scrollIntoView({behavior:"smooth"})};return V.useEffect(()=>{const m=new IntersectionObserver(y=>{y.forEach(x=>{x.isIntersecting&&(x.target.classList.add("opacity-100","translate-y-0"),x.target.classList.remove("opacity-0","translate-y-10"))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return document.querySelectorAll(".fade-in-scroll").forEach(y=>{m.observe(y)}),()=>m.disconnect()},[]),o.jsxs("div",{children:[o.jsx("section",{className:"py-20 lg:py-32 animate-fade-in",children:o.jsx("div",{className:"max-w-7xl mx-auto px-6",children:o.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[o.jsxs("div",{className:"animate-slide-in-left",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 bg-accent/10 text-accent px-4 py-2 rounded-full text-sm font-semibold mb-6 animate-bounce-slow",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Nowy w Twojej okolicy"})]}),o.jsxs("h1",{className:"text-4xl lg:text-6xl font-black leading-tight mb-6",children:["Zamw usug i nie tylko",o.jsx("br",{}),o.jsx("span",{className:"gradient-text",children:"Usugi z dojazdem do domu"})]}),o.jsx("p",{className:"text-gray-600 text-lg mb-8 leading-relaxed",children:"Specjalici przyjad pod wskazany adres  fryzjer, manicure, tatuaysta, masa i wicej."}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("button",{onClick:()=>{e?f():r("/auth?mode=register&type=client")},className:"btn btn-cta animate-pulse-slow group",children:[o.jsx("span",{children:"Zarezerwuj usug"}),o.jsx("span",{className:"transition-transform group-hover:translate-x-1",children:""})]}),(!e||(n==null?void 0:n.accountType)==="provider")&&o.jsxs(ye,{to:e?"/biznes/dodaj-usluge":"/auth?mode=register&type=provider",className:"btn btn-ghost border-2 border-primary text-primary hover:bg-primary hover:text-white group",children:[o.jsx("span",{children:" Dodaj usug"}),o.jsx("span",{className:"transition-transform group-hover:translate-x-1",children:""})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-6 mt-8 text-sm text-gray-600",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-green-500",children:""})," Bez opat za dojazd"]}),o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-green-500",children:""})," Sprawdzeni specjalici"]}),o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-green-500",children:""})," Gwarancja satysfakcji"]})]})]}),o.jsx("div",{className:"animate-slide-in-right",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-3xl blur-3xl"}),o.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl overflow-hidden",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=600&h=400&fit=crop",alt:"Profesjonalna usuga fryzjerska",className:"w-full h-64 lg:h-80 object-cover"}),o.jsxs("div",{className:"p-6 flex gap-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"10K+"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Zadowolonych klientw"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"500+"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Specjalistw"})]})]})]})]})})]})})}),o.jsx("section",{id:"services",ref:i,className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"USUGI"}),o.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Popularne usugi"}),o.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Wybierz spord szerokiej gamy profesjonalnych usug"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:a.map(m=>o.jsx(WL,{service:m},m.id))})]})}),o.jsx("section",{id:"how",className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"JAK TO DZIAA"}),o.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Proste 3 kroki"}),o.jsx("p",{className:"text-gray-600",children:"Od rezerwacji do realizacji usugi"})]}),o.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:h.map((m,y)=>o.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",style:{animationDelay:`${y*100}ms`},children:[o.jsxs("div",{className:"text-sm font-bold text-gray-400 mb-4",children:["Krok ",m.step]}),o.jsx("div",{className:`w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-r ${m.gradient} flex items-center justify-center`,children:o.jsx("span",{className:"text-white text-2xl",children:""})}),o.jsx("h3",{className:"text-xl font-bold mb-3",children:m.title}),o.jsx("p",{className:"text-gray-600",children:m.description})]},m.step))})]})}),o.jsx("section",{id:"reviews",className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"OPINIE"}),o.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Co mwi nasi klienci"}),o.jsx("p",{className:"text-gray-600",children:"Ponad 10 000 zadowolonych uytkownikw"})]}),o.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:c.map(m=>o.jsx(c5,{review:m},m.id))})]})}),o.jsx(d5,{}),o.jsx("section",{className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:o.jsx("div",{className:"max-w-7xl mx-auto px-6",children:o.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-3xl p-12 lg:p-16 text-center text-white relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(255,255,255,0.1),transparent_70%)]"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("span",{className:"inline-block bg-white/20 px-4 py-2 rounded-full text-sm font-bold tracking-wider mb-6",children:" ZACZNIJ JU DZI"}),o.jsx("h2",{className:"text-3xl lg:text-5xl font-black mb-4",children:"Gotowy, by zamwi?"}),o.jsx("p",{className:"text-lg opacity-95 max-w-xl mx-auto mb-8",children:"Docz do tysicy zadowolonych klientw. Pierwsze zamwienie z rabatem 20%!"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[o.jsxs("button",{onClick:()=>{f(),t("Wybierz usug powyej, aby rozpocz rezerwacj","info")},className:"btn bg-white text-gray-900 font-bold shadow-lg hover:shadow-xl hover:-translate-y-1",children:[o.jsx("span",{children:"Zarezerwuj usug"}),o.jsx("span",{children:""})]}),o.jsx("button",{className:"btn border-2 border-white/30 text-white hover:bg-white/10",children:"Dowiedz si wicej"})]}),o.jsxs("div",{className:"flex flex-wrap gap-6 justify-center text-sm opacity-90",children:[o.jsx("span",{children:" Bez ukrytych kosztw"}),o.jsx("span",{children:" Anuluj bezpatnie"}),o.jsx("span",{children:" Patno po usudze"})]})]})]})})})]})},Fp=[{code:"+48",flag:"",name:"Polska",minDigits:9,maxDigits:9},{code:"+49",flag:"",name:"Niemcy",minDigits:10,maxDigits:11},{code:"+33",flag:"",name:"Francja",minDigits:9,maxDigits:9},{code:"+34",flag:"",name:"Hiszpania",minDigits:9,maxDigits:9},{code:"+39",flag:"",name:"Wochy",minDigits:9,maxDigits:10},{code:"+44",flag:"",name:"Wielka Brytania",minDigits:10,maxDigits:10},{code:"+31",flag:"",name:"Holandia",minDigits:9,maxDigits:9},{code:"+32",flag:"",name:"Belgia",minDigits:8,maxDigits:9},{code:"+420",flag:"",name:"Czechy",minDigits:9,maxDigits:9},{code:"+421",flag:"",name:"Sowacja",minDigits:9,maxDigits:9},{code:"+43",flag:"",name:"Austria",minDigits:10,maxDigits:13},{code:"+41",flag:"",name:"Szwajcaria",minDigits:9,maxDigits:9},{code:"+351",flag:"",name:"Portugalia",minDigits:9,maxDigits:9},{code:"+353",flag:"",name:"Irlandia",minDigits:9,maxDigits:9},{code:"+352",flag:"",name:"Luksemburg",minDigits:8,maxDigits:9},{code:"+45",flag:"",name:"Dania",minDigits:8,maxDigits:8},{code:"+46",flag:"",name:"Szwecja",minDigits:9,maxDigits:9},{code:"+47",flag:"",name:"Norwegia",minDigits:8,maxDigits:8},{code:"+358",flag:"",name:"Finlandia",minDigits:9,maxDigits:10},{code:"+354",flag:"",name:"Islandia",minDigits:7,maxDigits:7},{code:"+30",flag:"",name:"Grecja",minDigits:10,maxDigits:10},{code:"+356",flag:"",name:"Malta",minDigits:8,maxDigits:8},{code:"+357",flag:"",name:"Cypr",minDigits:8,maxDigits:8},{code:"+36",flag:"",name:"Wgry",minDigits:9,maxDigits:9},{code:"+40",flag:"",name:"Rumunia",minDigits:9,maxDigits:9},{code:"+359",flag:"",name:"Bugaria",minDigits:9,maxDigits:9},{code:"+385",flag:"",name:"Chorwacja",minDigits:9,maxDigits:9},{code:"+386",flag:"",name:"Sowenia",minDigits:8,maxDigits:8},{code:"+381",flag:"",name:"Serbia",minDigits:9,maxDigits:9},{code:"+382",flag:"",name:"Czarnogra",minDigits:8,maxDigits:8},{code:"+383",flag:"",name:"Kosowo",minDigits:8,maxDigits:8},{code:"+389",flag:"",name:"Macedonia Pn.",minDigits:8,maxDigits:8},{code:"+380",flag:"",name:"Ukraina",minDigits:9,maxDigits:9},{code:"+375",flag:"",name:"Biaoru",minDigits:9,maxDigits:9},{code:"+7",flag:"",name:"Rosja",minDigits:10,maxDigits:10}],Oj=t=>Fp.find(e=>e.code===t)||Fp[0],$y=(t,e)=>{const n=Oj(t),r=e.replace(/\D/g,"");return r?r.length<n.minDigits?{valid:!1,message:`Numer dla ${n.name} musi mie min. ${n.minDigits} cyfr`}:r.length>n.maxDigits?{valid:!1,message:`Numer dla ${n.name} moe mie max. ${n.maxDigits} cyfr`}:{valid:!0,message:""}:{valid:!1,message:"Numer telefonu jest wymagany"}},Zy=({value:t,countryCode:e,onChange:n,className:r="",error:i})=>{const[a,c]=V.useState(!1),[h,f]=V.useState(""),m=V.useRef(null),y=V.useRef(null),x=Oj(e);V.useEffect(()=>{const A=P=>{m.current&&!m.current.contains(P.target)&&(c(!1),f(""))};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const w=Fp.filter(A=>A.name.toLowerCase().includes(h.toLowerCase())||A.code.includes(h)),R=A=>{var P;n(t,A.code),c(!1),f(""),(P=y.current)==null||P.focus()},M=A=>{const P=A.target.value.replace(/[^\d\s]/g,"");n(P,e)},C=()=>`${x.minDigits===x.maxDigits?x.minDigits:`${x.minDigits}-${x.maxDigits}`} cyfr`;return o.jsxs("div",{className:`relative ${r}`,ref:m,children:[o.jsxs("div",{className:`flex rounded-xl border-2 ${i?"border-red-300":"border-gray-200"} focus-within:border-primary overflow-hidden`,children:[o.jsxs("button",{type:"button",onClick:()=>c(!a),className:"flex items-center gap-1 px-3 py-3 bg-gray-50 hover:bg-gray-100 border-r border-gray-200 transition-colors min-w-[100px]",children:[o.jsx("span",{className:"text-xl",children:x.flag}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:x.code}),o.jsx(zp,{className:`w-4 h-4 text-gray-500 transition-transform ${a?"rotate-180":""}`})]}),o.jsx("input",{ref:y,type:"tel",value:t,onChange:M,placeholder:C(),maxLength:x.maxDigits+3,className:"flex-1 px-4 py-3 focus:outline-none"})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.name,": ",x.minDigits===x.maxDigits?`${x.minDigits} cyfr`:`${x.minDigits}-${x.maxDigits} cyfr`]}),i&&o.jsx("p",{className:"text-xs text-red-500 mt-1",children:i}),a&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-primary/30 rounded-xl shadow-2xl max-h-80 overflow-hidden",children:[o.jsx("div",{className:"p-2 border-b border-gray-100",children:o.jsx("input",{type:"text",value:h,onChange:A=>f(A.target.value),placeholder:"Szukaj kraju...",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-primary",autoFocus:!0})}),o.jsx("div",{className:"overflow-y-auto max-h-60",children:w.map(A=>o.jsxs("button",{type:"button",onClick:()=>R(A),className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-primary/10 transition-colors text-left ${A.code===e?"bg-primary/5":""}`,children:[o.jsx("span",{className:"text-2xl",children:A.flag}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-gray-900",children:A.name}),o.jsx("div",{className:"text-xs text-gray-500",children:A.code})]}),A.code===e&&o.jsx(Pt,{className:"w-5 h-5 text-primary"})]},A.code))})]})]})},f5=()=>{const t=hi(),[e]=iP(),{isAuthenticated:n}=Zn(),{showToast:r}=Lr(),[i,a]=V.useState("select"),[c,h]=V.useState({email:"",password:""}),[f,m]=V.useState(!1),[y,x]=V.useState({email:"",username:"",phone:"",phoneCountryCode:"+48",password:"",confirmPassword:"",businessName:"",terms:!1,accountType:"client"}),[w,R]=V.useState(!1),[M,C]=V.useState(!1),[A,P]=V.useState("");V.useEffect(()=>{const F=e.get("mode"),B=e.get("type");F==="login"?a("login"):F==="register"&&(B==="provider"?(a("register-provider"),x(I=>({...I,accountType:"provider"}))):(a("register-client"),x(I=>({...I,accountType:"client"}))))},[e]),V.useEffect(()=>{if(n){const F=e.get("redirect");t(F||"/")}},[n,t,e]);const j=async F=>{F.preventDefault(),P(""),C(!0);try{await MI(vr,c.email,c.password),r("Logowanie pomylne! Witaj z powrotem!","success");const B=e.get("redirect");t(B||"/")}catch(B){console.error("Login error:",B);let I="Nieprawidowy email lub haso";switch(B.code){case"auth/user-not-found":I="Nie znaleziono uytkownika z tym adresem email";break;case"auth/wrong-password":I="Nieprawidowe haso";break;case"auth/invalid-credential":I="Nieprawidowy email lub haso";break;case"auth/too-many-requests":I="Zbyt wiele nieudanych prb. Sprbuj ponownie pniej";break;case"auth/user-disabled":I="To konto zostao zablokowane";break;case"auth/invalid-email":I="Nieprawidowy format adresu email";break}P(I),r("Bd logowania","error")}finally{C(!1)}},S=async F=>{if(F.preventDefault(),P(""),!y.terms){P("Musisz zaakceptowa regulamin!");return}const B=y.username.trim().split(/\s+/);if(B.length<2||B.some(N=>N.length<2)){P("Podaj pene imi i nazwisko (np. Jan Kowalski)");return}const I=$y(y.phoneCountryCode,y.phone);if(!I.valid){P(I.message);return}if(y.password.length<8){P("Haso musi mie co najmniej 8 znakw");return}if(!/[A-Z]/.test(y.password)){P("Haso musi zawiera co najmniej jedn wielk liter");return}if(!/[a-z]/.test(y.password)){P("Haso musi zawiera co najmniej jedn ma liter");return}if(!/[0-9]/.test(y.password)){P("Haso musi zawiera co najmniej jedn cyfr");return}if(y.password!==y.confirmPassword){P("Hasa nie s takie same");return}C(!0);try{const O=(await OI(vr,y.email,y.password)).user;await fp(O,{displayName:y.username});const k=y.phone.replace(/\D/g,""),E=`${y.phoneCountryCode} ${k}`;await _z(Qc(Yc,"users",O.uid),{uid:O.uid,username:y.username,email:y.email,phone:E,accountType:y.accountType,businessName:y.businessName||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...y.accountType==="provider"&&{isVerified:!1,rating:0,reviewsCount:0,servicesCount:0}}),r("Konto utworzone pomylnie! Witamy w ToMyHomeApp!","success"),y.accountType==="provider"?t("/biznes/dodaj-usluge"):t("/")}catch(N){console.error("Registration error:",N);let O="Bd podczas rejestracji";switch(N.code){case"auth/email-already-in-use":O="Ten adres email jest ju zajty";break;case"auth/invalid-email":O="Nieprawidowy format adresu email";break;case"auth/weak-password":O="Haso jest zbyt sabe";break;case"auth/operation-not-allowed":O="Rejestracja jest tymczasowo niedostpna";break}P(O),r("Bd rejestracji","error")}finally{C(!1)}};if(i==="select")return o.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:o.jsxs("div",{className:"max-w-lg w-full",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[o.jsx("div",{className:"text-5xl",children:""}),o.jsx("div",{className:"text-5xl",children:""})]}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Witaj w ToMyHomeApp"}),o.jsx("p",{className:"text-gray-600",children:"Znajd specjalistw beauty lub oferuj swoje usugi"})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsx("button",{onClick:()=>a("login"),className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all mb-6",children:"ZALOGUJ SI"}),o.jsxs("div",{className:"relative my-6",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-200"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Nie masz konta? Zarejestruj si jako"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:()=>{a("register-client"),x(F=>({...F,accountType:"client"}))},className:"w-full py-4 border-2 border-primary text-primary rounded-xl font-bold text-lg hover:bg-primary hover:text-white transition-all flex items-center justify-center gap-3",children:[o.jsx(us,{className:"w-6 h-6"}),"DLA KLIENTA"]}),o.jsx("p",{className:"text-center text-sm text-gray-500",children:"Szukasz fryzjera, kosmetyczki lub masaysty?"}),o.jsxs("button",{onClick:()=>{a("register-provider"),x(F=>({...F,accountType:"provider"}))},className:"w-full py-4 border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold text-lg hover:bg-emerald-500 hover:text-white transition-all flex items-center justify-center gap-3",children:[o.jsx(Rp,{className:"w-6 h-6"}),"DLA USUGODAWCY"]}),o.jsx("p",{className:"text-center text-sm text-gray-500",children:"Oferujesz usugi beauty i chcesz zdobywa klientw?"})]})]})]})});if(i==="login")return o.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsxs("button",{onClick:()=>a("select"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[o.jsx(vh,{className:"w-5 h-5"}),"Wr"]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zaloguj si"}),o.jsx("p",{className:"text-gray-600",children:"Wpisz swoje dane logowania"})]}),A&&o.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm flex items-start gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:A})]}),o.jsxs("form",{onSubmit:j,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:c.email,onChange:F=>h({...c,email:F.target.value}),placeholder:"twoj@email.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haso"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:f?"text":"password",value:c.password,onChange:F=>h({...c,password:F.target.value}),placeholder:"",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),o.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?o.jsx($s,{className:"w-5 h-5"}):o.jsx(ar,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(ye,{to:"/reset-hasla",className:"text-sm text-primary hover:underline",children:"Zapomniae hasa?"})}),o.jsx("button",{type:"submit",disabled:M,className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:M?o.jsxs(o.Fragment,{children:[o.jsx(Sr,{className:"w-5 h-5 animate-spin mr-2"}),"Logowanie..."]}):"ZALOGUJ SI"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-600",children:["Nie masz konta?"," ",o.jsx("button",{onClick:()=>a("select"),className:"text-primary font-semibold hover:underline",children:"Zarejestruj si"})]})})]})]})});const H=i==="register-provider";return o.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsxs("button",{onClick:()=>a("select"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[o.jsx(vh,{className:"w-5 h-5"}),"Wr"]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${H?"bg-emerald-100":"bg-primary/10"}`,children:H?o.jsx(Rp,{className:"w-8 h-8 text-emerald-600"}):o.jsx(us,{className:"w-8 h-8 text-primary"})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:H?"Rejestracja usugodawcy":"Rejestracja klienta"}),o.jsx("p",{className:"text-gray-600",children:H?"Docz i zacznij zdobywa klientw":"Za konto i rezerwuj usugi"})]}),o.jsxs("div",{className:`mb-6 p-4 rounded-xl ${H?"bg-emerald-50":"bg-primary/5"}`,children:[o.jsx("p",{className:"font-semibold mb-2 text-sm",children:H?" Korzyci dla usugodawcy:":" Korzyci dla klienta:"}),o.jsx("ul",{className:"text-sm space-y-1",children:H?o.jsxs(o.Fragment,{children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-emerald-500"})," Wasny profil i portfolio"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-emerald-500"})," Zarzdzanie rezerwacjami online"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-emerald-500"})," Dostp do nowych klientw"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-primary"})," atwe rezerwacje online"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-primary"})," Historia wizyt i ulubieni"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-primary"})," Powiadomienia i przypomnienia"]})]})})]}),A&&o.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm flex items-start gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:A})]}),o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[H&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa firmy / salonu"}),o.jsx("input",{type:"text",value:y.businessName,onChange:F=>x({...y,businessName:F.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),o.jsx("input",{type:"text",value:y.username,onChange:F=>x({...y,username:F.target.value}),placeholder:"Jan Kowalski",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:y.email,onChange:F=>x({...y,email:F.target.value}),placeholder:"twoj@email.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numer telefonu"}),o.jsx(Zy,{value:y.phone,countryCode:y.phoneCountryCode,onChange:(F,B)=>x({...y,phone:F,phoneCountryCode:B})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haso"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:w?"text":"password",value:y.password,onChange:F=>x({...y,password:F.target.value}),placeholder:"Wprowad haso",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),o.jsx("button",{type:"button",onClick:()=>R(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:w?o.jsx($s,{className:"w-5 h-5"}):o.jsx(ar,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[o.jsxs("p",{className:y.password.length>=8?"text-green-600":"",children:[y.password.length>=8?"":""," Minimum 8 znakw"]}),o.jsxs("p",{className:/[A-Z]/.test(y.password)?"text-green-600":"",children:[/[A-Z]/.test(y.password)?"":""," Co najmniej jedna wielka litera (A-Z)"]}),o.jsxs("p",{className:/[a-z]/.test(y.password)?"text-green-600":"",children:[/[a-z]/.test(y.password)?"":""," Co najmniej jedna maa litera (a-z)"]}),o.jsxs("p",{className:/[0-9]/.test(y.password)?"text-green-600":"",children:[/[0-9]/.test(y.password)?"":""," Co najmniej jedna cyfra (0-9)"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Powtrz haso"}),o.jsx("input",{type:"password",value:y.confirmPassword,onChange:F=>x({...y,confirmPassword:F.target.value}),placeholder:"Powtrz haso",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),y.confirmPassword&&o.jsx("p",{className:`text-xs mt-1 ${y.password===y.confirmPassword?"text-green-600":"text-red-500"}`,children:y.password===y.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("input",{type:"checkbox",id:"terms",checked:y.terms,onChange:F=>x({...y,terms:F.target.checked}),className:"mt-1 w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary"}),o.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600",children:["Akceptuj"," ",o.jsx(ye,{to:"/regulamin",className:"text-primary hover:underline",children:"Regulamin"})," ","oraz"," ",o.jsx(ye,{to:"/prywatnosc",className:"text-primary hover:underline",children:"Polityk Prywatnoci"})]})]}),o.jsx("button",{type:"submit",disabled:M,className:`w-full py-4 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${H?"bg-gradient-to-r from-emerald-500 to-teal-600":"bg-gradient-to-r from-primary to-secondary"}`,children:M?o.jsxs(o.Fragment,{children:[o.jsx(Sr,{className:"w-5 h-5 animate-spin mr-2"}),"Rejestracja..."]}):"ZAREJESTRUJ SI"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-600",children:["Masz ju konto?"," ",o.jsx("button",{onClick:()=>a("login"),className:"text-primary font-semibold hover:underline",children:"Zaloguj si"})]})})]})]})})},m5=async t=>{try{const e=Qc(Yc,"users",t),n=await lj(e);return n.exists()?{uid:n.id,...n.data()}:null}catch(e){throw console.error("Error getting user profile:",e),e}},Mj=async(t,e)=>{try{const n=Qc(Yc,"users",t);await wz(n,{...e,updatedAt:jz()}),e.username&&vr.currentUser&&await fp(vr.currentUser,{displayName:e.username}),e.avatar&&vr.currentUser&&await fp(vr.currentUser,{photoURL:e.avatar})}catch(n){throw console.error("Error updating user profile:",n),n}},p5=async(t,e)=>{try{if(!e.type.startsWith("image/"))throw new Error("Plik musi by obrazem");if(e.size>5*1024*1024)throw new Error("Plik jest za duy (max 5MB)");const n=e.name.split(".").pop(),r=`avatars/${t}_${Date.now()}.${n}`,i=Tj(Ej,r),a=await LL(i,e),c=await DL(a.ref);return await Mj(t,{avatar:c}),c}catch(n){throw console.error("Error uploading avatar:",n),n}},g5=async(t,e)=>{try{const n=vr.currentUser;if(!n||!n.email)throw new Error("Brak zalogowanego uytkownika");if(e.length<8)throw new Error("Haso musi mie co najmniej 8 znakw");if(!/[A-Z]/.test(e))throw new Error("Haso musi zawiera wielk liter");if(!/[a-z]/.test(e))throw new Error("Haso musi zawiera ma liter");if(!/[0-9]/.test(e))throw new Error("Haso musi zawiera cyfr");const r=vs.credential(n.email,t);await j1(n,r),await FI(n,e)}catch(n){throw console.error("Error changing password:",n),n.code==="auth/wrong-password"?new Error("Nieprawidowe obecne haso"):n.code==="auth/weak-password"?new Error("Nowe haso jest za sabe"):n.code==="auth/requires-recent-login"?new Error("Zaloguj si ponownie i sprbuj jeszcze raz"):n}},y5=async t=>{try{const e=vr.currentUser;if(!e||!e.email)throw new Error("Brak zalogowanego uytkownika");const n=vs.credential(e.email,t);await j1(e,n);try{const r=await m5(e.uid);if(r!=null&&r.avatar&&r.avatar.includes("firebase")){const i=Tj(Ej,r.avatar);await OL(i)}}catch{console.log("Avatar deletion skipped")}await bz(Qc(Yc,"users",e.uid)),await ZI(e)}catch(e){throw console.error("Error deleting account:",e),e.code==="auth/wrong-password"?new Error("Nieprawidowe haso"):e.code==="auth/requires-recent-login"?new Error("Zaloguj si ponownie i sprbuj jeszcze raz"):e}},v5=()=>{var j;const t=hi(),{user:e,userData:n,isAuthenticated:r,logout:i}=Zn(),{showToast:a}=Lr(),[c,h]=V.useState("dashboard"),[f,m]=V.useState(new Date);V.useEffect(()=>{r||t("/auth")},[r,t]);const y=[{id:"dashboard",label:"Panel Gwny",icon:qL},{id:"referral",label:"Pole znajomym",icon:ZL},{id:"favorites",label:"Ulubione",icon:Dp},{id:"wallet",label:"Portfel",icon:l5},{id:"visits",label:"Moje wizyty",icon:Pr},{id:"settings",label:"Ustawienia",icon:df},{id:"help",label:"Pomoc",icon:Rj}],x=async()=>{if(window.confirm("Czy na pewno chcesz si wylogowa?"))try{await i(),a("Wylogowano pomylnie","success"),t("/")}catch{a("Bd wylogowania","error")}},w=S=>new Date(S.getFullYear(),S.getMonth()+1,0).getDate(),R=S=>{const H=new Date(S.getFullYear(),S.getMonth(),1).getDay();return H===0?6:H-1},M=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],C=()=>{const S=w(f),H=R(f),F=new Date,B=["Pn","Wt","r","Cz","Pt","Sb","Nd"];return o.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-100",children:[o.jsx("button",{onClick:()=>m(new Date(f.getFullYear(),f.getMonth()-1)),className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:o.jsx(Xc,{className:"w-4 h-4"})}),o.jsxs("div",{className:"font-bold text-lg",children:[M[f.getMonth()]," ",f.getFullYear()]}),o.jsx("button",{onClick:()=>m(new Date(f.getFullYear(),f.getMonth()+1)),className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:o.jsx(By,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"grid grid-cols-7 gap-2 text-center",children:[B.map(I=>o.jsx("div",{className:"font-semibold text-gray-500 text-sm py-2",children:I},I)),[...Array(H)].map((I,N)=>o.jsx("div",{},`empty-${N}`)),[...Array(S)].map((I,N)=>{const O=N+1,k=O===F.getDate()&&f.getMonth()===F.getMonth()&&f.getFullYear()===F.getFullYear();return o.jsx("div",{className:`py-3 rounded-lg cursor-pointer transition-all hover:scale-110 ${k?"bg-primary text-white font-bold":"bg-gray-50 hover:bg-gray-100"}`,children:O},O)})]})]})},A=()=>{switch(c){case"dashboard":return o.jsxs("div",{children:[o.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 mb-8",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Witaj z powrotem, ",(e==null?void 0:e.username)||(n==null?void 0:n.username),"!"]}),o.jsx("p",{className:"opacity-90",children:"Mio Ci widzie. Oto Twj panel uytkownika gdzie moesz zarzdza swoim kontem i rezerwacjami."})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"card p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0"}),o.jsx("div",{className:"text-gray-500",children:"Nadchodzcych wizyt"})]}),o.jsxs("div",{className:"card p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0"}),o.jsx("div",{className:"text-gray-500",children:"Ulubionych miejsc"})]}),o.jsxs("div",{className:"card p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0 z"}),o.jsx("div",{className:"text-gray-500",children:"W portfelu"})]})]})]});case"referral":return o.jsxs("div",{children:[o.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Zapraszaj i zarabiaj!"}),o.jsxs("p",{className:"text-lg opacity-95",children:["Kady polecony znajomy to ",o.jsx("strong",{children:"50 z"})," na Twoje konto!"]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-8",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Twj unikalny link:"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("input",{type:"text",readOnly:!0,value:`https://tomyhomeapp.pl/ref/${(e==null?void 0:e.id)||"user"}`,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl bg-white"}),o.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`https://tomyhomeapp.pl/ref/${(e==null?void 0:e.id)||"user"}`),a("Link skopiowany!","success")},className:"btn btn-primary",children:"Kopiuj"})]})]})]});case"favorites":return o.jsxs("div",{className:"text-center py-16",children:[o.jsx(Dp,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nie masz jeszcze ulubionych miejsc."})]});case"wallet":return o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-400 text-white rounded-2xl p-8",children:[o.jsx("h2",{className:"text-xl mb-2",children:"Dostpne rodki"}),o.jsx("div",{className:"text-5xl font-bold mb-6",children:"0.00 z"}),o.jsx("button",{onClick:()=>a("Funkcja w budowie","info"),className:"btn bg-white text-emerald-600 font-bold",children:"Doaduj"})]});case"visits":return o.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Kalendarz wizyt"}),C()]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Nadchodzce wizyty"}),o.jsx("p",{className:"text-gray-500",children:"Brak nadchodzcych wizyt."})]})]});case"settings":return o.jsx(P,{});case"help":return o.jsxs("div",{className:"card p-8",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Centrum Pomocy"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Masz pytania? Skontaktuj si z nami!"}),o.jsx("p",{className:"text-primary font-semibold",children:"pomoc@tomyhomeapp.pl"})]});default:return null}},P=()=>{const S=V.useRef(null),F=(Pe=>{if(!Pe)return{countryCode:"+48",number:""};const rt=Pe.match(/^(\+\d{1,3})\s?(.*)$/);return rt?{countryCode:rt[1],number:rt[2]}:{countryCode:"+48",number:Pe}})((n==null?void 0:n.phone)||(e==null?void 0:e.phone)),[B,I]=V.useState({username:(n==null?void 0:n.username)||(e==null?void 0:e.username)||"",phone:F.number,phoneCountryCode:F.countryCode,businessName:(n==null?void 0:n.businessName)||""}),[N,O]=V.useState((n==null?void 0:n.avatar)||(e==null?void 0:e.avatar)||""),[k,E]=V.useState(!1),[z,D]=V.useState(!1),[ne,ue]=V.useState(!1),[ie,se]=V.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[G,de]=V.useState(!1),[W,te]=V.useState(!1),[he,Ne]=V.useState(!1),Ie=async Pe=>{var Q;const rt=(Q=Pe.target.files)==null?void 0:Q[0];if(!(!rt||!(e!=null&&e.id))){D(!0);try{const pe=await p5(e.id,rt);O(pe),a("Zdjcie zostao zmienione!","success")}catch(pe){a(pe.message||"Bd przesyania zdjcia","error")}finally{D(!1)}}},Te=async Pe=>{Pe.preventDefault();const rt=B.username.trim().split(/\s+/);if(rt.length<2||rt.some(pe=>pe.length<2)){a("Podaj pene imi i nazwisko (np. Jan Kowalski)","error");return}const Q=$y(B.phoneCountryCode,B.phone);if(!Q.valid){a(Q.message,"error");return}if(e!=null&&e.id){E(!0);try{const pe=`${B.phoneCountryCode} ${B.phone.replace(/\D/g,"")}`,Ue={username:B.username,phone:pe};B.businessName&&B.businessName.trim()&&(Ue.businessName=B.businessName.trim()),await Mj(e.id,Ue),a("Zmiany zostay zapisane!","success")}catch(pe){a(pe.message||"Bd zapisywania zmian","error")}finally{E(!1)}}},be=async Pe=>{if(Pe.preventDefault(),ie.newPassword!==ie.confirmPassword){a("Hasa nie s zgodne","error");return}if(ie.newPassword.length<8){a("Haso musi mie co najmniej 8 znakw","error");return}Ne(!0);try{await g5(ie.currentPassword,ie.newPassword),a("Haso zostao zmienione!","success"),ue(!1),se({currentPassword:"",newPassword:"",confirmPassword:""})}catch(rt){a(rt.message||"Bd zmiany hasa","error")}finally{Ne(!1)}},nt=async()=>{const Pe=window.prompt("Aby usun konto, wpisz swoje haso:");if(Pe!==null){if(!Pe||Pe.length<8){a("Nieprawidowe haso","error");return}if(window.confirm("UWAGA: Czy na pewno chcesz usun swoje konto? Ta operacja jest nieodwracalna!"))try{await y5(Pe),a("Konto zostao usunite","info"),t("/")}catch(rt){a(rt.message||"Bd usuwania konta","error")}}};return o.jsxs("div",{className:"max-w-2xl space-y-6",children:[o.jsxs("div",{className:"card p-8",children:[o.jsx("h3",{className:"font-bold text-lg mb-6",children:"Zdjcie profilowe"}),o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-3xl",children:z?o.jsx(Sr,{className:"w-8 h-8 animate-spin"}):N?o.jsx("img",{src:N,alt:"Avatar",className:"w-full h-full object-cover"}):""}),o.jsx("button",{onClick:()=>{var Pe;return(Pe=S.current)==null?void 0:Pe.click()},disabled:z,className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-100 transition-colors disabled:opacity-50",children:o.jsx(Cj,{className:"w-4 h-4 text-gray-600"})}),o.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:Ie,className:"hidden"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:"Kliknij ikon aparatu aby zmieni zdjcie."}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Max 5MB, formaty: JPG, PNG, GIF"})]})]})]}),o.jsxs("div",{className:"card p-8",children:[o.jsx("h3",{className:"font-bold text-lg mb-6",children:"Dane osobowe"}),o.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Imi i Nazwisko"}),o.jsx("input",{type:"text",value:B.username,onChange:Pe=>I({...B,username:Pe.target.value}),placeholder:"Jan Kowalski",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:(n==null?void 0:n.email)||(e==null?void 0:e.email)||"",readOnly:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-500"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email nie moe by zmieniony"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Telefon"}),o.jsx(Zy,{value:B.phone,countryCode:B.phoneCountryCode,onChange:(Pe,rt)=>{I({...B,phone:Pe,phoneCountryCode:rt})}})]}),((n==null?void 0:n.accountType)==="provider"||(e==null?void 0:e.accountType)==="provider")&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Nazwa firmy / salonu"}),o.jsx("input",{type:"text",value:B.businessName,onChange:Pe=>I({...B,businessName:Pe.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none"})]}),o.jsx("button",{type:"submit",disabled:k,className:"btn btn-primary mt-4 flex items-center gap-2",children:k?o.jsxs(o.Fragment,{children:[o.jsx(Sr,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):o.jsxs(o.Fragment,{children:[o.jsx(rc,{className:"w-5 h-5"}),"Zapisz zmiany"]})})]})]}),o.jsxs("div",{className:"card p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"font-bold text-lg",children:"Zmiana hasa"}),o.jsx("button",{onClick:()=>ue(!ne),className:"text-primary hover:underline text-sm font-medium",children:ne?"Anuluj":"Zmie haso"})]}),ne?o.jsxs("form",{onSubmit:be,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Obecne haso"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:G?"text":"password",value:ie.currentPassword,onChange:Pe=>se({...ie,currentPassword:Pe.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),o.jsx("button",{type:"button",onClick:()=>de(!G),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:G?o.jsx($s,{className:"w-5 h-5"}):o.jsx(ar,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Nowe haso"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:W?"text":"password",value:ie.newPassword,onChange:Pe=>se({...ie,newPassword:Pe.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),o.jsx("button",{type:"button",onClick:()=>te(!W),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:W?o.jsx($s,{className:"w-5 h-5"}):o.jsx(ar,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[o.jsxs("p",{className:ie.newPassword.length>=8?"text-green-600":"",children:[ie.newPassword.length>=8?"":""," Minimum 8 znakw"]}),o.jsxs("p",{className:/[A-Z]/.test(ie.newPassword)?"text-green-600":"",children:[/[A-Z]/.test(ie.newPassword)?"":""," Wielka litera"]}),o.jsxs("p",{className:/[a-z]/.test(ie.newPassword)?"text-green-600":"",children:[/[a-z]/.test(ie.newPassword)?"":""," Maa litera"]}),o.jsxs("p",{className:/[0-9]/.test(ie.newPassword)?"text-green-600":"",children:[/[0-9]/.test(ie.newPassword)?"":""," Cyfra"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Potwierd nowe haso"}),o.jsx("input",{type:"password",value:ie.confirmPassword,onChange:Pe=>se({...ie,confirmPassword:Pe.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),ie.confirmPassword&&o.jsx("p",{className:`text-xs mt-1 ${ie.newPassword===ie.confirmPassword?"text-green-600":"text-red-500"}`,children:ie.newPassword===ie.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]}),o.jsx("button",{type:"submit",disabled:he,className:"btn btn-primary flex items-center gap-2",children:he?o.jsxs(o.Fragment,{children:[o.jsx(Sr,{className:"w-5 h-5 animate-spin"}),"Zmieniam..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Ka,{className:"w-5 h-5"}),"Zmie haso"]})})]}):o.jsx("p",{className:"text-gray-500 text-sm",children:"Zalecamy regularn zmian hasa dla bezpieczestwa konta."})]}),o.jsxs("div",{className:"card p-8 border-2 border-red-200 bg-red-50",children:[o.jsx("h3",{className:"font-bold text-lg text-red-600 mb-4",children:"Strefa zagroenia"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Po usuniciu konta wszystkie Twoje dane, rezerwacje i historia zostan trwale usunite. Ta operacja jest nieodwracalna."}),o.jsx("button",{onClick:nt,className:"px-4 py-2 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-colors",children:"Usu moje konto"})]})]})};return r?o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[o.jsx("div",{className:"lg:hidden mb-6 overflow-x-auto",children:o.jsxs("div",{className:"flex gap-2 pb-2 min-w-max",children:[y.map(S=>o.jsxs("button",{onClick:()=>h(S.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all ${c===S.id?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[o.jsx(S.icon,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:S.label})]},S.id)),o.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap bg-red-50 text-red-600 hover:bg-red-100 transition-all",children:[o.jsx(_h,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Wyloguj"})]})]})}),o.jsxs("div",{className:"flex gap-8",children:[o.jsx("aside",{className:"w-72 shrink-0 hidden lg:block",children:o.jsxs("div",{className:"card p-6 sticky top-24",children:[o.jsxs("div",{className:"text-center mb-6 pb-6 border-b border-gray-100",children:[o.jsx("div",{className:"relative inline-block",children:o.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-3xl",children:n!=null&&n.avatar||e!=null&&e.avatar?o.jsx("img",{src:(n==null?void 0:n.avatar)||(e==null?void 0:e.avatar),alt:"Avatar",className:"w-full h-full object-cover"}):""})}),o.jsx("div",{className:"font-bold text-lg mt-3",children:(n==null?void 0:n.username)||(e==null?void 0:e.username)}),o.jsx("div",{className:"text-gray-500 text-sm",children:(n==null?void 0:n.phone)||(e==null?void 0:e.phone)}),((n==null?void 0:n.accountType)==="provider"||(e==null?void 0:e.accountType)==="provider")&&o.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full",children:"Usugodawca"})]}),o.jsxs("nav",{className:"space-y-1",children:[y.map(S=>o.jsxs("button",{onClick:()=>h(S.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${c===S.id?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,children:[o.jsx(S.icon,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:S.label})]},S.id)),o.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 transition-all",children:[o.jsx(_h,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Wyloguj"})]})]})]})}),o.jsxs("main",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold",children:((j=y.find(S=>S.id===c))==null?void 0:j.label)||"Panel Gwny"}),o.jsxs("p",{className:"text-gray-500",children:[c==="dashboard"&&"Przegld Twojej aktywnoci",c==="referral"&&"Zapraszaj znajomych i zarabiaj",c==="favorites"&&"Twoje ulubione miejsca i usugi",c==="wallet"&&"Zarzdzaj swoimi rodkami",c==="visits"&&"Kalendarz i historia rezerwacji",c==="settings"&&"Personalizuj swoje konto",c==="help"&&"FAQ i Kontakt"]})]}),A()]})]})]}):null},x5="",f_={fryzjer:["fryzjer","fryzjerstwo","hair"],pedicure:["pedicure","pedikre"],paznokcie:["paznokcie","manicure","nails","stylizacja paznokci"],masaz:["masa","masaz","massage"],makijaz:["makija","makijaz","makeup","wiza"],"pielegnacja-twarzy":["pielgnacja twarzy","kosmetyka","facial"],depilacja:["depilacja","wax","waxing"],barber:["barber","fryzjer mski","barbershop"],tatuaz:["tatua","tatuaz","tattoo"]},m_=()=>{const{category:t}=Lb(),{showToast:e}=Lr(),[n,r]=V.useState([]),[i,a]=V.useState(!0),[c,h]=V.useState(!1),[f,m]=V.useState(!0),[y,x]=V.useState(0),[w,R]=V.useState([]),[M,C]=V.useState(""),[A,P]=V.useState(null),[j,S]=V.useState("rating"),H=async(E=!1)=>{E?h(!0):a(!0);try{const z=new URLSearchParams;t&&z.append("category",t),M&&z.append("location",M),A&&z.append("minRating",A.toString());const D=await fetch(`${x5}/api/providers?${z.toString()}`);let ne=[];D.ok&&(ne=await D.json());const ue=JSON.parse(localStorage.getItem("localProviders")||"[]");let ie=[...ne,...ue.map(se=>({id:se.id,name:se.name,profession:se.profession||"",rating:se.rating||0,reviewsCount:se.reviewsCount||0,location:se.location||"",distance:se.distance||"0 km",description:se.description||"",services:se.services||[],features:se.features||[],priceFrom:se.priceFrom||0,image:se.image||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",isPremium:se.isPremium||!1,isAvailableToday:se.isAvailableToday!==!1,category:se.category||""}))];if(t){const se=f_[t]||[t];ie=ie.filter(G=>{if(!G.category)return!1;const de=G.category.toLowerCase();return se.some(W=>de.includes(W.toLowerCase()))})}j==="rating"?ie.sort((se,G)=>G.rating-se.rating):j==="price-asc"?ie.sort((se,G)=>se.priceFrom-G.priceFrom):j==="price-desc"&&ie.sort((se,G)=>G.priceFrom-se.priceFrom),w.includes("available-today")&&(ie=ie.filter(se=>se.isAvailableToday)),r(ie),x(ie.length),m(!1)}catch(z){console.error("Bd API, uywam danych lokalnych:",z);let ne=JSON.parse(localStorage.getItem("localProviders")||"[]").map(ue=>({id:ue.id,name:ue.name,profession:ue.profession||"",rating:ue.rating||0,reviewsCount:ue.reviewsCount||0,location:ue.location||"",distance:ue.distance||"0 km",description:ue.description||"",services:ue.services||[],features:ue.features||[],priceFrom:ue.priceFrom||0,image:ue.image||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",isPremium:ue.isPremium||!1,isAvailableToday:ue.isAvailableToday!==!1,category:ue.category||""}));if(t){const ue=f_[t]||[t];ne=ne.filter(ie=>{if(!ie.category)return!1;const se=ie.category.toLowerCase();return ue.some(G=>se.includes(G.toLowerCase()))})}w.includes("available-today")&&(ne=ne.filter(ue=>ue.isAvailableToday)),r(ne),x(ne.length),m(!1)}finally{a(!1),h(!1)}};V.useEffect(()=>{H()},[t,M,A,j,w]);const F={locations:["Wszystkie dzielnice","Centrum","Mokotw","Wola","Praga","Ursynw"],specializations:["Wszystkie","Fryzjer damski","Fryzjer mski","Fryzjer dziecicy","Koloryzacja","Fryzury lubne"],ratings:[{label:"Wszystkie oceny",value:null},{label:" 5.0",value:5},{label:" 4.5+",value:4.5},{label:" 4.0+",value:4},{label:" 3.5+",value:3.5}]},B=[{id:"available-today",label:"Dostpny dzi"},{id:"with-travel",label:"Z dojazdem"},{id:"recommended",label:"Polecany"},{id:"discount",label:"Nowi uytkownicy -20%"},{id:"weekend",label:"Weekend"}],I=E=>{R(z=>z.includes(E)?z.filter(D=>D!==E):[...z,E])},N=()=>{R([]),C(""),P(null),e("Filtry wyczyszczone","info")},O=t?t.charAt(0).toUpperCase()+t.slice(1):"Wszystkie usugi",k=()=>{!c&&f&&H(!0)};return o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[o.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-6",children:[o.jsx(ye,{to:"/",className:"hover:text-primary transition-colors",children:"Strona gwna"}),o.jsx("span",{children:"/"}),o.jsx(ye,{to:"/uslugodawcy",className:"hover:text-primary transition-colors",children:"Usugi"}),t&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"/"}),o.jsx("span",{className:"text-gray-900",children:O})]})]}),o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:O.toUpperCase()}),o.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Wybierz swojego specjalist"}),o.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Znajd idealnego specjalist w Twojej okolicy. Sprawd opinie, ceny i dostpne terminy."})]}),o.jsxs("section",{className:"card p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[o.jsx(Wy,{className:"w-5 h-5"}),"Filtry wyszukiwania"]}),o.jsx("button",{onClick:N,className:"text-sm text-primary hover:underline",children:"Wyczy filtry"})]}),o.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Lokalizacja"}),o.jsx("select",{value:M,onChange:E=>C(E.target.value==="Wszystkie dzielnice"?"":E.target.value),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:F.locations.map(E=>o.jsx("option",{value:E,children:E},E))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Specjalizacja"}),o.jsx("select",{className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:F.specializations.map(E=>o.jsx("option",{value:E.toLowerCase(),children:E},E))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Ocena"}),o.jsx("select",{value:A??"",onChange:E=>P(E.target.value?parseFloat(E.target.value):null),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:F.ratings.map(E=>o.jsx("option",{value:E.value??"",children:E.label},E.label))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Zakres cen"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",placeholder:"Od",defaultValue:50,className:"w-full px-3 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0"}),o.jsx("span",{children:"-"}),o.jsx("input",{type:"number",placeholder:"Do",defaultValue:200,className:"w-full px-3 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0"})]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(E=>o.jsx("button",{onClick:()=>I(E.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${w.includes(E.id)?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:E.label},E.id))})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[o.jsx("div",{className:"text-gray-600",children:i?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Sr,{className:"w-4 h-4 animate-spin"}),"adowanie..."]}):o.jsxs(o.Fragment,{children:["Znaleziono ",o.jsxs("strong",{className:"text-gray-900",children:[y," specjalistw"]})," w Twojej okolicy"]})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sortuj:"}),o.jsxs("select",{value:j,onChange:E=>S(E.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 text-sm",children:[o.jsx("option",{value:"rating",children:"Najwyej oceniane"}),o.jsx("option",{value:"recommended",children:"Polecane"}),o.jsx("option",{value:"price-asc",children:"Cena: od najniszej"}),o.jsx("option",{value:"price-desc",children:"Cena: od najwyszej"}),o.jsx("option",{value:"distance",children:"Najbliej"})]})]})]}),i&&o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx(Sr,{className:"w-12 h-12 animate-spin text-primary mb-4"}),o.jsx("p",{className:"text-gray-500",children:"adowanie specjalistw..."})]}),!i&&n.length===0&&o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Brak wynikw"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Nie znaleziono specjalistw speniajcych kryteria wyszukiwania."}),o.jsx("button",{onClick:N,className:"btn btn-primary",children:"Wyczy filtry"})]}),!i&&n.length>0&&o.jsx("div",{className:"grid gap-6",children:n.map(E=>o.jsxs("div",{className:"card card-hover p-6 grid md:grid-cols-[200px,1fr,200px] gap-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:E.image,alt:E.name,className:"w-full h-48 md:h-full object-cover rounded-xl"}),E.isPremium&&o.jsx("div",{className:"absolute top-3 left-3 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:" Premium"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:E.name}),o.jsx("p",{className:"text-gray-500",children:E.profession})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"flex",children:[...Array(5)].map((z,D)=>o.jsx(Bn,{className:`w-4 h-4 ${D<Math.floor(E.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},D))}),o.jsx("span",{className:"font-bold text-gray-900",children:E.rating}),o.jsxs("span",{className:"text-gray-500",children:["(",E.reviewsCount," opinii)"]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-4",children:[o.jsx(Ji,{className:"w-4 h-4"}),o.jsxs("span",{children:[E.location," (",E.distance,")"]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[E.services.slice(0,4).map(z=>o.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:z},z)),E.services.length>4&&o.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:["+",E.services.length-4]})]}),o.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:E.description}),o.jsx("div",{className:"flex flex-wrap gap-4",children:E.features.slice(0,3).map(z=>o.jsxs("span",{className:"flex items-center gap-1 text-sm text-gray-600",children:[o.jsx(Pt,{className:"w-4 h-4 text-green-500"}),z]},z))})]}),o.jsxs("div",{className:"flex flex-col justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:`flex items-center gap-2 text-sm mb-4 ${E.isAvailableToday?"text-green-600":"text-orange-500"}`,children:[o.jsx("span",{className:`w-2 h-2 rounded-full ${E.isAvailableToday?"bg-green-500":"bg-orange-500"}`}),E.isAvailableToday?"Dostpna dzi":"Zajta dzi"]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm text-gray-500",children:"Od"}),o.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[E.priceFrom," ",o.jsx("span",{className:"text-base font-normal text-gray-500",children:"z"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ye,{to:`/uslugodawcy/profil/${E.id}`,className:"w-full btn btn-primary justify-center",children:"Zarezerwuj"}),o.jsx(ye,{to:`/uslugodawcy/profil/${E.id}`,className:"w-full btn btn-ghost justify-center",children:"Zobacz profil"})]})]})]},E.id))}),!i&&f&&n.length>0&&o.jsx("div",{className:"flex justify-center mt-10",children:o.jsx("button",{onClick:k,disabled:c,className:"btn btn-ghost px-8 py-3 text-lg",children:c?o.jsxs(o.Fragment,{children:[o.jsx(Sr,{className:"w-5 h-5 animate-spin mr-2"}),"adowanie..."]}):"Zaaduj wicej"})}),!i&&!f&&n.length>0&&o.jsx("div",{className:"text-center mt-10 py-6 border-t border-gray-200",children:o.jsxs("p",{className:"text-gray-500",children:["To wszyscy dostpni specjalici (",y,")"]})}),o.jsxs("button",{className:"fixed bottom-6 right-6 btn btn-primary shadow-xl",children:[o.jsx(Ji,{className:"w-5 h-5"}),o.jsx("span",{children:"Poka na mapie"})]})]})},_5=()=>{const{id:t}=Lb(),e=hi(),{showToast:n}=Lr(),[r,i]=V.useState([]),[a,c]=V.useState(11),[h,f]=V.useState("14:00"),[m,y]=V.useState("Wszystkie"),[x,w]=V.useState(!1),[R,M]=V.useState(!1),[C,A]=V.useState([]),[P,j]=V.useState(""),[S,H]=V.useState({month:"Listopad",year:2025}),[F,B]=V.useState(null),[I,N]=V.useState(!0),O=V.useRef(null),k={id:1,name:"Anna Kowalska",profession:"Mistrzyni fryzjerstwa",experience:"15 lat dowiadczenia",rating:5,reviewsCount:127,completedServices:324,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",verified:!0,isPremium:!0,location:"Warszawa, Mokotw",hasTravel:!0,acceptsCard:!0,punctuality:98,responseTime:"24h",regularClients:127,description:["Cze! Jestem Anna, profesjonalna fryzjerka z 15-letnim dowiadczeniem w brany beauty. Moj pasj jest tworzenie fryzur, ktre podkrelaj naturalne pikno i osobowo kadej klientki.","Specjalizuj si w nowoczesnych technikach koloryzacji, takich jak baleyage, ombre czy sombre. Regularnie uczestnicz w szkoleniach i warsztatach, aby by na bieco z najnowszymi trendami. Uywam tylko wysokiej jakoci produktw marek L'Oral, Wella i Olaplex.","Oferuj usugi zarwno w swoim studio, jak i z dojazdem do klienta. Dbam o komfort i bezpieczestwo - wszystkie narzdzia s sterylizowane, a produkty testowane dermatologicznie."],certifications:["Dyplom Mistrzowski","Certyfikat L'Oral Expert","Olaplex Certified","Wella Professional"],workingHours:{weekdays:"Pn-Pt: 9:00-19:00",saturday:"Sob: 10:00-16:00"},travelArea:"Warszawa i okolice (do 15km)",travelCost:"Bezpatny w Warszawie",services:[{id:"1",name:"Strzyenie damskie",description:"Profesjonalne strzyenie z myciem wosw, konsultacj i modelowaniem. Dopasowanie fryzury do ksztatu twarzy.",duration:"60 min",price:80,badge:"Popularne",category:"Strzyenie"},{id:"2",name:"Koloryzacja jednolita",description:"Farbowanie caych wosw jednym kolorem. Profesjonalne farby L'Oral lub Wella.",duration:"120 min",price:150,oldPrice:200,discount:25,category:"Koloryzacja"},{id:"3",name:"Baleyage / Ombre",description:"Nowoczesne techniki rozjaniania wosw. Naturalny efekt sonecznych refleksw.",duration:"180 min",price:250,badge:"Premium",category:"Koloryzacja"},{id:"4",name:"Keratynowe prostowanie",description:"Zabieg wygadzajcy i prostujcy wosy. Efekt utrzymuje si do 6 miesicy.",duration:"240 min",price:350,category:"Pielgnacja"},{id:"5",name:"Strzyenie mskie",description:"Klasyczne strzyenie mskie z myciem i stylizacj.",duration:"45 min",price:60,category:"Strzyenie"},{id:"6",name:"Modelowanie i stylizacja",description:"Profesjonalne modelowanie na szczotk, lokowanie lub prostowanie.",duration:"45 min",price:50,category:"Strzyenie"}],portfolio:[],reviews:[]};if(V.useEffect(()=>{var he;N(!0);const te=JSON.parse(localStorage.getItem("localProviders")||"[]").find(Ne=>Ne.id===Number(t));if(te){const Ne=((he=te.servicesData)==null?void 0:he.map((Ie,Te)=>({id:Ie.id||String(Te),name:Ie.name,description:Ie.description||"",duration:Ie.duration||"30 min",price:Ie.price,category:"Usugi"})))||[];B({id:te.id,name:te.name,profession:te.profession||"Specjalista",experience:te.experience||"",rating:te.rating||0,reviewsCount:te.reviewsCount||0,completedServices:0,image:te.image||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",verified:!0,isPremium:te.isPremium||!1,location:te.location||"",hasTravel:!0,acceptsCard:!0,punctuality:95,responseTime:"24h",regularClients:0,description:te.description?[te.description]:[""],certifications:[],workingHours:{weekdays:"Pn-Pt: 9:00-17:00",saturday:"Sob: 10:00-14:00"},travelArea:`Do ${te.travelRadius||10} km`,travelCost:"Do ustalenia",services:Ne.length>0?Ne:k.services,portfolio:[],reviews:[]})}else B(k);N(!1)},[t]),I)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!F)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Nie znaleziono profilu"}),o.jsx("button",{onClick:()=>e(-1),className:"text-primary hover:underline",children:"Wr"})]})});const E=["Wszystkie","Strzyenie","Koloryzacja","Pielgnacja","Usugi"],z=[{time:"9:00",disabled:!0},{time:"10:00",disabled:!1},{time:"11:00",disabled:!1},{time:"12:00",disabled:!0},{time:"14:00",disabled:!1},{time:"15:00",disabled:!1},{time:"16:00",disabled:!1},{time:"17:00",disabled:!1},{time:"18:00",disabled:!0}],D=[{day:27,disabled:!0},{day:28,disabled:!0},{day:29,disabled:!0},{day:30,disabled:!0},{day:31,disabled:!0},{day:1,disabled:!1},{day:2,disabled:!1},{day:3,disabled:!1},{day:4,disabled:!1,isToday:!0},{day:5,disabled:!1},{day:6,disabled:!1},{day:7,disabled:!1},{day:8,disabled:!1},{day:9,disabled:!1},{day:10,disabled:!1},{day:11,disabled:!1},{day:12,disabled:!1},{day:13,disabled:!1},{day:14,disabled:!1},{day:15,disabled:!1},{day:16,disabled:!1}],ne=m==="Wszystkie"?F.services:F.services.filter(W=>W.category===m),ue=W=>{r.find(he=>he.id===W.id)?i(r.filter(he=>he.id!==W.id)):(i([...r,W]),n(`Dodano: ${W.name}`,"success"))},ie=r.reduce((W,te)=>W+te.price,0),se=()=>{P.trim()&&(A([...C,{text:P,fromMe:!0}]),j(""),setTimeout(()=>{A(W=>[...W,{text:"Dzikuj za wiadomo! Odezw si wkrtce.",fromMe:!1}])},1e3))},G=()=>{window.innerWidth<=768?e(`/chat?provider=${F.id}`):M(!0)},de=()=>{if(r.length===0){n("Wybierz przynajmniej jedn usug","error");return}if(!a){n("Wybierz dat","error");return}if(!h){n("Wybierz godzin","error");return}w(!0)};return V.useEffect(()=>{const W=new IntersectionObserver(te=>{te.forEach(he=>{he.isIntersecting&&he.target.classList.add("animate-fade-in")})},{threshold:.1,rootMargin:"-50px"});return document.querySelectorAll(".animate-on-scroll").forEach(te=>{W.observe(te)}),()=>W.disconnect()},[]),o.jsxs("div",{className:"min-h-screen bg-gray-50 relative",children:[o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden opacity-30",children:[o.jsx("div",{className:"absolute -top-[200px] -left-[200px] w-[600px] h-[600px] bg-gradient-to-br from-primary to-secondary rounded-full blur-[100px] animate-float"}),o.jsx("div",{className:"absolute -bottom-[300px] -right-[300px] w-[800px] h-[800px] bg-gradient-to-br from-pink-400 to-rose-500 rounded-full blur-[100px] animate-float",style:{animationDelay:"10s"}})]}),o.jsx("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-lg border-b border-gray-100",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-[72px] flex items-center justify-between",children:[o.jsx(ye,{to:"/",className:"transition-transform hover:scale-105",children:o.jsx("img",{src:"/brand.png",alt:"TOMYHOMEAPP",className:"h-[80px]"})}),o.jsxs(ye,{to:"/uslugodawcy",className:"flex items-center gap-2 px-4 py-2 border-2 border-primary text-primary rounded-xl font-semibold hover:bg-primary hover:text-white transition-all",children:[o.jsx(vh,{className:"w-5 h-5"}),"Powrt do listy"]})]})}),o.jsxs("main",{className:"max-w-7xl mx-auto px-6 pb-12",children:[o.jsxs("div",{className:"flex items-center gap-2 py-5 text-sm text-gray-500",children:[o.jsx(ye,{to:"/",className:"hover:text-primary transition-colors",children:"Strona gwna"}),o.jsx("span",{children:"/"}),o.jsx(ye,{to:"/uslugodawcy",className:"hover:text-primary transition-colors",children:"Usugi"}),o.jsx("span",{children:"/"}),o.jsx("span",{className:"text-gray-700",children:F.name})]}),o.jsx("section",{className:"bg-white rounded-3xl p-8 lg:p-10 shadow-lg mb-8 animate-fade-in",children:o.jsxs("div",{className:"grid lg:grid-cols-[200px_1fr_auto] gap-8 items-start",children:[o.jsxs("div",{className:"relative w-[200px] h-[200px] mx-auto lg:mx-0 rounded-2xl overflow-hidden shadow-lg group",children:[o.jsx("img",{src:F.image,alt:F.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),F.verified&&o.jsxs("div",{className:"absolute bottom-3 right-3 bg-green-500 text-white px-3 py-1.5 rounded-full text-xs font-semibold flex items-center gap-1",children:[o.jsx(Pt,{className:"w-3 h-3"}),"Zweryfikowany"]})]}),o.jsxs("div",{className:"text-center lg:text-left",children:[o.jsx("h1",{className:"text-3xl font-extrabold mb-2",children:F.name}),o.jsxs("p",{className:"text-gray-500 mb-4",children:[F.profession,"  ",F.experience]}),o.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-5",children:[o.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((W,te)=>o.jsx(Bn,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},te))}),o.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[o.jsx("strong",{className:"text-gray-900",children:F.rating}),o.jsxs("span",{children:["(",F.reviewsCount," opinii)"]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[F.completedServices," wykonane usugi"]})]})]}),o.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start gap-3 mb-5",children:[F.isPremium&&o.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-primary to-secondary text-white rounded-full text-sm font-medium",children:" Premium Partner"}),o.jsxs("span",{className:"px-4 py-2 bg-gray-100 rounded-full text-sm font-medium flex items-center gap-1.5",children:[o.jsx(Ji,{className:"w-4 h-4"}),F.location]}),F.hasTravel&&o.jsxs("span",{className:"px-4 py-2 bg-gray-100 rounded-full text-sm font-medium flex items-center gap-1.5",children:[o.jsx(d_,{className:"w-4 h-4"}),"Dojazd do klienta"]}),F.acceptsCard&&o.jsxs("span",{className:"px-4 py-2 bg-gray-100 rounded-full text-sm font-medium flex items-center gap-1.5",children:[o.jsx(xh,{className:"w-4 h-4"}),"Patno kart"]})]}),o.jsxs("div",{className:"flex justify-center lg:justify-start gap-8",children:[o.jsxs("div",{className:"text-center lg:text-left",children:[o.jsxs("div",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:[F.punctuality,"%"]}),o.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Punktualno"})]}),o.jsxs("div",{className:"text-center lg:text-left",children:[o.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:F.responseTime}),o.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Czas odpowiedzi"})]}),o.jsxs("div",{className:"text-center lg:text-left",children:[o.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:F.regularClients}),o.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Staych klientw"})]})]})]}),o.jsxs("div",{className:"flex flex-col gap-3 lg:flex-col",children:[o.jsxs("button",{onClick:G,className:"px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold shadow-md hover:-translate-y-0.5 hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[o.jsx(JL,{className:"w-5 h-5"}),"Napisz wiadomo"]}),o.jsxs("button",{className:"px-6 py-3 border-2 border-primary text-primary rounded-xl font-semibold hover:bg-primary hover:text-white transition-all flex items-center justify-center gap-2",children:[o.jsx(Dp,{className:"w-5 h-5"}),"Dodaj do ulubionych"]})]})]})}),o.jsxs("div",{className:"grid lg:grid-cols-[2fr_1fr] gap-8",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsxs("section",{className:"bg-white rounded-3xl p-8 shadow-md",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 pb-4 border-b-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center text-white",children:o.jsx(t5,{className:"w-5 h-5"})}),o.jsx("h2",{className:"text-2xl font-bold",children:"Lista usug"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap",children:E.map(W=>o.jsx("button",{onClick:()=>y(W),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${m===W?"bg-gradient-to-r from-primary to-secondary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:W},W))})]}),o.jsx("div",{className:"space-y-4",children:ne.map(W=>{const te=r.some(he=>he.id===W.id);return o.jsxs("div",{className:`relative p-5 bg-gray-50 rounded-2xl transition-all cursor-pointer group hover:bg-white hover:shadow-md hover:translate-x-1 ${te?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>ue(W),children:[o.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-primary to-secondary rounded-l-2xl scale-y-0 group-hover:scale-y-100 transition-transform origin-top"}),o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-1",children:W.name}),o.jsx("p",{className:"text-sm text-gray-500 mb-2",children:W.description}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("span",{className:"text-sm text-gray-400 flex items-center gap-1",children:[o.jsx(cs,{className:"w-4 h-4"}),W.duration]}),W.badge&&o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${W.badge==="Popularne"?"bg-blue-100 text-blue-600":W.badge==="Premium"?"bg-purple-100 text-purple-600":"bg-green-100 text-green-600"}`,children:W.badge})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[W.oldPrice&&o.jsxs("div",{className:"text-sm text-gray-400 line-through",children:[W.oldPrice," z"]}),o.jsxs("div",{className:"text-2xl font-bold",children:[W.price," ",o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"z"})]})]}),W.discount&&o.jsxs("span",{className:"px-2 py-1 bg-red-500 text-white rounded-lg text-xs font-bold",children:["-",W.discount,"%"]}),o.jsx("button",{className:`px-5 py-2.5 rounded-xl font-semibold text-sm transition-all ${te?"bg-green-500 text-white":"bg-gradient-to-r from-primary to-secondary text-white hover:scale-105 hover:shadow-md"}`,children:te?" Wybrano":"Wybierz"})]})]})]},W.id)})})]}),o.jsxs("section",{className:"bg-white rounded-3xl p-8 shadow-md animate-on-scroll opacity-0",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b-2 border-gray-100",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center text-white",children:o.jsx(Lp,{className:"w-5 h-5"})}),o.jsx("h2",{className:"text-2xl font-bold",children:"O mnie"})]}),o.jsx("div",{className:"text-gray-500 leading-relaxed space-y-4 mb-6",children:F.description.map((W,te)=>o.jsx("p",{children:W},te))}),o.jsx("div",{className:"flex flex-wrap gap-4",children:F.certifications.map((W,te)=>o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-xl text-sm",children:[o.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:o.jsx(Sj,{className:"w-3 h-3 text-white"})}),W]},te))})]}),o.jsxs("section",{className:"bg-white rounded-3xl p-8 shadow-md animate-on-scroll opacity-0",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b-2 border-gray-100",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center text-white",children:o.jsx(Cj,{className:"w-5 h-5"})}),o.jsx("h2",{className:"text-2xl font-bold",children:"Portfolio"})]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:F.portfolio.map(W=>o.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden cursor-pointer transition-all hover:scale-105 hover:shadow-lg relative group",children:[o.jsx("img",{src:W.image,alt:W.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),o.jsx("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/70 to-transparent text-white text-xs font-semibold opacity-0 group-hover:opacity-100 transition-opacity",children:W.title})]},W.id))})]}),o.jsxs("section",{className:"bg-white rounded-3xl p-8 shadow-md animate-on-scroll opacity-0",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b-2 border-gray-100",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center text-white",children:o.jsx(Bn,{className:"w-5 h-5"})}),o.jsxs("h2",{className:"text-2xl font-bold",children:["Opinie klientw (",F.reviewsCount,")"]})]}),o.jsx("div",{className:"space-y-4",children:F.reviews.map(W=>o.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl transition-all hover:bg-white hover:shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white font-bold",children:W.initials}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:W.author}),o.jsx("div",{className:"text-xs text-gray-400",children:W.date})]})]}),o.jsx("div",{className:"flex gap-0.5",children:[...Array(W.rating)].map((te,he)=>o.jsx(Bn,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},he))})]}),o.jsx("p",{className:"text-sm text-gray-500 leading-relaxed mb-3",children:W.text}),o.jsx("span",{className:"inline-block px-3 py-1 bg-white rounded-full text-xs font-medium text-gray-500",children:W.service})]},W.id))})]})]}),o.jsxs("aside",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-md",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"Informacje kontaktowe"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 py-3 border-b border-gray-100",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center text-primary",children:o.jsx(Ji,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-400",children:"Obszar dziaania"}),o.jsx("div",{className:"text-sm font-semibold",children:F.travelArea})]})]}),o.jsxs("div",{className:"flex items-center gap-3 py-3 border-b border-gray-100",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center text-primary",children:o.jsx(d_,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-400",children:"Dojazd"}),o.jsx("div",{className:"text-sm font-semibold",children:F.travelCost})]})]}),o.jsxs("div",{className:"flex items-center gap-3 py-3 border-b border-gray-100",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center text-primary",children:o.jsx(cs,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-400",children:"Godziny pracy"}),o.jsxs("div",{className:"text-sm font-semibold",children:[F.workingHours.weekdays,o.jsx("br",{}),F.workingHours.saturday]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 py-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center text-primary",children:o.jsx(xh,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-400",children:"Formy patnoci"}),o.jsx("div",{className:"text-sm font-semibold",children:"Gotwka, karta, BLIK"})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-md sticky top-24",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Zarezerwuj termin"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Wybierz dat i godzin wizyty"})]}),o.jsxs("div",{className:"mb-5",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-500 mb-2 block",children:"Wybierz dat:"}),o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("span",{className:"font-semibold",children:[S.month," ",S.year]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-primary hover:text-white transition-colors",children:o.jsx(Xc,{className:"w-4 h-4"})}),o.jsx("button",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-primary hover:text-white transition-colors",children:o.jsx(By,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(W=>o.jsx("div",{className:"text-center text-xs font-semibold text-gray-400 py-2",children:W},W))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:D.map((W,te)=>o.jsx("button",{disabled:W.disabled,onClick:()=>!W.disabled&&c(W.day),className:`aspect-square flex items-center justify-center rounded-lg text-sm transition-all
                        ${W.disabled?"opacity-30 cursor-not-allowed bg-gray-100":"bg-gray-100 hover:bg-primary/10 hover:text-primary cursor-pointer"}
                        ${a===W.day?"bg-gradient-to-r from-primary to-secondary text-white":""}
                        ${W.isToday&&a!==W.day?"ring-2 ring-primary":""}
                      `,children:W.day},te))})]}),o.jsxs("div",{className:"mb-5",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-500 mb-3 block",children:"Dostpne godziny:"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:z.map(W=>o.jsx("button",{disabled:W.disabled,onClick:()=>!W.disabled&&f(W.time),className:`py-2.5 rounded-xl text-sm font-medium transition-all
                        ${W.disabled?"opacity-30 cursor-not-allowed bg-gray-100":"bg-gray-100 hover:border-primary border-2 border-transparent"}
                        ${h===W.time?"bg-gradient-to-r from-primary to-secondary text-white border-transparent":""}
                      `,children:W.time},W.time))})]}),o.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl mb-5",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-3",children:"Wybrane usugi:"}),r.length>0?o.jsxs(o.Fragment,{children:[r.map(W=>o.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-0",children:[o.jsx("span",{className:"text-sm",children:W.name}),o.jsxs("span",{className:"font-semibold text-primary",children:[W.price," z"]})]},W.id)),o.jsxs("div",{className:"flex justify-between items-center pt-3 mt-3 border-t-2 border-gray-200",children:[o.jsx("span",{className:"font-bold",children:"Razem:"}),o.jsxs("span",{className:"text-xl font-bold text-primary",children:[ie," z"]})]})]}):o.jsx("p",{className:"text-sm text-gray-400 text-center py-2",children:"Wybierz usugi z listy powyej"})]}),o.jsx("button",{onClick:de,className:"w-full py-3.5 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold hover:-translate-y-0.5 hover:shadow-lg transition-all",children:"Potwierd rezerwacj"})]})]})]})]}),x&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[200] flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto animate-slide-up",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"text-2xl font-bold",children:" Rezerwacja potwierdzona!"}),o.jsx("button",{onClick:()=>w(!1),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-primary hover:text-white transition-colors",children:o.jsx(ds,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-6xl mb-5",children:""}),o.jsx("p",{className:"text-lg mb-3",children:"Twoja rezerwacja zostaa przyjta!"}),o.jsx("p",{className:"text-gray-500 mb-6",children:"Otrzymasz potwierdzenie SMS i e-mail w cigu kilku minut."}),o.jsxs("div",{className:"bg-gray-50 p-5 rounded-2xl text-left mb-6",children:[o.jsx("h4",{className:"font-bold mb-4",children:"Szczegy rezerwacji:"}),o.jsxs("p",{className:"mb-2",children:[o.jsx("strong",{children:"Specjalista:"})," ",F.name]}),o.jsxs("p",{className:"mb-2",children:[o.jsx("strong",{children:"Data:"})," ",a," ",S.month," ",S.year]}),o.jsxs("p",{className:"mb-2",children:[o.jsx("strong",{children:"Godzina:"})," ",h]}),o.jsxs("p",{className:"mb-2",children:[o.jsx("strong",{children:"Usugi:"})," ",r.map(W=>W.name).join(", ")]}),o.jsxs("p",{children:[o.jsx("strong",{children:"czna kwota:"})," ",ie," z"]})]}),o.jsx("button",{onClick:()=>{w(!1),i([])},className:"w-full py-3.5 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold hover:-translate-y-0.5 hover:shadow-lg transition-all",children:"OK"})]})]})}),R&&o.jsxs("div",{className:"fixed bottom-5 right-5 w-80 h-[420px] bg-white rounded-2xl shadow-xl flex flex-col overflow-hidden z-[999] animate-slide-up",children:[o.jsxs("div",{className:"p-3 bg-gradient-to-r from-primary to-secondary text-white font-bold flex justify-between items-center",children:[o.jsxs("span",{children:["Czat z ",F.name]}),o.jsx("button",{onClick:()=>M(!1),className:"hover:opacity-80 transition-opacity",children:o.jsx(ds,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex-1 p-3 bg-gray-50 overflow-y-auto space-y-2",children:C.length===0?o.jsx("p",{className:"text-center text-gray-400 text-sm mt-4",children:"Rozpocznij rozmow..."}):C.map((W,te)=>o.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm ${W.fromMe?"bg-gradient-to-r from-primary to-secondary text-white ml-auto rounded-br-none":"bg-white shadow-sm mr-auto rounded-bl-none"}`,children:W.text},te))}),o.jsxs("div",{className:"p-3 border-t border-gray-100 flex gap-2",children:[o.jsx("input",{ref:O,type:"text",value:P,onChange:W=>j(W.target.value),onKeyDown:W=>W.key==="Enter"&&se(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-2 bg-gray-100 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary"}),o.jsx("button",{onClick:se,className:"p-2 bg-gradient-to-r from-primary to-secondary text-white rounded-xl hover:opacity-90 transition-opacity",children:o.jsx(Hy,{className:"w-5 h-5"})})]})]})]})},w5=()=>{const{user:t}=Zn(),[e,n]=V.useState([]),[r,i]=V.useState(null),[a,c]=V.useState(""),[h,f]=V.useState(""),[m,y]=V.useState(!1),x=V.useRef(null);V.useEffect(()=>{const A=[{id:"1",participant:{id:1,name:"Anna Kowalska",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop",profession:"Fryzjerka",isOnline:!0,rating:4.9},lastMessage:"Dzikuj za rezerwacj! Do zobaczenia w pitek ",lastMessageTime:new Date(Date.now()-3e5),unreadCount:2,messages:[{id:"1",senderId:"1",text:"Dzie dobry! Dzikuj za zainteresowanie moimi usugami.",timestamp:new Date(Date.now()-72e5),read:!0,type:"text"},{id:"2",senderId:(t==null?void 0:t.id)||"",text:"Dzie dobry! Chciaabym umwi si na strzyenie w pitek.",timestamp:new Date(Date.now()-36e5),read:!0,type:"text"},{id:"3",senderId:"1",text:"Oczywicie! Mam wolny termin o 14:00. Pasuje Pani?",timestamp:new Date(Date.now()-18e5),read:!0,type:"text"},{id:"4",senderId:(t==null?void 0:t.id)||"",text:"Tak, idealnie! Rezerwuj.",timestamp:new Date(Date.now()-12e5),read:!0,type:"text"},{id:"5",senderId:"1",text:"",timestamp:new Date(Date.now()-6e5),read:!1,type:"booking",bookingData:{service:"Strzyenie damskie",date:"2025-12-06",time:"14:00",price:80,status:"confirmed"}},{id:"6",senderId:"1",text:"Dzikuj za rezerwacj! Do zobaczenia w pitek ",timestamp:new Date(Date.now()-3e5),read:!1,type:"text"}]},{id:"2",participant:{id:2,name:"Piotr Nowak",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop",profession:"Masaysta",isOnline:!1,rating:4.7},lastMessage:"Prosz potwierdzi rezerwacj na poniedziaek",lastMessageTime:new Date(Date.now()-108e5),unreadCount:0,messages:[{id:"1",senderId:"2",text:"Witam! Czy jest Pan zainteresowany masaem relaksacyjnym?",timestamp:new Date(Date.now()-18e6),read:!0,type:"text"},{id:"2",senderId:(t==null?void 0:t.id)||"",text:"Tak, szukam czego na napite minie.",timestamp:new Date(Date.now()-144e5),read:!0,type:"text"},{id:"3",senderId:"2",text:"Prosz potwierdzi rezerwacj na poniedziaek",timestamp:new Date(Date.now()-108e5),read:!0,type:"text"}]},{id:"3",participant:{id:3,name:"Katarzyna Winiewska",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop",profession:"Kosmetyczka",isOnline:!0,rating:5},lastMessage:"Zapraszam na zabieg w rod!",lastMessageTime:new Date(Date.now()-864e5),unreadCount:1,messages:[{id:"1",senderId:"3",text:"Zapraszam na zabieg w rod!",timestamp:new Date(Date.now()-864e5),read:!1,type:"text"}]}];n(A),localStorage.getItem("userConversations")},[t]),V.useEffect(()=>{w()},[r==null?void 0:r.messages]);const w=()=>{if(x.current){const A=x.current.parentElement;A&&(A.scrollTop=A.scrollHeight)}},R=()=>{if(!a.trim()||!r)return;const A={id:Date.now().toString(),senderId:(t==null?void 0:t.id)||"",text:a,timestamp:new Date,read:!1,type:"text"},P=e.map(j=>j.id===r.id?{...j,messages:[...j.messages,A],lastMessage:a,lastMessageTime:new Date}:j);n(P),i({...r,messages:[...r.messages,A]}),c(""),localStorage.setItem("userConversations",JSON.stringify(P))},M=A=>{const j=new Date().getTime()-new Date(A).getTime(),S=Math.floor(j/6e4),H=Math.floor(j/36e5),F=Math.floor(j/864e5);return S<1?"Teraz":S<60?`${S} min`:H<24?`${H}h`:F===1?"Wczoraj":new Date(A).toLocaleDateString("pl-PL")},C=e.filter(A=>A.participant.name.toLowerCase().includes(h.toLowerCase()));return o.jsx("div",{className:"min-h-screen bg-gray-50 pt-4",children:o.jsx("div",{className:"max-w-6xl mx-auto px-4",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",style:{height:"calc(100vh - 120px)"},children:o.jsxs("div",{className:"flex h-full",children:[o.jsxs("div",{className:`w-full md:w-96 border-r border-gray-100 flex flex-col ${m?"hidden md:flex":"flex"}`,children:[o.jsxs("div",{className:"p-4 border-b border-gray-100",children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-4",children:"Wiadomoci"}),o.jsxs("div",{className:"relative",children:[o.jsx(uf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:h,onChange:A=>f(A.target.value),placeholder:"Szukaj rozmw...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[C.map(A=>o.jsxs("button",{onClick:()=>{i(A),y(!0);const P=e.map(j=>j.id===A.id?{...j,unreadCount:0}:j);n(P)},className:`w-full p-4 flex items-start gap-3 hover:bg-gray-50 transition-colors border-b border-gray-50 ${(r==null?void 0:r.id)===A.id?"bg-primary/5":""}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:A.participant.avatar,alt:A.participant.name,className:"w-12 h-12 rounded-full object-cover"}),A.participant.isOnline&&o.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-semibold text-gray-900",children:A.participant.name}),o.jsx("span",{className:"text-xs text-gray-500",children:M(A.lastMessageTime)})]}),o.jsx("p",{className:"text-sm text-gray-500",children:A.participant.profession}),o.jsx("p",{className:"text-sm text-gray-600 truncate mt-1",children:A.lastMessage})]}),A.unreadCount>0&&o.jsx("span",{className:"w-5 h-5 bg-primary text-white text-xs font-bold rounded-full flex items-center justify-center",children:A.unreadCount})]},A.id)),C.length===0&&o.jsx("div",{className:"p-8 text-center text-gray-500",children:o.jsx("p",{children:"Brak rozmw"})})]})]}),o.jsx("div",{className:`flex-1 flex flex-col ${m?"flex":"hidden md:flex"}`,children:r?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>y(!1),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Xc,{className:"w-5 h-5"})}),o.jsx("img",{src:r.participant.avatar,alt:r.participant.name,className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"font-semibold text-gray-900",children:r.participant.name}),r.participant.rating&&o.jsxs("span",{className:"flex items-center gap-1 text-sm text-amber-500",children:[o.jsx(Bn,{className:"w-3 h-3 fill-amber-400"}),r.participant.rating]})]}),o.jsx("p",{className:"text-sm text-gray-500",children:r.participant.isOnline?o.jsx("span",{className:"text-green-500",children:"Online"}):r.participant.profession})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ye,{to:`/uslugodawcy/profil/${r.participant.id}`,className:"px-4 py-2 text-sm font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:"Zobacz profil"}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(cf,{className:"w-5 h-5 text-gray-500"})}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(o5,{className:"w-5 h-5 text-gray-500"})}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Lj,{className:"w-5 h-5 text-gray-500"})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.messages.map(A=>{const P=A.senderId===(t==null?void 0:t.id);return A.type==="booking"&&A.bookingData?o.jsx("div",{className:"flex justify-center",children:o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-4 max-w-sm",children:[o.jsx("div",{className:"text-center mb-2",children:o.jsxs("span",{className:"text-xs font-medium text-emerald-600 uppercase",children:["Rezerwacja ",A.bookingData.status==="confirmed"?"potwierdzona ":"oczekujca"]})}),o.jsxs("div",{className:"text-sm space-y-1",children:[o.jsx("p",{className:"font-semibold",children:A.bookingData.service}),o.jsxs("p",{className:"text-gray-600",children:[" ",new Date(A.bookingData.date).toLocaleDateString("pl-PL")," o ",A.bookingData.time]}),o.jsxs("p",{className:"text-emerald-600 font-bold",children:[A.bookingData.price," z"]})]})]})},A.id):o.jsx("div",{className:`flex ${P?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-[70%] px-4 py-2 rounded-2xl ${P?"bg-gradient-to-r from-primary to-secondary text-white rounded-br-md":"bg-gray-100 text-gray-900 rounded-bl-md"}`,children:[o.jsx("p",{children:A.text}),o.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 text-xs ${P?"text-white/70":"text-gray-500"}`,children:[o.jsx("span",{children:new Date(A.timestamp).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"})}),P&&(A.read?o.jsx(Aj,{className:"w-4 h-4"}):o.jsx(Pt,{className:"w-4 h-4"}))]})]})},A.id)}),o.jsx("div",{ref:x})]}),o.jsx("div",{className:"p-4 border-t border-gray-100",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Dj,{className:"w-5 h-5 text-gray-500"})}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(zj,{className:"w-5 h-5 text-gray-500"})}),o.jsx("input",{type:"text",value:a,onChange:A=>c(A.target.value),onKeyPress:A=>A.key==="Enter"&&R(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-2 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary"}),o.jsx("button",{onClick:R,disabled:!a.trim(),className:"p-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl hover:shadow-lg disabled:opacity-50 transition-all",children:o.jsx(Hy,{className:"w-5 h-5"})})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wybierz rozmow"}),o.jsx("p",{className:"text-sm",children:"Kliknij na rozmow z listy, aby zobaczy wiadomoci"})]})})})]})})})})},b5=()=>{const[t,e]=V.useState([]),[n,r]=V.useState("all"),[i,a]=V.useState("all");V.useEffect(()=>{const C=[{id:"1",type:"booking",title:"Rezerwacja potwierdzona",message:"Twoja rezerwacja zostaa potwierdzona",time:new Date(Date.now()-108e5),read:!1,link:"/profil"},{id:"2",type:"message",title:"Nowa wiadomo",message:"Masz now wiadomo od usugodawcy",time:new Date(Date.now()-18e5),read:!1,link:"/wiadomosci"},{id:"3",type:"booking",title:"Przypomnienie o wizycie",message:"Masz wizyt jutro o 14:00",time:new Date(Date.now()-864e5),read:!0,link:"/profil"},{id:"4",type:"system",title:"Uzupenij profil",message:"Dodaj zdjcie profilowe dla lepszego dowiadczenia",time:new Date(Date.now()-1728e5),read:!0,link:"/profil"}];e(C)},[]);const c=C=>{e(t.map(A=>A.id===C?{...A,read:!0}:A))},h=()=>{e(t.map(C=>({...C,read:!0})))},f=C=>{e(t.filter(A=>A.id!==C))},m=()=>{confirm("Czy na pewno chcesz usun wszystkie powiadomienia?")&&e([])},y=C=>{switch(C){case"booking":return o.jsx(Pr,{className:"w-5 h-5"});case"message":return o.jsx(wh,{className:"w-5 h-5"});case"review":return o.jsx(Bn,{className:"w-5 h-5"});case"payment":return o.jsx(sa,{className:"w-5 h-5"});default:return o.jsx(Co,{className:"w-5 h-5"})}},x=C=>{switch(C){case"booking":return"bg-blue-100 text-blue-600";case"message":return"bg-purple-100 text-purple-600";case"review":return"bg-amber-100 text-amber-600";case"payment":return"bg-green-100 text-green-600";default:return"bg-gray-100 text-gray-600"}},w=C=>{const P=new Date().getTime()-new Date(C).getTime(),j=Math.floor(P/6e4),S=Math.floor(P/36e5),H=Math.floor(P/864e5);return j<1?"Teraz":j<60?`${j} min temu`:S<24?`${S}h temu`:H===1?"Wczoraj":H<7?`${H} dni temu`:new Date(C).toLocaleDateString("pl-PL")},R=t.filter(C=>!(n==="unread"&&C.read||i!=="all"&&C.type!==i)),M=t.filter(C=>!C.read).length;return o.jsx("div",{className:"min-h-screen bg-gray-50 pt-8 pb-16",children:o.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Powiadomienia"}),o.jsx("p",{className:"text-gray-600",children:M>0?`${M} nieprzeczytanych`:"Wszystkie przeczytane"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:[o.jsx(Pt,{className:"w-4 h-4 inline mr-1"}),"Przeczytaj wszystkie"]}),o.jsx(ye,{to:"/ustawienia/powiadomienia",className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(df,{className:"w-5 h-5 text-gray-500"})})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[o.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>r("all"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${n==="all"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:"Wszystkie"}),o.jsxs("button",{onClick:()=>r("unread"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${n==="unread"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:["Nieprzeczytane (",M,")"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wy,{className:"w-4 h-4 text-gray-400"}),o.jsxs("select",{value:i,onChange:C=>a(C.target.value),className:"bg-transparent text-sm text-gray-600 focus:outline-none cursor-pointer",children:[o.jsx("option",{value:"all",children:"Wszystkie typy"}),o.jsx("option",{value:"booking",children:"Rezerwacje"}),o.jsx("option",{value:"message",children:"Wiadomoci"}),o.jsx("option",{value:"system",children:"Systemowe"})]})]}),t.length>0&&o.jsx("button",{onClick:m,className:"ml-auto text-sm text-red-500 hover:text-red-600",children:"Usu wszystkie"})]})}),o.jsx("div",{className:"space-y-3",children:R.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[o.jsx(Co,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak powiadomie"}),o.jsx("p",{className:"text-gray-500",children:n==="unread"?"Wszystkie powiadomienia zostay przeczytane":"Nie masz jeszcze adnych powiadomie"})]}):R.map(C=>o.jsxs("div",{className:`bg-white rounded-xl shadow-sm p-4 flex items-start gap-4 transition-all hover:shadow-md ${C.read?"":"border-l-4 border-primary"}`,children:[o.jsx("div",{className:`p-3 rounded-xl ${x(C.type)}`,children:y(C.type)}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:`font-semibold ${C.read?"text-gray-700":"text-gray-900"}`,children:C.title}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.message}),o.jsx("p",{className:"text-xs text-gray-400 mt-2",children:w(C.time)})]}),o.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[C.link&&o.jsx(ye,{to:C.link,onClick:()=>c(C.id),className:"px-3 py-1 text-sm text-primary hover:bg-primary/10 rounded-lg transition-colors",children:"Zobacz"}),!C.read&&o.jsx("button",{onClick:()=>c(C.id),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Oznacz jako przeczytane",children:o.jsx(Pt,{className:"w-4 h-4 text-gray-400"})}),o.jsx("button",{onClick:()=>f(C.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:o.jsx(hf,{className:"w-4 h-4 text-gray-400 hover:text-red-500"})})]})]})})]},C.id))})]})})},N5=()=>{var c;const[t,e]=V.useState(!1),[n,r]=V.useState(!1),{user:i,logout:a}=Zn();return di(),o.jsxs("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:[o.jsx("div",{className:"px-4 lg:px-8",children:o.jsxs("div",{className:"h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{className:"lg:hidden p-2 bg-white rounded-lg border border-gray-200 hover:bg-gray-50",onClick:()=>e(!t),style:{backgroundColor:"white"},children:t?o.jsx(ds,{className:"w-5 h-5 text-gray-700"}):o.jsx(QL,{className:"w-5 h-5 text-gray-700"})}),o.jsxs(ye,{to:"/biznes",className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("span",{className:"font-extrabold text-lg text-gray-900",children:"TOMYHOMEAPP"}),o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full",children:"BIZNES"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ye,{to:"/",className:"hidden sm:flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:"Widok klienta "}),o.jsxs("button",{className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:[o.jsx(Co,{className:"w-5 h-5"}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:((c=i==null?void 0:i.username)==null?void 0:c.charAt(0).toUpperCase())||"U"})}),o.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:(i==null?void 0:i.username)||"Uytkownik"})]}),n&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-50",children:[o.jsxs(ye,{to:"/biznes/profil",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>r(!1),children:[o.jsx(us,{className:"w-4 h-4"}),"Mj profil"]}),o.jsxs(ye,{to:"/biznes/ustawienia",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>r(!1),children:[o.jsx(df,{className:"w-4 h-4"}),"Ustawienia"]}),o.jsx("hr",{className:"my-2"}),o.jsxs("button",{onClick:()=>{a(),r(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[o.jsx(_h,{className:"w-4 h-4"}),"Wyloguj si"]})]})]})]})]})}),t&&o.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)})]})},j5=({isOpen:t=!0,onClose:e})=>{const n=di(),r=[{icon:GL,label:"Dashboard",to:"/biznes",exact:!0},{icon:Rp,label:"Moje usugi",to:"/biznes/uslugi"},{icon:e5,label:"Dodaj usug",to:"/biznes/dodaj-usluge"},{icon:Pr,label:"Kalendarz",to:"/biznes/kalendarz"},{icon:wh,label:"Wiadomoci",to:"/biznes/wiadomosci",badge:3},{icon:Ij,label:"Statystyki",to:"/biznes/statystyki"}],i=[{icon:df,label:"Ustawienia",to:"/biznes/ustawienia"},{icon:Rj,label:"Pomoc",to:"/biznes/pomoc"}],a=(c,h=!1)=>h?n.pathname===c:n.pathname.startsWith(c);return o.jsxs(o.Fragment,{children:[t&&o.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:e}),o.jsx("aside",{className:`
          fixed lg:sticky top-16 left-0 z-40
          w-64 h-[calc(100vh-64px)] bg-white border-r border-gray-200
          transform transition-transform duration-300 ease-in-out
          lg:translate-x-0
          ${t?"translate-x-0":"-translate-x-full"}
        `,children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[o.jsx("div",{className:"mb-4",children:o.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider px-3",children:"Menu gwne"})}),r.map(c=>o.jsxs(ye,{to:c.to,onClick:e,className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
                  transition-all duration-200
                  ${a(c.to,c.exact)?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                `,children:[o.jsx(c.icon,{className:"w-5 h-5"}),o.jsx("span",{className:"flex-1",children:c.label}),c.badge&&o.jsx("span",{className:`
                    px-2 py-0.5 text-xs font-bold rounded-full
                    ${a(c.to,c.exact)?"bg-white/20 text-white":"bg-red-100 text-red-600"}
                  `,children:c.badge})]},c.to))]}),o.jsx("div",{className:"p-4 border-t border-gray-100",children:i.map(c=>o.jsxs(ye,{to:c.to,onClick:e,className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
                  transition-all duration-200
                  ${a(c.to)?"bg-gray-100 text-gray-900":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}
                `,children:[o.jsx(c.icon,{className:"w-5 h-5"}),o.jsx("span",{children:c.label})]},c.to))}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"p-4 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl text-white",children:[o.jsx("h4",{className:"font-bold mb-1",children:"Przejd na PRO"}),o.jsx("p",{className:"text-xs text-white/80 mb-3",children:"Odblokuj wszystkie funkcje i zwiksz widoczno"}),o.jsx("button",{className:"w-full py-2 bg-white text-emerald-600 rounded-lg text-sm font-semibold hover:bg-gray-50 transition-colors",children:"Sprawd ofert"})]})})]})})]})},T5=()=>{const{isAuthenticated:t}=Zn(),[e,n]=V.useState(!1);return t?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(N5,{}),o.jsxs("div",{className:"flex",children:[o.jsx(j5,{isOpen:e,onClose:()=>n(!1)}),o.jsx("main",{className:"flex-1 min-h-[calc(100vh-64px)] p-4 lg:p-8",children:o.jsx($2,{})})]})]}):o.jsx(H2,{to:"/auth?redirect=/biznes",replace:!0})},p_=()=>{const{user:t}=Zn(),[e,n]=V.useState({totalBookings:24,bookingsChange:12,revenue:3450,revenueChange:8,clients:18,clientsChange:-3,rating:4.9,reviewsCount:47}),[r,i]=V.useState([{id:1,clientName:"Anna Nowak",service:"Strzyenie damskie",date:"2025-12-02",time:"10:00",price:80,status:"confirmed"},{id:2,clientName:"Piotr Kowalski",service:"Strzyenie mskie",date:"2025-12-02",time:"11:30",price:60,status:"pending"},{id:3,clientName:"Maria Winiewska",service:"Koloryzacja",date:"2025-12-02",time:"14:00",price:150,status:"confirmed"}]),[a,c]=V.useState(!1);V.useEffect(()=>{const m=JSON.parse(localStorage.getItem("localProviders")||"[]"),y=m.find(x=>x.ownerId===(t==null?void 0:t.id));c(!!y||m.length>0)},[t]);const h=[{title:"Rezerwacje",value:e.totalBookings,change:e.bookingsChange,icon:Pr,color:"emerald"},{title:"Przychd",value:`${e.revenue} z`,change:e.revenueChange,icon:sa,color:"blue"},{title:"Klienci",value:e.clients,change:e.clientsChange,icon:Vp,color:"purple"},{title:"Ocena",value:e.rating,subtitle:`${e.reviewsCount} opinii`,icon:Bn,color:"amber"}],f=m=>{switch(m){case"confirmed":return o.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Potwierdzona"});case"pending":return o.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full",children:"Oczekuje"});case"completed":return o.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Zakoczona"});default:return null}};return a?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Witaj, ",(t==null?void 0:t.username)||"Uytkowniku","! "]}),o.jsx("p",{className:"text-gray-600",children:"Oto przegld Twojego biznesu na dzi"})]}),o.jsxs(ye,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Dodaj usug"]})]}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:h.map((m,y)=>o.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center bg-${m.color}-100`,children:o.jsx(m.icon,{className:`w-5 h-5 text-${m.color}-600`})}),m.change!==void 0&&o.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${m.change>=0?"text-green-600":"text-red-600"}`,children:[m.change>=0?o.jsx(Pj,{className:"w-4 h-4"}):o.jsx(kj,{className:"w-4 h-4"}),Math.abs(m.change),"%"]})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m.value}),o.jsx("div",{className:"text-sm text-gray-500",children:m.subtitle||m.title})]},y))}),o.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm",children:[o.jsx("div",{className:"p-5 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Nadchodzce rezerwacje"}),o.jsx(ye,{to:"/biznes/kalendarz",className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:"Zobacz wszystkie "})]})}),o.jsxs("div",{className:"divide-y divide-gray-100",children:[r.map(m=>o.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:m.clientName.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:m.clientName}),o.jsx("div",{className:"text-sm text-gray-500",children:m.service})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[o.jsx(cs,{className:"w-4 h-4"}),m.time]}),f(m.status)]})]},m.id)),r.length===0&&o.jsx("div",{className:"p-8 text-center text-gray-500",children:"Brak nadchodzcych rezerwacji"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Szybkie akcje"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(ye,{to:"/biznes/uslugi",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center",children:o.jsx(ar,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Zobacz swj profil"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Tak widz Ci klienci"})]})]}),o.jsxs(ye,{to:"/biznes/kalendarz",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center",children:o.jsx(Pr,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Zarzdzaj kalendarzem"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Dostpno i godziny"})]})]}),o.jsxs(ye,{to:"/biznes/statystyki",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center",children:o.jsx(Mp,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Zobacz statystyki"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Analizuj swj biznes"})]})]})]})]})]})]}):o.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[o.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(Xr,{className:"w-12 h-12 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Witaj w ToMyHomeApp Biznes!"}),o.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Nie masz jeszcze profilu usugodawcy. Dodaj swoj pierwsz usug, aby zacz przyjmowa rezerwacje od klientw."}),o.jsxs(ye,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Dodaj pierwsz usug"]}),o.jsxs("div",{className:"mt-12 grid md:grid-cols-3 gap-6 text-left",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[o.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center mb-4",children:o.jsx(Xr,{className:"w-5 h-5"})}),o.jsx("h3",{className:"font-bold mb-2",children:"1. Dodaj usug"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Opisz swoj usug, ustal ceny i godziny pracy"})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-4",children:o.jsx(ar,{className:"w-5 h-5"})}),o.jsx("h3",{className:"font-bold mb-2",children:"2. Bd widoczny"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Klienci znajd Ci w wyszukiwarce usug"})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center mb-4",children:o.jsx(Pr,{className:"w-5 h-5"})}),o.jsx("h3",{className:"font-bold mb-2",children:"3. Przyjmuj rezerwacje"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Zarzdzaj kalendarzem i rozwijaj biznes"})]})]})]})},E5=()=>{const{user:t}=Zn(),{showToast:e}=Lr(),[n,r]=V.useState(null),[i,a]=V.useState(!0),[c,h]=V.useState("");V.useEffect(()=>{f()},[]);const f=()=>{a(!0);const w=JSON.parse(localStorage.getItem("localProviders")||"[]");if(w.length>0){const R=w[w.length-1];let M=[];R.servicesData?M=R.servicesData:R.services&&Array.isArray(R.services)&&(M=R.services.map((C,A)=>({id:C.id||`service-${A}`,name:typeof C=="string"?C:C.name,description:C.description||"",price:C.price||0,duration:C.duration||"30 min",isActive:C.isActive!==!1,category:C.category||"Inne"}))),r({id:R.id,name:R.name,profession:R.profession||"",location:R.location||"",image:R.image||"",services:M,isActive:!0})}a(!1)},m=w=>{if(!n)return;const R=n.services.map(C=>C.id===w?{...C,isActive:!C.isActive}:C);r({...n,services:R});const M=JSON.parse(localStorage.getItem("localProviders")||"[]");M.length>0&&(M[M.length-1].servicesData=R,localStorage.setItem("localProviders",JSON.stringify(M))),e("Status usugi zmieniony","success")},y=w=>{if(!n)return;const R=n.services.filter(C=>C.id!==w);r({...n,services:R});const M=JSON.parse(localStorage.getItem("localProviders")||"[]");M.length>0&&(M[M.length-1].servicesData=R,localStorage.setItem("localProviders",JSON.stringify(M))),e("Usuga usunita","info")},x=(n==null?void 0:n.services.filter(w=>w.name.toLowerCase().includes(c.toLowerCase())))||[];return i?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):n?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Moje usugi"}),o.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoimi usugami i cenami"})]}),o.jsxs(ye,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Dodaj usug"]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("img",{src:n.image||"https://via.placeholder.com/80",alt:n.name,className:"w-20 h-20 rounded-xl object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n.name}),o.jsx("p",{className:"text-gray-500",children:n.profession}),o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n.location})]}),o.jsxs(ye,{to:`/uslugodawcy/profil/${n.id}`,target:"_blank",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[o.jsx(ar,{className:"w-4 h-4"}),"Podgld profilu"]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(uf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Szukaj usugi...",value:c,onChange:w=>h(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),o.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(Wy,{className:"w-5 h-5"}),"Filtruj"]})]})}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsxs("h3",{className:"font-semibold text-gray-900",children:["Wszystkie usugi (",x.length,")"]})}),x.length===0?o.jsx("div",{className:"p-8 text-center text-gray-500",children:c?"Nie znaleziono usug":"Brak usug"}):o.jsx("div",{className:"divide-y divide-gray-100",children:x.map(w=>o.jsxs("div",{className:`p-4 flex items-center justify-between hover:bg-gray-50 transition-colors ${w.isActive?"":"opacity-60"}`,children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[o.jsx("button",{onClick:()=>m(w.id),className:`p-1 rounded transition-colors ${w.isActive?"text-emerald-500":"text-gray-400"}`,title:w.isActive?"Aktywna":"Nieaktywna",children:w.isActive?o.jsx(s5,{className:"w-8 h-8"}):o.jsx(i5,{className:"w-8 h-8"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:w.name}),o.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:w.description||"Brak opisu"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right mr-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-gray-900 font-semibold",children:[o.jsx(sa,{className:"w-4 h-4"}),w.price," z"]}),o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[o.jsx(cs,{className:"w-3 h-3"}),w.duration]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{e("Funkcja edycji w przygotowaniu","info")},className:"p-2 text-gray-500 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"Edytuj",children:o.jsx(YL,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>{window.confirm("Czy na pewno chcesz usun t usug?")&&y(w.id)},className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:o.jsx(hf,{className:"w-5 h-5"})})]})]})]},w.id))})]})]}):o.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(Xr,{className:"w-10 h-10 text-gray-400"})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Nie masz jeszcze usug"}),o.jsx("p",{className:"text-gray-600 mb-8",children:"Dodaj swoj pierwsz usug, aby klienci mogli j znale i zarezerwowa."}),o.jsxs(ye,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Dodaj pierwsz usug"]})]})};function k5(t,e){const n=V.useRef(e);V.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const P5=1;function S5(t){return Object.freeze({__version:P5,map:t})}function I5(t,e){return Object.freeze({...t,...e})}const Vj=V.createContext(null),Fj=Vj.Provider;function Uj(){const t=V.useContext(Vj);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function C5(t){function e(n,r){const{instance:i,context:a}=t(n).current;return V.useImperativeHandle(r,()=>i),n.children==null?null:ic.createElement(Fj,{value:a},n.children)}return V.forwardRef(e)}function A5(t){function e(n,r){const{instance:i}=t(n).current;return V.useImperativeHandle(r,()=>i),null}return V.forwardRef(e)}function R5(t,e){const n=V.useRef();V.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Bj(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Up={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(jT,function(n){var r="1.9.4";function i(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var a=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function c(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var h=0;function f(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function m(s,l,d){var p,v,b,U;return U=function(){p=!1,v&&(b.apply(d,v),v=!1)},b=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(U,l),p=!0)},b}function y(s,l,d){var p=l[1],v=l[0],b=p-v;return s===p&&d?s:((s-v)%b+b)%b+v}function x(){return!1}function w(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function R(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function M(s){return R(s).split(/\s+/)}function C(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?a(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function A(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function j(s,l){return s.replace(P,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function H(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var I=0;function N(s){var l=+new Date,d=Math.max(0,16-(l-I));return I=l+d,window.setTimeout(s,d)}var O=window.requestAnimationFrame||B("RequestAnimationFrame")||N,k=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function E(s,l,d){if(d&&O===N)s.call(l);else return O.call(window,c(s,l))}function z(s){s&&k.call(window,s)}var D={__proto__:null,extend:i,create:a,bind:c,get lastId(){return h},stamp:f,throttle:m,wrapNum:y,falseFn:x,formatNum:w,trim:R,splitWords:M,setOptions:C,getParamString:A,template:j,isArray:S,indexOf:H,emptyImageUrl:F,requestFn:O,cancelFn:k,requestAnimFrame:E,cancelAnimFrame:z};function ne(){}ne.extend=function(s){var l=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=a(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&i(l,s.statics),s.includes&&(ue(s.includes),i.apply(null,[p].concat(s.includes))),i(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?a(d.options):{},i(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,U=p._initHooks.length;b<U;b++)p._initHooks[b].call(this)}},l},ne.include=function(s){var l=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ne.mergeOptions=function(s){return i(this.prototype.options,s),this},ne.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ue(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ie={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=M(s);for(var v=0,b=s.length;v<b;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=M(s);for(var v=arguments.length===1,b=0,U=s.length;b<U;b++)v?this._off(s[b]):this._off(s[b],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,b;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,b=p.length;v<b;v++)p[v].fn=x;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var U=this._listens(s,l,d);if(U!==!1){var Z=p[U];this._firingCount&&(Z.fn=x,this._events[s]=p=p.slice()),p.splice(U,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=i({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var b=0,U=v.length;b<U;b++){var Z=v[b],q=Z.fn;Z.once&&this.off(s,q,Z.ctx),q.call(Z.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var b=this._events&&this._events[s];if(b&&b.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var U in this._eventParents)if(this._eventParents[U].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,b=p.length;v<b;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=M(s);for(var v=0,b=s.length;v<b;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[f(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[f(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};ie.addEventListener=ie.on,ie.removeEventListener=ie.clearAllEventListeners=ie.off,ie.addOneTimeEventListener=ie.once,ie.fireEvent=ie.fire,ie.hasEventListeners=ie.listens;var se=ne.extend(ie);function G(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var de=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(W(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(W(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(s){s=W(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=W(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=W(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function W(s,l,d){return s instanceof G?s:S(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,d)}function te(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}te.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=d=W(s);else if(s=he(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof G?s=W(s):s=he(s),s instanceof te?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=he(s);var l=this.min,d=this.max,p=s.min,v=s.max,b=v.x>=l.x&&p.x<=d.x,U=v.y>=l.y&&p.y<=d.y;return b&&U},overlaps:function(s){s=he(s);var l=this.min,d=this.max,p=s.min,v=s.max,b=v.x>l.x&&p.x<d.x,U=v.y>l.y&&p.y<d.y;return b&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return he(W(l.x-p,l.y-v),W(d.x+p,d.y+v))},equals:function(s){return s?(s=he(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function he(s,l){return!s||s instanceof te?s:new te(s,l)}function Ne(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}Ne.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof Te)p=s,v=s;else if(s instanceof Ne){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(be(s)||Ie(s)):this;return!l&&!d?(this._southWest=new Te(p.lat,p.lng),this._northEast=new Te(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new Ne(new Te(l.lat-p,l.lng-v),new Te(d.lat+p,d.lng+v))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Te||"lat"in s?s=be(s):s=Ie(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof Ne?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=Ie(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),b=v.lat>=l.lat&&p.lat<=d.lat,U=v.lng>=l.lng&&p.lng<=d.lng;return b&&U},overlaps:function(s){s=Ie(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),b=v.lat>l.lat&&p.lat<d.lat,U=v.lng>l.lng&&p.lng<d.lng;return b&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Ie(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ie(s,l){return s instanceof Ne?s:new Ne(s,l)}function Te(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Te.prototype={equals:function(s,l){if(!s)return!1;s=be(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+w(this.lat,s)+", "+w(this.lng,s)+")"},distanceTo:function(s){return Pe.distance(this,be(s))},wrap:function(){return Pe.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ie([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function be(s,l,d){return s instanceof Te?s:S(s)&&typeof s[0]!="object"?s.length===3?new Te(s[0],s[1],s[2]):s.length===2?new Te(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Te(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Te(s,l,d)}var nt={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new te(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?y(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?y(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Te(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var b=s.getSouthWest(),U=s.getNorthEast(),Z=new Te(b.lat-p,b.lng-v),q=new Te(U.lat-p,U.lng-v);return new Ne(Z,q)}},Pe=i({},nt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,b=Math.sin((l.lat-s.lat)*d/2),U=Math.sin((l.lng-s.lng)*d/2),Z=b*b+Math.cos(p)*Math.cos(v)*U*U,q=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*q}}),rt=6378137,Q={R:rt,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new G(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new Te((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=rt*Math.PI;return new te([-s,-s],[s,s])}()};function pe(s,l,d,p){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}pe.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ue(s,l,d,p){return new pe(s,l,d,p)}var dt=i({},Pe,{code:"EPSG:3857",projection:Q,transformation:function(){var s=.5/(Math.PI*Q.R);return Ue(s,.5,-s,.5)}()}),Vt=i({},dt,{code:"EPSG:900913"});function fi(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Fo(s,l){var d="",p,v,b,U,Z,q;for(p=0,b=s.length;p<b;p++){for(Z=s[p],v=0,U=Z.length;v<U;v++)q=Z[v],d+=(v?"L":"M")+q.x+" "+q.y;d+=l?fe.svg?"z":"x":""}return d||"M0 0"}var Uo=document.documentElement.style,fa="ActiveXObject"in window,eu=fa&&!document.addEventListener,ma="msLaunchUri"in navigator&&!("documentMode"in document),pa=In("webkit"),tu=In("android"),ga=In("android 2")||In("android 3"),Bo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),nu=tu&&In("Google")&&Bo<537&&!("AudioNode"in window),_t=!!window.opera,Rt=!ma&&In("chrome"),ws=In("gecko")&&!pa&&!_t&&!fa,ru=!Rt&&In("safari"),Wo=In("phantom"),iu="OTransition"in Uo,bs=navigator.platform.indexOf("Win")===0,Ho=fa&&"transition"in Uo,ya="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ga,va="MozPerspective"in Uo,mf=!window.L_DISABLE_3D&&(Ho||ya||va)&&!iu&&!Wo,Ns=typeof orientation<"u"||In("mobile"),$o=Ns&&pa,su=Ns&&ya,Zo=!window.PointerEvent&&window.MSPointerEvent,mi=!!(window.PointerEvent||Zo),xa="ontouchstart"in window||!!window.TouchEvent,qo=!window.L_NO_TOUCH&&(xa||mi),Dr=Ns&&_t,au=Ns&&ws,_a=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ou=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",x,l),window.removeEventListener("testPassiveEventSupport",x,l)}catch{}return s}(),js=function(){return!!document.createElement("canvas").getContext}(),wa=!!(document.createElementNS&&fi("svg").createSVGRect),Ft=!!wa&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),lu=!wa&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Ts=navigator.platform.indexOf("Mac")===0,Es=navigator.platform.indexOf("Linux")===0;function In(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var fe={ie:fa,ielt9:eu,edge:ma,webkit:pa,android:tu,android23:ga,androidStock:nu,opera:_t,chrome:Rt,gecko:ws,safari:ru,phantom:Wo,opera12:iu,win:bs,ie3d:Ho,webkit3d:ya,gecko3d:va,any3d:mf,mobile:Ns,mobileWebkit:$o,mobileWebkit3d:su,msPointer:Zo,pointer:mi,touch:qo,touchNative:xa,mobileOpera:Dr,mobileGecko:au,retina:_a,passiveEvents:ou,canvas:js,svg:wa,vml:lu,inlineSvg:Ft,mac:Ts,linux:Es},Or=fe.msPointer?"MSPointerDown":"pointerdown",cu=fe.msPointer?"MSPointerMove":"pointermove",uu=fe.msPointer?"MSPointerUp":"pointerup",ks=fe.msPointer?"MSPointerCancel":"pointercancel",ba={touchstart:Or,touchmove:cu,touchend:uu,touchcancel:ks},Na={touchstart:Ta,touchmove:ja,touchend:ja,touchcancel:ja},qn={},Kn=!1;function du(s,l,d){return l==="touchstart"&&fu(),Na[l]?(d=Na[l].bind(this,d),s.addEventListener(ba[l],d,!1),d):(console.warn("wrong event specified:",l),x)}function hu(s,l,d){if(!ba[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(ba[l],d,!1)}function Ko(s){qn[s.pointerId]=s}function Go(s){qn[s.pointerId]&&(qn[s.pointerId]=s)}function Qo(s){delete qn[s.pointerId]}function fu(){Kn||(document.addEventListener(Or,Ko,!0),document.addEventListener(cu,Go,!0),document.addEventListener(uu,Qo,!0),document.addEventListener(ks,Qo,!0),Kn=!0)}function ja(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in qn)l.touches.push(qn[d]);l.changedTouches=[l],s(l)}}function Ta(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&it(l),ja(s,l)}function mu(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Jo=200;function Ps(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(b){if(b.detail!==1){p=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var U=cl(b);if(!(U.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!U.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var Z=Date.now();Z-d<=Jo?(p++,p===2&&l(mu(b))):p=1,d=Z}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Mr(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Ss=Fr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Is=Fr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Yo=Is==="webkitTransition"||Is==="OTransition"?Is+"End":"transitionend";function Xo(s){return typeof s=="string"?document.getElementById(s):s}function pi(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Le(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function qe(s){var l=s.parentNode;l&&l.removeChild(s)}function Cs(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Vr(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function gi(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function el(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=Cn(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function Se(s,l){if(s.classList!==void 0)for(var d=M(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!el(s,l)){var b=Cn(s);tl(s,(b?b+" ":"")+l)}}function Xe(s,l){s.classList!==void 0?s.classList.remove(l):tl(s,R((" "+Cn(s)+" ").replace(" "+l+" "," ")))}function tl(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Cn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function ht(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Ea(s,l)}function Ea(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Fr(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function cr(s,l,d){var p=l||new G(0,0);s.style[Ss]=(fe.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function je(s,l){s._leaflet_pos=l,fe.any3d?cr(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function An(s){return s._leaflet_pos||new G(0,0)}var Gn,Qn,nl;if("onselectstart"in document)Gn=function(){ve(window,"selectstart",it)},Qn=function(){$e(window,"selectstart",it)};else{var yi=Fr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Gn=function(){if(yi){var s=document.documentElement.style;nl=s[yi],s[yi]="none"}},Qn=function(){yi&&(document.documentElement.style[yi]=nl,nl=void 0)}}function rl(){ve(window,"dragstart",it)}function il(){$e(window,"dragstart",it)}var ka,sl;function Ur(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(vn(),ka=s,sl=s.style.outlineStyle,s.style.outlineStyle="none",ve(window,"keydown",vn))}function vn(){ka&&(ka.style.outlineStyle=sl,ka=void 0,sl=void 0,$e(window,"keydown",vn))}function al(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Pa(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var pu={__proto__:null,TRANSFORM:Ss,TRANSITION:Is,TRANSITION_END:Yo,get:Xo,getStyle:pi,create:Le,remove:qe,empty:Cs,toFront:Vr,toBack:gi,hasClass:el,addClass:Se,removeClass:Xe,setClass:tl,getClass:Cn,setOpacity:ht,testProp:Fr,setTransform:cr,setPosition:je,getPosition:An,get disableTextSelection(){return Gn},get enableTextSelection(){return Qn},disableImageDrag:rl,enableImageDrag:il,preventOutline:Ur,restoreOutline:vn,getSizedParentNode:al,getScale:Pa};function ve(s,l,d,p){if(l&&typeof l=="object")for(var v in l)ol(s,v,l[v],d);else{l=M(l);for(var b=0,U=l.length;b<U;b++)ol(s,l[b],d,p)}return this}var Rn="_leaflet_events";function $e(s,l,d,p){if(arguments.length===1)gu(s),delete s[Rn];else if(l&&typeof l=="object")for(var v in l)ll(s,v,l[v],d);else if(l=M(l),arguments.length===2)gu(s,function(Z){return H(l,Z)!==-1});else for(var b=0,U=l.length;b<U;b++)ll(s,l[b],d,p);return this}function gu(s,l){for(var d in s[Rn]){var p=d.split(/\d/)[0];(!l||l(p))&&ll(s,p,null,null,d)}}var zn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ol(s,l,d,p){var v=l+f(d)+(p?"_"+f(p):"");if(s[Rn]&&s[Rn][v])return this;var b=function(Z){return d.call(p||s,Z||window.event)},U=b;!fe.touchNative&&fe.pointer&&l.indexOf("touch")===0?b=du(s,l,b):fe.touch&&l==="dblclick"?b=Ps(s,b):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(zn[l]||l,b,fe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(b=function(Z){Z=Z||window.event,ul(s,Z)&&U(Z)},s.addEventListener(zn[l],b,!1)):s.addEventListener(l,U,!1):s.attachEvent("on"+l,b),s[Rn]=s[Rn]||{},s[Rn][v]=b}function ll(s,l,d,p,v){v=v||l+f(d)+(p?"_"+f(p):"");var b=s[Rn]&&s[Rn][v];if(!b)return this;!fe.touchNative&&fe.pointer&&l.indexOf("touch")===0?hu(s,l,b):fe.touch&&l==="dblclick"?Mr(s,b):"removeEventListener"in s?s.removeEventListener(zn[l]||l,b,!1):s.detachEvent("on"+l,b),s[Rn][v]=null}function Ln(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function vi(s){return ol(s,"wheel",Ln),this}function xi(s){return ve(s,"mousedown touchstart dblclick contextmenu",Ln),s._leaflet_disable_click=!0,this}function it(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function xn(s){return it(s),Ln(s),this}function cl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Sa(s,l){if(!l)return new G(s.clientX,s.clientY);var d=Pa(l),p=d.boundingClientRect;return new G((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var et=fe.linux&&fe.chrome?window.devicePixelRatio:fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yu(s){return fe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/et:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ul(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var vu={__proto__:null,on:ve,off:$e,stopPropagation:Ln,disableScrollPropagation:vi,disableClickPropagation:xi,preventDefault:it,stop:xn,getPropagationPath:cl,getMousePosition:Sa,getWheelDelta:yu,isExternalTarget:ul,addListener:ve,removeListener:$e},dl=se.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=An(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),je(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Re=se.extend({options:{crs:dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=C(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(be(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Is&&fe.any3d&&!fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ve(this._proxy,Yo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(be(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=i({animate:d.animate},d.zoom),d.pan=i({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),b=s instanceof G?s:this.latLngToContainerPoint(s),U=b.subtract(v).multiplyBy(1-1/p),Z=this.containerPointToLatLng(v.add(U));return this.setView(Z,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Ie(s);var d=W(l.paddingTopLeft||l.padding||[0,0]),p=W(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var b=p.subtract(d).divideBy(2),U=this.project(s.getSouthWest(),v),Z=this.project(s.getNorthEast(),v),q=this.unproject(U.add(Z).divideBy(2).add(b),v);return{center:q,zoom:v}},fitBounds:function(s,l){if(s=Ie(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=W(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new dl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Se(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!fe.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),b=this.getSize(),U=this._zoom;s=be(s),l=l===void 0?U:l;var Z=Math.max(b.x,b.y),q=Z*this.getZoomScale(U,l),Y=v.distanceTo(p)||1,ae=1.42,xe=ae*ae;function Ae(bt){var zu=bt?-1:1,xT=bt?q:Z,_T=q*q-Z*Z+zu*xe*xe*Y*Y,wT=2*xT*xe*Y,wf=_T/wT,mv=Math.sqrt(wf*wf+1)-wf,bT=mv<1e-9?-18:Math.log(mv);return bT}function nn(bt){return(Math.exp(bt)-Math.exp(-bt))/2}function Lt(bt){return(Math.exp(bt)+Math.exp(-bt))/2}function On(bt){return nn(bt)/Lt(bt)}var un=Ae(0);function Ba(bt){return Z*(Lt(un)/Lt(un+ae*bt))}function pT(bt){return Z*(Lt(un)*On(un+ae*bt)-nn(un))/xe}function gT(bt){return 1-Math.pow(1-bt,1.5)}var yT=Date.now(),hv=(Ae(1)-un)/ae,vT=d.duration?1e3*d.duration:1e3*hv*.8;function fv(){var bt=(Date.now()-yT)/vT,zu=gT(bt)*hv;bt<=1?(this._flyToFrame=E(fv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(pT(zu)/Y)),U),this.getScaleZoom(Z/Ba(zu),U),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),fv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Ie(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Ie(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=W(l.paddingTopLeft||l.padding||[0,0]),p=W(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),b=this.project(s),U=this.getPixelBounds(),Z=he([U.min.add(d),U.max.subtract(p)]),q=Z.getSize();if(!Z.contains(b)){this._enforcingBounds=!0;var Y=b.subtract(Z.getCenter()),ae=Z.extend(b).getSize().subtract(q);v.x+=Y.x<0?-ae.x:ae.x,v.y+=Y.y<0?-ae.y:ae.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),b=p.subtract(v);return!b.x&&!b.y?this:(s.animate&&s.pan?this.panBy(b):(s.pan&&this._rawPanBy(b),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),d=c(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Te(l,d),v=p.toBounds(s.coords.accuracy*2),b=this._locateOptions;if(b.setView){var U=this.getBoundsZoom(v);this.setView(p,b.maxZoom?Math.min(U,b.maxZoom):U)}var Z={latlng:p,bounds:v,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&(Z[q]=s.coords[q]);this.fire("locationfound",Z)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)qe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Le("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Ne(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Ie(s),d=W(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),b=this.getMaxZoom(),U=s.getNorthWest(),Z=s.getSouthEast(),q=this.getSize().subtract(d),Y=he(this.project(Z,p),this.project(U,p)).getSize(),ae=fe.any3d?this.options.zoomSnap:1,xe=q.x/Y.x,Ae=q.y/Y.y,nn=l?Math.max(xe,Ae):Math.min(xe,Ae);return p=this.getScaleZoom(nn,p),ae&&(p=Math.round(p/(ae/100))*(ae/100),p=l?Math.ceil(p/ae)*ae:Math.floor(p/ae)*ae),Math.max(v,Math.min(b,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new te(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(be(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(W(s),l)},layerPointToLatLng:function(s){var l=W(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(be(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(be(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ie(s))},distance:function(s,l){return this.options.crs.distance(be(s),be(l))},containerPointToLayerPoint:function(s){return W(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return W(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(W(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(be(s)))},mouseEventToContainerPoint:function(s){return Sa(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Xo(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ve(l,"scroll",this._onScroll,this),this._containerId=f(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&fe.any3d,Se(s,"leaflet-container"+(fe.touch?" leaflet-touch":"")+(fe.retina?" leaflet-retina":"")+(fe.ielt9?" leaflet-oldie":"")+(fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=pi(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),je(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(s.markerPane,"leaflet-zoom-hide"),Se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){je(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){je(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[f(this._container)]=this;var l=s?$e:ve;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),fe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",b=s.target||s.srcElement,U=!1;b;){if(p=this._targets[f(b)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){U=!0;break}if(p&&p.listens(l,!0)&&(v&&!ul(b,s)||(d.push(p),v))||b===this._container)break;b=b.parentNode}return!d.length&&!U&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Ur(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=i({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var b=[],U=0;U<d.length;U++)d[U].listens(l,!0)&&b.push(d[U]);v=b.concat(v)}if(v.length){l==="contextmenu"&&it(s);var Z=v[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=Z.getLatLng&&(!Z._radius||Z._radius<=10);q.containerPoint=Y?this.latLngToContainerPoint(Z.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Y?Z.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(U=0;U<v.length;U++)if(v[U].fire(l,q,!0),q.originalEvent._stopped||v[U].options.bubblingMouseEvents===!1&&H(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return An(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return he([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),b=new te(p.subtract(v),p.add(v)),U=this._getBoundsOffset(b,d,l);return Math.abs(U.x)<=1&&Math.abs(U.y)<=1?s:this.unproject(p.add(U),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new te(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=he(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),b=p.max.subtract(s.max),U=this._rebound(v.x,-b.x),Z=this._rebound(v.y,-b.y);return new G(U,Z)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=fe.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Ss,p=this._proxy.style[d];cr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();cr(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(E(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ia(s,l){return new Re(s,l)}var cn=ne.extend({options:{position:"topright"},initialize:function(s){C(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return Se(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),tn=function(s){return new cn(s)};Re.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Le("div",l+"control-container",this._container);function p(v,b){var U=l+v+" "+l+b;s[v+b]=Le("div",U,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)qe(this._controlCorners[s]);qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var hl=cn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){C(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return cn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(f(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Xe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Le("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),xi(l),vi(l);var p=this._section=Le("section",s+"-list");d&&(this._map.on("click",this.collapse,this),ve(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Le("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),ve(v,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){it(b),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Le("div",s+"-base",p),this._separator=Le("div",s+"-separator",p),this._overlaysList=Le("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&f(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(c(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cs(this._baseLayersList),Cs(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(f(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+f(this),d),this._layerControlInputs.push(p),p.layerId=f(s.layer),ve(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var b=document.createElement("span");l.appendChild(b),b.appendChild(p),b.appendChild(v);var U=s.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var b=s.length-1;b>=0;b--)l=s[b],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(b=0;b<v.length;b++)this._map.hasLayer(v[b])&&this._map.removeLayer(v[b]);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])||this._map.addLayer(p[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ve(s,"click",it),this.expand();var l=this;setTimeout(function(){$e(s,"click",it),l._preventClick=!1})}}),pf=function(s,l,d){return new hl(s,l,d)},Br=cn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Le("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var b=Le("a",d,p);return b.innerHTML=s,b.href="#",b.title=l,b.setAttribute("role","button"),b.setAttribute("aria-label",l),xi(b),ve(b,"click",xn),ve(b,"click",v,this),ve(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Xe(this._zoomInButton,l),Xe(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Re.mergeOptions({zoomControl:!0}),Re.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Br,this.addControl(this.zoomControl))});var xu=function(s){return new Br(s)},Ca=cn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Le("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Le("div",l,d)),s.imperial&&(this._iScale=Le("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Aa=function(s){return new Ca(s)},_u='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_i=cn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(fe.inlineSvg?_u+" ":"")+"Leaflet</a>"},initialize:function(s){C(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),xi(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Re.mergeOptions({attributionControl:!0}),Re.addInitHook(function(){this.options.attributionControl&&new _i().addTo(this)});var gf=function(s){return new _i(s)};cn.Layers=hl,cn.Zoom=Br,cn.Scale=Ca,cn.Attribution=_i,tn.layers=pf,tn.zoom=xu,tn.scale=Aa,tn.attribution=gf;var _n=ne.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_n.addTo=function(s,l){return s.addHandler(l,this),this};var As={Events:ie},fl=fe.touch?"touchstart mousedown":"mousedown",Jn=se.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){C(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(ve(this._dragStartTarget,fl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Jn._dragging===this&&this.finishDrag(!0),$e(this._dragStartTarget,fl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!el(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Jn._dragging===this&&this.finishDrag();return}if(!(Jn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Jn._dragging=this,this._preventOutline&&Ur(this._element),rl(),Gn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=al(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=An(this._element),this._parentScale=Pa(d);var p=s.type==="mousedown";ve(document,p?"mousemove":"touchmove",this._onMove,this),ve(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new G(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,it(s),this._moved||(this.fire("dragstart"),this._moved=!0,Se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),je(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Xe(document.body,"leaflet-dragging"),this._lastTarget&&(Xe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$e(document,"mousemove touchmove",this._onMove,this),$e(document,"mouseup touchend touchcancel",this._onUp,this),il(),Qn();var l=this._moved&&this._moving;this._moving=!1,Jn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ra(s,l,d){var p,v=[1,4,2,8],b,U,Z,q,Y,ae,xe,Ae;for(b=0,ae=s.length;b<ae;b++)s[b]._code=ur(s[b],l);for(Z=0;Z<4;Z++){for(xe=v[Z],p=[],b=0,ae=s.length,U=ae-1;b<ae;U=b++)q=s[b],Y=s[U],q._code&xe?Y._code&xe||(Ae=zt(Y,q,xe,l,d),Ae._code=ur(Ae,l),p.push(Ae)):(Y._code&xe&&(Ae=zt(Y,q,xe,l,d),Ae._code=ur(Ae,l),p.push(Ae)),p.push(q));s=p}return s}function za(s,l){var d,p,v,b,U,Z,q,Y,ae;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var xe=be([0,0]),Ae=Ie(s),nn=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());nn<1700&&(xe=La(s));var Lt=s.length,On=[];for(d=0;d<Lt;d++){var un=be(s[d]);On.push(l.project(be([un.lat-xe.lat,un.lng-xe.lng])))}for(Z=q=Y=0,d=0,p=Lt-1;d<Lt;p=d++)v=On[d],b=On[p],U=v.y*b.x-b.y*v.x,q+=(v.x+b.x)*U,Y+=(v.y+b.y)*U,Z+=U*3;Z===0?ae=On[0]:ae=[q/Z,Y/Z];var Ba=l.unproject(W(ae));return be([Ba.lat+xe.lat,Ba.lng+xe.lng])}function La(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var b=be(s[v]);l+=b.lat,d+=b.lng,p++}return be([l/p,d/p])}var Da={__proto__:null,clipPolygon:Ra,polygonCenter:za,centroid:La};function ml(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=bu(s,d),s=wu(s,d),s}function pl(s,l,d){return Math.sqrt(Dn(s,l,d,!0))}function Wr(s,l,d){return Dn(s,l,d)}function wu(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,Oa(s,v,l,0,d-1);var b,U=[];for(b=0;b<d;b++)v[b]&&U.push(s[b]);return U}function Oa(s,l,d,p,v){var b=0,U,Z,q;for(Z=p+1;Z<=v-1;Z++)q=Dn(s[Z],s[p],s[v],!0),q>b&&(U=Z,b=q);b>d&&(l[U]=1,Oa(s,l,d,p,U),Oa(s,l,d,U,v))}function bu(s,l){for(var d=[s[0]],p=1,v=0,b=s.length;p<b;p++)Nu(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<b-1&&d.push(s[b-1]),d}var gl;function Rs(s,l,d,p,v){var b=p?gl:ur(s,d),U=ur(l,d),Z,q,Y;for(gl=U;;){if(!(b|U))return[s,l];if(b&U)return!1;Z=b||U,q=zt(s,l,Z,d,v),Y=ur(q,d),Z===b?(s=q,b=Y):(l=q,U=Y)}}function zt(s,l,d,p,v){var b=l.x-s.x,U=l.y-s.y,Z=p.min,q=p.max,Y,ae;return d&8?(Y=s.x+b*(q.y-s.y)/U,ae=q.y):d&4?(Y=s.x+b*(Z.y-s.y)/U,ae=Z.y):d&2?(Y=q.x,ae=s.y+U*(q.x-s.x)/b):d&1&&(Y=Z.x,ae=s.y+U*(Z.x-s.x)/b),new G(Y,ae,v)}function ur(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function Nu(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Dn(s,l,d,p){var v=l.x,b=l.y,U=d.x-v,Z=d.y-b,q=U*U+Z*Z,Y;return q>0&&(Y=((s.x-v)*U+(s.y-b)*Z)/q,Y>1?(v=d.x,b=d.y):Y>0&&(v+=U*Y,b+=Z*Y)),U=s.x-v,Z=s.y-b,p?U*U+Z*Z:new G(v,b)}function u(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function g(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function _(s,l){var d,p,v,b,U,Z,q,Y;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ae=be([0,0]),xe=Ie(s),Ae=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());Ae<1700&&(ae=La(s));var nn=s.length,Lt=[];for(d=0;d<nn;d++){var On=be(s[d]);Lt.push(l.project(be([On.lat-ae.lat,On.lng-ae.lng])))}for(d=0,p=0;d<nn-1;d++)p+=Lt[d].distanceTo(Lt[d+1])/2;if(p===0)Y=Lt[0];else for(d=0,b=0;d<nn-1;d++)if(U=Lt[d],Z=Lt[d+1],v=U.distanceTo(Z),b+=v,b>p){q=(b-p)/v,Y=[Z.x-q*(Z.x-U.x),Z.y-q*(Z.y-U.y)];break}var un=l.unproject(W(Y));return be([un.lat+ae.lat,un.lng+ae.lng])}var T={__proto__:null,simplify:ml,pointToSegmentDistance:pl,closestPointOnSegment:Wr,clipSegment:Rs,_getEdgeIntersection:zt,_getBitCode:ur,_sqClosestPointOnSegment:Dn,isFlat:u,_flat:g,polylineCenter:_},$={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new Te(s.y,s.x)},bounds:new te([-180,-90],[180,90])},K={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,b=Math.sqrt(1-v*v),U=b*Math.sin(p),Z=Math.tan(Math.PI/4-p/2)/Math.pow((1-U)/(1+U),b/2);return p=-d*Math.log(Math.max(Z,1e-10)),new G(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),b=Math.exp(-s.y/d),U=Math.PI/2-2*Math.atan(b),Z=0,q=.1,Y;Z<15&&Math.abs(q)>1e-7;Z++)Y=v*Math.sin(U),Y=Math.pow((1-Y)/(1+Y),v/2),q=Math.PI/2-2*Math.atan(b*Y)-U,U+=q;return new Te(U*l,s.x*l/d)}},re={__proto__:null,LonLat:$,Mercator:K,SphericalMercator:Q},We=i({},Pe,{code:"EPSG:3395",projection:K,transformation:function(){var s=.5/(Math.PI*K.R);return Ue(s,.5,-s,.5)}()}),wt=i({},Pe,{code:"EPSG:4326",projection:$,transformation:Ue(1/180,1,-1/180,.5)}),Me=i({},nt,{projection:$,transformation:Ue(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});nt.Earth=Pe,nt.EPSG3395=We,nt.EPSG3857=dt,nt.EPSG900913=Vt,nt.EPSG4326=wt,nt.Simple=Me;var Ze=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[f(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[f(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Re.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=f(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=f(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return f(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[f(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=f(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var st=Ze.extend({initialize:function(s,l){C(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return f(s)}}),wi=function(s,l){return new st(s,l)},gt=st.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),st.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),st.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ne;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),Ma=function(s,l){return new gt(s,l)},dr=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){C(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=W(p),b=W(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),b&&(s.style.marginLeft=-b.x+"px",s.style.marginTop=-b.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return fe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Qj(s){return new dr(s)}var yl=dr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof yl.imagePath!="string"&&(yl.imagePath=this._detectIconPath()),(this.options.imagePath||yl.imagePath)+dr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var b=p.exec(d);return b&&b[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Le("div","leaflet-default-icon-path",document.body),l=pi(s,"background-image")||pi(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),qy=_n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Jn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,b=An(l._icon),U=d.getPixelBounds(),Z=d.getPixelOrigin(),q=he(U.min._subtract(Z).add(v),U.max._subtract(Z).subtract(v));if(!q.contains(b)){var Y=W((Math.max(q.max.x,b.x)-q.max.x)/(U.max.x-q.max.x)-(Math.min(q.min.x,b.x)-q.min.x)/(U.min.x-q.min.x),(Math.max(q.max.y,b.y)-q.max.y)/(U.max.y-q.max.y)-(Math.min(q.min.y,b.y)-q.min.y)/(U.min.y-q.min.y)).multiplyBy(p);d.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),je(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=E(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=An(l._icon),v=l._map.layerPointToLatLng(p);d&&je(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),ju=Ze.extend({options:{icon:new yl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){C(this,l),this._latlng=be(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=be(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),Se(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),b=!1;v!==this._shadow&&(this._removeShadow(),b=!0),v&&(Se(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&b&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(this._icon,"focus",this._panOnFocus,this),qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&je(this._icon,s),this._shadow&&je(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),qy)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new qy(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&ht(this._icon,s),this._shadow&&ht(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?W(l.iconSize):W(0,0),p=l.iconAnchor?W(l.iconAnchor):W(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Jj(s,l){return new ju(s,l)}var bi=Ze.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return C(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Tu=bi.extend({options:{fill:!0,radius:10},initialize:function(s,l){C(this,l),this._latlng=be(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=be(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return bi.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new te(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Yj(s,l){return new Tu(s,l)}var yf=Tu.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=i({},d,{radius:l})),C(this,l),this._latlng=be(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ne(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:bi.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Pe.distance){var v=Math.PI/180,b=this._mRadius/Pe.R/v,U=d.project([l+b,s]),Z=d.project([l-b,s]),q=U.add(Z).divideBy(2),Y=d.unproject(q).lat,ae=Math.acos((Math.cos(b*v)-Math.sin(l*v)*Math.sin(Y*v))/(Math.cos(l*v)*Math.cos(Y*v)))/v;(isNaN(ae)||ae===0)&&(ae=b/Math.cos(Math.PI/180*l)),this._point=q.subtract(d.getPixelOrigin()),this._radius=isNaN(ae)?0:q.x-d.project([Y,s-ae]).x,this._radiusY=q.y-U.y}else{var xe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(xe).x}this._updateBounds()}});function Xj(s,l,d){return new yf(s,l,d)}var Hr=bi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){C(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Dn,v,b,U=0,Z=this._parts.length;U<Z;U++)for(var q=this._parts[U],Y=1,ae=q.length;Y<ae;Y++){v=q[Y-1],b=q[Y];var xe=p(s,v,b,!0);xe<l&&(l=xe,d=p(s,v,b))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=be(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ne,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=u(s),p=0,v=s.length;p<v;p++)d?(l[p]=be(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Te,v=s.length,b,U;if(p){for(U=[],b=0;b<v;b++)U[b]=this._map.latLngToLayerPoint(s[b]),d.extend(U[b]);l.push(U)}else for(b=0;b<v;b++)this._projectLatlngs(s[b],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,b,U,Z,q;for(d=0,v=0,b=this._rings.length;d<b;d++)for(q=this._rings[d],p=0,U=q.length;p<U-1;p++)Z=Rs(q[p],q[p+1],s,p,!0),Z&&(l[v]=l[v]||[],l[v].push(Z[0]),(Z[1]!==q[p+1]||p===U-2)&&(l[v].push(Z[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=ml(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,b,U,Z,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,b=this._parts.length;d<b;d++)for(Z=this._parts[d],p=0,U=Z.length,v=U-1;p<U;v=p++)if(!(!l&&p===0)&&pl(s,Z[v],Z[p])<=q)return!0;return!1}});function eT(s,l){return new Hr(s,l)}Hr._flat=g;var Va=Hr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return za(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Hr.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Te&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Hr.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new G(l,l);if(s=new te(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,b;p<v;p++)b=Ra(this._rings[p],s,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,b,U,Z,q,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(b=0,q=this._parts.length;b<q;b++)for(d=this._parts[b],U=0,Y=d.length,Z=Y-1;U<Y;Z=U++)p=d[U],v=d[Z],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Hr.prototype._containsPoint.call(this,s,!0)}});function tT(s,l){return new Va(s,l)}var $r=gt.extend({initialize:function(s,l){C(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var b=this.options;if(b.filter&&!b.filter(s))return this;var U=Eu(s,b);return U?(U.feature=Su(s),U.defaultOptions=U.options,this.resetStyle(U),b.onEachFeature&&b.onEachFeature(s,U),this.addLayer(U)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Eu(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],b=l&&l.pointToLayer,U=l&&l.coordsToLatLng||vf,Z,q,Y,ae;if(!p&&!d)return null;switch(d.type){case"Point":return Z=U(p),Ky(b,s,Z,l);case"MultiPoint":for(Y=0,ae=p.length;Y<ae;Y++)Z=U(p[Y]),v.push(Ky(b,s,Z,l));return new gt(v);case"LineString":case"MultiLineString":return q=ku(p,d.type==="LineString"?0:1,U),new Hr(q,l);case"Polygon":case"MultiPolygon":return q=ku(p,d.type==="Polygon"?1:2,U),new Va(q,l);case"GeometryCollection":for(Y=0,ae=d.geometries.length;Y<ae;Y++){var xe=Eu({geometry:d.geometries[Y],type:"Feature",properties:s.properties},l);xe&&v.push(xe)}return new gt(v);case"FeatureCollection":for(Y=0,ae=d.features.length;Y<ae;Y++){var Ae=Eu(d.features[Y],l);Ae&&v.push(Ae)}return new gt(v);default:throw new Error("Invalid GeoJSON object.")}}function Ky(s,l,d,p){return s?s(l,d):new ju(d,p&&p.markersInheritOptions&&p)}function vf(s){return new Te(s[1],s[0],s[2])}function ku(s,l,d){for(var p=[],v=0,b=s.length,U;v<b;v++)U=l?ku(s[v],l-1,d):(d||vf)(s[v]),p.push(U);return p}function xf(s,l){return s=be(s),s.alt!==void 0?[w(s.lng,l),w(s.lat,l),w(s.alt,l)]:[w(s.lng,l),w(s.lat,l)]}function Pu(s,l,d,p){for(var v=[],b=0,U=s.length;b<U;b++)v.push(l?Pu(s[b],u(s[b])?0:l-1,d,p):xf(s[b],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function Fa(s,l){return s.feature?i({},s.feature,{geometry:l}):Su(l)}function Su(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var _f={toGeoJSON:function(s){return Fa(this,{type:"Point",coordinates:xf(this.getLatLng(),s)})}};ju.include(_f),yf.include(_f),Tu.include(_f),Hr.include({toGeoJSON:function(s){var l=!u(this._latlngs),d=Pu(this._latlngs,l?1:0,!1,s);return Fa(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Va.include({toGeoJSON:function(s){var l=!u(this._latlngs),d=l&&!u(this._latlngs[0]),p=Pu(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Fa(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),st.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Fa(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var b=v.toGeoJSON(s);if(d)p.push(b.geometry);else{var U=Su(b);U.type==="FeatureCollection"?p.push.apply(p,U.features):p.push(U)}}}),d?Fa(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Gy(s,l){return new $r(s,l)}var nT=Gy,Iu=Ze.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Ie(l),C(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Vr(this._image),this},bringToBack:function(){return this._map&&gi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ie(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Le("img");if(Se(l,"leaflet-image-layer"),this._zoomAnimated&&Se(l,"leaflet-zoom-animated"),this.options.className&&Se(l,this.options.className),l.onselectstart=x,l.onmousemove=x,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;cr(this._image,d,l)},_reset:function(){var s=this._image,l=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();je(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){ht(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),rT=function(s,l,d){return new Iu(s,l,d)},Qy=Iu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Le("video");if(Se(l,"leaflet-image-layer"),this._zoomAnimated&&Se(l,"leaflet-zoom-animated"),this.options.className&&Se(l,this.options.className),l.onselectstart=x,l.onmousemove=x,l.onloadeddata=c(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var U=Le("source");U.src=this._url[b],l.appendChild(U)}}});function iT(s,l,d){return new Qy(s,l,d)}var Jy=Iu.extend({_initImage:function(){var s=this._image=this._url;Se(s,"leaflet-image-layer"),this._zoomAnimated&&Se(s,"leaflet-zoom-animated"),this.options.className&&Se(s,this.options.className),s.onselectstart=x,s.onmousemove=x}});function sT(s,l,d){return new Jy(s,l,d)}var hr=Ze.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Te||S(s))?(this._latlng=be(s),C(this,l)):(C(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&ht(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&ht(this._container,1),this.bringToFront(),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(ht(this._container,0),this._removeTimeout=setTimeout(c(qe,void 0,this._container),200)):qe(this._container),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=be(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Vr(this._container),this},bringToBack:function(){return this._map&&gi(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof gt){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=W(this.options.offset),d=this._getAnchor();this._zoomAnimated?je(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Re.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),Ze.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(C(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var Cu=hr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,hr.prototype.openOn.call(this,s)},onAdd:function(s){hr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bi||this._source.on("preclick",Ln))},onRemove:function(s){hr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bi||this._source.off("preclick",Ln))},getEvents:function(){var s=hr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Le("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Le("div",s+"-content-wrapper",l);if(this._contentNode=Le("div",s+"-content",d),xi(l),vi(this._contentNode),ve(l,"contextmenu",Ln),this._tipContainer=Le("div",s+"-tip-container",l),this._tip=Le("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Le("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ve(p,"click",function(v){it(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,b="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",Se(s,b)):Xe(s,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();je(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(pi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new G(this._containerLeft,-d-this._containerBottom);v._add(An(this._container));var b=s.layerPointToContainerPoint(v),U=W(this.options.autoPanPadding),Z=W(this.options.autoPanPaddingTopLeft||U),q=W(this.options.autoPanPaddingBottomRight||U),Y=s.getSize(),ae=0,xe=0;b.x+p+q.x>Y.x&&(ae=b.x+p-Y.x+q.x),b.x-ae-Z.x<0&&(ae=b.x-Z.x),b.y+d+q.y>Y.y&&(xe=b.y+d-Y.y+q.y),b.y-xe-Z.y<0&&(xe=b.y-Z.y),(ae||xe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ae,xe]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),aT=function(s,l){return new Cu(s,l)};Re.mergeOptions({closePopupOnClick:!0}),Re.include({openPopup:function(s,l,d){return this._initOverlay(Cu,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ze.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Cu,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof gt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){xn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof bi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Au=hr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){hr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){hr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=hr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,b=p.latLngToContainerPoint(p.getCenter()),U=p.layerPointToContainerPoint(s),Z=this.options.direction,q=v.offsetWidth,Y=v.offsetHeight,ae=W(this.options.offset),xe=this._getAnchor();Z==="top"?(l=q/2,d=Y):Z==="bottom"?(l=q/2,d=0):Z==="center"?(l=q/2,d=Y/2):Z==="right"?(l=0,d=Y/2):Z==="left"?(l=q,d=Y/2):U.x<b.x?(Z="right",l=0,d=Y/2):(Z="left",l=q+(ae.x+xe.x)*2,d=Y/2),s=s.subtract(W(l,d,!0)).add(ae).add(xe),Xe(v,"leaflet-tooltip-right"),Xe(v,"leaflet-tooltip-left"),Xe(v,"leaflet-tooltip-top"),Xe(v,"leaflet-tooltip-bottom"),Se(v,"leaflet-tooltip-"+Z),je(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&ht(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),oT=function(s,l){return new Au(s,l)};Re.include({openTooltip:function(s,l,d){return this._initOverlay(Au,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ze.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Au,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof gt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(ve(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ve(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Yy=dr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Cs(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=W(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function lT(s){return new Yy(s)}dr.Default=yl;var vl=Ze.extend({options:{tileSize:256,opacity:1,updateWhenIdle:fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){C(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),qe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Vr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,b;p<v;p++)b=l[p].style.zIndex,l[p]!==this._container&&b&&(d=s(d,+b));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!fe.ielt9){ht(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var b=Math.min(1,(s-v.loaded)/200);ht(v.el,b),b<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(qe(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),x(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)qe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),b=Math.floor(l/2),U=d-1,Z=new G(+v,+b);Z.z=+U;var q=this._tileCoordsToKey(Z),Y=this._tiles[q];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),U>p?this._retainParent(v,b,U,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var b=2*l;b<2*l+2;b++){var U=new G(v,b);U.z=d+1;var Z=this._tileCoordsToKey(U),q=this._tiles[Z];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);d+1<p&&this._retainChildren(v,b,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var b=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||b)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();fe.any3d?cr(s.el,v,p):je(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),b=l.getSize().divideBy(p*2);return new te(v.subtract(b),v.add(b))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),b=v.getCenter(),U=[],Z=this.options.keepBuffer,q=new te(v.getBottomLeft().subtract([Z,-Z]),v.getTopRight().add([Z,-Z]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var ae=this._tiles[Y].coords;(ae.z!==this._tileZoom||!q.contains(new G(ae.x,ae.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var xe=v.min.y;xe<=v.max.y;xe++)for(var Ae=v.min.x;Ae<=v.max.x;Ae++){var nn=new G(Ae,xe);if(nn.z=this._tileZoom,!!this._isValidTile(nn)){var Lt=this._tiles[this._tileCoordsToKey(nn)];Lt?Lt.current=!0:U.push(nn)}}if(U.sort(function(un,Ba){return un.distanceTo(b)-Ba.distanceTo(b)}),U.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var On=document.createDocumentFragment();for(Ae=0;Ae<U.length;Ae++)this._addTile(U[Ae],On);this._level.el.appendChild(On)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Ie(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),b=l.unproject(p,s.z),U=l.unproject(v,s.z);return[b,U]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Ne(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new G(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(qe(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Se(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=x,s.onmousemove=x,fe.ielt9&&this.options.opacity<1&&ht(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),c(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&E(c(this._tileReady,this,s,null,v)),je(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(ht(d.el,0),z(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(Se(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),fe.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?y(s.x,this._wrapX):s.x,this._wrapY?y(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new te(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function cT(s){return new vl(s)}var Ua=vl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=C(this,l),l.detectRetina&&fe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return ve(d,"load",c(this._tileOnLoad,this,l,d)),ve(d,"error",c(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:fe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return j(this._url,i(l,this.options))},_tileOnLoad:function(s,l){fe.ielt9?setTimeout(c(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=x,l.onerror=x,!l.complete)){l.src=F;var d=this._tiles[s].coords;qe(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",F),vl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===F))return vl.prototype._tileReady.call(this,s,l,d)}});function Xy(s,l){return new Ua(s,l)}var ev=Ua.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=i({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=C(this,l);var v=l.detectRetina&&fe.retina?2:1,b=this.getTileSize();d.width=b.x*v,d.height=b.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Ua.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=he(d.project(l[0]),d.project(l[1])),v=p.min,b=p.max,U=(this._wmsVersion>=1.3&&this._crs===wt?[v.y,v.x,b.y,b.x]:[v.x,v.y,b.x,b.y]).join(","),Z=Ua.prototype.getTileUrl.call(this,s);return Z+A(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(s,l){return i(this.wmsParams,s),l||this.redraw(),this}});function uT(s,l){return new ev(s,l)}Ua.WMS=ev,Xy.wms=uT;var Zr=Ze.extend({options:{padding:.1},initialize:function(s){C(this,s),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),b=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));fe.any3d?cr(this._container,b,d):je(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new te(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),tv=Zr.extend({options:{tolerance:0},getEvents:function(){var s=Zr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ve(s,"mousemove",this._onMouseMove,this),ve(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ve(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,qe(this._container),$e(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zr.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=fe.retina?2:1;je(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Zr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[f(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[f(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,b,U=s._parts,Z=U.length,q=this._ctx;if(Z){for(q.beginPath(),d=0;d<Z;d++){for(p=0,v=U[d].length;p<v;p++)b=U[d][p],q[p?"lineTo":"moveTo"](b.x,b.y);l&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Se(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function nv(s){return fe.canvas?new tv(s):null}var xl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dT={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=xl("shape");Se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=xl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[f(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;qe(l),s.removeInteractiveTarget(l),delete this._layers[f(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=xl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=xl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Vr(s._container)},_bringToBack:function(s){gi(s._container)}},Ru=fe.vml?xl:fi,_l=Zr.extend({_initContainer:function(){this._container=Ru("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ru("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qe(this._container),$e(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),je(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Ru("path");s.options.className&&Se(l,s.options.className),s.options.interactive&&Se(l,"leaflet-interactive"),this._updateStyle(s),this._layers[f(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){qe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[f(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Fo(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",b=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,b)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Vr(s._path)},_bringToBack:function(s){gi(s._path)}});fe.vml&&_l.include(dT);function rv(s){return fe.svg||fe.vml?new _l(s):null}Re.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&nv(s)||rv(s)}});var iv=Va.extend({initialize:function(s,l){Va.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ie(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function hT(s,l){return new iv(s,l)}_l.create=Ru,_l.pointsToPath=Fo,$r.geometryToLayer=Eu,$r.coordsToLatLng=vf,$r.coordsToLatLngs=ku,$r.latLngToCoords=xf,$r.latLngsToCoords=Pu,$r.getFeature=Fa,$r.asFeature=Su,Re.mergeOptions({boxZoom:!0});var sv=_n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Gn(),rl(),this._startPoint=this._map.mouseEventToContainerPoint(s),ve(document,{contextmenu:xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new te(this._point,this._startPoint),d=l.getSize();je(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(qe(this._box),Xe(this._container,"leaflet-crosshair")),Qn(),il(),$e(document,{contextmenu:xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new Ne(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Re.addInitHook("addHandler","boxZoom",sv),Re.mergeOptions({doubleClickZoom:!0});var av=_n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Re.addInitHook("addHandler","doubleClickZoom",av),Re.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ov=_n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Jn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xe(this._map._container,"leaflet-grab"),Xe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ie(this._map.options.maxBounds);this._offsetLimit=he(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,b=(p+l+d)%s-l-d,U=Math.abs(v+d)<Math.abs(b+d)?v:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,U=d.easeLinearity,Z=v.multiplyBy(U/b),q=Z.distanceTo([0,0]),Y=Math.min(d.inertiaMaxSpeed,q),ae=Z.multiplyBy(Y/q),xe=Y/(d.inertiaDeceleration*U),Ae=ae.multiplyBy(-xe/2).round();!Ae.x&&!Ae.y?l.fire("moveend"):(Ae=l._limitOffset(Ae,l.options.maxBounds),E(function(){l.panBy(Ae,{duration:xe,easeLinearity:U,noMoveStart:!0,animate:!0})}))}}});Re.addInitHook("addHandler","dragging",ov),Re.mergeOptions({keyboard:!0,keyboardPanDelta:80});var lv=_n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ve(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$e(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=W(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(W(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;xn(s)}}});Re.addInitHook("addHandler","keyboard",lv),Re.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var cv=_n.extend({addHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=yu(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),p),xn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,b=d?Math.ceil(v/d)*d:v,U=s._limitZoom(l+(this._delta>0?b:-b))-l;this._delta=0,this._startTime=null,U&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+U):s.setZoomAround(this._lastMousePos,l+U))}});Re.addInitHook("addHandler","scrollWheelZoom",cv);var fT=600;Re.mergeOptions({tapHold:fe.touchNative&&fe.safari&&fe.mobile,tapTolerance:15});var uv=_n.extend({addHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(ve(document,"touchend",it),ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),fT),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){$e(document,"touchend",it),$e(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Re.addInitHook("addHandler","tapHold",uv),Re.mergeOptions({touchZoom:fe.touch,bounceAtZoomLimits:!0});var dv=_n.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),it(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var b=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&b.x===0&&b.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var U=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(U,this,!0),it(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Re.addInitHook("addHandler","touchZoom",dv),Re.BoxZoom=sv,Re.DoubleClickZoom=av,Re.Drag=ov,Re.Keyboard=lv,Re.ScrollWheelZoom=cv,Re.TapHold=uv,Re.TouchZoom=dv,n.Bounds=te,n.Browser=fe,n.CRS=nt,n.Canvas=tv,n.Circle=yf,n.CircleMarker=Tu,n.Class=ne,n.Control=cn,n.DivIcon=Yy,n.DivOverlay=hr,n.DomEvent=vu,n.DomUtil=pu,n.Draggable=Jn,n.Evented=se,n.FeatureGroup=gt,n.GeoJSON=$r,n.GridLayer=vl,n.Handler=_n,n.Icon=dr,n.ImageOverlay=Iu,n.LatLng=Te,n.LatLngBounds=Ne,n.Layer=Ze,n.LayerGroup=st,n.LineUtil=T,n.Map=Re,n.Marker=ju,n.Mixin=As,n.Path=bi,n.Point=G,n.PolyUtil=Da,n.Polygon=Va,n.Polyline=Hr,n.Popup=Cu,n.PosAnimation=dl,n.Projection=re,n.Rectangle=iv,n.Renderer=Zr,n.SVG=_l,n.SVGOverlay=Jy,n.TileLayer=Ua,n.Tooltip=Au,n.Transformation=pe,n.Util=D,n.VideoOverlay=Qy,n.bind=c,n.bounds=he,n.canvas=nv,n.circle=Xj,n.circleMarker=Yj,n.control=tn,n.divIcon=lT,n.extend=i,n.featureGroup=Ma,n.geoJSON=Gy,n.geoJson=nT,n.gridLayer=cT,n.icon=Qj,n.imageOverlay=rT,n.latLng=be,n.latLngBounds=Ie,n.layerGroup=wi,n.map=Ia,n.marker=Jj,n.point=W,n.polygon=tT,n.polyline=eT,n.popup=aT,n.rectangle=hT,n.setOptions=C,n.stamp=f,n.svg=rv,n.svgOverlay=sT,n.tileLayer=Xy,n.tooltip=oT,n.transformation=Ue,n.version=r,n.videoOverlay=iT;var mT=window.L;n.noConflict=function(){return window.L=mT,this},window.L=n})})(Up,Up.exports);var ff=Up.exports;const Wj=y_(ff);function Hj(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function $j(t,e){return e==null?function(r,i){const a=V.useRef();return a.current||(a.current=t(r,i)),a}:function(r,i){const a=V.useRef();a.current||(a.current=t(r,i));const c=V.useRef(r),{instance:h}=a.current;return V.useEffect(function(){c.current!==r&&(e(h,r,c.current),c.current=r)},[h,r,i]),a}}function z5(t,e){V.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Zj(t){return function(n){const r=Uj(),i=t(Bj(n,r),r);return k5(r.map,n.attribution),R5(i.current,n.eventHandlers),z5(i.current,r),i}}function L5(t,e){const n=$j(t,e),r=Zj(n);return C5(r)}function D5(t,e){const n=$j(t,e),r=Zj(n);return A5(r)}function O5(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function qj(){return Uj().map}function M5(t){const e=qj();return V.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Bp(){return Bp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bp.apply(this,arguments)}function V5({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:a,placeholder:c,style:h,whenReady:f,zoom:m,...y},x){const[w]=V.useState({className:i,id:a,style:h}),[R,M]=V.useState(null);V.useImperativeHandle(x,()=>(R==null?void 0:R.map)??null,[R]);const C=V.useCallback(P=>{if(P!==null&&R===null){const j=new ff.Map(P,y);n!=null&&m!=null?j.setView(n,m):t!=null&&j.fitBounds(t,e),f!=null&&j.whenReady(f),M(S5(j))}},[]);V.useEffect(()=>()=>{R==null||R.map.remove()},[R]);const A=R?ic.createElement(Fj,{value:R},r):c??null;return ic.createElement("div",Bp({},w,{ref:C}),A)}const F5=V.forwardRef(V5),U5=L5(function({position:e,...n},r){const i=new ff.Marker(e,n);return Hj(i,I5(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),B5=D5(function({url:e,...n},r){const i=new ff.TileLayer(e,Bj(n,r));return Hj(i,r)},function(e,n,r){O5(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});delete Wj.Icon.Default.prototype._getIconUrl;Wj.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const W5=({onLocationSelect:t})=>(M5({click:e=>{t(e.latlng.lat,e.latlng.lng)}}),null),H5=({lat:t,lng:e})=>{const n=qj();return V.useEffect(()=>{n.setView([t,e],16)},[t,e,n]),null},$5=()=>{var rt;const t=hi(),{isAuthenticated:e,user:n}=Zn(),{showToast:r}=Lr(),[i,a]=V.useState(1),[c,h]=V.useState(!1),[f,m]=V.useState(null),[y,x]=V.useState(null),[w,R]=V.useState(""),[M,C]=V.useState(!1),[A,P]=V.useState([]),[j,S]=V.useState(!1),H=V.useRef(null),[F,B]=V.useState({businessName:"",profession:"",description:"",experience:"",location:{city:"",district:"",address:"",postalCode:"",lat:52.2297,lng:21.0122},services:[],features:[],workingHours:{monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"10:00",to:"14:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!1}},image:"",category:"",travelRadius:10}),[I,N]=V.useState({name:"",price:0,duration:"30 min",description:""}),[O,k]=V.useState(""),[E,z]=V.useState([52.2297,21.0122]),D=async Q=>{if(!Q||Q.length<3){P([]),S(!1);return}C(!0);try{const Ue=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(Q)}&countrycodes=pl&addressdetails=1&limit=5`,{headers:{"Accept-Language":"pl"}})).json();P(Ue),S(!0)}catch(pe){console.error("Bd wyszukiwania:",pe)}finally{C(!1)}},ne=Q=>{R(Q),H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{D(Q)},500)},ue=Q=>{const pe=parseFloat(Q.lat),Ue=parseFloat(Q.lon),dt=Q.address;z([pe,Ue]),B(Vt=>({...Vt,location:{city:dt.city||dt.town||dt.village||"",district:dt.suburb||dt.neighbourhood||"",address:`${dt.road||""}${dt.house_number?" "+dt.house_number:""}`.trim(),postalCode:dt.postcode||"",lat:pe,lng:Ue}})),S(!1),R(Q.display_name.split(",")[0])},ie=async(Q,pe)=>{try{const Vt=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Q}&lon=${pe}&addressdetails=1`,{headers:{"Accept-Language":"pl"}})).json()).address;B(fi=>({...fi,location:{city:Vt.city||Vt.town||Vt.village||"",district:Vt.suburb||Vt.neighbourhood||"",address:`${Vt.road||""}${Vt.house_number?" "+Vt.house_number:""}`.trim(),postalCode:Vt.postcode||"",lat:Q,lng:pe}}))}catch(Ue){console.error("Bd reverse geocoding:",Ue)}},se=(Q,pe)=>{z([Q,pe]),ie(Q,pe)},G=Q=>{var Ue;const pe=(Ue=Q.target.files)==null?void 0:Ue[0];if(pe){if(!pe.type.startsWith("image/")){r("Wybierz plik graficzny","error");return}if(pe.size>5*1024*1024){r("Plik za duy (max 5MB)","error");return}x(pe);const dt=new FileReader;dt.onloadend=()=>m(dt.result),dt.readAsDataURL(pe)}},de=()=>{x(null),m(null)},W=()=>{if(!I.name||I.price<=0){r("Podaj nazw i cen usugi","error");return}const Q={id:Date.now().toString(),...I};B(pe=>({...pe,services:[...pe.services,Q]})),N({name:"",price:0,duration:"30 min",description:""}),r("Usuga dodana!","success")},te=Q=>{B(pe=>({...pe,services:pe.services.filter(Ue=>Ue.id!==Q)}))},he=Q=>{Q.trim()&&(F.features.includes(Q)||(B(pe=>({...pe,features:[...pe.features,Q]})),k("")))},Ne=Q=>{B(pe=>({...pe,features:pe.features.filter(Ue=>Ue!==Q)}))},Ie=async()=>{if(!e){r("Musisz by zalogowany","error"),t("/auth?redirect=/biznes/dodaj-usluge");return}if(!F.businessName){r("Podaj nazw firmy","error"),a(1);return}if(!F.category){r("Wybierz kategori","error"),a(1);return}if(!F.location.city){r("Podaj lokalizacj","error"),a(2);return}if(F.services.length===0){r("Dodaj przynajmniej jedn usug","error"),a(3);return}h(!0);try{const Q=JSON.parse(localStorage.getItem("localProviders")||"[]"),pe={id:Date.now(),ownerId:n==null?void 0:n.id,name:F.businessName,profession:F.profession,category:F.category,description:F.description,location:`${F.location.city}${F.location.district?", "+F.location.district:""}`,locationData:F.location,services:F.services.map(Ue=>Ue.name),servicesData:F.services,features:F.features,priceFrom:Math.min(...F.services.map(Ue=>Ue.price)),image:f||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",isPremium:!1,isAvailableToday:!0,rating:0,reviewsCount:0,distance:"0 km",workingHours:F.workingHours,travelRadius:F.travelRadius,createdAt:new Date().toISOString()};Q.push(pe),localStorage.setItem("localProviders",JSON.stringify(Q)),r(" Usuga dodana pomylnie!","success"),t("/biznes/uslugi")}catch{r("Bd podczas zapisywania","error")}finally{h(!1)}},Te=[{id:"fryzjer",name:"Fryzjer / Barber",icon:""},{id:"paznokcie",name:"Paznokcie / Manicure",icon:""},{id:"masaz",name:"Masa",icon:""},{id:"makijaz",name:"Makija",icon:""},{id:"tatuaze",name:"Tatuae",icon:""},{id:"kosmetyka",name:"Kosmetyka / Twarz",icon:""},{id:"inne",name:"Inne usugi",icon:""}],be=["15 min","30 min","45 min","1h","1h 30min","2h","2h 30min","3h"],nt=["Dojazd do klienta","Produkty premium","Konsultacja gratis","Parking","WiFi","Klimatyzacja","Patno kart","Rezerwacja online"],Pe=[{number:1,title:"Podstawowe info",icon:h_},{number:2,title:"Lokalizacja",icon:Ji},{number:3,title:"Usugi i ceny",icon:sa},{number:4,title:"Szczegy",icon:Lp}];return o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-gray-600 hover:text-emerald-600 mb-4 transition-colors",children:[o.jsx(vh,{className:"w-5 h-5"}),"Wr"]}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dodaj now usug"}),o.jsx("p",{className:"text-gray-600",children:"Stwrz profil swojej usugi i zacznij przyjmowa klientw"})]}),o.jsx("div",{className:"flex items-center justify-between mb-8 bg-white rounded-2xl p-4 shadow-sm",children:Pe.map((Q,pe)=>o.jsxs("div",{className:"flex items-center",children:[o.jsxs("button",{onClick:()=>a(Q.number),className:`flex items-center gap-3 px-4 py-2 rounded-xl transition-all ${i===Q.number?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":i>Q.number?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:[o.jsx(Q.icon,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden sm:inline font-medium",children:Q.title})]}),pe<Pe.length-1&&o.jsx("div",{className:`w-8 lg:w-16 h-1 mx-2 rounded ${i>Q.number?"bg-green-400":"bg-gray-200"}`})]},Q.number))}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[i===1&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(h_,{className:"w-6 h-6 text-emerald-500"}),"Podstawowe informacje"]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nazwa firmy / salonu ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:F.businessName,onChange:Q=>B({...F,businessName:Q.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kategoria ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Te.map(Q=>o.jsxs("button",{type:"button",onClick:()=>B({...F,category:Q.id}),className:`p-4 rounded-xl border-2 text-center transition-all ${F.category===Q.id?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-gray-300"}`,children:[o.jsx("span",{className:"text-2xl mb-2 block",children:Q.icon}),o.jsx("span",{className:"text-sm font-medium",children:Q.name})]},Q.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tytu zawodowy"}),o.jsx("input",{type:"text",value:F.profession,onChange:Q=>B({...F,profession:Q.target.value}),placeholder:"np. Mistrz Fryzjerstwa",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zdjcie profilowe"}),f?o.jsxs("div",{className:"relative inline-block",children:[o.jsx("img",{src:f,alt:"Podgld",className:"w-48 h-48 object-cover rounded-xl shadow-md"}),o.jsx("button",{type:"button",onClick:de,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:o.jsx(ds,{className:"w-4 h-4"})})]}):o.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-emerald-500 hover:bg-emerald-50 transition-all",children:[o.jsx(a5,{className:"w-10 h-10 mb-3 text-gray-400"}),o.jsx("p",{className:"text-sm text-gray-500",children:o.jsx("span",{className:"font-semibold text-emerald-600",children:"Kliknij aby wybra"})}),o.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG (max. 5MB)"}),o.jsx("input",{type:"file",accept:"image/*",onChange:G,className:"hidden"})]})]})]}),i===2&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(Ji,{className:"w-6 h-6 text-emerald-500"}),"Lokalizacja"]}),o.jsxs("div",{className:"relative z-20",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wyszukaj adres"}),o.jsxs("div",{className:"relative",children:[o.jsx(uf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:w,onChange:Q=>ne(Q.target.value),placeholder:"Wpisz adres, np. Marszakowska 10, Warszawa",className:"w-full pl-10 pr-10 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"}),M&&o.jsx(Sr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-500 animate-spin"})]}),j&&A.length>0&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-emerald-300 rounded-xl shadow-2xl max-h-72 overflow-y-auto",children:[o.jsx("div",{className:"p-2 bg-emerald-50 border-b border-emerald-200 text-sm text-emerald-700 font-medium",children:" Wybierz adres z listy:"}),A.map(Q=>o.jsxs("button",{onClick:()=>ue(Q),className:"w-full px-4 py-3 text-left hover:bg-emerald-50 border-b border-gray-100 last:border-0 transition-colors",children:[o.jsx("div",{className:"font-medium text-gray-900",children:Q.display_name.split(",")[0]}),o.jsx("div",{className:"text-sm text-gray-500 truncate",children:Q.display_name})]},Q.place_id))]})]}),o.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gray-200 relative z-10",style:{height:"300px"},children:o.jsxs(F5,{center:E,zoom:13,style:{height:"100%",width:"100%"},children:[o.jsx(B5,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.jsx(U5,{position:E}),o.jsx(W5,{onLocationSelect:se}),o.jsx(H5,{lat:E[0],lng:E[1]})]})}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-2",children:[o.jsx(Ji,{className:"w-4 h-4"}),"Kliknij na map aby wybra dokadn lokalizacj"]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Miasto ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:F.location.city,onChange:Q=>B({...F,location:{...F.location,city:Q.target.value}}),placeholder:"np. Warszawa",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dzielnica"}),o.jsx("input",{type:"text",value:F.location.district,onChange:Q=>B({...F,location:{...F.location,district:Q.target.value}}),placeholder:"np. Mokotw",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ulica i numer"}),o.jsx("input",{type:"text",value:F.location.address,onChange:Q=>B({...F,location:{...F.location,address:Q.target.value}}),placeholder:"np. ul. Marszakowska 1",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kod pocztowy"}),o.jsx("input",{type:"text",value:F.location.postalCode,onChange:Q=>B({...F,location:{...F.location,postalCode:Q.target.value}}),placeholder:"np. 00-001",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Maksymalny zasig dojazdu: ",o.jsxs("span",{className:"font-bold text-emerald-600",children:[F.travelRadius," km"]})]}),o.jsx("input",{type:"range",min:"1",max:"50",value:F.travelRadius,onChange:Q=>B({...F,travelRadius:parseInt(Q.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-emerald-500"}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[o.jsx("span",{children:"1 km"}),o.jsx("span",{children:"25 km"}),o.jsx("span",{children:"50 km"})]})]})]}),i===3&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(sa,{className:"w-6 h-6 text-emerald-500"}),"Usugi i ceny"]}),F.services.length>0&&o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("h3",{className:"font-medium text-gray-700",children:["Dodane usugi (",F.services.length,")"]}),F.services.map(Q=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:Q.name}),o.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(cs,{className:"w-3 h-3"})," ",Q.duration]}),o.jsxs("span",{className:"font-semibold text-emerald-600",children:[Q.price," z"]})]})]}),o.jsx("button",{onClick:()=>te(Q.id),className:"p-2 text-red-500 hover:bg-red-100 rounded-lg",children:o.jsx(hf,{className:"w-5 h-5"})})]},Q.id))]}),o.jsxs("div",{className:"p-6 bg-emerald-50 rounded-xl",children:[o.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Dodaj now usug"]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nazwa usugi *"}),o.jsx("input",{type:"text",value:I.name,onChange:Q=>N({...I,name:Q.target.value}),placeholder:"np. Strzyenie damskie",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Cena (z) *"}),o.jsx("input",{type:"number",value:I.price||"",onChange:Q=>N({...I,price:Number(Q.target.value)}),placeholder:"np. 80",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Czas trwania"}),o.jsx("select",{value:I.duration,onChange:Q=>N({...I,duration:Q.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none",children:be.map(Q=>o.jsx("option",{value:Q,children:Q},Q))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Opis (opcjonalnie)"}),o.jsx("input",{type:"text",value:I.description,onChange:Q=>N({...I,description:Q.target.value}),placeholder:"Krtki opis",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),o.jsxs("button",{type:"button",onClick:W,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[o.jsx(Xr,{className:"w-5 h-5"}),"Dodaj usug"]})]})]}),i===4&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(Lp,{className:"w-6 h-6 text-emerald-500"}),"Dodatkowe informacje"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis dziaalnoci"}),o.jsx("textarea",{value:F.description,onChange:Q=>B({...F,description:Q.target.value}),placeholder:"Opisz swoj dziaalno...",rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none resize-none"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx(Sj,{className:"w-5 h-5"}),"Dowiadczenie i kwalifikacje"]}),o.jsx("textarea",{value:F.experience,onChange:Q=>B({...F,experience:Q.target.value}),placeholder:"np. 10 lat dowiadczenia, certyfikaty...",rows:3,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none resize-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Udogodnienia"}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:F.features.map(Q=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm",children:[Q,o.jsx("button",{onClick:()=>Ne(Q),className:"hover:text-red-500",children:""})]},Q))}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:nt.filter(Q=>!F.features.includes(Q)).map(Q=>o.jsxs("button",{type:"button",onClick:()=>he(Q),className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm hover:bg-gray-200",children:["+ ",Q]},Q))})]}),o.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:" Podsumowanie"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Nazwa:"})," ",o.jsx("strong",{children:F.businessName||"-"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Kategoria:"})," ",o.jsx("strong",{children:((rt=Te.find(Q=>Q.id===F.category))==null?void 0:rt.name)||"-"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Lokalizacja:"})," ",o.jsxs("strong",{children:[F.location.city,F.location.district&&`, ${F.location.district}`]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Liczba usug:"})," ",o.jsx("strong",{children:F.services.length})]})]})]})]}),o.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-100",children:[o.jsx("button",{type:"button",onClick:()=>a(Q=>Math.max(1,Q-1)),disabled:i===1,className:"px-6 py-2 border border-gray-300 rounded-xl font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:" Wstecz"}),i<4?o.jsx("button",{type:"button",onClick:()=>a(Q=>Math.min(4,Q+1)),className:"px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg",children:"Dalej "}):o.jsx("button",{type:"button",onClick:Ie,disabled:c,className:"px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg disabled:opacity-50 flex items-center gap-2",children:c?o.jsxs(o.Fragment,{children:[o.jsx(Sr,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):o.jsxs(o.Fragment,{children:[o.jsx(rc,{className:"w-5 h-5"}),"Zapisz usug"]})})]})]})]})},Z5=()=>{const{showToast:t}=Lr(),[e,n]=V.useState(new Date),[r,i]=V.useState(new Date().toISOString().split("T")[0]),[a,c]=V.useState("week"),[h,f]=V.useState([]),[m,y]=V.useState(null),[x,w]=V.useState(!1);V.useEffect(()=>{const z=localStorage.getItem("businessBookings");if(z)f(JSON.parse(z));else{const D=new Date().toISOString().split("T")[0],ne=new Date(Date.now()+864e5).toISOString().split("T")[0],ue=new Date(Date.now()+1728e5).toISOString().split("T")[0],ie=[{id:"1",clientName:"Anna Nowak",clientPhone:"+48 123 456 789",clientEmail:"anna@example.com",service:"Strzyenie damskie",date:D,time:"09:00",duration:60,price:80,status:"confirmed",address:"ul. Marszakowska 10, Warszawa"},{id:"2",clientName:"Piotr Kowalski",clientPhone:"+48 987 654 321",clientEmail:"piotr@example.com",service:"Strzyenie mskie",date:D,time:"10:30",duration:30,price:50,status:"pending",address:"ul. Puawska 25, Warszawa"},{id:"3",clientName:"Maria Winiewska",clientPhone:"+48 555 666 777",clientEmail:"maria@example.com",service:"Koloryzacja + strzyenie",date:D,time:"14:00",duration:120,price:250,status:"confirmed",address:"ul. Mokotowska 5/12, Warszawa"},{id:"4",clientName:"Katarzyna Zieliska",clientPhone:"+48 111 222 333",clientEmail:"kasia@example.com",service:"Manicure hybrydowy",date:ne,time:"11:00",duration:90,price:120,status:"confirmed"},{id:"5",clientName:"Tomasz Nowicki",clientPhone:"+48 444 555 666",clientEmail:"tomek@example.com",service:"Strzyenie + broda",date:ne,time:"15:30",duration:45,price:70,status:"pending"},{id:"6",clientName:"Ewa Kamiska",clientPhone:"+48 777 888 999",clientEmail:"ewa@example.com",service:"Masa relaksacyjny",date:ue,time:"10:00",duration:60,price:150,status:"confirmed"}];f(ie),localStorage.setItem("businessBookings",JSON.stringify(ie))}},[]);const R=z=>{f(z),localStorage.setItem("businessBookings",JSON.stringify(z))},M=()=>{const z=new Date(e);a==="month"?z.setMonth(z.getMonth()-1):a==="week"?z.setDate(z.getDate()-7):z.setDate(z.getDate()-1),n(z)},C=()=>{const z=new Date(e);a==="month"?z.setMonth(z.getMonth()+1):a==="week"?z.setDate(z.getDate()+7):z.setDate(z.getDate()+1),n(z)},A=()=>{n(new Date),i(new Date().toISOString().split("T")[0])},P=z=>{const D=z.getFullYear(),ne=z.getMonth(),ue=new Date(D,ne,1),ie=new Date(D,ne+1,0),se=[],G=ue.getDay()||7;for(let W=G-1;W>0;W--)se.push(new Date(D,ne,1-W));for(let W=1;W<=ie.getDate();W++)se.push(new Date(D,ne,W));const de=42-se.length;for(let W=1;W<=de;W++)se.push(new Date(D,ne+1,W));return se},j=z=>{const D=[],ne=new Date(z),ue=ne.getDay()||7;ne.setDate(ne.getDate()-ue+1);for(let ie=0;ie<7;ie++)D.push(new Date(ne.getTime()+ie*864e5));return D},S=z=>z.toISOString().split("T")[0],H=z=>h.filter(D=>D.date===z).sort((D,ne)=>D.time.localeCompare(ne.time)),F=z=>{switch(z){case"confirmed":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"completed":return"bg-gray-100 text-gray-700 border-gray-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700"}},B=z=>{switch(z){case"confirmed":return"Potwierdzona";case"pending":return"Oczekuje";case"completed":return"Zakoczona";case"cancelled":return"Anulowana";default:return z}},I=(z,D)=>{const ne=h.map(ue=>ue.id===z?{...ue,status:D}:ue);R(ne),t(`Status zmieniony na: ${B(D)}`,"success"),y(null),w(!1)},N=Array.from({length:12},(z,D)=>D+8),O=["Pon","Wt","r","Czw","Pt","Sob","Nd"],k=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],E=j(e);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kalendarz"}),o.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoimi rezerwacjami"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:A,className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-medium hover:bg-gray-50",children:"Dzisiaj"}),o.jsx("div",{className:"flex bg-white border border-gray-200 rounded-lg overflow-hidden",children:["day","week","month"].map(z=>o.jsx("button",{onClick:()=>c(z),className:`px-4 py-2 text-sm font-medium transition-colors ${a===z?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:z==="day"?"Dzie":z==="week"?"Tydzie":"Miesic"},z))})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{onClick:M,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Xc,{className:"w-5 h-5"})}),o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:a==="day"?new Date(r).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):a==="week"?`${E[0].toLocaleDateString("pl-PL",{day:"numeric",month:"short"})} - ${E[6].toLocaleDateString("pl-PL",{day:"numeric",month:"short",year:"numeric"})}`:`${k[e.getMonth()]} ${e.getFullYear()}`}),o.jsx("button",{onClick:C,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(By,{className:"w-5 h-5"})})]})}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a==="week"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[o.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500 border-r border-gray-200",children:"Godzina"}),E.map((z,D)=>{const ne=S(z),ue=ne===new Date().toISOString().split("T")[0],ie=H(ne);return o.jsxs("div",{className:`p-3 text-center border-r border-gray-200 last:border-r-0 cursor-pointer hover:bg-gray-50 ${ue?"bg-emerald-50":""}`,onClick:()=>i(ne),children:[o.jsx("div",{className:"text-xs text-gray-500",children:O[D]}),o.jsx("div",{className:`text-lg font-bold ${ue?"text-emerald-600":"text-gray-900"}`,children:z.getDate()}),ie.length>0&&o.jsxs("div",{className:"text-xs text-emerald-600 font-medium",children:[ie.length," rez."]})]},D)})]}),o.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:N.map(z=>o.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-100",children:[o.jsxs("div",{className:"p-2 text-center text-sm text-gray-500 border-r border-gray-200 bg-gray-50",children:[z,":00"]}),E.map((D,ne)=>{const ue=S(D),ie=h.filter(se=>se.date===ue&&parseInt(se.time.split(":")[0])===z);return o.jsx("div",{className:"p-1 border-r border-gray-100 last:border-r-0 min-h-[60px] relative",children:ie.map(se=>o.jsxs("button",{onClick:()=>{y(se),w(!0)},className:`w-full text-left p-2 rounded-lg text-xs mb-1 border ${F(se.status)} hover:shadow-md transition-shadow`,children:[o.jsx("div",{className:"font-bold truncate",children:se.time}),o.jsx("div",{className:"truncate",children:se.clientName}),o.jsx("div",{className:"truncate text-gray-600",children:se.service})]},se.id))},ne)})]},z))})]}),a==="day"&&o.jsxs("div",{className:"p-4",children:[o.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[o.jsx(Pr,{className:"w-5 h-5 text-emerald-500"}),"Rezerwacje na ",new Date(r).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long"})]}),o.jsx("div",{className:"space-y-3",children:N.map(z=>{const D=h.filter(ne=>ne.date===r&&parseInt(ne.time.split(":")[0])===z);return o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"w-16 text-sm text-gray-500 font-medium pt-2",children:[z,":00"]}),o.jsx("div",{className:"flex-1 min-h-[60px] border-l-2 border-gray-200 pl-4",children:D.length===0?o.jsx("div",{className:"text-sm text-gray-400 py-2",children:""}):D.map(ne=>o.jsx("button",{onClick:()=>{y(ne),w(!0)},className:`w-full text-left p-4 rounded-xl border-2 mb-2 ${F(ne.status)} hover:shadow-lg transition-all`,children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-gray-900",children:[ne.time," - ",ne.clientName]}),o.jsx("div",{className:"text-sm mt-1",children:ne.service}),o.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[ne.duration," min  ",ne.price," z"]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F(ne.status)}`,children:B(ne.status)})]})},ne.id))})]},z)})})]}),a==="month"&&o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:O.map(z=>o.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:z},z))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:P(e).map((z,D)=>{const ne=S(z),ue=z.getMonth()===e.getMonth(),ie=ne===new Date().toISOString().split("T")[0],se=ne===r,G=H(ne);return o.jsxs("button",{onClick:()=>{i(ne),c("day")},className:`p-2 min-h-[80px] rounded-lg text-left transition-all ${ue?"bg-white":"bg-gray-50"} ${ie?"ring-2 ring-emerald-500":""} ${se?"bg-emerald-50":""} hover:bg-gray-100`,children:[o.jsx("div",{className:`text-sm font-medium ${ue?"text-gray-900":"text-gray-400"}`,children:z.getDate()}),G.slice(0,2).map(de=>o.jsxs("div",{className:`text-xs p-1 rounded mt-1 truncate ${F(de.status)}`,children:[de.time," ",de.clientName.split(" ")[0]]},de.id)),G.length>2&&o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",G.length-2," wicej"]})]},D)})})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Podsumowanie dnia"}),o.jsxs("div",{className:"grid sm:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:H(new Date().toISOString().split("T")[0]).length}),o.jsx("div",{className:"text-sm text-blue-600",children:"Rezerwacje dzi"})]}),o.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.filter(z=>z.status==="pending").length}),o.jsx("div",{className:"text-sm text-yellow-600",children:"Oczekujce"})]}),o.jsxs("div",{className:"p-4 bg-green-50 rounded-xl",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.filter(z=>z.status==="confirmed").length}),o.jsx("div",{className:"text-sm text-green-600",children:"Potwierdzone"})]}),o.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[h.filter(z=>z.date===new Date().toISOString().split("T")[0]).reduce((z,D)=>z+D.price,0)," z"]}),o.jsx("div",{className:"text-sm text-purple-600",children:"Przychd dzi"})]})]})]}),x&&m&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:o.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Szczegy rezerwacji"}),o.jsx("button",{onClick:()=>{w(!1),y(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(ds,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Status:"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${F(m.status)}`,children:B(m.status)})]}),o.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(us,{className:"w-5 h-5 text-gray-400"}),o.jsx("span",{className:"font-medium",children:m.clientName})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(cf,{className:"w-5 h-5 text-gray-400"}),o.jsx("a",{href:`tel:${m.clientPhone}`,className:"text-emerald-600 hover:underline",children:m.clientPhone})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Op,{className:"w-5 h-5 text-gray-400"}),o.jsx("a",{href:`mailto:${m.clientEmail}`,className:"text-emerald-600 hover:underline",children:m.clientEmail})]}),m.address&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ji,{className:"w-5 h-5 text-gray-400"}),o.jsx("span",{children:m.address})]})]}),o.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl",children:[o.jsx("div",{className:"font-bold text-emerald-700",children:m.service}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-emerald-600",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(cs,{className:"w-4 h-4"}),m.time]}),o.jsxs("span",{children:[m.duration," min"]}),o.jsxs("span",{className:"font-bold",children:[m.price," z"]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[m.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>I(m.id,"confirmed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600",children:[o.jsx(Pt,{className:"w-5 h-5"}),"Potwierd"]}),o.jsxs("button",{onClick:()=>I(m.id,"cancelled"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600",children:[o.jsx(ds,{className:"w-5 h-5"}),"Anuluj"]})]}),m.status==="confirmed"&&o.jsxs("button",{onClick:()=>I(m.id,"completed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600",children:[o.jsx(Pt,{className:"w-5 h-5"}),"Oznacz jako zakoczone"]})]})]})]})})})]})},q5=()=>{const[t,e]=V.useState("month"),[n,r]=V.useState({revenue:{total:12450,change:15,byDay:[{day:"Pon",amount:1200},{day:"Wt",amount:1800},{day:"r",amount:1500},{day:"Czw",amount:2100},{day:"Pt",amount:2400},{day:"Sob",amount:2800},{day:"Nd",amount:650}]},bookings:{total:89,change:12,completed:72,cancelled:5,pending:12},clients:{total:156,new:23,returning:133},rating:{average:4.8,count:47,distribution:[{stars:5,count:35},{stars:4,count:9},{stars:3,count:2},{stars:2,count:1},{stars:1,count:0}]},views:{total:1234,change:23},topServices:[{name:"Strzyenie damskie",count:34,revenue:2720},{name:"Koloryzacja",count:18,revenue:4500},{name:"Strzyenie mskie",count:22,revenue:1100},{name:"Modelowanie",count:15,revenue:1200}],peakHours:[{hour:"9:00",bookings:8},{hour:"10:00",bookings:12},{hour:"11:00",bookings:15},{hour:"12:00",bookings:10},{hour:"13:00",bookings:6},{hour:"14:00",bookings:14},{hour:"15:00",bookings:18},{hour:"16:00",bookings:16},{hour:"17:00",bookings:12},{hour:"18:00",bookings:8}]}),i=Math.max(...n.revenue.byDay.map(f=>f.amount)),a=Math.max(...n.peakHours.map(f=>f.bookings)),c=n.rating.distribution.reduce((f,m)=>f+m.count,0),h=[{title:"Przychd",value:`${n.revenue.total.toLocaleString()} z`,change:n.revenue.change,icon:sa,color:"emerald",bgColor:"bg-emerald-100",textColor:"text-emerald-600"},{title:"Rezerwacje",value:n.bookings.total,change:n.bookings.change,icon:Pr,color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Klienci",value:n.clients.total,subtitle:`${n.clients.new} nowych`,icon:Vp,color:"purple",bgColor:"bg-purple-100",textColor:"text-purple-600"},{title:"Ocena",value:n.rating.average,subtitle:`${n.rating.count} opinii`,icon:Bn,color:"amber",bgColor:"bg-amber-100",textColor:"text-amber-600"},{title:"Wywietlenia",value:n.views.total.toLocaleString(),change:n.views.change,icon:ar,color:"pink",bgColor:"bg-pink-100",textColor:"text-pink-600"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Statystyki"}),o.jsx("p",{className:"text-gray-600",children:"Analizuj wyniki swojego biznesu"})]}),o.jsx("div",{className:"flex bg-white border border-gray-200 rounded-lg overflow-hidden",children:["week","month","year"].map(f=>o.jsx("button",{onClick:()=>e(f),className:`px-4 py-2 text-sm font-medium transition-colors ${t===f?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:f==="week"?"Tydzie":f==="month"?"Miesic":"Rok"},f))})]}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-5 gap-4",children:h.map((f,m)=>o.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${f.bgColor}`,children:o.jsx(f.icon,{className:`w-5 h-5 ${f.textColor}`})}),f.change!==void 0&&o.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${f.change>=0?"text-green-600":"text-red-600"}`,children:[f.change>=0?o.jsx(Pj,{className:"w-4 h-4"}):o.jsx(kj,{className:"w-4 h-4"}),Math.abs(f.change),"%"]})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.value}),o.jsx("div",{className:"text-sm text-gray-500",children:f.subtitle||f.title})]},m))}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(Ij,{className:"w-5 h-5 text-emerald-500"}),"Przychody"]}),o.jsx("span",{className:"text-sm text-gray-500",children:"Ostatnie 7 dni"})]}),o.jsx("div",{className:"flex items-end justify-between gap-2 h-48",children:n.revenue.byDay.map((f,m)=>o.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-xs font-medium text-gray-600",children:[f.amount," z"]}),o.jsx("div",{className:"w-full bg-gradient-to-t from-emerald-500 to-teal-400 rounded-t-lg transition-all hover:from-emerald-600 hover:to-teal-500",style:{height:`${f.amount/i*100}%`,minHeight:"20px"}}),o.jsx("div",{className:"text-xs text-gray-500",children:f.day})]},m))}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Suma tygodnia:"}),o.jsxs("span",{className:"ml-2 font-bold text-gray-900",children:[n.revenue.byDay.reduce((f,m)=>f+m.amount,0).toLocaleString()," z"]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-sm font-medium",children:[o.jsx(Mp,{className:"w-4 h-4"}),"+",n.revenue.change,"% vs poprzedni tydzie"]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[o.jsx("div",{className:"flex items-center justify-between mb-6",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(cs,{className:"w-5 h-5 text-blue-500"}),"Najbardziej popularne godziny"]})}),o.jsx("div",{className:"space-y-3",children:n.peakHours.map((f,m)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 text-sm text-gray-600 font-medium",children:f.hour}),o.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full transition-all",style:{width:`${f.bookings/a*100}%`}})}),o.jsx("div",{className:"w-8 text-sm text-gray-600 font-medium text-right",children:f.bookings})]},m))}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:o.jsxs("p",{className:"text-sm text-gray-500",children:[" Najbardziej popularna godzina: ",o.jsx("strong",{children:"15:00"})," (18 rezerwacji)"]})})]})]}),o.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[o.jsx(XL,{className:"w-5 h-5 text-purple-500"}),"Status rezerwacji"]}),o.jsx("div",{className:"flex items-center justify-center mb-6",children:o.jsxs("div",{className:"relative w-40 h-40",children:[o.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90",children:[o.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10b981",strokeWidth:"20",strokeDasharray:`${n.bookings.completed/n.bookings.total*251.2} 251.2`}),o.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#f59e0b",strokeWidth:"20",strokeDasharray:`${n.bookings.pending/n.bookings.total*251.2} 251.2`,strokeDashoffset:`-${n.bookings.completed/n.bookings.total*251.2}`}),o.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ef4444",strokeWidth:"20",strokeDasharray:`${n.bookings.cancelled/n.bookings.total*251.2} 251.2`,strokeDashoffset:`-${(n.bookings.completed+n.bookings.pending)/n.bookings.total*251.2}`})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold",children:n.bookings.total}),o.jsx("div",{className:"text-xs text-gray-500",children:"rezerwacji"})]})})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Zakoczone"})]}),o.jsx("span",{className:"font-medium",children:n.bookings.completed})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Oczekujce"})]}),o.jsx("span",{className:"font-medium",children:n.bookings.pending})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Anulowane"})]}),o.jsx("span",{className:"font-medium",children:n.bookings.cancelled})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[o.jsx(Bn,{className:"w-5 h-5 text-amber-500"}),"Rozkad ocen"]}),o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"text-5xl font-bold text-gray-900",children:n.rating.average}),o.jsx("div",{className:"flex items-center justify-center gap-1 mt-2",children:[1,2,3,4,5].map(f=>o.jsx(Bn,{className:`w-5 h-5 ${f<=Math.round(n.rating.average)?"text-amber-400 fill-amber-400":"text-gray-300"}`},f))}),o.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[n.rating.count," opinii"]})]}),o.jsx("div",{className:"space-y-2",children:n.rating.distribution.map(f=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-1 w-12",children:[o.jsx("span",{className:"text-sm font-medium",children:f.stars}),o.jsx(Bn,{className:"w-3 h-3 text-amber-400 fill-amber-400"})]}),o.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-amber-400 rounded-full",style:{width:`${f.count/c*100}%`}})}),o.jsx("span",{className:"text-sm text-gray-600 w-8 text-right",children:f.count})]},f.stars))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[o.jsx(Mp,{className:"w-5 h-5 text-emerald-500"}),"Top usugi"]}),o.jsx("div",{className:"space-y-4",children:n.topServices.map((f,m)=>o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-white ${m===0?"bg-amber-500":m===1?"bg-gray-400":m===2?"bg-amber-700":"bg-gray-300"}`,children:m+1}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-gray-900",children:f.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[f.count," rezerwacji"]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"font-bold text-emerald-600",children:[f.revenue," z"]})})]},m))}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:o.jsxs("p",{className:"text-sm text-gray-500",children:["cznie: ",o.jsxs("strong",{children:[n.topServices.reduce((f,m)=>f+m.revenue,0).toLocaleString()," z"]})]})})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[o.jsx(Vp,{className:"w-5 h-5 text-purple-500"}),"Klienci"]}),o.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-600",children:n.clients.total}),o.jsx("div",{className:"text-sm text-purple-600 mt-1",children:"Wszystkich klientw"})]}),o.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-xl",children:[o.jsx("div",{className:"text-4xl font-bold text-green-600",children:n.clients.new}),o.jsx("div",{className:"text-sm text-green-600 mt-1",children:"Nowych w tym miesicu"})]}),o.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-xl",children:[o.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[Math.round(n.clients.returning/n.clients.total*100),"%"]}),o.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Powracajcych klientw"})]})]})]})]})},K5=()=>{const{user:t}=Zn(),{showToast:e}=Lr(),[n,r]=V.useState([]),[i,a]=V.useState(null),[c,h]=V.useState(""),[f,m]=V.useState(""),[y,x]=V.useState(!1),[w,R]=V.useState(!1),M=V.useRef(null),C=["Dzikuj za wiadomo! Odezw si wkrtce.","Oczywicie, mam wolny termin. Kiedy Pani/Panu pasuje?","Rezerwacja zostaa potwierdzona ","Niestety ten termin jest zajty. Proponuj...","Do zobaczenia! "];V.useEffect(()=>{const B=[{id:"1",client:{id:"101",name:"Magdalena Kowalczyk",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop",phone:"+48 123 456 789",email:"magda@example.com",isOnline:!0,totalBookings:3},lastMessage:"Czy mog si umwi na pitek?",lastMessageTime:new Date(Date.now()-12e4),unreadCount:1,messages:[{id:"1",senderId:"101",text:"Dzie dobry! Interesuje mnie strzyenie.",timestamp:new Date(Date.now()-18e5),read:!0,type:"text"},{id:"2",senderId:(t==null?void 0:t.id)||"",text:"Dzie dobry! Oczywicie, kiedy chciaaby Pani si umwi?",timestamp:new Date(Date.now()-12e5),read:!0,type:"text"},{id:"3",senderId:"101",text:"Czy mog si umwi na pitek?",timestamp:new Date(Date.now()-12e4),read:!1,type:"text"}]},{id:"2",client:{id:"102",name:"Tomasz Nowicki",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop",phone:"+48 987 654 321",isOnline:!1,totalBookings:1},lastMessage:"wietnie, dzikuj!",lastMessageTime:new Date(Date.now()-36e5),unreadCount:0,messages:[{id:"1",senderId:"102",text:"Chciabym zarezerwowa masa na sobot.",timestamp:new Date(Date.now()-72e5),read:!0,type:"text"},{id:"2",senderId:(t==null?void 0:t.id)||"",text:"",timestamp:new Date(Date.now()-54e5),read:!0,type:"booking",bookingData:{service:"Masa relaksacyjny",date:"2025-12-07",time:"11:00",price:150,status:"confirmed"}},{id:"3",senderId:"102",text:"wietnie, dzikuj!",timestamp:new Date(Date.now()-36e5),read:!0,type:"text"}]},{id:"3",client:{id:"103",name:"Anna Winiewska",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop",email:"anna.w@example.com",isOnline:!0,totalBookings:7},lastMessage:"Czy mona przeoy rezerwacj?",lastMessageTime:new Date(Date.now()-108e5),unreadCount:1,messages:[{id:"1",senderId:"103",text:"Czy mona przeoy rezerwacj?",timestamp:new Date(Date.now()-108e5),read:!1,type:"text"}]}];r(B)},[t]),V.useEffect(()=>{A()},[i==null?void 0:i.messages]);const A=()=>{var B;(B=M.current)==null||B.scrollIntoView({behavior:"smooth"})},P=B=>{const I=B||c;if(!I.trim()||!i)return;const N={id:Date.now().toString(),senderId:(t==null?void 0:t.id)||"",text:I,timestamp:new Date,read:!1,type:"text"},O=n.map(k=>k.id===i.id?{...k,messages:[...k.messages,N],lastMessage:I,lastMessageTime:new Date}:k);r(O),a({...i,messages:[...i.messages,N]}),h(""),R(!1)},j=()=>{if(!i)return;const B={id:Date.now().toString(),senderId:(t==null?void 0:t.id)||"",text:"",timestamp:new Date,read:!1,type:"booking",bookingData:{service:"Strzyenie",date:new Date(Date.now()+864e5*3).toISOString().split("T")[0],time:"14:00",price:80,status:"pending"}},I=n.map(N=>N.id===i.id?{...N,messages:[...N.messages,B],lastMessage:"Wysano propozycj rezerwacji",lastMessageTime:new Date}:N);r(I),a({...i,messages:[...i.messages,B]}),e("Propozycja rezerwacji wysana!","success")},S=B=>{const N=new Date().getTime()-new Date(B).getTime(),O=Math.floor(N/6e4),k=Math.floor(N/36e5),E=Math.floor(N/864e5);return O<1?"Teraz":O<60?`${O} min`:k<24?`${k}h`:E===1?"Wczoraj":new Date(B).toLocaleDateString("pl-PL")},H=n.filter(B=>B.client.name.toLowerCase().includes(f.toLowerCase())),F=n.reduce((B,I)=>B+I.unreadCount,0);return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Wiadomoci"}),o.jsx("p",{className:"text-gray-600",children:F>0?`${F} nieprzeczytanych`:"Wszystkie przeczytane"})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",style:{height:"calc(100vh - 220px)"},children:o.jsxs("div",{className:"flex h-full",children:[o.jsxs("div",{className:`w-full md:w-80 lg:w-96 border-r border-gray-100 flex flex-col ${y?"hidden md:flex":"flex"}`,children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsxs("div",{className:"relative",children:[o.jsx(uf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:f,onChange:B=>m(B.target.value),placeholder:"Szukaj klientw...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[H.map(B=>o.jsxs("button",{onClick:()=>{a(B),x(!0);const I=n.map(N=>N.id===B.id?{...N,unreadCount:0}:N);r(I)},className:`w-full p-4 flex items-start gap-3 hover:bg-gray-50 transition-colors border-b border-gray-50 ${(i==null?void 0:i.id)===B.id?"bg-emerald-50":""}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:B.client.avatar,alt:B.client.name,className:"w-12 h-12 rounded-full object-cover"}),B.client.isOnline&&o.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-semibold text-gray-900",children:B.client.name}),o.jsx("span",{className:"text-xs text-gray-500",children:S(B.lastMessageTime)})]}),B.client.totalBookings&&o.jsxs("p",{className:"text-xs text-emerald-600",children:[B.client.totalBookings," rezerwacji"]}),o.jsx("p",{className:"text-sm text-gray-600 truncate mt-1",children:B.lastMessage})]}),B.unreadCount>0&&o.jsx("span",{className:"w-5 h-5 bg-emerald-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:B.unreadCount})]},B.id)),H.length===0&&o.jsx("div",{className:"p-8 text-center text-gray-500",children:o.jsx("p",{children:"Brak rozmw"})})]})]}),o.jsx("div",{className:`flex-1 flex flex-col ${y?"flex":"hidden md:flex"}`,children:i?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between bg-white",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>x(!1),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Xc,{className:"w-5 h-5"})}),o.jsx("img",{src:i.client.avatar,alt:i.client.name,className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-semibold text-gray-900",children:i.client.name}),o.jsx("p",{className:"text-sm text-gray-500",children:i.client.isOnline?o.jsx("span",{className:"text-green-500",children:"Online"}):`${i.client.totalBookings||0} rezerwacji`})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:j,className:"px-3 py-1.5 bg-emerald-100 text-emerald-700 rounded-lg text-sm font-medium hover:bg-emerald-200 transition-colors flex items-center gap-1",children:[o.jsx(Pr,{className:"w-4 h-4"}),"Wylij rezerwacj"]}),i.client.phone&&o.jsx("a",{href:`tel:${i.client.phone}`,className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(cf,{className:"w-5 h-5 text-gray-500"})}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Lj,{className:"w-5 h-5 text-gray-500"})})]})]}),o.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-100 flex items-center gap-4 text-sm",children:[i.client.phone&&o.jsxs("span",{className:"text-gray-600",children:[" ",i.client.phone]}),i.client.email&&o.jsxs("span",{className:"text-gray-600",children:[" ",i.client.email]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[i.messages.map(B=>{const I=B.senderId===(t==null?void 0:t.id);return B.type==="booking"&&B.bookingData?o.jsx("div",{className:"flex justify-center",children:o.jsxs("div",{className:`border rounded-xl p-4 max-w-sm ${B.bookingData.status==="confirmed"?"bg-emerald-50 border-emerald-200":"bg-yellow-50 border-yellow-200"}`,children:[o.jsx("div",{className:"text-center mb-2",children:o.jsxs("span",{className:`text-xs font-medium uppercase ${B.bookingData.status==="confirmed"?"text-emerald-600":"text-yellow-600"}`,children:["Rezerwacja ",B.bookingData.status==="confirmed"?"potwierdzona ":"oczekujca"]})}),o.jsxs("div",{className:"text-sm space-y-1",children:[o.jsx("p",{className:"font-semibold",children:B.bookingData.service}),o.jsxs("p",{className:"text-gray-600 flex items-center gap-1",children:[o.jsx(Pr,{className:"w-3 h-3"}),new Date(B.bookingData.date).toLocaleDateString("pl-PL")]}),o.jsxs("p",{className:"text-gray-600 flex items-center gap-1",children:[o.jsx(cs,{className:"w-3 h-3"}),B.bookingData.time]}),o.jsxs("p",{className:"text-emerald-600 font-bold flex items-center gap-1",children:[o.jsx(sa,{className:"w-3 h-3"}),B.bookingData.price," z"]})]})]})},B.id):o.jsx("div",{className:`flex ${I?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-[70%] px-4 py-2 rounded-2xl shadow-sm ${I?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-br-md":"bg-white text-gray-900 rounded-bl-md"}`,children:[o.jsx("p",{children:B.text}),o.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 text-xs ${I?"text-white/70":"text-gray-500"}`,children:[o.jsx("span",{children:new Date(B.timestamp).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"})}),I&&(B.read?o.jsx(Aj,{className:"w-4 h-4"}):o.jsx(Pt,{className:"w-4 h-4"}))]})]})},B.id)}),o.jsx("div",{ref:M})]}),w&&o.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 bg-white",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Szybkie odpowiedzi:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:C.map((B,I)=>o.jsx("button",{onClick:()=>P(B),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors",children:B.length>30?B.substring(0,30)+"...":B},I))})]}),o.jsx("div",{className:"p-4 border-t border-gray-100 bg-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>R(!w),className:`p-2 rounded-lg transition-colors ${w?"bg-emerald-100 text-emerald-600":"hover:bg-gray-100 text-gray-500"}`,title:"Szybkie odpowiedzi",children:""}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Dj,{className:"w-5 h-5 text-gray-500"})}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(zj,{className:"w-5 h-5 text-gray-500"})}),o.jsx("input",{type:"text",value:c,onChange:B=>h(B.target.value),onKeyPress:B=>B.key==="Enter"&&P(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-2 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{onClick:()=>P(),disabled:!c.trim(),className:"p-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl hover:shadow-lg disabled:opacity-50 transition-all",children:o.jsx(Hy,{className:"w-5 h-5"})})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wybierz rozmow"}),o.jsx("p",{className:"text-sm",children:"Kliknij na klienta z listy, aby zobaczy wiadomoci"})]})})})]})})]})},g_=()=>{const{user:t,login:e,logout:n}=Zn(),{showToast:r}=Lr(),a=(k=>{if(!k)return{countryCode:"+48",number:""};const E=k.match(/^(\+\d{1,3})\s?(.*)$/);return E?{countryCode:E[1],number:E[2]}:{countryCode:"+48",number:k}})(t==null?void 0:t.phone),[c,h]=V.useState({username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||"",phone:a.number,phoneCountryCode:a.countryCode,businessName:(t==null?void 0:t.businessName)||""}),[f,m]=V.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[y,x]=V.useState({current:!1,new:!1,confirm:!1}),[w,R]=V.useState({emailBookings:!0,emailMessages:!0,emailMarketing:!1,smsBookings:!0,smsReminders:!0,pushNotifications:!0}),[M,C]=V.useState({profileVisible:!0,showPhone:!1,showEmail:!1}),[A,P]=V.useState("profile"),[j,S]=V.useState(!1),H=async()=>{S(!0);const k=c.username.trim().split(/\s+/);if(k.length<2||k.some(ue=>ue.length<2)){r("Podaj pene imi i nazwisko (np. Jan Kowalski)","error"),S(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)){r("Nieprawidowy adres email","error"),S(!1);return}if(c.phone){const ue=$y(c.phoneCountryCode,c.phone);if(!ue.valid){r(ue.message,"error"),S(!1);return}}await new Promise(ue=>setTimeout(ue,500));const z=c.phone.replace(/\D/g,""),D=`${c.phoneCountryCode} ${z}`,ne={...t,username:c.username,email:c.email,phone:D,businessName:c.businessName};e(ne),r("Profil zaktualizowany pomylnie","success"),S(!1)},F=async()=>{if(!f.currentPassword){r("Podaj aktualne haso","error");return}if(f.newPassword.length<8){r("Nowe haso musi mie minimum 8 znakw","error");return}if(!/[A-Z]/.test(f.newPassword)){r("Haso musi zawiera co najmniej jedn wielk liter","error");return}if(!/[a-z]/.test(f.newPassword)){r("Haso musi zawiera co najmniej jedn ma liter","error");return}if(!/[0-9]/.test(f.newPassword)){r("Haso musi zawiera co najmniej jedn cyfr","error");return}if(f.newPassword!==f.confirmPassword){r("Hasa nie s takie same","error");return}S(!0),await new Promise(k=>setTimeout(k,500)),r("Haso zostao zmienione","success"),m({currentPassword:"",newPassword:"",confirmPassword:""}),S(!1)},B=async()=>{S(!0),await new Promise(k=>setTimeout(k,500)),r("Ustawienia powiadomie zapisane","success"),S(!1)},I=async()=>{S(!0),await new Promise(k=>setTimeout(k,500)),r("Ustawienia prywatnoci zapisane","success"),S(!1)},N=()=>{const k=window.prompt("Aby usun konto, wpisz swoje haso:");if(k!==null){if(!k||k.length<8){r("Nieprawidowe haso","error");return}window.confirm("UWAGA: Czy na pewno chcesz usun swoje konto? Wszystkie Twoje dane, usugi i rezerwacje zostan trwale usunite. Ta operacja jest nieodwracalna!")&&(n(),r("Konto zostao usunite","info"))}},O=[{id:"profile",label:"Profil",icon:us},{id:"password",label:"Haso",icon:Ka},{id:"notifications",label:"Powiadomienia",icon:Co},{id:"privacy",label:"Prywatno",icon:n5},{id:"billing",label:"Patnoci",icon:xh},{id:"danger",label:"Strefa zagroenia",icon:u_}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ustawienia"}),o.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoim kontem i preferencjami"})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[o.jsx("div",{className:"lg:w-64 flex-shrink-0",children:o.jsx("div",{className:"bg-white rounded-xl shadow-sm p-2",children:O.map(k=>o.jsxs("button",{onClick:()=>P(k.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${A===k.id?"bg-emerald-50 text-emerald-700":"text-gray-600 hover:bg-gray-50"} ${k.id==="danger"?"text-red-600 hover:bg-red-50":""}`,children:[o.jsx(k.icon,{className:`w-5 h-5 ${k.id==="danger"&&A!=="danger"?"text-red-500":""}`}),o.jsx("span",{className:"font-medium",children:k.label})]},k.id))})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[A==="profile"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Informacje o profilu"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Zaktualizuj swoje dane osobowe"})]}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),o.jsxs("div",{className:"relative",children:[o.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:c.username,onChange:k=>h({...c,username:k.target.value}),placeholder:"Jan Kowalski",className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa firmy"}),o.jsx("input",{type:"text",value:c.businessName,onChange:k=>h({...c,businessName:k.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres email"}),o.jsxs("div",{className:"relative",children:[o.jsx(Op,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"email",value:c.email,onChange:k=>h({...c,email:k.target.value}),className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numer telefonu"}),o.jsx(Zy,{value:c.phone,countryCode:c.phoneCountryCode,onChange:(k,E)=>h({...c,phone:k,phoneCountryCode:E})})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsxs("button",{onClick:H,disabled:j,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[o.jsx(rc,{className:"w-5 h-5"}),j?"Zapisywanie...":"Zapisz zmiany"]})})]}),A==="password"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Zmiana hasa"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Upewnij si, e uywasz silnego hasa"})]}),o.jsxs("div",{className:"max-w-md space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aktualne haso"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:y.current?"text":"password",value:f.currentPassword,onChange:k=>m({...f,currentPassword:k.target.value}),className:"w-full pl-10 pr-12 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"}),o.jsx("button",{type:"button",onClick:()=>x({...y,current:!y.current}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:y.current?o.jsx($s,{className:"w-5 h-5"}):o.jsx(ar,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nowe haso"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:y.new?"text":"password",value:f.newPassword,onChange:k=>m({...f,newPassword:k.target.value}),className:"w-full pl-10 pr-12 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"}),o.jsx("button",{type:"button",onClick:()=>x({...y,new:!y.new}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:y.new?o.jsx($s,{className:"w-5 h-5"}):o.jsx(ar,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[o.jsxs("p",{className:f.newPassword.length>=8?"text-green-600":"",children:[f.newPassword.length>=8?"":""," Minimum 8 znakw"]}),o.jsxs("p",{className:/[A-Z]/.test(f.newPassword)?"text-green-600":"",children:[/[A-Z]/.test(f.newPassword)?"":""," Co najmniej jedna wielka litera (A-Z)"]}),o.jsxs("p",{className:/[a-z]/.test(f.newPassword)?"text-green-600":"",children:[/[a-z]/.test(f.newPassword)?"":""," Co najmniej jedna maa litera (a-z)"]}),o.jsxs("p",{className:/[0-9]/.test(f.newPassword)?"text-green-600":"",children:[/[0-9]/.test(f.newPassword)?"":""," Co najmniej jedna cyfra (0-9)"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Potwierd nowe haso"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:y.confirm?"text":"password",value:f.confirmPassword,onChange:k=>m({...f,confirmPassword:k.target.value}),className:"w-full pl-10 pr-12 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"}),o.jsx("button",{type:"button",onClick:()=>x({...y,confirm:!y.confirm}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:y.confirm?o.jsx($s,{className:"w-5 h-5"}):o.jsx(ar,{className:"w-5 h-5"})})]}),f.confirmPassword&&o.jsx("p",{className:`text-xs mt-1 ${f.newPassword===f.confirmPassword?"text-green-600":"text-red-500"}`,children:f.newPassword===f.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsxs("button",{onClick:F,disabled:j,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[o.jsx(Ka,{className:"w-5 h-5"}),j?"Zapisywanie...":"Zmie haso"]})})]}),A==="notifications"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Powiadomienia"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Wybierz jak chcesz otrzymywa powiadomienia"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[o.jsx(Op,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia email"]}),o.jsx("div",{className:"space-y-3",children:[{key:"emailBookings",label:"Nowe rezerwacje",desc:"Otrzymuj email gdy kto zarezerwuje wizyt"},{key:"emailMessages",label:"Nowe wiadomoci",desc:"Otrzymuj email gdy dostaniesz wiadomo"},{key:"emailMarketing",label:"Nowoci i promocje",desc:"Informacje o nowociach w ToMyHomeApp"}].map(k=>o.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:k.label}),o.jsx("p",{className:"text-sm text-gray-500",children:k.desc})]}),o.jsx("input",{type:"checkbox",checked:w[k.key],onChange:E=>R({...w,[k.key]:E.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]},k.key))})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[o.jsx(cf,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia SMS"]}),o.jsx("div",{className:"space-y-3",children:[{key:"smsBookings",label:"Nowe rezerwacje",desc:"SMS gdy kto zarezerwuje wizyt"},{key:"smsReminders",label:"Przypomnienia",desc:"SMS przypominajcy o nadchodzcej wizycie"}].map(k=>o.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:k.label}),o.jsx("p",{className:"text-sm text-gray-500",children:k.desc})]}),o.jsx("input",{type:"checkbox",checked:w[k.key],onChange:E=>R({...w,[k.key]:E.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]},k.key))})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[o.jsx(Co,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia push"]}),o.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Powiadomienia w przegldarce"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj powiadomienia w czasie rzeczywistym"})]}),o.jsx("input",{type:"checkbox",checked:w.pushNotifications,onChange:k=>R({...w,pushNotifications:k.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsxs("button",{onClick:B,disabled:j,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[o.jsx(rc,{className:"w-5 h-5"}),j?"Zapisywanie...":"Zapisz ustawienia"]})})]}),A==="privacy"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Prywatno"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Kontroluj widoczno swoich danych"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Profil widoczny publicznie"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Pozwl klientom znale Twj profil w wyszukiwarce"})]}),o.jsx("input",{type:"checkbox",checked:M.profileVisible,onChange:k=>C({...M,profileVisible:k.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),o.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Poka numer telefonu"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Wywietlaj numer telefonu na profilu publicznym"})]}),o.jsx("input",{type:"checkbox",checked:M.showPhone,onChange:k=>C({...M,showPhone:k.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),o.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Poka adres email"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Wywietlaj adres email na profilu publicznym"})]}),o.jsx("input",{type:"checkbox",checked:M.showEmail,onChange:k=>C({...M,showEmail:k.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t",children:o.jsxs("button",{onClick:I,disabled:j,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[o.jsx(rc,{className:"w-5 h-5"}),j?"Zapisywanie...":"Zapisz ustawienia"]})})]}),A==="billing"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Patnoci i subskrypcja"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Zarzdzaj swoim planem i metodami patnoci"})]}),o.jsxs("div",{className:"p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Aktualny plan"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Darmowy"})]}),o.jsx("div",{className:"px-3 py-1 bg-emerald-500 text-white rounded-full text-sm font-medium",children:"Aktywny"})]}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-emerald-500"}),"Do 10 rezerwacji miesicznie"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-emerald-500"}),"Podstawowy profil"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-emerald-500"}),"Wiadomoci z klientami"]})]}),o.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Przejd na Premium"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Metody patnoci"}),o.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[o.jsx(xh,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Brak dodanych metod patnoci"}),o.jsx("button",{className:"mt-3 text-emerald-600 font-medium hover:underline",children:"+ Dodaj kart"})]})]})]}),A==="danger"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-red-600 mb-1",children:"Strefa zagroenia"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Nieodwracalne akcje dotyczce Twojego konta"})]}),o.jsx("div",{className:"p-6 border-2 border-red-200 rounded-xl bg-red-50",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:o.jsx(hf,{className:"w-6 h-6 text-red-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-red-900",children:"Usu konto"}),o.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Po usuniciu konta wszystkie Twoje dane, rezerwacje i historia zostan trwale usunite. Ta operacja jest nieodwracalna."}),o.jsx("button",{onClick:N,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Usu moje konto"})]})]})}),o.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx(u_,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-yellow-800",children:"Przed usuniciem konta"}),o.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[o.jsx("li",{children:" Upewnij si, e nie masz aktywnych rezerwacji"}),o.jsx("li",{children:" Poinformuj swoich klientw o zamkniciu dziaalnoci"}),o.jsx("li",{children:" Pobierz kopi swoich danych jeli potrzebujesz"})]})]})]})})]})]})})]})]})},G5=()=>{var k;const[t,e]=V.useState(!1),[n,r]=V.useState(!1),[i,a]=V.useState(!1),[c,h]=V.useState(!1),[f,m]=V.useState(!1),{isAuthenticated:y,user:x,logout:w}=Zn(),R=di(),M=hi(),C=V.useRef(null),A=V.useRef(null),P=V.useRef(null),[j,S]=V.useState([{id:1,type:"booking",message:"Nowa rezerwacja od Anna K.",time:"5 min temu",read:!1},{id:2,type:"message",message:"Masz now wiadomo",time:"1h temu",read:!1},{id:3,type:"review",message:"Otrzymae now opini ",time:"2h temu",read:!0}]),H=j.filter(E=>!E.read).length;V.useEffect(()=>{const E=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",E),()=>window.removeEventListener("scroll",E)},[]),V.useEffect(()=>{const E=z=>{C.current&&!C.current.contains(z.target)&&a(!1),A.current&&!A.current.contains(z.target)&&h(!1),P.current&&!P.current.contains(z.target)&&m(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const F=[{to:"/",label:"Strona Gwna"},{to:"/#services",label:"Usugi"},{to:"/#how",label:"Jak to dziaa"},{to:"/#reviews",label:"Opinie"},{to:"/#contact",label:"Kontakt"}],B=E=>{if(e(!1),E.startsWith("/#")){const z=E.replace("/#",""),D=document.getElementById(z);D&&D.scrollIntoView({behavior:"smooth"})}},I=()=>{S(j.map(E=>({...E,read:!0})))},N=()=>o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),O=()=>o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});return o.jsxs("header",{className:`sticky top-0 z-50 transition-all duration-300 ${n?"bg-white/95 backdrop-blur-xl shadow-lg":"bg-white/95 backdrop-blur-xl border-b border-gray-100"}`,children:[o.jsx("div",{className:"max-w-7xl mx-auto px-6",children:o.jsxs("div",{className:"h-[72px] flex items-center justify-between gap-8",children:[o.jsxs(ye,{to:"/",className:"flex items-center gap-3 transition-transform duration-300 hover:scale-105",children:[o.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),o.jsx("span",{className:"font-extrabold text-xl gradient-text hidden sm:block",children:"TOMYHOMEAPP"})]}),o.jsx("nav",{className:"hidden lg:flex items-center gap-8",children:F.map(E=>o.jsx(ye,{to:E.to,onClick:()=>B(E.to),className:`text-gray-600 font-medium text-[15px] relative py-2 transition-colors hover:text-primary
                  after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 
                  after:bg-gradient-to-r after:from-primary after:to-secondary after:transition-all
                  hover:after:w-full ${R.pathname===E.to?"text-primary after:w-full":""}`,children:E.label},E.to))}),o.jsx("div",{className:"hidden lg:flex items-center gap-3",children:y?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",ref:P,children:[o.jsxs("button",{onClick:()=>m(!f),className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(Co,{className:"w-5 h-5"}),H>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:H})]}),f&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-50",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Powiadomienia"}),o.jsx("button",{onClick:I,className:"text-sm text-primary hover:underline",children:"Oznacz jako przeczytane"})]}),o.jsx("div",{className:"max-h-80 overflow-y-auto",children:j.map(E=>o.jsxs("div",{className:`p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer ${E.read?"":"bg-blue-50"}`,children:[o.jsx("p",{className:"text-sm text-gray-900",children:E.message}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:E.time})]},E.id))}),o.jsx(ye,{to:"/powiadomienia",className:"block p-3 text-center text-sm text-primary hover:bg-gray-50",onClick:()=>m(!1),children:"Zobacz wszystkie"})]})]}),o.jsxs(ye,{to:"/wiadomosci",className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(wh,{className:"w-5 h-5"}),o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary text-white text-xs font-bold rounded-full flex items-center justify-center",children:"2"})]}),(x==null?void 0:x.accountType)==="provider"&&o.jsx(ye,{to:"/biznes",className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all text-sm",children:" Panel Biznes"}),o.jsxs("div",{className:"relative",ref:A,children:[o.jsxs("button",{onClick:()=>h(!c),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-xl transition-colors",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:((k=x==null?void 0:x.username)==null?void 0:k.charAt(0).toUpperCase())||"U"})}),o.jsx("span",{className:"text-sm font-medium text-gray-700 hidden xl:block",children:x==null?void 0:x.username}),o.jsx(zp,{className:"w-4 h-4 text-gray-500"})]}),c&&o.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50",children:[o.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[o.jsx("p",{className:"font-medium text-gray-900",children:x==null?void 0:x.username}),o.jsx("p",{className:"text-sm text-gray-500",children:x==null?void 0:x.email})]}),o.jsxs(ye,{to:"/profil",className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>h(!1),children:[o.jsx(us,{className:"w-4 h-4"}),"Mj profil"]}),o.jsxs(ye,{to:"/wiadomosci",className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>h(!1),children:[o.jsx(wh,{className:"w-4 h-4"}),"Wiadomoci"]}),o.jsx("hr",{className:"my-2"}),o.jsxs("button",{onClick:()=>{w(),h(!1),M("/")},className:"flex items-center gap-3 px-4 py-2 text-red-600 hover:bg-red-50 w-full text-left",children:[o.jsx(_h,{className:"w-4 h-4"}),"Wyloguj si"]})]})]})]}):o.jsxs("div",{className:"relative",ref:C,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[o.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-primary transition-colors font-medium",children:[o.jsx(us,{className:"w-5 h-5"}),o.jsx("span",{children:"Moje konto"}),o.jsx(zp,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&o.jsx("div",{className:"absolute right-0 mt-0 pt-2 z-50",children:o.jsxs("div",{className:"w-80 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[o.jsxs("div",{className:"p-6 text-center bg-gradient-to-b from-gray-50 to-white",children:[o.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[o.jsx("div",{className:"text-5xl",children:""}),o.jsx("div",{className:"text-5xl",children:""})]}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Witaj w ToMyHomeApp"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Zaloguj si, aby zobaczy swoje rezerwacje, ulubione usugi i powiadomienia."})]}),o.jsx("div",{className:"px-6 pb-4",children:o.jsx(ye,{to:"/auth?mode=login",className:"block w-full py-3 bg-gradient-to-r from-primary to-secondary text-white text-center rounded-xl font-bold hover:shadow-lg transition-all",onClick:()=>a(!1),children:"ZALOGUJ SI"})}),o.jsxs("div",{className:"px-6 pb-4",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"Nie masz jeszcze konta? Za teraz."}),o.jsx(ye,{to:"/auth?mode=register&type=client",className:"flex items-center justify-center w-full py-3 mb-2 border-2 border-primary text-primary rounded-xl font-bold hover:bg-primary hover:text-white transition-all",onClick:()=>a(!1),children:"DLA KLIENTA"}),o.jsx(ye,{to:"/auth?mode=register&type=provider",className:"flex items-center justify-center w-full py-3 border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold hover:bg-emerald-500 hover:text-white transition-all",onClick:()=>a(!1),children:"DLA USUGODAWCY"})]})]})})]})}),o.jsx("button",{onClick:()=>e(!t),"aria-label":"Toggle menu",className:"lg:hidden flex items-center justify-center",style:{width:"44px",height:"44px",backgroundColor:"#ffffff",border:"2px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",color:"#374151",cursor:"pointer"},children:t?o.jsx(O,{}):o.jsx(N,{})})]})}),t&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)}),o.jsx("div",{className:"lg:hidden fixed top-[72px] left-0 right-0 bg-white shadow-xl z-50 max-h-[calc(100vh-72px)] overflow-y-auto",style:{backgroundColor:"#ffffff"},children:o.jsxs("nav",{className:"p-6 flex flex-col gap-4",children:[F.map(E=>o.jsx(ye,{to:E.to,onClick:()=>B(E.to),className:"py-3 border-b border-gray-100 text-gray-900 font-medium transition-all hover:text-primary hover:pl-2",children:E.label},E.to)),o.jsx("div",{className:"flex flex-col gap-3 mt-4",children:y?o.jsxs(o.Fragment,{children:[(x==null?void 0:x.accountType)==="provider"&&o.jsx(ye,{to:"/biznes",onClick:()=>e(!1),className:"w-full py-3 px-4 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold text-center",children:" Panel Biznes"}),o.jsx(ye,{to:"/wiadomosci",onClick:()=>e(!1),className:"w-full py-3 px-4 border border-gray-200 text-gray-700 rounded-xl font-medium text-center hover:bg-gray-50",children:" Wiadomoci"}),o.jsx(ye,{to:"/profil",onClick:()=>e(!1),className:"w-full py-3 px-4 border border-gray-200 text-gray-700 rounded-xl font-medium text-center hover:bg-gray-50",children:"Mj profil"}),o.jsx("button",{onClick:()=>{w(),e(!1)},className:"w-full py-3 px-4 border border-red-200 text-red-600 rounded-xl font-medium text-center hover:bg-red-50",children:"Wyloguj si"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center mb-2",children:[o.jsx("div",{className:"text-3xl mb-2",children:" "}),o.jsx("p",{className:"text-sm text-gray-600",children:"Zaloguj si, aby korzysta z penych funkcji"})]}),o.jsx(ye,{to:"/auth?mode=login",onClick:()=>e(!1),className:"w-full py-3 px-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold text-center",children:"ZALOGUJ SI"}),o.jsx(ye,{to:"/auth?mode=register&type=client",onClick:()=>e(!1),className:"w-full py-3 px-4 border-2 border-primary text-primary rounded-xl font-semibold text-center",children:"REJESTRACJA - KLIENT"}),o.jsx(ye,{to:"/auth?mode=register&type=provider",onClick:()=>e(!1),className:"w-full py-3 px-4 border-2 border-emerald-500 text-emerald-600 rounded-xl font-semibold text-center",children:"REJESTRACJA - USUGODAWCA"})]})})]})})]})]})},Q5=()=>{const t=new Date().getFullYear(),e={services:[{label:"Fryzjer",to:"/uslugodawcy/fryzjer"},{label:"Manicure",to:"/uslugodawcy/manicure"},{label:"Masa",to:"/uslugodawcy/masaz"},{label:"Wicej...",to:"/uslugodawcy"}],company:[{label:"O nas",to:"/o-nas"},{label:"Kariera",to:"/kariera"},{label:"Blog",to:"/blog"},{label:"Kontakt",to:"/kontakt"}],help:[{label:"FAQ",to:"/faq"},{label:"Regulamin",to:"/regulamin"},{label:"Polityka prywatnoci",to:"/prywatnosc"},{label:"Wsparcie",to:"/wsparcie"}]};return o.jsx("footer",{className:"bg-gray-900 text-white pt-16 pb-6",id:"contact",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-xl font-bold mb-4",children:"TOMYHOMEAPP"}),o.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"Twj osobisty asystent usug domowych"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center font-bold transition-all hover:bg-accent hover:-translate-y-1",children:"f"}),o.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center font-bold transition-all hover:bg-accent hover:-translate-y-1",children:"ig"}),o.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center font-bold transition-all hover:bg-accent hover:-translate-y-1",children:"tw"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-gray-400 mb-5",children:"Usugi"}),o.jsx("ul",{className:"space-y-3",children:e.services.map(n=>o.jsx("li",{children:o.jsx(ye,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-gray-400 mb-5",children:"Firma"}),o.jsx("ul",{className:"space-y-3",children:e.company.map(n=>o.jsx("li",{children:o.jsx(ye,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-gray-400 mb-5",children:"Pomoc"}),o.jsx("ul",{className:"space-y-3",children:e.help.map(n=>o.jsx("li",{children:o.jsx(ye,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]})]}),o.jsx("div",{className:"pt-6 border-t border-white/10 text-center text-gray-500 text-sm",children:o.jsxs("p",{children:[" ",t," TOMYHOMEAPP. Wszystkie prawa zastrzeone."]})})]})})},J5=({message:t,type:e="success",onClose:n})=>{const[r,i]=V.useState(!1);V.useEffect(()=>{i(!0);const h=setTimeout(()=>{i(!1),setTimeout(n,300)},2700);return()=>clearTimeout(h)},[n]);const a={success:o.jsx(Pt,{className:"w-5 h-5"}),error:o.jsx(ds,{className:"w-5 h-5"}),info:o.jsx(KL,{className:"w-5 h-5"})},c={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return o.jsxs("div",{className:`bg-white rounded-xl shadow-xl flex items-center gap-3 px-6 py-4 transition-all duration-300 ${r?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[o.jsx("div",{className:`w-8 h-8 ${c[e]} text-white rounded-full flex items-center justify-center`,children:a[e]}),o.jsx("span",{className:"font-medium text-gray-900",children:t}),o.jsx("button",{onClick:()=>{i(!1),setTimeout(n,300)},className:"ml-2 text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(ds,{className:"w-4 h-4"})})]})},Y5=()=>o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden opacity-40 pointer-events-none",children:[o.jsx("div",{className:"absolute w-[600px] h-[600px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",top:"-200px",left:"-200px",animationDelay:"0s"}}),o.jsx("div",{className:"absolute w-[800px] h-[800px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",bottom:"-300px",right:"-300px",animationDelay:"7s"}}),o.jsx("div",{className:"absolute w-[500px] h-[500px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animationDelay:"14s"}})]}),Kj=V.createContext({user:null,userData:null,firebaseUser:null,loading:!0,login:()=>{},logout:async()=>{},isAuthenticated:!1}),Gj=V.createContext({showToast:()=>{}}),Zn=()=>V.useContext(Kj),Lr=()=>V.useContext(Gj),X5=()=>o.jsxs("div",{className:"min-h-screen flex flex-col",children:[o.jsx(Y5,{}),o.jsx(G5,{}),o.jsx("main",{className:"flex-grow",children:o.jsxs(Fb,{children:[o.jsx(jt,{path:"/",element:o.jsx(h5,{})}),o.jsx(jt,{path:"/auth",element:o.jsx(f5,{})}),o.jsx(jt,{path:"/profil",element:o.jsx(v5,{})}),o.jsx(jt,{path:"/uslugodawcy/profil/:id",element:o.jsx(_5,{})}),o.jsx(jt,{path:"/uslugodawcy/:category",element:o.jsx(m_,{})}),o.jsx(jt,{path:"/uslugodawcy",element:o.jsx(m_,{})}),o.jsx(jt,{path:"/wiadomosci",element:o.jsx(w5,{})}),o.jsx(jt,{path:"/powiadomienia",element:o.jsx(b5,{})})]})}),o.jsx(Q5,{})]}),eD=()=>o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"adowanie..."})]})});function tD(){const[t,e]=V.useState(null),[n,r]=V.useState(null),[i,a]=V.useState(!0),[c,h]=V.useState(null),[f,m]=V.useState([]);V.useEffect(()=>{const M=HI(vr,async C=>{if(e(C),C)try{const A=await lj(Qc(Yc,"users",C.uid));if(A.exists()){const P=A.data();r(P);const j={id:C.uid,email:C.email||P.email,username:P.username||C.displayName||"",phone:P.phone||"",accountType:P.accountType||"client",businessName:P.businessName,avatar:P.avatar||C.photoURL||void 0};h(j)}else{const P={id:C.uid,email:C.email||"",username:C.displayName||"",phone:"",accountType:"client"};h(P),r(null)}}catch(A){console.error("Error fetching user data:",A),r(null)}else h(null),r(null);a(!1)});return()=>M()},[]);const y=M=>{h(M)},x=async()=>{try{await $I(vr),h(null),r(null),e(null)}catch(M){throw console.error("Logout error:",M),M}},w=(M,C="success")=>{const A=Date.now().toString();m(P=>[...P,{id:A,message:M,type:C}]),setTimeout(()=>{m(P=>P.filter(j=>j.id!==A))},3e3)},R=M=>{m(C=>C.filter(A=>A.id!==M))};return i?o.jsx(eD,{}):o.jsx(Kj.Provider,{value:{user:c,userData:n,firebaseUser:t,loading:i,login:y,logout:x,isAuthenticated:!!t},children:o.jsxs(Gj.Provider,{value:{showToast:w},children:[o.jsxs(Fb,{children:[o.jsxs(jt,{path:"/biznes",element:o.jsx(T5,{}),children:[o.jsx(jt,{index:!0,element:o.jsx(p_,{})}),o.jsx(jt,{path:"uslugi",element:o.jsx(E5,{})}),o.jsx(jt,{path:"dodaj-usluge",element:o.jsx($5,{})}),o.jsx(jt,{path:"kalendarz",element:o.jsx(Z5,{})}),o.jsx(jt,{path:"wiadomosci",element:o.jsx(K5,{})}),o.jsx(jt,{path:"statystyki",element:o.jsx(q5,{})}),o.jsx(jt,{path:"profil",element:o.jsx(g_,{})}),o.jsx(jt,{path:"ustawienia",element:o.jsx(g_,{})}),o.jsx(jt,{path:"pomoc",element:o.jsx(p_,{})})]}),o.jsx(jt,{path:"/*",element:o.jsx(X5,{})})]}),o.jsx("div",{className:"fixed bottom-8 right-8 z-50 flex flex-col gap-3",children:f.map(M=>o.jsx(J5,{message:M.message,type:M.type,onClose:()=>R(M.id)},M.id))})]})})}lm.createRoot(document.getElementById("root")).render(o.jsx(ic.StrictMode,{children:o.jsx(eP,{children:o.jsx(tD,{})})}));
