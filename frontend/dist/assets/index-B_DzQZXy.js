function Q2(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(s,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Y2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D_={exports:{}},vm={},M_={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),J2=Symbol.for("react.portal"),X2=Symbol.for("react.fragment"),eT=Symbol.for("react.strict_mode"),tT=Symbol.for("react.profiler"),nT=Symbol.for("react.provider"),sT=Symbol.for("react.context"),rT=Symbol.for("react.forward_ref"),iT=Symbol.for("react.suspense"),aT=Symbol.for("react.memo"),oT=Symbol.for("react.lazy"),S0=Symbol.iterator;function lT(t){return t===null||typeof t!="object"?null:(t=S0&&t[S0]||t["@@iterator"],typeof t=="function"?t:null)}var O_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V_=Object.assign,B_={};function Fl(t,e,n){this.props=t,this.context=e,this.refs=B_,this.updater=n||O_}Fl.prototype.isReactComponent={};Fl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U_(){}U_.prototype=Fl.prototype;function Yg(t,e,n){this.props=t,this.context=e,this.refs=B_,this.updater=n||O_}var Jg=Yg.prototype=new U_;Jg.constructor=Yg;V_(Jg,Fl.prototype);Jg.isPureReactComponent=!0;var z0=Array.isArray,F_=Object.prototype.hasOwnProperty,Xg={current:null},$_={key:!0,ref:!0,__self:!0,__source:!0};function W_(t,e,n){var s,i={},o=null,l=null;if(e!=null)for(s in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)F_.call(e,s)&&!$_.hasOwnProperty(s)&&(i[s]=e[s]);var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){for(var m=Array(d),f=0;f<d;f++)m[f]=arguments[f+2];i.children=m}if(t&&t.defaultProps)for(s in d=t.defaultProps,d)i[s]===void 0&&(i[s]=d[s]);return{$$typeof:Du,type:t,key:o,ref:l,props:i,_owner:Xg.current}}function cT(t,e){return{$$typeof:Du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ey(t){return typeof t=="object"&&t!==null&&t.$$typeof===Du}function uT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var P0=/\/+/g;function Tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uT(""+t.key):e.toString(36)}function nh(t,e,n,s,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Du:case J2:l=!0}}if(l)return l=t,i=i(l),t=s===""?"."+Tf(l,0):s,z0(i)?(n="",t!=null&&(n=t.replace(P0,"$&/")+"/"),nh(i,e,n,"",function(f){return f})):i!=null&&(ey(i)&&(i=cT(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(P0,"$&/")+"/")+t)),e.push(i)),1;if(l=0,s=s===""?".":s+":",z0(t))for(var d=0;d<t.length;d++){o=t[d];var m=s+Tf(o,d);l+=nh(o,e,n,m,i)}else if(m=lT(t),typeof m=="function")for(t=m.call(t),d=0;!(o=t.next()).done;)o=o.value,m=s+Tf(o,d++),l+=nh(o,e,n,m,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Sd(t,e,n){if(t==null)return t;var s=[],i=0;return nh(t,s,"","",function(o){return e.call(n,o,i++)}),s}function dT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Un={current:null},sh={transition:null},hT={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:sh,ReactCurrentOwner:Xg};function H_(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Sd,forEach:function(t,e,n){Sd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sd(t,function(){e++}),e},toArray:function(t){return Sd(t,function(e){return e})||[]},only:function(t){if(!ey(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=Fl;Ge.Fragment=X2;Ge.Profiler=tT;Ge.PureComponent=Yg;Ge.StrictMode=eT;Ge.Suspense=iT;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hT;Ge.act=H_;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=V_({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Xg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(m in e)F_.call(e,m)&&!$_.hasOwnProperty(m)&&(s[m]=e[m]===void 0&&d!==void 0?d[m]:e[m])}var m=arguments.length-2;if(m===1)s.children=n;else if(1<m){d=Array(m);for(var f=0;f<m;f++)d[f]=arguments[f+2];s.children=d}return{$$typeof:Du,type:t.type,key:i,ref:o,props:s,_owner:l}};Ge.createContext=function(t){return t={$$typeof:sT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nT,_context:t},t.Consumer=t};Ge.createElement=W_;Ge.createFactory=function(t){var e=W_.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:rT,render:t}};Ge.isValidElement=ey;Ge.lazy=function(t){return{$$typeof:oT,_payload:{_status:-1,_result:t},_init:dT}};Ge.memo=function(t,e){return{$$typeof:aT,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=sh.transition;sh.transition={};try{t()}finally{sh.transition=e}};Ge.unstable_act=H_;Ge.useCallback=function(t,e){return Un.current.useCallback(t,e)};Ge.useContext=function(t){return Un.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return Un.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return Un.current.useEffect(t,e)};Ge.useId=function(){return Un.current.useId()};Ge.useImperativeHandle=function(t,e,n){return Un.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return Un.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return Un.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return Un.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return Un.current.useReducer(t,e,n)};Ge.useRef=function(t){return Un.current.useRef(t)};Ge.useState=function(t){return Un.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return Un.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return Un.current.useTransition()};Ge.version="18.3.1";M_.exports=Ge;var N=M_.exports;const nu=L_(N),mT=Q2({__proto__:null,default:nu},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT=N,pT=Symbol.for("react.element"),gT=Symbol.for("react.fragment"),yT=Object.prototype.hasOwnProperty,xT=fT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wT={key:!0,ref:!0,__self:!0,__source:!0};function q_(t,e,n){var s,i={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(s in e)yT.call(e,s)&&!wT.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:pT,type:t,key:o,ref:l,props:i,_owner:xT.current}}vm.Fragment=gT;vm.jsx=q_;vm.jsxs=q_;D_.exports=vm;var r=D_.exports,gp={},Z_={exports:{}},gs={},K_={exports:{}},G_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Q){var O=W.length;W.push(Q);e:for(;0<O;){var q=O-1>>>1,ne=W[q];if(0<i(ne,Q))W[q]=Q,W[O]=ne,O=q;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var Q=W[0],O=W.pop();if(O!==Q){W[0]=O;e:for(var q=0,ne=W.length,Ee=ne>>>1;q<Ee;){var se=2*(q+1)-1,le=W[se],Se=se+1,pt=W[Se];if(0>i(le,O))Se<ne&&0>i(pt,le)?(W[q]=pt,W[Se]=O,q=Se):(W[q]=le,W[se]=O,q=se);else if(Se<ne&&0>i(pt,O))W[q]=pt,W[Se]=O,q=Se;else break e}}return Q}function i(W,Q){var O=W.sortIndex-Q.sortIndex;return O!==0?O:W.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var m=[],f=[],g=1,x=null,w=3,E=!1,S=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(W){for(var Q=n(f);Q!==null;){if(Q.callback===null)s(f);else if(Q.startTime<=W)s(f),Q.sortIndex=Q.expirationTime,e(m,Q);else break;Q=n(f)}}function U(W){if(A=!1,j(W),!S)if(n(m)!==null)S=!0,we(D);else{var Q=n(f);Q!==null&&te(U,Q.startTime-W)}}function D(W,Q){S=!1,A&&(A=!1,b(T),T=-1),E=!0;var O=w;try{for(j(Q),x=n(m);x!==null&&(!(x.expirationTime>Q)||W&&!B());){var q=x.callback;if(typeof q=="function"){x.callback=null,w=x.priorityLevel;var ne=q(x.expirationTime<=Q);Q=t.unstable_now(),typeof ne=="function"?x.callback=ne:x===n(m)&&s(m),j(Q)}else s(m);x=n(m)}if(x!==null)var Ee=!0;else{var se=n(f);se!==null&&te(U,se.startTime-Q),Ee=!1}return Ee}finally{x=null,w=O,E=!1}}var F=!1,P=null,T=-1,M=5,R=-1;function B(){return!(t.unstable_now()-R<M)}function $(){if(P!==null){var W=t.unstable_now();R=W;var Q=!0;try{Q=P(!0,W)}finally{Q?I():(F=!1,P=null)}}else F=!1}var I;if(typeof k=="function")I=function(){k($)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,de=he.port2;he.port1.onmessage=$,I=function(){de.postMessage(null)}}else I=function(){C($,0)};function we(W){P=W,F||(F=!0,I())}function te(W,Q){T=C(function(){W(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){S||E||(S=!0,we(D))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(W){switch(w){case 1:case 2:case 3:var Q=3;break;default:Q=w}var O=w;w=Q;try{return W()}finally{w=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var O=w;w=W;try{return Q()}finally{w=O}},t.unstable_scheduleCallback=function(W,Q,O){var q=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?q+O:q):O=q,W){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=O+ne,W={id:g++,callback:Q,priorityLevel:W,startTime:O,expirationTime:ne,sortIndex:-1},O>q?(W.sortIndex=O,e(f,W),n(m)===null&&W===n(f)&&(A?(b(T),T=-1):A=!0,te(U,O-q))):(W.sortIndex=ne,e(m,W),S||E||(S=!0,we(D))),W},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(W){var Q=w;return function(){var O=w;w=Q;try{return W.apply(this,arguments)}finally{w=O}}}})(G_);K_.exports=G_;var vT=K_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T=N,ps=vT;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q_=new Set,su={};function po(t,e){jl(t,e),jl(t+"Capture",e)}function jl(t,e){for(su[t]=e,t=0;t<e.length;t++)Q_.add(e[t])}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yp=Object.prototype.hasOwnProperty,bT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C0={},I0={};function jT(t){return yp.call(I0,t)?!0:yp.call(C0,t)?!1:bT.test(t)?I0[t]=!0:(C0[t]=!0,!1)}function NT(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kT(t,e,n,s){if(e===null||typeof e>"u"||NT(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fn(t,e,n,s,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pn[t]=new Fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pn[e]=new Fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pn[t]=new Fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pn[t]=new Fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pn[t]=new Fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pn[t]=new Fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pn[t]=new Fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pn[t]=new Fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pn[t]=new Fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ty=/[\-:]([a-z])/g;function ny(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ty,ny);pn[e]=new Fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ty,ny);pn[e]=new Fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ty,ny);pn[e]=new Fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pn[t]=new Fn(t,1,!1,t.toLowerCase(),null,!1,!1)});pn.xlinkHref=new Fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pn[t]=new Fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function sy(t,e,n,s){var i=pn.hasOwnProperty(e)?pn[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kT(e,n,i,s)&&(n=null),s||i===null?jT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var bi=_T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zd=Symbol.for("react.element"),Jo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),ry=Symbol.for("react.strict_mode"),xp=Symbol.for("react.profiler"),Y_=Symbol.for("react.provider"),J_=Symbol.for("react.context"),iy=Symbol.for("react.forward_ref"),wp=Symbol.for("react.suspense"),vp=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),X_=Symbol.for("react.offscreen"),A0=Symbol.iterator;function _c(t){return t===null||typeof t!="object"?null:(t=A0&&t[A0]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,Ef;function Pc(t){if(Ef===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ef=e&&e[1]||""}return`
`+Ef+t}var Sf=!1;function zf(t,e){if(!t||Sf)return"";Sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var s=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){s=f}t.call(e.prototype)}else{try{throw Error()}catch(f){s=f}t()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=s.stack.split(`
`),l=i.length-1,d=o.length-1;1<=l&&0<=d&&i[l]!==o[d];)d--;for(;1<=l&&0<=d;l--,d--)if(i[l]!==o[d]){if(l!==1||d!==1)do if(l--,d--,0>d||i[l]!==o[d]){var m=`
`+i[l].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=l&&0<=d);break}}}finally{Sf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pc(t):""}function TT(t){switch(t.tag){case 5:return Pc(t.type);case 16:return Pc("Lazy");case 13:return Pc("Suspense");case 19:return Pc("SuspenseList");case 0:case 2:case 15:return t=zf(t.type,!1),t;case 11:return t=zf(t.type.render,!1),t;case 1:return t=zf(t.type,!0),t;default:return""}}function _p(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Jo:return"Portal";case xp:return"Profiler";case ry:return"StrictMode";case wp:return"Suspense";case vp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J_:return(t.displayName||"Context")+".Consumer";case Y_:return(t._context.displayName||"Context")+".Provider";case iy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ay:return e=t.displayName||null,e!==null?e:_p(t.type)||"Memo";case Mi:e=t._payload,t=t._init;try{return _p(t(e))}catch{}}return null}function ET(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _p(e);case 8:return e===ry?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ua(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ST(t){var e=eb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){s=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pd(t){t._valueTracker||(t._valueTracker=ST(t))}function tb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=eb(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Nh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bp(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function R0(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=ua(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nb(t,e){e=e.checked,e!=null&&sy(t,"checked",e,!1)}function jp(t,e){nb(t,e);var n=ua(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Np(t,e.type,n):e.hasOwnProperty("defaultValue")&&Np(t,e.type,ua(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function L0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Np(t,e,n){(e!=="number"||Nh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cc=Array.isArray;function dl(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+ua(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function D0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Cc(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ua(n)}}function sb(t,e){var n=ua(e.value),s=ua(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function M0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cd,ib=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cd=Cd||document.createElement("div"),Cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ru(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zT=["Webkit","ms","Moz","O"];Object.keys(Bc).forEach(function(t){zT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bc[e]=Bc[t]})});function ab(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bc.hasOwnProperty(t)&&Bc[t]?(""+e).trim():e+"px"}function ob(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=ab(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var PT=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ep(t,e){if(e){if(PT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zp=null;function oy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pp=null,hl=null,ml=null;function O0(t){if(t=Vu(t)){if(typeof Pp!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=km(e),Pp(t.stateNode,t.type,e))}}function lb(t){hl?ml?ml.push(t):ml=[t]:hl=t}function cb(){if(hl){var t=hl,e=ml;if(ml=hl=null,O0(t),e)for(t=0;t<e.length;t++)O0(e[t])}}function ub(t,e){return t(e)}function db(){}var Pf=!1;function hb(t,e,n){if(Pf)return t(e,n);Pf=!0;try{return ub(t,e,n)}finally{Pf=!1,(hl!==null||ml!==null)&&(db(),cb())}}function iu(t,e){var n=t.stateNode;if(n===null)return null;var s=km(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Cp=!1;if(hi)try{var bc={};Object.defineProperty(bc,"passive",{get:function(){Cp=!0}}),window.addEventListener("test",bc,bc),window.removeEventListener("test",bc,bc)}catch{Cp=!1}function CT(t,e,n,s,i,o,l,d,m){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(g){this.onError(g)}}var Uc=!1,kh=null,Th=!1,Ip=null,IT={onError:function(t){Uc=!0,kh=t}};function AT(t,e,n,s,i,o,l,d,m){Uc=!1,kh=null,CT.apply(IT,arguments)}function RT(t,e,n,s,i,o,l,d,m){if(AT.apply(this,arguments),Uc){if(Uc){var f=kh;Uc=!1,kh=null}else throw Error(oe(198));Th||(Th=!0,Ip=f)}}function go(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V0(t){if(go(t)!==t)throw Error(oe(188))}function LT(t){var e=t.alternate;if(!e){if(e=go(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return V0(i),t;if(o===s)return V0(i),e;o=o.sibling}throw Error(oe(188))}if(n.return!==s.return)n=i,s=o;else{for(var l=!1,d=i.child;d;){if(d===n){l=!0,n=i,s=o;break}if(d===s){l=!0,s=i,n=o;break}d=d.sibling}if(!l){for(d=o.child;d;){if(d===n){l=!0,n=o,s=i;break}if(d===s){l=!0,s=o,n=i;break}d=d.sibling}if(!l)throw Error(oe(189))}}if(n.alternate!==s)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function fb(t){return t=LT(t),t!==null?pb(t):null}function pb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pb(t);if(e!==null)return e;t=t.sibling}return null}var gb=ps.unstable_scheduleCallback,B0=ps.unstable_cancelCallback,DT=ps.unstable_shouldYield,MT=ps.unstable_requestPaint,$t=ps.unstable_now,OT=ps.unstable_getCurrentPriorityLevel,ly=ps.unstable_ImmediatePriority,yb=ps.unstable_UserBlockingPriority,Eh=ps.unstable_NormalPriority,VT=ps.unstable_LowPriority,xb=ps.unstable_IdlePriority,_m=null,_r=null;function BT(t){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(_m,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:$T,UT=Math.log,FT=Math.LN2;function $T(t){return t>>>=0,t===0?32:31-(UT(t)/FT|0)|0}var Id=64,Ad=4194304;function Ic(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sh(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var d=l&~i;d!==0?s=Ic(d):(o&=l,o!==0&&(s=Ic(o)))}else l=n&~i,l!==0?s=Ic(l):o!==0&&(s=Ic(o));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-er(e),i=1<<n,s|=t[n],e&=~i;return s}function WT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HT(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-er(o),d=1<<l,m=i[l];m===-1?(!(d&n)||d&s)&&(i[l]=WT(d,e)):m<=e&&(t.expiredLanes|=d),o&=~d}}function Ap(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wb(){var t=Id;return Id<<=1,!(Id&4194240)&&(Id=64),t}function Cf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function qT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-er(n),o=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~o}}function cy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-er(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var ft=0;function vb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _b,uy,bb,jb,Nb,Rp=!1,Rd=[],Yi=null,Ji=null,Xi=null,au=new Map,ou=new Map,Vi=[],ZT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U0(t,e){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":au.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ou.delete(e.pointerId)}}function jc(t,e,n,s,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Vu(e),e!==null&&uy(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function KT(t,e,n,s,i){switch(e){case"focusin":return Yi=jc(Yi,t,e,n,s,i),!0;case"dragenter":return Ji=jc(Ji,t,e,n,s,i),!0;case"mouseover":return Xi=jc(Xi,t,e,n,s,i),!0;case"pointerover":var o=i.pointerId;return au.set(o,jc(au.get(o)||null,t,e,n,s,i)),!0;case"gotpointercapture":return o=i.pointerId,ou.set(o,jc(ou.get(o)||null,t,e,n,s,i)),!0}return!1}function kb(t){var e=Fa(t.target);if(e!==null){var n=go(e);if(n!==null){if(e=n.tag,e===13){if(e=mb(n),e!==null){t.blockedOn=e,Nb(t.priority,function(){bb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);zp=s,n.target.dispatchEvent(s),zp=null}else return e=Vu(n),e!==null&&uy(e),t.blockedOn=n,!1;e.shift()}return!0}function F0(t,e,n){rh(t)&&n.delete(e)}function GT(){Rp=!1,Yi!==null&&rh(Yi)&&(Yi=null),Ji!==null&&rh(Ji)&&(Ji=null),Xi!==null&&rh(Xi)&&(Xi=null),au.forEach(F0),ou.forEach(F0)}function Nc(t,e){t.blockedOn===e&&(t.blockedOn=null,Rp||(Rp=!0,ps.unstable_scheduleCallback(ps.unstable_NormalPriority,GT)))}function lu(t){function e(i){return Nc(i,t)}if(0<Rd.length){Nc(Rd[0],t);for(var n=1;n<Rd.length;n++){var s=Rd[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Yi!==null&&Nc(Yi,t),Ji!==null&&Nc(Ji,t),Xi!==null&&Nc(Xi,t),au.forEach(e),ou.forEach(e),n=0;n<Vi.length;n++)s=Vi[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Vi.length&&(n=Vi[0],n.blockedOn===null);)kb(n),n.blockedOn===null&&Vi.shift()}var fl=bi.ReactCurrentBatchConfig,zh=!0;function QT(t,e,n,s){var i=ft,o=fl.transition;fl.transition=null;try{ft=1,dy(t,e,n,s)}finally{ft=i,fl.transition=o}}function YT(t,e,n,s){var i=ft,o=fl.transition;fl.transition=null;try{ft=4,dy(t,e,n,s)}finally{ft=i,fl.transition=o}}function dy(t,e,n,s){if(zh){var i=Lp(t,e,n,s);if(i===null)Uf(t,e,s,Ph,n),U0(t,s);else if(KT(i,t,e,n,s))s.stopPropagation();else if(U0(t,s),e&4&&-1<ZT.indexOf(t)){for(;i!==null;){var o=Vu(i);if(o!==null&&_b(o),o=Lp(t,e,n,s),o===null&&Uf(t,e,s,Ph,n),o===i)break;i=o}i!==null&&s.stopPropagation()}else Uf(t,e,s,null,n)}}var Ph=null;function Lp(t,e,n,s){if(Ph=null,t=oy(s),t=Fa(t),t!==null)if(e=go(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ph=t,null}function Tb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OT()){case ly:return 1;case yb:return 4;case Eh:case VT:return 16;case xb:return 536870912;default:return 16}default:return 16}}var qi=null,hy=null,ih=null;function Eb(){if(ih)return ih;var t,e=hy,n=e.length,s,i="value"in qi?qi.value:qi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(s=1;s<=l&&e[n-s]===i[o-s];s++);return ih=i.slice(t,1<s?1-s:void 0)}function ah(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ld(){return!0}function $0(){return!1}function ys(t){function e(n,s,i,o,l){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ld:$0,this.isPropagationStopped=$0,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ld)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ld)},persist:function(){},isPersistent:Ld}),e}var $l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},my=ys($l),Ou=It({},$l,{view:0,detail:0}),JT=ys(Ou),If,Af,kc,bm=It({},Ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kc&&(kc&&t.type==="mousemove"?(If=t.screenX-kc.screenX,Af=t.screenY-kc.screenY):Af=If=0,kc=t),If)},movementY:function(t){return"movementY"in t?t.movementY:Af}}),W0=ys(bm),XT=It({},bm,{dataTransfer:0}),eE=ys(XT),tE=It({},Ou,{relatedTarget:0}),Rf=ys(tE),nE=It({},$l,{animationName:0,elapsedTime:0,pseudoElement:0}),sE=ys(nE),rE=It({},$l,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iE=ys(rE),aE=It({},$l,{data:0}),H0=ys(aE),oE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cE[t])?!!e[t]:!1}function fy(){return uE}var dE=It({},Ou,{key:function(t){if(t.key){var e=oE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ah(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fy,charCode:function(t){return t.type==="keypress"?ah(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ah(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hE=ys(dE),mE=It({},bm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q0=ys(mE),fE=It({},Ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fy}),pE=ys(fE),gE=It({},$l,{propertyName:0,elapsedTime:0,pseudoElement:0}),yE=ys(gE),xE=It({},bm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wE=ys(xE),vE=[9,13,27,32],py=hi&&"CompositionEvent"in window,Fc=null;hi&&"documentMode"in document&&(Fc=document.documentMode);var _E=hi&&"TextEvent"in window&&!Fc,Sb=hi&&(!py||Fc&&8<Fc&&11>=Fc),Z0=" ",K0=!1;function zb(t,e){switch(t){case"keyup":return vE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var el=!1;function bE(t,e){switch(t){case"compositionend":return Pb(e);case"keypress":return e.which!==32?null:(K0=!0,Z0);case"textInput":return t=e.data,t===Z0&&K0?null:t;default:return null}}function jE(t,e){if(el)return t==="compositionend"||!py&&zb(t,e)?(t=Eb(),ih=hy=qi=null,el=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sb&&e.locale!=="ko"?null:e.data;default:return null}}var NE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NE[t.type]:e==="textarea"}function Cb(t,e,n,s){lb(s),e=Ch(e,"onChange"),0<e.length&&(n=new my("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var $c=null,cu=null;function kE(t){Fb(t,0)}function jm(t){var e=sl(t);if(tb(e))return t}function TE(t,e){if(t==="change")return e}var Ib=!1;if(hi){var Lf;if(hi){var Df="oninput"in document;if(!Df){var Q0=document.createElement("div");Q0.setAttribute("oninput","return;"),Df=typeof Q0.oninput=="function"}Lf=Df}else Lf=!1;Ib=Lf&&(!document.documentMode||9<document.documentMode)}function Y0(){$c&&($c.detachEvent("onpropertychange",Ab),cu=$c=null)}function Ab(t){if(t.propertyName==="value"&&jm(cu)){var e=[];Cb(e,cu,t,oy(t)),hb(kE,e)}}function EE(t,e,n){t==="focusin"?(Y0(),$c=e,cu=n,$c.attachEvent("onpropertychange",Ab)):t==="focusout"&&Y0()}function SE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jm(cu)}function zE(t,e){if(t==="click")return jm(e)}function PE(t,e){if(t==="input"||t==="change")return jm(e)}function CE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sr=typeof Object.is=="function"?Object.is:CE;function uu(t,e){if(sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!yp.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function J0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X0(t,e){var n=J0(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J0(n)}}function Rb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lb(){for(var t=window,e=Nh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nh(t.document)}return e}function gy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IE(t){var e=Lb(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Rb(n.ownerDocument.documentElement,n)){if(s!==null&&gy(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(s.start,i);s=s.end===void 0?o:Math.min(s.end,i),!t.extend&&o>s&&(i=s,s=o,o=i),i=X0(n,o);var l=X0(n,s);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>s?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AE=hi&&"documentMode"in document&&11>=document.documentMode,tl=null,Dp=null,Wc=null,Mp=!1;function ew(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mp||tl==null||tl!==Nh(s)||(s=tl,"selectionStart"in s&&gy(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Wc&&uu(Wc,s)||(Wc=s,s=Ch(Dp,"onSelect"),0<s.length&&(e=new my("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=tl)))}function Dd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nl={animationend:Dd("Animation","AnimationEnd"),animationiteration:Dd("Animation","AnimationIteration"),animationstart:Dd("Animation","AnimationStart"),transitionend:Dd("Transition","TransitionEnd")},Mf={},Db={};hi&&(Db=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function Nm(t){if(Mf[t])return Mf[t];if(!nl[t])return t;var e=nl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Db)return Mf[t]=e[n];return t}var Mb=Nm("animationend"),Ob=Nm("animationiteration"),Vb=Nm("animationstart"),Bb=Nm("transitionend"),Ub=new Map,tw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(t,e){Ub.set(t,e),po(e,[t])}for(var Of=0;Of<tw.length;Of++){var Vf=tw[Of],RE=Vf.toLowerCase(),LE=Vf[0].toUpperCase()+Vf.slice(1);_a(RE,"on"+LE)}_a(Mb,"onAnimationEnd");_a(Ob,"onAnimationIteration");_a(Vb,"onAnimationStart");_a("dblclick","onDoubleClick");_a("focusin","onFocus");_a("focusout","onBlur");_a(Bb,"onTransitionEnd");jl("onMouseEnter",["mouseout","mouseover"]);jl("onMouseLeave",["mouseout","mouseover"]);jl("onPointerEnter",["pointerout","pointerover"]);jl("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ac));function nw(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,RT(s,e,void 0,t),t.currentTarget=null}function Fb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var o=void 0;if(e)for(var l=s.length-1;0<=l;l--){var d=s[l],m=d.instance,f=d.currentTarget;if(d=d.listener,m!==o&&i.isPropagationStopped())break e;nw(i,d,f),o=m}else for(l=0;l<s.length;l++){if(d=s[l],m=d.instance,f=d.currentTarget,d=d.listener,m!==o&&i.isPropagationStopped())break e;nw(i,d,f),o=m}}}if(Th)throw t=Ip,Th=!1,Ip=null,t}function bt(t,e){var n=e[Fp];n===void 0&&(n=e[Fp]=new Set);var s=t+"__bubble";n.has(s)||($b(e,t,2,!1),n.add(s))}function Bf(t,e,n){var s=0;e&&(s|=4),$b(n,t,s,e)}var Md="_reactListening"+Math.random().toString(36).slice(2);function du(t){if(!t[Md]){t[Md]=!0,Q_.forEach(function(n){n!=="selectionchange"&&(DE.has(n)||Bf(n,!1,t),Bf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Md]||(e[Md]=!0,Bf("selectionchange",!1,e))}}function $b(t,e,n,s){switch(Tb(e)){case 1:var i=QT;break;case 4:i=YT;break;default:i=dy}n=i.bind(null,e,n,t),i=void 0,!Cp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Uf(t,e,n,s,i){var o=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var d=s.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(l===4)for(l=s.return;l!==null;){var m=l.tag;if((m===3||m===4)&&(m=l.stateNode.containerInfo,m===i||m.nodeType===8&&m.parentNode===i))return;l=l.return}for(;d!==null;){if(l=Fa(d),l===null)return;if(m=l.tag,m===5||m===6){s=o=l;continue e}d=d.parentNode}}s=s.return}hb(function(){var f=o,g=oy(n),x=[];e:{var w=Ub.get(t);if(w!==void 0){var E=my,S=t;switch(t){case"keypress":if(ah(n)===0)break e;case"keydown":case"keyup":E=hE;break;case"focusin":S="focus",E=Rf;break;case"focusout":S="blur",E=Rf;break;case"beforeblur":case"afterblur":E=Rf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=eE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=pE;break;case Mb:case Ob:case Vb:E=sE;break;case Bb:E=yE;break;case"scroll":E=JT;break;case"wheel":E=wE;break;case"copy":case"cut":case"paste":E=iE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=q0}var A=(e&4)!==0,C=!A&&t==="scroll",b=A?w!==null?w+"Capture":null:w;A=[];for(var k=f,j;k!==null;){j=k;var U=j.stateNode;if(j.tag===5&&U!==null&&(j=U,b!==null&&(U=iu(k,b),U!=null&&A.push(hu(k,U,j)))),C)break;k=k.return}0<A.length&&(w=new E(w,S,null,n,g),x.push({event:w,listeners:A}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",w&&n!==zp&&(S=n.relatedTarget||n.fromElement)&&(Fa(S)||S[mi]))break e;if((E||w)&&(w=g.window===g?g:(w=g.ownerDocument)?w.defaultView||w.parentWindow:window,E?(S=n.relatedTarget||n.toElement,E=f,S=S?Fa(S):null,S!==null&&(C=go(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(E=null,S=f),E!==S)){if(A=W0,U="onMouseLeave",b="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(A=q0,U="onPointerLeave",b="onPointerEnter",k="pointer"),C=E==null?w:sl(E),j=S==null?w:sl(S),w=new A(U,k+"leave",E,n,g),w.target=C,w.relatedTarget=j,U=null,Fa(g)===f&&(A=new A(b,k+"enter",S,n,g),A.target=j,A.relatedTarget=C,U=A),C=U,E&&S)t:{for(A=E,b=S,k=0,j=A;j;j=qo(j))k++;for(j=0,U=b;U;U=qo(U))j++;for(;0<k-j;)A=qo(A),k--;for(;0<j-k;)b=qo(b),j--;for(;k--;){if(A===b||b!==null&&A===b.alternate)break t;A=qo(A),b=qo(b)}A=null}else A=null;E!==null&&sw(x,w,E,A,!1),S!==null&&C!==null&&sw(x,C,S,A,!0)}}e:{if(w=f?sl(f):window,E=w.nodeName&&w.nodeName.toLowerCase(),E==="select"||E==="input"&&w.type==="file")var D=TE;else if(G0(w))if(Ib)D=PE;else{D=SE;var F=EE}else(E=w.nodeName)&&E.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(D=zE);if(D&&(D=D(t,f))){Cb(x,D,n,g);break e}F&&F(t,w,f),t==="focusout"&&(F=w._wrapperState)&&F.controlled&&w.type==="number"&&Np(w,"number",w.value)}switch(F=f?sl(f):window,t){case"focusin":(G0(F)||F.contentEditable==="true")&&(tl=F,Dp=f,Wc=null);break;case"focusout":Wc=Dp=tl=null;break;case"mousedown":Mp=!0;break;case"contextmenu":case"mouseup":case"dragend":Mp=!1,ew(x,n,g);break;case"selectionchange":if(AE)break;case"keydown":case"keyup":ew(x,n,g)}var P;if(py)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else el?zb(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Sb&&n.locale!=="ko"&&(el||T!=="onCompositionStart"?T==="onCompositionEnd"&&el&&(P=Eb()):(qi=g,hy="value"in qi?qi.value:qi.textContent,el=!0)),F=Ch(f,T),0<F.length&&(T=new H0(T,t,null,n,g),x.push({event:T,listeners:F}),P?T.data=P:(P=Pb(n),P!==null&&(T.data=P)))),(P=_E?bE(t,n):jE(t,n))&&(f=Ch(f,"onBeforeInput"),0<f.length&&(g=new H0("onBeforeInput","beforeinput",null,n,g),x.push({event:g,listeners:f}),g.data=P))}Fb(x,e)})}function hu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ch(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=iu(t,n),o!=null&&s.unshift(hu(t,o,i)),o=iu(t,e),o!=null&&s.push(hu(t,o,i))),t=t.return}return s}function qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sw(t,e,n,s,i){for(var o=e._reactName,l=[];n!==null&&n!==s;){var d=n,m=d.alternate,f=d.stateNode;if(m!==null&&m===s)break;d.tag===5&&f!==null&&(d=f,i?(m=iu(n,o),m!=null&&l.unshift(hu(n,m,d))):i||(m=iu(n,o),m!=null&&l.push(hu(n,m,d)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var ME=/\r\n?/g,OE=/\u0000|\uFFFD/g;function rw(t){return(typeof t=="string"?t:""+t).replace(ME,`
`).replace(OE,"")}function Od(t,e,n){if(e=rw(e),rw(t)!==e&&n)throw Error(oe(425))}function Ih(){}var Op=null,Vp=null;function Bp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Up=typeof setTimeout=="function"?setTimeout:void 0,VE=typeof clearTimeout=="function"?clearTimeout:void 0,iw=typeof Promise=="function"?Promise:void 0,BE=typeof queueMicrotask=="function"?queueMicrotask:typeof iw<"u"?function(t){return iw.resolve(null).then(t).catch(UE)}:Up;function UE(t){setTimeout(function(){throw t})}function Ff(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),lu(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);lu(e)}function ea(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wl=Math.random().toString(36).slice(2),wr="__reactFiber$"+Wl,mu="__reactProps$"+Wl,mi="__reactContainer$"+Wl,Fp="__reactEvents$"+Wl,FE="__reactListeners$"+Wl,$E="__reactHandles$"+Wl;function Fa(t){var e=t[wr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mi]||n[wr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aw(t);t!==null;){if(n=t[wr])return n;t=aw(t)}return e}t=n,n=t.parentNode}return null}function Vu(t){return t=t[wr]||t[mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function km(t){return t[mu]||null}var $p=[],rl=-1;function ba(t){return{current:t}}function Nt(t){0>rl||(t.current=$p[rl],$p[rl]=null,rl--)}function _t(t,e){rl++,$p[rl]=t.current,t.current=e}var da={},En=ba(da),Jn=ba(!1),eo=da;function Nl(t,e){var n=t.type.contextTypes;if(!n)return da;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xn(t){return t=t.childContextTypes,t!=null}function Ah(){Nt(Jn),Nt(En)}function ow(t,e,n){if(En.current!==da)throw Error(oe(168));_t(En,e),_t(Jn,n)}function Wb(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(oe(108,ET(t)||"Unknown",i));return It({},n,s)}function Rh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||da,eo=En.current,_t(En,t),_t(Jn,Jn.current),!0}function lw(t,e,n){var s=t.stateNode;if(!s)throw Error(oe(169));n?(t=Wb(t,e,eo),s.__reactInternalMemoizedMergedChildContext=t,Nt(Jn),Nt(En),_t(En,t)):Nt(Jn),_t(Jn,n)}var ni=null,Tm=!1,$f=!1;function Hb(t){ni===null?ni=[t]:ni.push(t)}function WE(t){Tm=!0,Hb(t)}function ja(){if(!$f&&ni!==null){$f=!0;var t=0,e=ft;try{var n=ni;for(ft=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}ni=null,Tm=!1}catch(i){throw ni!==null&&(ni=ni.slice(t+1)),gb(ly,ja),i}finally{ft=e,$f=!1}}return null}var il=[],al=0,Lh=null,Dh=0,Ss=[],zs=0,to=null,ri=1,ii="";function Va(t,e){il[al++]=Dh,il[al++]=Lh,Lh=t,Dh=e}function qb(t,e,n){Ss[zs++]=ri,Ss[zs++]=ii,Ss[zs++]=to,to=t;var s=ri;t=ii;var i=32-er(s)-1;s&=~(1<<i),n+=1;var o=32-er(e)+i;if(30<o){var l=i-i%5;o=(s&(1<<l)-1).toString(32),s>>=l,i-=l,ri=1<<32-er(e)+i|n<<i|s,ii=o+t}else ri=1<<o|n<<i|s,ii=t}function yy(t){t.return!==null&&(Va(t,1),qb(t,1,0))}function xy(t){for(;t===Lh;)Lh=il[--al],il[al]=null,Dh=il[--al],il[al]=null;for(;t===to;)to=Ss[--zs],Ss[zs]=null,ii=Ss[--zs],Ss[zs]=null,ri=Ss[--zs],Ss[zs]=null}var fs=null,ds=null,kt=!1,Ys=null;function Zb(t,e){var n=Cs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fs=t,ds=ea(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fs=t,ds=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:ri,overflow:ii}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fs=t,ds=null,!0):!1;default:return!1}}function Wp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hp(t){if(kt){var e=ds;if(e){var n=e;if(!cw(t,e)){if(Wp(t))throw Error(oe(418));e=ea(n.nextSibling);var s=fs;e&&cw(t,e)?Zb(s,n):(t.flags=t.flags&-4097|2,kt=!1,fs=t)}}else{if(Wp(t))throw Error(oe(418));t.flags=t.flags&-4097|2,kt=!1,fs=t}}}function uw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fs=t}function Vd(t){if(t!==fs)return!1;if(!kt)return uw(t),kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bp(t.type,t.memoizedProps)),e&&(e=ds)){if(Wp(t))throw Kb(),Error(oe(418));for(;e;)Zb(t,e),e=ea(e.nextSibling)}if(uw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ds=ea(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ds=null}}else ds=fs?ea(t.stateNode.nextSibling):null;return!0}function Kb(){for(var t=ds;t;)t=ea(t.nextSibling)}function kl(){ds=fs=null,kt=!1}function wy(t){Ys===null?Ys=[t]:Ys.push(t)}var HE=bi.ReactCurrentBatchConfig;function Tc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var s=n.stateNode}if(!s)throw Error(oe(147,t));var i=s,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var d=i.refs;l===null?delete d[o]:d[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Bd(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dw(t){var e=t._init;return e(t._payload)}function Gb(t){function e(b,k){if(t){var j=b.deletions;j===null?(b.deletions=[k],b.flags|=16):j.push(k)}}function n(b,k){if(!t)return null;for(;k!==null;)e(b,k),k=k.sibling;return null}function s(b,k){for(b=new Map;k!==null;)k.key!==null?b.set(k.key,k):b.set(k.index,k),k=k.sibling;return b}function i(b,k){return b=ra(b,k),b.index=0,b.sibling=null,b}function o(b,k,j){return b.index=j,t?(j=b.alternate,j!==null?(j=j.index,j<k?(b.flags|=2,k):j):(b.flags|=2,k)):(b.flags|=1048576,k)}function l(b){return t&&b.alternate===null&&(b.flags|=2),b}function d(b,k,j,U){return k===null||k.tag!==6?(k=Qf(j,b.mode,U),k.return=b,k):(k=i(k,j),k.return=b,k)}function m(b,k,j,U){var D=j.type;return D===Xo?g(b,k,j.props.children,U,j.key):k!==null&&(k.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Mi&&dw(D)===k.type)?(U=i(k,j.props),U.ref=Tc(b,k,j),U.return=b,U):(U=mh(j.type,j.key,j.props,null,b.mode,U),U.ref=Tc(b,k,j),U.return=b,U)}function f(b,k,j,U){return k===null||k.tag!==4||k.stateNode.containerInfo!==j.containerInfo||k.stateNode.implementation!==j.implementation?(k=Yf(j,b.mode,U),k.return=b,k):(k=i(k,j.children||[]),k.return=b,k)}function g(b,k,j,U,D){return k===null||k.tag!==7?(k=Ka(j,b.mode,U,D),k.return=b,k):(k=i(k,j),k.return=b,k)}function x(b,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Qf(""+k,b.mode,j),k.return=b,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case zd:return j=mh(k.type,k.key,k.props,null,b.mode,j),j.ref=Tc(b,null,k),j.return=b,j;case Jo:return k=Yf(k,b.mode,j),k.return=b,k;case Mi:var U=k._init;return x(b,U(k._payload),j)}if(Cc(k)||_c(k))return k=Ka(k,b.mode,j,null),k.return=b,k;Bd(b,k)}return null}function w(b,k,j,U){var D=k!==null?k.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return D!==null?null:d(b,k,""+j,U);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case zd:return j.key===D?m(b,k,j,U):null;case Jo:return j.key===D?f(b,k,j,U):null;case Mi:return D=j._init,w(b,k,D(j._payload),U)}if(Cc(j)||_c(j))return D!==null?null:g(b,k,j,U,null);Bd(b,j)}return null}function E(b,k,j,U,D){if(typeof U=="string"&&U!==""||typeof U=="number")return b=b.get(j)||null,d(k,b,""+U,D);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case zd:return b=b.get(U.key===null?j:U.key)||null,m(k,b,U,D);case Jo:return b=b.get(U.key===null?j:U.key)||null,f(k,b,U,D);case Mi:var F=U._init;return E(b,k,j,F(U._payload),D)}if(Cc(U)||_c(U))return b=b.get(j)||null,g(k,b,U,D,null);Bd(k,U)}return null}function S(b,k,j,U){for(var D=null,F=null,P=k,T=k=0,M=null;P!==null&&T<j.length;T++){P.index>T?(M=P,P=null):M=P.sibling;var R=w(b,P,j[T],U);if(R===null){P===null&&(P=M);break}t&&P&&R.alternate===null&&e(b,P),k=o(R,k,T),F===null?D=R:F.sibling=R,F=R,P=M}if(T===j.length)return n(b,P),kt&&Va(b,T),D;if(P===null){for(;T<j.length;T++)P=x(b,j[T],U),P!==null&&(k=o(P,k,T),F===null?D=P:F.sibling=P,F=P);return kt&&Va(b,T),D}for(P=s(b,P);T<j.length;T++)M=E(P,b,T,j[T],U),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?T:M.key),k=o(M,k,T),F===null?D=M:F.sibling=M,F=M);return t&&P.forEach(function(B){return e(b,B)}),kt&&Va(b,T),D}function A(b,k,j,U){var D=_c(j);if(typeof D!="function")throw Error(oe(150));if(j=D.call(j),j==null)throw Error(oe(151));for(var F=D=null,P=k,T=k=0,M=null,R=j.next();P!==null&&!R.done;T++,R=j.next()){P.index>T?(M=P,P=null):M=P.sibling;var B=w(b,P,R.value,U);if(B===null){P===null&&(P=M);break}t&&P&&B.alternate===null&&e(b,P),k=o(B,k,T),F===null?D=B:F.sibling=B,F=B,P=M}if(R.done)return n(b,P),kt&&Va(b,T),D;if(P===null){for(;!R.done;T++,R=j.next())R=x(b,R.value,U),R!==null&&(k=o(R,k,T),F===null?D=R:F.sibling=R,F=R);return kt&&Va(b,T),D}for(P=s(b,P);!R.done;T++,R=j.next())R=E(P,b,T,R.value,U),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?T:R.key),k=o(R,k,T),F===null?D=R:F.sibling=R,F=R);return t&&P.forEach(function($){return e(b,$)}),kt&&Va(b,T),D}function C(b,k,j,U){if(typeof j=="object"&&j!==null&&j.type===Xo&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case zd:e:{for(var D=j.key,F=k;F!==null;){if(F.key===D){if(D=j.type,D===Xo){if(F.tag===7){n(b,F.sibling),k=i(F,j.props.children),k.return=b,b=k;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Mi&&dw(D)===F.type){n(b,F.sibling),k=i(F,j.props),k.ref=Tc(b,F,j),k.return=b,b=k;break e}n(b,F);break}else e(b,F);F=F.sibling}j.type===Xo?(k=Ka(j.props.children,b.mode,U,j.key),k.return=b,b=k):(U=mh(j.type,j.key,j.props,null,b.mode,U),U.ref=Tc(b,k,j),U.return=b,b=U)}return l(b);case Jo:e:{for(F=j.key;k!==null;){if(k.key===F)if(k.tag===4&&k.stateNode.containerInfo===j.containerInfo&&k.stateNode.implementation===j.implementation){n(b,k.sibling),k=i(k,j.children||[]),k.return=b,b=k;break e}else{n(b,k);break}else e(b,k);k=k.sibling}k=Yf(j,b.mode,U),k.return=b,b=k}return l(b);case Mi:return F=j._init,C(b,k,F(j._payload),U)}if(Cc(j))return S(b,k,j,U);if(_c(j))return A(b,k,j,U);Bd(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,k!==null&&k.tag===6?(n(b,k.sibling),k=i(k,j),k.return=b,b=k):(n(b,k),k=Qf(j,b.mode,U),k.return=b,b=k),l(b)):n(b,k)}return C}var Tl=Gb(!0),Qb=Gb(!1),Mh=ba(null),Oh=null,ol=null,vy=null;function _y(){vy=ol=Oh=null}function by(t){var e=Mh.current;Nt(Mh),t._currentValue=e}function qp(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function pl(t,e){Oh=t,vy=ol=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Ds(t){var e=t._currentValue;if(vy!==t)if(t={context:t,memoizedValue:e,next:null},ol===null){if(Oh===null)throw Error(oe(308));ol=t,Oh.dependencies={lanes:0,firstContext:t}}else ol=ol.next=t;return e}var $a=null;function jy(t){$a===null?$a=[t]:$a.push(t)}function Yb(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,jy(e)):(n.next=i.next,i.next=n),e.interleaved=n,fi(t,s)}function fi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oi=!1;function Ny(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ta(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,it&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,fi(t,n)}return i=s.interleaved,i===null?(e.next=e,jy(s)):(e.next=i.next,i.next=e),s.interleaved=e,fi(t,n)}function oh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,cy(t,n)}}function hw(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vh(t,e,n,s){var i=t.updateQueue;Oi=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var m=d,f=m.next;m.next=null,l===null?o=f:l.next=f,l=m;var g=t.alternate;g!==null&&(g=g.updateQueue,d=g.lastBaseUpdate,d!==l&&(d===null?g.firstBaseUpdate=f:d.next=f,g.lastBaseUpdate=m))}if(o!==null){var x=i.baseState;l=0,g=f=m=null,d=o;do{var w=d.lane,E=d.eventTime;if((s&w)===w){g!==null&&(g=g.next={eventTime:E,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var S=t,A=d;switch(w=e,E=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){x=S.call(E,x,w);break e}x=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,w=typeof S=="function"?S.call(E,x,w):S,w==null)break e;x=It({},x,w);break e;case 2:Oi=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[d]:w.push(d))}else E={eventTime:E,lane:w,tag:d.tag,payload:d.payload,callback:d.callback,next:null},g===null?(f=g=E,m=x):g=g.next=E,l|=w;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;w=d,d=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(g===null&&(m=x),i.baseState=m,i.firstBaseUpdate=f,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);so|=l,t.lanes=l,t.memoizedState=x}}function mw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(oe(191,i));i.call(s)}}}var Bu={},br=ba(Bu),fu=ba(Bu),pu=ba(Bu);function Wa(t){if(t===Bu)throw Error(oe(174));return t}function ky(t,e){switch(_t(pu,e),_t(fu,t),_t(br,Bu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tp(e,t)}Nt(br),_t(br,e)}function El(){Nt(br),Nt(fu),Nt(pu)}function Xb(t){Wa(pu.current);var e=Wa(br.current),n=Tp(e,t.type);e!==n&&(_t(fu,t),_t(br,n))}function Ty(t){fu.current===t&&(Nt(br),Nt(fu))}var St=ba(0);function Bh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wf=[];function Ey(){for(var t=0;t<Wf.length;t++)Wf[t]._workInProgressVersionPrimary=null;Wf.length=0}var lh=bi.ReactCurrentDispatcher,Hf=bi.ReactCurrentBatchConfig,no=0,Pt=null,Xt=null,an=null,Uh=!1,Hc=!1,gu=0,qE=0;function wn(){throw Error(oe(321))}function Sy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function zy(t,e,n,s,i,o){if(no=o,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lh.current=t===null||t.memoizedState===null?QE:YE,t=n(s,i),Hc){o=0;do{if(Hc=!1,gu=0,25<=o)throw Error(oe(301));o+=1,an=Xt=null,e.updateQueue=null,lh.current=JE,t=n(s,i)}while(Hc)}if(lh.current=Fh,e=Xt!==null&&Xt.next!==null,no=0,an=Xt=Pt=null,Uh=!1,e)throw Error(oe(300));return t}function Py(){var t=gu!==0;return gu=0,t}function yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Pt.memoizedState=an=t:an=an.next=t,an}function Ms(){if(Xt===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=an===null?Pt.memoizedState:an.next;if(e!==null)an=e,Xt=t;else{if(t===null)throw Error(oe(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},an===null?Pt.memoizedState=an=t:an=an.next=t}return an}function yu(t,e){return typeof e=="function"?e(t):e}function qf(t){var e=Ms(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var s=Xt,i=s.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}s.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,s=s.baseState;var d=l=null,m=null,f=o;do{var g=f.lane;if((no&g)===g)m!==null&&(m=m.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:t(s,f.action);else{var x={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};m===null?(d=m=x,l=s):m=m.next=x,Pt.lanes|=g,so|=g}f=f.next}while(f!==null&&f!==o);m===null?l=s:m.next=d,sr(s,e.memoizedState)||(Yn=!0),e.memoizedState=s,e.baseState=l,e.baseQueue=m,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Pt.lanes|=o,so|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zf(t){var e=Ms(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);sr(o,e.memoizedState)||(Yn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,s]}function ej(){}function tj(t,e){var n=Pt,s=Ms(),i=e(),o=!sr(s.memoizedState,i);if(o&&(s.memoizedState=i,Yn=!0),s=s.queue,Cy(rj.bind(null,n,s,t),[t]),s.getSnapshot!==e||o||an!==null&&an.memoizedState.tag&1){if(n.flags|=2048,xu(9,sj.bind(null,n,s,i,e),void 0,null),on===null)throw Error(oe(349));no&30||nj(n,e,i)}return i}function nj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sj(t,e,n,s){e.value=n,e.getSnapshot=s,ij(e)&&aj(t)}function rj(t,e,n){return n(function(){ij(e)&&aj(t)})}function ij(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch{return!0}}function aj(t){var e=fi(t,1);e!==null&&tr(e,t,1,-1)}function fw(t){var e=yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yu,lastRenderedState:t},e.queue=t,t=t.dispatch=GE.bind(null,Pt,t),[e.memoizedState,t]}function xu(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function oj(){return Ms().memoizedState}function ch(t,e,n,s){var i=yr();Pt.flags|=t,i.memoizedState=xu(1|e,n,void 0,s===void 0?null:s)}function Em(t,e,n,s){var i=Ms();s=s===void 0?null:s;var o=void 0;if(Xt!==null){var l=Xt.memoizedState;if(o=l.destroy,s!==null&&Sy(s,l.deps)){i.memoizedState=xu(e,n,o,s);return}}Pt.flags|=t,i.memoizedState=xu(1|e,n,o,s)}function pw(t,e){return ch(8390656,8,t,e)}function Cy(t,e){return Em(2048,8,t,e)}function lj(t,e){return Em(4,2,t,e)}function cj(t,e){return Em(4,4,t,e)}function uj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dj(t,e,n){return n=n!=null?n.concat([t]):null,Em(4,4,uj.bind(null,e,t),n)}function Iy(){}function hj(t,e){var n=Ms();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Sy(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function mj(t,e){var n=Ms();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Sy(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function fj(t,e,n){return no&21?(sr(n,e)||(n=wb(),Pt.lanes|=n,so|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function ZE(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var s=Hf.transition;Hf.transition={};try{t(!1),e()}finally{ft=n,Hf.transition=s}}function pj(){return Ms().memoizedState}function KE(t,e,n){var s=sa(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},gj(t))yj(e,n);else if(n=Yb(t,e,n,s),n!==null){var i=Vn();tr(n,t,s,i),xj(n,e,s)}}function GE(t,e,n){var s=sa(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(gj(t))yj(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,d=o(l,n);if(i.hasEagerState=!0,i.eagerState=d,sr(d,l)){var m=e.interleaved;m===null?(i.next=i,jy(e)):(i.next=m.next,m.next=i),e.interleaved=i;return}}catch{}finally{}n=Yb(t,e,i,s),n!==null&&(i=Vn(),tr(n,t,s,i),xj(n,e,s))}}function gj(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function yj(t,e){Hc=Uh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xj(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,cy(t,n)}}var Fh={readContext:Ds,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},QE={readContext:Ds,useCallback:function(t,e){return yr().memoizedState=[t,e===void 0?null:e],t},useContext:Ds,useEffect:pw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ch(4194308,4,uj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ch(4194308,4,t,e)},useInsertionEffect:function(t,e){return ch(4,2,t,e)},useMemo:function(t,e){var n=yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=yr();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=KE.bind(null,Pt,t),[s.memoizedState,t]},useRef:function(t){var e=yr();return t={current:t},e.memoizedState=t},useState:fw,useDebugValue:Iy,useDeferredValue:function(t){return yr().memoizedState=t},useTransition:function(){var t=fw(!1),e=t[0];return t=ZE.bind(null,t[1]),yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Pt,i=yr();if(kt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),on===null)throw Error(oe(349));no&30||nj(s,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,pw(rj.bind(null,s,o,t),[t]),s.flags|=2048,xu(9,sj.bind(null,s,o,n,e),void 0,null),n},useId:function(){var t=yr(),e=on.identifierPrefix;if(kt){var n=ii,s=ri;n=(s&~(1<<32-er(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=gu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YE={readContext:Ds,useCallback:hj,useContext:Ds,useEffect:Cy,useImperativeHandle:dj,useInsertionEffect:lj,useLayoutEffect:cj,useMemo:mj,useReducer:qf,useRef:oj,useState:function(){return qf(yu)},useDebugValue:Iy,useDeferredValue:function(t){var e=Ms();return fj(e,Xt.memoizedState,t)},useTransition:function(){var t=qf(yu)[0],e=Ms().memoizedState;return[t,e]},useMutableSource:ej,useSyncExternalStore:tj,useId:pj,unstable_isNewReconciler:!1},JE={readContext:Ds,useCallback:hj,useContext:Ds,useEffect:Cy,useImperativeHandle:dj,useInsertionEffect:lj,useLayoutEffect:cj,useMemo:mj,useReducer:Zf,useRef:oj,useState:function(){return Zf(yu)},useDebugValue:Iy,useDeferredValue:function(t){var e=Ms();return Xt===null?e.memoizedState=t:fj(e,Xt.memoizedState,t)},useTransition:function(){var t=Zf(yu)[0],e=Ms().memoizedState;return[t,e]},useMutableSource:ej,useSyncExternalStore:tj,useId:pj,unstable_isNewReconciler:!1};function Gs(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zp(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sm={isMounted:function(t){return(t=t._reactInternals)?go(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Vn(),i=sa(t),o=ci(s,i);o.payload=e,n!=null&&(o.callback=n),e=ta(t,o,i),e!==null&&(tr(e,t,i,s),oh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Vn(),i=sa(t),o=ci(s,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ta(t,o,i),e!==null&&(tr(e,t,i,s),oh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vn(),s=sa(t),i=ci(n,s);i.tag=2,e!=null&&(i.callback=e),e=ta(t,i,s),e!==null&&(tr(e,t,s,n),oh(e,t,s))}};function gw(t,e,n,s,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,o,l):e.prototype&&e.prototype.isPureReactComponent?!uu(n,s)||!uu(i,o):!0}function wj(t,e,n){var s=!1,i=da,o=e.contextType;return typeof o=="object"&&o!==null?o=Ds(o):(i=Xn(e)?eo:En.current,s=e.contextTypes,o=(s=s!=null)?Nl(t,i):da),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sm,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function yw(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Sm.enqueueReplaceState(e,e.state,null)}function Kp(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ny(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ds(o):(o=Xn(e)?eo:En.current,i.context=Nl(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Zp(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sm.enqueueReplaceState(i,i.state,null),Vh(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Sl(t,e){try{var n="",s=e;do n+=TT(s),s=s.return;while(s);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Kf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var XE=typeof WeakMap=="function"?WeakMap:Map;function vj(t,e,n){n=ci(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Wh||(Wh=!0,ig=s),Gp(t,e)},n}function _j(t,e,n){n=ci(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){Gp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Gp(t,e),typeof s!="function"&&(na===null?na=new Set([this]):na.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function xw(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new XE;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=mS.bind(null,t,e,n),e.then(t,t))}function ww(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vw(t,e,n,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ci(-1,1),e.tag=2,ta(n,e,1))),n.lanes|=1),t)}var eS=bi.ReactCurrentOwner,Yn=!1;function Dn(t,e,n,s){e.child=t===null?Qb(e,null,n,s):Tl(e,t.child,n,s)}function _w(t,e,n,s,i){n=n.render;var o=e.ref;return pl(e,i),s=zy(t,e,n,s,o,i),n=Py(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pi(t,e,i)):(kt&&n&&yy(e),e.flags|=1,Dn(t,e,s,i),e.child)}function bw(t,e,n,s,i){if(t===null){var o=n.type;return typeof o=="function"&&!By(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,bj(t,e,o,s,i)):(t=mh(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:uu,n(l,s)&&t.ref===e.ref)return pi(t,e,i)}return e.flags|=1,t=ra(o,s),t.ref=e.ref,t.return=e,e.child=t}function bj(t,e,n,s,i){if(t!==null){var o=t.memoizedProps;if(uu(o,s)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=s=o,(t.lanes&i)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,pi(t,e,i)}return Qp(t,e,n,s,i)}function jj(t,e,n){var s=e.pendingProps,i=s.children,o=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(cl,cs),cs|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(cl,cs),cs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,_t(cl,cs),cs|=s}else o!==null?(s=o.baseLanes|n,e.memoizedState=null):s=n,_t(cl,cs),cs|=s;return Dn(t,e,i,n),e.child}function Nj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qp(t,e,n,s,i){var o=Xn(n)?eo:En.current;return o=Nl(e,o),pl(e,i),n=zy(t,e,n,s,o,i),s=Py(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pi(t,e,i)):(kt&&s&&yy(e),e.flags|=1,Dn(t,e,n,i),e.child)}function jw(t,e,n,s,i){if(Xn(n)){var o=!0;Rh(e)}else o=!1;if(pl(e,i),e.stateNode===null)uh(t,e),wj(e,n,s),Kp(e,n,s,i),s=!0;else if(t===null){var l=e.stateNode,d=e.memoizedProps;l.props=d;var m=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=Ds(f):(f=Xn(n)?eo:En.current,f=Nl(e,f));var g=n.getDerivedStateFromProps,x=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==s||m!==f)&&yw(e,l,s,f),Oi=!1;var w=e.memoizedState;l.state=w,Vh(e,s,l,i),m=e.memoizedState,d!==s||w!==m||Jn.current||Oi?(typeof g=="function"&&(Zp(e,n,g,s),m=e.memoizedState),(d=Oi||gw(e,n,d,s,w,m,f))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=m),l.props=s,l.state=m,l.context=f,s=d):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{l=e.stateNode,Jb(t,e),d=e.memoizedProps,f=e.type===e.elementType?d:Gs(e.type,d),l.props=f,x=e.pendingProps,w=l.context,m=n.contextType,typeof m=="object"&&m!==null?m=Ds(m):(m=Xn(n)?eo:En.current,m=Nl(e,m));var E=n.getDerivedStateFromProps;(g=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==x||w!==m)&&yw(e,l,s,m),Oi=!1,w=e.memoizedState,l.state=w,Vh(e,s,l,i);var S=e.memoizedState;d!==x||w!==S||Jn.current||Oi?(typeof E=="function"&&(Zp(e,n,E,s),S=e.memoizedState),(f=Oi||gw(e,n,f,s,w,S,m)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,S,m),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,S,m)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=S),l.props=s,l.state=S,l.context=m,s=f):(typeof l.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),s=!1)}return Yp(t,e,n,s,o,i)}function Yp(t,e,n,s,i,o){Nj(t,e);var l=(e.flags&128)!==0;if(!s&&!l)return i&&lw(e,n,!1),pi(t,e,o);s=e.stateNode,eS.current=e;var d=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&l?(e.child=Tl(e,t.child,null,o),e.child=Tl(e,null,d,o)):Dn(t,e,d,o),e.memoizedState=s.state,i&&lw(e,n,!0),e.child}function kj(t){var e=t.stateNode;e.pendingContext?ow(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ow(t,e.context,!1),ky(t,e.containerInfo)}function Nw(t,e,n,s,i){return kl(),wy(i),e.flags|=256,Dn(t,e,n,s),e.child}var Jp={dehydrated:null,treeContext:null,retryLane:0};function Xp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tj(t,e,n){var s=e.pendingProps,i=St.current,o=!1,l=(e.flags&128)!==0,d;if((d=l)||(d=t!==null&&t.memoizedState===null?!1:(i&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_t(St,i&1),t===null)return Hp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=s.children,t=s.fallback,o?(s=e.mode,o=e.child,l={mode:"hidden",children:l},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Cm(l,s,0,null),t=Ka(t,s,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Xp(n),e.memoizedState=Jp,t):Ay(e,l));if(i=t.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return tS(t,e,l,s,d,i,n);if(o){o=s.fallback,l=e.mode,i=t.child,d=i.sibling;var m={mode:"hidden",children:s.children};return!(l&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=m,e.deletions=null):(s=ra(i,m),s.subtreeFlags=i.subtreeFlags&14680064),d!==null?o=ra(d,o):(o=Ka(o,l,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,l=t.child.memoizedState,l=l===null?Xp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Jp,s}return o=t.child,t=o.sibling,s=ra(o,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Ay(t,e){return e=Cm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ud(t,e,n,s){return s!==null&&wy(s),Tl(e,t.child,null,n),t=Ay(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tS(t,e,n,s,i,o,l){if(n)return e.flags&256?(e.flags&=-257,s=Kf(Error(oe(422))),Ud(t,e,l,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=s.fallback,i=e.mode,s=Cm({mode:"visible",children:s.children},i,0,null),o=Ka(o,i,l,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,e.mode&1&&Tl(e,t.child,null,l),e.child.memoizedState=Xp(l),e.memoizedState=Jp,o);if(!(e.mode&1))return Ud(t,e,l,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var d=s.dgst;return s=d,o=Error(oe(419)),s=Kf(o,s,void 0),Ud(t,e,l,s)}if(d=(l&t.childLanes)!==0,Yn||d){if(s=on,s!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,fi(t,i),tr(s,t,i,-1))}return Vy(),s=Kf(Error(oe(421))),Ud(t,e,l,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=fS.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ds=ea(i.nextSibling),fs=e,kt=!0,Ys=null,t!==null&&(Ss[zs++]=ri,Ss[zs++]=ii,Ss[zs++]=to,ri=t.id,ii=t.overflow,to=e),e=Ay(e,s.children),e.flags|=4096,e)}function kw(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),qp(t.return,e,n)}function Gf(t,e,n,s,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=i)}function Ej(t,e,n){var s=e.pendingProps,i=s.revealOrder,o=s.tail;if(Dn(t,e,s.children,n),s=St.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kw(t,n,e);else if(t.tag===19)kw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(_t(St,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Gf(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Gf(e,!0,n,null,o);break;case"together":Gf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),so|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nS(t,e,n){switch(e.tag){case 3:kj(e),kl();break;case 5:Xb(e);break;case 1:Xn(e.type)&&Rh(e);break;case 4:ky(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;_t(Mh,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(_t(St,St.current&1),e.flags|=128,null):n&e.child.childLanes?Tj(t,e,n):(_t(St,St.current&1),t=pi(t,e,n),t!==null?t.sibling:null);_t(St,St.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Ej(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_t(St,St.current),s)break;return null;case 22:case 23:return e.lanes=0,jj(t,e,n)}return pi(t,e,n)}var Sj,eg,zj,Pj;Sj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eg=function(){};zj=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,Wa(br.current);var o=null;switch(n){case"input":i=bp(t,i),s=bp(t,s),o=[];break;case"select":i=It({},i,{value:void 0}),s=It({},s,{value:void 0}),o=[];break;case"textarea":i=kp(t,i),s=kp(t,s),o=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Ih)}Ep(n,s);var l;n=null;for(f in i)if(!s.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var d=i[f];for(l in d)d.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(su.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in s){var m=s[f];if(d=i!=null?i[f]:void 0,s.hasOwnProperty(f)&&m!==d&&(m!=null||d!=null))if(f==="style")if(d){for(l in d)!d.hasOwnProperty(l)||m&&m.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in m)m.hasOwnProperty(l)&&d[l]!==m[l]&&(n||(n={}),n[l]=m[l])}else n||(o||(o=[]),o.push(f,n)),n=m;else f==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,d=d?d.__html:void 0,m!=null&&d!==m&&(o=o||[]).push(f,m)):f==="children"?typeof m!="string"&&typeof m!="number"||(o=o||[]).push(f,""+m):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(su.hasOwnProperty(f)?(m!=null&&f==="onScroll"&&bt("scroll",t),o||d===m||(o=[])):(o=o||[]).push(f,m))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};Pj=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ec(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function sS(t,e,n){var s=e.pendingProps;switch(xy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return Xn(e.type)&&Ah(),vn(e),null;case 3:return s=e.stateNode,El(),Nt(Jn),Nt(En),Ey(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Vd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ys!==null&&(lg(Ys),Ys=null))),eg(t,e),vn(e),null;case 5:Ty(e);var i=Wa(pu.current);if(n=e.type,t!==null&&e.stateNode!=null)zj(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(oe(166));return vn(e),null}if(t=Wa(br.current),Vd(e)){s=e.stateNode,n=e.type;var o=e.memoizedProps;switch(s[wr]=e,s[mu]=o,t=(e.mode&1)!==0,n){case"dialog":bt("cancel",s),bt("close",s);break;case"iframe":case"object":case"embed":bt("load",s);break;case"video":case"audio":for(i=0;i<Ac.length;i++)bt(Ac[i],s);break;case"source":bt("error",s);break;case"img":case"image":case"link":bt("error",s),bt("load",s);break;case"details":bt("toggle",s);break;case"input":R0(s,o),bt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},bt("invalid",s);break;case"textarea":D0(s,o),bt("invalid",s)}Ep(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var d=o[l];l==="children"?typeof d=="string"?s.textContent!==d&&(o.suppressHydrationWarning!==!0&&Od(s.textContent,d,t),i=["children",d]):typeof d=="number"&&s.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&Od(s.textContent,d,t),i=["children",""+d]):su.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&bt("scroll",s)}switch(n){case"input":Pd(s),L0(s,o,!0);break;case"textarea":Pd(s),M0(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Ih)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=l.createElement(n,{is:s.is}):(t=l.createElement(n),n==="select"&&(l=t,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):t=l.createElementNS(t,n),t[wr]=e,t[mu]=s,Sj(t,e,!1,!1),e.stateNode=t;e:{switch(l=Sp(n,s),n){case"dialog":bt("cancel",t),bt("close",t),i=s;break;case"iframe":case"object":case"embed":bt("load",t),i=s;break;case"video":case"audio":for(i=0;i<Ac.length;i++)bt(Ac[i],t);i=s;break;case"source":bt("error",t),i=s;break;case"img":case"image":case"link":bt("error",t),bt("load",t),i=s;break;case"details":bt("toggle",t),i=s;break;case"input":R0(t,s),i=bp(t,s),bt("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=It({},s,{value:void 0}),bt("invalid",t);break;case"textarea":D0(t,s),i=kp(t,s),bt("invalid",t);break;default:i=s}Ep(n,i),d=i;for(o in d)if(d.hasOwnProperty(o)){var m=d[o];o==="style"?ob(t,m):o==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&ib(t,m)):o==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&ru(t,m):typeof m=="number"&&ru(t,""+m):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(su.hasOwnProperty(o)?m!=null&&o==="onScroll"&&bt("scroll",t):m!=null&&sy(t,o,m,l))}switch(n){case"input":Pd(t),L0(t,s,!1);break;case"textarea":Pd(t),M0(t);break;case"option":s.value!=null&&t.setAttribute("value",""+ua(s.value));break;case"select":t.multiple=!!s.multiple,o=s.value,o!=null?dl(t,!!s.multiple,o,!1):s.defaultValue!=null&&dl(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ih)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)Pj(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(oe(166));if(n=Wa(pu.current),Wa(br.current),Vd(e)){if(s=e.stateNode,n=e.memoizedProps,s[wr]=e,(o=s.nodeValue!==n)&&(t=fs,t!==null))switch(t.tag){case 3:Od(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Od(s.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[wr]=e,e.stateNode=s}return vn(e),null;case 13:if(Nt(St),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kt&&ds!==null&&e.mode&1&&!(e.flags&128))Kb(),kl(),e.flags|=98560,o=!1;else if(o=Vd(e),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(oe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[wr]=e}else kl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),o=!1}else Ys!==null&&(lg(Ys),Ys=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||St.current&1?en===0&&(en=3):Vy())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return El(),eg(t,e),t===null&&du(e.stateNode.containerInfo),vn(e),null;case 10:return by(e.type._context),vn(e),null;case 17:return Xn(e.type)&&Ah(),vn(e),null;case 19:if(Nt(St),o=e.memoizedState,o===null)return vn(e),null;if(s=(e.flags&128)!==0,l=o.rendering,l===null)if(s)Ec(o,!1);else{if(en!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Bh(t),l!==null){for(e.flags|=128,Ec(o,!1),s=l.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)o=n,t=s,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _t(St,St.current&1|2),e.child}t=t.sibling}o.tail!==null&&$t()>zl&&(e.flags|=128,s=!0,Ec(o,!1),e.lanes=4194304)}else{if(!s)if(t=Bh(l),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ec(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!kt)return vn(e),null}else 2*$t()-o.renderingStartTime>zl&&n!==1073741824&&(e.flags|=128,s=!0,Ec(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$t(),e.sibling=null,n=St.current,_t(St,s?n&1|2:n&1),e):(vn(e),null);case 22:case 23:return Oy(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?cs&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function rS(t,e){switch(xy(e),e.tag){case 1:return Xn(e.type)&&Ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return El(),Nt(Jn),Nt(En),Ey(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ty(e),null;case 13:if(Nt(St),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));kl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(St),null;case 4:return El(),null;case 10:return by(e.type._context),null;case 22:case 23:return Oy(),null;case 24:return null;default:return null}}var Fd=!1,jn=!1,iS=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ll(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Mt(t,e,s)}else n.current=null}function tg(t,e,n){try{n()}catch(s){Mt(t,e,s)}}var Tw=!1;function aS(t,e){if(Op=zh,t=Lb(),gy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,d=-1,m=-1,f=0,g=0,x=t,w=null;t:for(;;){for(var E;x!==n||i!==0&&x.nodeType!==3||(d=l+i),x!==o||s!==0&&x.nodeType!==3||(m=l+s),x.nodeType===3&&(l+=x.nodeValue.length),(E=x.firstChild)!==null;)w=x,x=E;for(;;){if(x===t)break t;if(w===n&&++f===i&&(d=l),w===o&&++g===s&&(m=l),(E=x.nextSibling)!==null)break;x=w,w=x.parentNode}x=E}n=d===-1||m===-1?null:{start:d,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vp={focusedElem:t,selectionRange:n},zh=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,C=S.memoizedState,b=e.stateNode,k=b.getSnapshotBeforeUpdate(e.elementType===e.type?A:Gs(e.type,A),C);b.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(U){Mt(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return S=Tw,Tw=!1,S}function qc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&tg(e,n,o)}i=i.next}while(i!==s)}}function zm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function ng(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Cj(t){var e=t.alternate;e!==null&&(t.alternate=null,Cj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wr],delete e[mu],delete e[Fp],delete e[FE],delete e[$E])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ij(t){return t.tag===5||t.tag===3||t.tag===4}function Ew(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ij(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sg(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ih));else if(s!==4&&(t=t.child,t!==null))for(sg(t,e,n),t=t.sibling;t!==null;)sg(t,e,n),t=t.sibling}function rg(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(rg(t,e,n),t=t.sibling;t!==null;)rg(t,e,n),t=t.sibling}var cn=null,Qs=!1;function Ai(t,e,n){for(n=n.child;n!==null;)Aj(t,e,n),n=n.sibling}function Aj(t,e,n){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(_m,n)}catch{}switch(n.tag){case 5:jn||ll(n,e);case 6:var s=cn,i=Qs;cn=null,Ai(t,e,n),cn=s,Qs=i,cn!==null&&(Qs?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(Qs?(t=cn,n=n.stateNode,t.nodeType===8?Ff(t.parentNode,n):t.nodeType===1&&Ff(t,n),lu(t)):Ff(cn,n.stateNode));break;case 4:s=cn,i=Qs,cn=n.stateNode.containerInfo,Qs=!0,Ai(t,e,n),cn=s,Qs=i;break;case 0:case 11:case 14:case 15:if(!jn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&tg(n,e,l),i=i.next}while(i!==s)}Ai(t,e,n);break;case 1:if(!jn&&(ll(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(d){Mt(n,e,d)}Ai(t,e,n);break;case 21:Ai(t,e,n);break;case 22:n.mode&1?(jn=(s=jn)||n.memoizedState!==null,Ai(t,e,n),jn=s):Ai(t,e,n);break;default:Ai(t,e,n)}}function Sw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iS),e.forEach(function(s){var i=pS.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Zs(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var o=t,l=e,d=l;e:for(;d!==null;){switch(d.tag){case 5:cn=d.stateNode,Qs=!1;break e;case 3:cn=d.stateNode.containerInfo,Qs=!0;break e;case 4:cn=d.stateNode.containerInfo,Qs=!0;break e}d=d.return}if(cn===null)throw Error(oe(160));Aj(o,l,i),cn=null,Qs=!1;var m=i.alternate;m!==null&&(m.return=null),i.return=null}catch(f){Mt(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Rj(e,t),e=e.sibling}function Rj(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zs(e,t),gr(t),s&4){try{qc(3,t,t.return),zm(3,t)}catch(A){Mt(t,t.return,A)}try{qc(5,t,t.return)}catch(A){Mt(t,t.return,A)}}break;case 1:Zs(e,t),gr(t),s&512&&n!==null&&ll(n,n.return);break;case 5:if(Zs(e,t),gr(t),s&512&&n!==null&&ll(n,n.return),t.flags&32){var i=t.stateNode;try{ru(i,"")}catch(A){Mt(t,t.return,A)}}if(s&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,d=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&nb(i,o),Sp(d,l);var f=Sp(d,o);for(l=0;l<m.length;l+=2){var g=m[l],x=m[l+1];g==="style"?ob(i,x):g==="dangerouslySetInnerHTML"?ib(i,x):g==="children"?ru(i,x):sy(i,g,x,f)}switch(d){case"input":jp(i,o);break;case"textarea":sb(i,o);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?dl(i,!!o.multiple,E,!1):w!==!!o.multiple&&(o.defaultValue!=null?dl(i,!!o.multiple,o.defaultValue,!0):dl(i,!!o.multiple,o.multiple?[]:"",!1))}i[mu]=o}catch(A){Mt(t,t.return,A)}}break;case 6:if(Zs(e,t),gr(t),s&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(A){Mt(t,t.return,A)}}break;case 3:if(Zs(e,t),gr(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{lu(e.containerInfo)}catch(A){Mt(t,t.return,A)}break;case 4:Zs(e,t),gr(t);break;case 13:Zs(e,t),gr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Dy=$t())),s&4&&Sw(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(jn=(f=jn)||g,Zs(e,t),jn=f):Zs(e,t),gr(t),s&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(ye=t,g=t.child;g!==null;){for(x=ye=g;ye!==null;){switch(w=ye,E=w.child,w.tag){case 0:case 11:case 14:case 15:qc(4,w,w.return);break;case 1:ll(w,w.return);var S=w.stateNode;if(typeof S.componentWillUnmount=="function"){s=w,n=w.return;try{e=s,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){Mt(s,n,A)}}break;case 5:ll(w,w.return);break;case 22:if(w.memoizedState!==null){Pw(x);continue}}E!==null?(E.return=w,ye=E):Pw(x)}g=g.sibling}e:for(g=null,x=t;;){if(x.tag===5){if(g===null){g=x;try{i=x.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=x.stateNode,m=x.memoizedProps.style,l=m!=null&&m.hasOwnProperty("display")?m.display:null,d.style.display=ab("display",l))}catch(A){Mt(t,t.return,A)}}}else if(x.tag===6){if(g===null)try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(A){Mt(t,t.return,A)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;g===x&&(g=null),x=x.return}g===x&&(g=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Zs(e,t),gr(t),s&4&&Sw(t);break;case 21:break;default:Zs(e,t),gr(t)}}function gr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ij(n)){var s=n;break e}n=n.return}throw Error(oe(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(ru(i,""),s.flags&=-33);var o=Ew(t);rg(t,o,i);break;case 3:case 4:var l=s.stateNode.containerInfo,d=Ew(t);sg(t,d,l);break;default:throw Error(oe(161))}}catch(m){Mt(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oS(t,e,n){ye=t,Lj(t)}function Lj(t,e,n){for(var s=(t.mode&1)!==0;ye!==null;){var i=ye,o=i.child;if(i.tag===22&&s){var l=i.memoizedState!==null||Fd;if(!l){var d=i.alternate,m=d!==null&&d.memoizedState!==null||jn;d=Fd;var f=jn;if(Fd=l,(jn=m)&&!f)for(ye=i;ye!==null;)l=ye,m=l.child,l.tag===22&&l.memoizedState!==null?Cw(i):m!==null?(m.return=l,ye=m):Cw(i);for(;o!==null;)ye=o,Lj(o),o=o.sibling;ye=i,Fd=d,jn=f}zw(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ye=o):zw(t)}}function zw(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jn||zm(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!jn)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gs(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&mw(e,o,s);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mw(e,l,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var x=g.dehydrated;x!==null&&lu(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}jn||e.flags&512&&ng(e)}catch(w){Mt(e,e.return,w)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Pw(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Cw(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zm(4,e)}catch(m){Mt(e,n,m)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(m){Mt(e,i,m)}}var o=e.return;try{ng(e)}catch(m){Mt(e,o,m)}break;case 5:var l=e.return;try{ng(e)}catch(m){Mt(e,l,m)}}}catch(m){Mt(e,e.return,m)}if(e===t){ye=null;break}var d=e.sibling;if(d!==null){d.return=e.return,ye=d;break}ye=e.return}}var lS=Math.ceil,$h=bi.ReactCurrentDispatcher,Ry=bi.ReactCurrentOwner,As=bi.ReactCurrentBatchConfig,it=0,on=null,Kt=null,fn=0,cs=0,cl=ba(0),en=0,wu=null,so=0,Pm=0,Ly=0,Zc=null,Gn=null,Dy=0,zl=1/0,ti=null,Wh=!1,ig=null,na=null,$d=!1,Zi=null,Hh=0,Kc=0,ag=null,dh=-1,hh=0;function Vn(){return it&6?$t():dh!==-1?dh:dh=$t()}function sa(t){return t.mode&1?it&2&&fn!==0?fn&-fn:HE.transition!==null?(hh===0&&(hh=wb()),hh):(t=ft,t!==0||(t=window.event,t=t===void 0?16:Tb(t.type)),t):1}function tr(t,e,n,s){if(50<Kc)throw Kc=0,ag=null,Error(oe(185));Mu(t,n,s),(!(it&2)||t!==on)&&(t===on&&(!(it&2)&&(Pm|=n),en===4&&Bi(t,fn)),es(t,s),n===1&&it===0&&!(e.mode&1)&&(zl=$t()+500,Tm&&ja()))}function es(t,e){var n=t.callbackNode;HT(t,e);var s=Sh(t,t===on?fn:0);if(s===0)n!==null&&B0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&B0(n),e===1)t.tag===0?WE(Iw.bind(null,t)):Hb(Iw.bind(null,t)),BE(function(){!(it&6)&&ja()}),n=null;else{switch(vb(s)){case 1:n=ly;break;case 4:n=yb;break;case 16:n=Eh;break;case 536870912:n=xb;break;default:n=Eh}n=$j(n,Dj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dj(t,e){if(dh=-1,hh=0,it&6)throw Error(oe(327));var n=t.callbackNode;if(gl()&&t.callbackNode!==n)return null;var s=Sh(t,t===on?fn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=qh(t,s);else{e=s;var i=it;it|=2;var o=Oj();(on!==t||fn!==e)&&(ti=null,zl=$t()+500,Za(t,e));do try{dS();break}catch(d){Mj(t,d)}while(!0);_y(),$h.current=o,it=i,Kt!==null?e=0:(on=null,fn=0,e=en)}if(e!==0){if(e===2&&(i=Ap(t),i!==0&&(s=i,e=og(t,i))),e===1)throw n=wu,Za(t,0),Bi(t,s),es(t,$t()),n;if(e===6)Bi(t,s);else{if(i=t.current.alternate,!(s&30)&&!cS(i)&&(e=qh(t,s),e===2&&(o=Ap(t),o!==0&&(s=o,e=og(t,o))),e===1))throw n=wu,Za(t,0),Bi(t,s),es(t,$t()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(oe(345));case 2:Ba(t,Gn,ti);break;case 3:if(Bi(t,s),(s&130023424)===s&&(e=Dy+500-$t(),10<e)){if(Sh(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){Vn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Up(Ba.bind(null,t,Gn,ti),e);break}Ba(t,Gn,ti);break;case 4:if(Bi(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var l=31-er(s);o=1<<l,l=e[l],l>i&&(i=l),s&=~o}if(s=i,s=$t()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*lS(s/1960))-s,10<s){t.timeoutHandle=Up(Ba.bind(null,t,Gn,ti),s);break}Ba(t,Gn,ti);break;case 5:Ba(t,Gn,ti);break;default:throw Error(oe(329))}}}return es(t,$t()),t.callbackNode===n?Dj.bind(null,t):null}function og(t,e){var n=Zc;return t.current.memoizedState.isDehydrated&&(Za(t,e).flags|=256),t=qh(t,e),t!==2&&(e=Gn,Gn=n,e!==null&&lg(e)),t}function lg(t){Gn===null?Gn=t:Gn.push.apply(Gn,t)}function cS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bi(t,e){for(e&=~Ly,e&=~Pm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),s=1<<n;t[n]=-1,e&=~s}}function Iw(t){if(it&6)throw Error(oe(327));gl();var e=Sh(t,0);if(!(e&1))return es(t,$t()),null;var n=qh(t,e);if(t.tag!==0&&n===2){var s=Ap(t);s!==0&&(e=s,n=og(t,s))}if(n===1)throw n=wu,Za(t,0),Bi(t,e),es(t,$t()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ba(t,Gn,ti),es(t,$t()),null}function My(t,e){var n=it;it|=1;try{return t(e)}finally{it=n,it===0&&(zl=$t()+500,Tm&&ja())}}function ro(t){Zi!==null&&Zi.tag===0&&!(it&6)&&gl();var e=it;it|=1;var n=As.transition,s=ft;try{if(As.transition=null,ft=1,t)return t()}finally{ft=s,As.transition=n,it=e,!(it&6)&&ja()}}function Oy(){cs=cl.current,Nt(cl)}function Za(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VE(n)),Kt!==null)for(n=Kt.return;n!==null;){var s=n;switch(xy(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ah();break;case 3:El(),Nt(Jn),Nt(En),Ey();break;case 5:Ty(s);break;case 4:El();break;case 13:Nt(St);break;case 19:Nt(St);break;case 10:by(s.type._context);break;case 22:case 23:Oy()}n=n.return}if(on=t,Kt=t=ra(t.current,null),fn=cs=e,en=0,wu=null,Ly=Pm=so=0,Gn=Zc=null,$a!==null){for(e=0;e<$a.length;e++)if(n=$a[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,s.next=l}n.pending=s}$a=null}return t}function Mj(t,e){do{var n=Kt;try{if(_y(),lh.current=Fh,Uh){for(var s=Pt.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Uh=!1}if(no=0,an=Xt=Pt=null,Hc=!1,gu=0,Ry.current=null,n===null||n.return===null){en=1,wu=e,Kt=null;break}e:{var o=t,l=n.return,d=n,m=e;if(e=fn,d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var f=m,g=d,x=g.tag;if(!(g.mode&1)&&(x===0||x===11||x===15)){var w=g.alternate;w?(g.updateQueue=w.updateQueue,g.memoizedState=w.memoizedState,g.lanes=w.lanes):(g.updateQueue=null,g.memoizedState=null)}var E=ww(l);if(E!==null){E.flags&=-257,vw(E,l,d,o,e),E.mode&1&&xw(o,f,e),e=E,m=f;var S=e.updateQueue;if(S===null){var A=new Set;A.add(m),e.updateQueue=A}else S.add(m);break e}else{if(!(e&1)){xw(o,f,e),Vy();break e}m=Error(oe(426))}}else if(kt&&d.mode&1){var C=ww(l);if(C!==null){!(C.flags&65536)&&(C.flags|=256),vw(C,l,d,o,e),wy(Sl(m,d));break e}}o=m=Sl(m,d),en!==4&&(en=2),Zc===null?Zc=[o]:Zc.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=vj(o,m,e);hw(o,b);break e;case 1:d=m;var k=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(na===null||!na.has(j)))){o.flags|=65536,e&=-e,o.lanes|=e;var U=_j(o,d,e);hw(o,U);break e}}o=o.return}while(o!==null)}Bj(n)}catch(D){e=D,Kt===n&&n!==null&&(Kt=n=n.return);continue}break}while(!0)}function Oj(){var t=$h.current;return $h.current=Fh,t===null?Fh:t}function Vy(){(en===0||en===3||en===2)&&(en=4),on===null||!(so&268435455)&&!(Pm&268435455)||Bi(on,fn)}function qh(t,e){var n=it;it|=2;var s=Oj();(on!==t||fn!==e)&&(ti=null,Za(t,e));do try{uS();break}catch(i){Mj(t,i)}while(!0);if(_y(),it=n,$h.current=s,Kt!==null)throw Error(oe(261));return on=null,fn=0,en}function uS(){for(;Kt!==null;)Vj(Kt)}function dS(){for(;Kt!==null&&!DT();)Vj(Kt)}function Vj(t){var e=Fj(t.alternate,t,cs);t.memoizedProps=t.pendingProps,e===null?Bj(t):Kt=e,Ry.current=null}function Bj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rS(n,e),n!==null){n.flags&=32767,Kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{en=6,Kt=null;return}}else if(n=sS(n,e,cs),n!==null){Kt=n;return}if(e=e.sibling,e!==null){Kt=e;return}Kt=e=t}while(e!==null);en===0&&(en=5)}function Ba(t,e,n){var s=ft,i=As.transition;try{As.transition=null,ft=1,hS(t,e,n,s)}finally{As.transition=i,ft=s}return null}function hS(t,e,n,s){do gl();while(Zi!==null);if(it&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(qT(t,o),t===on&&(Kt=on=null,fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$d||($d=!0,$j(Eh,function(){return gl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=As.transition,As.transition=null;var l=ft;ft=1;var d=it;it|=4,Ry.current=null,aS(t,n),Rj(n,t),IE(Vp),zh=!!Op,Vp=Op=null,t.current=n,oS(n),MT(),it=d,ft=l,As.transition=o}else t.current=n;if($d&&($d=!1,Zi=t,Hh=i),o=t.pendingLanes,o===0&&(na=null),BT(n.stateNode),es(t,$t()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Wh)throw Wh=!1,t=ig,ig=null,t;return Hh&1&&t.tag!==0&&gl(),o=t.pendingLanes,o&1?t===ag?Kc++:(Kc=0,ag=t):Kc=0,ja(),null}function gl(){if(Zi!==null){var t=vb(Hh),e=As.transition,n=ft;try{if(As.transition=null,ft=16>t?16:t,Zi===null)var s=!1;else{if(t=Zi,Zi=null,Hh=0,it&6)throw Error(oe(331));var i=it;for(it|=4,ye=t.current;ye!==null;){var o=ye,l=o.child;if(ye.flags&16){var d=o.deletions;if(d!==null){for(var m=0;m<d.length;m++){var f=d[m];for(ye=f;ye!==null;){var g=ye;switch(g.tag){case 0:case 11:case 15:qc(8,g,o)}var x=g.child;if(x!==null)x.return=g,ye=x;else for(;ye!==null;){g=ye;var w=g.sibling,E=g.return;if(Cj(g),g===f){ye=null;break}if(w!==null){w.return=E,ye=w;break}ye=E}}}var S=o.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}ye=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ye=l;else e:for(;ye!==null;){if(o=ye,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qc(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ye=b;break e}ye=o.return}}var k=t.current;for(ye=k;ye!==null;){l=ye;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,ye=j;else e:for(l=k;ye!==null;){if(d=ye,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:zm(9,d)}}catch(D){Mt(d,d.return,D)}if(d===l){ye=null;break e}var U=d.sibling;if(U!==null){U.return=d.return,ye=U;break e}ye=d.return}}if(it=i,ja(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(_m,t)}catch{}s=!0}return s}finally{ft=n,As.transition=e}}return!1}function Aw(t,e,n){e=Sl(n,e),e=vj(t,e,1),t=ta(t,e,1),e=Vn(),t!==null&&(Mu(t,1,e),es(t,e))}function Mt(t,e,n){if(t.tag===3)Aw(t,t,n);else for(;e!==null;){if(e.tag===3){Aw(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(na===null||!na.has(s))){t=Sl(n,t),t=_j(e,t,1),e=ta(e,t,1),t=Vn(),e!==null&&(Mu(e,1,t),es(e,t));break}}e=e.return}}function mS(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Vn(),t.pingedLanes|=t.suspendedLanes&n,on===t&&(fn&n)===n&&(en===4||en===3&&(fn&130023424)===fn&&500>$t()-Dy?Za(t,0):Ly|=n),es(t,e)}function Uj(t,e){e===0&&(t.mode&1?(e=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):e=1);var n=Vn();t=fi(t,e),t!==null&&(Mu(t,e,n),es(t,n))}function fS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Uj(t,n)}function pS(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(oe(314))}s!==null&&s.delete(e),Uj(t,n)}var Fj;Fj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jn.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,nS(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,kt&&e.flags&1048576&&qb(e,Dh,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;uh(t,e),t=e.pendingProps;var i=Nl(e,En.current);pl(e,n),i=zy(null,e,s,t,i,n);var o=Py();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xn(s)?(o=!0,Rh(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ny(e),i.updater=Sm,e.stateNode=i,i._reactInternals=e,Kp(e,s,t,n),e=Yp(null,e,s,!0,o,n)):(e.tag=0,kt&&o&&yy(e),Dn(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(uh(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=yS(s),t=Gs(s,t),i){case 0:e=Qp(null,e,s,t,n);break e;case 1:e=jw(null,e,s,t,n);break e;case 11:e=_w(null,e,s,t,n);break e;case 14:e=bw(null,e,s,Gs(s.type,t),n);break e}throw Error(oe(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gs(s,i),Qp(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gs(s,i),jw(t,e,s,i,n);case 3:e:{if(kj(e),t===null)throw Error(oe(387));s=e.pendingProps,o=e.memoizedState,i=o.element,Jb(t,e),Vh(e,s,null,n);var l=e.memoizedState;if(s=l.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Sl(Error(oe(423)),e),e=Nw(t,e,s,n,i);break e}else if(s!==i){i=Sl(Error(oe(424)),e),e=Nw(t,e,s,n,i);break e}else for(ds=ea(e.stateNode.containerInfo.firstChild),fs=e,kt=!0,Ys=null,n=Qb(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kl(),s===i){e=pi(t,e,n);break e}Dn(t,e,s,n)}e=e.child}return e;case 5:return Xb(e),t===null&&Hp(e),s=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,Bp(s,i)?l=null:o!==null&&Bp(s,o)&&(e.flags|=32),Nj(t,e),Dn(t,e,l,n),e.child;case 6:return t===null&&Hp(e),null;case 13:return Tj(t,e,n);case 4:return ky(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Tl(e,null,s,n):Dn(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gs(s,i),_w(t,e,s,i,n);case 7:return Dn(t,e,e.pendingProps,n),e.child;case 8:return Dn(t,e,e.pendingProps.children,n),e.child;case 12:return Dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,o=e.memoizedProps,l=i.value,_t(Mh,s._currentValue),s._currentValue=l,o!==null)if(sr(o.value,l)){if(o.children===i.children&&!Jn.current){e=pi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){l=o.child;for(var m=d.firstContext;m!==null;){if(m.context===s){if(o.tag===1){m=ci(-1,n&-n),m.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?m.next=m:(m.next=g.next,g.next=m),f.pending=m}}o.lanes|=n,m=o.alternate,m!==null&&(m.lanes|=n),qp(o.return,n,e),d.lanes|=n;break}m=m.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(oe(341));l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),qp(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Dn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,pl(e,n),i=Ds(i),s=s(i),e.flags|=1,Dn(t,e,s,n),e.child;case 14:return s=e.type,i=Gs(s,e.pendingProps),i=Gs(s.type,i),bw(t,e,s,i,n);case 15:return bj(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gs(s,i),uh(t,e),e.tag=1,Xn(s)?(t=!0,Rh(e)):t=!1,pl(e,n),wj(e,s,i),Kp(e,s,i,n),Yp(null,e,s,!0,t,n);case 19:return Ej(t,e,n);case 22:return jj(t,e,n)}throw Error(oe(156,e.tag))};function $j(t,e){return gb(t,e)}function gS(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(t,e,n,s){return new gS(t,e,n,s)}function By(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yS(t){if(typeof t=="function")return By(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iy)return 11;if(t===ay)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=Cs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mh(t,e,n,s,i,o){var l=2;if(s=t,typeof t=="function")By(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Xo:return Ka(n.children,i,o,e);case ry:l=8,i|=8;break;case xp:return t=Cs(12,n,e,i|2),t.elementType=xp,t.lanes=o,t;case wp:return t=Cs(13,n,e,i),t.elementType=wp,t.lanes=o,t;case vp:return t=Cs(19,n,e,i),t.elementType=vp,t.lanes=o,t;case X_:return Cm(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y_:l=10;break e;case J_:l=9;break e;case iy:l=11;break e;case ay:l=14;break e;case Mi:l=16,s=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Cs(l,n,e,i),e.elementType=t,e.type=s,e.lanes=o,e}function Ka(t,e,n,s){return t=Cs(7,t,s,e),t.lanes=n,t}function Cm(t,e,n,s){return t=Cs(22,t,s,e),t.elementType=X_,t.lanes=n,t.stateNode={isHidden:!1},t}function Qf(t,e,n){return t=Cs(6,t,null,e),t.lanes=n,t}function Yf(t,e,n){return e=Cs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xS(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cf(0),this.expirationTimes=Cf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cf(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uy(t,e,n,s,i,o,l,d,m){return t=new xS(t,e,n,d,m),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Cs(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ny(o),t}function wS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jo,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Wj(t){if(!t)return da;t=t._reactInternals;e:{if(go(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(Xn(n))return Wb(t,n,e)}return e}function Hj(t,e,n,s,i,o,l,d,m){return t=Uy(n,s,!0,t,i,o,l,d,m),t.context=Wj(null),n=t.current,s=Vn(),i=sa(n),o=ci(s,i),o.callback=e??null,ta(n,o,i),t.current.lanes=i,Mu(t,i,s),es(t,s),t}function Im(t,e,n,s){var i=e.current,o=Vn(),l=sa(i);return n=Wj(n),e.context===null?e.context=n:e.pendingContext=n,e=ci(o,l),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=ta(i,e,l),t!==null&&(tr(t,i,l,o),oh(t,i,l)),l}function Zh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fy(t,e){Rw(t,e),(t=t.alternate)&&Rw(t,e)}function vS(){return null}var qj=typeof reportError=="function"?reportError:function(t){console.error(t)};function $y(t){this._internalRoot=t}Am.prototype.render=$y.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Im(t,e,null,null)};Am.prototype.unmount=$y.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){Im(null,t,null,null)}),e[mi]=null}};function Am(t){this._internalRoot=t}Am.prototype.unstable_scheduleHydration=function(t){if(t){var e=jb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vi.length&&e!==0&&e<Vi[n].priority;n++);Vi.splice(n,0,t),n===0&&kb(t)}};function Wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lw(){}function _S(t,e,n,s,i){if(i){if(typeof s=="function"){var o=s;s=function(){var f=Zh(l);o.call(f)}}var l=Hj(e,s,t,0,null,!1,!1,"",Lw);return t._reactRootContainer=l,t[mi]=l.current,du(t.nodeType===8?t.parentNode:t),ro(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var d=s;s=function(){var f=Zh(m);d.call(f)}}var m=Uy(t,0,!1,null,null,!1,!1,"",Lw);return t._reactRootContainer=m,t[mi]=m.current,du(t.nodeType===8?t.parentNode:t),ro(function(){Im(e,m,n,s)}),m}function Lm(t,e,n,s,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var d=i;i=function(){var m=Zh(l);d.call(m)}}Im(e,l,t,i)}else l=_S(n,e,t,i,s);return Zh(l)}_b=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ic(e.pendingLanes);n!==0&&(cy(e,n|1),es(e,$t()),!(it&6)&&(zl=$t()+500,ja()))}break;case 13:ro(function(){var s=fi(t,1);if(s!==null){var i=Vn();tr(s,t,1,i)}}),Fy(t,1)}};uy=function(t){if(t.tag===13){var e=fi(t,134217728);if(e!==null){var n=Vn();tr(e,t,134217728,n)}Fy(t,134217728)}};bb=function(t){if(t.tag===13){var e=sa(t),n=fi(t,e);if(n!==null){var s=Vn();tr(n,t,e,s)}Fy(t,e)}};jb=function(){return ft};Nb=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};Pp=function(t,e,n){switch(e){case"input":if(jp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=km(s);if(!i)throw Error(oe(90));tb(s),jp(s,i)}}}break;case"textarea":sb(t,n);break;case"select":e=n.value,e!=null&&dl(t,!!n.multiple,e,!1)}};ub=My;db=ro;var bS={usingClientEntryPoint:!1,Events:[Vu,sl,km,lb,cb,My]},Sc={findFiberByHostInstance:Fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jS={bundleType:Sc.bundleType,version:Sc.version,rendererPackageName:Sc.rendererPackageName,rendererConfig:Sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fb(t),t===null?null:t.stateNode},findFiberByHostInstance:Sc.findFiberByHostInstance||vS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{_m=Wd.inject(jS),_r=Wd}catch{}}gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bS;gs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wy(e))throw Error(oe(200));return wS(t,e,null,n)};gs.createRoot=function(t,e){if(!Wy(t))throw Error(oe(299));var n=!1,s="",i=qj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uy(t,1,!1,null,null,n,!1,s,i),t[mi]=e.current,du(t.nodeType===8?t.parentNode:t),new $y(e)};gs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=fb(e),t=t===null?null:t.stateNode,t};gs.flushSync=function(t){return ro(t)};gs.hydrate=function(t,e,n){if(!Rm(e))throw Error(oe(200));return Lm(null,t,e,!0,n)};gs.hydrateRoot=function(t,e,n){if(!Wy(t))throw Error(oe(405));var s=n!=null&&n.hydratedSources||null,i=!1,o="",l=qj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Hj(e,null,t,1,n??null,i,!1,o,l),t[mi]=e.current,du(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Am(e)};gs.render=function(t,e,n){if(!Rm(e))throw Error(oe(200));return Lm(null,t,e,!1,n)};gs.unmountComponentAtNode=function(t){if(!Rm(t))throw Error(oe(40));return t._reactRootContainer?(ro(function(){Lm(null,null,t,!1,function(){t._reactRootContainer=null,t[mi]=null})}),!0):!1};gs.unstable_batchedUpdates=My;gs.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Rm(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Lm(t,e,n,!1,s)};gs.version="18.3.1-next-f1338f8080-20240426";function Zj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zj)}catch(t){console.error(t)}}Zj(),Z_.exports=gs;var NS=Z_.exports,Dw=NS;gp.createRoot=Dw.createRoot,gp.hydrateRoot=Dw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},vu.apply(this,arguments)}var Ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ki||(Ki={}));const Mw="popstate";function kS(t){t===void 0&&(t={});function e(i,o){let{pathname:l="/",search:d="",hash:m=""}=yo(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),cg("",{pathname:l,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let m=i.location.href,f=m.indexOf("#");d=f===-1?m:m.slice(0,f)}return d+"#"+(typeof o=="string"?o:Kh(o))}function s(i,o){Dm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return ES(e,n,s,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TS(){return Math.random().toString(36).substr(2,8)}function Ow(t,e){return{usr:t.state,key:t.key,idx:e}}function cg(t,e,n,s){return n===void 0&&(n=null),vu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?yo(e):e,{state:n,key:e&&e.key||s||TS()})}function Kh(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function yo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function ES(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:o=!1}=s,l=i.history,d=Ki.Pop,m=null,f=g();f==null&&(f=0,l.replaceState(vu({},l.state,{idx:f}),""));function g(){return(l.state||{idx:null}).idx}function x(){d=Ki.Pop;let C=g(),b=C==null?null:C-f;f=C,m&&m({action:d,location:A.location,delta:b})}function w(C,b){d=Ki.Push;let k=cg(A.location,C,b);n&&n(k,C),f=g()+1;let j=Ow(k,f),U=A.createHref(k);try{l.pushState(j,"",U)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(U)}o&&m&&m({action:d,location:A.location,delta:1})}function E(C,b){d=Ki.Replace;let k=cg(A.location,C,b);n&&n(k,C),f=g();let j=Ow(k,f),U=A.createHref(k);l.replaceState(j,"",U),o&&m&&m({action:d,location:A.location,delta:0})}function S(C){let b=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof C=="string"?C:Kh(C);return k=k.replace(/ $/,"%20"),Ct(b,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,b)}let A={get action(){return d},get location(){return t(i,l)},listen(C){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(Mw,x),m=C,()=>{i.removeEventListener(Mw,x),m=null}},createHref(C){return e(i,C)},createURL:S,encodeLocation(C){let b=S(C);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:w,replace:E,go(C){return l.go(C)}};return A}var Vw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vw||(Vw={}));function SS(t,e,n){return n===void 0&&(n="/"),zS(t,e,n)}function zS(t,e,n,s){let i=typeof e=="string"?yo(e):e,o=Pl(i.pathname||"/",n);if(o==null)return null;let l=Kj(t);PS(l);let d=null;for(let m=0;d==null&&m<l.length;++m){let f=US(o);d=VS(l[m],f)}return d}function Kj(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(o,l,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};m.relativePath.startsWith("/")&&(Ct(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let f=ia([s,m.relativePath]),g=n.concat(m);o.children&&o.children.length>0&&(Ct(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Kj(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:MS(f,o.index),routesMeta:g})};return t.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,l);else for(let m of Gj(o.path))i(o,l,m)}),e}function Gj(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return i?[o,""]:[o];let l=Gj(s.join("/")),d=[];return d.push(...l.map(m=>m===""?o:[o,m].join("/"))),i&&d.push(...l),d.map(m=>t.startsWith("/")&&m===""?"/":m)}function PS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:OS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const CS=/^:[\w-]+$/,IS=3,AS=2,RS=1,LS=10,DS=-2,Bw=t=>t==="*";function MS(t,e){let n=t.split("/"),s=n.length;return n.some(Bw)&&(s+=DS),e&&(s+=AS),n.filter(i=>!Bw(i)).reduce((i,o)=>i+(CS.test(o)?IS:o===""?RS:LS),s)}function OS(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function VS(t,e,n){let{routesMeta:s}=t,i={},o="/",l=[];for(let d=0;d<s.length;++d){let m=s[d],f=d===s.length-1,g=o==="/"?e:e.slice(o.length)||"/",x=ug({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},g),w=m.route;if(!x)return null;Object.assign(i,x.params),l.push({params:i,pathname:ia([o,x.pathname]),pathnameBase:qS(ia([o,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(o=ia([o,x.pathnameBase]))}return l}function ug(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=BS(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:s.reduce((f,g,x)=>{let{paramName:w,isOptional:E}=g;if(w==="*"){let A=d[x]||"";l=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const S=d[x];return E&&!S?f[w]=void 0:f[w]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function BS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Dm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,m)=>(s.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function US(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const FS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$S=t=>FS.test(t);function WS(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?yo(t):t,o;if(n)if($S(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Dm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=Uw(n.substring(1),"/"):o=Uw(n,e)}else o=e;return{pathname:o,search:ZS(s),hash:KS(i)}}function Uw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Jf(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hy(t,e){let n=HS(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function qy(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=yo(t):(i=vu({},t),Ct(!i.pathname||!i.pathname.includes("?"),Jf("?","pathname","search",i)),Ct(!i.pathname||!i.pathname.includes("#"),Jf("#","pathname","hash",i)),Ct(!i.search||!i.search.includes("#"),Jf("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,d;if(l==null)d=n;else{let x=e.length-1;if(!s&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),x-=1;i.pathname=w.join("/")}d=x>=0?e[x]:"/"}let m=WS(i,d),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(f||g)&&(m.pathname+="/"),m}const ia=t=>t.join("/").replace(/\/\/+/g,"/"),qS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qj=["post","put","patch","delete"];new Set(Qj);const QS=["get",...Qj];new Set(QS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_u.apply(this,arguments)}const Mm=N.createContext(null),Yj=N.createContext(null),ji=N.createContext(null),Om=N.createContext(null),Lr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Jj=N.createContext(null);function YS(t,e){let{relative:n}=e===void 0?{}:e;Hl()||Ct(!1);let{basename:s,navigator:i}=N.useContext(ji),{hash:o,pathname:l,search:d}=Vm(t,{relative:n}),m=l;return s!=="/"&&(m=l==="/"?s:ia([s,l])),i.createHref({pathname:m,search:d,hash:o})}function Hl(){return N.useContext(Om)!=null}function Os(){return Hl()||Ct(!1),N.useContext(Om).location}function Xj(t){N.useContext(ji).static||N.useLayoutEffect(t)}function xs(){let{isDataRoute:t}=N.useContext(Lr);return t?hz():JS()}function JS(){Hl()||Ct(!1);let t=N.useContext(Mm),{basename:e,future:n,navigator:s}=N.useContext(ji),{matches:i}=N.useContext(Lr),{pathname:o}=Os(),l=JSON.stringify(Hy(i,n.v7_relativeSplatPath)),d=N.useRef(!1);return Xj(()=>{d.current=!0}),N.useCallback(function(f,g){if(g===void 0&&(g={}),!d.current)return;if(typeof f=="number"){s.go(f);return}let x=qy(f,JSON.parse(l),o,g.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ia([e,x.pathname])),(g.replace?s.replace:s.push)(x,g.state,g)},[e,s,l,o,t])}const XS=N.createContext(null);function ez(t){let e=N.useContext(Lr).outlet;return e&&N.createElement(XS.Provider,{value:t},e)}function eN(){let{matches:t}=N.useContext(Lr),e=t[t.length-1];return e?e.params:{}}function Vm(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=N.useContext(ji),{matches:i}=N.useContext(Lr),{pathname:o}=Os(),l=JSON.stringify(Hy(i,s.v7_relativeSplatPath));return N.useMemo(()=>qy(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function tz(t,e){return nz(t,e)}function nz(t,e,n,s){Hl()||Ct(!1);let{navigator:i}=N.useContext(ji),{matches:o}=N.useContext(Lr),l=o[o.length-1],d=l?l.params:{};l&&l.pathname;let m=l?l.pathnameBase:"/";l&&l.route;let f=Os(),g;if(e){var x;let C=typeof e=="string"?yo(e):e;m==="/"||(x=C.pathname)!=null&&x.startsWith(m)||Ct(!1),g=C}else g=f;let w=g.pathname||"/",E=w;if(m!=="/"){let C=m.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=SS(t,{pathname:E}),A=oz(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:ia([m,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:ia([m,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,s);return e&&A?N.createElement(Om.Provider,{value:{location:_u({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Ki.Pop}},A):A}function sz(){let t=dz(),e=GS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const rz=N.createElement(sz,null);class iz extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Lr.Provider,{value:this.props.routeContext},N.createElement(Jj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function az(t){let{routeContext:e,match:n,children:s}=t,i=N.useContext(Mm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Lr.Provider,{value:e},s)}function oz(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=s)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,d=(i=n)==null?void 0:i.errors;if(d!=null){let g=l.findIndex(x=>x.route.id&&(d==null?void 0:d[x.route.id])!==void 0);g>=0||Ct(!1),l=l.slice(0,Math.min(l.length,g+1))}let m=!1,f=-1;if(n&&s&&s.v7_partialHydration)for(let g=0;g<l.length;g++){let x=l[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=g),x.route.id){let{loaderData:w,errors:E}=n,S=x.route.loader&&w[x.route.id]===void 0&&(!E||E[x.route.id]===void 0);if(x.route.lazy||S){m=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((g,x,w)=>{let E,S=!1,A=null,C=null;n&&(E=d&&x.route.id?d[x.route.id]:void 0,A=x.route.errorElement||rz,m&&(f<0&&w===0?(mz("route-fallback"),S=!0,C=null):f===w&&(S=!0,C=x.route.hydrateFallbackElement||null)));let b=e.concat(l.slice(0,w+1)),k=()=>{let j;return E?j=A:S?j=C:x.route.Component?j=N.createElement(x.route.Component,null):x.route.element?j=x.route.element:j=g,N.createElement(az,{match:x,routeContext:{outlet:g,matches:b,isDataRoute:n!=null},children:j})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?N.createElement(iz,{location:n.location,revalidation:n.revalidation,component:A,error:E,children:k(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):k()},null)}var tN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tN||{}),nN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(nN||{});function lz(t){let e=N.useContext(Mm);return e||Ct(!1),e}function cz(t){let e=N.useContext(Yj);return e||Ct(!1),e}function uz(t){let e=N.useContext(Lr);return e||Ct(!1),e}function sN(t){let e=uz(),n=e.matches[e.matches.length-1];return n.route.id||Ct(!1),n.route.id}function dz(){var t;let e=N.useContext(Jj),n=cz(),s=sN();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function hz(){let{router:t}=lz(tN.UseNavigateStable),e=sN(nN.UseNavigateStable),n=N.useRef(!1);return Xj(()=>{n.current=!0}),N.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,_u({fromRouteId:e},o)))},[t,e])}const Fw={};function mz(t,e,n){Fw[t]||(Fw[t]=!0)}function fz(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function dg(t){let{to:e,replace:n,state:s,relative:i}=t;Hl()||Ct(!1);let{future:o,static:l}=N.useContext(ji),{matches:d}=N.useContext(Lr),{pathname:m}=Os(),f=xs(),g=qy(e,Hy(d,o.v7_relativeSplatPath),m,i==="path"),x=JSON.stringify(g);return N.useEffect(()=>f(JSON.parse(x),{replace:n,state:s,relative:i}),[f,x,i,n,s]),null}function rN(t){return ez(t.context)}function qe(t){Ct(!1)}function pz(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Ki.Pop,navigator:o,static:l=!1,future:d}=t;Hl()&&Ct(!1);let m=e.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:m,navigator:o,static:l,future:_u({v7_relativeSplatPath:!1},d)}),[m,d,o,l]);typeof s=="string"&&(s=yo(s));let{pathname:g="/",search:x="",hash:w="",state:E=null,key:S="default"}=s,A=N.useMemo(()=>{let C=Pl(g,m);return C==null?null:{location:{pathname:C,search:x,hash:w,state:E,key:S},navigationType:i}},[m,g,x,w,E,S,i]);return A==null?null:N.createElement(ji.Provider,{value:f},N.createElement(Om.Provider,{children:n,value:A}))}function iN(t){let{children:e,location:n}=t;return tz(hg(e),n)}new Promise(()=>{});function hg(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(s,i)=>{if(!N.isValidElement(s))return;let o=[...e,i];if(s.type===N.Fragment){n.push.apply(n,hg(s.props.children,o));return}s.type!==qe&&Ct(!1),!s.props.index||!s.props.children||Ct(!1);let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=hg(s.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Gh.apply(this,arguments)}function aN(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,o;for(o=0;o<s.length;o++)i=s[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function gz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yz(t,e){return t.button===0&&(!e||e==="_self")&&!gz(t)}function mg(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function xz(t,e){let n=mg(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const wz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vz=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_z="6";try{window.__reactRouterVersion=_z}catch{}const bz=N.createContext({isTransitioning:!1}),jz="startTransition",$w=mT[jz];function Nz(t){let{basename:e,children:n,future:s,window:i}=t,o=N.useRef();o.current==null&&(o.current=kS({window:i,v5Compat:!0}));let l=o.current,[d,m]=N.useState({action:l.action,location:l.location}),{v7_startTransition:f}=s||{},g=N.useCallback(x=>{f&&$w?$w(()=>m(x)):m(x)},[m,f]);return N.useLayoutEffect(()=>l.listen(g),[l,g]),N.useEffect(()=>fz(s),[s]),N.createElement(pz,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:l,future:s})}const kz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ne=N.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:o,replace:l,state:d,target:m,to:f,preventScrollReset:g,viewTransition:x}=e,w=aN(e,wz),{basename:E}=N.useContext(ji),S,A=!1;if(typeof f=="string"&&Tz.test(f)&&(S=f,kz))try{let j=new URL(window.location.href),U=f.startsWith("//")?new URL(j.protocol+f):new URL(f),D=Pl(U.pathname,E);U.origin===j.origin&&D!=null?f=D+U.search+U.hash:A=!0}catch{}let C=YS(f,{relative:i}),b=Sz(f,{replace:l,state:d,target:m,preventScrollReset:g,relative:i,viewTransition:x});function k(j){s&&s(j),j.defaultPrevented||b(j)}return N.createElement("a",Gh({},w,{href:S||C,onClick:A||o?s:k,ref:n,target:m}))}),Ww=N.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:i=!1,className:o="",end:l=!1,style:d,to:m,viewTransition:f,children:g}=e,x=aN(e,vz),w=Vm(m,{relative:x.relative}),E=Os(),S=N.useContext(Yj),{navigator:A,basename:C}=N.useContext(ji),b=S!=null&&zz(w)&&f===!0,k=A.encodeLocation?A.encodeLocation(w).pathname:w.pathname,j=E.pathname,U=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(j=j.toLowerCase(),U=U?U.toLowerCase():null,k=k.toLowerCase()),U&&C&&(U=Pl(U,C)||U);const D=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let F=j===k||!l&&j.startsWith(k)&&j.charAt(D)==="/",P=U!=null&&(U===k||!l&&U.startsWith(k)&&U.charAt(k.length)==="/"),T={isActive:F,isPending:P,isTransitioning:b},M=F?s:void 0,R;typeof o=="function"?R=o(T):R=[o,F?"active":null,P?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let B=typeof d=="function"?d(T):d;return N.createElement(Ne,Gh({},x,{"aria-current":M,className:R,ref:n,style:B,to:m,viewTransition:f}),typeof g=="function"?g(T):g)});var fg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fg||(fg={}));var Hw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Hw||(Hw={}));function Ez(t){let e=N.useContext(Mm);return e||Ct(!1),e}function Sz(t,e){let{target:n,replace:s,state:i,preventScrollReset:o,relative:l,viewTransition:d}=e===void 0?{}:e,m=xs(),f=Os(),g=Vm(t,{relative:l});return N.useCallback(x=>{if(yz(x,n)){x.preventDefault();let w=s!==void 0?s:Kh(f)===Kh(g);m(t,{replace:w,state:i,preventScrollReset:o,relative:l,viewTransition:d})}},[f,m,g,s,i,n,t,o,l,d])}function Zy(t){let e=N.useRef(mg(t)),n=N.useRef(!1),s=Os(),i=N.useMemo(()=>xz(s.search,n.current?null:e.current),[s.search]),o=xs(),l=N.useCallback((d,m)=>{const f=mg(typeof d=="function"?d(i):d);n.current=!0,o("?"+f,m)},[o,i]);return[i,l]}function zz(t,e){e===void 0&&(e={});let n=N.useContext(bz);n==null&&Ct(!1);let{basename:s}=Ez(fg.useViewTransitionState),i=Vm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Pl(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=Pl(n.nextLocation.pathname,s)||n.nextLocation.pathname;return ug(i.pathname,l)!=null||ug(i.pathname,o)!=null}const Pz=()=>{};var qw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Cz=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],l=t[n++],d=t[n++],m=((i&7)<<18|(o&63)<<12|(l&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const o=t[n++],l=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},lN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const o=t[i],l=i+1<t.length,d=l?t[i+1]:0,m=i+2<t.length,f=m?t[i+2]:0,g=o>>2,x=(o&3)<<4|d>>4;let w=(d&15)<<2|f>>6,E=f&63;m||(E=64,l||(w=64)),s.push(n[g],n[x],n[w],n[E])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Cz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],d=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const x=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||d==null||f==null||x==null)throw new Iz;const w=o<<2|d>>4;if(s.push(w),f!==64){const E=d<<4&240|f>>2;if(s.push(E),x!==64){const S=f<<6&192|x;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Iz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Az=function(t){const e=oN(t);return lN.encodeByteArray(e,!0)},Qh=function(t){return Az(t).replace(/\./g,"")},cN=function(t){try{return lN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=()=>Rz().__FIREBASE_DEFAULTS__,Dz=()=>{if(typeof process>"u"||typeof qw>"u")return;const t=qw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Mz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cN(t[1]);return e&&JSON.parse(e)},Bm=()=>{try{return Pz()||Lz()||Dz()||Mz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uN=t=>{var e,n;return(n=(e=Bm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},dN=t=>{const e=uN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},hN=()=>{var t;return(t=Bm())==null?void 0:t.config},mN=t=>{var e;return(e=Bm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ky(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Qh(JSON.stringify(n)),Qh(JSON.stringify(l)),""].join(".")}const Gc={};function Vz(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gc))Gc[e]?t.emulator.push(e):t.prod.push(e);return t}function Bz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zw=!1;function Gy(t,e){if(typeof window>"u"||typeof document>"u"||!Na(window.location.host)||Gc[t]===e||Gc[t]||Zw)return;Gc[t]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",o=Vz().prod.length>0;function l(){const w=document.getElementById(s);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,E){w.setAttribute("width","24"),w.setAttribute("id",E),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function f(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Zw=!0,l()},w}function g(w,E){w.setAttribute("id",E),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function x(){const w=Bz(s),E=n("text"),S=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),C=document.getElementById(A)||document.createElement("a"),b=n("preprendIcon"),k=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const j=w.element;d(j),g(C,A);const U=f();m(k,b),j.append(k,S,C,U),document.body.appendChild(j)}o?(S.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function Fz(){var e;const t=(e=Bm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $z(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Hz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qz(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Zz(){return!Fz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kz(){try{return typeof indexedDB=="object"}catch{return!1}}function Gz(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz="FirebaseError";class Dr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Qz,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uu.prototype.create)}}class Uu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?Yz(o,s):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new Dr(i,d,s)}}function Yz(t,e){return t.replace(Jz,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const Jz=/\{\$([^}]+)}/g;function Xz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function io(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const o=t[i],l=e[i];if(Kw(o)&&Kw(l)){if(!io(o,l))return!1}else if(o!==l)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Kw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Rc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,o]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Lc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function eP(t,e){const n=new tP(t,e);return n.subscribe.bind(n)}class tP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");nP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Xf),i.error===void 0&&(i.error=Xf),i.complete===void 0&&(i.complete=Xf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class ha{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Oz;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iP(e))try{this.getOrInitializeService({instanceIdentifier:Ua})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(e=Ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ua){return this.instances.has(e)}getOptions(e=Ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[o,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);s===d&&l.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rP(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ua){return this.component?this.component.multipleInstances?e:Ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rP(t){return t===Ua?void 0:t}function iP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const oP={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},lP=Ye.INFO,cP={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},uP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=cP[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qy{constructor(e){this.name=e,this._logLevel=lP,this._logHandler=uP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const dP=(t,e)=>e.some(n=>t instanceof n);let Gw,Qw;function hP(){return Gw||(Gw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mP(){return Qw||(Qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pN=new WeakMap,pg=new WeakMap,gN=new WeakMap,ep=new WeakMap,Yy=new WeakMap;function fP(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(aa(t.result)),i()},l=()=>{s(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&pN.set(n,t)}).catch(()=>{}),Yy.set(e,t),e}function pP(t){if(pg.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});pg.set(t,e)}let gg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return aa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gP(t){gg=t(gg)}function yP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(tp(this),e,...n);return gN.set(s,e.sort?e.sort():[e]),aa(s)}:mP().includes(t)?function(...e){return t.apply(tp(this),e),aa(pN.get(this))}:function(...e){return aa(t.apply(tp(this),e))}}function xP(t){return typeof t=="function"?yP(t):(t instanceof IDBTransaction&&pP(t),dP(t,hP())?new Proxy(t,gg):t)}function aa(t){if(t instanceof IDBRequest)return fP(t);if(ep.has(t))return ep.get(t);const e=xP(t);return e!==t&&(ep.set(t,e),Yy.set(e,t)),e}const tp=t=>Yy.get(t);function wP(t,e,{blocked:n,upgrade:s,blocking:i,terminated:o}={}){const l=indexedDB.open(t,e),d=aa(l);return s&&l.addEventListener("upgradeneeded",m=>{s(aa(l.result),m.oldVersion,m.newVersion,aa(l.transaction),m)}),n&&l.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),d.then(m=>{o&&m.addEventListener("close",()=>o()),i&&m.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const vP=["get","getKey","getAll","getAllKeys","count"],_P=["put","add","delete","clear"],np=new Map;function Yw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(np.get(e))return np.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=_P.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||vP.includes(n)))return;const o=async function(l,...d){const m=this.transaction(l,i?"readwrite":"readonly");let f=m.store;return s&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),i&&m.done]))[0]};return np.set(e,o),o}gP(t=>({...t,get:(e,n,s)=>Yw(e,n)||t.get(e,n,s),has:(e,n)=>!!Yw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function jP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yg="@firebase/app",Jw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Qy("@firebase/app"),NP="@firebase/app-compat",kP="@firebase/analytics-compat",TP="@firebase/analytics",EP="@firebase/app-check-compat",SP="@firebase/app-check",zP="@firebase/auth",PP="@firebase/auth-compat",CP="@firebase/database",IP="@firebase/data-connect",AP="@firebase/database-compat",RP="@firebase/functions",LP="@firebase/functions-compat",DP="@firebase/installations",MP="@firebase/installations-compat",OP="@firebase/messaging",VP="@firebase/messaging-compat",BP="@firebase/performance",UP="@firebase/performance-compat",FP="@firebase/remote-config",$P="@firebase/remote-config-compat",WP="@firebase/storage",HP="@firebase/storage-compat",qP="@firebase/firestore",ZP="@firebase/ai",KP="@firebase/firestore-compat",GP="firebase",QP="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="[DEFAULT]",YP={[yg]:"fire-core",[NP]:"fire-core-compat",[TP]:"fire-analytics",[kP]:"fire-analytics-compat",[SP]:"fire-app-check",[EP]:"fire-app-check-compat",[zP]:"fire-auth",[PP]:"fire-auth-compat",[CP]:"fire-rtdb",[IP]:"fire-data-connect",[AP]:"fire-rtdb-compat",[RP]:"fire-fn",[LP]:"fire-fn-compat",[DP]:"fire-iid",[MP]:"fire-iid-compat",[OP]:"fire-fcm",[VP]:"fire-fcm-compat",[BP]:"fire-perf",[UP]:"fire-perf-compat",[FP]:"fire-rc",[$P]:"fire-rc-compat",[WP]:"fire-gcs",[HP]:"fire-gcs-compat",[qP]:"fire-fst",[KP]:"fire-fst-compat",[ZP]:"fire-vertex","fire-js":"fire-js",[GP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Map,JP=new Map,wg=new Map;function Xw(t,e){try{t.container.addComponent(e)}catch(n){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ao(t){const e=t.name;if(wg.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;wg.set(e,t);for(const n of Yh.values())Xw(n,t);for(const n of JP.values())Xw(n,t);return!0}function Um(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function us(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oa=new Uu("app","Firebase",XP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=QP;function yN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:xg,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw oa.create("bad-app-name",{appName:String(i)});if(n||(n=hN()),!n)throw oa.create("no-options");const o=Yh.get(i);if(o){if(io(n,o.options)&&io(s,o.config))return o;throw oa.create("duplicate-app",{appName:i})}const l=new aP(i);for(const m of wg.values())l.addComponent(m);const d=new eC(n,s,l);return Yh.set(i,d),d}function Jy(t=xg){const e=Yh.get(t);if(!e&&t===xg&&hN())return yN();if(!e)throw oa.create("no-app",{appName:t});return e}function jr(t,e,n){let s=YP[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(l.join(" "));return}ao(new ha(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebase-heartbeat-database",nC=1,bu="firebase-heartbeat-store";let sp=null;function xN(){return sp||(sp=wP(tC,nC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw oa.create("idb-open",{originalErrorMessage:t.message})})),sp}async function sC(t){try{const n=(await xN()).transaction(bu),s=await n.objectStore(bu).get(wN(t));return await n.done,s}catch(e){if(e instanceof Dr)gi.warn(e.message);else{const n=oa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(n.message)}}}async function ev(t,e){try{const s=(await xN()).transaction(bu,"readwrite");await s.objectStore(bu).put(e,wN(t)),await s.done}catch(n){if(n instanceof Dr)gi.warn(n.message);else{const s=oa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gi.warn(s.message)}}}function wN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1024,iC=30;class aC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>iC){const l=cC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){gi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tv(),{heartbeatsToSend:s,unsentEntries:i}=oC(this._heartbeatsCache.heartbeats),o=Qh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return gi.warn(n),""}}}function tv(){return new Date().toISOString().substring(0,10)}function oC(t,e=rC){const n=[];let s=t.slice();for(const i of t){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),nv(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class lC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kz()?Gz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nv(t){return Qh(JSON.stringify({version:2,heartbeats:t})).length}function cC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){ao(new ha("platform-logger",e=>new bP(e),"PRIVATE")),ao(new ha("heartbeat",e=>new aC(e),"PRIVATE")),jr(yg,Jw,t),jr(yg,Jw,"esm2020"),jr("fire-js","")}uC("");function vN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dC=vN,_N=new Uu("auth","Firebase",vN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Qy("@firebase/auth");function hC(t,...e){Jh.logLevel<=Ye.WARN&&Jh.warn(`Auth (${xo}): ${t}`,...e)}function fh(t,...e){Jh.logLevel<=Ye.ERROR&&Jh.error(`Auth (${xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw Xy(t,...e)}function Nr(t,...e){return Xy(t,...e)}function bN(t,e,n){const s={...dC(),[e]:n};return new Uu("auth","Firebase",s).create(e,{appName:t.name})}function ui(t){return bN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xy(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return _N.create(t,...e)}function Pe(t,e,...n){if(!t)throw Xy(e,...n)}function ai(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fh(e),new Error(e)}function yi(t,e){t||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function mC(){return sv()==="http:"||sv()==="https:"}function sv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mC()||Wz()||"connection"in navigator)?navigator.onLine:!0}function pC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.shortDelay=e,this.longDelay=n,yi(n>e,"Short delay should be less than long delay!"),this.isMobile=Uz()||Hz()}get(){return fC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t,e){yi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xC=new $u(3e4,6e4);function Ni(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ar(t,e,n,s,i={}){return NN(t,i,async()=>{let o={},l={};s&&(e==="GET"?l=s:o={body:JSON.stringify(s)});const d=Fu({key:t.config.apiKey,...l}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:m,...o};return $z()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Na(t.emulatorConfig.host)&&(f.credentials="include"),jN.fetch()(await kN(t,t.config.apiHost,n,d),f)})}async function NN(t,e,n){t._canInitEmulator=!1;const s={...gC,...e};try{const i=new vC(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Hd(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const d=o.ok?l.errorMessage:l.error.message,[m,f]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hd(t,"credential-already-in-use",l);if(m==="EMAIL_EXISTS")throw Hd(t,"email-already-in-use",l);if(m==="USER_DISABLED")throw Hd(t,"user-disabled",l);const g=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw bN(t,g,f);rr(t,g)}}catch(i){if(i instanceof Dr)throw i;rr(t,"network-request-failed",{message:String(i)})}}async function Wu(t,e,n,s,i={}){const o=await ar(t,e,n,s,i);return"mfaPendingCredential"in o&&rr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function kN(t,e,n,s){const i=`${e}${n}?${s}`,o=t,l=o.config.emulator?ex(t.config,i):`${t.config.apiScheme}://${i}`;return yC.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function wC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Nr(this.auth,"network-request-failed")),xC.get())})}}function Hd(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Nr(t,e,s);return i.customData._tokenResponse=n,i}function rv(t){return t!==void 0&&t.enterprise!==void 0}class _C{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bC(t,e){return ar(t,"GET","/v2/recaptchaConfig",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,e){return ar(t,"POST","/v1/accounts:delete",e)}async function Xh(t,e){return ar(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NC(t,e=!1){const n=lt(t),s=await n.getIdToken(e),i=tx(s);Pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:s,authTime:Qc(rp(i.auth_time)),issuedAtTime:Qc(rp(i.iat)),expirationTime:Qc(rp(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function rp(t){return Number(t)*1e3}function tx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const i=cN(n);return i?JSON.parse(i):(fh("Failed to decode base64 JWT payload"),null)}catch(i){return fh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iv(t){const e=tx(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Dr&&kC(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function kC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qc(this.lastLoginAt),this.creationTime=Qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function em(t){var x;const e=t.auth,n=await t.getIdToken(),s=await oo(t,Xh(e,{idToken:n}));Pe(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=(x=i.providerUserInfo)!=null&&x.length?TN(i.providerUserInfo):[],l=SC(t.providerData,o),d=t.isAnonymous,m=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=d?m:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new _g(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function EC(t){const e=lt(t);await em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SC(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function TN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(t,e){const n=await NN(t,{},async()=>{const s=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,l=await kN(t,i,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:s};return t.emulatorConfig&&Na(t.emulatorConfig.host)&&(m.credentials="include"),jN.fetch()(l,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PC(t,e){return ar(t,"POST","/v2/accounts:revokeToken",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=iv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:o}=await zC(e,n);this.updateTokensAndExpiration(s,i,Number(o))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:o}=n,l=new yl;return s&&(Pe(typeof s=="string","internal-error",{appName:e}),l.refreshToken=s),i&&(Pe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yl,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new TC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _g(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await oo(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NC(this,e)}reload(){return EC(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await em(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(us(this.auth.app))return Promise.reject(ui(this.auth));const e=await this.getIdToken();return await oo(this,jC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,d=n.tenantId??void 0,m=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:x,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:A}=n;Pe(x&&A,e,"internal-error");const C=yl.fromJSON(this.name,A);Pe(typeof x=="string",e,"internal-error"),Ri(s,e.name),Ri(i,e.name),Pe(typeof w=="boolean",e,"internal-error"),Pe(typeof E=="boolean",e,"internal-error"),Ri(o,e.name),Ri(l,e.name),Ri(d,e.name),Ri(m,e.name),Ri(f,e.name),Ri(g,e.name);const b=new Xs({uid:x,auth:e,email:i,emailVerified:w,displayName:s,isAnonymous:E,photoURL:l,phoneNumber:o,tenantId:d,stsTokenManager:C,createdAt:f,lastLoginAt:g});return S&&Array.isArray(S)&&(b.providerData=S.map(k=>({...k}))),m&&(b._redirectEventId=m),b}static async _fromIdTokenResponse(e,n,s=!1){const i=new yl;i.updateFromServerResponse(n);const o=new Xs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await em(o),o}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];Pe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?TN(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),d=new yl;d.updateFromIdToken(s);const m=new Xs({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _g(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,f),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;function oi(t){yi(t instanceof Function,"Expected a class definition");let e=av.get(t);return e?(yi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,av.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EN.type="NONE";const ov=EN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t,e,n){return`firebase:${t}:${e}:${n}`}class xl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:o}=this.auth;this.fullUserKey=ph(this.userKey,i.apiKey,o),this.fullPersistenceKey=ph("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xh(this.auth,{idToken:e}).catch(()=>{});return n?Xs._fromGetAccountInfoResponse(this.auth,n,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new xl(oi(ov),e,s);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||oi(ov);const l=ph(s,e.config.apiKey,e.name);let d=null;for(const f of n)try{const g=await f._get(l);if(g){let x;if(typeof g=="string"){const w=await Xh(e,{idToken:g}).catch(()=>{});if(!w)break;x=await Xs._fromGetAccountInfoResponse(e,w,g)}else x=Xs._fromJSON(e,g);f!==o&&(d=x),o=f;break}}catch{}const m=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new xl(o,e,s):(o=m[0],d&&await o._set(l,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new xl(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AN(e))return"Blackberry";if(RN(e))return"Webos";if(zN(e))return"Safari";if((e.includes("chrome/")||PN(e))&&!e.includes("edge/"))return"Chrome";if(IN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function SN(t=Sn()){return/firefox\//i.test(t)}function zN(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PN(t=Sn()){return/crios\//i.test(t)}function CN(t=Sn()){return/iemobile/i.test(t)}function IN(t=Sn()){return/android/i.test(t)}function AN(t=Sn()){return/blackberry/i.test(t)}function RN(t=Sn()){return/webos/i.test(t)}function nx(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CC(t=Sn()){var e;return nx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function IC(){return qz()&&document.documentMode===10}function LN(t=Sn()){return nx(t)||IN(t)||RN(t)||AN(t)||/windows phone/i.test(t)||CN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e=[]){let n;switch(t){case"Browser":n=lv(Sn());break;case"Worker":n=`${lv(Sn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=o=>new Promise((l,d)=>{try{const m=e(o);l(m)}catch(m){d(m)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e={}){return ar(t,"GET","/v2/passwordPolicy",Ni(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=6;class DC{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cv(this),this.idTokenSubscription=new cv(this),this.beforeStateQueue=new AC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_N,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=oi(n)),this._initializationPromise=this.queue(async()=>{var s,i,o;if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xh(this,{idToken:e}),s=await Xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(us(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,d=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===d)&&(m!=null&&m.user)&&(s=m.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await em(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(us(this.app))return Promise.reject(ui(this));const n=e?lt(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return us(this.app)?Promise.reject(ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return us(this.app)?Promise.reject(ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RC(this),n=new DC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await PC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&oi(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[oi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(d,this,"internal-error"),d.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,i);return()=>{l=!0,m()}}else{const m=e.addObserver(n);return()=>{l=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(us(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&hC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wo(t){return lt(t)}class cv{constructor(e){this.auth=e,this.observer=null,this.addObserver=eP(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OC(t){Fm=t}function MN(t){return Fm.loadJS(t)}function VC(){return Fm.recaptchaEnterpriseScript}function BC(){return Fm.gapiScript}function UC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class FC{constructor(){this.enterprise=new $C}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class $C{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const WC="recaptcha-enterprise",ON="NO_RECAPTCHA";class HC{constructor(e){this.type=WC,this.auth=wo(e)}async verify(e="verify",n=!1){async function s(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,d)=>{bC(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new _C(m);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(m=>{d(m)})})}function i(o,l,d){const m=window.grecaptcha;rv(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(ON)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FC().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{s(this.auth).then(d=>{if(!n&&rv(window.grecaptcha))i(d,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let m=VC();m.length!==0&&(m+=d),MN(m).then(()=>{i(d,o,l)}).catch(f=>{l(f)})}}).catch(d=>{l(d)})})}}async function uv(t,e,n,s=!1,i=!1){const o=new HC(t);let l;if(i)l=ON;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function bg(t,e,n,s,i){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await uv(t,e,n,n==="getOobCode");return s(t,l)}else return s(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await uv(t,e,n,n==="getOobCode");return s(t,d)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t,e){const n=Um(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(io(o,e??{}))return i;rr(i,"already-initialized")}return n.initialize({options:e})}function ZC(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(oi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function KC(t,e,n){const s=wo(t);Pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,o=VN(e),{host:l,port:d}=GC(e),m=d===null?"":`:${d}`,f={url:`${o}//${l}${m}/`},g=Object.freeze({host:l,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Pe(io(f,s.config.emulator)&&io(g,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=g,s.settings.appVerificationDisabledForTesting=!0,Na(l)?(Ky(`${o}//${l}${m}`),Gy("Auth",!0)):QC()}function VN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function GC(t){const e=VN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const o=i[1];return{host:o,port:dv(s.substr(o.length+1))}}else{const[o,l]=s.split(":");return{host:o,port:dv(l)}}}function dv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,n){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function YC(t,e){return ar(t,"POST","/v1/accounts:update",e)}async function JC(t,e){return ar(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(t,e){return Wu(t,"POST","/v1/accounts:signInWithPassword",Ni(t,e))}async function eI(t,e){return ar(t,"POST","/v1/accounts:sendOobCode",Ni(t,e))}async function tI(t,e){return eI(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(t,e){return Wu(t,"POST","/v1/accounts:signInWithEmailLink",Ni(t,e))}async function sI(t,e){return Wu(t,"POST","/v1/accounts:signInWithEmailLink",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends sx{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ju(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new ju(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bg(e,n,"signInWithPassword",XC);case"emailLink":return nI(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bg(e,s,"signUpPassword",JC);case"emailLink":return sI(e,{idToken:n,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e){return Wu(t,"POST","/v1/accounts:signInWithIdp",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="http://localhost";class lo extends sx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...o}=n;if(!s||!i)return null;const l=new lo(s,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return wl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,wl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wl(e,n)}buildRequest(){const e={requestUri:rI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aI(t){const e=Rc(Lc(t)).link,n=e?Rc(Lc(e)).deep_link_id:null,s=Rc(Lc(t)).deep_link_id;return(s?Rc(Lc(s)).link:null)||s||n||e||t}class rx{constructor(e){const n=Rc(Lc(e)),s=n.apiKey??null,i=n.oobCode??null,o=iI(n.mode??null);Pe(s&&i&&o,"argument-error"),this.apiKey=s,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=aI(e);try{return new rx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.providerId=ka.PROVIDER_ID}static credential(e,n){return ju._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=rx.parseLink(n);return Pe(s,"argument-error"),ju._fromEmailAndCode(e,s.code,s.tenantId)}}ka.PROVIDER_ID="password";ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends BN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Hu{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lo._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Fi.credential(n,s)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Hu{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com";$i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Hu{constructor(){super("twitter.com")}static credential(e,n){return lo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Wi.credential(n,s)}catch{return null}}}Wi.TWITTER_SIGN_IN_METHOD="twitter.com";Wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t,e){return Wu(t,"POST","/v1/accounts:signUp",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const o=await Xs._fromIdTokenResponse(e,s,i),l=hv(s);return new co({user:o,providerId:l,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=hv(s);return new co({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function hv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends Dr{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,tm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new tm(e,n,s,i)}}function UN(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tm._fromErrorAndOperation(t,o,e,s):o})}async function lI(t,e,n=!1){const s=await oo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return co._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e,n=!1){const{auth:s}=t;if(us(s.app))return Promise.reject(ui(s));const i="reauthenticate";try{const o=await oo(t,UN(s,i,e,t),n);Pe(o.idToken,s,"internal-error");const l=tx(o.idToken);Pe(l,s,"internal-error");const{sub:d}=l;return Pe(t.uid===d,s,"user-mismatch"),co._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&rr(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e,n=!1){if(us(t.app))return Promise.reject(ui(t));const s="signIn",i=await UN(t,s,e),o=await co._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(o.user),o}async function cI(t,e){return $N(wo(t),e)}async function WN(t,e){return FN(lt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t,e,n){var s;Pe(((s=n.url)==null?void 0:s.length)>0,t,"invalid-continue-uri"),Pe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Pe(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Pe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t){const e=wo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dI(t,e,n){if(us(t.app))return Promise.reject(ui(t));const s=wo(t),l=await bg(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oI).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&HN(t),m}),d=await co._fromIdTokenResponse(s,"signIn",l);return await s._updateCurrentUser(d.user),d}function jg(t,e,n){return us(t.app)?Promise.reject(ui(t)):cI(lt(t),ka.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&HN(t),s})}async function qN(t,e){const n=lt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&uI(n.auth,i,e);const{email:o}=await tI(n.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(t,e){return ar(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ng(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=lt(t),o={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await oo(s,hI(s.auth,o));s.displayName=l.displayName||null,s.photoURL=l.photoUrl||null;const d=s.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),await s._updateTokensIfNecessary(l)}function mI(t,e){return fI(lt(t),null,e)}async function fI(t,e,n){const{auth:s}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const l=await oo(t,YC(s,o));await t._updateTokensIfNecessary(l,!0)}function pI(t,e,n,s){return lt(t).onIdTokenChanged(e,n,s)}function gI(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function yI(t,e,n,s){return lt(t).onAuthStateChanged(e,n,s)}function xI(t){return lt(t).signOut()}async function wI(t){return lt(t).delete()}const nm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nm,"1"),this.storage.removeItem(nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=1e3,_I=10;class KN extends ZN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,d,m)=>{this.notifyListeners(l,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(s);!n&&this.localCache[s]===l||this.notifyListeners(s,l)},o=this.storage.getItem(s);IC()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_I):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},vI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KN.type="LOCAL";const bI=KN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN extends ZN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GN.type="SESSION";const QN=GN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new $m(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:o}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const d=Array.from(l).map(async f=>f(n.origin,o)),m=await jI(d);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$m.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((d,m)=>{const f=ix("",20);i.port1.start();const g=setTimeout(()=>{m(new Error("unsupported_event"))},s);l={messageChannel:i,onMessage(x){const w=x;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(w.data.response);break;default:clearTimeout(g),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function kI(t){kr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function TI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function SI(){return YN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firebaseLocalStorageDb",zI=1,sm="firebaseLocalStorage",XN="fbase_key";class qu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wm(t,e){return t.transaction([sm],e?"readwrite":"readonly").objectStore(sm)}function PI(){const t=indexedDB.deleteDatabase(JN);return new qu(t).toPromise()}function kg(){const t=indexedDB.open(JN,zI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(sm,{keyPath:XN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(sm)?e(s):(s.close(),await PI(),e(await kg()))})})}async function mv(t,e,n){const s=Wm(t,!0).put({[XN]:e,value:n});return new qu(s).toPromise()}async function CI(t,e){const n=Wm(t,!1).get(e),s=await new qu(n).toPromise();return s===void 0?null:s.value}function fv(t,e){const n=Wm(t,!0).delete(e);return new qu(n).toPromise()}const II=800,AI=3;class e1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>AI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$m._getInstance(SI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await TI(),!this.activeServiceWorker)return;this.sender=new NI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kg();return await mv(e,nm,"1"),await fv(e,nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>mv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>CI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Wm(i,!1).getAll();return new qu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),II)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e1.type="LOCAL";const RI=e1;new $u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e){return e?oi(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax extends sx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DI(t){return $N(t.auth,new ax(t),t.bypassAuthState)}function MI(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),FN(n,new ax(t),t.bypassAuthState)}async function OI(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),lI(n,new ax(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,s,i,o=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:o,error:l,type:d}=e;if(l){this.reject(l);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DI;case"linkViaPopup":case"linkViaRedirect":return OI;case"reauthViaPopup":case"reauthViaRedirect":return MI;default:rr(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new $u(2e3,1e4);class ul extends t1{constructor(e,n,s,i,o){super(e,n,i,o),this.provider=s,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=ix();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VI.get())};e()}}ul.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="pendingRedirect",gh=new Map;class UI extends t1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{const s=await FI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FI(t,e){const n=HI(e),s=WI(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function $I(t,e){gh.set(t._key(),e)}function WI(t){return oi(t._redirectPersistence)}function HI(t){return ph(BI,t.config.apiKey,t.name)}async function qI(t,e,n=!1){if(us(t.app))return Promise.reject(ui(t));const s=wo(t),i=LI(s,e),l=await new UI(s,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=10*60*1e3;class KI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!n1(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Nr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZI&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(e))}saveEventToCache(e){this.cachedEventUids.add(pv(e)),this.lastProcessedEventTime=Date.now()}}function pv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(t,e={}){return ar(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JI=/^https?/;async function XI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QI(t);for(const n of e)try{if(eA(n))return}catch{}rr(t,"unauthorized-domain")}function eA(t){const e=vg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===s}if(!JI.test(n))return!1;if(YI.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new $u(3e4,6e4);function gv(){const t=kr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nA(t){return new Promise((e,n)=>{var i,o,l;function s(){gv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gv(),n(Nr(t,"network-request-failed"))},timeout:tA.get()})}if((o=(i=kr().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=kr().gapi)!=null&&l.load)s();else{const d=UC("iframefcb");return kr()[d]=()=>{gapi.load?s():n(Nr(t,"network-request-failed"))},MN(`${BC()}?onload=${d}`).catch(m=>n(m))}}).catch(e=>{throw yh=null,e})}let yh=null;function sA(t){return yh=yh||nA(t),yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new $u(5e3,15e3),iA="__/auth/iframe",aA="emulator/auth/iframe",oA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cA(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ex(e,aA):`https://${t.config.authDomain}/${iA}`,s={apiKey:e.apiKey,appName:t.name,v:xo},i=lA.get(t.config.apiHost);i&&(s.eid=i);const o=t._getFrameworks();return o.length&&(s.fw=o.join(",")),`${n}?${Fu(s).slice(1)}`}async function uA(t){const e=await sA(t),n=kr().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:cA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oA,dontclear:!0},s=>new Promise(async(i,o)=>{await s.restyle({setHideOnLeave:!1});const l=Nr(t,"network-request-failed"),d=kr().setTimeout(()=>{o(l)},rA.get());function m(){kr().clearTimeout(d),i(s)}s.ping(m).then(m,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hA=500,mA=600,fA="_blank",pA="http://localhost";class yv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gA(t,e,n,s=hA,i=mA){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const m={...dA,width:s.toString(),height:i.toString(),top:o,left:l},f=Sn().toLowerCase();n&&(d=PN(f)?fA:n),SN(f)&&(e=e||pA,m.scrollbars="yes");const g=Object.entries(m).reduce((w,[E,S])=>`${w}${E}=${S},`,"");if(CC(f)&&d!=="_self")return yA(e||"",d),new yv(null);const x=window.open(e||"",d,g);Pe(x,t,"popup-blocked");try{x.focus()}catch{}return new yv(x)}function yA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="__/auth/handler",wA="emulator/auth/handler",vA=encodeURIComponent("fac");async function xv(t,e,n,s,i,o){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:xo,eventId:i};if(e instanceof BN){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Xz(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,x]of Object.entries({}))l[g]=x}if(e instanceof Hu){const g=e.getScopes().filter(x=>x!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const m=await t._getAppCheckToken(),f=m?`#${vA}=${encodeURIComponent(m)}`:"";return`${_A(t)}?${Fu(d).slice(1)}${f}`}function _A({config:t}){return t.emulator?ex(t,wA):`https://${t.authDomain}/${xA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="webStorageSupport";class bA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QN,this._completeRedirectFn=qI,this._overrideRedirectResult=$I}async _openPopup(e,n,s,i){var l;yi((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await xv(e,n,s,vg(),i);return gA(e,o,ix())}async _openRedirect(e,n,s,i){await this._originValidation(e);const o=await xv(e,n,s,vg(),i);return kI(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(yi(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await uA(e),s=new KI(e);return n.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ip,{type:ip},i=>{var l;const o=(l=i==null?void 0:i[0])==null?void 0:l[ip];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return LN()||zN()||nx()}}const jA=bA;var wv="@firebase/auth",vv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TA(t){ao(new ha("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=s.options;Pe(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DN(t)},f=new MC(s,i,o,m);return ZC(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ao(new ha("auth-internal",e=>{const n=wo(e.getProvider("auth").getImmediate());return(s=>new NA(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(wv,vv,kA(t)),jr(wv,vv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=5*60,SA=mN("authIdTokenMaxAge")||EA;let _v=null;const zA=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>SA)return;const i=n==null?void 0:n.token;_v!==i&&(_v=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function PA(t=Jy()){const e=Um(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qC(t,{popupRedirectResolver:jA,persistence:[RI,bI,QN]}),s=mN("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const l=zA(o.toString());gI(n,l,()=>l(n.currentUser)),pI(n,d=>l(d))}}const i=uN("auth");return i&&KC(n,`http://${i}`),n}function CA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}OC({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const o=Nr("internal-error");o.customData=i,n(o)},s.type="text/javascript",s.charset="UTF-8",CA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TA("Browser");var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var la,s1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function M(){}M.prototype=T.prototype,P.F=T.prototype,P.prototype=new M,P.prototype.constructor=P,P.D=function(R,B,$){for(var I=Array(arguments.length-2),he=2;he<arguments.length;he++)I[he-2]=arguments[he];return T.prototype[B].apply(R,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,T,M){M||(M=0);const R=Array(16);if(typeof T=="string")for(var B=0;B<16;++B)R[B]=T.charCodeAt(M++)|T.charCodeAt(M++)<<8|T.charCodeAt(M++)<<16|T.charCodeAt(M++)<<24;else for(B=0;B<16;++B)R[B]=T[M++]|T[M++]<<8|T[M++]<<16|T[M++]<<24;T=P.g[0],M=P.g[1],B=P.g[2];let $=P.g[3],I;I=T+($^M&(B^$))+R[0]+3614090360&4294967295,T=M+(I<<7&4294967295|I>>>25),I=$+(B^T&(M^B))+R[1]+3905402710&4294967295,$=T+(I<<12&4294967295|I>>>20),I=B+(M^$&(T^M))+R[2]+606105819&4294967295,B=$+(I<<17&4294967295|I>>>15),I=M+(T^B&($^T))+R[3]+3250441966&4294967295,M=B+(I<<22&4294967295|I>>>10),I=T+($^M&(B^$))+R[4]+4118548399&4294967295,T=M+(I<<7&4294967295|I>>>25),I=$+(B^T&(M^B))+R[5]+1200080426&4294967295,$=T+(I<<12&4294967295|I>>>20),I=B+(M^$&(T^M))+R[6]+2821735955&4294967295,B=$+(I<<17&4294967295|I>>>15),I=M+(T^B&($^T))+R[7]+4249261313&4294967295,M=B+(I<<22&4294967295|I>>>10),I=T+($^M&(B^$))+R[8]+1770035416&4294967295,T=M+(I<<7&4294967295|I>>>25),I=$+(B^T&(M^B))+R[9]+2336552879&4294967295,$=T+(I<<12&4294967295|I>>>20),I=B+(M^$&(T^M))+R[10]+4294925233&4294967295,B=$+(I<<17&4294967295|I>>>15),I=M+(T^B&($^T))+R[11]+2304563134&4294967295,M=B+(I<<22&4294967295|I>>>10),I=T+($^M&(B^$))+R[12]+1804603682&4294967295,T=M+(I<<7&4294967295|I>>>25),I=$+(B^T&(M^B))+R[13]+4254626195&4294967295,$=T+(I<<12&4294967295|I>>>20),I=B+(M^$&(T^M))+R[14]+2792965006&4294967295,B=$+(I<<17&4294967295|I>>>15),I=M+(T^B&($^T))+R[15]+1236535329&4294967295,M=B+(I<<22&4294967295|I>>>10),I=T+(B^$&(M^B))+R[1]+4129170786&4294967295,T=M+(I<<5&4294967295|I>>>27),I=$+(M^B&(T^M))+R[6]+3225465664&4294967295,$=T+(I<<9&4294967295|I>>>23),I=B+(T^M&($^T))+R[11]+643717713&4294967295,B=$+(I<<14&4294967295|I>>>18),I=M+($^T&(B^$))+R[0]+3921069994&4294967295,M=B+(I<<20&4294967295|I>>>12),I=T+(B^$&(M^B))+R[5]+3593408605&4294967295,T=M+(I<<5&4294967295|I>>>27),I=$+(M^B&(T^M))+R[10]+38016083&4294967295,$=T+(I<<9&4294967295|I>>>23),I=B+(T^M&($^T))+R[15]+3634488961&4294967295,B=$+(I<<14&4294967295|I>>>18),I=M+($^T&(B^$))+R[4]+3889429448&4294967295,M=B+(I<<20&4294967295|I>>>12),I=T+(B^$&(M^B))+R[9]+568446438&4294967295,T=M+(I<<5&4294967295|I>>>27),I=$+(M^B&(T^M))+R[14]+3275163606&4294967295,$=T+(I<<9&4294967295|I>>>23),I=B+(T^M&($^T))+R[3]+4107603335&4294967295,B=$+(I<<14&4294967295|I>>>18),I=M+($^T&(B^$))+R[8]+1163531501&4294967295,M=B+(I<<20&4294967295|I>>>12),I=T+(B^$&(M^B))+R[13]+2850285829&4294967295,T=M+(I<<5&4294967295|I>>>27),I=$+(M^B&(T^M))+R[2]+4243563512&4294967295,$=T+(I<<9&4294967295|I>>>23),I=B+(T^M&($^T))+R[7]+1735328473&4294967295,B=$+(I<<14&4294967295|I>>>18),I=M+($^T&(B^$))+R[12]+2368359562&4294967295,M=B+(I<<20&4294967295|I>>>12),I=T+(M^B^$)+R[5]+4294588738&4294967295,T=M+(I<<4&4294967295|I>>>28),I=$+(T^M^B)+R[8]+2272392833&4294967295,$=T+(I<<11&4294967295|I>>>21),I=B+($^T^M)+R[11]+1839030562&4294967295,B=$+(I<<16&4294967295|I>>>16),I=M+(B^$^T)+R[14]+4259657740&4294967295,M=B+(I<<23&4294967295|I>>>9),I=T+(M^B^$)+R[1]+2763975236&4294967295,T=M+(I<<4&4294967295|I>>>28),I=$+(T^M^B)+R[4]+1272893353&4294967295,$=T+(I<<11&4294967295|I>>>21),I=B+($^T^M)+R[7]+4139469664&4294967295,B=$+(I<<16&4294967295|I>>>16),I=M+(B^$^T)+R[10]+3200236656&4294967295,M=B+(I<<23&4294967295|I>>>9),I=T+(M^B^$)+R[13]+681279174&4294967295,T=M+(I<<4&4294967295|I>>>28),I=$+(T^M^B)+R[0]+3936430074&4294967295,$=T+(I<<11&4294967295|I>>>21),I=B+($^T^M)+R[3]+3572445317&4294967295,B=$+(I<<16&4294967295|I>>>16),I=M+(B^$^T)+R[6]+76029189&4294967295,M=B+(I<<23&4294967295|I>>>9),I=T+(M^B^$)+R[9]+3654602809&4294967295,T=M+(I<<4&4294967295|I>>>28),I=$+(T^M^B)+R[12]+3873151461&4294967295,$=T+(I<<11&4294967295|I>>>21),I=B+($^T^M)+R[15]+530742520&4294967295,B=$+(I<<16&4294967295|I>>>16),I=M+(B^$^T)+R[2]+3299628645&4294967295,M=B+(I<<23&4294967295|I>>>9),I=T+(B^(M|~$))+R[0]+4096336452&4294967295,T=M+(I<<6&4294967295|I>>>26),I=$+(M^(T|~B))+R[7]+1126891415&4294967295,$=T+(I<<10&4294967295|I>>>22),I=B+(T^($|~M))+R[14]+2878612391&4294967295,B=$+(I<<15&4294967295|I>>>17),I=M+($^(B|~T))+R[5]+4237533241&4294967295,M=B+(I<<21&4294967295|I>>>11),I=T+(B^(M|~$))+R[12]+1700485571&4294967295,T=M+(I<<6&4294967295|I>>>26),I=$+(M^(T|~B))+R[3]+2399980690&4294967295,$=T+(I<<10&4294967295|I>>>22),I=B+(T^($|~M))+R[10]+4293915773&4294967295,B=$+(I<<15&4294967295|I>>>17),I=M+($^(B|~T))+R[1]+2240044497&4294967295,M=B+(I<<21&4294967295|I>>>11),I=T+(B^(M|~$))+R[8]+1873313359&4294967295,T=M+(I<<6&4294967295|I>>>26),I=$+(M^(T|~B))+R[15]+4264355552&4294967295,$=T+(I<<10&4294967295|I>>>22),I=B+(T^($|~M))+R[6]+2734768916&4294967295,B=$+(I<<15&4294967295|I>>>17),I=M+($^(B|~T))+R[13]+1309151649&4294967295,M=B+(I<<21&4294967295|I>>>11),I=T+(B^(M|~$))+R[4]+4149444226&4294967295,T=M+(I<<6&4294967295|I>>>26),I=$+(M^(T|~B))+R[11]+3174756917&4294967295,$=T+(I<<10&4294967295|I>>>22),I=B+(T^($|~M))+R[2]+718787259&4294967295,B=$+(I<<15&4294967295|I>>>17),I=M+($^(B|~T))+R[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(B+(I<<21&4294967295|I>>>11))&4294967295,P.g[2]=P.g[2]+B&4294967295,P.g[3]=P.g[3]+$&4294967295}s.prototype.v=function(P,T){T===void 0&&(T=P.length);const M=T-this.blockSize,R=this.C;let B=this.h,$=0;for(;$<T;){if(B==0)for(;$<=M;)i(this,P,$),$+=this.blockSize;if(typeof P=="string"){for(;$<T;)if(R[B++]=P.charCodeAt($++),B==this.blockSize){i(this,R),B=0;break}}else for(;$<T;)if(R[B++]=P[$++],B==this.blockSize){i(this,R),B=0;break}}this.h=B,this.o+=T},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;T=this.o*8;for(var M=P.length-8;M<P.length;++M)P[M]=T&255,T/=256;for(this.v(P),P=Array(16),T=0,M=0;M<4;++M)for(let R=0;R<32;R+=8)P[T++]=this.g[M]>>>R&255;return P};function o(P,T){var M=d;return Object.prototype.hasOwnProperty.call(M,P)?M[P]:M[P]=T(P)}function l(P,T){this.h=T;const M=[];let R=!0;for(let B=P.length-1;B>=0;B--){const $=P[B]|0;R&&$==T||(M[B]=$,R=!1)}this.g=M}var d={};function m(P){return-128<=P&&P<128?o(P,function(T){return new l([T|0],T<0?-1:0)}):new l([P|0],P<0?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return x;if(P<0)return C(f(-P));const T=[];let M=1;for(let R=0;P>=M;R++)T[R]=P/M|0,M*=4294967296;return new l(T,0)}function g(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return C(g(P.substring(1),T));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(T,8));let R=x;for(let $=0;$<P.length;$+=8){var B=Math.min(8,P.length-$);const I=parseInt(P.substring($,$+B),T);B<8?(B=f(Math.pow(T,B)),R=R.j(B).add(f(I))):(R=R.j(M),R=R.add(f(I)))}return R}var x=m(0),w=m(1),E=m(16777216);t=l.prototype,t.m=function(){if(A(this))return-C(this).m();let P=0,T=1;for(let M=0;M<this.g.length;M++){const R=this.i(M);P+=(R>=0?R:4294967296+R)*T,T*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(A(this))return"-"+C(this).toString(P);const T=f(Math.pow(P,6));var M=this;let R="";for(;;){const B=U(M,T).g;M=b(M,B.j(T));let $=((M.g.length>0?M.g[0]:M.h)>>>0).toString(P);if(M=B,S(M))return $+R;for(;$.length<6;)$="0"+$;R=$+R}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(let T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function A(P){return P.h==-1}t.l=function(P){return P=b(this,P),A(P)?-1:S(P)?0:1};function C(P){const T=P.g.length,M=[];for(let R=0;R<T;R++)M[R]=~P.g[R];return new l(M,~P.h).add(w)}t.abs=function(){return A(this)?C(this):this},t.add=function(P){const T=Math.max(this.g.length,P.g.length),M=[];let R=0;for(let B=0;B<=T;B++){let $=R+(this.i(B)&65535)+(P.i(B)&65535),I=($>>>16)+(this.i(B)>>>16)+(P.i(B)>>>16);R=I>>>16,$&=65535,I&=65535,M[B]=I<<16|$}return new l(M,M[M.length-1]&-2147483648?-1:0)};function b(P,T){return P.add(C(T))}t.j=function(P){if(S(this)||S(P))return x;if(A(this))return A(P)?C(this).j(C(P)):C(C(this).j(P));if(A(P))return C(this.j(C(P)));if(this.l(E)<0&&P.l(E)<0)return f(this.m()*P.m());const T=this.g.length+P.g.length,M=[];for(var R=0;R<2*T;R++)M[R]=0;for(R=0;R<this.g.length;R++)for(let B=0;B<P.g.length;B++){const $=this.i(R)>>>16,I=this.i(R)&65535,he=P.i(B)>>>16,de=P.i(B)&65535;M[2*R+2*B]+=I*de,k(M,2*R+2*B),M[2*R+2*B+1]+=$*de,k(M,2*R+2*B+1),M[2*R+2*B+1]+=I*he,k(M,2*R+2*B+1),M[2*R+2*B+2]+=$*he,k(M,2*R+2*B+2)}for(P=0;P<T;P++)M[P]=M[2*P+1]<<16|M[2*P];for(P=T;P<2*T;P++)M[P]=0;return new l(M,0)};function k(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function j(P,T){this.g=P,this.h=T}function U(P,T){if(S(T))throw Error("division by zero");if(S(P))return new j(x,x);if(A(P))return T=U(C(P),T),new j(C(T.g),C(T.h));if(A(T))return T=U(P,C(T)),new j(C(T.g),T.h);if(P.g.length>30){if(A(P)||A(T))throw Error("slowDivide_ only works with positive integers.");for(var M=w,R=T;R.l(P)<=0;)M=D(M),R=D(R);var B=F(M,1),$=F(R,1);for(R=F(R,2),M=F(M,2);!S(R);){var I=$.add(R);I.l(P)<=0&&(B=B.add(M),$=I),R=F(R,1),M=F(M,1)}return T=b(P,B.j(T)),new j(B,T)}for(B=x;P.l(T)>=0;){for(M=Math.max(1,Math.floor(P.m()/T.m())),R=Math.ceil(Math.log(M)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),$=f(M),I=$.j(T);A(I)||I.l(P)>0;)M-=R,$=f(M),I=$.j(T);S($)&&($=w),B=B.add($),P=b(P,I)}return new j(B,P)}t.B=function(P){return U(this,P).h},t.and=function(P){const T=Math.max(this.g.length,P.g.length),M=[];for(let R=0;R<T;R++)M[R]=this.i(R)&P.i(R);return new l(M,this.h&P.h)},t.or=function(P){const T=Math.max(this.g.length,P.g.length),M=[];for(let R=0;R<T;R++)M[R]=this.i(R)|P.i(R);return new l(M,this.h|P.h)},t.xor=function(P){const T=Math.max(this.g.length,P.g.length),M=[];for(let R=0;R<T;R++)M[R]=this.i(R)^P.i(R);return new l(M,this.h^P.h)};function D(P){const T=P.g.length+1,M=[];for(let R=0;R<T;R++)M[R]=P.i(R)<<1|P.i(R-1)>>>31;return new l(M,P.h)}function F(P,T){const M=T>>5;T%=32;const R=P.g.length-M,B=[];for(let $=0;$<R;$++)B[$]=T>0?P.i($+M)>>>T|P.i($+M+1)<<32-T:P.i($+M);return new l(B,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,s1=s,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,la=l}).apply(typeof bv<"u"?bv:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r1,Dc,i1,xh,Tg,a1,o1,l1;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function i(u,y){if(y)e:{var _=s;u=u.split(".");for(var V=0;V<u.length-1;V++){var Z=u[V];if(!(Z in _))break e;_=_[Z]}u=u[u.length-1],V=_[u],y=y(V),y!=V&&y!=null&&e(_,u,{configurable:!0,writable:!0,value:y})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(y){var _=[],V;for(V in y)Object.prototype.hasOwnProperty.call(y,V)&&_.push([V,y[V]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function d(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function m(u,y,_){return u.call.apply(u.bind,arguments)}function f(u,y,_){return f=m,f.apply(null,arguments)}function g(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var V=_.slice();return V.push.apply(V,arguments),u.apply(this,V)}}function x(u,y){function _(){}_.prototype=y.prototype,u.Z=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(V,Z,G){for(var ue=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ue[Me-2]=arguments[Me];return y.prototype[Z].apply(V,ue)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function E(u){const y=u.length;if(y>0){const _=Array(y);for(let V=0;V<y;V++)_[V]=u[V];return _}return[]}function S(u,y){for(let V=1;V<arguments.length;V++){const Z=arguments[V];var _=typeof Z;if(_=_!="object"?_:Z?Array.isArray(Z)?"array":_:"null",_=="array"||_=="object"&&typeof Z.length=="number"){_=u.length||0;const G=Z.length||0;u.length=_+G;for(let ue=0;ue<G;ue++)u[_+ue]=Z[ue]}else u.push(Z)}}class A{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function C(u){l.setTimeout(()=>{throw u},0)}function b(){var u=P;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class k{constructor(){this.h=this.g=null}add(y,_){const V=j.get();V.set(y,_),this.h?this.h.next=V:this.g=V,this.h=V}}var j=new A(()=>new U,u=>u.reset());class U{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let D,F=!1,P=new k,T=()=>{const u=Promise.resolve(void 0);D=()=>{u.then(M)}};function M(){for(var u;u=b();){try{u.h.call(u.g)}catch(_){C(_)}var y=j;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}F=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,y),l.removeEventListener("test",_,y)}catch{}return u}();function I(u){return/^[\s\xa0]*$/.test(u)}function he(u,y){B.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}x(he,B),he.prototype.init=function(u,y){const _=this.type=u.type,V=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(_=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),we=0;function te(u,y,_,V,Z){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!V,this.ha=Z,this.key=++we,this.da=this.fa=!1}function W(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Q(u,y,_){for(const V in u)y.call(_,u[V],V,u)}function O(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function q(u){const y={};for(const _ in u)y[_]=u[_];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(u,y){let _,V;for(let Z=1;Z<arguments.length;Z++){V=arguments[Z];for(_ in V)u[_]=V[_];for(let G=0;G<ne.length;G++)_=ne[G],Object.prototype.hasOwnProperty.call(V,_)&&(u[_]=V[_])}}function se(u){this.src=u,this.g={},this.h=0}se.prototype.add=function(u,y,_,V,Z){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const ue=Se(u,y,V,Z);return ue>-1?(y=u[ue],_||(y.fa=!1)):(y=new te(y,this.src,G,!!V,Z),y.fa=_,u.push(y)),y};function le(u,y){const _=y.type;if(_ in u.g){var V=u.g[_],Z=Array.prototype.indexOf.call(V,y,void 0),G;(G=Z>=0)&&Array.prototype.splice.call(V,Z,1),G&&(W(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Se(u,y,_,V){for(let Z=0;Z<u.length;++Z){const G=u[Z];if(!G.da&&G.listener==y&&G.capture==!!_&&G.ha==V)return Z}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),Jt={};function ve(u,y,_,V,Z){if(Array.isArray(y)){for(let G=0;G<y.length;G++)ve(u,y[G],_,V,Z);return null}return _=Re(_),u&&u[de]?u.J(y,_,d(V)?!!V.capture:!1,Z):Ue(u,y,_,!1,V,Z)}function Ue(u,y,_,V,Z,G){if(!y)throw Error("Invalid event type");const ue=d(Z)?!!Z.capture:!!Z;let Me=xe(u);if(Me||(u[pt]=Me=new se(u)),_=Me.add(y,_,V,ue,G),_.proxy)return _;if(V=$e(),_.proxy=V,V.src=u,V.listener=_,u.addEventListener)$||(Z=ue),Z===void 0&&(Z=!1),u.addEventListener(y.toString(),V,Z);else if(u.attachEvent)u.attachEvent(gt(y.toString()),V);else if(u.addListener&&u.removeListener)u.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return _}function $e(){function u(_){return y.call(u.src,u.listener,_)}const y=J;return u}function et(u,y,_,V,Z){if(Array.isArray(y))for(var G=0;G<y.length;G++)et(u,y[G],_,V,Z);else V=d(V)?!!V.capture:!!V,_=Re(_),u&&u[de]?(u=u.i,G=String(y).toString(),G in u.g&&(y=u.g[G],_=Se(y,_,V,Z),_>-1&&(W(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete u.g[G],u.h--)))):u&&(u=xe(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Se(y,_,V,Z)),(_=u>-1?y[u]:null)&&je(_))}function je(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[de])le(y.i,u);else{var _=u.type,V=u.proxy;y.removeEventListener?y.removeEventListener(_,V,u.capture):y.detachEvent?y.detachEvent(gt(_),V):y.addListener&&y.removeListener&&y.removeListener(V),(_=xe(y))?(le(_,u),_.h==0&&(_.src=null,y[pt]=null)):W(u)}}}function gt(u){return u in Jt?Jt[u]:Jt[u]="on"+u}function J(u,y){if(u.da)u=!0;else{y=new he(y,this);const _=u.listener,V=u.ha||u.src;u.fa&&je(u),u=_.call(V,y)}return u}function xe(u){return u=u[pt],u instanceof se?u:null}var Ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function Re(u){return typeof u=="function"?u:(u[Ze]||(u[Ze]=function(y){return u.handleEvent(y)}),u[Ze])}function ke(){R.call(this),this.i=new se(this),this.M=this,this.G=null}x(ke,R),ke.prototype[de]=!0,ke.prototype.removeEventListener=function(u,y,_,V){et(this,u,y,_,V)};function Le(u,y){var _,V=u.G;if(V)for(_=[];V;V=V.G)_.push(V);if(u=u.M,V=y.type||y,typeof y=="string")y=new B(y,u);else if(y instanceof B)y.target=y.target||u;else{var Z=y;y=new B(V,u),Ee(y,Z)}Z=!0;let G,ue;if(_)for(ue=_.length-1;ue>=0;ue--)G=y.g=_[ue],Z=zn(G,V,!0,y)&&Z;if(G=y.g=u,Z=zn(G,V,!0,y)&&Z,Z=zn(G,V,!1,y)&&Z,_)for(ue=0;ue<_.length;ue++)G=y.g=_[ue],Z=zn(G,V,!1,y)&&Z}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const _=u.g[y];for(let V=0;V<_.length;V++)W(_[V]);delete u.g[y],u.h--}}this.G=null},ke.prototype.J=function(u,y,_,V){return this.i.add(String(u),y,!1,_,V)},ke.prototype.K=function(u,y,_,V){return this.i.add(String(u),y,!0,_,V)};function zn(u,y,_,V){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let Z=!0;for(let G=0;G<y.length;++G){const ue=y[G];if(ue&&!ue.da&&ue.capture==_){const Me=ue.listener,ot=ue.ha||ue.src;ue.fa&&le(u.i,ue),Z=Me.call(ot,V)!==!1&&Z}}return Z&&!V.defaultPrevented}function st(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:l.setTimeout(u,y||0)}function $n(u){u.g=st(()=>{u.g=null,u.i&&(u.i=!1,$n(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Vs extends R{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:$n(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(u){R.call(this),this.h=u,this.g={}}x(yn,R);var ws=[];function Mr(u){Q(u.g,function(y,_){this.g.hasOwnProperty(_)&&je(y)},u),u.g={}}yn.prototype.N=function(){yn.Z.N.call(this),Mr(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bs=l.JSON.stringify,Or=l.JSON.parse,Vr=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function or(){}function X(){}var Te={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _e(){B.call(this,"d")}x(_e,B);function Qe(){B.call(this,"c")}x(Qe,B);var Rt={},Lt=null;function is(){return Lt=Lt||new ke}Rt.Ia="serverreachability";function Us(u){B.call(this,Rt.Ia,u)}x(Us,B);function Pn(u){const y=is();Le(y,new Us(y))}Rt.STAT_EVENT="statevent";function Br(u,y){B.call(this,Rt.STAT_EVENT,u),this.stat=y}x(Br,B);function rt(u){const y=is();Le(y,new Br(y,u))}Rt.Ja="timingevent";function Cn(u,y){B.call(this,Rt.Ja,u),this.size=y}x(Cn,B);function vs(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},y)}function as(){this.g=!0}as.prototype.ua=function(){this.g=!1};function bo(u,y,_,V,Z,G){u.info(function(){if(u.g)if(G){var ue="",Me=G.split("&");for(let ut=0;ut<Me.length;ut++){var ot=Me[ut].split("=");if(ot.length>1){const Ut=ot[0];ot=ot[1];const ks=Ut.split("_");ue=ks.length>=2&&ks[1]=="type"?ue+(Ut+"="+ot+"&"):ue+(Ut+"=redacted&")}}}else ue=null;else ue=G;return"XMLHTTP REQ ("+V+") [attempt "+Z+"]: "+y+`
`+_+`
`+ue})}function Jl(u,y,_,V,Z,G,ue){u.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Z+"]: "+y+`
`+_+`
`+G+" "+ue})}function Ur(u,y,_,V){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Xl(u,_)+(V?" "+V:"")})}function za(u,y){u.info(function(){return"TIMEOUT: "+y})}as.prototype.info=function(){};function Xl(u,y){if(!u.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var _=G[u];if(!(_.length<2)){var V=_[1];if(Array.isArray(V)&&!(V.length<1)){var Z=V[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let ue=1;ue<V.length;ue++)V[ue]=""}}}}return Bs(G)}catch{return y}}var jo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},td={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nd;function Wn(){}x(Wn,or),Wn.prototype.g=function(){return new XMLHttpRequest},nd=new Wn;function be(u){return encodeURIComponent(String(u))}function sd(u){var y=1;u=u.split(":");const _=[];for(;y>0&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function Fs(u,y,_,V){this.j=u,this.i=y,this.l=_,this.S=V||1,this.V=new yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ec}function ec(){this.i=null,this.g="",this.h=!1}var tc={},Pa={};function No(u,y,_){u.M=1,u.A=wt(In(y)),u.u=_,u.R=!0,Fr(u,null)}function Fr(u,y){u.F=Date.now(),ko(u),u.B=In(u.A);var _=u.B,V=u.S;Array.isArray(V)||(V=[String(V)]),Po(_.i,"t",V),u.C=0,_=u.j.L,u.h=new ec,u.g=pc(u.j,_?y:null,!u.u),u.P>0&&(u.O=new Vs(f(u.Y,u,u.g),u.P)),y=u.V,_=u.g,V=u.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(ws[0]=Z.toString()),Z=ws);for(let G=0;G<Z.length;G++){const ue=ve(_,Z[G],V||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=u.J?q(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Pn(),bo(u.i,u.v,u.B,u.l,u.S,u.u)}Fs.prototype.ba=function(u){u=u.target;const y=this.O;y&&dr(u)==3?y.j():this.Y(u)},Fs.prototype.Y=function(u){try{if(u==this.g)e:{const Me=dr(this.g),ot=this.g.ya(),ut=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||lc(this.g)))){this.K||Me!=4||ot==7||(ot==8||ut<=0?Pn(3):Pn(2)),To(this);var y=this.g.ca();this.X=y;var _=rd(this);if(this.o=y==200,Jl(this.i,this.v,this.B,this.l,this.S,Me,y),this.o){if(this.U&&!this.L){t:{if(this.g){var V,Z=this.g;if((V=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(V)){var G=V;break t}}G=null}if(u=G)Ur(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nc(this,u);else{this.o=!1,this.m=3,rt(12),_s(this),Ca(this);break e}}if(this.R){u=!0;let Ut;for(;!this.K&&this.C<_.length;)if(Ut=xf(this,_),Ut==Pa){Me==4&&(this.m=4,rt(14),u=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==tc){this.m=4,rt(15),Ur(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Ur(this.i,this.l,Ut,null),nc(this,Ut);if(id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||_.length!=0||this.h.h||(this.m=1,rt(16),u=!1),this.o=this.o&&u,!u)Ur(this.i,this.l,_,"[Invalid Chunked Response]"),_s(this),Ca(this);else if(_.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),mc(ue),ue.P=!0,rt(11))}}else Ur(this.i,this.l,_,null),nc(this,_);Me==4&&_s(this),this.o&&!this.K&&(Me==4?ls(this.j,this):(this.o=!1,ko(this)))}else cc(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,rt(12)):(this.m=0,rt(13)),_s(this),Ca(this)}}}catch{}finally{}};function rd(u){if(!id(u))return u.g.la();const y=lc(u.g);if(y==="")return"";let _="";const V=y.length,Z=dr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return _s(u),Ca(u),"";u.h.i=new l.TextDecoder}for(let G=0;G<V;G++)u.h.h=!0,_+=u.h.i.decode(y[G],{stream:!(Z&&G==V-1)});return y.length=0,u.h.g+=_,u.C=0,u.h.g}function id(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function xf(u,y){var _=u.C,V=y.indexOf(`
`,_);return V==-1?Pa:(_=Number(y.substring(_,V)),isNaN(_)?tc:(V+=1,V+_>y.length?Pa:(y=y.slice(V,V+_),u.C=V+_,y)))}Fs.prototype.cancel=function(){this.K=!0,_s(this)};function ko(u){u.T=Date.now()+u.H,ad(u,u.H)}function ad(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=vs(f(u.aa,u),y)}function To(u){u.D&&(l.clearTimeout(u.D),u.D=null)}Fs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(za(this.i,this.B),this.M!=2&&(Pn(),rt(17)),_s(this),this.m=2,Ca(this)):ad(this,this.T-u)};function Ca(u){u.j.I==0||u.K||ls(u.j,u)}function _s(u){To(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Mr(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function nc(u,y){try{var _=u.j;if(_.I!=0&&(_.g==u||Ia(_.h,u))){if(!u.L&&Ia(_.h,u)&&_.I==3){try{var V=_.Ba.g.parse(y)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Z=V;if(Z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Lo(_),Ao(_);else break e;hc(_),rt(18)}}else _.xa=Z[1],0<_.xa-_.K&&Z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=vs(f(_.Va,_),6e3));cd(_.h)<=1&&_.ta&&(_.ta=void 0)}else mr(_,11)}else if((u.L||_.g==u)&&Lo(_),!I(y))for(Z=_.Ba.g.parse(y),y=0;y<Z.length;y++){let ut=Z[y];const Ut=ut[0];if(!(Ut<=_.K))if(_.K=Ut,ut=ut[1],_.I==2)if(ut[0]=="c"){_.M=ut[1],_.ba=ut[2];const ks=ut[3];ks!=null&&(_.ka=ks,_.j.info("VER="+_.ka));const Hs=ut[4];Hs!=null&&(_.za=Hs,_.j.info("SVER="+_.za));const Ts=ut[5];Ts!=null&&typeof Ts=="number"&&Ts>0&&(V=1.5*Ts,_.O=V,_.j.info("backChannelRequestTimeoutMs_="+V)),V=_;const fr=u.g;if(fr){const Oo=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var G=V.h;G.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&($r(G,G.h),G.h=null))}if(V.G){const Vo=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(V.wa=Vo,ge(V.J,V.G,Vo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),V=_;var ue=u;if(V.na=fc(V,V.L?V.ba:null,V.W),ue.L){sc(V.h,ue);var Me=ue,ot=V.O;ot&&(Me.H=ot),Me.D&&(To(Me),ko(Me)),V.g=ue}else dc(V);_.i.length>0&&hr(_)}else ut[0]!="stop"&&ut[0]!="close"||mr(_,7);else _.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?mr(_,7):We(_):ut[0]!="noop"&&_.l&&_.l.qa(ut),_.A=0)}}Pn(4)}catch{}}var wf=class{constructor(u,y){this.g=u,this.map=y}};function od(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ld(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function cd(u){return u.h?1:u.g?u.g.size:0}function Ia(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function $r(u,y){u.g?u.g.add(y):u.h=y}function sc(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}od.prototype.cancel=function(){if(this.i=rc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rc(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.G);return y}return E(u.i)}var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tt(u,y){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const V=u[_].indexOf("=");let Z,G=null;V>=0?(Z=u[_].substring(0,V),G=u[_].substring(V+1)):Z=u[_],y(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function at(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof at?(this.l=u.l,bs(this,u.j),this.o=u.o,this.g=u.g,js(this,u.u),this.h=u.h,Aa(this,Ra(u.i)),this.m=u.m):u&&(y=String(u).match(Si))?(this.l=!1,bs(this,y[1]||"",!0),this.o=Wr(y[2]||""),this.g=Wr(y[3]||"",!0),js(this,y[4]),this.h=Wr(y[5]||"",!0),Aa(this,y[6]||"",!0),this.m=Wr(y[7]||"")):(this.l=!1,this.i=new $s(null,this.l))}at.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(lr(y,ud,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(lr(y,ud,!0),"@"),u.push(be(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(lr(_,_.charAt(0)=="/"?Hr:Eo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",lr(_,qr)),u.join("")},at.prototype.resolve=function(u){const y=In(this);let _=!!u.j;_?bs(y,u.j):_=!!u.o,_?y.o=u.o:_=!!u.g,_?y.g=u.g:_=u.u!=null;var V=u.h;if(_)js(y,u.u);else if(_=!!u.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var Z=y.h.lastIndexOf("/");Z!=-1&&(V=y.h.slice(0,Z+1)+V)}if(Z=V,Z==".."||Z==".")V="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){V=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const G=[];for(let ue=0;ue<Z.length;){const Me=Z[ue++];Me=="."?V&&ue==Z.length&&G.push(""):Me==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),V&&ue==Z.length&&G.push("")):(G.push(Me),V=!0)}V=G.join("/")}else V=Z}return _?y.h=V:_=u.i.toString()!=="",_?Aa(y,Ra(u.i)):_=!!u.m,_&&(y.m=u.m),y};function In(u){return new at(u)}function bs(u,y,_){u.j=_?Wr(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function js(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function Aa(u,y,_){y instanceof $s?(u.i=y,ic(u.i,u.l)):(_||(y=lr(y,Dt)),u.i=new $s(y,u.l))}function ge(u,y,_){u.i.set(y,_)}function wt(u){return ge(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Wr(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function lr(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,Hn),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Hn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ud=/[#\/\?@]/g,Eo=/[#\?:]/g,Hr=/[#\?]/g,Dt=/[#\?@]/g,qr=/#/g;function $s(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function os(u){u.g||(u.g=new Map,u.h=0,u.i&&tt(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}t=$s.prototype,t.add=function(u,y){os(this),this.i=null,u=cr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function So(u,y){os(u),y=cr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function zi(u,y){return os(u),y=cr(u,y),u.g.has(y)}t.forEach=function(u,y){os(this),this.g.forEach(function(_,V){_.forEach(function(Z){u.call(y,Z,V,this)},this)},this)};function zo(u,y){os(u);let _=[];if(typeof y=="string")zi(u,y)&&(_=_.concat(u.g.get(cr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)_=_.concat(u[y]);return _}t.set=function(u,y){return os(this),this.i=null,u=cr(this,u),zi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},t.get=function(u,y){return u?(u=zo(this,u),u.length>0?String(u[0]):y):y};function Po(u,y,_){So(u,y),_.length>0&&(u.i=null,u.g.set(cr(u,y),E(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let V=0;V<y.length;V++){var _=y[V];const Z=be(_);_=zo(this,_);for(let G=0;G<_.length;G++){let ue=Z;_[G]!==""&&(ue+="="+be(_[G])),u.push(ue)}}return this.i=u.join("&")};function Ra(u){const y=new $s;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function cr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function ic(u,y){y&&!u.j&&(os(u),u.i=null,u.g.forEach(function(_,V){const Z=V.toLowerCase();V!=Z&&(So(this,V),Po(this,Z,_))},u)),u.j=y}function Co(u,y){const _=new as;if(l.Image){const V=new Image;V.onload=g(Ns,_,"TestLoadImage: loaded",!0,y,V),V.onerror=g(Ns,_,"TestLoadImage: error",!1,y,V),V.onabort=g(Ns,_,"TestLoadImage: abort",!1,y,V),V.ontimeout=g(Ns,_,"TestLoadImage: timeout",!1,y,V),l.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=u}else y(!1)}function dd(u,y){const _=new as,V=new AbortController,Z=setTimeout(()=>{V.abort(),Ns(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:V.signal}).then(G=>{clearTimeout(Z),G.ok?Ns(_,"TestPingServer: ok",!0,y):Ns(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Z),Ns(_,"TestPingServer: error",!1,y)})}function Ns(u,y,_,V,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),V(_)}catch{}}function vf(){this.g=new Vr}function De(u){this.i=u.Sb||null,this.h=u.ab||!1}x(De,or),De.prototype.g=function(){return new An(this.i,this.h)};function An(u,y){ke.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(An,ke),t=An.prototype,t.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,Zr(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||l).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mt(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function mt(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Pi(this):Zr(this),this.readyState==3&&mt(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Pi(this))},t.Na=function(u){this.g&&(this.response=u,Pi(this))},t.ga=function(){this.g&&Pi(this)};function Pi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Zr(u)}t.setRequestHeader=function(u,y){this.A.append(u,y)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function Zr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(An.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Io(u){let y="";return Q(u,function(_,V){y+=V,y+=":",y+=_,y+=`\r
`}),y}function La(u,y,_){e:{for(V in _){var V=!1;break e}V=!0}V||(_=Io(_),typeof u=="string"?_!=null&&be(_):ge(u,y,_))}function ct(u){ke.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(ct,ke);var ac=/^https?$/i,Da=["POST","PUT"];t=ct.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,y,_,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nd.g(),this.g.onreadystatechange=w(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(G){Ht(this,G);return}if(u=_||"",_=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Z in V)_.set(Z,V[Z]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const G of V.keys())_.set(G,V.get(G));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),Z=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(Da,y,void 0)>=0)||V||Z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ue]of _)this.g.setRequestHeader(G,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){Ht(this,G)}};function Ht(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,ur(u),Ma(u)}function ur(u){u.A||(u.A=!0,Le(u,"complete"),Le(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Le(this,"complete"),Le(this,"abort"),Ma(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),ct.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?oc(this):this.Xa())},t.Xa=function(){oc(this)};function oc(u){if(u.h&&typeof o<"u"){if(u.v&&dr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Le(u,"readystatechange"),dr(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var V;if(V=G===0){let ue=String(u.D).match(Si)[1]||null;!ue&&l.self&&l.self.location&&(ue=l.self.location.protocol.slice(0,-1)),V=!ac.test(ue?ue.toLowerCase():"")}_=V}if(_)Le(u,"complete"),Le(u,"success");else{u.o=6;try{var Z=dr(u)>2?u.g.statusText:""}catch{Z=""}u.l=Z+" ["+u.ca()+"]",ur(u)}}finally{Ma(u)}}}}function Ma(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,y||Le(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function dr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Or(y)}};function lc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cc(u){const y={};u=(u.g&&dr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<u.length;V++){if(I(u[V]))continue;var _=sd(u[V]);const Z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=y[Z]||[];y[Z]=G,G.push(_)}O(y,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function uc(u){this.za=0,this.i=[],this.j=new as,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oa("baseRetryDelayMs",5e3,u),this.Za=Oa("retryDelaySeedMs",1e4,u),this.Ta=Oa("forwardChannelMaxRetries",2,u),this.va=Oa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new od(u&&u.concurrentRequestLimit),this.Ba=new vf,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=uc.prototype,t.ka=8,t.I=1,t.connect=function(u,y,_,V){rt(0),this.W=u,this.H=y||{},_&&V!==void 0&&(this.H.OSID=_,this.H.OAID=V),this.F=this.X,this.J=fc(this,null,this.W),hr(this)};function We(u){if(qn(u),u.I==3){var y=u.V++,_=In(u.J);if(ge(_,"SID",u.M),ge(_,"RID",y),ge(_,"TYPE","terminate"),Kr(u,_),y=new Fs(u,u.j,y),y.M=2,y.A=wt(In(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=y.A,_=!0),_||(y.g=pc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ko(y)}Ws(u)}function Ao(u){u.g&&(mc(u),u.g.cancel(),u.g=null)}function qn(u){Ao(u),u.v&&(l.clearTimeout(u.v),u.v=null),Lo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function hr(u){if(!ld(u.h)&&!u.m){u.m=!0;var y=u.Ea;D||T(),F||(D(),F=!0),P.add(y,u),u.D=0}}function hd(u,y){return cd(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=vs(f(u.Ea,u,y),pd(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const Z=new Fs(this,this.j,u);let G=this.o;if(this.U&&(G?(G=q(G),Ee(G,this.U)):G=this.U),this.u!==null||this.R||(Z.J=G,G=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var V=this.i[_];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(y+=V,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=fd(this,Z,y),_=In(this.J),ge(_,"RID",u),ge(_,"CVER",22),this.G&&ge(_,"X-HTTP-Session-Id",this.G),Kr(this,_),G&&(this.R?y="headers="+be(Io(G))+"&"+y:this.u&&La(_,this.u,G)),$r(this.h,Z),this.Ra&&ge(_,"TYPE","init"),this.S?(ge(_,"$req",y),ge(_,"SID","null"),Z.U=!0,No(Z,_,null)):No(Z,_,y),this.I=2}}else this.I==3&&(u?md(this,u):this.i.length==0||ld(this.h)||md(this))};function md(u,y){var _;y?_=y.l:_=u.V++;const V=In(u.J);ge(V,"SID",u.M),ge(V,"RID",_),ge(V,"AID",u.K),Kr(u,V),u.u&&u.o&&La(V,u.u,u.o),_=new Fs(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),y&&(u.i=y.G.concat(u.i)),y=fd(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),$r(u.h,_),No(_,V,y)}function Kr(u,y){u.H&&Q(u.H,function(_,V){ge(y,V,_)}),u.l&&Q({},function(_,V){ge(y,V,_)})}function fd(u,y,_){_=Math.min(u.i.length,_);const V=u.l?f(u.l.Ka,u.l,u):null;e:{var Z=u.i;let Me=-1;for(;;){const ot=["count="+_];Me==-1?_>0?(Me=Z[0].g,ot.push("ofs="+Me)):Me=0:ot.push("ofs="+Me);let ut=!0;for(let Ut=0;Ut<_;Ut++){var G=Z[Ut].g;const ks=Z[Ut].map;if(G-=Me,G<0)Me=Math.max(0,Z[Ut].g-100),ut=!1;else try{G="req"+G+"_"||"";try{var ue=ks instanceof Map?ks:Object.entries(ks);for(const[Hs,Ts]of ue){let fr=Ts;d(Ts)&&(fr=Bs(Ts)),ot.push(G+Hs+"="+encodeURIComponent(fr))}}catch(Hs){throw ot.push(G+"type="+encodeURIComponent("_badmap")),Hs}}catch{V&&V(ks)}}if(ut){ue=ot.join("&");break e}}ue=void 0}return u=u.i.splice(0,_),y.G=u,ue}function dc(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;D||T(),F||(D(),F=!0),P.add(y,u),u.A=0}}function hc(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=vs(f(u.Da,u),pd(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Ro(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=vs(f(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rt(10),Ao(this),Ro(this))};function mc(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function Ro(u){u.g=new Fs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=In(u.na);ge(y,"RID","rpc"),ge(y,"SID",u.M),ge(y,"AID",u.K),ge(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&ge(y,"TO",u.ia),ge(y,"TYPE","xmlhttp"),Kr(u,y),u.u&&u.o&&La(y,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=wt(In(y)),_.u=null,_.R=!0,Fr(_,u)}t.Va=function(){this.C!=null&&(this.C=null,Ao(this),hc(this),rt(19))};function Lo(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function ls(u,y){var _=null;if(u.g==y){Lo(u),mc(u),u.g=null;var V=2}else if(Ia(u.h,y))_=y.G,sc(u.h,y),V=1;else return;if(u.I!=0){if(y.o)if(V==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var Z=u.D;V=is(),Le(V,new Cn(V,_)),hr(u)}else dc(u);else if(Z=y.m,Z==3||Z==0&&y.X>0||!(V==1&&hd(u,y)||V==2&&hc(u)))switch(_&&_.length>0&&(y=u.h,y.i=y.i.concat(_)),Z){case 1:mr(u,5);break;case 4:mr(u,10);break;case 3:mr(u,6);break;default:mr(u,2)}}}function pd(u,y){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*y}function mr(u,y){if(u.j.info("Error code "+y),y==2){var _=f(u.bb,u),V=u.Ua;const Z=!V;V=new at(V||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bs(V,"https"),wt(V),Z?Co(V.toString(),_):dd(V.toString(),_)}else rt(2);u.I=0,u.l&&u.l.pa(y),Ws(u),qn(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Ws(u){if(u.I=0,u.ja=[],u.l){const y=rc(u.h);(y.length!=0||u.i.length!=0)&&(S(u.ja,y),S(u.ja,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.oa()}}function fc(u,y,_){var V=_ instanceof at?In(_):new at(_);if(V.g!="")y&&(V.g=y+"."+V.g),js(V,V.u);else{var Z=l.location;V=Z.protocol,y=y?y+"."+Z.hostname:Z.hostname,Z=+Z.port;const G=new at(null);V&&bs(G,V),y&&(G.g=y),Z&&js(G,Z),_&&(G.h=_),V=G}return _=u.G,y=u.wa,_&&y&&ge(V,_,y),ge(V,"VER",u.ka),Kr(u,V),V}function pc(u,y,_){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new ct(new De({ab:_})):new ct(u.ma),y.Fa(u.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Do(){}t=Do.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mo(){}Mo.prototype.g=function(u,y){return new xn(u,y)};function xn(u,y){ke.call(this),this.g=new uc(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!I(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Ci(this)}x(xn,ke),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){We(this.g)},xn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Bs(u),u=_);y.i.push(new wf(y.Ya++,u)),y.I==3&&hr(y)},xn.prototype.N=function(){this.g.l=null,delete this.j,We(this.g),delete this.g,xn.Z.N.call(this)};function gc(u){_e.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const _ in y){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}x(gc,_e);function gd(){Qe.call(this),this.status=1}x(gd,Qe);function Ci(u){this.g=u}x(Ci,Do),Ci.prototype.ra=function(){Le(this.g,"a")},Ci.prototype.qa=function(u){Le(this.g,new gc(u))},Ci.prototype.pa=function(u){Le(this.g,new gd)},Ci.prototype.oa=function(){Le(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,l1=function(){return new Mo},o1=function(){return is()},a1=Rt,Tg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,xh=jo,td.COMPLETE="complete",i1=td,X.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",ke.prototype.listen=ke.prototype.J,Dc=X,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,r1=ct}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});const jv="@firebase/firestore",Nv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new Qy("@firebase/firestore");function Ko(){return uo.logLevel}function pe(t,...e){if(uo.logLevel<=Ye.DEBUG){const n=e.map(ox);uo.debug(`Firestore (${ql}): ${t}`,...n)}}function xi(t,...e){if(uo.logLevel<=Ye.ERROR){const n=e.map(ox);uo.error(`Firestore (${ql}): ${t}`,...n)}}function Cl(t,...e){if(uo.logLevel<=Ye.WARN){const n=e.map(ox);uo.warn(`Firestore (${ql}): ${t}`,...n)}}function ox(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,c1(t,s,n)}function c1(t,e,n){let s=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw xi(s),new Error(s)}function ht(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||c1(e,i,s)}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bn.UNAUTHENTICATED))}shutdown(){}}class AA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RA{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ht(this.o===void 0,42304);let s=this.i;const i=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let o=new di;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new di,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await i(this.currentUser)})},d=m=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new di)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ht(typeof s.accessToken=="string",31837,{l:s}),new u1(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class LA{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DA{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new LA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,us(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ht(this.o===void 0,3512);const s=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>s(o))};const i=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=OA(40);for(let o=0;o<i.length;++o)s.length<20&&i[o]<n&&(s+=e.charAt(i[o]%62))}return s}}function Je(t,e){return t<e?-1:t>e?1:0}function Eg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),o=e.charAt(s);if(i!==o)return ap(i)===ap(o)?Je(i,o):ap(i)?1:-1}return Je(t.length,e.length)}const VA=55296,BA=57343;function ap(t){const e=t.charCodeAt(0);return e>=VA&&e<=BA}function Il(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="__name__";class xr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const o=xr.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Je(e.length,n.length)}static compareSegments(e,n){const s=xr.isNumericId(e),i=xr.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?xr.extractNumericId(e).compare(xr.extractNumericId(n)):Eg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return la.fromString(e.substring(4,e.length-2))}}class vt extends xr{construct(e,n,s){return new vt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const UA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends xr{construct(e,n,s){return new mn(e,n,s)}static isValidIdentifier(e){return UA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tv}static keyField(){return new mn([Tv])}static fromServerFormat(e){const n=[];let s="",i=0;const o=()=>{if(s.length===0)throw new me(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new me(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new me(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(s+=d,i++):(o(),i++)}if(o(),l)throw new me(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.path=e}static fromPath(e){return new ze(vt.fromString(e))}static fromName(e){return new ze(vt.fromString(e).popFirst(5))}static empty(){return new ze(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e,n){if(!n)throw new me(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FA(t,e,n,s){if(e===!0&&s===!0)throw new me(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ev(t){if(!ze.isDocumentKey(t))throw new me(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sv(t){if(ze.isDocumentKey(t))throw new me(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function h1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Hm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae(12329,{type:typeof t})}function ts(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hm(t);throw new me(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $A(t,e){if(e<=0)throw new me(ee.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zu(t,e){if(!h1(t))throw new me(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const l=t[s];if(i&&typeof l!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${s}' field to equal '${o.value}'`;break}}if(n)throw new me(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=-62135596800,Pv=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Pv);return new jt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zv)throw new me(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pv}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zu(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:Qt("string",jt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new jt(0,0))}static max(){return new Oe(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=-1;function WA(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Oe.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new ma(i,ze.empty(),e)}function HA(t){return new ma(t.readTime,t.key,Nu)}class ma{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ma(Oe.min(),ze.empty(),Nu)}static max(){return new ma(Oe.max(),ze.empty(),Nu)}}function qA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ze.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==ZA)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((s,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,s)=>{n(e)})}static reject(e){return new re((n,s)=>{s(e)})}static waitFor(e){return new re((n,s)=>{let i=0,o=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++o,l&&o===i&&n()},m=>s(m))}),l=!0,o===i&&n()})}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next(i=>i?re.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,o)=>{s.push(n.call(this,i,o))}),this.waitFor(s)}static mapArray(e,n){return new re((s,i)=>{const o=e.length,l=new Array(o);let d=0;for(let m=0;m<o;m++){const f=m;n(e[f]).next(g=>{l[f]=g,++d,d===o&&s(l)},g=>i(g))}})}static doWhile(e,n){return new re((s,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):s()};o()})}}function GA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=-1;function Zm(t){return t==null}function rm(t){return t===0&&1/t==-1/0}function QA(t){return typeof t=="number"&&Number.isInteger(t)&&!rm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="";function YA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Cv(e)),e=JA(t.get(n),e);return Cv(e)}function JA(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case m1:n+="";break;default:n+=o}}return n}function Cv(t){return t+m1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function f1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||un.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zd(this.root,e,this.comparator,!0)}}class Zd{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?s(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,n,s,i,o){this.key=e,this.value=n,this.color=s??un.RED,this.left=i??un.EMPTY,this.right=o??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,o){return new un(e??this.key,n??this.value,s??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const o=s(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,s),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return un.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,i,o){return this}insert(e,n,s){return new un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Av(this.data.getIterator())}getIteratorFrom(e){return new Av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=s.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nn(this.comparator);return n.data=e,n}}class Av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new hs([])}unionWith(e){let n=new nn(mn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new hs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new p1("Invalid base64 string: "+o):o}}(e);return new gn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const XA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(t){if(ht(!!t,39018),typeof t=="string"){let e=0;const n=XA.exec(t);if(ht(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ft(t.seconds),nanos:Ft(t.nanos)}}function Ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pa(t){return typeof t=="string"?gn.fromBase64String(t):gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="server_timestamp",y1="__type__",x1="__previous_value__",w1="__local_write_time__";function ux(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[y1])==null?void 0:s.stringValue)===g1}function Km(t){const e=t.mapValue.fields[x1];return ux(e)?Km(e):e}function ku(t){const e=fa(t.mapValue.fields[w1].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,s,i,o,l,d,m,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=f,this.isUsingEmulator=g}}const im="(default)";class Tu{constructor(e,n){this.projectId=e,this.database=n||im}static empty(){return new Tu("","")}get isDefaultDatabase(){return this.database===im}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="__type__",t4="__max__",Kd={mapValue:{}},_1="__vector__",am="value";function ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ux(t)?4:s4(t)?9007199254740991:n4(t)?10:11:Ae(28295,{value:t})}function Ar(t,e){if(t===e)return!0;const n=ga(t);if(n!==ga(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ku(t).isEqual(ku(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=fa(i.timestampValue),d=fa(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return pa(i.bytesValue).isEqual(pa(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ft(i.geoPointValue.latitude)===Ft(o.geoPointValue.latitude)&&Ft(i.geoPointValue.longitude)===Ft(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ft(i.integerValue)===Ft(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Ft(i.doubleValue),d=Ft(o.doubleValue);return l===d?rm(l)===rm(d):isNaN(l)&&isNaN(d)}return!1}(t,e);case 9:return Il(t.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},d=o.mapValue.fields||{};if(Iv(l)!==Iv(d))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(d[m]===void 0||!Ar(l[m],d[m])))return!1;return!0}(t,e);default:return Ae(52216,{left:t})}}function Eu(t,e){return(t.values||[]).find(n=>Ar(n,e))!==void 0}function Al(t,e){if(t===e)return 0;const n=ga(t),s=ga(e);if(n!==s)return Je(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return function(o,l){const d=Ft(o.integerValue||o.doubleValue),m=Ft(l.integerValue||l.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(t,e);case 3:return Rv(t.timestampValue,e.timestampValue);case 4:return Rv(ku(t),ku(e));case 5:return Eg(t.stringValue,e.stringValue);case 6:return function(o,l){const d=pa(o),m=pa(l);return d.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),m=l.split("/");for(let f=0;f<d.length&&f<m.length;f++){const g=Je(d[f],m[f]);if(g!==0)return g}return Je(d.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const d=Je(Ft(o.latitude),Ft(l.latitude));return d!==0?d:Je(Ft(o.longitude),Ft(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var w,E,S,A;const d=o.fields||{},m=l.fields||{},f=(w=d[am])==null?void 0:w.arrayValue,g=(E=m[am])==null?void 0:E.arrayValue,x=Je(((S=f==null?void 0:f.values)==null?void 0:S.length)||0,((A=g==null?void 0:g.values)==null?void 0:A.length)||0);return x!==0?x:Lv(f,g)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Kd.mapValue&&l===Kd.mapValue)return 0;if(o===Kd.mapValue)return 1;if(l===Kd.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),f=l.fields||{},g=Object.keys(f);m.sort(),g.sort();for(let x=0;x<m.length&&x<g.length;++x){const w=Eg(m[x],g[x]);if(w!==0)return w;const E=Al(d[m[x]],f[g[x]]);if(E!==0)return E}return Je(m.length,g.length)}(t.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function Rv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=fa(t),s=fa(e),i=Je(n.seconds,s.seconds);return i!==0?i:Je(n.nanos,s.nanos)}function Lv(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const o=Al(n[i],s[i]);if(o)return o}return Je(n.length,s.length)}function Rl(t){return Sg(t)}function Sg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=fa(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return pa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ze.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const o of n.values||[])i?i=!1:s+=",",s+=Sg(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of s)o?o=!1:i+=",",i+=`${l}:${Sg(n.fields[l])}`;return i+"}"}(t.mapValue):Ae(61005,{value:t})}function wh(t){switch(ga(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Km(t);return e?16+wh(e):16;case 5:return 2*t.stringValue.length;case 6:return pa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,o)=>i+wh(o),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return Ta(s.fields,(o,l)=>{i+=o.length+wh(l)}),i}(t.mapValue);default:throw Ae(13486,{value:t})}}function Dv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zg(t){return!!t&&"integerValue"in t}function dx(t){return!!t&&"arrayValue"in t}function Mv(t){return!!t&&"nullValue"in t}function Ov(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vh(t){return!!t&&"mapValue"in t}function n4(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[v1])==null?void 0:s.stringValue)===_1}function Yc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ta(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Yc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yc(t.arrayValue.values[n]);return e}return{...t}}function s4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===t4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(n)}setAll(e){let n=mn.emptyPath(),s={},i=[];e.forEach((l,d)=>{if(!n.isImmediateParentOf(d)){const m=this.getFieldsMap(n);this.applyChanges(m,s,i),s={},i=[],n=d.popLast()}l?s[d.lastSegment()]=Yc(l):i.push(d.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,s,i)}delete(e){const n=this.field(e.popLast());vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];vh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){Ta(n,(i,o)=>e[i]=o);for(const i of s)delete e[i]}clone(){return new Qn(Yc(this.value))}}function b1(t){const e=[];return Ta(t.fields,(n,s)=>{const i=new mn([n]);if(vh(s)){const o=b1(s.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new hs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n,s,i,o,l,d){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Nn(e,0,Oe.min(),Oe.min(),Oe.min(),Qn.empty(),0)}static newFoundDocument(e,n,s,i){return new Nn(e,1,n,Oe.min(),s,i,0)}static newNoDocument(e,n){return new Nn(e,2,n,Oe.min(),Oe.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new Nn(e,3,n,Oe.min(),Oe.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.position=e,this.inclusive=n}}function Vv(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(o.field.isKeyField()?s=ze.comparator(ze.fromName(l.referenceValue),n.key):s=Al(l,n.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function Bv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n="asc"){this.field=e,this.dir=n}}function r4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j1=class{};class Gt extends j1{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new a4(e,n,s):n==="array-contains"?new c4(e,s):n==="in"?new u4(e,s):n==="not-in"?new d4(e,s):n==="array-contains-any"?new h4(e,s):new Gt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new o4(e,s):new l4(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Al(n,this.value)):n!==null&&ga(this.value)===ga(n)&&this.matchesComparison(Al(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends j1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ir(e,n)}matches(e){return N1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function N1(t){return t.op==="and"}function k1(t){return i4(t)&&N1(t)}function i4(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function Pg(t){if(t instanceof Gt)return t.field.canonicalString()+t.op.toString()+Rl(t.value);if(k1(t))return t.filters.map(e=>Pg(e)).join(",");{const e=t.filters.map(n=>Pg(n)).join(",");return`${t.op}(${e})`}}function T1(t,e){return t instanceof Gt?function(s,i){return i instanceof Gt&&s.op===i.op&&s.field.isEqual(i.field)&&Ar(s.value,i.value)}(t,e):t instanceof ir?function(s,i){return i instanceof ir&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((o,l,d)=>o&&T1(l,i.filters[d]),!0):!1}(t,e):void Ae(19439)}function E1(t){return t instanceof Gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Rl(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(E1).join(" ,")+"}"}(t):"Filter"}class a4 extends Gt{constructor(e,n,s){super(e,n,s),this.key=ze.fromName(s.referenceValue)}matches(e){const n=ze.comparator(e.key,this.key);return this.matchesComparison(n)}}class o4 extends Gt{constructor(e,n){super(e,"in",n),this.keys=S1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class l4 extends Gt{constructor(e,n){super(e,"not-in",n),this.keys=S1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function S1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>ze.fromName(s.referenceValue))}class c4 extends Gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dx(n)&&Eu(n.arrayValue,this.value)}}class u4 extends Gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Eu(this.value.arrayValue,n)}}class d4 extends Gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Eu(this.value.arrayValue,n)}}class h4 extends Gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Eu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n=null,s=[],i=[],o=null,l=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=o,this.startAt=l,this.endAt=d,this.Te=null}}function Uv(t,e=null,n=[],s=[],i=null,o=null,l=null){return new m4(t,e,n,s,i,o,l)}function hx(t){const e=Be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Pg(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(o){return o.field.canonicalString()+o.dir}(s)).join(","),Zm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Rl(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Rl(s)).join(",")),e.Te=n}return e.Te}function mx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!T1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bv(t.startAt,e.startAt)&&Bv(t.endAt,e.endAt)}function Cg(t){return ze.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n=null,s=[],i=[],o=null,l="F",d=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=o,this.limitType=l,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function f4(t,e,n,s,i,o,l,d){return new Gl(t,e,n,s,i,o,l,d)}function Gm(t){return new Gl(t)}function Fv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function z1(t){return t.collectionGroup!==null}function Jc(t){const e=Be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new nn(mn.comparator);return l.filters.forEach(m=>{m.getFlattenedFilters().forEach(f=>{f.isInequality()&&(d=d.add(f.field))})}),d})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Su(o,s))}),n.has(mn.keyField().canonicalString())||e.Ie.push(new Su(mn.keyField(),s))}return e.Ie}function Tr(t){const e=Be(t);return e.Ee||(e.Ee=p4(e,Jc(t))),e.Ee}function p4(t,e){if(t.limitType==="F")return Uv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Su(i.field,o)});const n=t.endAt?new om(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new om(t.startAt.position,t.startAt.inclusive):null;return Uv(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Ig(t,e){const n=t.filters.concat([e]);return new Gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lm(t,e,n){return new Gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qm(t,e){return mx(Tr(t),Tr(e))&&t.limitType===e.limitType}function P1(t){return`${hx(Tr(t))}|lt:${t.limitType}`}function Go(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>E1(i)).join(", ")}]`),Zm(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Rl(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Rl(i)).join(",")),`Target(${s})`}(Tr(t))}; limitType=${t.limitType})`}function Ym(t,e){return e.isFoundDocument()&&function(s,i){const o=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):ze.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)}(t,e)&&function(s,i){for(const o of Jc(s))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const o of s.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(l,d,m){const f=Vv(l,d,m);return l.inclusive?f<=0:f<0}(s.startAt,Jc(s),i)||s.endAt&&!function(l,d,m){const f=Vv(l,d,m);return l.inclusive?f>=0:f>0}(s.endAt,Jc(s),i))}(t,e)}function g4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function C1(t){return(e,n)=>{let s=!1;for(const i of Jc(t)){const o=y4(i,e,n);if(o!==0)return o;s=s||i.field.isKeyField()}return 0}}function y4(t,e,n){const s=t.field.isKeyField()?ze.comparator(e.key,n.key):function(o,l,d){const m=l.data.field(o),f=d.data.field(o);return m!==null&&f!==null?Al(m,f):Ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,o]of s)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(n,s)=>{for(const[i,o]of s)e(i,o)})}isEmpty(){return f1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=new At(ze.comparator);function wi(){return x4}const I1=new At(ze.comparator);function Mc(...t){let e=I1;for(const n of t)e=e.insert(n.key,n);return e}function A1(t){let e=I1;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ha(){return Xc()}function R1(){return Xc()}function Xc(){return new vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const w4=new At(ze.comparator),v4=new nn(ze.comparator);function Xe(...t){let e=v4;for(const n of t)e=e.add(n);return e}const _4=new nn(Je);function b4(){return _4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(e)?"-0":e}}function L1(t){return{integerValue:""+t}}function j4(t,e){return QA(e)?L1(e):fx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this._=void 0}}function N4(t,e,n){return t instanceof zu?function(i,o){const l={fields:{[y1]:{stringValue:g1},[w1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ux(o)&&(o=Km(o)),o&&(l.fields[x1]=o),{mapValue:l}}(n,e):t instanceof Pu?M1(t,e):t instanceof Cu?O1(t,e):function(i,o){const l=D1(i,o),d=$v(l)+$v(i.Ae);return zg(l)&&zg(i.Ae)?L1(d):fx(i.serializer,d)}(t,e)}function k4(t,e,n){return t instanceof Pu?M1(t,e):t instanceof Cu?O1(t,e):n}function D1(t,e){return t instanceof cm?function(s){return zg(s)||function(o){return!!o&&"doubleValue"in o}(s)}(e)?e:{integerValue:0}:null}class zu extends Jm{}class Pu extends Jm{constructor(e){super(),this.elements=e}}function M1(t,e){const n=V1(e);for(const s of t.elements)n.some(i=>Ar(i,s))||n.push(s);return{arrayValue:{values:n}}}class Cu extends Jm{constructor(e){super(),this.elements=e}}function O1(t,e){let n=V1(e);for(const s of t.elements)n=n.filter(i=>!Ar(i,s));return{arrayValue:{values:n}}}class cm extends Jm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $v(t){return Ft(t.integerValue||t.doubleValue)}function V1(t){return dx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n){this.field=e,this.transform=n}}function E4(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof Pu&&i instanceof Pu||s instanceof Cu&&i instanceof Cu?Il(s.elements,i.elements,Ar):s instanceof cm&&i instanceof cm?Ar(s.Ae,i.Ae):s instanceof zu&&i instanceof zu}(t.transform,e.transform)}class S4{constructor(e,n){this.version=e,this.transformResults=n}}class ns{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ns}static exists(e){return new ns(void 0,e)}static updateTime(e){return new ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xm{}function B1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ef(t.key,ns.none()):new Ku(t.key,t.data,ns.none());{const n=t.data,s=Qn.empty();let i=new nn(mn.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?s.delete(o):s.set(o,l),i=i.add(o)}return new Ea(t.key,s,new hs(i.toArray()),ns.none())}}function z4(t,e,n){t instanceof Ku?function(i,o,l){const d=i.value.clone(),m=Hv(i.fieldTransforms,o,l.transformResults);d.setAll(m),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):t instanceof Ea?function(i,o,l){if(!_h(i.precondition,o))return void o.convertToUnknownDocument(l.version);const d=Hv(i.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(U1(i)),m.setAll(d),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(t,e,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function eu(t,e,n,s){return t instanceof Ku?function(o,l,d,m){if(!_h(o.precondition,l))return d;const f=o.value.clone(),g=qv(o.fieldTransforms,m,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ea?function(o,l,d,m){if(!_h(o.precondition,l))return d;const f=qv(o.fieldTransforms,m,l),g=l.data;return g.setAll(U1(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(x=>x.field))}(t,e,n,s):function(o,l,d){return _h(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d}(t,e,n)}function P4(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),o=D1(s.transform,i||null);o!=null&&(n===null&&(n=Qn.empty()),n.set(s.field,o))}return n||null}function Wv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Il(s,i,(o,l)=>E4(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ku extends Xm{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ea extends Xm{constructor(e,n,s,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function U1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Hv(t,e,n){const s=new Map;ht(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,d=e.data.field(o.field);s.set(o.field,k4(l,d,n[i]))}return s}function qv(t,e,n){const s=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);s.set(i.field,N4(o,l,e))}return s}class ef extends Xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C4 extends Xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&z4(o,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=eu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=eu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=R1();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let d=this.applyToLocalView(l,o.mutatedFields);d=n.has(i.key)?null:d;const m=B1(l,d);m!==null&&s.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Oe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,(n,s)=>Wv(n,s))&&Il(this.baseMutations,e.baseMutations,(n,s)=>Wv(n,s))}}class px{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){ht(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return w4}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,s[l].version);return new px(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,nt;function L4(t){switch(t){case ee.OK:return Ae(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ae(15467,{code:t})}}function F1(t){if(t===void 0)return xi("GRPC error has no .code"),ee.UNKNOWN;switch(t){case Zt.OK:return ee.OK;case Zt.CANCELLED:return ee.CANCELLED;case Zt.UNKNOWN:return ee.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return ee.INTERNAL;case Zt.UNAVAILABLE:return ee.UNAVAILABLE;case Zt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Zt.NOT_FOUND:return ee.NOT_FOUND;case Zt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Zt.ABORTED:return ee.ABORTED;case Zt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Zt.DATA_LOSS:return ee.DATA_LOSS;default:return Ae(39323,{code:t})}}(nt=Zt||(Zt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new la([4294967295,4294967295],0);function Zv(t){const e=D4().encode(t),n=new s1;return n.update(e),new Uint8Array(n.digest())}function Kv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new la([n,s],0),new la([i,o],0)]}class gx{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Oc(`Invalid padding: ${n}`);if(s<0)throw new Oc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=la.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(la.fromNumber(s)));return i.compare(M4)===1&&(i=new la([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Zv(e),[s,i]=Kv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(s,i,o);if(!this.we(l))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new gx(o,i,n);return s.forEach(d=>l.insert(d)),l}insert(e){if(this.ge===0)return;const n=Zv(e),[s,i]=Kv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(s,i,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,s,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new tf(Oe.min(),i,new At(Je),wi(),Xe())}}class Gu{constructor(e,n,s,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Gu(s,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,s,i){this.be=e,this.removedTargetIds=n,this.key=s,this.De=i}}class $1{constructor(e,n){this.targetId=e,this.Ce=n}}class W1{constructor(e,n,s=gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Gv{constructor(){this.ve=0,this.Fe=Qv(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),n=Xe(),s=Xe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:Ae(38017,{changeType:o})}}),new Gu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Qv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O4{constructor(e){this.Ge=e,this.ze=new Map,this.je=wi(),this.Je=Gd(),this.He=Gd(),this.Ye=new At(Je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Cg(o))if(s===0){const l=new ze(o.path);this.et(n,l,Nn.newNoDocument(l,Oe.min()))}else ht(s===1,20013,{expectedCount:s});else{const l=this._t(n);if(l!==s){const d=this.ut(e),m=d?this.ct(d,e,l):1;if(m!==0){this.it(n);const f=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=n;let l,d;try{l=pa(s).toUint8Array()}catch(m){if(m instanceof p1)return Cl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new gx(l,i,o)}catch(m){return Cl(m instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach(o=>{const l=this.Ge.ht(),d=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const d=this.ot(l);if(d){if(o.current&&Cg(d.target)){const m=new ze(d.target.path);this.It(m).has(l)||this.Et(l,m)||this.et(l,m,Nn.newNoDocument(m,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let s=Xe();this.He.forEach((o,l)=>{let d=!0;l.forEachWhile(m=>{const f=this.ot(m);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new tf(e,n,this.Ye,this.je,s);return this.je=wi(),this.Je=Gd(),this.He=Gd(),this.Ye=new At(Je),i}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Gv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nn(Je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nn(Je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gd(){return new At(ze.comparator)}function Qv(){return new At(ze.comparator)}const V4={asc:"ASCENDING",desc:"DESCENDING"},B4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U4={and:"AND",or:"OR"};class F4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ag(t,e){return t.useProto3Json||Zm(e)?e:{value:e}}function um(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $4(t,e){return um(t,e.toTimestamp())}function Er(t){return ht(!!t,49232),Oe.fromTimestamp(function(n){const s=fa(n);return new jt(s.seconds,s.nanos)}(t))}function yx(t,e){return Rg(t,e).canonicalString()}function Rg(t,e){const n=function(i){return new vt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function q1(t){const e=vt.fromString(t);return ht(Y1(e),10190,{key:e.toString()}),e}function Lg(t,e){return yx(t.databaseId,e.path)}function op(t,e){const n=q1(e);if(n.get(1)!==t.databaseId.projectId)throw new me(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ze(K1(n))}function Z1(t,e){return yx(t.databaseId,e)}function W4(t){const e=q1(t);return e.length===4?vt.emptyPath():K1(e)}function Dg(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K1(t){return ht(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Yv(t,e,n){return{name:Lg(t,e),fields:n.value.mapValue.fields}}function H4(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(ht(g===void 0||typeof g=="string",58123),gn.fromBase64String(g||"")):(ht(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),gn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const g=f.code===void 0?ee.UNKNOWN:F1(f.code);return new me(g,f.message||"")}(l);n=new W1(s,i,o,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=op(t,s.document.name),o=Er(s.document.updateTime),l=s.document.createTime?Er(s.document.createTime):Oe.min(),d=new Qn({mapValue:{fields:s.document.fields}}),m=Nn.newFoundDocument(i,o,l,d),f=s.targetIds||[],g=s.removedTargetIds||[];n=new bh(f,g,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=op(t,s.document),o=s.readTime?Er(s.readTime):Oe.min(),l=Nn.newNoDocument(i,o),d=s.removedTargetIds||[];n=new bh([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=op(t,s.document),o=s.removedTargetIds||[];n=new bh([],o,i,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:o}=s,l=new R4(i,o),d=s.targetId;n=new $1(d,l)}}return n}function q4(t,e){let n;if(e instanceof Ku)n={update:Yv(t,e.key,e.value)};else if(e instanceof ef)n={delete:Lg(t,e.key)};else if(e instanceof Ea)n={update:Yv(t,e.key,e.data),updateMask:tR(e.fieldMask)};else{if(!(e instanceof C4))return Ae(16599,{Vt:e.type});n={verify:Lg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(o,l){const d=l.transform;if(d instanceof zu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Pu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Cu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof cm)return{fieldPath:l.field.canonicalString(),increment:d.Ae};throw Ae(20930,{transform:l.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:$4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)}(t,e.precondition)),n}function Z4(t,e){return t&&t.length>0?(ht(e!==void 0,14353),t.map(n=>function(i,o){let l=i.updateTime?Er(i.updateTime):Er(o);return l.isEqual(Oe.min())&&(l=Er(o)),new S4(l,i.transformResults||[])}(n,e))):[]}function K4(t,e){return{documents:[Z1(t,e.path)]}}function G4(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Z1(t,i);const o=function(f){if(f.length!==0)return Q1(ir.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(g=>function(w){return{field:Qo(w.field),direction:J4(w.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const d=Ag(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:i}}function Q4(t){let e=W4(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){ht(s===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(x){const w=G1(x);return w instanceof ir&&k1(w)?w.getFilters():[w]}(n.where));let l=[];n.orderBy&&(l=function(x){return x.map(w=>function(S){return new Su(Yo(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(w))}(n.orderBy));let d=null;n.limit&&(d=function(x){let w;return w=typeof x=="object"?x.value:x,Zm(w)?null:w}(n.limit));let m=null;n.startAt&&(m=function(x){const w=!!x.before,E=x.values||[];return new om(E,w)}(n.startAt));let f=null;return n.endAt&&(f=function(x){const w=!x.before,E=x.values||[];return new om(E,w)}(n.endAt)),f4(e,i,l,o,d,"F",m,f)}function Y4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function G1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Yo(n.unaryFilter.field);return Gt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Yo(n.unaryFilter.field);return Gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yo(n.unaryFilter.field);return Gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Yo(n.unaryFilter.field);return Gt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return Gt.create(Yo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(s=>G1(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(n.compositeFilter.op))}(t):Ae(30097,{filter:t})}function J4(t){return V4[t]}function X4(t){return B4[t]}function eR(t){return U4[t]}function Qo(t){return{fieldPath:t.canonicalString()}}function Yo(t){return mn.fromServerFormat(t.fieldPath)}function Q1(t){return t instanceof Gt?function(n){if(n.op==="=="){if(Ov(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NAN"}};if(Mv(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ov(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NAN"}};if(Mv(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(n.field),op:X4(n.op),value:n.value}}}(t):t instanceof ir?function(n){const s=n.getFilters().map(i=>Q1(i));return s.length===1?s[0]:{compositeFilter:{op:eR(n.op),filters:s}}}(t):Ae(54877,{filter:t})}function tR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,s,i,o=Oe.min(),l=Oe.min(),d=gn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.yt=e}}function sR(t){const e=Q4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.Cn=new iR}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(ma.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(ma.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class iR{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new nn(vt.comparator),o=!i.has(s);return this.index[n]=i.add(s),o}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new nn(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},J1=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(J1,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ll(0)}static cr(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="LruGarbageCollector",aR=1048576;function e_([t,e],[n,s]){const i=Je(t,n);return i===0?Je(e,s):i}class oR{constructor(e){this.Ir=e,this.buffer=new nn(e_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();e_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lR{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(Xv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kl(n)?pe(Xv,"Ignoring IndexedDB error during garbage collection: ",n):await Zl(n)}await this.Vr(3e5)})}}class cR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return re.resolve(qm.ce);const s=new oR(n);return this.mr.forEachTarget(e,i=>s.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>s.Ar(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Jv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,i,o,l,d,m,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,l=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(s=x,d=Date.now(),this.removeTargets(e,s,n))).next(x=>(o=x,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(x=>(f=Date.now(),Ko()<=Ye.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(d-l)+`ms
	Removed ${o} targets in `+(m-d)+`ms
	Removed ${x} documents in `+(f-m)+`ms
Total Duration: ${f-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:x})))}}function uR(t,e){return new cR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&eu(s.mutation,i,hs.empty(),jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Xe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Xe()){const i=Ha();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(o=>{let l=Mc();return o.forEach((d,m)=>{l=l.insert(d,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const s=Ha();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Xe()))}populateOverlays(e,n,s){const i=[];return s.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,d)=>{n.set(l,d)})})}computeViews(e,n,s,i){let o=wi();const l=Xc(),d=function(){return Xc()}();return n.forEach((m,f)=>{const g=s.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Ea)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),eu(g.mutation,f,g.mutation.getFieldMask(),jt.now())):l.set(f.key,hs.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((f,g)=>l.set(f,g)),n.forEach((f,g)=>d.set(f,new hR(g,l.get(f)??null))),d))}recalculateAndSaveOverlays(e,n){const s=Xc();let i=new At((l,d)=>l-d),o=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const d of l)d.keys().forEach(m=>{const f=n.get(m);if(f===null)return;let g=s.get(m)||hs.empty();g=d.applyToLocalView(f,g),s.set(m,g);const x=(i.get(d.batchId)||Xe()).add(m);i=i.insert(d.batchId,x)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),f=m.key,g=m.value,x=R1();g.forEach(w=>{if(!o.has(w)){const E=B1(n.get(w),s.get(w));E!==null&&x.set(w,E),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,x))}return re.waitFor(l)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(l){return ze.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):z1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-o.size):re.resolve(Ha());let d=Nu,m=o;return l.next(f=>re.forEach(f,(g,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),o.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{m=m.insert(g,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,m,f,Xe())).next(g=>({batchId:d,changes:A1(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ze(n)).next(s=>{let i=Mc();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const o=n.collectionGroup;let l=Mc();return this.indexManager.getCollectionParents(e,o).next(d=>re.forEach(d,m=>{const f=function(x,w){return new Gl(w,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,s,i).next(g=>{g.forEach((x,w)=>{l=l.insert(x,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,s,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,o,i))).next(l=>{o.forEach((m,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Nn.newInvalidDocument(g)))});let d=Mc();return l.forEach((m,f)=>{const g=o.get(m);g!==void 0&&eu(g.mutation,f,hs.empty(),jt.now()),Ym(n,f)&&(d=d.insert(m,f))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Er(i.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:sR(i.bundledQuery),readTime:Er(i.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.overlays=new At(ze.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ha();return re.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&s.set(i,o)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,o)=>{this.St(e,n,o)}),re.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const i=Ha(),o=n.length+1,l=new ze(n.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const m=d.getNext().value,f=m.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&m.largestBatchId>s&&i.set(m.getKey(),m)}return re.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let o=new At((f,g)=>f-g);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>s){let g=o.get(f.largestBatchId);g===null&&(g=Ha(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const d=Ha(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((f,g)=>d.set(f,g)),!(d.size()>=i)););return re.resolve(d)}St(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(s.key,new A4(n,s));let o=this.qr.get(n);o===void 0&&(o=Xe(),this.qr.set(n,o)),this.qr.set(n,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.Qr=new nn(rn.$r),this.Ur=new nn(rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new rn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new rn(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ze(new vt([])),s=new rn(n,e),i=new rn(n,e+1),o=[];return this.Ur.forEachInRange([s,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ze(new vt([])),s=new rn(n,e),i=new rn(n,e+1);let o=Xe();return this.Ur.forEachInRange([s,i],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new rn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class rn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ze.comparator(e.key,n.key)||Je(e.Yr,n.Yr)}static Kr(e,n){return Je(e.Yr,n.Yr)||ze.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nn(rn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new I4(o,n,s,i);this.mutationQueue.push(l);for(const d of i)this.Zr=this.Zr.add(new rn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.ei(s),o=i<0?0:i;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?cx:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new rn(n,0),i=new rn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,i],l=>{const d=this.Xr(l.Yr);o.push(d)}),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new nn(Je);return n.forEach(i=>{const o=new rn(i,0),l=new rn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],d=>{s=s.add(d.Yr)})}),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let o=s;ze.isDocumentKey(o)||(o=o.child(""));const l=new rn(new ze(o),0);let d=new nn(Je);return this.Zr.forEachWhile(m=>{const f=m.key.path;return!!s.isPrefixOf(f)&&(f.length===i&&(d=d.add(m.Yr)),!0)},l),re.resolve(this.ti(d))}ti(e){const n=[];return e.forEach(s=>{const i=this.Xr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(n.mutations,i=>{const o=new rn(i.key,n.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new rn(n,0),i=this.Zr.firstAfterOrEqual(s);return re.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.ri=e,this.docs=function(){return new At(ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),o=i?i.size:0,l=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():Nn.newInvalidDocument(n))}getEntries(e,n){let s=wi();return n.forEach(i=>{const o=this.docs.get(i);s=s.insert(i,o?o.document.mutableCopy():Nn.newInvalidDocument(i))}),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let o=wi();const l=n.path,d=new ze(l.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:f,value:{document:g}}=m.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||qA(HA(g),s)<=0||(i.has(g.key)||Ym(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,n,s,i){Ae(9500)}ii(e,n){return re.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new wR(this)}getSize(e){return re.resolve(this.size)}}class wR extends dR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)}),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.persistence=e,this.si=new vo(n=>hx(n),mx),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new xx,this.targetCount=0,this.ai=Ll.ur()}forEachTarget(e,n){return this.si.forEach((s,i)=>n(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ll(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let i=0;const o=[];return this.si.forEach((l,d)=>{d.sequenceNumber<=n&&s.get(d.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),re.waitFor(o).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),re.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.ui={},this.overlays={},this.ci=new qm(0),this.li=!1,this.li=!0,this.hi=new gR,this.referenceDelegate=e(this),this.Pi=new vR(this),this.indexManager=new rR,this.remoteDocumentCache=function(i){return new xR(i)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new nR(n),this.Ii=new fR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new yR(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){pe("MemoryPersistence","Starting transaction:",e);const i=new _R(this.ci.next());return this.referenceDelegate.Ei(),s(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return re.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class _R extends KA{constructor(e){super(),this.currentSequenceNumber=e}}class wx{constructor(e){this.persistence=e,this.Ri=new xx,this.Vi=null}static mi(e){return new wx(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,s=>{const i=ze.fromPath(s);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class dm{constructor(e,n){this.persistence=e,this.pi=new vo(s=>YA(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=uR(this,n)}static mi(e,n){return new dm(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return re.forEach(this.pi,(s,i)=>this.br(e,s,i).next(o=>o?re.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,n).next(d=>{d||(s++,o.removeEntry(l,Oe.min()))})).next(()=>o.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wh(e.data.value)),n}br(e,n,s){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return re.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=i}static As(e,n){let s=Xe(),i=Xe();for(const o of n.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new vx(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Zz()?8:GA(Sn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,i,s).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new bR;return this.Ss(e,n,l).next(d=>{if(o.result=d,this.Vs)return this.bs(e,n,l,d.size)})}).next(()=>o.result)}bs(e,n,s,i){return s.documentReadCount<this.fs?(Ko()<=Ye.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Ko()<=Ye.DEBUG&&pe("QueryEngine","Query:",Go(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Ko()<=Ye.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(n))):re.resolve())}ys(e,n){if(Fv(n))return re.resolve(null);let s=Tr(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lm(n,null,"F"),s=Tr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(o=>{const l=Xe(...o);return this.ps.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,s).next(m=>{const f=this.Ds(n,d);return this.Cs(n,f,l,m.readTime)?this.ys(e,lm(n,null,"F")):this.vs(e,f,n,m)}))})))}ws(e,n,s,i){return Fv(n)||i.isEqual(Oe.min())?re.resolve(null):this.ps.getDocuments(e,s).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,s,i)?re.resolve(null):(Ko()<=Ye.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Go(n)),this.vs(e,l,n,WA(i,Nu)).next(d=>d))})}Ds(e,n){let s=new nn(C1(e));return n.forEach((i,o)=>{Ym(e,o)&&(s=s.add(o))}),s}Cs(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,s){return Ko()<=Ye.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Go(n)),this.ps.getDocumentsMatchingQuery(e,n,ma.min(),s)}vs(e,n,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="LocalStore",NR=3e8;class kR{constructor(e,n,s,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new At(Je),this.xs=new vo(o=>hx(o),mx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function TR(t,e,n,s){return new kR(t,e,n,s)}async function ek(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(o=>{const l=[],d=[];let m=Xe();for(const f of i){l.push(f.batchId);for(const g of f.mutations)m=m.add(g.key)}for(const f of o){d.push(f.batchId);for(const g of f.mutations)m=m.add(g.key)}return n.localDocuments.getDocuments(s,m).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:d}))})})}function ER(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(d,m,f,g){const x=f.batch,w=x.keys();let E=re.resolve();return w.forEach(S=>{E=E.next(()=>g.getEntry(m,S)).next(A=>{const C=f.docVersions.get(S);ht(C!==null,48541),A.version.compareTo(C)<0&&(x.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),g.addEntry(A)))})}),E.next(()=>d.mutationQueue.removeMutationBatch(m,x))}(n,s,e,o).next(()=>o.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let m=Xe();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(m=m.add(d.batch.mutations[f].key));return m}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function tk(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function SR(t,e){const n=Be(t),s=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const d=[];e.targetChanges.forEach((g,x)=>{const w=i.get(x);if(!w)return;d.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,x).next(()=>n.Pi.addMatchingKeys(o,g.addedDocuments,x)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?E=E.withResumeToken(gn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,s)),i=i.insert(x,E),function(A,C,b){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=NR?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(w,E,g)&&d.push(n.Pi.updateTargetData(o,E))});let m=wi(),f=Xe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),d.push(zR(o,l,e.documentUpdates).next(g=>{m=g.ks,f=g.qs})),!s.isEqual(Oe.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next(x=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s));d.push(g)}return re.waitFor(d).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,m,f)).next(()=>m)}).then(o=>(n.Ms=i,o))}function zR(t,e,n){let s=Xe(),i=Xe();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let l=wi();return n.forEach((d,m)=>{const f=o.get(d);m.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(d)),m.isNoDocument()&&m.version.isEqual(Oe.min())?(e.removeEntry(d,m.readTime),l=l.insert(d,m)):!f.isValidDocument()||m.version.compareTo(f.version)>0||m.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(m),l=l.insert(d,m)):pe(_x,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",m.version)}),{ks:l,qs:i}})}function PR(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=cx),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function CR(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Pi.getTargetData(s,e).next(o=>o?(i=o,re.resolve(i)):n.Pi.allocateTargetId(s).next(l=>(i=new Gi(e,l,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Mg(t,e,n){const s=Be(t),i=s.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",o,l=>s.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Kl(l))throw l;pe(_x,`Failed to update sequence numbers for target ${e}: ${l}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function t_(t,e,n){const s=Be(t);let i=Oe.min(),o=Xe();return s.persistence.runTransaction("Execute query","readwrite",l=>function(m,f,g){const x=Be(m),w=x.xs.get(g);return w!==void 0?re.resolve(x.Ms.get(w)):x.Pi.getTargetData(f,g)}(s,l,Tr(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(l,d.targetId).next(m=>{o=m})}).next(()=>s.Fs.getDocumentsMatchingQuery(l,e,n?i:Oe.min(),n?o:Xe())).next(d=>(IR(s,g4(e),d),{documents:d,Qs:o})))}function IR(t,e,n){let s=t.Os.get(e)||Oe.min();n.forEach((i,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)}),t.Os.set(e,s)}class n_{constructor(){this.activeTargetIds=b4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AR{constructor(){this.Mo=new n_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="ConnectivityMonitor";class r_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(s_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(s_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd=null;function Og(){return Qd===null?Qd=function(){return 268435456+Math.round(2147483648*Math.random())}():Qd++,"0x"+Qd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="RestConnection",LR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===im?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,n,s,i,o){const l=Og(),d=this.zo(e,n.toUriEncodedString());pe(lp,`Sending RPC '${e}' ${l}:`,d,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,o);const{host:f}=new URL(d),g=Na(f);return this.Jo(e,d,m,s,g).then(x=>(pe(lp,`Received RPC '${e}' ${l}: `,x),x),x=>{throw Cl(lp,`RPC '${e}' ${l} failed with error: `,x,"url: ",d,"request:",s),x})}Ho(e,n,s,i,o,l){return this.Go(e,n,s,i,o)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ql}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),s&&s.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const s=LR[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class OR extends DR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,i,o){const l=Og();return new Promise((d,m)=>{const f=new r1;f.setWithCredentials(!0),f.listenOnce(i1.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case xh.NO_ERROR:const x=f.getResponseJson();pe(_n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(x)),d(x);break;case xh.TIMEOUT:pe(_n,`RPC '${e}' ${l} timed out`),m(new me(ee.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const w=f.getStatus();if(pe(_n,`RPC '${e}' ${l} failed with status:`,w,"response text:",f.getResponseText()),w>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const A=function(b){const k=b.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(k)>=0?k:ee.UNKNOWN}(S.status);m(new me(A,S.message))}else m(new me(ee.UNKNOWN,"Server responded with status "+f.getStatus()))}else m(new me(ee.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{pe(_n,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(i);pe(_n,`RPC '${e}' ${l} sending request:`,i),f.send(n,"POST",g,s,15)})}T_(e,n,s){const i=Og(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=l1(),d=o1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(m.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const g=o.join("");pe(_n,`Creating RPC '${e}' stream ${i}: ${g}`,m);const x=l.createWebChannel(g,m);this.I_(x);let w=!1,E=!1;const S=new MR({Yo:C=>{E?pe(_n,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(w||(pe(_n,`Opening RPC '${e}' stream ${i} transport.`),x.open(),w=!0),pe(_n,`RPC '${e}' stream ${i} sending:`,C),x.send(C))},Zo:()=>x.close()}),A=(C,b,k)=>{C.listen(b,j=>{try{k(j)}catch(U){setTimeout(()=>{throw U},0)}})};return A(x,Dc.EventType.OPEN,()=>{E||(pe(_n,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),A(x,Dc.EventType.CLOSE,()=>{E||(E=!0,pe(_n,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(x))}),A(x,Dc.EventType.ERROR,C=>{E||(E=!0,Cl(_n,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),S.a_(new me(ee.UNAVAILABLE,"The operation could not be completed")))}),A(x,Dc.EventType.MESSAGE,C=>{var b;if(!E){const k=C.data[0];ht(!!k,16349);const j=k,U=(j==null?void 0:j.error)||((b=j[0])==null?void 0:b.error);if(U){pe(_n,`RPC '${e}' stream ${i} received error:`,U);const D=U.status;let F=function(M){const R=Zt[M];if(R!==void 0)return F1(R)}(D),P=U.message;F===void 0&&(F=ee.INTERNAL,P="Unknown error status: "+D+" with message "+U.message),E=!0,S.a_(new me(F,P)),x.close()}else pe(_n,`RPC '${e}' stream ${i} received:`,k),S.u_(k)}}),A(d,a1.STAT_EVENT,C=>{C.stat===Tg.PROXY?pe(_n,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Tg.NOPROXY&&pe(_n,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function cp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t){return new F4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,s=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="PersistentStream";class sk{constructor(e,n,s,i,o,l,d,m){this.Mi=e,this.S_=s,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(xi(n.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===n&&this.G_(s,i)},s=>{e(()=>{const i=new me(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return pe(i_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(pe(i_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VR extends sk{constructor(e,n,s,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=H4(this.serializer,e),s=function(o){if(!("targetChange"in o))return Oe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?Er(l.readTime):Oe.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Dg(this.serializer),n.addTarget=function(o,l){let d;const m=l.target;if(d=Cg(m)?{documents:K4(o,m)}:{query:G4(o,m).ft},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=H1(o,l.resumeToken);const f=Ag(o,l.expectedCount);f!==null&&(d.expectedCount=f)}else if(l.snapshotVersion.compareTo(Oe.min())>0){d.readTime=um(o,l.snapshotVersion.toTimestamp());const f=Ag(o,l.expectedCount);f!==null&&(d.expectedCount=f)}return d}(this.serializer,e);const s=Y4(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Dg(this.serializer),n.removeTarget=e,this.q_(n)}}class BR extends sk{constructor(e,n,s,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Z4(e.writeResults,e.commitTime),s=Er(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Dg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>q4(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{}class FR extends UR{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new me(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Rg(n,s),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(ee.UNKNOWN,o.toString())})}Ho(e,n,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Ho(e,Rg(n,s),i,l,d,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(ee.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class $R{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xi(n),this.aa=!1):pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="RemoteStore";class WR{constructor(e,n,s,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{s.enqueueAndForget(async()=>{_o(this)&&(pe(ho,"Restarting streams for network reachability change."),await async function(m){const f=Be(m);f.Ea.add(4),await Qu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await sf(f)}(this))})}),this.Ra=new $R(s,i)}}async function sf(t){if(_o(t))for(const e of t.da)await e(!0)}async function Qu(t){for(const e of t.da)await e(!1)}function rk(t,e){const n=Be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),kx(n)?Nx(n):Ql(n).O_()&&jx(n,e))}function bx(t,e){const n=Be(t),s=Ql(n);n.Ia.delete(e),s.O_()&&ik(n,e),n.Ia.size===0&&(s.O_()?s.L_():_o(n)&&n.Ra.set("Unknown"))}function jx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ql(t).Y_(e)}function ik(t,e){t.Va.Ue(e),Ql(t).Z_(e)}function Nx(t){t.Va=new O4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ql(t).start(),t.Ra.ua()}function kx(t){return _o(t)&&!Ql(t).x_()&&t.Ia.size>0}function _o(t){return Be(t).Ea.size===0}function ak(t){t.Va=void 0}async function HR(t){t.Ra.set("Online")}async function qR(t){t.Ia.forEach((e,n)=>{jx(t,e)})}async function ZR(t,e){ak(t),kx(t)?(t.Ra.ha(e),Nx(t)):t.Ra.set("Unknown")}async function KR(t,e,n){if(t.Ra.set("Online"),e instanceof W1&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const d of o.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.Ia.delete(d),i.Va.removeTarget(d))}(t,e)}catch(s){pe(ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await hm(t,s)}else if(e instanceof bh?t.Va.Ze(e):e instanceof $1?t.Va.st(e):t.Va.tt(e),!n.isEqual(Oe.min()))try{const s=await tk(t.localStore);n.compareTo(s)>=0&&await function(o,l){const d=o.Va.Tt(l);return d.targetChanges.forEach((m,f)=>{if(m.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(m.resumeToken,l))}}),d.targetMismatches.forEach((m,f)=>{const g=o.Ia.get(m);if(!g)return;o.Ia.set(m,g.withResumeToken(gn.EMPTY_BYTE_STRING,g.snapshotVersion)),ik(o,m);const x=new Gi(g.target,m,f,g.sequenceNumber);jx(o,x)}),o.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(s){pe(ho,"Failed to raise snapshot:",s),await hm(t,s)}}async function hm(t,e,n){if(!Kl(e))throw e;t.Ea.add(1),await Qu(t),t.Ra.set("Offline"),n||(n=()=>tk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe(ho,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await sf(t)})}function ok(t,e){return e().catch(n=>hm(t,n,e))}async function rf(t){const e=Be(t),n=ya(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cx;for(;GR(e);)try{const i=await PR(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,QR(e,i)}catch(i){await hm(e,i)}lk(e)&&ck(e)}function GR(t){return _o(t)&&t.Ta.length<10}function QR(t,e){t.Ta.push(e);const n=ya(t);n.O_()&&n.X_&&n.ea(e.mutations)}function lk(t){return _o(t)&&!ya(t).x_()&&t.Ta.length>0}function ck(t){ya(t).start()}async function YR(t){ya(t).ra()}async function JR(t){const e=ya(t);for(const n of t.Ta)e.ea(n.mutations)}async function XR(t,e,n){const s=t.Ta.shift(),i=px.from(s,e,n);await ok(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rf(t)}async function e5(t,e){e&&ya(t).X_&&await async function(s,i){if(function(l){return L4(l)&&l!==ee.ABORTED}(i.code)){const o=s.Ta.shift();ya(s).B_(),await ok(s,()=>s.remoteSyncer.rejectFailedWrite(o.batchId,i)),await rf(s)}}(t,e),lk(t)&&ck(t)}async function a_(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),pe(ho,"RemoteStore received new credentials");const s=_o(n);n.Ea.add(3),await Qu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sf(n)}async function t5(t,e){const n=Be(t);e?(n.Ea.delete(2),await sf(n)):e||(n.Ea.add(2),await Qu(n),n.Ra.set("Unknown"))}function Ql(t){return t.ma||(t.ma=function(n,s,i){const o=Be(n);return o.sa(),new VR(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:HR.bind(null,t),t_:qR.bind(null,t),r_:ZR.bind(null,t),H_:KR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),kx(t)?Nx(t):t.Ra.set("Unknown")):(await t.ma.stop(),ak(t))})),t.ma}function ya(t){return t.fa||(t.fa=function(n,s,i){const o=Be(n);return o.sa(),new BR(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:YR.bind(null,t),r_:e5.bind(null,t),ta:JR.bind(null,t),na:XR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await rf(t)):(await t.fa.stop(),t.Ta.length>0&&(pe(ho,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,s,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=o,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,o){const l=Date.now()+s,d=new Tx(e,n,l,i,o);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ex(t,e){if(xi("AsyncQueue",`${e}: ${t}`),Kl(t))return new me(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static emptySet(e){return new vl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ze.comparator(n.key,s.key):(n,s)=>ze.comparator(n.key,s.key),this.keyedMap=Mc(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=s.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new vl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.ga=new At(ze.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Dl{constructor(e,n,s,i,o,l,d,m,f){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=f}static fromInitialDocuments(e,n,s,i,o){const l=[];return n.forEach(d=>{l.push({type:0,doc:d})}),new Dl(e,n,vl.emptySet(n),l,s,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class s5{constructor(){this.queries=l_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=Be(n),o=i.queries;i.queries=l_(),o.forEach((l,d)=>{for(const m of d.Sa)m.onError(s)})})(this,new me(ee.ABORTED,"Firestore shutting down"))}}function l_(){return new vo(t=>P1(t),Qm)}async function Sx(t,e){const n=Be(t);let s=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(s=2):(o=new n5,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const d=Ex(l,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(d)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Px(n)}async function zx(t,e){const n=Be(t),s=e.query;let i=3;const o=n.queries.get(s);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function r5(t,e){const n=Be(t);let s=!1;for(const i of e){const o=i.query,l=n.queries.get(o);if(l){for(const d of l.Sa)d.Fa(i)&&(s=!0);l.wa=i}}s&&Px(n)}function i5(t,e,n){const s=Be(t),i=s.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);s.queries.delete(e)}function Px(t){t.Ca.forEach(e=>{e.next()})}var Vg,c_;(c_=Vg||(Vg={})).Ma="default",c_.Cache="cache";class Cx{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new Dl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.key=e}}class dk{constructor(e){this.key=e}}class a5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=C1(e),this.tu=new vl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new o_,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,d=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,x)=>{const w=i.get(g),E=Ym(this.query,x)?x:null,S=!!w&&this.mutatedKeys.has(w.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;w&&E?w.data.isEqual(E.data)?S!==A&&(s.track({type:3,doc:E}),C=!0):this.su(w,E)||(s.track({type:2,doc:E}),C=!0,(m&&this.eu(E,m)>0||f&&this.eu(E,f)<0)&&(d=!0)):!w&&E?(s.track({type:0,doc:E}),C=!0):w&&!E&&(s.track({type:1,doc:w}),C=!0,(m||f)&&(d=!0)),C&&(E?(l=l.add(E),o=A?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),s.track({type:1,doc:g})}return{tu:l,iu:s,Cs:d,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((g,x)=>function(E,S){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:C})}};return A(E)-A(S)}(g.type,x.type)||this.eu(g.doc,x.doc)),this.ou(s),i=i??!1;const d=n&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,f=m!==this.Za;return this.Za=m,l.length!==0||f?{snapshot:new Dl(this.query,e.tu,o,l,e.mutatedKeys,m===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Xe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new dk(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new uk(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Dl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ix="SyncEngine";class o5{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class l5{constructor(e){this.key=e,this.hu=!1}}class c5{constructor(e,n,s,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new vo(d=>P1(d),Qm),this.Iu=new Map,this.Eu=new Set,this.du=new At(ze.comparator),this.Au=new Map,this.Ru=new xx,this.Vu={},this.mu=new Map,this.fu=Ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function u5(t,e,n=!0){const s=yk(t);let i;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await hk(s,e,n,!0),i}async function d5(t,e){const n=yk(t);await hk(n,e,!0,!1)}async function hk(t,e,n,s){const i=await CR(t.localStore,Tr(e)),o=i.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let d;return s&&(d=await h5(t,e,o,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&rk(t.remoteStore,i),d}async function h5(t,e,n,s,i){t.pu=(x,w,E)=>async function(A,C,b,k){let j=C.view.ru(b);j.Cs&&(j=await t_(A.localStore,C.query,!1).then(({documents:P})=>C.view.ru(P,j)));const U=k&&k.targetChanges.get(C.targetId),D=k&&k.targetMismatches.get(C.targetId)!=null,F=C.view.applyChanges(j,A.isPrimaryClient,U,D);return d_(A,C.targetId,F.au),F.snapshot}(t,x,w,E);const o=await t_(t.localStore,e,!0),l=new a5(e,o.Qs),d=l.ru(o.documents),m=Gu.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),f=l.applyChanges(d,t.isPrimaryClient,m);d_(t,n,f.au);const g=new o5(e,n,l);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function m5(t,e,n){const s=Be(t),i=s.Tu.get(e),o=s.Iu.get(i.targetId);if(o.length>1)return s.Iu.set(i.targetId,o.filter(l=>!Qm(l,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Mg(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&bx(s.remoteStore,i.targetId),Bg(s,i.targetId)}).catch(Zl)):(Bg(s,i.targetId),await Mg(s.localStore,i.targetId,!0))}async function f5(t,e){const n=Be(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),bx(n.remoteStore,s.targetId))}async function p5(t,e,n){const s=b5(t);try{const i=await function(l,d){const m=Be(l),f=jt.now(),g=d.reduce((E,S)=>E.add(S.key),Xe());let x,w;return m.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=wi(),A=Xe();return m.Ns.getEntries(E,g).next(C=>{S=C,S.forEach((b,k)=>{k.isValidDocument()||(A=A.add(b))})}).next(()=>m.localDocuments.getOverlayedDocuments(E,S)).next(C=>{x=C;const b=[];for(const k of d){const j=P4(k,x.get(k.key).overlayedDocument);j!=null&&b.push(new Ea(k.key,j,b1(j.value.mapValue),ns.exists(!0)))}return m.mutationQueue.addMutationBatch(E,f,b,d)}).next(C=>{w=C;const b=C.applyToLocalDocumentSet(x,A);return m.documentOverlayCache.saveOverlays(E,C.batchId,b)})}).then(()=>({batchId:w.batchId,changes:A1(x)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(l,d,m){let f=l.Vu[l.currentUser.toKey()];f||(f=new At(Je)),f=f.insert(d,m),l.Vu[l.currentUser.toKey()]=f}(s,i.batchId,n),await Yu(s,i.changes),await rf(s.remoteStore)}catch(i){const o=Ex(i,"Failed to persist write");n.reject(o)}}async function mk(t,e){const n=Be(t);try{const s=await SR(n.localStore,e);e.targetChanges.forEach((i,o)=>{const l=n.Au.get(o);l&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?ht(l.hu,14607):i.removedDocuments.size>0&&(ht(l.hu,42227),l.hu=!1))}),await Yu(n,s,e)}catch(s){await Zl(s)}}function u_(t,e,n){const s=Be(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach((o,l)=>{const d=l.view.va(e);d.snapshot&&i.push(d.snapshot)}),function(l,d){const m=Be(l);m.onlineState=d;let f=!1;m.queries.forEach((g,x)=>{for(const w of x.Sa)w.va(d)&&(f=!0)}),f&&Px(m)}(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function g5(t,e,n){const s=Be(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),o=i&&i.key;if(o){let l=new At(ze.comparator);l=l.insert(o,Nn.newNoDocument(o,Oe.min()));const d=Xe().add(o),m=new tf(Oe.min(),new Map,new At(Je),l,d);await mk(s,m),s.du=s.du.remove(o),s.Au.delete(e),Ax(s)}else await Mg(s.localStore,e,!1).then(()=>Bg(s,e,n)).catch(Zl)}async function y5(t,e){const n=Be(t),s=e.batch.batchId;try{const i=await ER(n.localStore,e);pk(n,s,null),fk(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Yu(n,i)}catch(i){await Zl(i)}}async function x5(t,e,n){const s=Be(t);try{const i=await function(l,d){const m=Be(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return m.mutationQueue.lookupMutationBatch(f,d).next(x=>(ht(x!==null,37113),g=x.keys(),m.mutationQueue.removeMutationBatch(f,x))).next(()=>m.mutationQueue.performConsistencyCheck(f)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(f,g,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>m.localDocuments.getDocuments(f,g))})}(s.localStore,e);pk(s,e,n),fk(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Yu(s,i)}catch(i){await Zl(i)}}function fk(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function pk(t,e,n){const s=Be(t);let i=s.Vu[s.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Bg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||gk(t,s)})}function gk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ax(t))}function d_(t,e,n){for(const s of n)s instanceof uk?(t.Ru.addReference(s.key,e),w5(t,s)):s instanceof dk?(pe(Ix,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||gk(t,s.key)):Ae(19791,{wu:s})}function w5(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(pe(Ix,"New document in limbo: "+n),t.Eu.add(s),Ax(t))}function Ax(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ze(vt.fromString(e)),s=t.fu.next();t.Au.set(s,new l5(n)),t.du=t.du.insert(n,s),rk(t.remoteStore,new Gi(Tr(Gm(n.path)),s,"TargetPurposeLimboResolution",qm.ce))}}async function Yu(t,e,n){const s=Be(t),i=[],o=[],l=[];s.Tu.isEmpty()||(s.Tu.forEach((d,m)=>{l.push(s.pu(m,e,n).then(f=>{var g;if((f||n)&&s.isPrimaryClient){const x=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(m.targetId))==null?void 0:g.current;s.sharedClientState.updateQueryState(m.targetId,x?"current":"not-current")}if(f){i.push(f);const x=vx.As(m.targetId,f);o.push(x)}}))}),await Promise.all(l),s.Pu.H_(i),await async function(m,f){const g=Be(m);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>re.forEach(f,w=>re.forEach(w.Es,E=>g.persistence.referenceDelegate.addReference(x,w.targetId,E)).next(()=>re.forEach(w.ds,E=>g.persistence.referenceDelegate.removeReference(x,w.targetId,E)))))}catch(x){if(!Kl(x))throw x;pe(_x,"Failed to update sequence numbers: "+x)}for(const x of f){const w=x.targetId;if(!x.fromCache){const E=g.Ms.get(w),S=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(S);g.Ms=g.Ms.insert(w,A)}}}(s.localStore,o))}async function v5(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){pe(Ix,"User change. New user:",e.toKey());const s=await ek(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(d=>{d.forEach(m=>{m.reject(new me(ee.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Yu(n,s.Ls)}}function _5(t,e){const n=Be(t),s=n.Au.get(e);if(s&&s.hu)return Xe().add(s.key);{let i=Xe();const o=n.Iu.get(e);if(!o)return i;for(const l of o){const d=n.Tu.get(l);i=i.unionWith(d.view.nu)}return i}}function yk(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g5.bind(null,e),e.Pu.H_=r5.bind(null,e.eventManager),e.Pu.yu=i5.bind(null,e.eventManager),e}function b5(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x5.bind(null,e),e}class mm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return TR(this.persistence,new jR,e.initialUser,this.serializer)}Cu(e){return new X1(wx.mi,this.serializer)}Du(e){return new AR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mm.provider={build:()=>new mm};class j5 extends mm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ht(this.persistence.referenceDelegate instanceof dm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new lR(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new X1(s=>dm.mi(s,n),this.serializer)}}class Ug{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>u_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=v5.bind(null,this.syncEngine),await t5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new s5}()}createDatastore(e){const n=nf(e.databaseInfo.databaseId),s=function(o){return new OR(o)}(e.databaseInfo);return function(o,l,d,m){return new FR(o,l,d,m)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,o,l,d){return new WR(s,i,o,l,d)}(this.localStore,this.datastore,e.asyncQueue,n=>u_(this.syncEngine,n,0),function(){return r_.v()?new r_:new RR}())}createSyncEngine(e,n){return function(i,o,l,d,m,f,g){const x=new c5(i,o,l,d,m,f);return g&&(x.gu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Be(i);pe(ho,"RemoteStore shutting down."),o.Ea.add(5),await Qu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ug.provider={build:()=>new Ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="FirestoreClient";class N5{constructor(e,n,s,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=bn.UNAUTHENTICATED,this.clientId=lx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,async l=>{pe(xa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(s,l=>(pe(xa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ex(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function up(t,e){t.asyncQueue.verifyOperationInProgress(),pe(xa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await ek(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function h_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await k5(t);pe(xa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>a_(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>a_(e.remoteStore,i)),t._onlineComponents=e}async function k5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(xa,"Using user provided OfflineComponentProvider");try{await up(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Cl("Error using user provided cache. Falling back to memory cache: "+n),await up(t,new mm)}}else pe(xa,"Using default OfflineComponentProvider"),await up(t,new j5(void 0));return t._offlineComponents}async function xk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(xa,"Using user provided OnlineComponentProvider"),await h_(t,t._uninitializedComponentsProvider._online)):(pe(xa,"Using default OnlineComponentProvider"),await h_(t,new Ug))),t._onlineComponents}function T5(t){return xk(t).then(e=>e.syncEngine)}async function fm(t){const e=await xk(t),n=e.eventManager;return n.onListen=u5.bind(null,e.syncEngine),n.onUnlisten=m5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f5.bind(null,e.syncEngine),n}function E5(t,e,n={}){const s=new di;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,d,m,f){const g=new Rx({next:w=>{g.Nu(),l.enqueueAndForget(()=>zx(o,x));const E=w.docs.has(d);!E&&w.fromCache?f.reject(new me(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&m&&m.source==="server"?f.reject(new me(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),x=new Cx(Gm(d.path),g,{includeMetadataChanges:!0,qa:!0});return Sx(o,x)}(await fm(t),t.asyncQueue,e,n,s)),s.promise}function S5(t,e,n={}){const s=new di;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,d,m,f){const g=new Rx({next:w=>{g.Nu(),l.enqueueAndForget(()=>zx(o,x)),w.fromCache&&m.source==="server"?f.reject(new me(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),x=new Cx(d,g,{includeMetadataChanges:!0,qa:!0});return Sx(o,x)}(await fm(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="firestore.googleapis.com",f_=!0;class p_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vk,this.ssl=f_}else this.host=e.host,this.ssl=e.ssl??f_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=J1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aR)throw new me(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wk(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class af{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new IA;switch(s.type){case"firstParty":return new DA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=m_.get(n);s&&(pe("ComponentProvider","Removing Datastore"),m_.delete(n),s.terminate())}(this),Promise.resolve()}}function z5(t,e,n,s={}){var f;t=ts(t,af);const i=Na(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;i&&(Ky(`https://${d}`),Gy("Firestore",!0)),o.host!==vk&&o.host!==d&&Cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:d,ssl:i,emulatorOptions:s};if(!io(m,l)&&(t._setSettings(m),s.mockUserToken)){let g,x;if(typeof s.mockUserToken=="string")g=s.mockUserToken,x=bn.MOCK_USER;else{g=fN(s.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new me(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new bn(w)}t._authCredentials=new AA(new u1(g,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class Ot{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Zu(n,Ot._jsonSchema))return new Ot(e,s||null,new ze(vt.fromString(n.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Qt("string",Ot._jsonSchemaVersion),referencePath:Qt("string")};class ca extends ki{constructor(e,n,s){super(e,n,Gm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new ze(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function Fe(t,e,...n){if(t=lt(t),d1("collection","path",e),t instanceof af){const s=vt.fromString(e,...n);return Sv(s),new ca(t,null,s)}{if(!(t instanceof Ot||t instanceof ca))throw new me(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(vt.fromString(e,...n));return Sv(s),new ca(t.firestore,null,s)}}function Ie(t,e,...n){if(t=lt(t),arguments.length===1&&(e=lx.newId()),d1("doc","path",e),t instanceof af){const s=vt.fromString(e,...n);return Ev(s),new Ot(t,null,new ze(s))}{if(!(t instanceof Ot||t instanceof ca))throw new me(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(vt.fromString(e,...n));return Ev(s),new Ot(t.firestore,t instanceof ca?t.converter:null,new ze(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="AsyncQueue";class y_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nk(this,"async_queue_retry"),this._c=()=>{const s=cp();s&&pe(g_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=cp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=cp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new di;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Kl(e))throw e;pe(g_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,xi("INTERNAL UNHANDLED ERROR: ",x_(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Tx.createAndSchedule(this,e,n,s,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Ae(47125,{Pc:x_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function x_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of s)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class vi extends af{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new y_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y_(e),this._firestoreClient=void 0,await e}}}function P5(t,e){const n=typeof t=="object"?t:Jy(),s=typeof t=="string"?t:im,i=Um(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const o=dN("firestore");o&&z5(i,...o)}return i}function Ju(t){if(t._terminated)throw new me(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||C5(t),t._firestoreClient}function C5(t){var s,i,o;const e=t._freezeSettings(),n=function(d,m,f,g){return new e4(d,m,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,wk(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new N5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(gn.fromBase64String(e))}catch(n){throw new me(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ps(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zu(e,Ps._jsonSchema))return Ps.fromBase64String(e.bytes)}}Ps._jsonSchemaVersion="firestore/bytes/1.0",Ps._jsonSchema={type:Qt("string",Ps._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sr._jsonSchemaVersion}}static fromJSON(e){if(Zu(e,Sr._jsonSchema))return new Sr(e.latitude,e.longitude)}}Sr._jsonSchemaVersion="firestore/geoPoint/1.0",Sr._jsonSchema={type:Qt("string",Sr._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zu(e,zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new zr(e.vectorValues);throw new me(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zr._jsonSchemaVersion="firestore/vectorValue/1.0",zr._jsonSchema={type:Qt("string",zr._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=/^__.*__$/;class A5{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ea(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ku(e,this.data,n,this.fieldTransforms)}}class _k{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ea(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:t})}}class Lx{constructor(e,n,s,i,o,l){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bk(this.Ac)&&I5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class R5{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||nf(e)}Cc(e,n,s,i=!1){return new Lx({Ac:e,methodName:n,Dc:s,path:mn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lf(t){const e=t._freezeSettings(),n=nf(t._databaseId);return new R5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jk(t,e,n,s,i,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Mx("Data must be an object, but it was:",l,s);const d=Tk(s,l);let m,f;if(o.merge)m=new hs(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const x of o.mergeFields){const w=Fg(e,x,n);if(!l.contains(w))throw new me(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Sk(g,w)||g.push(w)}m=new hs(g),f=l.fieldTransforms.filter(x=>m.covers(x.field))}else m=null,f=l.fieldTransforms;return new A5(new Qn(d),m,f)}class cf extends of{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}class Dx extends of{_toFieldTransform(e){return new T4(e.path,new zu)}isEqual(e){return e instanceof Dx}}function Nk(t,e,n,s){const i=t.Cc(1,e,n);Mx("Data must be an object, but it was:",i,s);const o=[],l=Qn.empty();Ta(s,(m,f)=>{const g=Ox(e,m,n);f=lt(f);const x=i.yc(g);if(f instanceof cf)o.push(g);else{const w=ed(f,x);w!=null&&(o.push(g),l.set(g,w))}});const d=new hs(o);return new _k(l,d,i.fieldTransforms)}function kk(t,e,n,s,i,o){const l=t.Cc(1,e,n),d=[Fg(e,s,n)],m=[i];if(o.length%2!=0)throw new me(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)d.push(Fg(e,o[w])),m.push(o[w+1]);const f=[],g=Qn.empty();for(let w=d.length-1;w>=0;--w)if(!Sk(f,d[w])){const E=d[w];let S=m[w];S=lt(S);const A=l.yc(E);if(S instanceof cf)f.push(E);else{const C=ed(S,A);C!=null&&(f.push(E),g.set(E,C))}}const x=new hs(f);return new _k(g,x,l.fieldTransforms)}function L5(t,e,n,s=!1){return ed(n,t.Cc(s?4:3,e))}function ed(t,e){if(Ek(t=lt(t)))return Mx("Unsupported field value:",e,t),Tk(t,e);if(t instanceof of)return function(s,i){if(!bk(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,i){const o=[];let l=0;for(const d of s){let m=ed(d,i.wc(l));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(t,e)}return function(s,i){if((s=lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return j4(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=jt.fromDate(s);return{timestampValue:um(i.serializer,o)}}if(s instanceof jt){const o=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:um(i.serializer,o)}}if(s instanceof Sr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ps)return{bytesValue:H1(i.serializer,s._byteString)};if(s instanceof Ot){const o=i.databaseId,l=s.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yx(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof zr)return function(l,d){return{mapValue:{fields:{[v1]:{stringValue:_1},[am]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return fx(d.serializer,f)})}}}}}}(s,i);throw i.Sc(`Unsupported field value: ${Hm(s)}`)}(t,e)}function Tk(t,e){const n={};return f1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(t,(s,i)=>{const o=ed(i,e.mc(s));o!=null&&(n[s]=o)}),{mapValue:{fields:n}}}function Ek(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof Sr||t instanceof Ps||t instanceof Ot||t instanceof of||t instanceof zr)}function Mx(t,e,n){if(!Ek(n)||!h1(n)){const s=Hm(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Fg(t,e,n){if((e=lt(e))instanceof Xu)return e._internalPath;if(typeof e=="string")return Ox(t,e);throw pm("Field path arguments must be of type string or ",t,!1,void 0,n)}const D5=new RegExp("[~\\*/\\[\\]]");function Ox(t,e,n){if(e.search(D5)>=0)throw pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xu(...e.split("."))._internalPath}catch{throw pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pm(t,e,n,s,i){const o=s&&!s.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(o||l)&&(m+=" (found",o&&(m+=` in field ${s}`),l&&(m+=` in document ${i}`),m+=")"),new me(ee.INVALID_ARGUMENT,d+t+m)}function Sk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,s,i,o){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class M5 extends zk{data(){return super.data()}}function uf(t,e){return typeof e=="string"?Ox(t,e):e instanceof Xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vx{}class Bx extends Vx{}function dt(t,e,...n){let s=[];e instanceof Vx&&s.push(e),s=s.concat(n),function(o){const l=o.filter(m=>m instanceof Ux).length,d=o.filter(m=>m instanceof df).length;if(l>1||l>0&&d>0)throw new me(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class df extends Bx{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new df(e,n,s)}_apply(e){const n=this._parse(e);return Ik(e._query,n),new ki(e.firestore,e.converter,Ig(e._query,n))}_parse(e){const n=lf(e.firestore);return function(o,l,d,m,f,g,x){let w;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new me(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){__(x,g);const S=[];for(const A of x)S.push(v_(m,o,A));w={arrayValue:{values:S}}}else w=v_(m,o,x)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||__(x,g),w=L5(d,l,x,g==="in"||g==="not-in");return Gt.create(f,g,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xt(t,e,n){const s=e,i=uf("where",t);return df._create(i,s,n)}class Ux extends Vx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ux(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let l=i;const d=o.getFlattenedFilters();for(const m of d)Ik(l,m),l=Ig(l,m)}(e._query,n),new ki(e.firestore,e.converter,Ig(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fx extends Bx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fx(e,n)}_apply(e){const n=function(i,o,l){if(i.startAt!==null)throw new me(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new me(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Su(o,l)}(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new Gl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function $x(t,e="asc"){const n=e,s=uf("orderBy",t);return Fx._create(s,n)}class Wx extends Bx{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Wx(e,n,s)}_apply(e){return new ki(e.firestore,e.converter,lm(e._query,this._limit,this._limitType))}}function Ck(t){return $A("limit",t),Wx._create("limit",t,"F")}function v_(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new me(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z1(e)&&n.indexOf("/")!==-1)throw new me(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(vt.fromString(n));if(!ze.isDocumentKey(s))throw new me(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Dv(t,new ze(s))}if(n instanceof Ot)return Dv(t,n._key);throw new me(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hm(n)}.`)}function __(t,e){if(!Array.isArray(t)||t.length===0)throw new me(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ik(t,e){const n=function(i,o){for(const l of i)for(const d of l.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new me(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class O5{convertValue(e,n="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ta(e,(i,o)=>{s[i]=this.convertValue(o,n)}),s}convertVectorValue(e){var s,i,o;const n=(o=(i=(s=e.fields)==null?void 0:s[am].arrayValue)==null?void 0:i.values)==null?void 0:o.map(l=>Ft(l.doubleValue));return new zr(n)}convertGeoPoint(e){return new Sr(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Km(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const n=fa(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=vt.fromString(e);ht(Y1(s),9688,{name:e});const i=new Tu(s.get(1),s.get(3)),o=new ze(s.popFirst(5));return i.isEqual(n)||xi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Vc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ga extends zk{constructor(e,n,s,i,o,l){super(e,n,s,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(uf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ga._jsonSchema={type:Qt("string",Ga._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class jh extends Ga{data(e={}){return super.data(e)}}class Qa{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vc(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new jh(this._firestore,this._userDataWriter,s.key,s,new Vc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(d=>{const m=new jh(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Vc(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const m=new jh(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Vc(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return d.type!==0&&(f=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),g=l.indexOf(d.doc.key)),{type:V5(d.type),doc:m,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function V5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(t){t=ts(t,Ot);const e=ts(t.firestore,vi);return E5(Ju(e),t._key).then(n=>Rk(e,t,n))}Qa._jsonSchemaVersion="firestore/querySnapshot/1.0",Qa._jsonSchema={type:Qt("string",Qa._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Hx extends O5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Ke(t){t=ts(t,ki);const e=ts(t.firestore,vi),n=Ju(e),s=new Hx(e);return Pk(t._query),S5(n,t._query).then(i=>new Qa(e,s,t,i))}function _i(t,e,n){t=ts(t,Ot);const s=ts(t.firestore,vi),i=Ak(t.converter,e,n);return hf(s,[jk(lf(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ns.none())])}function zt(t,e,n,...s){t=ts(t,Ot);const i=ts(t.firestore,vi),o=lf(i);let l;return l=typeof(e=lt(e))=="string"||e instanceof Xu?kk(o,"updateDoc",t._key,e,n,s):Nk(o,"updateDoc",t._key,e),hf(i,[l.toMutation(t._key,ns.exists(!0))])}function Yl(t){return hf(ts(t.firestore,vi),[new ef(t._key,ns.none())])}function _l(t,...e){var m,f,g;t=lt(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||w_(e[s])||(n=e[s++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(w_(e[s])){const x=e[s];e[s]=(m=x.next)==null?void 0:m.bind(x),e[s+1]=(f=x.error)==null?void 0:f.bind(x),e[s+2]=(g=x.complete)==null?void 0:g.bind(x)}let o,l,d;if(t instanceof Ot)l=ts(t.firestore,vi),d=Gm(t._key.path),o={next:x=>{e[s]&&e[s](Rk(l,t,x))},error:e[s+1],complete:e[s+2]};else{const x=ts(t,ki);l=ts(x.firestore,vi),d=x._query;const w=new Hx(l);o={next:E=>{e[s]&&e[s](new Qa(l,w,x,E))},error:e[s+1],complete:e[s+2]},Pk(t._query)}return function(w,E,S,A){const C=new Rx(A),b=new Cx(E,C,S);return w.asyncQueue.enqueueAndForget(async()=>Sx(await fm(w),b)),()=>{C.Nu(),w.asyncQueue.enqueueAndForget(async()=>zx(await fm(w),b))}}(Ju(l),d,i,o)}function hf(t,e){return function(s,i){const o=new di;return s.asyncQueue.enqueueAndForget(async()=>p5(await T5(s),i,o)),o.promise}(Ju(t),e)}function Rk(t,e,n){const s=n.docs.get(e._key),i=new Hx(t);return new Ga(t,i,e._key,s,new Vc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lf(e)}set(e,n,s){this._verifyNotCommitted();const i=dp(e,this._firestore),o=Ak(i.converter,n,s),l=jk(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,s);return this._mutations.push(l.toMutation(i._key,ns.none())),this}update(e,n,s,...i){this._verifyNotCommitted();const o=dp(e,this._firestore);let l;return l=typeof(n=lt(n))=="string"||n instanceof Xu?kk(this._dataReader,"WriteBatch.update",o._key,n,s,i):Nk(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,ns.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=dp(e,this._firestore);return this._mutations=this._mutations.concat(new ef(n._key,ns.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dp(t,e){if((t=lt(t)).firestore!==e)throw new me(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function U5(){return new Dx("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){return Ju(t=ts(t,vi)),new B5(t,e=>hf(t,e))}(function(e,n=!0){(function(i){ql=i})(xo),ao(new ha("firestore",(s,{instanceIdentifier:i,options:o})=>{const l=s.getProvider("app").getImmediate(),d=new vi(new RA(s.getProvider("auth-internal")),new MA(l,s.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new me(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(f.options.projectId,g)}(l,i),l);return o={useFetchStreams:n,...o},d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),jr(jv,Nv,e),jr(jv,Nv,"esm2020")})();var F5="firebase",$5="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(F5,$5,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="firebasestorage.googleapis.com",Dk="storageBucket",W5=2*60*1e3,H5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt extends Dr{constructor(e,n,s=0){super(hp(e),`Firebase Storage: ${n} (${hp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vt||(Vt={}));function hp(t){return"storage/"+t}function qx(){const t="An unknown error occurred, please check the error payload for server response.";return new Bt(Vt.UNKNOWN,t)}function q5(t){return new Bt(Vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Z5(t){return new Bt(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function K5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Bt(Vt.UNAUTHENTICATED,t)}function G5(){return new Bt(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Q5(t){return new Bt(Vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Y5(){return new Bt(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function J5(){return new Bt(Vt.CANCELED,"User canceled the upload/download.")}function X5(t){return new Bt(Vt.INVALID_URL,"Invalid URL '"+t+"'.")}function e6(t){return new Bt(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function t6(){return new Bt(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dk+"' property when initializing the app?")}function n6(){return new Bt(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function s6(){return new Bt(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function r6(t){return new Bt(Vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $g(t){return new Bt(Vt.INVALID_ARGUMENT,t)}function Mk(){return new Bt(Vt.APP_DELETED,"The Firebase app was deleted.")}function i6(t){return new Bt(Vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tu(t,e){return new Bt(Vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zc(t){throw new Bt(Vt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ms.makeFromUrl(e,n)}catch{return new ms(e,"")}if(s.path==="")return s;throw e6(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function o(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+i+l,"i"),m={bucket:1,path:3};function f(U){U.path_=decodeURIComponent(U.path)}const g="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",E=new RegExp(`^https?://${x}/${g}/b/${i}/o${w}`,"i"),S={bucket:1,path:3},A=n===Lk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",b=new RegExp(`^https?://${A}/${i}/${C}`,"i"),j=[{regex:d,indices:m,postModify:o},{regex:E,indices:S,postModify:f},{regex:b,indices:{bucket:1,path:2},postModify:f}];for(let U=0;U<j.length;U++){const D=j[U],F=D.regex.exec(e);if(F){const P=F[D.indices.bucket];let T=F[D.indices.path];T||(T=""),s=new ms(P,T),D.postModify(s);break}}if(s==null)throw X5(e);return s}}class a6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t,e,n){let s=1,i=null,o=null,l=!1,d=0;function m(){return d===2}let f=!1;function g(...C){f||(f=!0,e.apply(null,C))}function x(C){i=setTimeout(()=>{i=null,t(E,m())},C)}function w(){o&&clearTimeout(o)}function E(C,...b){if(f){w();return}if(C){w(),g.call(null,C,...b);return}if(m()||l){w(),g.call(null,C,...b);return}s<64&&(s*=2);let j;d===1?(d=2,j=0):j=(s+Math.random())*1e3,x(j)}let S=!1;function A(C){S||(S=!0,w(),!f&&(i!==null?(C||(d=2),clearTimeout(i),x(0)):C||(d=1)))}return x(0),o=setTimeout(()=>{l=!0,A(!0)},n),A}function l6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){return t!==void 0}function u6(t){return typeof t=="object"&&!Array.isArray(t)}function Zx(t){return typeof t=="string"||t instanceof String}function j_(t){return Kx()&&t instanceof Blob}function Kx(){return typeof Blob<"u"}function N_(t,e,n,s){if(s<e)throw $g(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw $g(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Ok(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ya;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ya||(Ya={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,n,s,i,o,l,d,m,f,g,x,w=!0,E=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=m,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=x,this.retry=w,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,A)=>{this.resolve_=S,this.reject_=A,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new Yd(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=d=>{const m=d.loaded,f=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const d=o.getErrorCode()===Ya.NO_ERROR,m=o.getStatus();if(!d||d6(m,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Ya.ABORT;s(!1,new Yd(!1,null,g));return}const f=this.successCodes_.indexOf(m)!==-1;s(!0,new Yd(f,o))})},n=(s,i)=>{const o=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());c6(m)?o(m):o()}catch(m){l(m)}else if(d!==null){const m=qx();m.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,m)):l(m)}else if(i.canceled){const m=this.appDelete_?Mk():J5();l(m)}else{const m=Y5();l(m)}};this.canceled_?n(!1,new Yd(!1,null,!0)):this.backoffId_=o6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yd{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function m6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function f6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function p6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function g6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function y6(t,e,n,s,i,o,l=!0,d=!1){const m=Ok(t.urlParams),f=t.url+m,g=Object.assign({},t.headers);return p6(g,e),m6(g,n),f6(g,o),g6(g,s),new h6(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function w6(...t){const e=x6();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Kx())return new Blob(t);throw new Bt(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function v6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(t){if(typeof atob>"u")throw r6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mp{constructor(e,n){this.data=e,this.contentType=n||null}}function b6(t,e){switch(t){case vr.RAW:return new mp(Vk(e));case vr.BASE64:case vr.BASE64URL:return new mp(Bk(t,e));case vr.DATA_URL:return new mp(N6(e),k6(e))}throw qx()}function Vk(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=s,l=t.charCodeAt(++n);s=65536|(o&1023)<<10|l&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function j6(t){let e;try{e=decodeURIComponent(t)}catch{throw tu(vr.DATA_URL,"Malformed data URL.")}return Vk(e)}function Bk(t,e){switch(t){case vr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw tu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case vr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw tu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_6(e)}catch(i){throw i.message.includes("polyfill")?i:tu(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class Uk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw tu(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=T6(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function N6(t){const e=new Uk(t);return e.base64?Bk(vr.BASE64,e.rest):j6(e.rest)}function k6(t){return new Uk(t).contentType}function T6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){let s=0,i="";j_(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(j_(this.data_)){const s=this.data_,i=v6(s,e,n);return i===null?null:new Hi(i)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Hi(s,!0)}}static getBlob(...e){if(Kx()){const n=e.map(s=>s instanceof Hi?s.data_:s);return new Hi(w6.apply(null,n))}else{const n=e.map(l=>Zx(l)?b6(vr.RAW,l).data:l.data_);let s=0;n.forEach(l=>{s+=l.byteLength});const i=new Uint8Array(s);let o=0;return n.forEach(l=>{for(let d=0;d<l.length;d++)i[o++]=l[d]}),new Hi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){let e;try{e=JSON.parse(t)}catch{return null}return u6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function S6(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function $k(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t,e){return e}class Ln{constructor(e,n,s,i){this.server=e,this.local=n||e,this.writable=!!s,this.xform=i||z6}}let Jd=null;function P6(t){return!Zx(t)||t.length<2?t:$k(t)}function Wk(){if(Jd)return Jd;const t=[];t.push(new Ln("bucket")),t.push(new Ln("generation")),t.push(new Ln("metageneration")),t.push(new Ln("name","fullPath",!0));function e(o,l){return P6(l)}const n=new Ln("name");n.xform=e,t.push(n);function s(o,l){return l!==void 0?Number(l):l}const i=new Ln("size");return i.xform=s,t.push(i),t.push(new Ln("timeCreated")),t.push(new Ln("updated")),t.push(new Ln("md5Hash",null,!0)),t.push(new Ln("cacheControl",null,!0)),t.push(new Ln("contentDisposition",null,!0)),t.push(new Ln("contentEncoding",null,!0)),t.push(new Ln("contentLanguage",null,!0)),t.push(new Ln("contentType",null,!0)),t.push(new Ln("metadata","customMetadata",!0)),Jd=t,Jd}function C6(t,e){function n(){const s=t.bucket,i=t.fullPath,o=new ms(s,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function I6(t,e,n){const s={};s.type="file";const i=n.length;for(let o=0;o<i;o++){const l=n[o];s[l.local]=l.xform(s,e[l.server])}return C6(s,t),s}function Hk(t,e,n){const s=Fk(e);return s===null?null:I6(t,s,n)}function A6(t,e,n,s){const i=Fk(e);if(i===null||!Zx(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const g=t.bucket,x=t.fullPath,w="/b/"+l(g)+"/o/"+l(x),E=mf(w,n,s),S=Ok({alt:"media",token:f});return E+S})[0]}function R6(t,e){const n={},s=e.length;for(let i=0;i<s;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Gx{constructor(e,n,s,i){this.url=e,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){if(!t)throw qx()}function L6(t,e){function n(s,i){const o=Hk(t,i,e);return qk(o!==null),o}return n}function D6(t,e){function n(s,i){const o=Hk(t,i,e);return qk(o!==null),A6(o,i,t.host,t._protocol)}return n}function Zk(t){function e(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=G5():i=K5():n.getStatus()===402?i=Z5(t.bucket):n.getStatus()===403?i=Q5(t.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return e}function Kk(t){const e=Zk(t);function n(s,i){let o=e(s,i);return s.getStatus()===404&&(o=q5(t.path)),o.serverResponse=i.serverResponse,o}return n}function M6(t,e,n){const s=e.fullServerUrl(),i=mf(s,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,d=new Gx(i,o,D6(t,n),l);return d.errorHandler=Kk(e),d}function O6(t,e){const n=e.fullServerUrl(),s=mf(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function l(m,f){}const d=new Gx(s,i,l,o);return d.successCodes=[200,204],d.errorHandler=Kk(e),d}function V6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function B6(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=V6(null,e)),s}function U6(t,e,n,s,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function d(){let j="";for(let U=0;U<2;U++)j=j+Math.random().toString().slice(2);return j}const m=d();l["Content-Type"]="multipart/related; boundary="+m;const f=B6(e,s,i),g=R6(f,n),x="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+m+`\r
Content-Type: `+f.contentType+`\r
\r
`,w=`\r
--`+m+"--",E=Hi.getBlob(x,s,w);if(E===null)throw n6();const S={name:f.fullPath},A=mf(o,t.host,t._protocol),C="POST",b=t.maxUploadRetryTime,k=new Gx(A,C,L6(t,n),b);return k.urlParams=S,k.headers=l,k.body=E.uploadData(),k.errorHandler=Zk(e),k}class F6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ya.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ya.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ya.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,i,o){if(this.sent_)throw zc("cannot .send() more than once");if(Na(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $6 extends F6{initXhr(){this.xhr_.responseType="text"}}function Qx(){return new $6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this._service=e,n instanceof ms?this._location=n:this._location=ms.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mo(e,n)}get root(){const e=new ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $k(this._location.path)}get storage(){return this._service}get parent(){const e=E6(this._location.path);if(e===null)return null;const n=new ms(this._location.bucket,e);return new mo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw i6(e)}}function W6(t,e,n){t._throwIfRoot("uploadBytes");const s=U6(t.storage,t._location,Wk(),new Hi(e,!0),n);return t.storage.makeRequestWithTokens(s,Qx).then(i=>({metadata:i,ref:t}))}function H6(t){t._throwIfRoot("getDownloadURL");const e=M6(t.storage,t._location,Wk());return t.storage.makeRequestWithTokens(e,Qx).then(n=>{if(n===null)throw s6();return n})}function q6(t){t._throwIfRoot("deleteObject");const e=O6(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Qx)}function Z6(t,e){const n=S6(t._location.path,e),s=new ms(t._location.bucket,n);return new mo(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t){return/^[A-Za-z]+:\/\//.test(t)}function G6(t,e){return new mo(t,e)}function Gk(t,e){if(t instanceof Yx){const n=t;if(n._bucket==null)throw t6();const s=new mo(n,n._bucket);return e!=null?Gk(s,e):s}else return e!==void 0?Z6(t,e):t}function Q6(t,e){if(e&&K6(e)){if(t instanceof Yx)return G6(t,e);throw $g("To use ref(service, url), the first argument must be a Storage instance.")}else return Gk(t,e)}function k_(t,e){const n=e==null?void 0:e[Dk];return n==null?null:ms.makeFromBucketSpec(n,t)}function Y6(t,e,n,s={}){t.host=`${e}:${n}`;const i=Na(e);i&&(Ky(`https://${t.host}/b`),Gy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=s;o&&(t._overrideAuthToken=typeof o=="string"?o:fN(o,t.app.options.projectId))}class Yx{constructor(e,n,s,i,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=Lk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=W5,this._maxUploadRetryTime=H5,this._requests=new Set,i!=null?this._bucket=ms.makeFromBucketSpec(i,this._host):this._bucket=k_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ms.makeFromBucketSpec(this._url,e):this._bucket=k_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){N_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){N_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(us(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mo(this,e)}_makeRequest(e,n,s,i,o=!0){if(this._deleted)return new a6(Mk());{const l=y6(e,this._appId,s,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const T_="@firebase/storage",E_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="storage";function Yk(t,e,n){return t=lt(t),W6(t,e,n)}function Jk(t){return t=lt(t),H6(t)}function J6(t){return t=lt(t),q6(t)}function Jx(t,e){return t=lt(t),Q6(t,e)}function X6(t=Jy(),e){t=lt(t);const s=Um(t,Qk).getImmediate({identifier:e}),i=dN("storage");return i&&eL(s,...i),s}function eL(t,e,n,s={}){Y6(t,e,n,s)}function tL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Yx(n,s,i,e,xo)}function nL(){ao(new ha(Qk,tL,"PUBLIC").setMultipleInstances(!0)),jr(T_,E_,""),jr(T_,E_,"esm2020")}nL();const sL={apiKey:"AIzaSyCBgcl8j_uJDVMpcNFEQvW-EqnshPiW2n8",authDomain:"tomyhomeapp-b7bf1.firebaseapp.com",projectId:"tomyhomeapp-b7bf1",storageBucket:"tomyhomeapp-b7bf1.firebasestorage.app",messagingSenderId:"1034110443870",appId:"1:1034110443870:web:1aa986bfe6fdf770e62fcf",measurementId:"G-Y5P06F4581"},Xx=yN(sL),kn=PA(Xx),ae=P5(Xx),e0=X6(Xx),rL=({service:t})=>r.jsxs(Ne,{to:`/uslugodawcy/${t.slug}`,className:"block bg-white rounded-2xl shadow-sm p-6 text-center hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-r from-primary/10 to-secondary/10 flex items-center justify-center",children:r.jsx("span",{className:"text-3xl",children:t.icon})}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:t.name}),t.price>0?r.jsxs("p",{className:"text-sm text-gray-500",children:["od ",t.price," z"]}):r.jsx("p",{className:"text-sm text-gray-500",children:"Zobacz wszystkie"})]}),iL=({value:t,label:e,isLoading:n})=>{const[s,i]=N.useState("0"),[o,l]=N.useState(!1),d=N.useRef(null);N.useEffect(()=>{const f=new IntersectionObserver(g=>{g[0].isIntersecting&&!o&&!n&&(l(!0),m())},{threshold:.5});return d.current&&f.observe(d.current),()=>f.disconnect()},[o,n,t]);const m=()=>{const f=parseInt(t.replace(/[^0-9]/g,""))||0,g=t.replace(/[0-9]/g,""),x=1500,w=40,E=f/w;let S=0;const A=setInterval(()=>{S+=E,S>=f?(i(t),clearInterval(A)):i(Math.floor(S).toLocaleString()+g)},x/w)};return r.jsxs("div",{ref:d,className:"text-center",children:[r.jsx("div",{className:"text-4xl lg:text-5xl font-black text-white mb-2",children:n?r.jsx("span",{className:"animate-pulse",children:"..."}):s}),r.jsx("div",{className:"text-white/80",children:e})]})},fp=(t,e="+")=>t===0?`0${e}`:t<10?`${t}${e}`:t<100?`${Math.floor(t/5)*5}${e}`:t<1e3?`${Math.floor(t/50)*50}${e}`:`${(Math.floor(t/500)*500).toLocaleString()}${e}`,aL=t=>{if(t.length===0)return"0%";const e=t.filter(s=>s.rating>=4).length;return`${Math.round(e/t.length*100)}%`},oL=t=>{const e=new Set;return t.forEach(n=>{var s,i;if((s=n.location)!=null&&s.city)e.add(n.location.city.toLowerCase());else if(n.locationString){const o=(i=n.locationString.split(",")[0])==null?void 0:i.trim();o&&e.add(o.toLowerCase())}}),e.size},lL=()=>{const[t,e]=N.useState([{value:"0+",label:"Zadowolonych klientw"},{value:"0+",label:"Specjalistw"},{value:"0",label:"Miast w Polsce"},{value:"0%",label:"Pozytywnych opinii"}]),[n,s]=N.useState(!0);return N.useEffect(()=>{(async()=>{try{const l=(await Ke(Fe(ae,"users"))).docs.filter(b=>b.data().accountType==="client").length,m=(await Ke(Fe(ae,"providers"))).docs.map(b=>b.data()),f=m.length,g=oL(m),w=(await Ke(Fe(ae,"reviews"))).docs.map(b=>b.data()),E=dt(Fe(ae,"bookings"),xt("status","==","completed")),A=(await Ke(E)).size,C=Math.max(l,A);e([{value:fp(C),label:"Zadowolonych klientw"},{value:fp(f),label:"Specjalistw"},{value:g>0?fp(g,""):"1",label:"Miast w Polsce"},{value:aL(w),label:"Pozytywnych opinii"}])}catch(o){console.error("Error fetching stats:",o),e([{value:"0+",label:"Zadowolonych klientw"},{value:"0+",label:"Specjalistw"},{value:"1",label:"Miast w Polsce"},{value:"100%",label:"Pozytywnych opinii"}])}finally{s(!1)}})()},[]),r.jsx("section",{className:"py-20 bg-gradient-to-r from-primary to-secondary",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:t.map((i,o)=>r.jsx(iL,{value:i.value,label:i.label,isLoading:n},o))})})})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(t,e)=>{const n=N.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:d="",children:m,...f},g)=>N.createElement("svg",{ref:g,...cL,width:i,height:i,stroke:s,strokeWidth:l?Number(o)*24/Number(i):o,className:["lucide",`lucide-${uL(t)}`,d].join(" "),...f},[...e.map(([x,w])=>N.createElement(x,w)),...Array.isArray(m)?m:[m]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=ce("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=ce("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=ce("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ce("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=ce("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=ce("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=ce("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=ce("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=ce("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=ce("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=ce("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=ce("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=ce("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=ce("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ce("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=ce("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ce("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=ce("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=ce("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ce("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=ce("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=ce("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=ce("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=ce("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ce("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=ce("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=ce("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=ce("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=ce("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=ce("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=ce("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=ce("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=ce("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),C_=({review:t})=>{const e=["bg-gradient-to-r from-primary to-secondary","bg-gradient-to-r from-pink-500 to-rose-500","bg-gradient-to-r from-purple-500 to-indigo-500","bg-gradient-to-r from-emerald-500 to-teal-500","bg-gradient-to-r from-orange-500 to-amber-500"],n=t.id.split("").reduce((i,o)=>i+o.charCodeAt(0),0)%e.length,s=i=>{const o=new Date(i),d=Math.floor((new Date().getTime()-o.getTime())/(1e3*60*60*24));return d===0?"Dzisiaj":d===1?"Wczoraj":d<7?`${d} dni temu`:d<30?`${Math.floor(d/7)} tyg. temu`:`${Math.floor(d/30)} mies. temu`};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 min-w-[320px] max-w-[380px] flex-shrink-0 mx-3",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-full ${e[n]} flex items-center justify-center text-white font-bold text-lg`,children:t.clientName.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:t.clientName}),r.jsxs("p",{className:"text-sm text-gray-500",children:[t.serviceName,"  ",s(t.createdAt)]})]})]}),r.jsx("div",{className:"flex items-center gap-1 mb-4",children:[1,2,3,4,5].map(i=>r.jsx(yt,{className:`w-4 h-4 ${i<=t.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},i))}),r.jsx("p",{className:"text-gray-600 leading-relaxed line-clamp-4",children:t.comment})]})},BL=()=>{const{showToast:t}=ln(),{isAuthenticated:e,user:n}=Et(),s=xs(),i=N.useRef(null),o=N.useRef(null),[l,d]=N.useState([]),[m,f]=N.useState(!0),[g,x]=N.useState(0),[w,E]=N.useState({clients:"0+",providers:"0+"}),S=[{id:"fryzjer",name:"Fryzjer",icon:"",price:80,slug:"fryzjer"},{id:"tatuaze",name:"Tatuae",icon:"",price:200,slug:"tatuaze"},{id:"paznokcie",name:"Paznokcie",icon:"",price:60,slug:"paznokcie"},{id:"masaz",name:"Masa",icon:"",price:120,slug:"masaz"},{id:"makijaz",name:"Makija",icon:"",price:100,slug:"makijaz"},{id:"twarz",name:"Twarz",icon:"",price:120,slug:"twarz"},{id:"inne",name:"Inne usugi",icon:"",price:0,slug:"inne"}],A=[{step:1,title:"Wybierz usug",description:"Przegldaj kategorie i wybierz specjalist wedug opinii i ceny",gradient:"from-red-400 to-orange-500"},{step:2,title:"Zarezerwuj termin",description:"Wybierz dogodny termin i potwierd rezerwacj online",gradient:"from-primary to-secondary"},{step:3,title:"Specjalista przyjeda",description:"Profesjonalista przyjedzie pod wskazany adres z caym sprztem",gradient:"from-pink-400 to-rose-500"}],C=()=>{var k;(k=i.current)==null||k.scrollIntoView({behavior:"smooth"})},b=k=>{if(k===0)return"0+";if(k<10)return`${k}+`;if(k<100)return`${Math.floor(k/5)*5}+`;if(k<1e3)return`${Math.floor(k/50)*50}+`;const j=Math.floor(k/500)*500;return j>=1e3?`${(j/1e3).toFixed(j%1e3===0?0:1)}K+`:`${j}+`};return N.useEffect(()=>{(async()=>{try{const j=dt(Fe(ae,"reviews"),$x("createdAt","desc"),Ck(20)),F=(await Ke(j)).docs.map(B=>({id:B.id,...B.data()})).filter(B=>B.rating>=4);d(F);const[P,T]=await Promise.all([Ke(Fe(ae,"users")),Ke(Fe(ae,"providers"))]),M=P.docs.filter(B=>B.data().accountType==="client").length,R=T.size;E({clients:b(M),providers:b(R)})}catch(j){console.error("Error fetching data:",j),d([])}finally{f(!1)}})()},[]),N.useEffect(()=>{if(l.length<=1)return;const k=setInterval(()=>{x(j=>{const U=l.length-1;return j>=U?0:j+1})},4e3);return()=>clearInterval(k)},[l.length]),N.useEffect(()=>{o.current&&l.length>0&&o.current.scrollTo({left:g*356,behavior:"smooth"})},[g,l.length]),N.useEffect(()=>{const k=new IntersectionObserver(j=>{j.forEach(U=>{U.isIntersecting&&(U.target.classList.add("opacity-100","translate-y-0"),U.target.classList.remove("opacity-0","translate-y-10"))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return document.querySelectorAll(".fade-in-scroll").forEach(j=>{k.observe(j)}),()=>k.disconnect()},[]),r.jsxs("div",{children:[r.jsx("section",{className:"py-20 lg:py-32 animate-fade-in",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[r.jsxs("div",{className:"animate-slide-in-left",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-accent/10 text-accent px-4 py-2 rounded-full text-sm font-semibold mb-6 animate-bounce-slow",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Nowy w Twojej okolicy"})]}),r.jsxs("h1",{className:"text-4xl lg:text-6xl font-black leading-tight mb-6",children:["Zamw usug i nie tylko",r.jsx("br",{}),r.jsx("span",{className:"gradient-text",children:"Usugi z dojazdem do domu"})]}),r.jsx("p",{className:"text-gray-600 text-lg mb-8 leading-relaxed",children:"Specjalici przyjad pod wskazany adres  fryzjer, manicure, tatuaysta, masa i wicej."}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("button",{onClick:()=>{e?C():s("/auth?mode=register&type=client")},className:"btn btn-cta animate-pulse-slow group",children:[r.jsx("span",{children:"Zarezerwuj usug"}),r.jsx("span",{className:"transition-transform group-hover:translate-x-1",children:""})]}),(!e||(n==null?void 0:n.accountType)==="provider")&&r.jsxs(Ne,{to:e?"/biznes/dodaj-usluge":"/auth?mode=register&type=provider",className:"btn btn-ghost border-2 border-primary text-primary hover:bg-primary hover:text-white group",children:[r.jsx("span",{children:" Dodaj usug"}),r.jsx("span",{className:"transition-transform group-hover:translate-x-1",children:""})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-6 mt-8 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:""})," Bez opat za dojazd"]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:""})," Sprawdzeni specjalici"]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:""})," Gwarancja satysfakcji"]})]})]}),r.jsx("div",{className:"animate-slide-in-right",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-3xl blur-3xl"}),r.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl overflow-hidden",children:[r.jsx("img",{src:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=600&h=400&fit=crop",alt:"Profesjonalna usuga fryzjerska",className:"w-full h-64 lg:h-80 object-cover"}),r.jsxs("div",{className:"p-6 flex gap-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:w.clients}),r.jsx("div",{className:"text-sm text-gray-500",children:"Zadowolonych klientw"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:w.providers}),r.jsx("div",{className:"text-sm text-gray-500",children:"Specjalistw"})]})]})]})]})})]})})}),r.jsx("section",{id:"services",ref:i,className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"USUGI"}),r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Popularne usugi"}),r.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Wybierz spord szerokiej gamy profesjonalnych usug"})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-4",children:S.map(k=>r.jsx(rL,{service:k},k.id))})]})}),r.jsx("section",{id:"how",className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"JAK TO DZIAA"}),r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Proste 3 kroki"}),r.jsx("p",{className:"text-gray-600",children:"Od rezerwacji do realizacji usugi"})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:A.map((k,j)=>r.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",style:{animationDelay:`${j*100}ms`},children:[r.jsxs("div",{className:"text-sm font-bold text-gray-400 mb-4",children:["Krok ",k.step]}),r.jsx("div",{className:`w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-r ${k.gradient} flex items-center justify-center`,children:r.jsx("span",{className:"text-white text-2xl",children:""})}),r.jsx("h3",{className:"text-xl font-bold mb-3",children:k.title}),r.jsx("p",{className:"text-gray-600",children:k.description})]},k.step))})]})}),r.jsx("section",{id:"reviews",className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700 overflow-hidden",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"OPINIE"}),r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Co mwi nasi klienci"}),r.jsx("p",{className:"text-gray-600",children:l.length>0?`Ponad ${Math.max(l.length,10)} zadowolonych uytkownikw`:"Opinie naszych zadowolonych klientw"})]}),m?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):l.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[r.jsx(yt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"Bd pierwszym, ktry wystawi opini!"}),r.jsx("p",{className:"text-gray-400",children:"Skorzystaj z usugi i podziel si swoj opini"})]}):l.length===1?r.jsx("div",{className:"flex justify-center",children:r.jsx(C_,{review:l[0]})}):r.jsxs("div",{className:"relative",children:[r.jsx("div",{ref:o,className:"flex overflow-x-hidden scroll-smooth pb-4 justify-center",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:l.map(k=>r.jsx(C_,{review:k},k.id))}),l.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute left-0 top-0 bottom-4 w-20 bg-gradient-to-r from-white to-transparent pointer-events-none z-10"}),r.jsx("div",{className:"absolute right-0 top-0 bottom-4 w-20 bg-gradient-to-l from-white to-transparent pointer-events-none z-10"})]}),l.length>1&&r.jsx("div",{className:"flex justify-center gap-2 mt-6",children:l.map((k,j)=>r.jsx("button",{onClick:()=>x(j),className:`w-2 h-2 rounded-full transition-all duration-300 ${g%l.length===j?"bg-primary w-6":"bg-gray-300 hover:bg-gray-400"}`},j))})]})]})}),r.jsx(lL,{}),r.jsx("section",{className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-3xl p-12 lg:p-16 text-center text-white relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(255,255,255,0.1),transparent_70%)]"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("span",{className:"inline-block bg-white/20 px-4 py-2 rounded-full text-sm font-bold tracking-wider mb-6",children:" ZACZNIJ JU DZI"}),r.jsx("h2",{className:"text-3xl lg:text-5xl font-black mb-4",children:"Gotowy, by zamwi?"}),r.jsx("p",{className:"text-lg opacity-95 max-w-xl mx-auto mb-8",children:"Docz do tysicy zadowolonych klientw. Pierwsze zamwienie z rabatem 20%!"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[r.jsxs("button",{onClick:()=>{C(),t("Wybierz usug powyej, aby rozpocz rezerwacj","info")},className:"btn bg-white text-gray-900 font-bold shadow-lg hover:shadow-xl hover:-translate-y-1",children:[r.jsx("span",{children:"Zarezerwuj usug"}),r.jsx("span",{children:""})]}),r.jsx("button",{className:"btn border-2 border-white/30 text-white hover:bg-white/10",children:"Dowiedz si wicej"})]}),r.jsxs("div",{className:"flex flex-wrap gap-6 justify-center text-sm opacity-90",children:[r.jsx("span",{children:" Bez ukrytych kosztw"}),r.jsx("span",{children:" Anuluj bezpatnie"}),r.jsx("span",{children:" Patno po usudze"})]})]})]})})})]})},Zg=[{code:"+48",flag:"",name:"Polska",minDigits:9,maxDigits:9},{code:"+49",flag:"",name:"Niemcy",minDigits:10,maxDigits:11},{code:"+33",flag:"",name:"Francja",minDigits:9,maxDigits:9},{code:"+34",flag:"",name:"Hiszpania",minDigits:9,maxDigits:9},{code:"+39",flag:"",name:"Wochy",minDigits:9,maxDigits:10},{code:"+44",flag:"",name:"Wielka Brytania",minDigits:10,maxDigits:10},{code:"+31",flag:"",name:"Holandia",minDigits:9,maxDigits:9},{code:"+32",flag:"",name:"Belgia",minDigits:8,maxDigits:9},{code:"+420",flag:"",name:"Czechy",minDigits:9,maxDigits:9},{code:"+421",flag:"",name:"Sowacja",minDigits:9,maxDigits:9},{code:"+43",flag:"",name:"Austria",minDigits:10,maxDigits:13},{code:"+41",flag:"",name:"Szwajcaria",minDigits:9,maxDigits:9},{code:"+351",flag:"",name:"Portugalia",minDigits:9,maxDigits:9},{code:"+353",flag:"",name:"Irlandia",minDigits:9,maxDigits:9},{code:"+352",flag:"",name:"Luksemburg",minDigits:8,maxDigits:9},{code:"+45",flag:"",name:"Dania",minDigits:8,maxDigits:8},{code:"+46",flag:"",name:"Szwecja",minDigits:9,maxDigits:9},{code:"+47",flag:"",name:"Norwegia",minDigits:8,maxDigits:8},{code:"+358",flag:"",name:"Finlandia",minDigits:9,maxDigits:10},{code:"+354",flag:"",name:"Islandia",minDigits:7,maxDigits:7},{code:"+30",flag:"",name:"Grecja",minDigits:10,maxDigits:10},{code:"+356",flag:"",name:"Malta",minDigits:8,maxDigits:8},{code:"+357",flag:"",name:"Cypr",minDigits:8,maxDigits:8},{code:"+36",flag:"",name:"Wgry",minDigits:9,maxDigits:9},{code:"+40",flag:"",name:"Rumunia",minDigits:9,maxDigits:9},{code:"+359",flag:"",name:"Bugaria",minDigits:9,maxDigits:9},{code:"+385",flag:"",name:"Chorwacja",minDigits:9,maxDigits:9},{code:"+386",flag:"",name:"Sowenia",minDigits:8,maxDigits:8},{code:"+381",flag:"",name:"Serbia",minDigits:9,maxDigits:9},{code:"+382",flag:"",name:"Czarnogra",minDigits:8,maxDigits:8},{code:"+383",flag:"",name:"Kosowo",minDigits:8,maxDigits:8},{code:"+389",flag:"",name:"Macedonia Pn.",minDigits:8,maxDigits:8},{code:"+380",flag:"",name:"Ukraina",minDigits:9,maxDigits:9},{code:"+375",flag:"",name:"Biaoru",minDigits:9,maxDigits:9},{code:"+7",flag:"",name:"Rosja",minDigits:10,maxDigits:10}],i2=t=>Zg.find(e=>e.code===t)||Zg[0],s0=(t,e)=>{const n=i2(t),s=e.replace(/\D/g,"");return s?s.length<n.minDigits?{valid:!1,message:`Numer dla ${n.name} musi mie min. ${n.minDigits} cyfr`}:s.length>n.maxDigits?{valid:!1,message:`Numer dla ${n.name} moe mie max. ${n.maxDigits} cyfr`}:{valid:!0,message:""}:{valid:!1,message:"Numer telefonu jest wymagany"}},r0=({value:t,countryCode:e,onChange:n,className:s="",error:i})=>{const[o,l]=N.useState(!1),[d,m]=N.useState(""),f=N.useRef(null),g=N.useRef(null),x=i2(e);N.useEffect(()=>{const C=b=>{f.current&&!f.current.contains(b.target)&&(l(!1),m(""))};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const w=Zg.filter(C=>C.name.toLowerCase().includes(d.toLowerCase())||C.code.includes(d)),E=C=>{var b;n(t,C.code),l(!1),m(""),(b=g.current)==null||b.focus()},S=C=>{const b=C.target.value.replace(/[^\d\s]/g,"");n(b,e)},A=()=>`${x.minDigits===x.maxDigits?x.minDigits:`${x.minDigits}-${x.maxDigits}`} cyfr`;return r.jsxs("div",{className:`relative ${s}`,ref:f,children:[r.jsxs("div",{className:`flex rounded-xl border-2 ${i?"border-red-300":"border-gray-200"} focus-within:border-primary overflow-hidden`,children:[r.jsxs("button",{type:"button",onClick:()=>l(!o),className:"flex items-center gap-1 px-3 py-3 bg-gray-50 hover:bg-gray-100 border-r border-gray-200 transition-colors min-w-[100px]",children:[r.jsx("span",{className:"text-xl",children:x.flag}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:x.code}),r.jsx(ym,{className:`w-4 h-4 text-gray-500 transition-transform ${o?"rotate-180":""}`})]}),r.jsx("input",{ref:g,type:"tel",value:t,onChange:S,placeholder:A(),maxLength:x.maxDigits+3,className:"flex-1 px-4 py-3 focus:outline-none"})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.name,": ",x.minDigits===x.maxDigits?`${x.minDigits} cyfr`:`${x.minDigits}-${x.maxDigits} cyfr`]}),i&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:i}),o&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-primary/30 rounded-xl shadow-2xl max-h-80 overflow-hidden",children:[r.jsx("div",{className:"p-2 border-b border-gray-100",children:r.jsx("input",{type:"text",value:d,onChange:C=>m(C.target.value),placeholder:"Szukaj kraju...",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-primary",autoFocus:!0})}),r.jsx("div",{className:"overflow-y-auto max-h-60",children:w.map(C=>r.jsxs("button",{type:"button",onClick:()=>E(C),className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-primary/10 transition-colors text-left ${C.code===e?"bg-primary/5":""}`,children:[r.jsx("span",{className:"text-2xl",children:C.flag}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900",children:C.name}),r.jsx("div",{className:"text-xs text-gray-500",children:C.code})]}),C.code===e&&r.jsx(Wt,{className:"w-5 h-5 text-primary"})]},C.code))})]})]})},UL=async(t,e)=>{try{const n=dt(Fe(ae,"users"),xt("phone","==",t));if(!(await Ke(n)).empty)return{isDuplicate:!0,message:"Ten numer telefonu jest ju uywany przez inne konto"};if(e&&e.trim()){const i=dt(Fe(ae,"users"),xt("businessName","==",e.trim()));if(!(await Ke(i)).empty)return{isDuplicate:!0,message:"Ta nazwa salonu jest ju zajta"}}return{isDuplicate:!1,message:""}}catch(n){return console.error("Error checking duplicates:",n),{isDuplicate:!1,message:""}}},FL=()=>{const t=xs(),[e]=Zy(),{isAuthenticated:n}=Et(),{showToast:s}=ln(),[i,o]=N.useState("select"),[l,d]=N.useState({email:"",password:""}),[m,f]=N.useState(!1),[g,x]=N.useState({email:"",username:"",phone:"",phoneCountryCode:"+48",password:"",confirmPassword:"",businessName:"",terms:!1,accountType:"client"}),[w,E]=N.useState(!1),[S,A]=N.useState(!1),[C,b]=N.useState("");N.useEffect(()=>{const D=e.get("mode"),F=e.get("type");D==="login"?o("login"):D==="register"&&(F==="provider"?(o("register-provider"),x(P=>({...P,accountType:"provider"}))):(o("register-client"),x(P=>({...P,accountType:"client"}))))},[e]),N.useEffect(()=>{if(n){const D=e.get("redirect");t(D||"/")}},[n,t,e]);const k=async D=>{D.preventDefault(),b(""),A(!0);try{const F=await jg(kn,l.email,l.password),P=F.user.metadata.creationTime;if((P?new Date(P):new Date(0))>new Date("2026-01-08")&&!F.user.emailVerified){sessionStorage.setItem("temp_password",l.password);const $=l.email;await kn.signOut(),A(!1),window.location.href=`${window.location.origin}${window.location.pathname}#/weryfikacja-email?email=${encodeURIComponent($)}`;return}await new Promise($=>setTimeout($,500)),s("Logowanie pomylne! Witaj z powrotem!","success");const B=e.get("redirect");t(B||"/")}catch(F){console.error("Login error:",F);let P="Nieprawidowy email lub haso";switch(F.code){case"auth/user-not-found":P="Nie znaleziono uytkownika z tym adresem email";break;case"auth/wrong-password":P="Nieprawidowe haso";break;case"auth/invalid-credential":P="Nieprawidowy email lub haso";break;case"auth/too-many-requests":P="Zbyt wiele nieudanych prb. Sprbuj ponownie pniej";break;case"auth/user-disabled":P="To konto zostao zablokowane";break;case"auth/invalid-email":P="Nieprawidowy format adresu email";break}b(P),s("Bd logowania","error")}finally{A(!1)}},j=async D=>{if(D.preventDefault(),b(""),!g.terms){b("Musisz zaakceptowa regulamin!");return}const F=g.username.trim().split(/\s+/);if(F.length<2||F.some(T=>T.length<2)){b("Podaj pene imi i nazwisko (np. Jan Kowalski)");return}const P=s0(g.phoneCountryCode,g.phone);if(!P.valid){b(P.message);return}if(g.password.length<8){b("Haso musi mie co najmniej 8 znakw");return}if(!/[A-Z]/.test(g.password)){b("Haso musi zawiera co najmniej jedn wielk liter");return}if(!/[a-z]/.test(g.password)){b("Haso musi zawiera co najmniej jedn ma liter");return}if(!/[0-9]/.test(g.password)){b("Haso musi zawiera co najmniej jedn cyfr");return}if(g.password!==g.confirmPassword){b("Hasa nie s takie same");return}A(!0);try{const T=g.phone.replace(/\D/g,""),M=`${g.phoneCountryCode} ${T}`,R=await UL(M,g.accountType==="provider"?g.businessName:void 0);if(R.isDuplicate){b(R.message),A(!1);return}const $=(await dI(kn,g.email,g.password)).user;await Ng($,{displayName:g.username}),await _i(Ie(ae,"users",$.uid),{uid:$.uid,username:g.username,email:g.email,phone:M,accountType:g.accountType,businessName:g.businessName||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...g.accountType==="provider"&&{isVerified:!1,rating:0,reviewsCount:0,servicesCount:0}}),await qN($,{url:window.location.origin+"/#/auth?mode=login&verified=true",handleCodeInApp:!1}),sessionStorage.setItem("temp_password",g.password);const I=g.email;await kn.signOut(),s("Konto utworzone! Sprawd email.","success"),window.location.href=`${window.location.origin}${window.location.pathname}#/weryfikacja-email?email=${encodeURIComponent(I)}`}catch(T){console.error("Registration error:",T);let M="Bd podczas rejestracji";switch(T.code){case"auth/email-already-in-use":M="Ten adres email jest ju zajty";break;case"auth/invalid-email":M="Nieprawidowy format adresu email";break;case"auth/weak-password":M="Haso jest zbyt sabe";break;case"auth/operation-not-allowed":M="Rejestracja jest tymczasowo niedostpna";break}b(M),s("Bd rejestracji","error")}finally{A(!1)}};if(i==="select")return r.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-lg w-full",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[r.jsx("div",{className:"text-5xl",children:""}),r.jsx("div",{className:"text-5xl",children:""})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Witaj w ToMyHomeApp"}),r.jsx("p",{className:"text-gray-600",children:"Znajd specjalistw beauty lub oferuj swoje usugi"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsx("button",{onClick:()=>o("login"),className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all mb-6",children:"ZALOGUJ SI"}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Nie masz konta? Zarejestruj si jako"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{onClick:()=>{o("register-client"),x(D=>({...D,accountType:"client"}))},className:"w-full py-4 border-2 border-primary text-primary rounded-xl font-bold text-lg hover:bg-primary hover:text-white transition-all flex items-center justify-center gap-3",children:[r.jsx(rs,{className:"w-6 h-6"}),"DLA KLIENTA"]}),r.jsx("p",{className:"text-center text-sm text-gray-500",children:"Szukasz fryzjera, kosmetyczki lub masaysty?"}),r.jsxs("button",{onClick:()=>{o("register-provider"),x(D=>({...D,accountType:"provider"}))},className:"w-full py-4 border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold text-lg hover:bg-emerald-500 hover:text-white transition-all flex items-center justify-center gap-3",children:[r.jsx(wa,{className:"w-6 h-6"}),"DLA USUGODAWCY"]}),r.jsx("p",{className:"text-center text-sm text-gray-500",children:"Oferujesz usugi beauty i chcesz zdobywa klientw?"})]})]})]})});if(i==="login")return r.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("button",{onClick:()=>o("select"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[r.jsx(Ml,{className:"w-5 h-5"}),"Wr"]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zaloguj si"}),r.jsx("p",{className:"text-gray-600",children:"Wpisz swoje dane logowania"})]}),C&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm flex items-start gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:C})]}),r.jsxs("form",{onSubmit:k,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:l.email,onChange:D=>d({...l,email:D.target.value}),placeholder:"twoj@email.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haso"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:m?"text":"password",value:l.password,onChange:D=>d({...l,password:D.target.value}),placeholder:"",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),r.jsx("button",{type:"button",onClick:()=>f(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?r.jsx(Ja,{className:"w-5 h-5"}):r.jsx(ss,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(Ne,{to:"/reset-hasla",className:"text-sm text-primary hover:underline",children:"Zapomniae hasa?"})}),r.jsx("button",{type:"submit",disabled:S,className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:S?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin mr-2"}),"Logowanie..."]}):"ZALOGUJ SI"})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-gray-600",children:["Nie masz konta?"," ",r.jsx("button",{onClick:()=>o("select"),className:"text-primary font-semibold hover:underline",children:"Zarejestruj si"})]})})]})]})});const U=i==="register-provider";return r.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("button",{onClick:()=>o("select"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[r.jsx(Ml,{className:"w-5 h-5"}),"Wr"]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${U?"bg-emerald-100":"bg-primary/10"}`,children:U?r.jsx(wa,{className:"w-8 h-8 text-emerald-600"}):r.jsx(rs,{className:"w-8 h-8 text-primary"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:U?"Rejestracja usugodawcy":"Rejestracja klienta"}),r.jsx("p",{className:"text-gray-600",children:U?"Docz i zacznij zdobywa klientw":"Za konto i rezerwuj usugi"})]}),r.jsxs("div",{className:`mb-6 p-4 rounded-xl ${U?"bg-emerald-50":"bg-primary/5"}`,children:[r.jsx("p",{className:"font-semibold mb-2 text-sm",children:U?" Korzyci dla usugodawcy:":" Korzyci dla klienta:"}),r.jsx("ul",{className:"text-sm space-y-1",children:U?r.jsxs(r.Fragment,{children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-emerald-500"})," Wasny profil i portfolio"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-emerald-500"})," Zarzdzanie rezerwacjami online"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-emerald-500"})," Dostp do nowych klientw"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-primary"})," atwe rezerwacje online"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-primary"})," Historia wizyt i ulubieni"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-primary"})," Powiadomienia i przypomnienia"]})]})})]}),C&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm flex items-start gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:C})]}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[U&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa firmy / salonu"}),r.jsx("input",{type:"text",value:g.businessName,onChange:D=>x({...g,businessName:D.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),r.jsx("input",{type:"text",value:g.username,onChange:D=>x({...g,username:D.target.value}),placeholder:"Jan Kowalski",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:g.email,onChange:D=>x({...g,email:D.target.value}),placeholder:"twoj@email.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numer telefonu"}),r.jsx(r0,{value:g.phone,countryCode:g.phoneCountryCode,onChange:(D,F)=>x({...g,phone:D,phoneCountryCode:F})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haso"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:w?"text":"password",value:g.password,onChange:D=>x({...g,password:D.target.value}),placeholder:"Wprowad haso",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),r.jsx("button",{type:"button",onClick:()=>E(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:w?r.jsx(Ja,{className:"w-5 h-5"}):r.jsx(ss,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[r.jsxs("p",{className:g.password.length>=8?"text-green-600":"",children:[g.password.length>=8?"":""," Minimum 8 znakw"]}),r.jsxs("p",{className:/[A-Z]/.test(g.password)?"text-green-600":"",children:[/[A-Z]/.test(g.password)?"":""," Co najmniej jedna wielka litera (A-Z)"]}),r.jsxs("p",{className:/[a-z]/.test(g.password)?"text-green-600":"",children:[/[a-z]/.test(g.password)?"":""," Co najmniej jedna maa litera (a-z)"]}),r.jsxs("p",{className:/[0-9]/.test(g.password)?"text-green-600":"",children:[/[0-9]/.test(g.password)?"":""," Co najmniej jedna cyfra (0-9)"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Powtrz haso"}),r.jsx("input",{type:"password",value:g.confirmPassword,onChange:D=>x({...g,confirmPassword:D.target.value}),placeholder:"Powtrz haso",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),g.confirmPassword&&r.jsx("p",{className:`text-xs mt-1 ${g.password===g.confirmPassword?"text-green-600":"text-red-500"}`,children:g.password===g.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",id:"terms",checked:g.terms,onChange:D=>x({...g,terms:D.target.checked}),className:"mt-1 w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary"}),r.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600",children:["Akceptuj"," ",r.jsx(Ne,{to:"/regulamin",className:"text-primary hover:underline",children:"Regulamin"})," ","oraz"," ",r.jsx(Ne,{to:"/prywatnosc",className:"text-primary hover:underline",children:"Polityk Prywatnoci"})]})]}),r.jsx("button",{type:"submit",disabled:S,className:`w-full py-4 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${U?"bg-gradient-to-r from-emerald-500 to-teal-600":"bg-gradient-to-r from-primary to-secondary"}`,children:S?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin mr-2"}),"Rejestracja..."]}):"ZAREJESTRUJ SI"})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-gray-600",children:["Masz ju konto?"," ",r.jsx("button",{onClick:()=>o("login"),className:"text-primary font-semibold hover:underline",children:"Zaloguj si"})]})})]})]})})},$L=()=>{const t=xs(),[e]=Zy(),{showToast:n}=ln(),s=e.get("email")||"",[i,o]=N.useState(!1),[l,d]=N.useState(!1),[m,f]=N.useState(0);N.useEffect(()=>{if(m>0){const w=setTimeout(()=>f(m-1),1e3);return()=>clearTimeout(w)}},[m]);const g=async()=>{if(m>0)return;const w=sessionStorage.getItem("temp_password");if(!w){n("Zaloguj si ponownie aby wysa email weryfikacyjny","error"),t("/auth?mode=login");return}o(!0);try{const E=await jg(kn,s,w);await qN(E.user,{url:window.location.origin+"/#/auth?mode=login&verified=true",handleCodeInApp:!1}),await kn.signOut(),n("Email weryfikacyjny wysany ponownie!","success"),f(60)}catch(E){console.error("Resend error:",E),E.code==="auth/too-many-requests"?(n("Zbyt wiele prb. Poczekaj chwil.","error"),f(120)):n("Nie udao si wysa emaila","error")}finally{o(!1)}},x=async()=>{const w=sessionStorage.getItem("temp_password");if(!w){n("Zaloguj si ponownie","info"),t("/auth?mode=login");return}d(!0);try{const E=await jg(kn,s,w);await E.user.reload(),E.user.emailVerified?(sessionStorage.removeItem("temp_password"),n("Email zweryfikowany! Witamy!","success"),t("/")):(await kn.signOut(),n("Email jeszcze nie zosta zweryfikowany. Sprawd skrzynk.","info"))}catch(E){console.error("Check verification error:",E),n("Bd sprawdzania. Sprbuj si zalogowa.","error"),t("/auth?mode=login")}finally{d(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-teal-50 flex items-center justify-center px-4",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("button",{onClick:()=>t("/auth?mode=login"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-8 transition-colors",children:[r.jsx(Ml,{className:"w-5 h-5"}),"Powrt do logowania"]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Rr,{className:"w-10 h-10 text-emerald-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sprawd swoj skrzynk"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Wysalimy link weryfikacyjny na adres:"}),r.jsx("div",{className:"bg-gray-50 rounded-xl py-3 px-4 mb-6",children:r.jsx("p",{className:"font-semibold text-gray-900",children:s})}),r.jsxs("div",{className:"text-left bg-emerald-50 rounded-xl p-4 mb-6",children:[r.jsx("p",{className:"text-sm text-emerald-800 mb-2 font-medium",children:"Co dalej?"}),r.jsxs("ol",{className:"text-sm text-emerald-700 space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Otwrz skrzynk email"}),r.jsx("li",{children:"Znajd wiadomo od ToMyHomeApp"}),r.jsx("li",{children:"Kliknij link weryfikacyjny"}),r.jsx("li",{children:'Wr tutaj i kliknij "Sprawd weryfikacj"'})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:x,disabled:l,className:"w-full py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:l?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Sprawdzanie..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"w-5 h-5"}),"Sprawd weryfikacj"]})}),r.jsx("button",{onClick:g,disabled:i||m>0,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Wysyanie..."]}):m>0?r.jsxs(r.Fragment,{children:[r.jsx(xm,{className:"w-5 h-5"}),"Wylij ponownie (",m,"s)"]}):r.jsxs(r.Fragment,{children:[r.jsx(xm,{className:"w-5 h-5"}),"Wylij ponownie"]})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"Nie widzisz maila? Sprawd folder SPAM lub poczekaj chwil."})]})]})})},WL=async t=>{try{const e=Ie(ae,"users",t),n=await Rs(e);return n.exists()?{uid:n.id,...n.data()}:null}catch(e){throw console.error("Error getting user profile:",e),e}},a2=async(t,e)=>{try{const n=Ie(ae,"users",t),s={};Object.entries(e).forEach(([i,o])=>{o!==void 0&&(s[i]=o)}),Object.keys(s).length>0&&await zt(n,{...s,updatedAt:U5()}),e.username&&kn.currentUser&&await Ng(kn.currentUser,{displayName:e.username}),e.avatar&&kn.currentUser&&await Ng(kn.currentUser,{photoURL:e.avatar})}catch(n){throw console.error("Error updating user profile:",n),n}},HL=async(t,e)=>{try{if(!e.type.startsWith("image/"))throw new Error("Plik musi by obrazem");if(e.size>5*1024*1024)throw new Error("Plik jest za duy (max 5MB)");const n=e.name.split(".").pop(),s=`avatars/${t}_${Date.now()}.${n}`,i=Jx(e0,s),o=await Yk(i,e),l=await Jk(o.ref);return await a2(t,{avatar:l}),l}catch(n){throw console.error("Error uploading avatar:",n),n}},qL=async(t,e)=>{try{const n=kn.currentUser;if(!n||!n.email)throw new Error("Brak zalogowanego uytkownika");if(e.length<8)throw new Error("Haso musi mie co najmniej 8 znakw");if(!/[A-Z]/.test(e))throw new Error("Haso musi zawiera wielk liter");if(!/[a-z]/.test(e))throw new Error("Haso musi zawiera ma liter");if(!/[0-9]/.test(e))throw new Error("Haso musi zawiera cyfr");const s=ka.credential(n.email,t);await WN(n,s),await mI(n,e)}catch(n){throw console.error("Error changing password:",n),n.code==="auth/wrong-password"?new Error("Nieprawidowe obecne haso"):n.code==="auth/weak-password"?new Error("Nowe haso jest za sabe"):n.code==="auth/requires-recent-login"?new Error("Zaloguj si ponownie i sprbuj jeszcze raz"):n}},ZL=async t=>{try{const e=kn.currentUser;if(!e||!e.email)throw new Error("Brak zalogowanego uytkownika");const n=ka.credential(e.email,t);await WN(e,n);try{const s=await WL(e.uid);if(s!=null&&s.avatar&&s.avatar.includes("firebase")){const i=Jx(e0,s.avatar);await J6(i)}}catch{console.log("Avatar deletion skipped")}await Yl(Ie(ae,"users",e.uid)),await wI(e)}catch(e){throw console.error("Error deleting account:",e),e.code==="auth/wrong-password"?new Error("Nieprawidowe haso"):e.code==="auth/requires-recent-login"?new Error("Zaloguj si ponownie i sprbuj jeszcze raz"):e}},Xd="favorites",wm={async add(t,e){const n=`${t}_${e.id}`;await _i(Ie(ae,Xd,n),{userId:t,providerId:e.id,providerName:e.name,providerImage:e.image,providerProfession:e.profession,addedAt:new Date().toISOString()})},async remove(t,e){const n=`${t}_${e}`;await Yl(Ie(ae,Xd,n))},async isFavorite(t,e){const n=`${t}_${e}`,s=Ie(ae,Xd,n);return(await Rs(s)).exists()},async getByUser(t){const e=dt(Fe(ae,Xd),xt("userId","==",t));return(await Ke(e)).docs.map(s=>({id:s.id,...s.data()}))},async toggle(t,e){return await this.isFavorite(t,e.id)?(await this.remove(t,e.id),!1):(await this.add(t,e),!0)}},Li="notifications",KL=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),dn={async create(t){const e=KL(),n=new Date().toISOString(),s={id:e,userId:t.userId,type:t.type,title:t.title,message:t.message,data:t.data,read:!1,createdAt:n};try{return await _i(Ie(ae,Li,e),s),console.log("Notification created:",s),window.dispatchEvent(new CustomEvent("newNotification",{detail:s})),s}catch(i){throw console.error("Notification create error:",i),i}},async getByUser(t){try{const e=dt(Fe(ae,Li),xt("userId","==",t));return(await Ke(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Notification getByUser error:",e),[]}},async getUnreadByUser(t){try{const e=dt(Fe(ae,Li),xt("userId","==",t));return(await Ke(e)).docs.map(i=>i.data()).filter(i=>!i.read).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Notification getUnreadByUser error:",e),[]}},async countUnread(t){try{return(await this.getUnreadByUser(t)).length}catch(e){return console.error("Notification countUnread error:",e),0}},async markAsRead(t){try{await zt(Ie(ae,Li,t),{read:!0})}catch(e){throw console.error("Notification markAsRead error:",e),e}},async markAllAsRead(t){try{const e=await this.getUnreadByUser(t);if(e.length===0)return;const n=b_(ae);e.forEach(s=>{const i=Ie(ae,Li,s.id);n.update(i,{read:!0})}),await n.commit()}catch(e){throw console.error("Notification markAllAsRead error:",e),e}},async delete(t){try{await Yl(Ie(ae,Li,t))}catch(e){throw console.error("Notification delete error:",e),e}},async deleteAllByUser(t){try{const e=await this.getByUser(t);if(e.length===0)return;const n=b_(ae);e.forEach(s=>{const i=Ie(ae,Li,s.id);n.delete(i)}),await n.commit()}catch(e){throw console.error("Notification deleteAllByUser error:",e),e}},subscribe(t,e){const n=dt(Fe(ae,Li),xt("userId","==",t));return _l(n,s=>{const i=s.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(i)})},getIcon(t){return{booking_request:"",booking_confirmed:"",booking_cancelled:"",booking_completed:"",booking_reminder:"",new_message:"",new_review:"",system:""}[t]||""},getColor(t){return{booking_request:"bg-blue-100 text-blue-600",booking_confirmed:"bg-green-100 text-green-600",booking_cancelled:"bg-red-100 text-red-600",booking_completed:"bg-purple-100 text-purple-600",booking_reminder:"bg-yellow-100 text-yellow-600",new_message:"bg-indigo-100 text-indigo-600",new_review:"bg-orange-100 text-orange-600",system:"bg-gray-100 text-gray-600"}[t]||"bg-gray-100 text-gray-600"}},Ks="bookings",GL=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),On={async create(t){if(!await this.isTimeSlotAvailable(t.providerId,t.date,t.time))throw new Error("SLOT_TAKEN");const n=GL(),s=new Date().toISOString(),i={id:n,...t,status:"pending",createdAt:s,updatedAt:s};try{return await _i(Ie(ae,Ks,n),i),console.log("Booking created:",i),await dn.create({userId:t.providerId,type:"booking_request",title:"Nowa proba o rezerwacj",message:`${t.clientName} chce zarezerwowa ${t.serviceName} na ${t.date} o ${t.time}`,data:{bookingId:n}}),i}catch(o){throw console.error("Booking create error:",o),o}},async getById(t){try{const e=Ie(ae,Ks,t),n=await Rs(e);return n.exists()?n.data():null}catch(e){return console.error("Booking getById error:",e),null}},async getByClient(t){try{const e=dt(Fe(ae,Ks),xt("clientId","==",t));return(await Ke(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Booking getByClient error:",e),[]}},async getByProvider(t){try{const e=dt(Fe(ae,Ks),xt("providerId","==",t));return(await Ke(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Booking getByProvider error:",e),[]}},async getByProviderAndDate(t,e){try{const n=dt(Fe(ae,Ks),xt("providerId","==",t),xt("date","==",e));return(await Ke(n)).docs.map(i=>i.data())}catch(n){return console.error("Booking getByProviderAndDate error:",n),[]}},async confirm(t){try{const e=await this.getById(t);if(!e)return null;const n=new Date().toISOString(),s={status:"confirmed",updatedAt:n,confirmedAt:n};return await zt(Ie(ae,Ks,t),s),await dn.create({userId:e.clientId,type:"booking_confirmed",title:"Rezerwacja potwierdzona! ",message:`${e.providerName} potwierdzi Twoj rezerwacj na ${e.date} o ${e.time}`,data:{bookingId:t}}),{...e,...s}}catch(e){throw console.error("Booking confirm error:",e),e}},async cancel(t,e){try{const n=await this.getById(t);if(!n)return null;const s=new Date().toISOString(),i={status:"cancelled",updatedAt:s,cancelledAt:s};await zt(Ie(ae,Ks,t),i);const o=e==="client"?n.providerId:n.clientId,l=e==="client"?n.clientName:n.providerName;return await dn.create({userId:o,type:"booking_cancelled",title:"Rezerwacja anulowana ",message:`${l} anulowa rezerwacj na ${n.date} o ${n.time}`,data:{bookingId:t}}),{...n,...i}}catch(n){throw console.error("Booking cancel error:",n),n}},async complete(t){try{const e=await this.getById(t);if(!e)return null;const n=new Date().toISOString(),s={status:"completed",updatedAt:n,completedAt:n};return await zt(Ie(ae,Ks,t),s),await dn.create({userId:e.clientId,type:"booking_completed",title:"Usuga zakoczona! ",message:`Jak oceniasz usug ${e.serviceName} u ${e.providerName}? Zostaw opini!`,data:{bookingId:t,providerId:e.providerId}}),{...e,...s}}catch(e){throw console.error("Booking complete error:",e),e}},timeToMinutes(t){const[e,n]=t.split(":").map(Number);return e*60+n},minutesToTime(t){const e=Math.floor(t/60),n=t%60;return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}`},parseDuration(t){const e=t.match(/(\d+)/);return e?parseInt(e[1]):30},async isTimeSlotAvailable(t,e,n,s){try{const o=(await this.getByProviderAndDate(t,e)).filter(f=>f.status==="pending"||f.status==="confirmed"),l=this.timeToMinutes(n),m=l+(s||30);for(const f of o){const g=this.timeToMinutes(f.time),x=this.parseDuration(f.serviceDuration),w=g+x;if(l<w&&m>g)return!1}return!0}catch(i){return console.error("isTimeSlotAvailable error:",i),!1}},async getBookedSlots(t,e){try{const s=(await this.getByProviderAndDate(t,e)).filter(o=>o.status==="pending"||o.status==="confirmed"),i=new Set;for(const o of s){const l=this.timeToMinutes(o.time),d=this.parseDuration(o.serviceDuration),m=l+d;for(let f=l;f<m;f+=30)i.add(this.minutesToTime(f))}return Array.from(i)}catch(n){return console.error("getBookedSlots error:",n),[]}},async getProviderStats(t){try{const e=await this.getByProvider(t),n=new Date,s=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,i=e.filter(f=>f.status==="completed"),o=e.filter(f=>f.status==="pending"),l=e.filter(f=>f.status==="cancelled"),d=e.filter(f=>f.date.startsWith(s)),m=d.filter(f=>f.status==="completed");return{totalBookings:e.length,completedBookings:i.length,pendingBookings:o.length,cancelledBookings:l.length,totalRevenue:i.reduce((f,g)=>f+g.servicePrice,0),thisMonthRevenue:m.reduce((f,g)=>f+g.servicePrice,0),thisMonthBookings:d.length}}catch(e){return console.error("getProviderStats error:",e),{totalBookings:0,completedBookings:0,pendingBookings:0,cancelledBookings:0,totalRevenue:0,thisMonthRevenue:0,thisMonthBookings:0}}},subscribeToProviderBookings(t,e){const n=dt(Fe(ae,Ks),xt("providerId","==",t));return _l(n,s=>{const i=s.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(i)})},async updateStatus(t,e){try{const n=Ie(ae,Ks,t);await zt(n,{status:e,updatedAt:new Date().toISOString()}),console.log(`Booking ${t} status updated to ${e}`)}catch(n){throw console.error("Error updating booking status:",n),n}},subscribeToClientBookings(t,e){const n=dt(Fe(ae,Ks),xt("clientId","==",t));return _l(n,s=>{const i=s.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(i)})}},Xr="reviews",QL=()=>`review_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Is={async create(t){const e=QL(),n=new Date().toISOString(),s={id:e,bookingId:t.bookingId,providerId:t.providerId,clientId:t.clientId,clientName:t.clientName,clientAvatar:t.clientAvatar||"",rating:t.rating,comment:t.comment,serviceName:t.serviceName,createdAt:n};return await _i(Ie(ae,Xr,e),s),await this.updateProviderRating(t.providerId),console.log("Review created:",e),s},async getById(t){const e=Ie(ae,Xr,t),n=await Rs(e);return n.exists()?n.data():null},async getByProvider(t){try{const e=dt(Fe(ae,Xr),xt("providerId","==",t),$x("createdAt","desc"));return(await Ke(e)).docs.map(s=>s.data())}catch(e){console.error("Review getByProvider error:",e);const n=dt(Fe(ae,Xr),xt("providerId","==",t));return(await Ke(n)).docs.map(o=>o.data()).sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime())}},async getByClient(t){const e=dt(Fe(ae,Xr),xt("clientId","==",t));return(await Ke(e)).docs.map(s=>s.data())},async hasReviewForBooking(t){const e=dt(Fe(ae,Xr),xt("bookingId","==",t));return!(await Ke(e)).empty},async updateProviderRating(t){const e=await this.getByProvider(t);if(e.length===0)return;const n=e.reduce((o,l)=>o+l.rating,0),s=Math.round(n/e.length*10)/10,i=Ie(ae,"providers",t);await zt(i,{rating:s,reviewsCount:e.length}),console.log(`Provider ${t} rating updated: ${s} (${e.length} reviews)`)},async addProviderResponse(t,e){const n=Ie(ae,Xr,t);await zt(n,{providerResponse:e,providerResponseAt:new Date().toISOString()})},async getProviderStats(t){const e=await this.getByProvider(t);if(e.length===0)return{average:0,count:0,distribution:[{stars:5,count:0},{stars:4,count:0},{stars:3,count:0},{stars:2,count:0},{stars:1,count:0}]};const n=e.reduce((o,l)=>o+l.rating,0),s=Math.round(n/e.length*10)/10,i=[5,4,3,2,1].map(o=>({stars:o,count:e.filter(l=>l.rating===o).length}));return{average:s,count:e.length,distribution:i}},async reportReview(t){const e=`report_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=new Date().toISOString(),s={id:e,type:"review",reviewId:t.reviewId,reporterId:t.reporterId,reporterName:t.reporterName,reason:t.reason,reviewContent:t.reviewContent,reviewAuthor:t.reviewAuthor,providerId:t.providerId,providerName:t.providerName,status:"pending",createdAt:n};await _i(Ie(ae,"reports",e),s),console.log("Review reported:",e)},async getReports(){try{return(await Ke(Fe(ae,"reports"))).docs.map(n=>n.data()).sort((n,s)=>new Date(s.createdAt).getTime()-new Date(n.createdAt).getTime())}catch(t){return console.error("getReports error:",t),[]}},async updateReportStatus(t,e,n){const s=Ie(ae,"reports",t);await zt(s,{status:e,adminNote:n||"",reviewedAt:new Date().toISOString()})},async deleteReview(t){const e=await Rs(Ie(ae,Xr,t));if(e.exists()){const n=e.data();await zt(Ie(ae,Xr,t),{deleted:!0,deletedAt:new Date().toISOString()}),await this.updateProviderRating(n.providerId)}}},YL=()=>{var Jt;const t=xs(),{user:e,userData:n,isAuthenticated:s,logout:i}=Et(),{showToast:o}=ln(),[l,d]=N.useState("dashboard"),[m,f]=N.useState(new Date),[g,x]=N.useState([]),[w,E]=N.useState(!1),[S,A]=N.useState([]),[C,b]=N.useState(!1),[k,j]=N.useState(!1),[U,D]=N.useState(null),[F,P]=N.useState(5),[T,M]=N.useState(""),[R,B]=N.useState(!1),[$,I]=N.useState(new Set);N.useEffect(()=>{s||t("/auth")},[s,t]),N.useEffect(()=>{(async()=>{if(e!=null&&e.id){b(!0);try{const Ue=await On.getByClient(String(e.id));A(Ue)}catch(Ue){console.error("Error loading bookings:",Ue)}finally{b(!1)}}})()},[e==null?void 0:e.id]),N.useEffect(()=>{(async()=>{if(e!=null&&e.id){E(!0);try{const Ue=await wm.getByUser(String(e.id));x(Ue)}catch(Ue){console.error("Error loading favorites:",Ue)}finally{E(!1)}}})()},[e==null?void 0:e.id]),N.useEffect(()=>{(async()=>{if(!S.length)return;const Ue=new Set;for(const $e of S)($e.status==="completed"||$e.status!=="cancelled"&&new Date($e.date)<new Date)&&await Is.hasReviewForBooking($e.id)&&Ue.add($e.id);I(Ue)})()},[S]);const he=ve=>{D(ve),P(5),M(""),j(!0)},de=async()=>{if(!(!U||!e)){if(T.trim().length<10){o("Opinia musi mie minimum 10 znakw","error");return}B(!0);try{await Is.create({bookingId:U.id,providerId:U.providerId,clientId:e.id,clientName:e.username||"Klient",rating:F,comment:T.trim(),serviceName:U.serviceName}),I(ve=>new Set([...ve,U.id])),j(!1),o("Dzikujemy za opini! ","success")}catch(ve){console.error("Error submitting review:",ve),o("Bd podczas wysyania opinii","error")}finally{B(!1)}}},we=()=>{const ve=new Date;return ve.setHours(0,0,0,0),S.filter(Ue=>new Date(Ue.date)>=ve&&Ue.status!=="cancelled").sort((Ue,$e)=>new Date(Ue.date).getTime()-new Date($e.date).getTime())},te=()=>{const ve=new Set;return S.forEach(Ue=>{const $e=new Date(Ue.date);$e.getMonth()===m.getMonth()&&$e.getFullYear()===m.getFullYear()&&Ue.status!=="cancelled"&&ve.add($e.getDate())}),ve},W=async ve=>{if(confirm("Czy na pewno chcesz anulowa t wizyt?"))try{await On.updateStatus(ve,"cancelled"),A(Ue=>Ue.map($e=>$e.id===ve?{...$e,status:"cancelled"}:$e)),o("Wizyta zostaa anulowana","success")}catch{o("Bd podczas anulowania","error")}},Q=async ve=>{if(e!=null&&e.id)try{await wm.remove(String(e.id),ve),x(Ue=>Ue.filter($e=>$e.providerId!==ve)),o("Usunito z ulubionych","success")}catch{o("Bd podczas usuwania","error")}},O=[{id:"dashboard",label:"Panel Gwny",icon:bL},{id:"referral",label:"Pole znajomym",icon:wL},{id:"favorites",label:"Ulubione",icon:Xa},{id:"visits",label:"Moje wizyty",icon:Yt},{id:"settings",label:"Ustawienia",icon:ff},{id:"help",label:"Pomoc",icon:bl}],q=async()=>{if(window.confirm("Czy na pewno chcesz si wylogowa?"))try{await i(),o("Wylogowano pomylnie","success"),t("/")}catch{o("Bd wylogowania","error")}},ne=ve=>new Date(ve.getFullYear(),ve.getMonth()+1,0).getDate(),Ee=ve=>{const Ue=new Date(ve.getFullYear(),ve.getMonth(),1).getDay();return Ue===0?6:Ue-1},se=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],le=()=>{const ve=ne(m),Ue=Ee(m),$e=new Date,et=["Pn","Wt","r","Cz","Pt","Sb","Nd"],je=te();return r.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-100",children:[r.jsx("button",{onClick:()=>f(new Date(m.getFullYear(),m.getMonth()-1)),className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:r.jsx(t0,{className:"w-4 h-4"})}),r.jsxs("div",{className:"font-bold text-lg",children:[se[m.getMonth()]," ",m.getFullYear()]}),r.jsx("button",{onClick:()=>f(new Date(m.getFullYear(),m.getMonth()+1)),className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:r.jsx(Ol,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-7 gap-2 text-center",children:[et.map(gt=>r.jsx("div",{className:"font-semibold text-gray-500 text-sm py-2",children:gt},gt)),[...Array(Ue)].map((gt,J)=>r.jsx("div",{},`empty-${J}`)),[...Array(ve)].map((gt,J)=>{const xe=J+1,Ze=xe===$e.getDate()&&m.getMonth()===$e.getMonth()&&m.getFullYear()===$e.getFullYear(),Re=je.has(xe);return r.jsxs("div",{className:`py-3 rounded-lg cursor-pointer transition-all hover:scale-110 relative ${Ze?"bg-primary text-white font-bold":Re?"bg-emerald-100 text-emerald-700 font-semibold":"bg-gray-50 hover:bg-gray-100"}`,children:[xe,Re&&!Ze&&r.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-emerald-500 rounded-full"})]},xe)})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex items-center gap-4 text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-primary rounded"}),r.jsx("span",{children:"Dzi"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-emerald-100 rounded"}),r.jsx("span",{children:"Masz wizyt"})]})]})]})},Se=()=>{switch(l){case"dashboard":const ve=we().length,Ue=g.length;return r.jsxs("div",{children:[r.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 mb-8",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Witaj z powrotem, ",(e==null?void 0:e.username)||(n==null?void 0:n.username),"!"]}),r.jsx("p",{className:"opacity-90",children:"Mio Ci widzie. Oto Twj panel uytkownika gdzie moesz zarzdza swoim kontem i rezerwacjami."})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card p-6 text-center cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>d("visits"),children:[r.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:ve}),r.jsx("div",{className:"text-gray-500",children:"Nadchodzcych wizyt"})]}),r.jsxs("div",{className:"card p-6 text-center cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>d("favorites"),children:[r.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:Ue}),r.jsx("div",{className:"text-gray-500",children:"Ulubionych miejsc"})]})]})]});case"referral":return r.jsxs("div",{children:[r.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Zapraszaj i zarabiaj!"}),r.jsxs("p",{className:"text-lg opacity-95",children:["Kady polecony znajomy to ",r.jsx("strong",{children:"50 z"})," na Twoje konto!"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-8",children:[r.jsx("h3",{className:"font-bold text-lg mb-4",children:"Twj unikalny link:"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("input",{type:"text",readOnly:!0,value:`https://tomyhomeapp.pl/ref/${(e==null?void 0:e.id)||"user"}`,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl bg-white"}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`https://tomyhomeapp.pl/ref/${(e==null?void 0:e.id)||"user"}`),o("Link skopiowany!","success")},className:"btn btn-primary",children:"Kopiuj"})]})]})]});case"favorites":return r.jsx("div",{children:w?r.jsxs("div",{className:"text-center py-16",children:[r.jsx(Ve,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"adowanie ulubionych..."})]}):g.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx(Xa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Nie masz jeszcze ulubionych miejsc."}),r.jsx(Ne,{to:"/uslugodawcy",className:"inline-block px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors",children:"Przegldaj usugodawcw"})]}):r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(je=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100 hover:shadow-md transition-shadow",children:[r.jsx(Ne,{to:`/uslugodawcy/profil/${je.providerId}`,children:r.jsxs("div",{className:"relative h-40",children:[r.jsx("img",{src:je.providerImage||"https://via.placeholder.com/300x200",alt:je.providerName,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),r.jsxs("div",{className:"absolute bottom-3 left-3 text-white",children:[r.jsx("h3",{className:"font-bold",children:je.providerName}),r.jsx("p",{className:"text-sm text-white/80",children:je.providerProfession})]})]})}),r.jsxs("div",{className:"p-3 flex items-center justify-between",children:[r.jsx(Ne,{to:`/uslugodawcy/profil/${je.providerId}`,className:"text-sm text-primary font-medium hover:underline",children:"Zobacz profil"}),r.jsx("button",{onClick:()=>Q(je.providerId),className:"p-2 text-red-500 hover:bg-red-50 rounded-full transition-colors",title:"Usu z ulubionych",children:r.jsx(Xa,{className:"w-5 h-5 fill-current"})})]})]},je.id))})});case"visits":const $e=we(),et=S.filter(je=>{const gt=new Date(je.date),J=new Date;return J.setHours(0,0,0,0),gt<J||je.status==="cancelled"}).sort((je,gt)=>new Date(gt.date).getTime()-new Date(je.date).getTime()).slice(0,20);return r.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("h3",{className:"font-bold text-lg mb-4",children:"Kalendarz wizyt"}),le(),et.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"font-bold text-lg mb-4",children:"Historia wizyt"}),r.jsx("div",{className:"space-y-3",children:et.map(je=>{const gt=je.status!=="cancelled"&&!$.has(je.id),J=$.has(je.id);return r.jsxs("div",{className:`bg-white rounded-xl border p-4 ${je.status==="cancelled"?"opacity-60":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:je.providerImage||"https://via.placeholder.com/50",alt:je.providerName,className:"w-12 h-12 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:je.serviceName}),r.jsx("p",{className:"text-sm text-gray-500",children:je.providerName})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:new Date(je.date).toLocaleDateString("pl-PL")}),r.jsx("p",{className:`text-xs ${je.status==="cancelled"?"text-red-500":je.status==="completed"?"text-green-500":"text-gray-400"}`,children:je.status==="cancelled"?"Anulowana":je.status==="completed"?"Zakoczona":"Mina"})]})]}),gt&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:r.jsxs("button",{onClick:()=>he(je),className:"flex items-center gap-2 text-sm text-amber-600 hover:text-amber-700 font-medium",children:[r.jsx(yt,{className:"w-4 h-4"}),"Wystaw opini"]})}),J&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:r.jsxs("span",{className:"flex items-center gap-2 text-sm text-green-600",children:[r.jsx(yt,{className:"w-4 h-4 fill-current"}),"Opinia wystawiona"]})})]},je.id)})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg mb-4",children:"Nadchodzce wizyty"}),C?r.jsx("div",{className:"text-center py-8",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-primary mx-auto"})}):$e.length===0?r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 text-center",children:[r.jsx(Yt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Brak nadchodzcych wizyt"}),r.jsx(Ne,{to:"/uslugodawcy",className:"inline-block px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary/90",children:"Znajd usugodawc"})]}):r.jsx("div",{className:"space-y-4",children:$e.map(je=>{const gt=new Date(je.date),J=gt.toDateString()===new Date().toDateString(),xe=gt.toDateString()===new Date(Date.now()+864e5).toDateString();return r.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 ${J?"border-primary bg-primary/5":xe?"border-yellow-400 bg-yellow-50":"border-gray-100"}`,children:[J&&r.jsx("div",{className:"text-xs font-bold text-primary mb-2",children:" DZISIAJ"}),xe&&r.jsx("div",{className:"text-xs font-bold text-yellow-600 mb-2",children:" JUTRO"}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("img",{src:je.providerImage||"https://via.placeholder.com/50",alt:je.providerName,className:"w-14 h-14 rounded-xl object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-gray-900 truncate",children:je.serviceName}),r.jsx("p",{className:"text-sm text-gray-600",children:je.providerName}),r.jsxs("div",{className:"flex items-center gap-3 mt-2 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yt,{className:"w-4 h-4"}),r.jsx("span",{children:gt.toLocaleDateString("pl-PL",{weekday:"short",day:"numeric",month:"short"})})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Tt,{className:"w-4 h-4"}),r.jsx("span",{children:je.time})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[r.jsxs("span",{className:"font-bold text-primary",children:[je.servicePrice," z"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ne,{to:`/uslugodawcy/profil/${je.providerId}`,className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Zobacz profil"}),r.jsx("button",{onClick:()=>W(je.id),className:"px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:r.jsx(Tn,{className:"w-4 h-4"})})]})]}),je.status==="pending"&&r.jsx("div",{className:"mt-2 text-xs text-yellow-600 bg-yellow-50 px-2 py-1 rounded",children:" Oczekuje na potwierdzenie"}),je.status==="confirmed"&&r.jsx("div",{className:"mt-2 text-xs text-green-600 bg-green-50 px-2 py-1 rounded",children:" Potwierdzona"})]},je.id)})})]})]});case"settings":return r.jsx(pt,{});case"help":return r.jsxs("div",{className:"card p-8",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Centrum Pomocy"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Masz pytania? Skontaktuj si z nami!"}),r.jsx("p",{className:"text-primary font-semibold",children:"pomoc@tomyhomeapp.pl"})]});default:return null}},pt=()=>{const ve=N.useRef(null),$e=(_e=>{if(!_e)return{countryCode:"+48",number:""};const Qe=_e.match(/^(\+\d{1,3})\s?(.*)$/);return Qe?{countryCode:Qe[1],number:Qe[2]}:{countryCode:"+48",number:_e}})((n==null?void 0:n.phone)||(e==null?void 0:e.phone)),[et,je]=N.useState({username:(n==null?void 0:n.username)||(e==null?void 0:e.username)||"",phone:$e.number,phoneCountryCode:$e.countryCode,businessName:(n==null?void 0:n.businessName)||""}),[gt,J]=N.useState((n==null?void 0:n.avatar)||(e==null?void 0:e.avatar)||""),[xe,Ze]=N.useState(!1),[Re,ke]=N.useState(!1),[Le,zn]=N.useState(!1),[st,$n]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Vs,yn]=N.useState(!1),[ws,Mr]=N.useState(!1),[Bs,Or]=N.useState(!1),Vr=async _e=>{var Rt;const Qe=(Rt=_e.target.files)==null?void 0:Rt[0];if(!(!Qe||!(e!=null&&e.id))){ke(!0);try{const Lt=await HL(e.id,Qe);J(Lt),o("Zdjcie zostao zmienione!","success")}catch(Lt){o(Lt.message||"Bd przesyania zdjcia","error")}finally{ke(!1)}}},or=async _e=>{_e.preventDefault();const Qe=et.username.trim().split(/\s+/);if(Qe.length<2||Qe.some(Lt=>Lt.length<2)){o("Podaj pene imi i nazwisko (np. Jan Kowalski)","error");return}const Rt=s0(et.phoneCountryCode,et.phone);if(!Rt.valid){o(Rt.message,"error");return}if(e!=null&&e.id){Ze(!0);try{const Lt=`${et.phoneCountryCode} ${et.phone.replace(/\D/g,"")}`,is={username:et.username,phone:Lt};et.businessName&&et.businessName.trim()&&(is.businessName=et.businessName.trim()),await a2(e.id,is),o("Zmiany zostay zapisane!","success")}catch(Lt){o(Lt.message||"Bd zapisywania zmian","error")}finally{Ze(!1)}}},X=async _e=>{if(_e.preventDefault(),st.newPassword!==st.confirmPassword){o("Hasa nie s zgodne","error");return}if(st.newPassword.length<8){o("Haso musi mie co najmniej 8 znakw","error");return}Or(!0);try{await qL(st.currentPassword,st.newPassword),o("Haso zostao zmienione!","success"),zn(!1),$n({currentPassword:"",newPassword:"",confirmPassword:""})}catch(Qe){o(Qe.message||"Bd zmiany hasa","error")}finally{Or(!1)}},Te=async()=>{const _e=window.prompt("Aby usun konto, wpisz swoje haso:");if(_e!==null){if(!_e||_e.length<8){o("Nieprawidowe haso","error");return}if(window.confirm("UWAGA: Czy na pewno chcesz usun swoje konto? Ta operacja jest nieodwracalna!"))try{await ZL(_e),o("Konto zostao usunite","info"),t("/")}catch(Qe){o(Qe.message||"Bd usuwania konta","error")}}};return r.jsxs("div",{className:"max-w-2xl space-y-6",children:[r.jsxs("div",{className:"card p-8",children:[r.jsx("h3",{className:"font-bold text-lg mb-6",children:"Zdjcie profilowe"}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-3xl",children:Re?r.jsx(Ve,{className:"w-8 h-8 animate-spin"}):gt?r.jsx("img",{src:gt,alt:"Avatar",className:"w-full h-full object-cover"}):""}),r.jsx("button",{onClick:()=>{var _e;return(_e=ve.current)==null?void 0:_e.click()},disabled:Re,className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-100 transition-colors disabled:opacity-50",children:r.jsx(fL,{className:"w-4 h-4 text-gray-600"})}),r.jsx("input",{ref:ve,type:"file",accept:"image/*",onChange:Vr,className:"hidden"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Kliknij ikon aparatu aby zmieni zdjcie."}),r.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Max 5MB, formaty: JPG, PNG, GIF"})]})]})]}),r.jsxs("div",{className:"card p-8",children:[r.jsx("h3",{className:"font-bold text-lg mb-6",children:"Dane osobowe"}),r.jsxs("form",{onSubmit:or,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Imi i Nazwisko"}),r.jsx("input",{type:"text",value:et.username,onChange:_e=>je({...et,username:_e.target.value}),placeholder:"Jan Kowalski",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:(n==null?void 0:n.email)||(e==null?void 0:e.email)||"",readOnly:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-500"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email nie moe by zmieniony"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Telefon"}),r.jsx(r0,{value:et.phone,countryCode:et.phoneCountryCode,onChange:(_e,Qe)=>{je({...et,phone:_e,phoneCountryCode:Qe})}})]}),((n==null?void 0:n.accountType)==="provider"||(e==null?void 0:e.accountType)==="provider")&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Nazwa firmy / salonu"}),r.jsx("input",{type:"text",value:et.businessName,onChange:_e=>je({...et,businessName:_e.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none"})]}),r.jsx("button",{type:"submit",disabled:xe,className:"btn btn-primary mt-4 flex items-center gap-2",children:xe?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Qi,{className:"w-5 h-5"}),"Zapisz zmiany"]})})]})]}),r.jsxs("div",{className:"card p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"font-bold text-lg",children:"Zmiana hasa"}),r.jsx("button",{onClick:()=>zn(!Le),className:"text-primary hover:underline text-sm font-medium",children:Le?"Anuluj":"Zmie haso"})]}),Le?r.jsxs("form",{onSubmit:X,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Obecne haso"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:Vs?"text":"password",value:st.currentPassword,onChange:_e=>$n({...st,currentPassword:_e.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),r.jsx("button",{type:"button",onClick:()=>yn(!Vs),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:Vs?r.jsx(Ja,{className:"w-5 h-5"}):r.jsx(ss,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Nowe haso"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:ws?"text":"password",value:st.newPassword,onChange:_e=>$n({...st,newPassword:_e.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),r.jsx("button",{type:"button",onClick:()=>Mr(!ws),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:ws?r.jsx(Ja,{className:"w-5 h-5"}):r.jsx(ss,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[r.jsxs("p",{className:st.newPassword.length>=8?"text-green-600":"",children:[st.newPassword.length>=8?"":""," Minimum 8 znakw"]}),r.jsxs("p",{className:/[A-Z]/.test(st.newPassword)?"text-green-600":"",children:[/[A-Z]/.test(st.newPassword)?"":""," Wielka litera"]}),r.jsxs("p",{className:/[a-z]/.test(st.newPassword)?"text-green-600":"",children:[/[a-z]/.test(st.newPassword)?"":""," Maa litera"]}),r.jsxs("p",{className:/[0-9]/.test(st.newPassword)?"text-green-600":"",children:[/[0-9]/.test(st.newPassword)?"":""," Cyfra"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Potwierd nowe haso"}),r.jsx("input",{type:"password",value:st.confirmPassword,onChange:_e=>$n({...st,confirmPassword:_e.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),st.confirmPassword&&r.jsx("p",{className:`text-xs mt-1 ${st.newPassword===st.confirmPassword?"text-green-600":"text-red-500"}`,children:st.newPassword===st.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]}),r.jsx("button",{type:"submit",disabled:Bs,className:"btn btn-primary flex items-center gap-2",children:Bs?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Zmieniam..."]}):r.jsxs(r.Fragment,{children:[r.jsx(si,{className:"w-5 h-5"}),"Zmie haso"]})})]}):r.jsx("p",{className:"text-gray-500 text-sm",children:"Zalecamy regularn zmian hasa dla bezpieczestwa konta."})]}),r.jsxs("div",{className:"card p-8 border-2 border-red-200 bg-red-50",children:[r.jsx("h3",{className:"font-bold text-lg text-red-600 mb-4",children:"Strefa zagroenia"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Po usuniciu konta wszystkie Twoje dane, rezerwacje i historia zostan trwale usunite. Ta operacja jest nieodwracalna."}),r.jsx("button",{onClick:Te,className:"px-4 py-2 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-colors",children:"Usu moje konto"})]})]})};return s?r.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[r.jsx("div",{className:"lg:hidden mb-6 overflow-x-auto",children:r.jsxs("div",{className:"flex gap-2 pb-2 min-w-max",children:[O.map(ve=>r.jsxs("button",{onClick:()=>d(ve.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all ${l===ve.id?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[r.jsx(ve.icon,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:ve.label})]},ve.id)),r.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap bg-red-50 text-red-600 hover:bg-red-100 transition-all",children:[r.jsx(Ru,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Wyloguj"})]})]})}),r.jsxs("div",{className:"flex gap-8",children:[r.jsx("aside",{className:"w-72 shrink-0 hidden lg:block",children:r.jsxs("div",{className:"card p-6 sticky top-24",children:[r.jsxs("div",{className:"text-center mb-6 pb-6 border-b border-gray-100",children:[r.jsx("div",{className:"relative inline-block",children:r.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-3xl",children:n!=null&&n.avatar||e!=null&&e.avatar?r.jsx("img",{src:(n==null?void 0:n.avatar)||(e==null?void 0:e.avatar),alt:"Avatar",className:"w-full h-full object-cover"}):""})}),r.jsx("div",{className:"font-bold text-lg mt-3",children:(n==null?void 0:n.username)||(e==null?void 0:e.username)}),r.jsx("div",{className:"text-gray-500 text-sm",children:(n==null?void 0:n.phone)||(e==null?void 0:e.phone)}),((n==null?void 0:n.accountType)==="provider"||(e==null?void 0:e.accountType)==="provider")&&r.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full",children:"Usugodawca"})]}),r.jsxs("nav",{className:"space-y-1",children:[O.map(ve=>r.jsxs("button",{onClick:()=>d(ve.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${l===ve.id?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(ve.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:ve.label})]},ve.id)),r.jsxs("button",{onClick:q,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 transition-all",children:[r.jsx(Ru,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Wyloguj"})]})]})]})}),r.jsxs("main",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:((Jt=O.find(ve=>ve.id===l))==null?void 0:Jt.label)||"Panel Gwny"}),r.jsxs("p",{className:"text-gray-500",children:[l==="dashboard"&&"Przegld Twojej aktywnoci",l==="referral"&&"Zapraszaj znajomych i zarabiaj",l==="favorites"&&"Twoje ulubione miejsca i usugi",l==="visits"&&"Kalendarz i historia rezerwacji",l==="settings"&&"Personalizuj swoje konto",l==="help"&&"FAQ i Kontakt"]})]}),Se()]})]}),k&&U&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Wystaw opini"}),r.jsx("button",{onClick:()=>j(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-xl mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:U.providerImage||"https://via.placeholder.com/50",alt:U.providerName,className:"w-12 h-12 rounded-full object-cover"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:U.providerName}),r.jsx("p",{className:"text-sm text-gray-500",children:U.serviceName}),r.jsx("p",{className:"text-xs text-gray-400",children:new Date(U.date).toLocaleDateString("pl-PL")})]})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Twoja ocena"}),r.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(ve=>r.jsx("button",{onClick:()=>P(ve),className:"p-1 transition-transform hover:scale-110",children:r.jsx(yt,{className:`w-10 h-10 ${ve<=F?"text-amber-400 fill-amber-400":"text-gray-300"}`})},ve))}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[F===1&&"Bardzo sabo",F===2&&"Sabo",F===3&&"rednio",F===4&&"Dobrze",F===5&&"wietnie!"]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Twoja opinia"}),r.jsx("textarea",{value:T,onChange:ve=>M(ve.target.value),placeholder:"Opisz swoje dowiadczenie z usug...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 resize-none",rows:4}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum 10 znakw (",T.length,"/10)"]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50",children:"Anuluj"}),r.jsx("button",{onClick:de,disabled:R||T.length<10,className:"flex-1 px-4 py-3 bg-primary text-white rounded-xl font-semibold hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Wysyanie..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yt,{className:"w-5 h-5"}),"Wylij opini"]})})]})]})})})]}):null},ei="providers",Kg=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),JL=()=>({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),Zo=(t,e)=>{var d,m;const n=new Date().toISOString(),s=e||((d=t.id)==null?void 0:d.toString())||Kg();let i=[];t.services&&Array.isArray(t.services)&&(i=t.services.map((f,g)=>({id:f.id||`service-${g}`,name:f.name||"",description:f.description||"",duration:f.duration||"30 min",price:Number(f.price)||0,oldPrice:f.oldPrice?Number(f.oldPrice):void 0,discount:f.discount?Number(f.discount):void 0,badge:f.badge,category:f.category||"Usugi"})));let o;t.location&&typeof t.location=="object"?o={city:t.location.city||"",district:t.location.district||"",address:t.location.address||"",postalCode:t.location.postalCode||"",lat:Number(t.location.lat)||52.2297,lng:Number(t.location.lng)||21.0122}:o={city:"",district:"",address:"",postalCode:"",lat:52.2297,lng:21.0122};const l=[o.city,o.district].filter(Boolean).join(", ")||"Nie podano";return{id:s,ownerId:((m=t.ownerId)==null?void 0:m.toString())||"",name:t.name||"",profession:t.profession||"",description:t.description||"",experience:t.experience||"",category:t.category||"",location:o,locationString:l,travelRadius:Number(t.travelRadius)||10,hasTravel:t.hasTravel??!0,image:t.image||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",portfolio:t.portfolio||[],services:i,serviceNames:i.map(f=>f.name),features:t.features||[],priceFrom:i.length>0?Math.min(...i.map(f=>f.price)):0,rating:Number(t.rating)||0,reviewsCount:Number(t.reviewsCount)||0,completedServices:Number(t.completedServices)||0,punctuality:Number(t.punctuality)||95,regularClients:Number(t.regularClients)||0,certifications:t.certifications||[],workingHours:t.workingHours||JL(),acceptsCard:t.acceptsCard??!0,responseTime:t.responseTime||"24h",isPremium:t.isPremium||!1,isVerified:t.isVerified||!1,isActive:t.isActive??!0,isAvailableToday:t.isAvailableToday??!0,createdAt:t.createdAt||n,updatedAt:t.updatedAt||n,ownerEmail:t.ownerEmail||"",ownerUsername:t.ownerUsername||"",ownerPhone:t.ownerPhone||"",ownerAvatar:t.ownerAvatar||""}},tn={async getAll(){try{const t=await Ke(Fe(ae,ei));return console.log("Firebase getAll - znaleziono:",t.docs.length),t.docs.map(e=>Zo({...e.data(),id:e.id}))}catch(t){return console.error("Firebase getAll error:",t),[]}},async getById(t){try{const e=Ie(ae,ei,t),n=await Rs(e);return n.exists()?Zo({...n.data(),id:n.id}):null}catch(e){return console.error("Firebase getById error:",e),null}},async getByCategory(t){try{const e=dt(Fe(ae,ei),xt("category","==",t));return(await Ke(e)).docs.map(s=>Zo({...s.data(),id:s.id}))}catch(e){return console.error("Firebase getByCategory error:",e),[]}},async getByOwner(t){try{const e=dt(Fe(ae,ei),xt("ownerId","==",t));return(await Ke(e)).docs.map(s=>Zo({...s.data(),id:s.id}))}catch(e){return console.error("Firebase getByOwner error:",e),[]}},async isNameUnique(t,e){try{const n=t.trim().toLowerCase(),s=dt(Fe(ae,ei)),i=await Ke(s);for(const o of i.docs){const l=o.data();if(!(e&&l.id===e)&&l.name.trim().toLowerCase()===n)return!1}return!0}catch(n){return console.error("isNameUnique error:",n),!0}},async isPhoneUnique(t,e){try{const n=t.replace(/\D/g,"");if(!n||n.length<9)return!0;const s=dt(Fe(ae,ei)),i=await Ke(s);for(const o of i.docs){const l=o.data();if(e&&l.id===e)continue;const d=(l.ownerPhone||"").replace(/\D/g,"");if(d&&d.includes(n.slice(-9)))return!1}return!0}catch(n){return console.error("isPhoneUnique error:",n),!0}},async create(t,e){if(t.name&&!await this.isNameUnique(t.name))throw new Error("DUPLICATE_NAME");if(t.ownerPhone&&!await this.isPhoneUnique(t.ownerPhone))throw new Error("DUPLICATE_PHONE");const n=Kg(),s=Zo({...t,ownerId:e,isActive:!0},n),i=JSON.parse(JSON.stringify(s));try{return console.log("Firebase create - zapisuj:",i),await _i(Ie(ae,ei,n),i),console.log("Firebase create - zapisano pomylnie"),window.dispatchEvent(new CustomEvent("providerCreated",{detail:s})),s}catch(o){throw console.error("Firebase create error:",o),o}},async update(t,e){try{const n=await this.getById(t);if(!n)return null;if(e.name&&e.name!==n.name&&!await this.isNameUnique(e.name,t))throw new Error("DUPLICATE_NAME");if(e.ownerPhone&&e.ownerPhone!==n.ownerPhone&&!await this.isPhoneUnique(e.ownerPhone,t))throw new Error("DUPLICATE_PHONE");const s=Zo({...n,...e},t);s.updatedAt=new Date().toISOString();const i=JSON.parse(JSON.stringify(s));return await zt(Ie(ae,ei,t),i),window.dispatchEvent(new CustomEvent("providerUpdated",{detail:s})),s}catch(n){throw console.error("Firebase update error:",n),n}},async delete(t){try{return await Yl(Ie(ae,ei,t)),window.dispatchEvent(new CustomEvent("providerDeleted",{detail:{id:t}})),!0}catch(e){return console.error("Firebase delete error:",e),!1}},async uploadImage(t,e){try{const n=`providers/${e}/${Date.now()}_${t.name}`,s=Jx(e0,n);return await Yk(s,t),Jk(s)}catch(n){throw console.error("Firebase upload error:",n),n}},async addService(t,e){const n=await this.getById(t);if(!n)return null;const s={...e,id:Kg()},i=[...n.services,s];return this.update(t,{services:i,serviceNames:i.map(o=>o.name),priceFrom:Math.min(...i.map(o=>o.price))})},async removeService(t,e){const n=await this.getById(t);if(!n)return null;const s=n.services.filter(i=>i.id!==e);return this.update(t,{services:s,serviceNames:s.map(i=>i.name),priceFrom:s.length>0?Math.min(...s.map(i=>i.price)):0})}},XL={fryzjer:["fryzjer","fryzjerstwo","hair"],pedicure:["pedicure","pedikre"],paznokcie:["paznokcie","manicure","nails","stylizacja paznokci"],masaz:["masa","masaz","massage"],makijaz:["makija","makijaz","makeup","wiza"],"pielegnacja-twarzy":["pielgnacja twarzy","kosmetyka","facial","twarz"],twarz:["twarz","pielgnacja twarzy","kosmetyka","facial","kosmetyka / twarz"],depilacja:["depilacja","wax","waxing"],barber:["barber","fryzjer mski","barbershop"],tatuaz:["tatua","tatuaz","tattoo","tatuaze"],tatuaze:["tatua","tatuaz","tattoo","tatuaze"],kosmetyka:["kosmetyka","kosmetyczka","beauty","twarz","pielgnacja twarzy","kosmetyka / twarz"],"brwi-rzesy":["brwi","rzsy","lashes","brows"],inne:["inne","other"]},eD=["Wszystkie miasta","Warszawa","Krakw","d","Wrocaw","Pozna","Gdask","Szczecin","Bydgoszcz","Lublin","Biaystok","Katowice","Gdynia","Czstochowa","Radom","Sosnowiec","Toru","Kielce","Rzeszw","Gliwice","Zabrze","Olsztyn","Bielsko-Biaa","Bytom","Zielona Gra","Rybnik","Ruda lska","Opole","Tychy","Gorzw Wielkopolski","Pock","Dbrowa Grnicza","Elblg","Wabrzych","Wocawek","Tarnw","Chorzw","Koszalin"],tD=["Wszystkie specjalizacje","Fryzjer","Barber","Kosmetyka","Paznokcie / Manicure","Pedicure","Masa","Makija","Pielgnacja twarzy","Depilacja","Brwi i rzsy","Tatua","Inne usugi"],nD={Fryzjer:["fryzjer","fryzjerstwo","hair"],Barber:["barber","fryzjer mski","barbershop"],Kosmetyka:["kosmetyka","kosmetyczka","beauty","twarz","pielgnacja twarzy"],"Paznokcie / Manicure":["paznokcie","manicure","nails","stylizacja paznokci"],Pedicure:["pedicure","pedikre"],Masa:["masa","masaz","massage"],Makija:["makija","makijaz","makeup","wiza"],"Pielgnacja twarzy":["pielgnacja twarzy","kosmetyka","facial","twarz"],Depilacja:["depilacja","wax","waxing"],"Brwi i rzsy":["brwi","rzsy","lashes","brows"],Tatua:["tatua","tatuaz","tattoo"],"Inne usugi":["inne","other"]},sD=(t,e,n,s)=>{const o=(n-t)*Math.PI/180,l=(s-e)*Math.PI/180,d=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},I_=()=>{const{category:t}=eN(),{showToast:e}=ln(),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,d]=N.useState(!1),[m,f]=N.useState(!0),[g,x]=N.useState(0),[w,E]=N.useState([]),[S,A]=N.useState("Wszystkie miasta"),[C,b]=N.useState("Wszystkie specjalizacje"),[k,j]=N.useState(null),[U,D]=N.useState("rating"),[F,P]=N.useState(null),[T,M]=N.useState(!1),R=()=>{if(!navigator.geolocation){e("Twoja przegldarka nie wspiera geolokalizacji","error");return}M(!0),navigator.geolocation.getCurrentPosition(W=>{P({lat:W.coords.latitude,lng:W.coords.longitude}),M(!1),e("Lokalizacja pobrana!","success")},W=>{switch(console.error("Bd geolokalizacji:",W),M(!1),W.code){case W.PERMISSION_DENIED:e("Brak zgody na lokalizacj. Wcz w ustawieniach przegldarki.","error");break;case W.POSITION_UNAVAILABLE:e("Nie mona ustali lokalizacji","error");break;case W.TIMEOUT:e("Przekroczono czas oczekiwania na lokalizacj","error");break;default:e("Bd pobierania lokalizacji","error")}D("rating")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};N.useEffect(()=>{U==="distance"&&!F&&R()},[U]);const B=async(W=!1)=>{W?d(!0):o(!0);try{let Q=await tn.getAll();if(t){const O=XL[t]||[t];console.log(" Filtrowanie po kategorii:",t),console.log(" Szukane nazwy:",O),console.log(" Wszystkie kategorie providerw:",Q.map(q=>q.category)),Q=Q.filter(q=>{if(!q.category)return!1;const ne=q.category.toLowerCase(),Ee=O.some(se=>ne.includes(se.toLowerCase()));return console.log(` Provider "${q.name}" kategoria "${q.category}" -> matches: ${Ee}`),Ee}),console.log(" Po filtrowaniu:",Q.length,"wynikw")}if(C&&C!=="Wszystkie specjalizacje"){const O=nD[C]||[];O.length>0&&(Q=Q.filter(q=>{if(!q.category)return!1;const ne=q.category.toLowerCase();return O.some(Ee=>ne.includes(Ee.toLowerCase()))}))}S&&S!=="Wszystkie miasta"&&(Q=Q.filter(O=>{var Ee,se,le;const q=((Ee=O.locationString)==null?void 0:Ee.toLowerCase())||"",ne=((le=(se=O.location)==null?void 0:se.city)==null?void 0:le.toLowerCase())||"";return q.includes(S.toLowerCase())||ne.includes(S.toLowerCase())})),k&&(Q=Q.filter(O=>O.rating>=k)),w.includes("available-today")&&(Q=Q.filter(O=>O.isAvailableToday)),w.includes("with-travel")&&(Q=Q.filter(O=>O.hasTravel)),U==="rating"?Q.sort((O,q)=>q.rating-O.rating):U==="price-asc"?Q.sort((O,q)=>O.priceFrom-q.priceFrom):U==="price-desc"?Q.sort((O,q)=>q.priceFrom-O.priceFrom):U==="distance"&&F&&(Q=Q.map(O=>{var ne,Ee;let q=1/0;return(ne=O.location)!=null&&ne.lat&&((Ee=O.location)!=null&&Ee.lng)&&(q=sD(F.lat,F.lng,O.location.lat,O.location.lng)),{...O,_distance:q}}).sort((O,q)=>O._distance-q._distance)),s(Q),x(Q.length),f(!1)}catch(Q){console.error("Bd pobierania usugodawcw:",Q),e("Bd adowania danych","error")}finally{o(!1),d(!1)}};N.useEffect(()=>{B()},[t,S,C,k,U,w,F]);const $={ratings:[{label:"Wszystkie oceny",value:null},{label:" 5.0",value:5},{label:" 4.5+",value:4.5},{label:" 4.0+",value:4},{label:" 3.5+",value:3.5}]},I=[{id:"available-today",label:"Dostpny dzi"},{id:"with-travel",label:"Z dojazdem"},{id:"recommended",label:"Polecany"},{id:"discount",label:"Nowi uytkownicy -20%"},{id:"weekend",label:"Weekend"}],he=W=>{E(Q=>Q.includes(W)?Q.filter(O=>O!==W):[...Q,W])},de=()=>{E([]),A("Wszystkie miasta"),b("Wszystkie specjalizacje"),j(null),D("rating"),e("Filtry wyczyszczone","info")},we=t?t.charAt(0).toUpperCase()+t.slice(1):"Wszystkie usugi",te=()=>{!l&&m&&B(!0)};return r.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[r.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-6",children:[r.jsx(Ne,{to:"/",className:"hover:text-primary transition-colors",children:"Strona gwna"}),r.jsx("span",{children:"/"}),r.jsx(Ne,{to:"/uslugodawcy",className:"hover:text-primary transition-colors",children:"Usugi"}),t&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-gray-900",children:we})]})]}),r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:we.toUpperCase()}),r.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Wybierz swojego specjalist"}),r.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Znajd idealnego specjalist w Twojej okolicy. Sprawd opinie, ceny i dostpne terminy."})]}),r.jsxs("section",{className:"card p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[r.jsx(n0,{className:"w-5 h-5"}),"Filtry wyszukiwania"]}),r.jsx("button",{onClick:de,className:"text-sm text-primary hover:underline",children:"Wyczy filtry"})]}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Miasto"}),r.jsx("select",{value:S,onChange:W=>A(W.target.value),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:eD.map(W=>r.jsx("option",{value:W,children:W},W))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Specjalizacja"}),r.jsx("select",{value:C,onChange:W=>b(W.target.value),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:tD.map(W=>r.jsx("option",{value:W,children:W},W))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Ocena"}),r.jsx("select",{value:k??"",onChange:W=>j(W.target.value?parseFloat(W.target.value):null),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:$.ratings.map(W=>r.jsx("option",{value:W.value??"",children:W.label},W.label))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Twoja lokalizacja"}),r.jsx("button",{onClick:R,disabled:T,className:`w-full px-4 py-2.5 border-2 rounded-xl flex items-center justify-center gap-2 transition-colors ${F?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-primary hover:text-primary"}`,children:T?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-4 h-4 animate-spin"}),"Pobieranie..."]}):F?r.jsxs(r.Fragment,{children:[r.jsx(pp,{className:"w-4 h-4"}),"Lokalizacja pobrana"]}):r.jsxs(r.Fragment,{children:[r.jsx(pp,{className:"w-4 h-4"}),"Pobierz lokalizacj"]})})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(W=>r.jsx("button",{onClick:()=>he(W.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${w.includes(W.id)?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:W.label},W.id))})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[r.jsx("div",{className:"text-gray-600",children:i?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Ve,{className:"w-4 h-4 animate-spin"}),"adowanie..."]}):r.jsxs(r.Fragment,{children:["Znaleziono ",r.jsxs("strong",{className:"text-gray-900",children:[g," specjalistw"]}),S!=="Wszystkie miasta"&&` w miecie ${S}`]})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Sortuj:"}),r.jsxs("select",{value:U,onChange:W=>D(W.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 text-sm",children:[r.jsx("option",{value:"rating",children:"Najwyej oceniane"}),r.jsx("option",{value:"recommended",children:"Polecane"}),r.jsx("option",{value:"price-asc",children:"Cena: od najniszej"}),r.jsx("option",{value:"price-desc",children:"Cena: od najwyszej"}),r.jsx("option",{value:"distance",children:"Najbliej mnie"})]})]})]}),U==="distance"&&!F&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[r.jsx(pp,{className:"w-5 h-5 text-yellow-600"}),r.jsx("p",{className:"text-yellow-700 text-sm",children:'Aby sortowa po odlegoci, kliknij "Pobierz lokalizacj" lub zezwl przegldarce na dostp do lokalizacji.'})]}),i&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[r.jsx(Ve,{className:"w-12 h-12 animate-spin text-primary mb-4"}),r.jsx("p",{className:"text-gray-500",children:"adowanie specjalistw..."})]}),!i&&n.length===0&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Brak wynikw"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Nie znaleziono specjalistw speniajcych kryteria wyszukiwania."}),r.jsx("button",{onClick:de,className:"btn btn-primary",children:"Wyczy filtry"})]}),!i&&n.length>0&&r.jsx("div",{className:"grid gap-6",children:n.map(W=>r.jsxs("div",{className:"card card-hover p-6 grid md:grid-cols-[200px,1fr,200px] gap-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:W.image,alt:W.name,className:"w-full h-48 md:h-full object-cover rounded-xl"}),W.isPremium&&r.jsx("div",{className:"absolute top-3 left-3 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:" Premium"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:W.name}),r.jsx("p",{className:"text-gray-500",children:W.profession})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"flex",children:[...Array(5)].map((Q,O)=>r.jsx(yt,{className:`w-4 h-4 ${O<Math.floor(W.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},O))}),r.jsx("span",{className:"font-bold text-gray-900",children:W.rating}),r.jsxs("span",{className:"text-gray-500",children:["(",W.reviewsCount," opinii)"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-4",children:[r.jsx(Ir,{className:"w-4 h-4"}),r.jsx("span",{children:W.locationString}),U==="distance"&&W._distance&&W._distance!==1/0&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-primary/10 text-primary rounded-full text-xs font-medium",children:W._distance<1?`${Math.round(W._distance*1e3)} m`:`${W._distance.toFixed(1)} km`})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[W.serviceNames.slice(0,4).map((Q,O)=>r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:Q},O)),W.serviceNames.length>4&&r.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:["+",W.serviceNames.length-4]})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:W.description}),r.jsx("div",{className:"flex flex-wrap gap-4",children:W.features.slice(0,3).map(Q=>r.jsxs("span",{className:"flex items-center gap-1 text-sm text-gray-600",children:[r.jsx(Wt,{className:"w-4 h-4 text-green-500"}),Q]},Q))})]}),r.jsxs("div",{className:"flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 text-sm mb-4 ${W.isAvailableToday?"text-green-600":"text-orange-500"}`,children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${W.isAvailableToday?"bg-green-500":"bg-orange-500"}`}),W.isAvailableToday?"Dostpna dzi":"Zajta dzi"]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Od"}),r.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[W.priceFrom," ",r.jsx("span",{className:"text-base font-normal text-gray-500",children:"z"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ne,{to:`/uslugodawcy/profil/${W.id}`,className:"w-full btn btn-primary justify-center",children:"Zarezerwuj"}),r.jsx(Ne,{to:`/uslugodawcy/profil/${W.id}`,className:"w-full btn btn-ghost justify-center",children:"Zobacz profil"})]})]})]},W.id))}),!i&&m&&n.length>0&&r.jsx("div",{className:"flex justify-center mt-10",children:r.jsx("button",{onClick:te,disabled:l,className:"btn btn-ghost px-8 py-3 text-lg",children:l?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin mr-2"}),"adowanie..."]}):"Zaaduj wicej"})}),!i&&!m&&n.length>0&&r.jsx("div",{className:"text-center mt-10 py-6 border-t border-gray-200",children:r.jsxs("p",{className:"text-gray-500",children:["To wszyscy dostpni specjalici (",g,")"]})}),r.jsxs("button",{className:"fixed bottom-6 right-6 btn btn-primary shadow-xl",children:[r.jsx(Ir,{className:"w-5 h-5"}),r.jsx("span",{children:"Poka na mapie"})]})]})},rD=({isOpen:t,onClose:e,onSuccess:n,amount:s,serviceName:i,providerName:o,bookingDate:l,bookingTime:d})=>{const[m,f]=N.useState("select"),[g,x]=N.useState(null),[w,E]=N.useState(""),[S,A]=N.useState(""),[C,b]=N.useState(0);N.useEffect(()=>{t&&(f("select"),x(null),E(""),A(""),b(0))},[t]),N.useEffect(()=>{if(C>0){const D=setTimeout(()=>b(C-1),1e3);return()=>clearTimeout(D)}else C===0&&m==="processing"&&f("success")},[C,m]);const k=()=>{if(!/^\d{6}$/.test(w)){A("Kod BLIK musi skada si z 6 cyfr");return}A(""),f("processing"),b(3)},j=()=>{n(),e()},U=D=>D.toFixed(2).replace(".",",")+" z";return t?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:m!=="processing"?e:void 0}),r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"Bezpieczna patno"})]}),m!=="processing"&&m!=="success"&&r.jsx("button",{onClick:e,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:r.jsx(Tn,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"p-6",children:[m==="select"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Pacisz za:"}),r.jsx("p",{className:"font-semibold text-gray-900",children:i}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:o}),(l||d)&&r.jsxs("div",{className:"border-t border-gray-200 pt-3 mb-3 space-y-2",children:[l&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Data:"}),r.jsx("span",{className:"font-medium text-gray-900",children:l})]}),d&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Tt,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Godzina:"}),r.jsx("span",{className:"font-medium text-gray-900",children:d})]})]}),r.jsx("div",{className:"pt-3 border-t border-gray-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Do zapaty:"}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:U(s)})]})})]}),r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Wybierz metod patnoci:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>{x("blik"),f("blik")},className:"w-full flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all",children:[r.jsx("div",{className:"w-12 h-12 bg-black rounded-xl flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"BLIK"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"BLIK"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Szybka patno kodem z aplikacji bankowej"})]})]}),r.jsxs("button",{onClick:()=>{x("card"),f("blik")},className:"w-full flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center",children:r.jsx(fo,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Karta patnicza"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Visa, Mastercard, Maestro"})]})]}),r.jsxs("button",{onClick:()=>{x("transfer"),f("blik")},className:"w-full flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:r.jsx(S_,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Przelew online"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Szybki przelew z Twojego banku"})]})]})]}),r.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-sm text-gray-500",children:[r.jsx(Mn,{className:"w-4 h-4"}),r.jsx("span",{children:"Patno zabezpieczona certyfikatem SSL"})]})]}),m==="blik"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>f("select"),className:"text-sm text-blue-600 hover:text-blue-800 mb-4 flex items-center gap-1",children:" Zmie metod patnoci"}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsxs("div",{className:"w-16 h-16 bg-black rounded-2xl flex items-center justify-center mx-auto mb-4",children:[g==="blik"&&r.jsx("span",{className:"text-white font-bold",children:"BLIK"}),g==="card"&&r.jsx(fo,{className:"w-8 h-8 text-white"}),g==="transfer"&&r.jsx(S_,{className:"w-8 h-8 text-white"})]}),r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[g==="blik"&&"Wpisz kod BLIK",g==="card"&&"Wpisz kod autoryzacyjny",g==="transfer"&&"Wpisz kod autoryzacyjny"]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[g==="blik"&&"Znajdziesz go w aplikacji mobilnej swojego banku",g==="card"&&"Kod SMS z banku lub z aplikacji",g==="transfer"&&"Kod z aplikacji bankowej"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 mb-4 text-center",children:[r.jsx("span",{className:"text-gray-600",children:"Kwota: "}),r.jsx("span",{className:"font-bold text-gray-900",children:U(s)})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("input",{type:"text",inputMode:"numeric",maxLength:6,value:w,onChange:D=>{const F=D.target.value.replace(/\D/g,"");E(F),A("")},placeholder:"______",className:"w-full text-center text-3xl font-mono tracking-[0.5em] py-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-0 focus:outline-none",autoFocus:!0}),S&&r.jsx("p",{className:"text-red-500 text-sm text-center mt-2",children:S})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 mb-4",children:[r.jsx(CL,{className:"w-4 h-4"}),r.jsx("span",{children:"Kod wany przez 2 minuty"})]}),r.jsxs("button",{onClick:k,disabled:w.length!==6,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:["Zapa ",U(s)]})]}),m==="processing"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[r.jsx("div",{className:"absolute inset-0 border-4 border-blue-200 rounded-full"}),r.jsx("div",{className:"absolute inset-0 border-4 border-blue-600 rounded-full border-t-transparent animate-spin"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(Ve,{className:"w-8 h-8 text-blue-600 animate-pulse"})})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Przetwarzanie patnoci"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Prosz czeka, nie zamykaj tego okna..."}),r.jsx("div",{className:"bg-gray-100 rounded-full h-2 w-48 mx-auto overflow-hidden",children:r.jsx("div",{className:"bg-blue-600 h-full transition-all duration-1000 ease-linear",style:{width:`${(3-C)/3*100}%`}})}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Weryfikacja transakcji..."})]}),m==="success"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce",children:r.jsx(Pr,{className:"w-12 h-12 text-green-600"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Patno zakoczona!"}),r.jsx("p",{className:"text-gray-500 mb-2",children:"Transakcja przebiega pomylnie"}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 my-6 text-left",children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Kwota:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:U(s)})]}),r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Usuga:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:i})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Nr transakcji:"}),r.jsxs("span",{className:"font-mono text-sm text-gray-700",children:["TXN",Date.now()]})]})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Potwierdzenie zostao wysane na Twj adres email."}),r.jsx("button",{onClick:j,className:"w-full py-4 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-colors",children:"Gotowe"})]})]}),m!=="success"&&r.jsxs("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-center gap-4 border-t",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Patno obsugiwana przez"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"bg-emerald-600 text-white text-xs font-bold px-2 py-1 rounded",children:"P365"}),r.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Przelewy365"})]})]})]})]}):null},eh=({icon:t,value:e,label:n,color:s})=>r.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl ${s}`,children:[r.jsx(t,{className:"w-4 h-4"}),r.jsx("span",{className:"font-bold",children:e}),r.jsx("span",{className:"text-sm opacity-80",children:n})]}),iD=({service:t,isSelected:e,onToggle:n})=>r.jsxs("div",{onClick:n,className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${e?"border-primary bg-primary/5 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-bold text-gray-900",children:t.name}),t.badge&&r.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${t.badge==="Premium"?"bg-yellow-100 text-yellow-700":"bg-primary/10 text-primary"}`,children:t.badge})]}),t.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:t.description})]}),r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${e?"bg-primary border-primary":"border-gray-300"}`,children:e&&r.jsx(Wt,{className:"w-4 h-4 text-white"})})]}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[r.jsx(Tt,{className:"w-4 h-4"}),r.jsx("span",{children:t.duration})]}),r.jsxs("div",{className:"text-right",children:[t.oldPrice&&r.jsxs("span",{className:"text-sm text-gray-400 line-through mr-2",children:[t.oldPrice," z"]}),r.jsxs("span",{className:"text-lg font-bold text-primary",children:[t.price," z"]}),t.discount&&r.jsxs("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:["-",t.discount,"%"]})]})]})]}),aD=()=>{var Or,Vr,or;const{id:t}=eN(),e=xs(),{showToast:n}=ln(),{user:s}=Et(),[i,o]=N.useState(null),[l,d]=N.useState(!0),[m,f]=N.useState(!1),[g,x]=N.useState([]),[w,E]=N.useState(null),[S,A]=N.useState(null),[C,b]=N.useState("Wszystkie"),[k,j]=N.useState(!1),[U,D]=N.useState(!1),[F,P]=N.useState([]),[T,M]=N.useState(!1),[R,B]=N.useState(!1),[$,I]=N.useState(new Date),[he,de]=N.useState([]),[we,te]=N.useState(!1),[W,Q]=N.useState(null),[O,q]=N.useState(!1),[ne,Ee]=N.useState(null),[se,le]=N.useState(""),[Se,pt]=N.useState(!1);N.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.id)||!t))try{const Te=await wm.isFavorite(String(s.id),t);M(Te)}catch(Te){console.error("Error checking favorite:",Te)}})()},[s==null?void 0:s.id,t]),N.useEffect(()=>{(async()=>{if(t){te(!0);try{const Te=await Is.getByProvider(t);de(Te)}catch(Te){console.error("Error loading reviews:",Te)}finally{te(!1)}}})()},[t]);const Jt=async()=>{if(!(s!=null&&s.id)){n("Zaloguj si, aby doda do ulubionych","info"),e(`/auth?mode=login&redirect=/uslugodawcy/profil/${t}`);return}if(i){B(!0);try{const X=await wm.toggle(String(s.id),{id:i.id,name:i.name,image:i.image,profession:i.profession});M(X),n(X?" Dodano do ulubionych":"Usunito z ulubionych","success")}catch(X){console.error("Error toggling favorite:",X),n("Bd podczas zapisywania","error")}finally{B(!1)}}},ve=X=>{if(!s){n("Zaloguj si, aby zgosi opini","info");return}Ee(X),le(""),q(!0)},Ue=async()=>{if(!(!ne||!s||!i)){if(se.trim().length<10){n("Opisz powd zgoszenia (min. 10 znakw)","error");return}pt(!0);try{await Is.reportReview({reviewId:ne.id,reporterId:s.id,reporterName:s.username||"Uytkownik",reason:se.trim(),reviewContent:ne.comment,reviewAuthor:ne.clientName,providerId:i.id,providerName:i.name}),q(!1),n("Zgoszenie wysane. Dzikujemy! ","success")}catch(X){console.error("Error reporting review:",X),n("Bd podczas wysyania zgoszenia","error")}finally{pt(!1)}}},$e=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],et=()=>{I(X=>new Date(X.getFullYear(),X.getMonth()-1,1)),E(null)},je=()=>{I(X=>new Date(X.getFullYear(),X.getMonth()+1,1)),E(null)},gt=()=>{const X=new Date;return $.getFullYear()>X.getFullYear()||$.getFullYear()===X.getFullYear()&&$.getMonth()>X.getMonth()},J=!!(s!=null&&s.id&&(i!=null&&i.ownerId)&&String(s.id)===String(i.ownerId));N.useEffect(()=>{(async()=>{if(t){d(!0);try{const _e=await tn.getById(t);_e?o(_e):n("Nie znaleziono profilu usugodawcy","error")}catch(_e){console.error("Error loading provider:",_e),n("Bd adowania profilu","error")}finally{d(!1)}}})();const Te=_e=>{var Qe;((Qe=_e.detail)==null?void 0:Qe.id)===t&&o(_e.detail)};return window.addEventListener("providerUpdated",Te),()=>window.removeEventListener("providerUpdated",Te)},[t]);const xe=i!=null&&i.services?["Wszystkie",...new Set(i.services.map(X=>X.category).filter(Boolean))]:["Wszystkie"],Ze=((Or=i==null?void 0:i.services)==null?void 0:Or.filter(X=>C==="Wszystkie"||X.category===C))||[],Re=g.reduce((X,Te)=>X+Te.price,0),ke=g.reduce((X,Te)=>{const _e=Te.duration.match(/(\d+)/);return X+(_e?parseInt(_e[1]):30)},0),Le=X=>{x(Te=>Te.find(_e=>_e.id===X.id)?Te.filter(_e=>_e.id!==X.id):[...Te,X])},st=(()=>{var Us;const X=new Date,Te=[],_e=$.getFullYear(),Qe=$.getMonth(),Rt=new Date(_e,Qe,1),Lt=Rt.getDay()===0?6:Rt.getDay()-1,is={1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"};for(let Pn=0;Pn<42;Pn++){const Br=Pn-Lt+1,rt=new Date(_e,Qe,Br),Cn=rt.getMonth()===Qe,vs=rt<new Date(X.getFullYear(),X.getMonth(),X.getDate());let as=!1;if(i){const bo=is[rt.getDay()];as=!((Us=i.workingHours[bo])!=null&&Us.enabled)}Te.push({day:rt.getDate(),isToday:rt.toDateString()===X.toDateString(),disabled:!Cn||vs||as,isClosed:as,fullDate:rt,isCurrentMonth:Cn})}return Te})();N.useEffect(()=>{(async()=>{if(!(i!=null&&i.id)||!w)return;const Te=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String(w).padStart(2,"0")}`,_e=await On.getBookedSlots(i.id,Te);P(_e)})()},[i==null?void 0:i.id,w,$]);const $n=X=>({1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"})[X.getDay()]||null,yn=(()=>{if(!i||!w)return[];const X=[],Te=new Date,_e=new Date($.getFullYear(),$.getMonth(),w),Qe=$n(_e);if(!Qe)return[];const Rt=i.workingHours[Qe];if(!Rt.enabled)return[];const[Lt,is]=Rt.from.split(":").map(Number),[Us,Pn]=Rt.to.split(":").map(Number),Br=Us*60+Pn;let rt=Lt,Cn=is;for(;rt<Us||rt===Us&&Cn<Pn;){const vs=`${String(rt).padStart(2,"0")}:${String(Cn).padStart(2,"0")}`,as=rt*60+Cn,Jl=_e.toDateString()===Te.toDateString()&&(rt<Te.getHours()||rt===Te.getHours()&&Cn<=Te.getMinutes()),za=as+ke<=Br,Xl=Jl||F.includes(vs)||g.length>0&&!za;X.push({time:vs,disabled:Xl}),Cn+=30,Cn>=60&&(Cn=0,rt++)}return X})(),ws=async()=>{if(!s||!s.id){n("Zaloguj si, aby zarezerwowa wizyt","info"),e(`/auth?mode=login&redirect=/uslugodawcy/profil/${t}`);return}if(g.length===0){n("Wybierz przynajmniej jedn usug","error");return}if(!w||!S){n("Wybierz dat i godzin","error");return}i&&D(!0)},Mr=async()=>{if(!(!s||!i||!w||!S)){f(!0),console.log("Payment successful, creating booking for user:",s.id);try{const X=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String(w).padStart(2,"0")}`;if(!await On.isTimeSlotAvailable(i.id,X,S,ke)){n("Ten termin jest ju zajty. Wybierz inny.","error"),f(!1);return}const _e=g[0];await On.create({clientId:s.id,clientName:s.username||"Klient",clientEmail:s.email||"",clientPhone:s.phone||"",providerId:i.id,providerName:i.name,providerImage:i.image,serviceId:_e.id,serviceName:g.map(Qe=>Qe.name).join(", "),servicePrice:Re,serviceDuration:`${ke} min`,date:X,time:S}),console.log("Booking created successfully"),Q({date:`${w} ${$e[$.getMonth()]} ${$.getFullYear()}`,time:S,services:g.map(Qe=>Qe.name).join(", "),price:Re}),j(!0),x([]),E(null),A(null),n(" Rezerwacja opacona i potwierdzona!","success")}catch(X){if(console.error("Bd rezerwacji:",X),X.message==="SLOT_TAKEN"){if(n("Ten termin zosta wanie zarezerwowany przez kogo innego. Wybierz inny termin.","error"),i&&w){const Te=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String(w).padStart(2,"0")}`,_e=await On.getBookedSlots(i.id,Te);P(_e)}A(null)}else n("Bd podczas tworzenia rezerwacji","error")}finally{f(!1)}}};if(l)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"adowanie profilu..."})]})});if(!i)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Nie znaleziono profilu"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Ten usugodawca nie istnieje lub zosta usunity"}),r.jsx("button",{onClick:()=>e("/uslugodawcy"),className:"px-6 py-2 bg-primary text-white rounded-xl hover:bg-primary/90",children:"Wr do listy"})]})});const Bs={monday:"Pon",tuesday:"Wt",wednesday:"r",thursday:"Czw",friday:"Pt",saturday:"Sob",sunday:"Nd"};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b sticky top-0 z-40",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:r.jsxs("div",{className:"flex items-center justify-between h-14",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-gray-600 hover:text-primary transition-colors",children:[r.jsx(Ml,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Wr"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:Jt,disabled:R,className:`p-2 rounded-full transition-colors ${T?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,children:r.jsx(Xa,{className:`w-5 h-5 ${T?"fill-current":""}`})}),r.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-primary hover:bg-primary/10 transition-colors",children:r.jsx(PL,{className:"w-5 h-5"})})]})]})})}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"relative h-48 sm:h-64",children:[r.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),r.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[i.isPremium&&r.jsxs("span",{className:"px-3 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full flex items-center gap-1",children:[r.jsx(yt,{className:"w-3 h-3 fill-current"})," Premium"]}),i.isVerified&&r.jsxs("span",{className:"px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full flex items-center gap-1",children:[r.jsx(Mn,{className:"w-3 h-3"})," Zweryfikowany"]})]}),r.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:i.name}),r.jsx("p",{className:"text-white/90",children:i.profession})]})]}),r.jsxs("div",{className:"p-4 flex flex-wrap gap-3",children:[r.jsx(eh,{icon:yt,value:i.rating>0?i.rating.toFixed(1):"Nowy",label:i.reviewsCount>0?`(${i.reviewsCount} opinii)`:"",color:"bg-yellow-50 text-yellow-700"}),i.completedServices>0&&r.jsx(eh,{icon:gm,value:i.completedServices,label:"usug",color:"bg-blue-50 text-blue-700"}),i.hasTravel&&r.jsx(eh,{icon:pL,value:`${i.travelRadius} km`,label:"dojazd",color:"bg-green-50 text-green-700"}),i.acceptsCard&&r.jsx(eh,{icon:fo,value:"Karta",label:"",color:"bg-purple-50 text-purple-700"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"O mnie"}),i.description?r.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:i.description}):r.jsx("p",{className:"text-gray-400 italic",children:"Brak opisu"}),i.experience&&r.jsxs("p",{className:"mt-4 text-sm text-gray-500 flex items-center gap-2",children:[r.jsx(gm,{className:"w-4 h-4 text-primary"}),i.experience]}),i.features.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Udogodnienia"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:i.features.map((X,Te)=>r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:X},Te))})]}),i.certifications.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Certyfikaty"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:i.certifications.map((X,Te)=>r.jsxs("span",{className:"px-3 py-1 bg-green-50 text-green-700 text-sm rounded-full flex items-center gap-1",children:[r.jsx(Wt,{className:"w-3 h-3"})," ",X]},Te))})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Usugi i cennik"}),xe.length>1&&r.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:xe.map(X=>r.jsx("button",{onClick:()=>b(X),className:`px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors ${C===X?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X},X))}),r.jsx("div",{className:"space-y-3",children:Ze.length>0?Ze.map(X=>r.jsx(iD,{service:X,isSelected:g.some(Te=>Te.id===X.id),onToggle:()=>Le(X)},X.id)):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-500 mb-2",children:"Brak usug"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Ten usugodawca nie doda jeszcze usug"})]})})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Lokalizacja"}),r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx(Ir,{className:"w-5 h-5 text-primary mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:i.locationString}),i.location.address&&r.jsx("p",{className:"text-sm text-gray-500",children:i.location.address}),i.hasTravel&&r.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" Dojazd do klienta (do ",i.travelRadius," km)"]})]})]}),(Vr=i.location)!=null&&Vr.lat&&((or=i.location)!=null&&or.lng)?r.jsxs("div",{className:"h-48 rounded-xl overflow-hidden",children:[r.jsx("iframe",{title:"Lokalizacja usugodawcy",width:"100%",height:"100%",style:{border:0},loading:"lazy",src:`https://www.openstreetmap.org/export/embed.html?bbox=${i.location.lng-.01}%2C${i.location.lat-.01}%2C${i.location.lng+.01}%2C${i.location.lat+.01}&layer=mapnik&marker=${i.location.lat}%2C${i.location.lng}`}),r.jsx("a",{href:`https://www.openstreetmap.org/?mlat=${i.location.lat}&mlon=${i.location.lng}#map=16/${i.location.lat}/${i.location.lng}`,target:"_blank",rel:"noopener noreferrer",className:"block text-center text-sm text-primary hover:underline mt-2",children:"Otwrz wiksz map"})]}):r.jsx("div",{className:"h-48 bg-gray-100 rounded-xl flex items-center justify-center",children:r.jsx("p",{className:"text-gray-400",children:"Brak danych lokalizacji"})})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Godziny pracy"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(i.workingHours).map(([X,Te])=>r.jsxs("div",{className:`p-3 rounded-xl ${Te.enabled?"bg-green-50":"bg-gray-100"}`,children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:Bs[X]}),r.jsx("p",{className:`text-sm ${Te.enabled?"text-green-700":"text-gray-500"}`,children:Te.enabled?`${Te.from} - ${Te.to}`:"Zamknite"})]},X))})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Opinie klientw"}),i.reviewsCount>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(yt,{className:"w-5 h-5 text-amber-400 fill-amber-400"}),r.jsx("span",{className:"font-bold",children:i.rating.toFixed(1)})]}),r.jsxs("span",{className:"text-gray-500 text-sm",children:["(",i.reviewsCount," opinii)"]})]})]}),we?r.jsx("div",{className:"text-center py-8",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-primary mx-auto"})}):he.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(yt,{className:"w-12 h-12 text-gray-200 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Brak opinii"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Bd pierwszy i wystaw opini po skorzystaniu z usugi!"})]}):r.jsxs("div",{className:"space-y-4",children:[he.slice(0,5).map(X=>r.jsxs("div",{className:"border-b border-gray-100 pb-4 last:border-0",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white font-bold",children:X.clientName.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:X.clientName}),r.jsx("p",{className:"text-xs text-gray-500",children:X.serviceName})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(Te=>r.jsx(yt,{className:`w-4 h-4 ${Te<=X.rating?"text-amber-400 fill-amber-400":"text-gray-200"}`},Te))}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(X.createdAt).toLocaleDateString("pl-PL")})]})]}),r.jsx("p",{className:"text-gray-600 text-sm",children:X.comment}),X.providerResponse&&r.jsxs("div",{className:"mt-3 p-3 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg",children:[r.jsx("p",{className:"text-xs font-semibold text-emerald-700 mb-1",children:" Odpowied usugodawcy:"}),r.jsx("p",{className:"text-sm text-gray-700",children:X.providerResponse})]}),r.jsx("div",{className:"flex items-center justify-end mt-2",children:r.jsxs("button",{onClick:()=>ve(X),className:"text-xs text-gray-400 hover:text-red-500 flex items-center gap-1 transition-colors",title:"Zgo opini",children:[r.jsx(Cr,{className:"w-3 h-3"}),"Zgo"]})})]},X.id)),he.length>5&&r.jsxs("p",{className:"text-center text-sm text-gray-500",children:["... i ",he.length-5," wicej opinii"]})]})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 sticky top-20",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Zarezerwuj wizyt"}),g.length>0?r.jsxs("div",{className:"mb-4 p-4 bg-primary/5 rounded-xl",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Wybrane usugi:"}),g.map(X=>r.jsxs("div",{className:"flex justify-between text-sm py-1",children:[r.jsx("span",{children:X.name}),r.jsxs("span",{className:"font-medium",children:[X.price," z"]})]},X.id)),r.jsxs("div",{className:"flex justify-between mt-2 pt-2 border-t border-primary/20",children:[r.jsx("span",{className:"font-bold",children:"Razem:"}),r.jsxs("span",{className:"font-bold text-primary",children:[Re," z"]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Czas: ~",ke," min"]})]}):r.jsx("p",{className:"text-sm text-gray-500 mb-4 p-4 bg-gray-50 rounded-xl",children:"Wybierz usugi z listy"}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Data"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:et,disabled:!gt(),className:`p-1 rounded-full transition-colors ${gt()?"hover:bg-gray-100 text-gray-600":"text-gray-300 cursor-not-allowed"}`,children:r.jsx(t0,{className:"w-5 h-5"})}),r.jsxs("span",{className:"text-sm font-medium text-gray-700 min-w-[120px] text-center",children:[$e[$.getMonth()]," ",$.getFullYear()]}),r.jsx("button",{onClick:je,className:"p-1 rounded-full hover:bg-gray-100 text-gray-600 transition-colors",children:r.jsx(Ol,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[["Pn","Wt","r","Cz","Pt","So","Nd"].map(X=>r.jsx("div",{className:"text-xs font-medium text-gray-400 py-1",children:X},X)),st.slice(0,42).map((X,Te)=>r.jsx("button",{disabled:X.disabled,onClick:()=>!X.disabled&&E(X.day),className:`aspect-square text-sm rounded-lg transition-colors ${X.isCurrentMonth?X.disabled?"opacity-30 cursor-not-allowed":w===X.day?"bg-primary text-white":X.isToday?"ring-2 ring-primary text-primary":"hover:bg-gray-100":"text-gray-300"}`,children:X.day},Te))]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Godzina"}),w?yn.length===0?r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-center",children:[r.jsx("p",{className:"text-red-600 font-medium",children:"Dzie zamknity"}),r.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Wybierz inny dzie"})]}):r.jsx("div",{className:"grid grid-cols-3 gap-2",children:yn.map(X=>r.jsx("button",{disabled:X.disabled,onClick:()=>!X.disabled&&A(X.time),className:`py-2 text-sm rounded-lg transition-colors ${X.disabled?"opacity-30 cursor-not-allowed bg-gray-100":S===X.time?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"}`,children:X.time},X.time))}):r.jsx("p",{className:"text-sm text-gray-500 p-4 bg-gray-50 rounded-xl text-center",children:"Wybierz dat, aby zobaczy dostpne godziny"})]}),r.jsx("button",{onClick:ws,disabled:g.length===0||m||J,className:`w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${J?"bg-gray-200 text-gray-400 cursor-not-allowed":g.length>0&&!m?"bg-gradient-to-r from-primary to-secondary text-white hover:shadow-lg hover:-translate-y-0.5":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:J?" To Twj profil":m?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Rezerwuj..."]}):g.length>0?`Zarezerwuj za ${Re} z`:"Wybierz usug"}),r.jsxs("button",{onClick:()=>{if(!J){if(!s){n("Zaloguj si, aby napisa wiadomo","info"),e(`/auth?mode=login&redirect=/uslugodawcy/profil/${t}`);return}e(`/wiadomosci?providerId=${t}`)}},disabled:J,className:`w-full mt-3 py-3 border-2 rounded-xl font-medium transition-colors flex items-center justify-center gap-2 ${J?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-200 text-gray-700 hover:border-primary hover:text-primary"}`,children:[r.jsx(qg,{className:"w-5 h-5"}),J?" To Twj profil":"Napisz wiadomo"]}),J&&r.jsxs("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-xl text-center",children:[r.jsx("p",{className:"text-sm text-amber-700",children:" Podgld profilu - rezerwacje wyczone"}),r.jsx("button",{onClick:()=>e("/biznes/uslugi"),className:"mt-2 text-sm text-amber-600 underline hover:text-amber-800",children:"Przejd do panelu biznesowego"})]})]})})]})}),k&&W&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Rezerwacja wysana!"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:["Twoja proba o rezerwacj u ",r.jsx("strong",{children:i.name})," zostaa wysana. Czekaj na potwierdzenie od usugodawcy."]}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-left mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 font-medium mb-2",children:[r.jsx(Tt,{className:"w-4 h-4"}),"Oczekuje na potwierdzenie"]}),r.jsx("p",{className:"text-sm text-yellow-600",children:"Otrzymasz powiadomienie gdy usugodawca potwierdzi Twoj wizyt."})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-left mb-4",children:[r.jsxs("p",{className:"text-sm mb-1",children:[r.jsx("strong",{children:"Data:"})," ",W.date]}),r.jsxs("p",{className:"text-sm mb-1",children:[r.jsx("strong",{children:"Godzina:"})," ",W.time]}),r.jsxs("p",{className:"text-sm mb-1",children:[r.jsx("strong",{children:"Usugi:"})," ",W.services]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"cznie:"})," ",W.price," z"]})]}),r.jsx("button",{onClick:()=>{j(!1),Q(null),n("Rezerwacja wysana! Czekaj na potwierdzenie.","success")},className:"w-full py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90",children:"OK, rozumiem"})]})})}),r.jsx(rD,{isOpen:U,onClose:()=>D(!1),onSuccess:Mr,amount:Re,serviceName:g.map(X=>X.name).join(", ")||"Usuga",providerName:(i==null?void 0:i.name)||"",bookingDate:w?`${w} ${$e[$.getMonth()]} ${$.getFullYear()}`:void 0,bookingTime:S||void 0}),O&&ne&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(Cr,{className:"w-5 h-5 text-red-500"}),"Zgo opini"]}),r.jsx("button",{onClick:()=>q(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white text-sm font-bold",children:ne.clientName.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:ne.clientName}),r.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(X=>r.jsx(yt,{className:`w-3 h-3 ${X<=ne.rating?"text-amber-400 fill-amber-400":"text-gray-200"}`},X))})]})]}),r.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',ne.comment,'"']})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dlaczego zgaszasz t opini?"}),r.jsx("div",{className:"space-y-2 mb-4",children:["Faszywa opinia (osoba nie korzystaa z usugi)","Obraliwa lub wulgarna tre","Spam lub reklama","Narusza prywatno","Inny powd"].map(X=>r.jsx("button",{onClick:()=>le(X),className:`w-full text-left px-4 py-2 rounded-lg border-2 transition-colors ${se===X?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:r.jsx("span",{className:"text-sm",children:X})},X))}),r.jsx("textarea",{value:se,onChange:X=>le(X.target.value),placeholder:"Opisz szczegy zgoszenia...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none",rows:3}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum 10 znakw (",se.length,"/10)"]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>q(!1),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50",children:"Anuluj"}),r.jsx("button",{onClick:Ue,disabled:Se||se.length<10,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Se?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Wysyanie..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Cr,{className:"w-5 h-5"}),"Wylij zgoszenie"]})})]})]})})})]})},Di="conversations",th="messages",oD=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),Js={async getOrCreateConversation(t,e,n,s,i,o,l){try{const d=`conv_${t}_${s}`,m=await Rs(Ie(ae,Di,d));if(m.exists())return m.data();const f=new Date().toISOString(),g={id:d,participants:[t,i],participantNames:{[t]:e,[i]:o},participantAvatars:{[t]:n||"",[i]:l||""},providerId:s,providerOwnerId:i,clientId:t,lastMessage:"",lastMessageAt:f,lastMessageSenderId:"",unreadCount:{[t]:0,[i]:0},createdAt:f};return await _i(Ie(ae,Di,d),g),g}catch(d){throw console.error("getOrCreateConversation error:",d),d}},async getConversations(t){try{const e=dt(Fe(ae,Di),xt("participants","array-contains",t));return(await Ke(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.lastMessageAt).getTime()-new Date(i.lastMessageAt).getTime())}catch(e){return console.error("getConversations error:",e),[]}},async getConversationsByProvider(t){try{const e=dt(Fe(ae,Di),xt("providerId","==",t));return(await Ke(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.lastMessageAt).getTime()-new Date(i.lastMessageAt).getTime())}catch(e){return console.error("getConversationsByProvider error:",e),[]}},subscribeToConversations(t,e){const n=dt(Fe(ae,Di),xt("participants","array-contains",t));return _l(n,s=>{const i=new Map;s.docs.forEach(l=>{const d=l.data();i.has(d.id)||i.set(d.id,d)});const o=Array.from(i.values());o.sort((l,d)=>new Date(d.lastMessageAt).getTime()-new Date(l.lastMessageAt).getTime()),e(o)})},subscribeToProviderConversations(t,e){const n=dt(Fe(ae,Di),xt("providerId","==",t));return _l(n,s=>{const i=s.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.lastMessageAt).getTime()-new Date(o.lastMessageAt).getTime()),e(i)})},async getMessages(t){try{const e=dt(Fe(ae,th),xt("conversationId","==",t));return(await Ke(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(i.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(e){return console.error("getMessages error:",e),[]}},subscribeToMessages(t,e){const n=dt(Fe(ae,th),xt("conversationId","==",t));return _l(n,s=>{const i=s.docs.map(o=>o.data());i.sort((o,l)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime()),e(i)})},async sendMessage(t,e,n,s,i,o){try{const l=oD(),d=new Date().toISOString(),m={id:l,conversationId:t,senderId:e,senderName:n,senderAvatar:s||"",text:i,createdAt:d,read:!1};await _i(Ie(ae,th,l),m);const f=Ie(ae,Di,t),g=await Rs(f);if(g.exists()){const w={...g.data().unreadCount};w[o]=(w[o]||0)+1,await zt(f,{lastMessage:i,lastMessageAt:d,lastMessageSenderId:e,unreadCount:w})}return m}catch(l){throw console.error("sendMessage error:",l),l}},async markAsRead(t,e){try{const n=dt(Fe(ae,th),xt("conversationId","==",t)),i=(await Ke(n)).docs.filter(d=>{const m=d.data();return m.senderId!==e&&!m.read}).map(d=>zt(d.ref,{read:!0}));await Promise.all(i);const o=Ie(ae,Di,t),l=await Rs(o);if(l.exists()){const m={...l.data().unreadCount};m[e]=0,await zt(o,{unreadCount:m})}}catch(n){console.error("markAsRead error:",n)}},async countUnread(t){try{return(await this.getConversations(t)).reduce((n,s)=>n+(s.unreadCount[t]||0),0)}catch(e){return console.error("countUnread error:",e),0}},subscribeToUnreadCount(t,e){return this.subscribeToConversations(t,n=>{const s=n.reduce((i,o)=>i+(o.unreadCount[t]||0),0);e(s)})}},lD=()=>{const{user:t}=Et(),e=xs(),[n]=Zy(),[s,i]=N.useState([]),[o,l]=N.useState(null),[d,m]=N.useState([]),[f,g]=N.useState(""),[x,w]=N.useState(""),[E,S]=N.useState(!0),[A,C]=N.useState(!1),b=N.useRef(null);N.useEffect(()=>{(async()=>{const P=n.get("providerId");if(!(!P||!(t!=null&&t.id)))try{const T=await tn.getById(P);if(!T)return;const M=await Js.getOrCreateConversation(t.id,t.username||"Uytkownik",t.avatar||"",T.id,T.ownerId,T.name,T.image||"");l(M)}catch(T){console.error("Error initializing conversation:",T)}})()},[n,t]),N.useEffect(()=>{if(!(t!=null&&t.id)){S(!1);return}const F=Js.subscribeToConversations(t.id,P=>{i(P),S(!1)});return()=>F()},[t==null?void 0:t.id]),N.useEffect(()=>{if(!o||!(t!=null&&t.id))return;Js.markAsRead(o.id,t.id);const F=Js.subscribeToMessages(o.id,P=>{m(P)});return()=>F()},[o,t==null?void 0:t.id]),N.useEffect(()=>{var F;(F=b.current)==null||F.scrollIntoView({behavior:"smooth"})},[d]);const k=async()=>{if(!(!f.trim()||!o||!(t!=null&&t.id))){C(!0);try{const F=o.participants.find(P=>P!==t.id)||"";await Js.sendMessage(o.id,t.id,t.username||"Uytkownik",t.avatar||"",f.trim(),F),g("")}catch(F){console.error("Error sending message:",F)}finally{C(!1)}}},j=F=>{if(!(t!=null&&t.id))return{name:"Nieznany",avatar:""};const P=F.participants.find(T=>T!==t.id)||"";return{name:F.participantNames[P]||"Nieznany",avatar:F.participantAvatars[P]||""}},U=F=>{const P=new Date(F),M=new Date().getTime()-P.getTime(),R=Math.floor(M/6e4),B=Math.floor(M/36e5),$=Math.floor(M/864e5);return R<1?"Teraz":R<60?`${R} min`:B<24?`${B}h`:$<7?`${$}d`:P.toLocaleDateString("pl-PL")},D=s.filter(F=>j(F).name.toLowerCase().includes(x.toLowerCase()));return t?E?r.jsx("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center",children:r.jsx(Ve,{className:"w-12 h-12 animate-spin text-primary"})}):r.jsx("div",{className:"min-h-screen pt-20 pb-0",children:r.jsx("div",{className:"max-w-6xl mx-auto px-6",children:r.jsxs("div",{className:"h-[calc(100vh-120px)] flex bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:`w-full md:w-80 lg:w-96 border-r border-gray-100 flex flex-col ${o?"hidden md:flex":""}`,children:[r.jsxs("div",{className:"p-4 border-b border-gray-100",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Wiadomoci"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ti,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Szukaj...",value:x,onChange:F=>w(F.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:D.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(Bn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"Brak wiadomoci"}),r.jsx("p",{className:"text-sm mt-1",children:"Napisz do usugodawcy ze strony jego profilu"})]}):D.map(F=>{const P=j(F),T=t!=null&&t.id&&F.unreadCount[t.id]||0;return r.jsx("div",{onClick:()=>l(F),className:`p-4 border-b border-gray-50 cursor-pointer transition-colors ${(o==null?void 0:o.id)===F.id?"bg-primary/10":"hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[P.avatar?r.jsx("img",{src:P.avatar,alt:P.name,className:"w-12 h-12 rounded-full object-cover"}):r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white font-bold",children:P.name.charAt(0).toUpperCase()}),T>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:T})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:P.name}),r.jsx("span",{className:"text-xs text-gray-500",children:U(F.lastMessageAt)})]}),r.jsx("p",{className:`text-sm truncate ${T>0?"font-medium text-gray-900":"text-gray-500"}`,children:F.lastMessage||"Brak wiadomoci"})]})]})},F.id)})})]}),o?r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center gap-3",children:[r.jsx("button",{onClick:()=>l(null),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ml,{className:"w-5 h-5"})}),(()=>{const F=j(o);return r.jsxs(r.Fragment,{children:[F.avatar?r.jsx("img",{src:F.avatar,alt:F.name,className:"w-10 h-10 rounded-full object-cover"}):r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white font-bold",children:F.name.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:F.name}),r.jsx("div",{className:"text-xs text-gray-500",children:"Usugodawca"})]})]})})()]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[d.length===0?r.jsxs("div",{className:"text-center text-gray-500 py-8",children:[r.jsx("p",{children:"Rozpocznij rozmow"}),r.jsx("p",{className:"text-sm",children:"Napisz do usugodawcy"})]}):d.map(F=>{const P=F.senderId===(t==null?void 0:t.id);return r.jsx("div",{className:`flex ${P?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2 ${P?"bg-gradient-to-r from-primary to-secondary text-white":"bg-white text-gray-900 shadow-sm"}`,children:[r.jsx("p",{children:F.text}),r.jsx("div",{className:`text-xs mt-1 ${P?"text-white/70":"text-gray-400"}`,children:U(F.createdAt)})]})},F.id)}),r.jsx("div",{ref:b})]}),r.jsx("div",{className:"p-4 border-t border-gray-100 bg-white",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"text",value:f,onChange:F=>g(F.target.value),onKeyPress:F=>F.key==="Enter"&&k(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary"}),r.jsx("button",{onClick:k,disabled:!f.trim()||A,className:"p-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:A?r.jsx(Ve,{className:"w-5 h-5 animate-spin"}):r.jsx(Lu,{className:"w-5 h-5"})})]})})]}):r.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx(Bn,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"text-lg",children:"Wybierz konwersacj"}),r.jsx("p",{className:"text-sm",children:"lub napisz do usugodawcy z jego profilu"})]})})]})})}):r.jsx("div",{className:"min-h-screen pt-24 pb-12",children:r.jsx("div",{className:"max-w-4xl mx-auto px-6",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[r.jsx(Bn,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Zaloguj si"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Musisz by zalogowany, aby korzysta z wiadomoci"}),r.jsx("button",{onClick:()=>e("/auth?mode=login"),className:"px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold",children:"Zaloguj si"})]})})})},cD=()=>{const{user:t}=Et(),{showToast:e}=ln(),n=xs(),[s,i]=N.useState([]),[o,l]=N.useState(!0),[d,m]=N.useState("all"),[f,g]=N.useState("all");N.useEffect(()=>{if(!t||!t.id){console.log("NotificationsPage: No user or user.id"),l(!1);return}console.log("NotificationsPage: Subscribing for user",t.id);const D=dn.subscribe(t.id,F=>{console.log("NotificationsPage: Got notifications",F.length),i(F),l(!1)});return()=>D()},[t]);const x=async D=>{try{await dn.markAsRead(D)}catch{e("Bd oznaczania jako przeczytane","error")}},w=async()=>{if(!(!t||!t.id))try{await dn.markAllAsRead(t.id),e("Wszystkie oznaczone jako przeczytane","success")}catch{e("Bd oznaczania powiadomie","error")}},E=async D=>{try{await dn.delete(D),e("Powiadomienie usunite","success")}catch{e("Bd usuwania powiadomienia","error")}},S=async()=>{if(!(!t||!t.id)&&confirm("Czy na pewno chcesz usun wszystkie powiadomienia?"))try{await dn.deleteAllByUser(t.id),e("Wszystkie powiadomienia usunite","success")}catch{e("Bd usuwania powiadomie","error")}},A=D=>{var F,P;x(D.id),(F=D.data)!=null&&F.bookingId?n("/profil"):D.type==="new_message"?n("/wiadomosci"):D.type==="new_review"&&((P=D.data)!=null&&P.providerId)&&n(`/uslugodawcy/profil/${D.data.providerId}`)},C=D=>{switch(D){case"booking_request":case"booking_confirmed":case"booking_cancelled":case"booking_completed":case"booking_reminder":return r.jsx(Yt,{className:"w-5 h-5"});case"new_message":return r.jsx(Bn,{className:"w-5 h-5"});case"new_review":return r.jsx(yt,{className:"w-5 h-5"});default:return r.jsx(Ls,{className:"w-5 h-5"})}},b=D=>{switch(D){case"booking_request":return"bg-blue-100 text-blue-600";case"booking_confirmed":return"bg-green-100 text-green-600";case"booking_cancelled":return"bg-red-100 text-red-600";case"booking_completed":return"bg-purple-100 text-purple-600";case"booking_reminder":return"bg-yellow-100 text-yellow-600";case"new_message":return"bg-indigo-100 text-indigo-600";case"new_review":return"bg-amber-100 text-amber-600";default:return"bg-gray-100 text-gray-600"}},k=D=>{const F=new Date(D),T=new Date().getTime()-F.getTime(),M=Math.floor(T/6e4),R=Math.floor(T/36e5),B=Math.floor(T/864e5);return M<1?"Teraz":M<60?`${M} min temu`:R<24?`${R}h temu`:B===1?"Wczoraj":B<7?`${B} dni temu`:F.toLocaleDateString("pl-PL")},j=s.filter(D=>!(d==="unread"&&D.read||f!=="all"&&(f==="booking"&&!D.type.startsWith("booking")||f==="message"&&D.type!=="new_message"||f==="system"&&D.type!=="system"))),U=s.filter(D=>!D.read).length;return o?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-primary"})}):t?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-8 pb-16",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Powiadomienia"}),r.jsx("p",{className:"text-gray-600",children:U>0?`${U} nieprzeczytanych`:"Wszystkie przeczytane"})]}),r.jsx("div",{className:"flex items-center gap-2",children:U>0&&r.jsxs("button",{onClick:w,className:"px-4 py-2 text-sm font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:[r.jsx(Wt,{className:"w-4 h-4 inline mr-1"}),"Przeczytaj wszystkie"]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>m("all"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${d==="all"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:"Wszystkie"}),r.jsxs("button",{onClick:()=>m("unread"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${d==="unread"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:["Nieprzeczytane (",U,")"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(n0,{className:"w-4 h-4 text-gray-400"}),r.jsxs("select",{value:f,onChange:D=>g(D.target.value),className:"bg-transparent text-sm text-gray-600 focus:outline-none cursor-pointer",children:[r.jsx("option",{value:"all",children:"Wszystkie typy"}),r.jsx("option",{value:"booking",children:"Rezerwacje"}),r.jsx("option",{value:"message",children:"Wiadomoci"}),r.jsx("option",{value:"system",children:"Systemowe"})]})]}),s.length>0&&r.jsx("button",{onClick:S,className:"ml-auto text-sm text-red-500 hover:text-red-600",children:"Usu wszystkie"})]})}),r.jsx("div",{className:"space-y-3",children:j.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[r.jsx(Ls,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak powiadomie"}),r.jsx("p",{className:"text-gray-500",children:d==="unread"?"Wszystkie powiadomienia zostay przeczytane":"Nie masz jeszcze adnych powiadomie"})]}):j.map(D=>r.jsxs("div",{className:`bg-white rounded-xl shadow-sm p-4 flex items-start gap-4 transition-all hover:shadow-md cursor-pointer ${D.read?"":"border-l-4 border-primary"}`,onClick:()=>A(D),children:[r.jsx("div",{className:`p-3 rounded-xl ${b(D.type)}`,children:C(D.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:`font-semibold ${D.read?"text-gray-700":"text-gray-900"}`,children:[dn.getIcon(D.type)," ",D.title]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D.message}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:k(D.createdAt)})]}),r.jsxs("div",{className:"flex items-center gap-1 ml-4",onClick:F=>F.stopPropagation(),children:[!D.read&&r.jsx("button",{onClick:()=>x(D.id),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Oznacz jako przeczytane",children:r.jsx(Wt,{className:"w-4 h-4 text-gray-400"})}),r.jsx("button",{onClick:()=>E(D.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:r.jsx(nr,{className:"w-4 h-4 text-gray-400 hover:text-red-500"})})]})]})})]},D.id))})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ls,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Zaloguj si"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Zaloguj si, aby zobaczy powiadomienia"}),r.jsx(Ne,{to:"/auth",className:"text-primary hover:underline",children:"Przejd do logowania"})]})})},uD=()=>{const t=[{icon:Xa,title:"Pasja",description:"Kochamy to co robimy i wkadamy serce w kady aspekt naszej platformy."},{icon:Bl,title:"Spoeczno",description:"Budujemy mosty midzy specjalistami a klientami, tworzc siln spoeczno."},{icon:Mn,title:"Zaufanie",description:"Bezpieczestwo i wiarygodno to fundamenty naszej dziaalnoci."},{icon:IL,title:"Innowacja",description:"Cigle rozwijamy platform, by oferowa najlepsze dowiadczenia."}],e=[{value:"10,000+",label:"Zadowolonych klientw"},{value:"500+",label:"Specjalistw"},{value:"25,000+",label:"Wykonanych usug"},{value:"4.9",label:"rednia ocena"}],n=[{name:"Mykyta Ivchenko",role:"Co-Founder & Developer",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200"},{name:"Grzegorz Rychlicki",role:"Co-Founder & CEO",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200"},{name:"Jakub Biaasik",role:"Co-Founder & CTO",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=200"}];return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"O nas"}),r.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"ToMyHomeApp to platforma czca profesjonalnych specjalistw beauty i wellness z klientami szukajcymi usug w zaciszu wasnego domu."})]})}),r.jsx("section",{className:"py-16",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 text-primary rounded-full text-sm font-semibold mb-6",children:[r.jsx(AL,{className:"w-4 h-4"}),"Nasza misja"]}),r.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Demokratyzujemy dostp do profesjonalnych usug beauty"}),r.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:"Wierzymy, e kady zasuguje na profesjonaln pielgnacj bez wychodzenia z domu. Nasza platforma powstaa z myl o wygodzie klientw i rozwoju specjalistw."}),r.jsx("p",{className:"text-gray-600 leading-relaxed",children:"czymy najlepszych specjalistw z klientami, zapewniajc bezpieczestwo, wygod i najwysz jako usug. Od fryzjerstwa po masae - wszystko dostpne na wycignicie rki."})]}),r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=600",alt:"Nasza misja",className:"rounded-2xl shadow-xl"}),r.jsx("div",{className:"absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:r.jsx(gm,{className:"w-6 h-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-gray-900",children:"Od 2024"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Na rynku"})]})]})})]})]})})}),r.jsx("section",{className:"py-16 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((s,i)=>r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-primary mb-2",children:s.value}),r.jsx("p",{className:"text-gray-600",children:s.label})]},i))})})}),r.jsx("section",{className:"py-16",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Nasze wartoci"}),r.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Kierujemy si zasadami, ktre pomagaj nam tworzy lepsz platform dla wszystkich."})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((s,i)=>r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4",children:r.jsx(s.icon,{className:"w-6 h-6 text-primary"})}),r.jsx("h3",{className:"font-bold text-lg mb-2",children:s.title}),r.jsx("p",{className:"text-gray-600 text-sm",children:s.description})]},i))})]})}),r.jsx("section",{className:"py-16 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Nasz zesp"}),r.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Poznaj ludzi, ktrzy tworz ToMyHomeApp i dbaj o Twoje dowiadczenia."})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-3xl mx-auto",children:n.map((s,i)=>r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:s.image,alt:s.name,className:"w-32 h-32 rounded-full mx-auto mb-4 object-cover"}),r.jsx("h3",{className:"font-bold text-lg",children:s.name}),r.jsx("p",{className:"text-gray-500",children:s.role})]},i))})]})}),r.jsx("section",{className:"py-16 bg-gradient-to-r from-primary to-secondary text-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Docz do nas!"}),r.jsx("p",{className:"text-white/90 mb-8 max-w-2xl mx-auto",children:"Zosta czci naszej spoecznoci - jako klient lub specjalista."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("a",{href:"/uslugodawcy",className:"px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Znajd specjalist"}),r.jsx("a",{href:"/auth?mode=register&type=provider",className:"px-8 py-3 bg-white/20 text-white font-semibold rounded-xl hover:bg-white/30 transition-all",children:"Zosta specjalist"})]})]})})]})},dD=()=>{const t=[{icon:Xa,title:"Ubezpieczenie zdrowotne",description:"Peny pakiet medyczny dla Ciebie i rodziny"},{icon:VL,title:"Elastyczna praca",description:"Hybrydowy model pracy - biuro lub zdalnie"},{icon:Bl,title:"wietny zesp",description:"Pracuj z pasjonatami technologii i beauty"},{icon:gL,title:"Benefity",description:"Karta sportowa, owocowe wtorki, integracje"}],e=[{title:"Senior Frontend Developer",department:"Engineering",location:"Pozna / Remote",type:"Peny etat",description:"Szukamy dowiadczonego frontend developera do rozwoju naszej platformy React."},{title:"Product Designer",department:"Design",location:"Pozna / Remote",type:"Peny etat",description:"Docz do zespou designu i twrz pikne interfejsy dla naszych uytkownikw."},{title:"Customer Success Manager",department:"Operations",location:"Pozna",type:"Peny etat",description:"Pomagaj naszym specjalistom rozwija ich biznesy na platformie."},{title:"Marketing Specialist",department:"Marketing",location:"Pozna / Remote",type:"Peny etat",description:"Twrz kampanie marketingowe i rozwijaj nasz obecno w social media."}];return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Kariera"}),r.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Docz do zespou, ktry zmienia bran beauty i wellness w Polsce. Szukamy talentw, ktre pomog nam rosn!"})]})}),r.jsx("section",{className:"py-16",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Dlaczego warto z nami pracowa?"}),r.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Oferujemy nie tylko prac, ale moliwo rozwoju w dynamicznym startupie."})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((n,s)=>r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center",children:[r.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:r.jsx(n.icon,{className:"w-7 h-7 text-primary"})}),r.jsx("h3",{className:"font-bold text-lg mb-2",children:n.title}),r.jsx("p",{className:"text-gray-600 text-sm",children:n.description})]},s))})]})}),r.jsx("section",{className:"py-16 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Otwarte stanowiska"}),r.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Znajd swoj wymarzon rol i docz do naszego zespou."})]}),r.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:e.map((n,s)=>r.jsx("div",{className:"bg-gray-50 p-6 rounded-2xl hover:shadow-md transition-shadow cursor-pointer group",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary text-xs font-semibold rounded-full",children:n.department})}),r.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-primary transition-colors",children:n.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:n.description}),r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ir,{className:"w-4 h-4"}),n.location]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Tt,{className:"w-4 h-4"}),n.type]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold group-hover:translate-x-2 transition-transform",children:["Aplikuj",r.jsx(Ol,{className:"w-5 h-5"})]})]})},s))})]})}),r.jsx("section",{className:"py-16",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[r.jsx(wa,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie znalaze odpowiedniej oferty?"}),r.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Wylij nam swoje CV, a odezwiemy si gdy pojawi si stanowisko odpowiadajce Twoim umiejtnociom."}),r.jsxs("a",{href:"mailto:kariera@tomyhomeapp.pl",className:"inline-flex items-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:["Wylij CV",r.jsx(Ol,{className:"w-5 h-5"})]})]})})})]})},hD=()=>{const t={title:"Jak wybra idealnego fryzjera mobilnego? Kompletny przewodnik",excerpt:"Dowiedz si, na co zwraca uwag przy wyborze specjalisty, ktry przyjedzie do Twojego domu. Porady ekspertw i wskazwki od naszych najlepszych fryzjerw.",image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800",author:"Anna Kowalska",date:"20 grudnia 2024",readTime:"8 min",category:"Porady"},e=[{title:"5 trendw w manicure na 2025 rok",excerpt:"Poznaj najgortsze trendy w stylizacji paznokci, ktre bd krlowa w nadchodzcym roku.",image:"https://images.unsplash.com/photo-1604654894610-df63bc536371?w=400",author:"Marta Winiewska",date:"18 grudnia 2024",readTime:"5 min",category:"Trendy"},{title:"Masa relaksacyjny w domu - co przygotowa?",excerpt:"Lista rzeczy, ktre warto mie pod rk przed wizyt masaysty w Twoim domu.",image:"https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=400",author:"Tomasz Zieliski",date:"15 grudnia 2024",readTime:"4 min",category:"Porady"},{title:"Jak zosta specjalist na ToMyHomeApp?",excerpt:"Przewodnik krok po kroku dla profesjonalistw, ktrzy chc doczy do naszej platformy.",image:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=400",author:"Piotr Nowak",date:"12 grudnia 2024",readTime:"6 min",category:"Dla specjalistw"},{title:"Pielgnacja wosw zim - porady eksperta",excerpt:"Jak dba o wosy w chodne miesice? Nasze specjalistki dziel si sekretami.",image:"https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=400",author:"Karolina Maj",date:"10 grudnia 2024",readTime:"5 min",category:"Porady"},{title:"Historia sukcesu: Od maego salonu do 100 klientw miesicznie",excerpt:"Poznaj histori Ewy, ktra dziki ToMyHomeApp rozwina swj biznes.",image:"https://images.unsplash.com/photo-1582095133179-bfd08e2fc6b3?w=400",author:"Ewa Szymaska",date:"8 grudnia 2024",readTime:"7 min",category:"Historie sukcesu"},{title:"Bezpieczestwo usug mobilnych - na co zwraca uwag?",excerpt:"Wskazwki dotyczce bezpieczestwa zarwno dla klientw, jak i specjalistw.",image:"https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=400",author:"Anna Kowalska",date:"5 grudnia 2024",readTime:"6 min",category:"Bezpieczestwo"}],n=["Wszystkie","Porady","Trendy","Dla specjalistw","Historie sukcesu","Bezpieczestwo"];return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Blog"}),r.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Porady, inspiracje i nowoci ze wiata beauty i wellness. Bd na bieco z najnowszymi trendami!"})]})}),r.jsx("section",{className:"py-8 bg-white border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:n.map((s,i)=>r.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i===0?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s},i))})})}),r.jsx("section",{className:"py-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:r.jsxs("div",{className:"grid lg:grid-cols-2",children:[r.jsx("img",{src:t.image,alt:t.title,className:"w-full h-64 lg:h-full object-cover"}),r.jsxs("div",{className:"p-8 lg:p-12 flex flex-col justify-center",children:[r.jsx("span",{className:"inline-block px-3 py-1 bg-primary/10 text-primary text-sm font-semibold rounded-full w-fit mb-4",children:t.category}),r.jsx("h2",{className:"text-2xl lg:text-3xl font-bold mb-4",children:t.title}),r.jsx("p",{className:"text-gray-600 mb-6",children:t.excerpt}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-6",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(rs,{className:"w-4 h-4"}),t.author]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Yt,{className:"w-4 h-4"}),t.date]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Tt,{className:"w-4 h-4"}),t.readTime]})]}),r.jsxs("button",{className:"flex items-center gap-2 text-primary font-semibold hover:gap-3 transition-all",children:["Czytaj wicej",r.jsx(dL,{className:"w-5 h-5"})]})]})]})})})}),r.jsx("section",{className:"py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-8",children:"Najnowsze artykuy"}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((s,i)=>r.jsxs("article",{className:"bg-white rounded-2xl shadow-sm overflow-hidden hover:shadow-md transition-shadow cursor-pointer group",children:[r.jsxs("div",{className:"relative overflow-hidden",children:[r.jsx("img",{src:s.image,alt:s.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),r.jsx("span",{className:"absolute top-4 left-4 px-3 py-1 bg-white/90 text-sm font-medium rounded-full",children:s.category})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"font-bold text-lg mb-2 group-hover:text-primary transition-colors",children:s.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.excerpt}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(rs,{className:"w-4 h-4"}),s.author]}),r.jsx("span",{children:s.readTime})]})]})]},i))})]})}),r.jsx("section",{className:"py-16 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie przegap adnego artykuu!"}),r.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Zapisz si do naszego newslettera i otrzymuj najnowsze porady i inspiracje prosto na swoj skrzynk."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center max-w-md mx-auto",children:[r.jsx("input",{type:"email",placeholder:"Twj email...",className:"flex-1 px-4 py-3 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"}),r.jsx("button",{className:"px-6 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Zapisz si"})]})]})})})]})},mD=()=>{const[t,e]=N.useState({name:"",email:"",subject:"",message:""}),[n,s]=N.useState(!1),[i,o]=N.useState(!1),l=async f=>{f.preventDefault(),s(!0),await new Promise(g=>setTimeout(g,1e3)),s(!1),o(!0),e({name:"",email:"",subject:"",message:""})},d=[{icon:Rr,title:"Email",value:"kontakt@tomyhomeapp.pl",link:"mailto:kontakt@tomyhomeapp.pl"},{icon:va,title:"Telefon",value:"+48 123 456 789",link:"tel:+48123456789"},{icon:Ir,title:"Adres",value:"ul. Przykadowa 1, 61-001 Pozna",link:"https://maps.google.com"},{icon:Tt,title:"Godziny pracy",value:"Pn-Pt: 9:00 - 17:00",link:null}],m=[{icon:_L,title:"Obsuga klienta",description:"Pomoc z rezerwacjami i kontem",email:"pomoc@tomyhomeapp.pl"},{icon:mL,title:"Dla specjalistw",description:"Pytania dotyczce wsppracy",email:"specjalisci@tomyhomeapp.pl"},{icon:Bn,title:"Media i PR",description:"Zapytania prasowe i wspprace",email:"media@tomyhomeapp.pl"}];return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Kontakt"}),r.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Masz pytania? Chtnie pomoemy! Skontaktuj si z nami w dogodny dla Ciebie sposb."})]})}),r.jsx("section",{className:"py-12 -mt-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map((f,g)=>r.jsxs("a",{href:f.link||"#",className:`bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow ${f.link?"cursor-pointer":"cursor-default"}`,children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4",children:r.jsx(f.icon,{className:"w-6 h-6 text-primary"})}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:f.title}),r.jsx("p",{className:"text-gray-600",children:f.value})]},g))})})}),r.jsx("section",{className:"py-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[r.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Wylij wiadomo"}),i?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Lu,{className:"w-8 h-8 text-green-600"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Wiadomo wysana!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Dzikujemy za kontakt. Odpowiemy najszybciej jak to moliwe."}),r.jsx("button",{onClick:()=>o(!1),className:"text-primary font-semibold hover:underline",children:"Wylij kolejn wiadomo"})]}):r.jsxs("form",{onSubmit:l,className:"space-y-6",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),r.jsx("input",{type:"text",required:!0,value:t.name,onChange:f=>e({...t,name:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",placeholder:"Jan Kowalski"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",required:!0,value:t.email,onChange:f=>e({...t,email:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",placeholder:"jan@example.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temat"}),r.jsxs("select",{required:!0,value:t.subject,onChange:f=>e({...t,subject:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:[r.jsx("option",{value:"",children:"Wybierz temat"}),r.jsx("option",{value:"general",children:"Pytanie oglne"}),r.jsx("option",{value:"booking",children:"Problem z rezerwacj"}),r.jsx("option",{value:"account",children:"Problem z kontem"}),r.jsx("option",{value:"specialist",children:"Chc zosta specjalist"}),r.jsx("option",{value:"partnership",children:"Wsppraca biznesowa"}),r.jsx("option",{value:"other",children:"Inne"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wiadomo"}),r.jsx("textarea",{required:!0,rows:5,value:t.message,onChange:f=>e({...t,message:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 resize-none",placeholder:"Opisz swoje pytanie lub problem..."})]}),r.jsx("button",{type:"submit",disabled:n,className:"w-full py-3 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-xl hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:n?"Wysyanie...":r.jsxs(r.Fragment,{children:[r.jsx(Lu,{className:"w-5 h-5"}),"Wylij wiadomo"]})})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Dziay"}),r.jsx("div",{className:"space-y-4 mb-8",children:m.map((f,g)=>r.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(f.icon,{className:"w-6 h-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900",children:f.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-2",children:f.description}),r.jsx("a",{href:`mailto:${f.email}`,className:"text-primary font-medium hover:underline",children:f.email})]})]})},g))}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Nasza lokalizacja"}),r.jsx("div",{className:"h-64 bg-gray-100 rounded-xl overflow-hidden",children:r.jsx("iframe",{title:"Lokalizacja",width:"100%",height:"100%",style:{border:0},loading:"lazy",src:"https://www.openstreetmap.org/export/embed.html?bbox=16.90%2C52.40%2C16.95%2C52.42&layer=mapnik"})}),r.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"ul. Przykadowa 1, 61-001 Pozna"})]})]})]})})})]})},fD=()=>{const[t,e]=N.useState("all"),[n,s]=N.useState(""),[i,o]=N.useState(null),l=[{id:"all",label:"Wszystkie",icon:bl},{id:"client",label:"Dla klientw",icon:rs},{id:"specialist",label:"Dla specjalistw",icon:wa},{id:"payments",label:"Patnoci",icon:fo},{id:"safety",label:"Bezpieczestwo",icon:Mn}],m=[{category:"client",question:"Jak zarezerwowa wizyt u specjalisty?",answer:"Aby zarezerwowa wizyt, wyszukaj interesujc Ci usug lub specjalist, wybierz odpowiedni termin z kalendarza i potwierd rezerwacj. Otrzymasz powiadomienie email z potwierdzeniem oraz przypomnienie przed wizyt."},{category:"client",question:"Czy mog anulowa rezerwacj?",answer:'Tak, moesz anulowa rezerwacj w dowolnym momencie. Zalecamy jednak anulowanie z minimum 24-godzinnym wyprzedzeniem, aby specjalista mg przyj innych klientw. Anulowanie moesz wykona w zakadce "Moje rezerwacje".'},{category:"client",question:"Jak dziaa usuga z dojazdem do domu?",answer:"Specjalici oferujcy usugi mobilne przyjedaj do Twojego domu z penym wyposaeniem. Przy rezerwacji podajesz swj adres, a specjalista potwierdza moliwo dojazdu. Niektrzy specjalici mog doliczy opat za dojazd."},{category:"client",question:"Co jeli nie jestem zadowolony z usugi?",answer:"Twoje zadowolenie jest dla nas najwaniejsze. Jeli usuga nie spenia Twoich oczekiwa, skontaktuj si z nami przez formularz kontaktowy w cigu 48 godzin. Rozpatrzymy kad reklamacj indywidualnie."},{category:"specialist",question:"Jak zosta specjalist na platformie?",answer:'Zarejestruj si wybierajc opcj "Konto specjalisty", uzupenij swj profil, dodaj usugi i zdjcia portfolio. Po weryfikacji Twoje konto zostanie aktywowane i bdziesz widoczny dla klientw.'},{category:"specialist",question:"Ile kosztuje konto specjalisty?",answer:"Rejestracja i podstawowe konto s cakowicie bezpatne. Pobieramy niewielk prowizj tylko od zrealizowanych rezerwacji. Oferujemy te plany Premium z dodatkowymi funkcjami promocyjnymi."},{category:"specialist",question:"Jak ustawi swoje godziny pracy?",answer:'W panelu specjalisty przejd do sekcji "Godziny pracy". Moesz ustawi godziny dla kadego dnia tygodnia osobno, a take blokowa konkretne daty gdy nie pracujesz.'},{category:"specialist",question:"Jak otrzymuj patnoci za usugi?",answer:"Patnoci s przetwarzane przez nasz platform. Po zrealizowanej usudze rodki trafiaj na Twoje konto w systemie. Moesz je wypaci na konto bankowe w dowolnym momencie (minimum 50 z)."},{category:"payments",question:"Jakie formy patnoci s akceptowane?",answer:"Akceptujemy patnoci kart (Visa, Mastercard), BLIK, szybkie przelewy oraz tradycyjne przelewy bankowe. Niektrzy specjalici akceptuj te patno gotwk na miejscu."},{category:"payments",question:"Kiedy nastpuje patno za usug?",answer:"Patno jest pobierana po potwierdzeniu rezerwacji przez specjalist. rodki s blokowane na Twoim koncie i przekazywane specjalicie po wykonaniu usugi."},{category:"payments",question:"Czy otrzymam faktur?",answer:"Tak, po kadej transakcji otrzymasz potwierdzenie patnoci na email. Jeli potrzebujesz faktury VAT, moesz j wygenerowa w panelu uytkownika lub poprosi o ni specjalist."},{category:"safety",question:"Czy specjalici s weryfikowani?",answer:"Tak, kady specjalista przechodzi proces weryfikacji tosamoci. Sprawdzamy dokumenty, certyfikaty i dowiadczenie. Dodatkowo system opinii pozwala klientom ocenia jako usug."},{category:"safety",question:"Jak chronione s moje dane osobowe?",answer:"Stosujemy najwysze standardy bezpieczestwa danych zgodne z RODO. Twoje dane s szyfrowane i nigdy nie s udostpniane osobom trzecim bez Twojej zgody. Wicej w naszej Polityce Prywatnoci."},{category:"safety",question:"Co zrobi w przypadku problemu podczas wizyty?",answer:"W nagych przypadkach skontaktuj si z nami przez formularz kontaktowy lub telefon. Nasz zesp wsparcia jest dostpny 7 dni w tygodniu i pomoe rozwiza kady problem."}].filter(f=>{const g=t==="all"||f.category===t,x=f.question.toLowerCase().includes(n.toLowerCase())||f.answer.toLowerCase().includes(n.toLowerCase());return g&&x});return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Czsto zadawane pytania"}),r.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto mb-8",children:"Znajd odpowiedzi na najczstsze pytania dotyczce naszej platformy."}),r.jsxs("div",{className:"max-w-xl mx-auto relative",children:[r.jsx(Ti,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Szukaj pytania...",value:n,onChange:f=>s(f.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"})]})]})}),r.jsx("section",{className:"py-8 bg-white border-b sticky top-16 z-10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:l.map(f=>r.jsxs("button",{onClick:()=>e(f.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${t===f.id?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[r.jsx(f.icon,{className:"w-4 h-4"}),f.label]},f.id))})})}),r.jsx("section",{className:"py-12",children:r.jsx("div",{className:"max-w-3xl mx-auto px-6",children:m.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(bl,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak wynikw"}),r.jsx("p",{className:"text-gray-600",children:"Nie znaleziono pyta pasujcych do kryteriw. Sprbuj innych sw kluczowych."})]}):r.jsx("div",{className:"space-y-4",children:m.map((f,g)=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>o(i===g?null:g),className:"w-full px-6 py-5 text-left flex items-center justify-between gap-4",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:f.question}),r.jsx(ym,{className:`w-5 h-5 text-gray-400 transition-transform ${i===g?"rotate-180":""}`})]}),i===g&&r.jsx("div",{className:"px-6 pb-5",children:r.jsx("p",{className:"text-gray-600 leading-relaxed",children:f.answer})})]},g))})})}),r.jsx("section",{className:"py-16 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[r.jsx(bl,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie znalaze odpowiedzi?"}),r.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Nasz zesp wsparcia chtnie odpowie na Twoje pytania. Skontaktuj si z nami!"}),r.jsx("a",{href:"/kontakt",className:"inline-flex items-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Skontaktuj si z nami"})]})})})]})},pD=()=>{const t="1 grudnia 2024",e=[{title:"1. Postanowienia oglne",content:`
        <p>1.1. Niniejszy Regulamin okrela zasady korzystania z platformy ToMyHomeApp, dostpnej pod adresem tomyhomeapp.pl.</p>
        <p>1.2. Wacicielem i operatorem platformy jest ToMyHomeApp Sp. z o.o. z siedzib w Poznaniu, ul. Przykadowa 1, 61-001 Pozna, wpisana do rejestru przedsibiorcw KRS pod numerem 0000000000.</p>
        <p>1.3. Korzystanie z platformy oznacza akceptacj niniejszego Regulaminu.</p>
        <p>1.4. Platforma umoliwia czenie Klientw ze Specjalistami wiadczcymi usugi z zakresu beauty i wellness.</p>
      `},{title:"2. Definicje",content:`
        <p><strong>Platforma</strong> - serwis internetowy ToMyHomeApp umoliwiajcy rezerwacj usug.</p>
        <p><strong>Klient</strong> - osoba fizyczna korzystajca z Platformy w celu rezerwacji usug.</p>
        <p><strong>Specjalista</strong> - osoba fizyczna lub prawna oferujca swoje usugi za porednictwem Platformy.</p>
        <p><strong>Usuga</strong> - wiadczenie oferowane przez Specjalist za porednictwem Platformy.</p>
        <p><strong>Rezerwacja</strong> - umowa o wiadczenie Usugi zawarta midzy Klientem a Specjalist.</p>
        <p><strong>Konto</strong> - indywidualne konto uytkownika na Platformie.</p>
      `},{title:"3. Rejestracja i Konto",content:`
        <p>3.1. Korzystanie z penej funkcjonalnoci Platformy wymaga utworzenia Konta.</p>
        <p>3.2. Rejestracja jest bezpatna i wymaga podania prawdziwych danych osobowych.</p>
        <p>3.3. Uytkownik zobowizuje si do zachowania poufnoci danych logowania.</p>
        <p>3.4. Jedno Konto moe by uywane wycznie przez jedn osob.</p>
        <p>3.5. Operator zastrzega sobie prawo do zawieszenia lub usunicia Konta w przypadku naruszenia Regulaminu.</p>
      `},{title:"4. Rezerwacje",content:`
        <p>4.1. Rezerwacja zostaje dokonana po wyborze Usugi, terminu i potwierdzeniu przez Specjalist.</p>
        <p>4.2. Klient otrzymuje potwierdzenie Rezerwacji drog elektroniczn.</p>
        <p>4.3. Anulowanie Rezerwacji jest moliwe zgodnie z polityk anulowania danego Specjalisty.</p>
        <p>4.4. Zalecamy anulowanie z minimum 24-godzinnym wyprzedzeniem.</p>
        <p>4.5. Niestawienie si na umwion wizyt bez uprzedniego anulowania moe skutkowa naliczeniem opaty.</p>
      `},{title:"5. Patnoci",content:`
        <p>5.1. Ceny Usug s okrelane przez Specjalistw i widoczne przy kadej ofercie.</p>
        <p>5.2. Platforma umoliwia patnoci online za porednictwem zaufanych operatorw patnoci.</p>
        <p>5.3. Patno jest pobierana po potwierdzeniu Rezerwacji przez Specjalist.</p>
        <p>5.4. W przypadku anulowania Rezerwacji, zwrot rodkw nastpuje zgodnie z polityk zwrotw.</p>
        <p>5.5. Platforma pobiera prowizj od Specjalistw za zrealizowane Rezerwacje.</p>
      `},{title:"6. Obowizki Specjalistw",content:`
        <p>6.1. Specjalista zobowizuje si do wiadczenia Usug zgodnie z opisem i najwysz starannoci.</p>
        <p>6.2. Specjalista ponosi pen odpowiedzialno za jako wiadczonych Usug.</p>
        <p>6.3. Specjalista zobowizuje si do posiadania wymaganych kwalifikacji i uprawnie.</p>
        <p>6.4. Specjalista zobowizuje si do przestrzegania zasad higieny i bezpieczestwa.</p>
        <p>6.5. Specjalista zobowizuje si do terminowego realizowania Rezerwacji.</p>
      `},{title:"7. Obowizki Klientw",content:`
        <p>7.1. Klient zobowizuje si do podawania prawdziwych danych przy Rezerwacji.</p>
        <p>7.2. Klient zobowizuje si do terminowego stawiania si na umwione wizyty.</p>
        <p>7.3. Klient zobowizuje si do informowania o wszelkich przeciwwskazaniach zdrowotnych.</p>
        <p>7.4. Klient zobowizuje si do traktowania Specjalisty z szacunkiem.</p>
        <p>7.5. Klient zobowizuje si do terminowej zapaty za Usugi.</p>
      `},{title:"8. Odpowiedzialno",content:`
        <p>8.1. Platforma peni rol porednika midzy Klientem a Specjalist.</p>
        <p>8.2. Platforma nie ponosi odpowiedzialnoci za jako Usug wiadczonych przez Specjalistw.</p>
        <p>8.3. Platforma nie ponosi odpowiedzialnoci za szkody wynike z dziaa Specjalistw.</p>
        <p>8.4. Wszelkie spory midzy Klientem a Specjalist powinny by rozwizywane bezporednio midzy stronami.</p>
        <p>8.5. Platforma moe poredniczy w rozwizywaniu sporw na prob stron.</p>
      `},{title:"9. Reklamacje",content:`
        <p>9.1. Reklamacje mona skada drog elektroniczn na adres: reklamacje@tomyhomeapp.pl.</p>
        <p>9.2. Reklamacja powinna zawiera opis problemu i dane kontaktowe.</p>
        <p>9.3. Reklamacje s rozpatrywane w terminie 14 dni roboczych.</p>
        <p>9.4. O wyniku rozpatrzenia reklamacji Uytkownik zostanie poinformowany drog elektroniczn.</p>
      `},{title:"10. Ochrona danych osobowych",content:`
        <p>10.1. Administratorem danych osobowych jest ToMyHomeApp Sp. z o.o.</p>
        <p>10.2. Dane osobowe s przetwarzane zgodnie z RODO i Polityk Prywatnoci.</p>
        <p>10.3. Uytkownik ma prawo dostpu do swoich danych, ich poprawiania i usunicia.</p>
        <p>10.4. Szczegowe informacje znajduj si w Polityce Prywatnoci.</p>
      `},{title:"11. Postanowienia kocowe",content:`
        <p>11.1. Operator zastrzega sobie prawo do zmiany Regulaminu.</p>
        <p>11.2. O zmianach Uytkownicy zostan poinformowani z 14-dniowym wyprzedzeniem.</p>
        <p>11.3. W sprawach nieuregulowanych stosuje si przepisy prawa polskiego.</p>
        <p>11.4. Spory bd rozstrzygane przez sd waciwy dla siedziby Operatora.</p>
        <p>11.5. Regulamin wchodzi w ycie z dniem publikacji na Platformie.</p>
      `}];return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Regulamin"}),r.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Zasady korzystania z platformy ToMyHomeApp"})]})}),r.jsx("section",{className:"py-12",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-8 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:r.jsx(Yt,{className:"w-6 h-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Ostatnia aktualizacja"}),r.jsx("p",{className:"font-semibold text-gray-900",children:t})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:e.map((n,s)=>r.jsxs("div",{className:`p-6 ${s!==e.length-1?"border-b border-gray-100":""}`,children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[r.jsx(Au,{className:"w-5 h-5 text-primary"}),n.title]}),r.jsx("div",{className:"prose prose-gray max-w-none text-gray-600 space-y-2",dangerouslySetInnerHTML:{__html:n.content}})]},s))}),r.jsxs("div",{className:"mt-8 bg-primary/5 rounded-2xl p-6 text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Masz pytania dotyczce regulaminu?"}),r.jsx("a",{href:"/kontakt",className:"text-primary font-semibold hover:underline",children:"Skontaktuj si z nami "})]})]})})]})},gD=()=>{const t="1 grudnia 2024",e=[{icon:si,title:"Szyfrowanie",description:"Wszystkie dane s szyfrowane SSL/TLS"},{icon:ss,title:"Transparentno",description:"Jasno informujemy o przetwarzaniu danych"},{icon:Wg,title:"Minimalizacja",description:"Zbieramy tylko niezbdne dane"},{icon:r2,title:"Twoje prawa",description:"Pena kontrola nad swoimi danymi"}],n=[{title:"1. Administrator danych",content:`
        <p>Administratorem Twoich danych osobowych jest:</p>
        <p><strong>ToMyHomeApp Sp. z o.o.</strong><br>
        ul. Przykadowa 1<br>
        61-001 Pozna<br>
        NIP: 0000000000<br>
        Email: dane@tomyhomeapp.pl</p>
      `},{title:"2. Jakie dane zbieramy?",content:`
        <p>Zbieramy nastpujce kategorie danych:</p>
        <ul>
          <li><strong>Dane identyfikacyjne:</strong> imi, nazwisko, adres email, numer telefonu</li>
          <li><strong>Dane adresowe:</strong> adres zamieszkania (dla usug z dojazdem)</li>
          <li><strong>Dane finansowe:</strong> informacje o patnociach (przetwarzane przez operatorw patnoci)</li>
          <li><strong>Dane techniczne:</strong> adres IP, informacje o urzdzeniu, pliki cookies</li>
          <li><strong>Dane o aktywnoci:</strong> historia rezerwacji, preferencje, opinie</li>
        </ul>
      `},{title:"3. Cele przetwarzania danych",content:`
        <p>Twoje dane przetwarzamy w celu:</p>
        <ul>
          <li>wiadczenia usug platformy i realizacji rezerwacji</li>
          <li>Komunikacji z uytkownikami (powiadomienia, przypomnienia)</li>
          <li>Obsugi patnoci i rozlicze</li>
          <li>Zapewnienia bezpieczestwa platformy</li>
          <li>Analizy i ulepszania usug</li>
          <li>Marketingu bezporedniego (za zgod)</li>
          <li>Wypeniania obowizkw prawnych</li>
        </ul>
      `},{title:"4. Podstawy prawne przetwarzania",content:`
        <p>Przetwarzamy dane na podstawie:</p>
        <ul>
          <li><strong>Art. 6 ust. 1 lit. a RODO</strong> - zgoda (np. na marketing)</li>
          <li><strong>Art. 6 ust. 1 lit. b RODO</strong> - wykonanie umowy (realizacja rezerwacji)</li>
          <li><strong>Art. 6 ust. 1 lit. c RODO</strong> - obowizek prawny (rachunkowo)</li>
          <li><strong>Art. 6 ust. 1 lit. f RODO</strong> - prawnie uzasadniony interes (bezpieczestwo)</li>
        </ul>
      `},{title:"5. Udostpnianie danych",content:`
        <p>Twoje dane mog by udostpniane:</p>
        <ul>
          <li><strong>Specjalistom</strong> - w zakresie niezbdnym do realizacji usugi</li>
          <li><strong>Operatorom patnoci</strong> - do przetwarzania transakcji</li>
          <li><strong>Dostawcom usug IT</strong> - hosting, analityka (na podstawie umw powierzenia)</li>
          <li><strong>Organom publicznym</strong> - gdy wymagaj tego przepisy prawa</li>
        </ul>
        <p>Nie sprzedajemy danych osobowych podmiotom trzecim.</p>
      `},{title:"6. Okres przechowywania danych",content:`
        <p>Dane przechowujemy przez okres:</p>
        <ul>
          <li><strong>Dane konta:</strong> do momentu usunicia konta + 30 dni</li>
          <li><strong>Historia rezerwacji:</strong> 5 lat (wymogi ksigowe)</li>
          <li><strong>Dane marketingowe:</strong> do cofnicia zgody</li>
          <li><strong>Logi systemowe:</strong> 12 miesicy</li>
          <li><strong>Cookies:</strong> zgodnie z ustawieniami przegldarki</li>
        </ul>
      `},{title:"7. Twoje prawa",content:`
        <p>Przysuguj Ci nastpujce prawa:</p>
        <ul>
          <li><strong>Prawo dostpu</strong> - moesz uzyska informacje o przetwarzanych danych</li>
          <li><strong>Prawo do sprostowania</strong> - moesz poprawi nieprawidowe dane</li>
          <li><strong>Prawo do usunicia</strong> - moesz da usunicia danych ("prawo do bycia zapomnianym")</li>
          <li><strong>Prawo do ograniczenia</strong> - moesz ograniczy przetwarzanie</li>
          <li><strong>Prawo do przenoszenia</strong> - moesz otrzyma dane w formacie elektronicznym</li>
          <li><strong>Prawo do sprzeciwu</strong> - moesz sprzeciwi si przetwarzaniu</li>
          <li><strong>Prawo do cofnicia zgody</strong> - w dowolnym momencie</li>
        </ul>
        <p>Aby skorzysta z tych praw, skontaktuj si z nami: dane@tomyhomeapp.pl</p>
      `},{title:"8. Pliki cookies",content:`
        <p>Uywamy plikw cookies do:</p>
        <ul>
          <li><strong>Niezbdne:</strong> funkcjonowanie strony, logowanie, bezpieczestwo</li>
          <li><strong>Analityczne:</strong> analiza ruchu, ulepszanie usug (Google Analytics)</li>
          <li><strong>Marketingowe:</strong> personalizacja reklam (za zgod)</li>
        </ul>
        <p>Moesz zarzdza cookies w ustawieniach przegldarki.</p>
      `},{title:"9. Bezpieczestwo danych",content:`
        <p>Stosujemy nastpujce zabezpieczenia:</p>
        <ul>
          <li>Szyfrowanie SSL/TLS wszystkich pocze</li>
          <li>Hashowanie hase (bcrypt)</li>
          <li>Regularne kopie zapasowe</li>
          <li>Kontrola dostpu do danych</li>
          <li>Monitoring bezpieczestwa 24/7</li>
          <li>Regularne audyty bezpieczestwa</li>
        </ul>
      `},{title:"10. Zmiany polityki",content:`
        <p>Zastrzegamy sobie prawo do aktualizacji niniejszej Polityki Prywatnoci.</p>
        <p>O istotnych zmianach poinformujemy uytkownikw drog elektroniczn z 14-dniowym wyprzedzeniem.</p>
        <p>Aktualna wersja jest zawsze dostpna na tej stronie.</p>
      `},{title:"11. Kontakt",content:`
        <p>W sprawach zwizanych z ochron danych osobowych moesz skontaktowa si z nami:</p>
        <p><strong>Email:</strong> dane@tomyhomeapp.pl<br>
        <strong>Adres:</strong> ToMyHomeApp Sp. z o.o., ul. Przykadowa 1, 61-001 Pozna</p>
        <p>Masz rwnie prawo wnie skarg do Prezesa Urzdu Ochrony Danych Osobowych.</p>
      `}];return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Polityka Prywatnoci"}),r.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Twoje dane s dla nas wane. Dowiedz si, jak je chronimy."})]})}),r.jsx("section",{className:"py-12 -mt-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.map((s,i)=>r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:r.jsx(s.icon,{className:"w-6 h-6 text-primary"})}),r.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:s.title}),r.jsx("p",{className:"text-gray-600 text-sm",children:s.description})]},i))})})}),r.jsx("section",{className:"py-12",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-8 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:r.jsx(Yt,{className:"w-6 h-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Ostatnia aktualizacja"}),r.jsx("p",{className:"font-semibold text-gray-900",children:t})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:n.map((s,i)=>r.jsxs("div",{className:`p-6 ${i!==n.length-1?"border-b border-gray-100":""}`,children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[r.jsx(Mn,{className:"w-5 h-5 text-primary"}),s.title]}),r.jsx("div",{className:"prose prose-gray max-w-none text-gray-600 [&>ul]:list-disc [&>ul]:pl-5 [&>ul]:space-y-1",dangerouslySetInnerHTML:{__html:s.content}})]},i))}),r.jsxs("div",{className:"mt-8 grid md:grid-cols-2 gap-4",children:[r.jsxs("a",{href:"mailto:dane@tomyhomeapp.pl",className:"bg-white rounded-2xl p-6 shadow-sm flex items-center gap-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:r.jsx(Rr,{className:"w-6 h-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Masz pytania?"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Napisz do nas: dane@tomyhomeapp.pl"})]})]}),r.jsxs("a",{href:"/profil",className:"bg-white rounded-2xl p-6 shadow-sm flex items-center gap-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:r.jsx(nr,{className:"w-6 h-6 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Usu swoje dane"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Zarzdzaj w ustawieniach konta"})]})]})]})]})})]})},yD=()=>{const t=[{icon:qg,title:"Chat na ywo",description:"Porozmawiaj z naszym konsultantem w czasie rzeczywistym",availability:"Pn-Pt: 9:00 - 20:00, Sob: 10:00 - 16:00",action:"Rozpocznij chat",primary:!0},{icon:Rr,title:"Email",description:"Wylij wiadomo, odpowiemy w cigu 24 godzin",availability:"pomoc@tomyhomeapp.pl",action:"Wylij email",href:"mailto:pomoc@tomyhomeapp.pl"},{icon:va,title:"Telefon",description:"Zadzwo do nas w godzinach pracy",availability:"+48 123 456 789",action:"Zadzwo",href:"tel:+48123456789"}],e=[{icon:bl,title:"FAQ",description:"Odpowiedzi na najczstsze pytania",to:"/faq"},{icon:Au,title:"Regulamin",description:"Zasady korzystania z platformy",to:"/regulamin"},{icon:Au,title:"Polityka prywatnoci",description:"Jak chronimy Twoje dane",to:"/prywatnosc"}],n=[{title:"Jak zarezerwowa wizyt?",steps:["Wyszukaj usug lub specjalist","Wybierz odpowiedni termin z kalendarza","Potwierd rezerwacj i dokonaj patnoci","Otrzymaj potwierdzenie na email"]},{title:"Jak anulowa rezerwacj?",steps:["Zaloguj si na swoje konto",'Przejd do "Moje rezerwacje"','Znajd rezerwacj i kliknij "Anuluj"',"Potwierd anulowanie"]},{title:"Jak zmieni dane konta?",steps:["Zaloguj si na swoje konto","Kliknij w ikon profilu",'Wybierz "Ustawienia"',"Edytuj dane i zapisz zmiany"]}],s=[{problem:"Nie mog si zalogowa",solution:'Sprawd czy wpisujesz prawidowy email. Uyj opcji "Zapomniaem hasa" aby je zresetowa.'},{problem:"Nie otrzymaem potwierdzenia rezerwacji",solution:"Sprawd folder SPAM. Jeli wiadomoci tam nie ma, skontaktuj si z nami."},{problem:"Specjalista nie pojawi si na wizycie",solution:"Skontaktuj si z nami natychmiast. Pomoemy rozwiza sytuacj i zapewnimy zwrot rodkw."},{problem:"Chc zmieni termin wizyty",solution:"Anuluj obecn rezerwacj i utwrz now z innym terminem. Moesz te skontaktowa si ze specjalist."}];return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Centrum wsparcia"}),r.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Jestemy tu, aby Ci pomc. Wybierz preferowany sposb kontaktu lub znajd odpowied w naszych poradnikach."})]})}),r.jsx("section",{className:"py-12 -mt-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:t.map((i,o)=>r.jsxs("div",{className:`p-6 rounded-2xl ${i.primary?"bg-gradient-to-br from-primary to-secondary text-white":"bg-white shadow-sm"}`,children:[r.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center mb-4 ${i.primary?"bg-white/20":"bg-primary/10"}`,children:r.jsx(i.icon,{className:`w-7 h-7 ${i.primary?"text-white":"text-primary"}`})}),r.jsx("h3",{className:`text-xl font-bold mb-2 ${i.primary?"text-white":"text-gray-900"}`,children:i.title}),r.jsx("p",{className:`mb-3 ${i.primary?"text-white/80":"text-gray-600"}`,children:i.description}),r.jsxs("p",{className:`text-sm mb-4 flex items-center gap-2 ${i.primary?"text-white/70":"text-gray-500"}`,children:[r.jsx(Tt,{className:"w-4 h-4"}),i.availability]}),r.jsxs("a",{href:i.href||"#",className:`inline-flex items-center gap-2 font-semibold ${i.primary?"text-white hover:underline":"text-primary hover:underline"}`,children:[i.action,r.jsx(Ol,{className:"w-4 h-4"})]})]},o))})})}),r.jsx("section",{className:"py-12 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Przydatne linki"}),r.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:e.map((i,o)=>r.jsx(Ne,{to:i.to,className:"p-6 bg-gray-50 rounded-2xl hover:bg-gray-100 transition-colors group",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(i.icon,{className:"w-6 h-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900 group-hover:text-primary transition-colors",children:i.title}),r.jsx("p",{className:"text-gray-600 text-sm",children:i.description})]})]})},o))})]})}),r.jsx("section",{className:"py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Poradniki krok po kroku"}),r.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map((i,o)=>r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-4",children:i.title}),r.jsx("ol",{className:"space-y-3",children:i.steps.map((l,d)=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"w-6 h-6 bg-primary/10 text-primary rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:d+1}),r.jsx("span",{className:"text-gray-600 text-sm",children:l})]},d))})]},o))})]})}),r.jsx("section",{className:"py-12 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Najczstsze problemy"}),r.jsx("div",{className:"max-w-3xl mx-auto space-y-4",children:s.map((i,o)=>r.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[r.jsxs("h3",{className:"font-bold text-gray-900 mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),i.problem]}),r.jsx("p",{className:"text-gray-600 pl-4",children:i.solution})]},o))})]})}),r.jsx("section",{className:"py-16",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[r.jsx(qg,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nadal potrzebujesz pomocy?"}),r.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Nasz zesp wsparcia jest dostpny 7 dni w tygodniu. Chtnie odpowiemy na wszystkie Twoje pytania!"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsxs(Ne,{to:"/kontakt",className:"inline-flex items-center justify-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:[r.jsx(Rr,{className:"w-5 h-5"}),"Napisz do nas"]}),r.jsxs("a",{href:"tel:+48123456789",className:"inline-flex items-center justify-center gap-2 px-8 py-3 bg-white/20 text-white font-semibold rounded-xl hover:bg-white/30 transition-all",children:[r.jsx(va,{className:"w-5 h-5"}),"+48 123 456 789"]})]})]})})})]})},xD=()=>{var k;const[t,e]=N.useState(!1),[n,s]=N.useState(!1),[i,o]=N.useState(!1),{user:l,logout:d}=Et(),m=xs(),f=N.useRef(null),[g,x]=N.useState([]);N.useEffect(()=>{if(!(l!=null&&l.id)){x([]);return}const j=dn.subscribe(l.id,U=>{x(U.slice(0,5))});return()=>j()},[l==null?void 0:l.id]);const w=g.filter(j=>!j.read).length,E=j=>{const U=new Date(j),F=new Date().getTime()-U.getTime(),P=Math.floor(F/6e4),T=Math.floor(F/36e5);return P<1?"Teraz":P<60?`${P} min temu`:T<24?`${T}h temu`:U.toLocaleDateString("pl-PL")},S=async j=>{await dn.markAsRead(j)},A=async()=>{l!=null&&l.id&&await dn.markAllAsRead(l.id)},C=j=>{switch(j){case"booking":case"booking_request":case"booking_confirmed":return r.jsx(Yt,{className:"w-4 h-4 text-emerald-500"});case"message":case"new_message":return r.jsx(Bn,{className:"w-4 h-4 text-blue-500"});case"payment":return r.jsx(fo,{className:"w-4 h-4 text-purple-500"});default:return r.jsx(Ls,{className:"w-4 h-4 text-gray-500"})}},b=j=>{var U;return(U=j.data)==null?void 0:U.link};return N.useEffect(()=>{const j=U=>{f.current&&!f.current.contains(U.target)&&o(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),r.jsxs("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-4 lg:px-8",children:r.jsxs("div",{className:"h-16 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{className:"lg:hidden p-2 bg-white rounded-lg border border-gray-200 hover:bg-gray-50",onClick:()=>e(!t),style:{backgroundColor:"white"},children:t?r.jsx(Tn,{className:"w-5 h-5 text-gray-700"}):r.jsx(s2,{className:"w-5 h-5 text-gray-700"})}),r.jsxs(Ne,{to:"/biznes",className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),r.jsxs("div",{className:"hidden sm:block",children:[r.jsx("span",{className:"font-extrabold text-lg text-gray-900",children:"TOMYHOMEAPP"}),r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full",children:"BIZNES"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(Ne,{to:"/",className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",children:[r.jsx("span",{className:"hidden sm:inline",children:"Widok klienta"}),r.jsx("span",{className:"sm:hidden",children:""}),r.jsx("span",{children:""})]}),r.jsxs("div",{className:"relative",ref:f,children:[r.jsxs("button",{onClick:()=>o(!i),className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:[r.jsx(Ls,{className:"w-5 h-5"}),w>0&&r.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:w>9?"9+":w})]}),i&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-100 z-50 overflow-hidden",children:[r.jsxs("div",{className:"p-3 border-b border-gray-100 flex items-center justify-between",children:[r.jsx("h3",{className:"font-bold text-gray-900",children:"Powiadomienia"}),w>0&&r.jsx("button",{onClick:A,className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium",children:"Oznacz jako przeczytane"})]}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:g.length===0?r.jsxs("div",{className:"p-6 text-center text-gray-500",children:[r.jsx(Ls,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),r.jsx("p",{className:"text-sm",children:"Brak powiadomie"})]}):g.map(j=>{const U=b(j);return r.jsx("div",{onClick:()=>{S(j.id),U&&m(U),o(!1)},className:`p-3 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors ${j.read?"":"bg-emerald-50/50"}`,children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:C(j.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm ${j.read?"":"font-semibold"} text-gray-900`,children:j.title}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:j.message}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:E(j.createdAt)})]}),!j.read&&r.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0 mt-2"})]})},j.id)})}),r.jsx(Ne,{to:"/biznes/powiadomienia",onClick:()=>o(!1),className:"block p-3 text-center text-sm text-emerald-600 hover:bg-gray-50 font-medium border-t",children:"Zobacz wszystkie"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:((k=l==null?void 0:l.username)==null?void 0:k.charAt(0).toUpperCase())||"U"})}),r.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:(l==null?void 0:l.username)||"Uytkownik"})]}),n&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-50",children:[r.jsxs(Ne,{to:"/biznes/profil",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>s(!1),children:[r.jsx(rs,{className:"w-4 h-4"}),"Mj profil"]}),r.jsxs(Ne,{to:"/biznes/ustawienia",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>s(!1),children:[r.jsx(ff,{className:"w-4 h-4"}),"Ustawienia"]}),r.jsx("hr",{className:"my-2"}),r.jsxs("button",{onClick:()=>{d(),s(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[r.jsx(Ru,{className:"w-4 h-4"}),"Wyloguj si"]})]})]})]})]})}),t&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)})]})},wD=({isOpen:t=!0,onClose:e})=>{const n=Os(),{user:s}=Et(),[i,o]=N.useState(0);N.useEffect(()=>{if(!(s!=null&&s.id)){o(0);return}const f=Js.subscribeToUnreadCount(s.id,g=>{o(g)});return()=>f()},[s==null?void 0:s.id]);const l=[{icon:Hg,label:"Dashboard",to:"/biznes",exact:!0},{icon:wa,label:"Moje usugi",to:"/biznes/uslugi"},{icon:zL,label:"Dodaj usug",to:"/biznes/dodaj-usluge"},{icon:Tt,label:"Godziny pracy",to:"/biznes/godziny-pracy"},{icon:Yt,label:"Kalendarz",to:"/biznes/kalendarz"},{icon:Bn,label:"Wiadomoci",to:"/biznes/wiadomosci",hasBadge:!0},{icon:yt,label:"Opinie",to:"/biznes/opinie"},{icon:n2,label:"Statystyki",to:"/biznes/statystyki"}],d=[{icon:ff,label:"Ustawienia",to:"/biznes/ustawienia"},{icon:bl,label:"Pomoc",to:"/biznes/pomoc"}],m=(f,g=!1)=>g?n.pathname===f:n.pathname.startsWith(f);return r.jsxs(r.Fragment,{children:[t&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:e}),r.jsx("aside",{className:`
          fixed lg:sticky top-16 left-0 z-40
          w-64 h-[calc(100vh-64px)] bg-white border-r border-gray-200
          transform transition-transform duration-300 ease-in-out
          lg:translate-x-0
          ${t?"translate-x-0":"-translate-x-full"}
        `,children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[r.jsx("div",{className:"mb-4",children:r.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider px-3",children:"Menu gwne"})}),l.map(f=>r.jsxs(Ne,{to:f.to,onClick:e,className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
                  transition-all duration-200
                  ${m(f.to,f.exact)?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                `,children:[r.jsx(f.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"flex-1",children:f.label}),f.hasBadge&&i>0&&r.jsx("span",{className:`
                    w-2.5 h-2.5 rounded-full
                    ${m(f.to,f.exact)?"bg-white":"bg-red-500"}
                  `})]},f.to))]}),r.jsx("div",{className:"p-4 border-t border-gray-100",children:d.map(f=>r.jsxs(Ne,{to:f.to,onClick:e,className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
                  transition-all duration-200
                  ${m(f.to)?"bg-gray-100 text-gray-900":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}
                `,children:[r.jsx(f.icon,{className:"w-5 h-5"}),r.jsx("span",{children:f.label})]},f.to))}),r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"p-4 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl text-white",children:[r.jsx("h4",{className:"font-bold mb-1",children:"Przejd na PRO"}),r.jsx("p",{className:"text-xs text-white/80 mb-3",children:"Odblokuj wszystkie funkcje i zwiksz widoczno"}),r.jsx("button",{className:"w-full py-2 bg-white text-emerald-600 rounded-lg text-sm font-semibold hover:bg-gray-50 transition-colors",children:"Sprawd ofert"})]})})]})})]})},vD=()=>{const{isAuthenticated:t,user:e,loading:n}=Et(),[s,i]=N.useState(!1),{pathname:o}=Os();if(N.useEffect(()=>{window.scrollTo(0,0)},[o]),n)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ve,{className:"w-12 h-12 animate-spin text-emerald-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"adowanie..."})]})});const l=(e==null?void 0:e.accountType)==="provider"||!!(e!=null&&e.businessName);return t?l?r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(xD,{}),r.jsxs("div",{className:"flex",children:[r.jsx(wD,{isOpen:s,onClose:()=>i(!1)}),r.jsx("main",{className:"flex-1 min-h-[calc(100vh-64px)] p-4 lg:p-8",children:r.jsx(rN,{})})]})]}):r.jsx(dg,{to:"/",replace:!0}):r.jsx(dg,{to:"/auth?redirect=/biznes",replace:!0})},A_=()=>{const{user:t}=Et(),{showToast:e}=ln(),[n,s]=N.useState({totalBookings:0,pendingBookings:0,completedBookings:0,revenue:0,thisMonthRevenue:0,rating:0,reviewsCount:0}),[i,o]=N.useState([]),[l,d]=N.useState(!1),[m,f]=N.useState(!0);N.useEffect(()=>{(async()=>{if(!t||!t.id){console.log("BusinessDashboard: No user or user.id"),f(!1);return}console.log("BusinessDashboard: Loading for user",t.id);try{const A=await tn.getByOwner(t.id);if(console.log("BusinessDashboard: Found providers",A.length),A.length>0){d(!0);const C=A[0],b=await On.getProviderStats(C.id);s({totalBookings:b.totalBookings,pendingBookings:b.pendingBookings,completedBookings:b.completedBookings,revenue:b.totalRevenue,thisMonthRevenue:b.thisMonthRevenue,rating:C.rating||0,reviewsCount:C.reviewsCount||0});const k=On.subscribeToProviderBookings(C.id,j=>{const U=j.filter(D=>D.status==="pending"||D.status==="confirmed").slice(0,5);o(U)});return()=>k()}else d(!1)}catch(A){console.error("Bd adowania danych:",A)}finally{f(!1)}})()},[t]);const g=async S=>{try{await On.confirm(S),e("Rezerwacja potwierdzona! ","success")}catch{e("Bd potwierdzania rezerwacji","error")}},x=async S=>{try{await On.cancel(S,"provider"),e("Rezerwacja anulowana","info")}catch{e("Bd anulowania rezerwacji","error")}},w=[{title:"Rezerwacje",value:n.totalBookings,subtitle:`${n.pendingBookings} oczekuje`,icon:Yt,color:"emerald"},{title:"Przychd",value:`${n.revenue} z`,subtitle:`${n.thisMonthRevenue} z ten miesic`,icon:Vl,color:"blue"},{title:"Ukoczone",value:n.completedBookings,subtitle:"wizyt",icon:Wt,color:"purple"},{title:"Ocena",value:n.rating>0?n.rating.toFixed(1):"-",subtitle:n.reviewsCount>0?`${n.reviewsCount} opinii`:"brak opinii",icon:yt,color:"amber"}],E=S=>{switch(S){case"confirmed":return r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Potwierdzona"});case"pending":return r.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full",children:"Oczekuje"});case"completed":return r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Zakoczona"});default:return null}};return m?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-12 h-12 animate-spin text-emerald-500"})}):l?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Witaj, ",(t==null?void 0:t.username)||"Uytkowniku","! "]}),r.jsx("p",{className:"text-gray-600",children:"Oto przegld Twojego biznesu"})]}),r.jsxs(Ne,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[r.jsx(li,{className:"w-5 h-5"}),"Dodaj usug"]})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:w.map((S,A)=>r.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm",children:[r.jsx("div",{className:"flex items-start justify-between mb-3",children:r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center bg-${S.color}-100`,children:r.jsx(S.icon,{className:`w-5 h-5 text-${S.color}-600`})})}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S.value}),r.jsx("div",{className:"text-sm text-gray-500",children:S.subtitle})]},A))}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm",children:[r.jsx("div",{className:"p-5 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Nadchodzce rezerwacje"}),r.jsx(Ne,{to:"/biznes/kalendarz",className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:"Zobacz wszystkie "})]})}),r.jsxs("div",{className:"divide-y divide-gray-100",children:[i.map(S=>r.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:S.clientName.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:S.clientName}),r.jsx("div",{className:"text-sm text-gray-500",children:S.serviceName})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-600",children:S.date}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[r.jsx(Tt,{className:"w-3 h-3"}),S.time]})]}),S.status==="pending"&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>g(S.id),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Potwierd",children:r.jsx(Wt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>x(S.id),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Anuluj",children:r.jsx(Tn,{className:"w-4 h-4"})})]}),S.status==="confirmed"&&E(S.status)]})]},S.id)),i.length===0&&r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(Yt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"Brak nadchodzcych rezerwacji"}),r.jsx("p",{className:"text-sm mt-1",children:"Rezerwacje pojawi si tutaj, gdy klienci je zo"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Szybkie akcje"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Ne,{to:"/biznes/uslugi",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center",children:r.jsx(ss,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Zobacz swj profil"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Tak widz Ci klienci"})]})]}),r.jsxs(Ne,{to:"/biznes/kalendarz",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center",children:r.jsx(Yt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Zarzdzaj kalendarzem"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Dostpno i godziny"})]})]}),r.jsxs(Ne,{to:"/biznes/statystyki",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(pf,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Zobacz statystyki"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Analizuj swj biznes"})]})]})]})]})]})]}):r.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[r.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(li,{className:"w-12 h-12 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Witaj w ToMyHomeApp Biznes!"}),r.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Nie masz jeszcze profilu usugodawcy. Dodaj swoj pierwsz usug, aby zacz przyjmowa rezerwacje od klientw."}),r.jsxs(Ne,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[r.jsx(li,{className:"w-5 h-5"}),"Dodaj pierwsz usug"]}),r.jsxs("div",{className:"mt-12 grid md:grid-cols-3 gap-6 text-left",children:[r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center mb-4",children:r.jsx(li,{className:"w-5 h-5"})}),r.jsx("h3",{className:"font-bold mb-2",children:"1. Dodaj usug"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Opisz swoj usug, ustal ceny i godziny pracy"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-4",children:r.jsx(ss,{className:"w-5 h-5"})}),r.jsx("h3",{className:"font-bold mb-2",children:"2. Bd widoczny"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Klienci znajd Ci w wyszukiwarce usug"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center mb-4",children:r.jsx(Yt,{className:"w-5 h-5"})}),r.jsx("h3",{className:"font-bold mb-2",children:"3. Przyjmuj rezerwacje"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Zarzdzaj kalendarzem i rozwijaj biznes"})]})]})]})},_D=()=>{const{user:t}=Et(),{showToast:e}=ln(),[n,s]=N.useState(null),[i,o]=N.useState(null),[l,d]=N.useState(!0),[m,f]=N.useState("");N.useEffect(()=>{g()},[t]);const g=async()=>{if(!(t!=null&&t.id)){d(!1);return}d(!0);try{const S=await tn.getByOwner(t.id.toString());if(S.length>0){const A=S[0],C=A.services.map(b=>({id:b.id,name:b.name,description:b.description||"",price:b.price||0,duration:b.duration||"30 min",isActive:!0,category:b.category||"Inne"}));o(A.id),s({id:A.id,name:A.name,profession:A.profession||"",location:A.locationString||"",image:A.image||"",services:C,isActive:A.isActive})}}catch(S){console.error("Bd adowania profilu z Firebase:",S),e("Bd adowania danych","error")}finally{d(!1)}},x=async S=>{if(!n||!i)return;const A=n.services.map(C=>C.id===S?{...C,isActive:!C.isActive}:C);s({...n,services:A});try{await tn.update(i,{services:A.map(C=>({id:C.id,name:C.name,description:C.description,price:C.price,duration:C.duration,category:C.category}))}),e("Status usugi zmieniony","success")}catch(C){console.error("Bd aktualizacji:",C),e("Bd aktualizacji","error"),g()}},w=async S=>{if(!n||!i)return;const A=n.services.filter(C=>C.id!==S);s({...n,services:A});try{await tn.removeService(i,S),e("Usuga usunita","info")}catch(C){console.error("Bd usuwania:",C),e("Bd usuwania usugi","error"),g()}},E=(n==null?void 0:n.services.filter(S=>S.name.toLowerCase().includes(m.toLowerCase())))||[];return l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):n?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Moje usugi"}),r.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoimi usugami i cenami"})]}),r.jsxs(Ne,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[r.jsx(li,{className:"w-5 h-5"}),"Dodaj usug"]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("img",{src:n.image||"https://via.placeholder.com/80",alt:n.name,className:"w-20 h-20 rounded-xl object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n.name}),r.jsx("p",{className:"text-gray-500",children:n.profession}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n.location})]}),r.jsxs(Ne,{to:`/uslugodawcy/profil/${n.id}`,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[r.jsx(ss,{className:"w-4 h-4"}),"Podgld profilu"]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Szukaj usugi...",value:m,onChange:S=>f(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(n0,{className:"w-5 h-5"}),"Filtruj"]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-100",children:r.jsxs("h3",{className:"font-semibold text-gray-900",children:["Wszystkie usugi (",E.length,")"]})}),E.length===0?r.jsx("div",{className:"p-8 text-center text-gray-500",children:m?"Nie znaleziono usug":"Brak usug"}):r.jsx("div",{className:"divide-y divide-gray-100",children:E.map(S=>r.jsxs("div",{className:`p-4 flex items-center justify-between hover:bg-gray-50 transition-colors ${S.isActive?"":"opacity-60"}`,children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[r.jsx("button",{onClick:()=>x(S.id),className:`p-1 rounded transition-colors ${S.isActive?"text-emerald-500":"text-gray-400"}`,title:S.isActive?"Aktywna":"Nieaktywna",children:S.isActive?r.jsx(LL,{className:"w-8 h-8"}):r.jsx(RL,{className:"w-8 h-8"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:S.name}),r.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:S.description||"Brak opisu"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right mr-4",children:[r.jsxs("div",{className:"text-gray-900 font-semibold",children:[S.price," z"]}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[r.jsx(Tt,{className:"w-3 h-3"}),S.duration]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{e("Funkcja edycji w przygotowaniu","info")},className:"p-2 text-gray-500 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"Edytuj",children:r.jsx(TL,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{window.confirm("Czy na pewno chcesz usun t usug?")&&w(S.id)},className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:r.jsx(nr,{className:"w-5 h-5"})})]})]})]},S.id))})]})]}):r.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(li,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Nie masz jeszcze usug"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Dodaj swoj pierwsz usug, aby klienci mogli j znale i zarezerwowa."}),r.jsxs(Ne,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[r.jsx(li,{className:"w-5 h-5"}),"Dodaj pierwsz usug"]})]})};function bD(t,e){const n=N.useRef(e);N.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const jD=1;function ND(t){return Object.freeze({__version:jD,map:t})}function kD(t,e){return Object.freeze({...t,...e})}const o2=N.createContext(null),l2=o2.Provider;function c2(){const t=N.useContext(o2);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function TD(t){function e(n,s){const{instance:i,context:o}=t(n).current;return N.useImperativeHandle(s,()=>i),n.children==null?null:nu.createElement(l2,{value:o},n.children)}return N.forwardRef(e)}function ED(t){function e(n,s){const{instance:i}=t(n).current;return N.useImperativeHandle(s,()=>i),null}return N.forwardRef(e)}function SD(t,e){const n=N.useRef();N.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function u2(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Gg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,s){s(e)})(Y2,function(n){var s="1.9.4";function i(a){var c,h,p,v;for(h=1,p=arguments.length;h<p;h++){v=arguments[h];for(c in v)a[c]=v[c]}return a}var o=Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}();function l(a,c){var h=Array.prototype.slice;if(a.bind)return a.bind.apply(a,h.call(arguments,1));var p=h.call(arguments,2);return function(){return a.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var d=0;function m(a){return"_leaflet_id"in a||(a._leaflet_id=++d),a._leaflet_id}function f(a,c,h){var p,v,z,H;return H=function(){p=!1,v&&(z.apply(h,v),v=!1)},z=function(){p?v=arguments:(a.apply(h,arguments),setTimeout(H,c),p=!0)},z}function g(a,c,h){var p=c[1],v=c[0],z=p-v;return a===p&&h?a:((a-v)%z+z)%z+v}function x(){return!1}function w(a,c){if(c===!1)return a;var h=Math.pow(10,c===void 0?6:c);return Math.round(a*h)/h}function E(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function S(a){return E(a).split(/\s+/)}function A(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?o(a.options):{});for(var h in c)a.options[h]=c[h];return a.options}function C(a,c,h){var p=[];for(var v in a)p.push(encodeURIComponent(h?v.toUpperCase():v)+"="+encodeURIComponent(a[v]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function k(a,c){return a.replace(b,function(h,p){var v=c[p];if(v===void 0)throw new Error("No value provided for variable "+h);return typeof v=="function"&&(v=v(c)),v})}var j=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function U(a,c){for(var h=0;h<a.length;h++)if(a[h]===c)return h;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var P=0;function T(a){var c=+new Date,h=Math.max(0,16-(c-P));return P=c+h,window.setTimeout(a,h)}var M=window.requestAnimationFrame||F("RequestAnimationFrame")||T,R=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function B(a,c,h){if(h&&M===T)a.call(c);else return M.call(window,l(a,c))}function $(a){a&&R.call(window,a)}var I={__proto__:null,extend:i,create:o,bind:l,get lastId(){return d},stamp:m,throttle:f,wrapNum:g,falseFn:x,formatNum:w,trim:E,splitWords:S,setOptions:A,getParamString:C,template:k,isArray:j,indexOf:U,emptyImageUrl:D,requestFn:M,cancelFn:R,requestAnimFrame:B,cancelAnimFrame:$};function he(){}he.extend=function(a){var c=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=o(h);p.constructor=c,c.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(c[v]=this[v]);return a.statics&&i(c,a.statics),a.includes&&(de(a.includes),i.apply(null,[p].concat(a.includes))),i(p,a),delete p.statics,delete p.includes,p.options&&(p.options=h.options?o(h.options):{},i(p.options,a.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var z=0,H=p._initHooks.length;z<H;z++)p._initHooks[z].call(this)}},c},he.include=function(a){var c=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},he.mergeOptions=function(a){return i(this.prototype.options,a),this},he.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),h=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function de(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=j(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var we={on:function(a,c,h){if(typeof a=="object")for(var p in a)this._on(p,a[p],c);else{a=S(a);for(var v=0,z=a.length;v<z;v++)this._on(a[v],c,h)}return this},off:function(a,c,h){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var p in a)this._off(p,a[p],c);else{a=S(a);for(var v=arguments.length===1,z=0,H=a.length;z<H;z++)v?this._off(a[z]):this._off(a[z],c,h)}return this},_on:function(a,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,h)===!1){h===this&&(h=void 0);var v={fn:c,ctx:h};p&&(v.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(v)}},_off:function(a,c,h){var p,v,z;if(this._events&&(p=this._events[a],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,z=p.length;v<z;v++)p[v].fn=x;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var H=this._listens(a,c,h);if(H!==!1){var K=p[H];this._firingCount&&(K.fn=x,this._events[a]=p=p.slice()),p.splice(H,1)}}},fire:function(a,c,h){if(!this.listens(a,h))return this;var p=i({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var v=this._events[a];if(v){this._firingCount=this._firingCount+1||1;for(var z=0,H=v.length;z<H;z++){var K=v[z],Y=K.fn;K.once&&this.off(a,Y,K.ctx),Y.call(K.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(a,c,h,p){typeof a!="string"&&console.warn('"string" type argument expected');var v=c;typeof c!="function"&&(p=!!c,v=void 0,h=void 0);var z=this._events&&this._events[a];if(z&&z.length&&this._listens(a,v,h)!==!1)return!0;if(p){for(var H in this._eventParents)if(this._eventParents[H].listens(a,c,h,p))return!0}return!1},_listens:function(a,c,h){if(!this._events)return!1;var p=this._events[a]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var v=0,z=p.length;v<z;v++)if(p[v].fn===c&&p[v].ctx===h)return v;return!1},once:function(a,c,h){if(typeof a=="object")for(var p in a)this._on(p,a[p],c,!0);else{a=S(a);for(var v=0,z=a.length;v<z;v++)this._on(a[v],c,h,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[m(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[m(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};we.addEventListener=we.on,we.removeEventListener=we.clearAllEventListeners=we.off,we.addOneTimeEventListener=we.once,we.fireEvent=we.fire,we.hasEventListeners=we.listens;var te=he.extend(we);function W(a,c,h){this.x=h?Math.round(a):a,this.y=h?Math.round(c):c}var Q=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(a){return this.clone()._add(O(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(O(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new W(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new W(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(a){a=O(a);var c=a.x-this.x,h=a.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(a){return a=O(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=O(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function O(a,c,h){return a instanceof W?a:j(a)?new W(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new W(a.x,a.y):new W(a,c,h)}function q(a,c){if(a)for(var h=c?[a,c]:a,p=0,v=h.length;p<v;p++)this.extend(h[p])}q.prototype={extend:function(a){var c,h;if(!a)return this;if(a instanceof W||typeof a[0]=="number"||"x"in a)c=h=O(a);else if(a=ne(a),c=a.min,h=a.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(a){return O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return O(this.min.x,this.max.y)},getTopRight:function(){return O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,h;return typeof a[0]=="number"||a instanceof W?a=O(a):a=ne(a),a instanceof q?(c=a.min,h=a.max):c=h=a,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(a){a=ne(a);var c=this.min,h=this.max,p=a.min,v=a.max,z=v.x>=c.x&&p.x<=h.x,H=v.y>=c.y&&p.y<=h.y;return z&&H},overlaps:function(a){a=ne(a);var c=this.min,h=this.max,p=a.min,v=a.max,z=v.x>c.x&&p.x<h.x,H=v.y>c.y&&p.y<h.y;return z&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*a,v=Math.abs(c.y-h.y)*a;return ne(O(c.x-p,c.y-v),O(h.x+p,h.y+v))},equals:function(a){return a?(a=ne(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function ne(a,c){return!a||a instanceof q?a:new q(a,c)}function Ee(a,c){if(a)for(var h=c?[a,c]:a,p=0,v=h.length;p<v;p++)this.extend(h[p])}Ee.prototype={extend:function(a){var c=this._southWest,h=this._northEast,p,v;if(a instanceof le)p=a,v=a;else if(a instanceof Ee){if(p=a._southWest,v=a._northEast,!p||!v)return this}else return a?this.extend(Se(a)||se(a)):this;return!c&&!h?(this._southWest=new le(p.lat,p.lng),this._northEast=new le(v.lat,v.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(v.lat,h.lat),h.lng=Math.max(v.lng,h.lng)),this},pad:function(a){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*a,v=Math.abs(c.lng-h.lng)*a;return new Ee(new le(c.lat-p,c.lng-v),new le(h.lat+p,h.lng+v))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof le||"lat"in a?a=Se(a):a=se(a);var c=this._southWest,h=this._northEast,p,v;return a instanceof Ee?(p=a.getSouthWest(),v=a.getNorthEast()):p=v=a,p.lat>=c.lat&&v.lat<=h.lat&&p.lng>=c.lng&&v.lng<=h.lng},intersects:function(a){a=se(a);var c=this._southWest,h=this._northEast,p=a.getSouthWest(),v=a.getNorthEast(),z=v.lat>=c.lat&&p.lat<=h.lat,H=v.lng>=c.lng&&p.lng<=h.lng;return z&&H},overlaps:function(a){a=se(a);var c=this._southWest,h=this._northEast,p=a.getSouthWest(),v=a.getNorthEast(),z=v.lat>c.lat&&p.lat<h.lat,H=v.lng>c.lng&&p.lng<h.lng;return z&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=se(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(a,c){return a instanceof Ee?a:new Ee(a,c)}function le(a,c,h){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,h!==void 0&&(this.alt=+h)}le.prototype={equals:function(a,c){if(!a)return!1;a=Se(a);var h=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return h<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return Jt.distance(this,Se(a))},wrap:function(){return Jt.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,h=c/Math.cos(Math.PI/180*this.lat);return se([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function Se(a,c,h){return a instanceof le?a:j(a)&&typeof a[0]!="object"?a.length===3?new le(a[0],a[1],a[2]):a.length===2?new le(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new le(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new le(a,c,h)}var pt={latLngToPoint:function(a,c){var h=this.projection.project(a),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(a,c){var h=this.scale(c),p=this.transformation.untransform(a,h);return this.projection.unproject(p)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(a),p=this.transformation.transform(c.min,h),v=this.transformation.transform(c.max,h);return new q(p,v)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?g(a.lng,this.wrapLng,!0):a.lng,h=this.wrapLat?g(a.lat,this.wrapLat,!0):a.lat,p=a.alt;return new le(h,c,p)},wrapLatLngBounds:function(a){var c=a.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,v=c.lng-h.lng;if(p===0&&v===0)return a;var z=a.getSouthWest(),H=a.getNorthEast(),K=new le(z.lat-p,z.lng-v),Y=new le(H.lat-p,H.lng-v);return new Ee(K,Y)}},Jt=i({},pt,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var h=Math.PI/180,p=a.lat*h,v=c.lat*h,z=Math.sin((c.lat-a.lat)*h/2),H=Math.sin((c.lng-a.lng)*h/2),K=z*z+Math.cos(p)*Math.cos(v)*H*H,Y=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*Y}}),ve=6378137,Ue={R:ve,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,a.lat),-h),v=Math.sin(p*c);return new W(this.R*a.lng*c,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(a){var c=180/Math.PI;return new le((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=ve*Math.PI;return new q([-a,-a],[a,a])}()};function $e(a,c,h,p){if(j(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=h,this._d=p}$e.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new W((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function et(a,c,h,p){return new $e(a,c,h,p)}var je=i({},Jt,{code:"EPSG:3857",projection:Ue,transformation:function(){var a=.5/(Math.PI*Ue.R);return et(a,.5,-a,.5)}()}),gt=i({},je,{code:"EPSG:900913"});function J(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function xe(a,c){var h="",p,v,z,H,K,Y;for(p=0,z=a.length;p<z;p++){for(K=a[p],v=0,H=K.length;v<H;v++)Y=K[v],h+=(v?"L":"M")+Y.x+" "+Y.y;h+=c?be.svg?"z":"x":""}return h||"M0 0"}var Ze=document.documentElement.style,Re="ActiveXObject"in window,ke=Re&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),zn=Wn("webkit"),st=Wn("android"),$n=Wn("android 2")||Wn("android 3"),Vs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),yn=st&&Wn("Google")&&Vs<537&&!("AudioNode"in window),ws=!!window.opera,Mr=!Le&&Wn("chrome"),Bs=Wn("gecko")&&!zn&&!ws&&!Re,Or=!Mr&&Wn("safari"),Vr=Wn("phantom"),or="OTransition"in Ze,X=navigator.platform.indexOf("Win")===0,Te=Re&&"transition"in Ze,_e="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$n,Qe="MozPerspective"in Ze,Rt=!window.L_DISABLE_3D&&(Te||_e||Qe)&&!or&&!Vr,Lt=typeof orientation<"u"||Wn("mobile"),is=Lt&&zn,Us=Lt&&_e,Pn=!window.PointerEvent&&window.MSPointerEvent,Br=!!(window.PointerEvent||Pn),rt="ontouchstart"in window||!!window.TouchEvent,Cn=!window.L_NO_TOUCH&&(rt||Br),vs=Lt&&ws,as=Lt&&Bs,bo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Jl=function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",x,c),window.removeEventListener("testPassiveEventSupport",x,c)}catch{}return a}(),Ur=function(){return!!document.createElement("canvas").getContext}(),za=!!(document.createElementNS&&J("svg").createSVGRect),Xl=!!za&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),jo=!za&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),td=navigator.platform.indexOf("Mac")===0,nd=navigator.platform.indexOf("Linux")===0;function Wn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var be={ie:Re,ielt9:ke,edge:Le,webkit:zn,android:st,android23:$n,androidStock:yn,opera:ws,chrome:Mr,gecko:Bs,safari:Or,phantom:Vr,opera12:or,win:X,ie3d:Te,webkit3d:_e,gecko3d:Qe,any3d:Rt,mobile:Lt,mobileWebkit:is,mobileWebkit3d:Us,msPointer:Pn,pointer:Br,touch:Cn,touchNative:rt,mobileOpera:vs,mobileGecko:as,retina:bo,passiveEvents:Jl,canvas:Ur,svg:za,vml:jo,inlineSvg:Xl,mac:td,linux:nd},sd=be.msPointer?"MSPointerDown":"pointerdown",Fs=be.msPointer?"MSPointerMove":"pointermove",ec=be.msPointer?"MSPointerUp":"pointerup",tc=be.msPointer?"MSPointerCancel":"pointercancel",Pa={touchstart:sd,touchmove:Fs,touchend:ec,touchcancel:tc},No={touchstart:nc,touchmove:_s,touchend:_s,touchcancel:_s},Fr={},rd=!1;function id(a,c,h){return c==="touchstart"&&Ca(),No[c]?(h=No[c].bind(this,h),a.addEventListener(Pa[c],h,!1),h):(console.warn("wrong event specified:",c),x)}function xf(a,c,h){if(!Pa[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(Pa[c],h,!1)}function ko(a){Fr[a.pointerId]=a}function ad(a){Fr[a.pointerId]&&(Fr[a.pointerId]=a)}function To(a){delete Fr[a.pointerId]}function Ca(){rd||(document.addEventListener(sd,ko,!0),document.addEventListener(Fs,ad,!0),document.addEventListener(ec,To,!0),document.addEventListener(tc,To,!0),rd=!0)}function _s(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in Fr)c.touches.push(Fr[h]);c.changedTouches=[c],a(c)}}function nc(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Ht(c),_s(a,c)}function wf(a){var c={},h,p;for(p in a)h=a[p],c[p]=h&&h.bind?h.bind(a):h;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var od=200;function ld(a,c){a.addEventListener("dblclick",c);var h=0,p;function v(z){if(z.detail!==1){p=z.detail;return}if(!(z.pointerType==="mouse"||z.sourceCapabilities&&!z.sourceCapabilities.firesTouchEvents)){var H=oc(z);if(!(H.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!H.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var K=Date.now();K-h<=od?(p++,p===2&&c(wf(z))):p=1,h=K}}}return a.addEventListener("click",v),{dblclick:c,simDblclick:v}}function cd(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var Ia=Eo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$r=Eo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),sc=$r==="webkitTransition"||$r==="OTransition"?$r+"End":"transitionend";function rc(a){return typeof a=="string"?document.getElementById(a):a}function Si(a,c){var h=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(a,null);h=p?p[c]:null}return h==="auto"?null:h}function tt(a,c,h){var p=document.createElement(a);return p.className=c||"",h&&h.appendChild(p),p}function at(a){var c=a.parentNode;c&&c.removeChild(a)}function In(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function bs(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function js(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function Aa(a,c){if(a.classList!==void 0)return a.classList.contains(c);var h=lr(a);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function ge(a,c){if(a.classList!==void 0)for(var h=S(c),p=0,v=h.length;p<v;p++)a.classList.add(h[p]);else if(!Aa(a,c)){var z=lr(a);Wr(a,(z?z+" ":"")+c)}}function wt(a,c){a.classList!==void 0?a.classList.remove(c):Wr(a,E((" "+lr(a)+" ").replace(" "+c+" "," ")))}function Wr(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function lr(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Hn(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&ud(a,c)}function ud(a,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=a.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):a.style.filter+=" progid:"+p+"(opacity="+c+")"}function Eo(a){for(var c=document.documentElement.style,h=0;h<a.length;h++)if(a[h]in c)return a[h];return!1}function Hr(a,c,h){var p=c||new W(0,0);a.style[Ia]=(be.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function Dt(a,c){a._leaflet_pos=c,be.any3d?Hr(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function qr(a){return a._leaflet_pos||new W(0,0)}var $s,os,So;if("onselectstart"in document)$s=function(){De(window,"selectstart",Ht)},os=function(){mt(window,"selectstart",Ht)};else{var zi=Eo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$s=function(){if(zi){var a=document.documentElement.style;So=a[zi],a[zi]="none"}},os=function(){zi&&(document.documentElement.style[zi]=So,So=void 0)}}function zo(){De(window,"dragstart",Ht)}function Po(){mt(window,"dragstart",Ht)}var Ra,cr;function ic(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Co(),Ra=a,cr=a.style.outlineStyle,a.style.outlineStyle="none",De(window,"keydown",Co))}function Co(){Ra&&(Ra.style.outlineStyle=cr,Ra=void 0,cr=void 0,mt(window,"keydown",Co))}function dd(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Ns(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var vf={__proto__:null,TRANSFORM:Ia,TRANSITION:$r,TRANSITION_END:sc,get:rc,getStyle:Si,create:tt,remove:at,empty:In,toFront:bs,toBack:js,hasClass:Aa,addClass:ge,removeClass:wt,setClass:Wr,getClass:lr,setOpacity:Hn,testProp:Eo,setTransform:Hr,setPosition:Dt,getPosition:qr,get disableTextSelection(){return $s},get enableTextSelection(){return os},disableImageDrag:zo,enableImageDrag:Po,preventOutline:ic,restoreOutline:Co,getSizedParentNode:dd,getScale:Ns};function De(a,c,h,p){if(c&&typeof c=="object")for(var v in c)Io(a,v,c[v],h);else{c=S(c);for(var z=0,H=c.length;z<H;z++)Io(a,c[z],h,p)}return this}var An="_leaflet_events";function mt(a,c,h,p){if(arguments.length===1)Pi(a),delete a[An];else if(c&&typeof c=="object")for(var v in c)La(a,v,c[v],h);else if(c=S(c),arguments.length===2)Pi(a,function(K){return U(c,K)!==-1});else for(var z=0,H=c.length;z<H;z++)La(a,c[z],h,p);return this}function Pi(a,c){for(var h in a[An]){var p=h.split(/\d/)[0];(!c||c(p))&&La(a,p,null,null,h)}}var Zr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Io(a,c,h,p){var v=c+m(h)+(p?"_"+m(p):"");if(a[An]&&a[An][v])return this;var z=function(K){return h.call(p||a,K||window.event)},H=z;!be.touchNative&&be.pointer&&c.indexOf("touch")===0?z=id(a,c,z):be.touch&&c==="dblclick"?z=ld(a,z):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(Zr[c]||c,z,be.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(z=function(K){K=K||window.event,cc(a,K)&&H(K)},a.addEventListener(Zr[c],z,!1)):a.addEventListener(c,H,!1):a.attachEvent("on"+c,z),a[An]=a[An]||{},a[An][v]=z}function La(a,c,h,p,v){v=v||c+m(h)+(p?"_"+m(p):"");var z=a[An]&&a[An][v];if(!z)return this;!be.touchNative&&be.pointer&&c.indexOf("touch")===0?xf(a,c,z):be.touch&&c==="dblclick"?cd(a,z):"removeEventListener"in a?a.removeEventListener(Zr[c]||c,z,!1):a.detachEvent("on"+c,z),a[An][v]=null}function ct(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function ac(a){return Io(a,"wheel",ct),this}function Da(a){return De(a,"mousedown touchstart dblclick contextmenu",ct),a._leaflet_disable_click=!0,this}function Ht(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function ur(a){return Ht(a),ct(a),this}function oc(a){if(a.composedPath)return a.composedPath();for(var c=[],h=a.target;h;)c.push(h),h=h.parentNode;return c}function Ma(a,c){if(!c)return new W(a.clientX,a.clientY);var h=Ns(c),p=h.boundingClientRect;return new W((a.clientX-p.left)/h.x-c.clientLeft,(a.clientY-p.top)/h.y-c.clientTop)}var dr=be.linux&&be.chrome?window.devicePixelRatio:be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function lc(a){return be.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/dr:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function cc(a,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==a;)h=h.parentNode}catch{return!1}return h!==a}var Oa={__proto__:null,on:De,off:mt,stopPropagation:ct,disableScrollPropagation:ac,disableClickPropagation:Da,preventDefault:Ht,stop:ur,getPropagationPath:oc,getMousePosition:Ma,getWheelDelta:lc,isExternalTarget:cc,addListener:De,removeListener:mt},uc=te.extend({run:function(a,c,h,p){this.stop(),this._el=a,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=qr(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var h=this._startPos.add(this._offset.multiplyBy(a));c&&h._round(),Dt(this._el,h),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),We=te.extend({options:{crs:je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=A(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Se(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$r&&be.any3d&&!be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),De(this._proxy,sc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(Se(a),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=i({animate:h.animate},h.zoom),h.pan=i({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,h.zoom):this._tryAnimatedPan(a,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,h){var p=this.getZoomScale(c),v=this.getSize().divideBy(2),z=a instanceof W?a:this.latLngToContainerPoint(a),H=z.subtract(v).multiplyBy(1-1/p),K=this.containerPointToLatLng(v.add(H));return this.setView(K,c,{zoom:h})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():se(a);var h=O(c.paddingTopLeft||c.padding||[0,0]),p=O(c.paddingBottomRight||c.padding||[0,0]),v=this.getBoundsZoom(a,!1,h.add(p));if(v=typeof c.maxZoom=="number"?Math.min(c.maxZoom,v):v,v===1/0)return{center:a.getCenter(),zoom:v};var z=p.subtract(h).divideBy(2),H=this.project(a.getSouthWest(),v),K=this.project(a.getNorthEast(),v),Y=this.unproject(H.add(K).divideBy(2).add(z),v);return{center:Y,zoom:v}},fitBounds:function(a,c){if(a=se(a),!a.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(a,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=O(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new uc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ge(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,h){if(h=h||{},h.animate===!1||!be.any3d)return this.setView(a,c,h);this._stop();var p=this.project(this.getCenter()),v=this.project(a),z=this.getSize(),H=this._zoom;a=Se(a),c=c===void 0?H:c;var K=Math.max(z.x,z.y),Y=K*this.getZoomScale(H,c),ie=v.distanceTo(p)||1,fe=1.42,Ce=fe*fe;function He(qt){var Ed=qt?-1:1,q2=qt?Y:K,Z2=Y*Y-K*K+Ed*Ce*Ce*ie*ie,K2=2*q2*Ce*ie,kf=Z2/K2,E0=Math.sqrt(kf*kf+1)-kf,G2=E0<1e-9?-18:Math.log(E0);return G2}function Rn(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function sn(qt){return(Math.exp(qt)+Math.exp(-qt))/2}function Es(qt){return Rn(qt)/sn(qt)}var Zn=He(0);function Ho(qt){return K*(sn(Zn)/sn(Zn+fe*qt))}function F2(qt){return K*(sn(Zn)*Es(Zn+fe*qt)-Rn(Zn))/Ce}function $2(qt){return 1-Math.pow(1-qt,1.5)}var W2=Date.now(),k0=(He(1)-Zn)/fe,H2=h.duration?1e3*h.duration:1e3*k0*.8;function T0(){var qt=(Date.now()-W2)/H2,Ed=$2(qt)*k0;qt<=1?(this._flyToFrame=B(T0,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(F2(Ed)/ie)),H),this.getScaleZoom(K/Ho(Ed),H),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),T0.call(this),this},flyToBounds:function(a,c){var h=this._getBoundsCenterZoom(a,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(a){return a=se(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,se(a));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var h=O(c.paddingTopLeft||c.padding||[0,0]),p=O(c.paddingBottomRight||c.padding||[0,0]),v=this.project(this.getCenter()),z=this.project(a),H=this.getPixelBounds(),K=ne([H.min.add(h),H.max.subtract(p)]),Y=K.getSize();if(!K.contains(z)){this._enforcingBounds=!0;var ie=z.subtract(K.getCenter()),fe=K.extend(z).getSize().subtract(Y);v.x+=ie.x<0?-fe.x:fe.x,v.y+=ie.y<0?-fe.y:fe.y,this.panTo(this.unproject(v),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),v=h.divideBy(2).round(),z=p.subtract(v);return!z.x&&!z.y?this:(a.animate&&a.pan?this.panBy(z):(a.pan&&this._rawPanBy(z),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=l(this._handleGeolocationResponse,this),h=l(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,a):navigator.geolocation.getCurrentPosition(c,h,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,h=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,h=a.coords.longitude,p=new le(c,h),v=p.toBounds(a.coords.accuracy*2),z=this._locateOptions;if(z.setView){var H=this.getBoundsZoom(v);this.setView(p,z.maxZoom?Math.min(H,z.maxZoom):H)}var K={latlng:p,bounds:v,timestamp:a.timestamp};for(var Y in a.coords)typeof a.coords[Y]=="number"&&(K[Y]=a.coords[Y]);this.fire("locationfound",K)}},addHandler:function(a,c){if(!c)return this;var h=this[a]=new c(this);return this._handlers.push(h),this.options[a]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),at(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)at(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var h="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),p=tt("div",h,c||this._mapPane);return a&&(this._panes[a]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),h=this.unproject(a.getTopRight());return new Ee(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,h){a=se(a),h=O(h||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),z=this.getMaxZoom(),H=a.getNorthWest(),K=a.getSouthEast(),Y=this.getSize().subtract(h),ie=ne(this.project(K,p),this.project(H,p)).getSize(),fe=be.any3d?this.options.zoomSnap:1,Ce=Y.x/ie.x,He=Y.y/ie.y,Rn=c?Math.max(Ce,He):Math.min(Ce,He);return p=this.getScaleZoom(Rn,p),fe&&(p=Math.round(p/(fe/100))*(fe/100),p=c?Math.ceil(p/fe)*fe:Math.floor(p/fe)*fe),Math.max(v,Math.min(z,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var h=this._getTopLeftPoint(a,c);return new q(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(a)/h.scale(c)},getScaleZoom:function(a,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(a*h.scale(c));return isNaN(p)?1/0:p},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Se(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(O(a),c)},layerPointToLatLng:function(a){var c=O(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(Se(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Se(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(se(a))},distance:function(a,c){return this.options.crs.distance(Se(a),Se(c))},containerPointToLayerPoint:function(a){return O(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return O(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(O(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Se(a)))},mouseEventToContainerPoint:function(a){return Ma(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=rc(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");De(c,"scroll",this._onScroll,this),this._containerId=m(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&be.any3d,ge(a,"leaflet-container"+(be.touch?" leaflet-touch":"")+(be.retina?" leaflet-retina":"")+(be.ielt9?" leaflet-oldie":"")+(be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Si(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Dt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(a.markerPane,"leaflet-zoom-hide"),ge(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,h){Dt(this._mapPane,new W(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var v=this._zoom!==c;this._moveStart(v,h)._move(a,c)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,h,p){c===void 0&&(c=this._zoom);var v=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),p?h&&h.pinch&&this.fire("zoom",h):((v||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Dt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[m(this._container)]=this;var c=a?mt:De;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),be.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var h=[],p,v=c==="mouseout"||c==="mouseover",z=a.target||a.srcElement,H=!1;z;){if(p=this._targets[m(z)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){H=!0;break}if(p&&p.listens(c,!0)&&(v&&!cc(z,a)||(h.push(p),v))||z===this._container)break;z=z.parentNode}return!h.length&&!H&&!v&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var h=a.type;h==="mousedown"&&ic(c),this._fireDOMEvent(a,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,h){if(a.type==="click"){var p=i({},a);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var v=this._findEventTargets(a,c);if(h){for(var z=[],H=0;H<h.length;H++)h[H].listens(c,!0)&&z.push(h[H]);v=z.concat(v)}if(v.length){c==="contextmenu"&&Ht(a);var K=v[0],Y={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ie=K.getLatLng&&(!K._radius||K._radius<=10);Y.containerPoint=ie?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(a),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=ie?K.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(H=0;H<v.length;H++)if(v[H].fire(c,Y,!0),Y.originalEvent._stopped||v[H].options.bubblingMouseEvents===!1&&U(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return qr(this._mapPane)||new W(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var h=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var h=this.getSize()._divideBy(2);return this.project(a,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(a,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(a,c,h){var p=this._getNewPixelOrigin(h,c);return ne([this.project(a.getSouthWest(),c)._subtract(p),this.project(a.getNorthWest(),c)._subtract(p),this.project(a.getSouthEast(),c)._subtract(p),this.project(a.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,h){if(!h)return a;var p=this.project(a,c),v=this.getSize().divideBy(2),z=new q(p.subtract(v),p.add(v)),H=this._getBoundsOffset(z,h,c);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?a:this.unproject(p.add(H),c)},_limitOffset:function(a,c){if(!c)return a;var h=this.getPixelBounds(),p=new q(h.min.add(a),h.max.add(a));return a.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(a,c,h){var p=ne(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),v=p.min.subtract(a.min),z=p.max.subtract(a.max),H=this._rebound(v.x,-z.x),K=this._rebound(v.y,-z.y);return new W(H,K)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),h=this.getMaxZoom(),p=be.any3d?this.options.zoomSnap:1;return p&&(a=Math.round(a/p)*p),Math.max(c,Math.min(h,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){wt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var h=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var a=this._proxy=tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var h=Ia,p=this._proxy.style[h];Hr(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){at(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();Hr(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),v=this._getCenterOffset(a)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(v)?!1:(B(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&wt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ao(a,c){return new We(a,c)}var qn=he.extend({options:{position:"topright"},initialize:function(a){A(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),h=this.getPosition(),p=a._controlCorners[h];return ge(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(at(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),hr=function(a){return new qn(a)};We.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",h=this._controlContainer=tt("div",c+"control-container",this._container);function p(v,z){var H=c+v+" "+c+z;a[v+z]=tt("div",H,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)at(this._controlCorners[a]);at(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var hd=qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(a,c,h){A(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in a)this._addLayer(a[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return qn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(m(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):wt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return wt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=tt("div",a),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Da(c),ac(c);var p=this._section=tt("section",a+"-list");h&&(this._map.on("click",this.collapse,this),De(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=tt("a",a+"-toggle",c);v.href="#",v.title="Layers",v.setAttribute("role","button"),De(v,{keydown:function(z){z.keyCode===13&&this._expandSafely()},click:function(z){Ht(z),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=tt("div",a+"-base",p),this._separator=tt("div",a+"-separator",p),this._overlaysList=tt("div",a+"-overlays",p),c.appendChild(p)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&m(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,h){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(l(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;In(this._baseLayersList),In(this._overlaysList),this._layerControlInputs=[];var a,c,h,p,v=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,a=a||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(a=a&&v>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(m(a.target)),h=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(a,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(a){var c=document.createElement("label"),h=this._map.hasLayer(a.layer),p;a.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+m(this),h),this._layerControlInputs.push(p),p.layerId=m(a.layer),De(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+a.name;var z=document.createElement("span");c.appendChild(z),z.appendChild(p),z.appendChild(v);var H=a.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,h,p=[],v=[];this._handlingClick=!0;for(var z=a.length-1;z>=0;z--)c=a[z],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||v.push(h);for(z=0;z<v.length;z++)this._map.hasLayer(v[z])&&this._map.removeLayer(v[z]);for(z=0;z<p.length;z++)this._map.hasLayer(p[z])||this._map.addLayer(p[z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,h,p=this._map.getZoom(),v=a.length-1;v>=0;v--)c=a[v],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,De(a,"click",Ht),this.expand();var c=this;setTimeout(function(){mt(a,"click",Ht),c._preventClick=!1})}}),md=function(a,c,h){return new hd(a,c,h)},Kr=qn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",h=tt("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,h,p,v){var z=tt("a",h,p);return z.innerHTML=a,z.href="#",z.title=c,z.setAttribute("role","button"),z.setAttribute("aria-label",c),Da(z),De(z,"click",ur),De(z,"click",v,this),De(z,"click",this._refocusOnMap,this),z},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";wt(this._zoomInButton,c),wt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(ge(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(ge(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});We.mergeOptions({zoomControl:!0}),We.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kr,this.addControl(this.zoomControl))});var fd=function(a){return new Kr(a)},dc=qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",h=tt("div",c),p=this.options;return this._addScales(p,c+"-line",h),a.on(p.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),h},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,h){a.metric&&(this._mScale=tt("div",c,h)),a.imperial&&(this._iScale=tt("div",c,h))},_update:function(){var a=this._map,c=a.getSize().y/2,h=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/a)},_updateImperial:function(a){var c=a*3.2808399,h,p,v;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(v=this._getRoundNum(c),this._updateScale(this._iScale,v+" ft",v/c))},_updateScale:function(a,c,h){a.style.width=Math.round(this.options.maxWidth*h)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),h=a/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),hc=function(a){return new dc(a)},mc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ro=qn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(be.inlineSvg?mc+" ":"")+"Leaflet</a>"},initialize:function(a){A(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=tt("div","leaflet-control-attribution"),Da(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),a.length&&h.push(a.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});We.mergeOptions({attributionControl:!0}),We.addInitHook(function(){this.options.attributionControl&&new Ro().addTo(this)});var Lo=function(a){return new Ro(a)};qn.Layers=hd,qn.Zoom=Kr,qn.Scale=dc,qn.Attribution=Ro,hr.layers=md,hr.zoom=fd,hr.scale=hc,hr.attribution=Lo;var ls=he.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ls.addTo=function(a,c){return a.addHandler(c,this),this};var pd={Events:we},mr=be.touch?"touchstart mousedown":"mousedown",Ws=te.extend({options:{clickTolerance:3},initialize:function(a,c,h,p){A(this,p),this._element=a,this._dragStartTarget=c||a,this._preventOutline=h},enable:function(){this._enabled||(De(this._dragStartTarget,mr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ws._dragging===this&&this.finishDrag(!0),mt(this._dragStartTarget,mr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Aa(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Ws._dragging===this&&this.finishDrag();return}if(!(Ws._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Ws._dragging=this,this._preventOutline&&ic(this._element),zo(),$s(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,h=dd(this._element);this._startPoint=new W(c.clientX,c.clientY),this._startPos=qr(this._element),this._parentScale=Ns(h);var p=a.type==="mousedown";De(document,p?"mousemove":"touchmove",this._onMove,this),De(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,h=new W(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Ht(a),this._moved||(this.fire("dragstart"),this._moved=!0,ge(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Dt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){wt(document.body,"leaflet-dragging"),this._lastTarget&&(wt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mt(document,"mousemove touchmove",this._onMove,this),mt(document,"mouseup touchend touchcancel",this._onUp,this),Po(),os();var c=this._moved&&this._moving;this._moving=!1,Ws._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function fc(a,c,h){var p,v=[1,4,2,8],z,H,K,Y,ie,fe,Ce,He;for(z=0,fe=a.length;z<fe;z++)a[z]._code=G(a[z],c);for(K=0;K<4;K++){for(Ce=v[K],p=[],z=0,fe=a.length,H=fe-1;z<fe;H=z++)Y=a[z],ie=a[H],Y._code&Ce?ie._code&Ce||(He=Z(ie,Y,Ce,c,h),He._code=G(He,c),p.push(He)):(ie._code&Ce&&(He=Z(ie,Y,Ce,c,h),He._code=G(He,c),p.push(He)),p.push(Y));a=p}return a}function pc(a,c){var h,p,v,z,H,K,Y,ie,fe;if(!a||a.length===0)throw new Error("latlngs not passed");ot(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ce=Se([0,0]),He=se(a),Rn=He.getNorthWest().distanceTo(He.getSouthWest())*He.getNorthEast().distanceTo(He.getNorthWest());Rn<1700&&(Ce=Do(a));var sn=a.length,Es=[];for(h=0;h<sn;h++){var Zn=Se(a[h]);Es.push(c.project(Se([Zn.lat-Ce.lat,Zn.lng-Ce.lng])))}for(K=Y=ie=0,h=0,p=sn-1;h<sn;p=h++)v=Es[h],z=Es[p],H=v.y*z.x-z.y*v.x,Y+=(v.x+z.x)*H,ie+=(v.y+z.y)*H,K+=H*3;K===0?fe=Es[0]:fe=[Y/K,ie/K];var Ho=c.unproject(O(fe));return Se([Ho.lat+Ce.lat,Ho.lng+Ce.lng])}function Do(a){for(var c=0,h=0,p=0,v=0;v<a.length;v++){var z=Se(a[v]);c+=z.lat,h+=z.lng,p++}return Se([c/p,h/p])}var Mo={__proto__:null,clipPolygon:fc,polygonCenter:pc,centroid:Do};function xn(a,c){if(!c||!a.length)return a.slice();var h=c*c;return a=y(a,h),a=Ci(a,h),a}function gc(a,c,h){return Math.sqrt(Me(a,c,h,!0))}function gd(a,c,h){return Me(a,c,h)}function Ci(a,c){var h=a.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(h);v[0]=v[h-1]=1,u(a,v,c,0,h-1);var z,H=[];for(z=0;z<h;z++)v[z]&&H.push(a[z]);return H}function u(a,c,h,p,v){var z=0,H,K,Y;for(K=p+1;K<=v-1;K++)Y=Me(a[K],a[p],a[v],!0),Y>z&&(H=K,z=Y);z>h&&(c[H]=1,u(a,c,h,p,H),u(a,c,h,H,v))}function y(a,c){for(var h=[a[0]],p=1,v=0,z=a.length;p<z;p++)ue(a[p],a[v])>c&&(h.push(a[p]),v=p);return v<z-1&&h.push(a[z-1]),h}var _;function V(a,c,h,p,v){var z=p?_:G(a,h),H=G(c,h),K,Y,ie;for(_=H;;){if(!(z|H))return[a,c];if(z&H)return!1;K=z||H,Y=Z(a,c,K,h,v),ie=G(Y,h),K===z?(a=Y,z=ie):(c=Y,H=ie)}}function Z(a,c,h,p,v){var z=c.x-a.x,H=c.y-a.y,K=p.min,Y=p.max,ie,fe;return h&8?(ie=a.x+z*(Y.y-a.y)/H,fe=Y.y):h&4?(ie=a.x+z*(K.y-a.y)/H,fe=K.y):h&2?(ie=Y.x,fe=a.y+H*(Y.x-a.x)/z):h&1&&(ie=K.x,fe=a.y+H*(K.x-a.x)/z),new W(ie,fe,v)}function G(a,c){var h=0;return a.x<c.min.x?h|=1:a.x>c.max.x&&(h|=2),a.y<c.min.y?h|=4:a.y>c.max.y&&(h|=8),h}function ue(a,c){var h=c.x-a.x,p=c.y-a.y;return h*h+p*p}function Me(a,c,h,p){var v=c.x,z=c.y,H=h.x-v,K=h.y-z,Y=H*H+K*K,ie;return Y>0&&(ie=((a.x-v)*H+(a.y-z)*K)/Y,ie>1?(v=h.x,z=h.y):ie>0&&(v+=H*ie,z+=K*ie)),H=a.x-v,K=a.y-z,p?H*H+K*K:new W(v,z)}function ot(a){return!j(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function ut(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ot(a)}function Ut(a,c){var h,p,v,z,H,K,Y,ie;if(!a||a.length===0)throw new Error("latlngs not passed");ot(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var fe=Se([0,0]),Ce=se(a),He=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());He<1700&&(fe=Do(a));var Rn=a.length,sn=[];for(h=0;h<Rn;h++){var Es=Se(a[h]);sn.push(c.project(Se([Es.lat-fe.lat,Es.lng-fe.lng])))}for(h=0,p=0;h<Rn-1;h++)p+=sn[h].distanceTo(sn[h+1])/2;if(p===0)ie=sn[0];else for(h=0,z=0;h<Rn-1;h++)if(H=sn[h],K=sn[h+1],v=H.distanceTo(K),z+=v,z>p){Y=(z-p)/v,ie=[K.x-Y*(K.x-H.x),K.y-Y*(K.y-H.y)];break}var Zn=c.unproject(O(ie));return Se([Zn.lat+fe.lat,Zn.lng+fe.lng])}var ks={__proto__:null,simplify:xn,pointToSegmentDistance:gc,closestPointOnSegment:gd,clipSegment:V,_getEdgeIntersection:Z,_getBitCode:G,_sqClosestPointOnSegment:Me,isFlat:ot,_flat:ut,polylineCenter:Ut},Hs={project:function(a){return new W(a.lng,a.lat)},unproject:function(a){return new le(a.y,a.x)},bounds:new q([-180,-90],[180,90])},Ts={R:6378137,R_MINOR:6356752314245179e-9,bounds:new q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,h=this.R,p=a.lat*c,v=this.R_MINOR/h,z=Math.sqrt(1-v*v),H=z*Math.sin(p),K=Math.tan(Math.PI/4-p/2)/Math.pow((1-H)/(1+H),z/2);return p=-h*Math.log(Math.max(K,1e-10)),new W(a.lng*c*h,p)},unproject:function(a){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,v=Math.sqrt(1-p*p),z=Math.exp(-a.y/h),H=Math.PI/2-2*Math.atan(z),K=0,Y=.1,ie;K<15&&Math.abs(Y)>1e-7;K++)ie=v*Math.sin(H),ie=Math.pow((1-ie)/(1+ie),v/2),Y=Math.PI/2-2*Math.atan(z*ie)-H,H+=Y;return new le(H*c,a.x*c/h)}},fr={__proto__:null,LonLat:Hs,Mercator:Ts,SphericalMercator:Ue},Oo=i({},Jt,{code:"EPSG:3395",projection:Ts,transformation:function(){var a=.5/(Math.PI*Ts.R);return et(a,.5,-a,.5)}()}),Vo=i({},Jt,{code:"EPSG:4326",projection:Hs,transformation:et(1/180,1,-1/180,.5)}),v2=i({},pt,{projection:Hs,transformation:et(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var h=c.lng-a.lng,p=c.lat-a.lat;return Math.sqrt(h*h+p*p)},infinite:!0});pt.Earth=Jt,pt.EPSG3395=Oo,pt.EPSG3857=je,pt.EPSG900913=gt,pt.EPSG4326=Vo,pt.Simple=v2;var qs=te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[m(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[m(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});We.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=m(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=m(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return m(a)in this._layers},eachLayer:function(a,c){for(var h in this._layers)a.call(c,this._layers[h]);return this},_addLayers:function(a){a=a?j(a)?a:[a]:[];for(var c=0,h=a.length;c<h;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[m(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=m(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;a=v.minZoom===void 0?a:Math.min(a,v.minZoom),c=v.maxZoom===void 0?c:Math.max(c,v.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Bo=qs.extend({initialize:function(a,c){A(this,c),this._layers={};var h,p;if(a)for(h=0,p=a.length;h<p;h++)this.addLayer(a[h])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[a]&&p[a].apply(p,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var h in this._layers)a.call(c,this._layers[h]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return m(a)}}),_2=function(a,c){return new Bo(a,c)},Gr=Bo.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Bo.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Bo.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Ee;for(var c in this._layers){var h=this._layers[c];a.extend(h.getBounds?h.getBounds():h.getLatLng())}return a}}),b2=function(a,c){return new Gr(a,c)},Uo=he.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){A(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var h=this._getIconUrl(a);if(!h){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(a,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var v=O(p),z=O(c==="shadow"&&h.shadowAnchor||h.iconAnchor||v&&v.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(h.className||""),z&&(a.style.marginLeft=-z.x+"px",a.style.marginTop=-z.y+"px"),v&&(a.style.width=v.x+"px",a.style.height=v.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return be.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function j2(a){return new Uo(a)}var yc=Uo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof yc.imagePath!="string"&&(yc.imagePath=this._detectIconPath()),(this.options.imagePath||yc.imagePath)+Uo.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(h,p,v){var z=p.exec(h);return z&&z[v]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=tt("div","leaflet-default-icon-path",document.body),c=Si(a,"background-image")||Si(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),a0=ls.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Ws(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&wt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,z=qr(c._icon),H=h.getPixelBounds(),K=h.getPixelOrigin(),Y=ne(H.min._subtract(K).add(v),H.max._subtract(K).subtract(v));if(!Y.contains(z)){var ie=O((Math.max(Y.max.x,z.x)-Y.max.x)/(H.max.x-Y.max.x)-(Math.min(Y.min.x,z.x)-Y.min.x)/(H.min.x-Y.min.x),(Math.max(Y.max.y,z.y)-Y.max.y)/(H.max.y-Y.max.y)-(Math.min(Y.min.y,z.y)-Y.min.y)/(H.min.y-Y.min.y)).multiplyBy(p);h.panBy(ie,{animate:!1}),this._draggable._newPos._add(ie),this._draggable._startPos._add(ie),Dt(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=B(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,h=c._shadow,p=qr(c._icon),v=c._map.layerPointToLatLng(p);h&&Dt(h,p),c._latlng=v,a.latlng=v,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),yd=qs.extend({options:{icon:new yc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){A(this,c),this._latlng=Se(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=Se(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=a.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,a.title&&(h.title=a.title),h.tagName==="IMG"&&(h.alt=a.alt||"")),ge(h,c),a.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(h,"focus",this._panOnFocus,this);var v=a.icon.createShadow(this._shadow),z=!1;v!==this._shadow&&(this._removeShadow(),z=!0),v&&(ge(v,c),v.alt=""),this._shadow=v,a.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&z&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(this._icon,"focus",this._panOnFocus,this),at(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&at(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Dt(this._icon,a),this._shadow&&Dt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),a0)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new a0(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Hn(this._icon,a),this._shadow&&Hn(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,h=c.iconSize?O(c.iconSize):O(0,0),p=c.iconAnchor?O(c.iconAnchor):O(0,0);a.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function N2(a,c){return new yd(a,c)}var Ii=qs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return A(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),xd=Ii.extend({options:{fill:!0,radius:10},initialize:function(a,c){A(this,c),this._latlng=Se(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=Se(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return Ii.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,h=this._clickTolerance(),p=[a+h,c+h];this._pxBounds=new q(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function k2(a,c){return new xd(a,c)}var _f=xd.extend({initialize:function(a,c,h){if(typeof c=="number"&&(c=i({},h,{radius:c})),A(this,c),this._latlng=Se(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Ee(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Ii.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Jt.distance){var v=Math.PI/180,z=this._mRadius/Jt.R/v,H=h.project([c+z,a]),K=h.project([c-z,a]),Y=H.add(K).divideBy(2),ie=h.unproject(Y).lat,fe=Math.acos((Math.cos(z*v)-Math.sin(c*v)*Math.sin(ie*v))/(Math.cos(c*v)*Math.cos(ie*v)))/v;(isNaN(fe)||fe===0)&&(fe=z/Math.cos(Math.PI/180*c)),this._point=Y.subtract(h.getPixelOrigin()),this._radius=isNaN(fe)?0:Y.x-h.project([ie,a-fe]).x,this._radiusY=Y.y-H.y}else{var Ce=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Ce).x}this._updateBounds()}});function T2(a,c,h){return new _f(a,c,h)}var Qr=Ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){A(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,h=null,p=Me,v,z,H=0,K=this._parts.length;H<K;H++)for(var Y=this._parts[H],ie=1,fe=Y.length;ie<fe;ie++){v=Y[ie-1],z=Y[ie];var Ce=p(a,v,z,!0);Ce<c&&(c=Ce,h=p(a,v,z))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ut(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=Se(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Ee,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return ot(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],h=ot(a),p=0,v=a.length;p<v;p++)h?(c[p]=Se(a[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(a[p]);return c},_project:function(){var a=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new W(a,a);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,h){var p=a[0]instanceof le,v=a.length,z,H;if(p){for(H=[],z=0;z<v;z++)H[z]=this._map.latLngToLayerPoint(a[z]),h.extend(H[z]);c.push(H)}else for(z=0;z<v;z++)this._projectLatlngs(a[z],c,h)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,v,z,H,K,Y;for(h=0,v=0,z=this._rings.length;h<z;h++)for(Y=this._rings[h],p=0,H=Y.length;p<H-1;p++)K=V(Y[p],Y[p+1],a,p,!0),K&&(c[v]=c[v]||[],c[v].push(K[0]),(K[1]!==Y[p+1]||p===H-2)&&(c[v].push(K[1]),v++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,h=0,p=a.length;h<p;h++)a[h]=xn(a[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var h,p,v,z,H,K,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(h=0,z=this._parts.length;h<z;h++)for(K=this._parts[h],p=0,H=K.length,v=H-1;p<H;v=p++)if(!(!c&&p===0)&&gc(a,K[v],K[p])<=Y)return!0;return!1}});function E2(a,c){return new Qr(a,c)}Qr._flat=ut;var Fo=Qr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=Qr.prototype._convertLatLngs.call(this,a),h=c.length;return h>=2&&c[0]instanceof le&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(a){Qr.prototype._setLatLngs.call(this,a),ot(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ot(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,h=new W(c,c);if(a=new q(a.min.subtract(h),a.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,z;p<v;p++)z=fc(this._rings[p],a,!0),z.length&&this._parts.push(z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,h,p,v,z,H,K,Y,ie;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(z=0,Y=this._parts.length;z<Y;z++)for(h=this._parts[z],H=0,ie=h.length,K=ie-1;H<ie;K=H++)p=h[H],v=h[K],p.y>a.y!=v.y>a.y&&a.x<(v.x-p.x)*(a.y-p.y)/(v.y-p.y)+p.x&&(c=!c);return c||Qr.prototype._containsPoint.call(this,a,!0)}});function S2(a,c){return new Fo(a,c)}var Yr=Gr.extend({initialize:function(a,c){A(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=j(a)?a:a.features,h,p,v;if(c){for(h=0,p=c.length;h<p;h++)v=c[h],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var z=this.options;if(z.filter&&!z.filter(a))return this;var H=wd(a,z);return H?(H.feature=bd(a),H.defaultOptions=H.options,this.resetStyle(H),z.onEachFeature&&z.onEachFeature(a,H),this.addLayer(H)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function wd(a,c){var h=a.type==="Feature"?a.geometry:a,p=h?h.coordinates:null,v=[],z=c&&c.pointToLayer,H=c&&c.coordsToLatLng||bf,K,Y,ie,fe;if(!p&&!h)return null;switch(h.type){case"Point":return K=H(p),o0(z,a,K,c);case"MultiPoint":for(ie=0,fe=p.length;ie<fe;ie++)K=H(p[ie]),v.push(o0(z,a,K,c));return new Gr(v);case"LineString":case"MultiLineString":return Y=vd(p,h.type==="LineString"?0:1,H),new Qr(Y,c);case"Polygon":case"MultiPolygon":return Y=vd(p,h.type==="Polygon"?1:2,H),new Fo(Y,c);case"GeometryCollection":for(ie=0,fe=h.geometries.length;ie<fe;ie++){var Ce=wd({geometry:h.geometries[ie],type:"Feature",properties:a.properties},c);Ce&&v.push(Ce)}return new Gr(v);case"FeatureCollection":for(ie=0,fe=h.features.length;ie<fe;ie++){var He=wd(h.features[ie],c);He&&v.push(He)}return new Gr(v);default:throw new Error("Invalid GeoJSON object.")}}function o0(a,c,h,p){return a?a(c,h):new yd(h,p&&p.markersInheritOptions&&p)}function bf(a){return new le(a[1],a[0],a[2])}function vd(a,c,h){for(var p=[],v=0,z=a.length,H;v<z;v++)H=c?vd(a[v],c-1,h):(h||bf)(a[v]),p.push(H);return p}function jf(a,c){return a=Se(a),a.alt!==void 0?[w(a.lng,c),w(a.lat,c),w(a.alt,c)]:[w(a.lng,c),w(a.lat,c)]}function _d(a,c,h,p){for(var v=[],z=0,H=a.length;z<H;z++)v.push(c?_d(a[z],ot(a[z])?0:c-1,h,p):jf(a[z],p));return!c&&h&&v.length>0&&v.push(v[0].slice()),v}function $o(a,c){return a.feature?i({},a.feature,{geometry:c}):bd(c)}function bd(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Nf={toGeoJSON:function(a){return $o(this,{type:"Point",coordinates:jf(this.getLatLng(),a)})}};yd.include(Nf),_f.include(Nf),xd.include(Nf),Qr.include({toGeoJSON:function(a){var c=!ot(this._latlngs),h=_d(this._latlngs,c?1:0,!1,a);return $o(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Fo.include({toGeoJSON:function(a){var c=!ot(this._latlngs),h=c&&!ot(this._latlngs[0]),p=_d(this._latlngs,h?2:c?1:0,!0,a);return c||(p=[p]),$o(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),Bo.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(a).geometry.coordinates)}),$o(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var z=v.toGeoJSON(a);if(h)p.push(z.geometry);else{var H=bd(z);H.type==="FeatureCollection"?p.push.apply(p,H.features):p.push(H)}}}),h?$o(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function l0(a,c){return new Yr(a,c)}var z2=l0,jd=qs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,h){this._url=a,this._bounds=se(c),A(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){at(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&bs(this._image),this},bringToBack:function(){return this._map&&js(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=se(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:tt("img");if(ge(c,"leaflet-image-layer"),this._zoomAnimated&&ge(c,"leaflet-zoom-animated"),this.options.className&&ge(c,this.options.className),c.onselectstart=x,c.onmousemove=x,c.onload=l(this.fire,this,"load"),c.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Hr(this._image,h,c)},_reset:function(){var a=this._image,c=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();Dt(a,c.min),a.style.width=h.x+"px",a.style.height=h.y+"px"},_updateOpacity:function(){Hn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),P2=function(a,c,h){return new jd(a,c,h)},c0=jd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:tt("video");if(ge(c,"leaflet-image-layer"),this._zoomAnimated&&ge(c,"leaflet-zoom-animated"),this.options.className&&ge(c,this.options.className),c.onselectstart=x,c.onmousemove=x,c.onloadeddata=l(this.fire,this,"load"),a){for(var h=c.getElementsByTagName("source"),p=[],v=0;v<h.length;v++)p.push(h[v].src);this._url=h.length>0?p:[c.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var z=0;z<this._url.length;z++){var H=tt("source");H.src=this._url[z],c.appendChild(H)}}});function C2(a,c,h){return new c0(a,c,h)}var u0=jd.extend({_initImage:function(){var a=this._image=this._url;ge(a,"leaflet-image-layer"),this._zoomAnimated&&ge(a,"leaflet-zoom-animated"),this.options.className&&ge(a,this.options.className),a.onselectstart=x,a.onmousemove=x}});function I2(a,c,h){return new u0(a,c,h)}var pr=qs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof le||j(a))?(this._latlng=Se(a),A(this,c)):(A(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Hn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Hn(this._container,1),this.bringToFront(),this.options.interactive&&(ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Hn(this._container,0),this._removeTimeout=setTimeout(l(at,void 0,this._container),200)):at(this._container),this.options.interactive&&(wt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Se(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&bs(this._container),this},bringToBack:function(){return this._map&&js(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof Gr){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=O(this.options.offset),h=this._getAnchor();this._zoomAnimated?Dt(this._container,a.add(h)):c=c.add(a).add(h);var p=this._containerBottom=-c.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});We.include({_initOverlay:function(a,c,h,p){var v=c;return v instanceof a||(v=new a(p).setContent(c)),h&&v.setLatLng(h),v}}),qs.include({_initOverlay:function(a,c,h,p){var v=h;return v instanceof a?(A(v,p),v._source=this):(v=c&&!p?c:new a(p,this),v.setContent(h)),v}});var Nd=pr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,pr.prototype.openOn.call(this,a)},onAdd:function(a){pr.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ii||this._source.on("preclick",ct))},onRemove:function(a){pr.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ii||this._source.off("preclick",ct))},getEvents:function(){var a=pr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=tt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=tt("div",a+"-content-wrapper",c);if(this._contentNode=tt("div",a+"-content",h),Da(c),ac(this._contentNode),De(c,"contextmenu",ct),this._tipContainer=tt("div",a+"-tip-container",c),this._tip=tt("div",a+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=tt("a",a+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',De(p,"click",function(v){Ht(v),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var h=a.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=a.offsetHeight,v=this.options.maxHeight,z="leaflet-popup-scrolled";v&&p>v?(c.height=v+"px",ge(a,z)):wt(a,z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),h=this._getAnchor();Dt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(Si(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,v=new W(this._containerLeft,-h-this._containerBottom);v._add(qr(this._container));var z=a.layerPointToContainerPoint(v),H=O(this.options.autoPanPadding),K=O(this.options.autoPanPaddingTopLeft||H),Y=O(this.options.autoPanPaddingBottomRight||H),ie=a.getSize(),fe=0,Ce=0;z.x+p+Y.x>ie.x&&(fe=z.x+p-ie.x+Y.x),z.x-fe-K.x<0&&(fe=z.x-K.x),z.y+h+Y.y>ie.y&&(Ce=z.y+h-ie.y+Y.y),z.y-Ce-K.y<0&&(Ce=z.y-K.y),(fe||Ce)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([fe,Ce]))}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),A2=function(a,c){return new Nd(a,c)};We.mergeOptions({closePopupOnClick:!0}),We.include({openPopup:function(a,c,h){return this._initOverlay(Nd,a,c,h).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),qs.include({bindPopup:function(a,c){return this._popup=this._initOverlay(Nd,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Gr||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){ur(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof Ii)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var kd=pr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){pr.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){pr.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=pr.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=tt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,h,p=this._map,v=this._container,z=p.latLngToContainerPoint(p.getCenter()),H=p.layerPointToContainerPoint(a),K=this.options.direction,Y=v.offsetWidth,ie=v.offsetHeight,fe=O(this.options.offset),Ce=this._getAnchor();K==="top"?(c=Y/2,h=ie):K==="bottom"?(c=Y/2,h=0):K==="center"?(c=Y/2,h=ie/2):K==="right"?(c=0,h=ie/2):K==="left"?(c=Y,h=ie/2):H.x<z.x?(K="right",c=0,h=ie/2):(K="left",c=Y+(fe.x+Ce.x)*2,h=ie/2),a=a.subtract(O(c,h,!0)).add(fe).add(Ce),wt(v,"leaflet-tooltip-right"),wt(v,"leaflet-tooltip-left"),wt(v,"leaflet-tooltip-top"),wt(v,"leaflet-tooltip-bottom"),ge(v,"leaflet-tooltip-"+K),Dt(v,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Hn(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),R2=function(a,c){return new kd(a,c)};We.include({openTooltip:function(a,c,h){return this._initOverlay(kd,a,c,h).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),qs.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kd,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Gr||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(De(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),De(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,h,p;this._tooltip.options.sticky&&a.originalEvent&&(h=this._map.mouseEventToContainerPoint(a.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var d0=Uo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),h=this.options;if(h.html instanceof Element?(In(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=O(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function L2(a){return new d0(a)}Uo.Default=yc;var xc=qs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){A(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),at(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(bs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(js(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof W?a:new W(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,h=-a(-1/0,1/0),p=0,v=c.length,z;p<v;p++)z=c[p].style.zIndex,c[p]!==this._container&&z&&(h=a(h,+z));isFinite(h)&&(this.options.zIndex=h+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!be.ielt9){Hn(this._container,this.options.opacity);var a=+new Date,c=!1,h=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var z=Math.min(1,(a-v.loaded)/200);Hn(v.el,z),z<1?c=!0:(v.active?h=!0:this._onOpaqueTile(v),v.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&($(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===a?(this._levels[h].el.style.zIndex=c-Math.abs(a-h),this._onUpdateLevel(h)):(at(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[a],v=this._map;return p||(p=this._levels[a]={},p.el=tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=v.project(v.unproject(v.getPixelOrigin()),a).round(),p.zoom=a,this._setZoomTransform(p,v.getCenter(),v.getZoom()),x(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var a,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)at(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,h,p){var v=Math.floor(a/2),z=Math.floor(c/2),H=h-1,K=new W(+v,+z);K.z=+H;var Y=this._tileCoordsToKey(K),ie=this._tiles[Y];return ie&&ie.active?(ie.retain=!0,!0):(ie&&ie.loaded&&(ie.retain=!0),H>p?this._retainParent(v,z,H,p):!1)},_retainChildren:function(a,c,h,p){for(var v=2*a;v<2*a+2;v++)for(var z=2*c;z<2*c+2;z++){var H=new W(v,z);H.z=h+1;var K=this._tileCoordsToKey(H),Y=this._tiles[K];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);h+1<p&&this._retainChildren(v,z,h+1,p)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,h,p){var v=Math.round(c);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var z=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||z)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(a),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],a,c)},_setZoomTransform:function(a,c,h){var p=this._map.getZoomScale(h,a.zoom),v=a.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();be.any3d?Hr(a.el,v,p):Dt(a.el,v)},_resetGrid:function(){var a=this._map,c=a.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(a.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(a.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),v=c.project(a,this._tileZoom).floor(),z=c.getSize().divideBy(p*2);return new q(v.subtract(z),v.add(z))},_update:function(a){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(a),v=this._pxBoundsToTileRange(p),z=v.getCenter(),H=[],K=this.options.keepBuffer,Y=new q(v.getBottomLeft().subtract([K,-K]),v.getTopRight().add([K,-K]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ie in this._tiles){var fe=this._tiles[ie].coords;(fe.z!==this._tileZoom||!Y.contains(new W(fe.x,fe.y)))&&(this._tiles[ie].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(a,h);return}for(var Ce=v.min.y;Ce<=v.max.y;Ce++)for(var He=v.min.x;He<=v.max.x;He++){var Rn=new W(He,Ce);if(Rn.z=this._tileZoom,!!this._isValidTile(Rn)){var sn=this._tiles[this._tileCoordsToKey(Rn)];sn?sn.current=!0:H.push(Rn)}}if(H.sort(function(Zn,Ho){return Zn.distanceTo(z)-Ho.distanceTo(z)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Es=document.createDocumentFragment();for(He=0;He<H.length;He++)this._addTile(H[He],Es);this._level.el.appendChild(Es)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(a.x<h.min.x||a.x>h.max.x)||!c.wrapLat&&(a.y<h.min.y||a.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(a);return se(this.options.bounds).overlaps(p)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,h=this.getTileSize(),p=a.scaleBy(h),v=p.add(h),z=c.unproject(p,a.z),H=c.unproject(v,a.z);return[z,H]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),h=new Ee(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),h=new W(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(a){var c=this._tiles[a];c&&(at(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){ge(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=x,a.onmousemove=x,be.ielt9&&this.options.opacity<1&&Hn(a,this.options.opacity)},_addTile:function(a,c){var h=this._getTilePos(a),p=this._tileCoordsToKey(a),v=this.createTile(this._wrapCoords(a),l(this._tileReady,this,a));this._initTile(v),this.createTile.length<2&&B(l(this._tileReady,this,a,null,v)),Dt(v,h),this._tiles[p]={el:v,coords:a,current:!0},c.appendChild(v),this.fire("tileloadstart",{tile:v,coords:a})},_tileReady:function(a,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:a});var p=this._tileCoordsToKey(a);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Hn(h.el,0),$(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(ge(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),be.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new W(this._wrapX?g(a.x,this._wrapX):a.x,this._wrapY?g(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new q(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function D2(a){return new xc(a)}var Wo=xc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=A(this,c),c.detectRetina&&be.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var h=document.createElement("img");return De(h,"load",l(this._tileOnLoad,this,c,h)),De(h,"error",l(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(a),h},getTileUrl:function(a){var c={r:be.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=h),c["-y"]=h}return k(this._url,i(c,this.options))},_tileOnLoad:function(a,c){be.ielt9?setTimeout(l(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),a(h,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(a=c-a),a+p},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=x,c.onerror=x,!c.complete)){c.src=D;var h=this._tiles[a].coords;at(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",D),xc.prototype._removeTile.call(this,a)},_tileReady:function(a,c,h){if(!(!this._map||h&&h.getAttribute("src")===D))return xc.prototype._tileReady.call(this,a,c,h)}});function h0(a,c){return new Wo(a,c)}var m0=Wo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var h=i({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=A(this,c);var v=c.detectRetina&&be.retina?2:1,z=this.getTileSize();h.width=z.x*v,h.height=z.y*v,this.wmsParams=h},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Wo.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),h=this._crs,p=ne(h.project(c[0]),h.project(c[1])),v=p.min,z=p.max,H=(this._wmsVersion>=1.3&&this._crs===Vo?[v.y,v.x,z.y,z.x]:[v.x,v.y,z.x,z.y]).join(","),K=Wo.prototype.getTileUrl.call(this,a);return K+C(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(a,c){return i(this.wmsParams,a),c||this.redraw(),this}});function M2(a,c){return new m0(a,c)}Wo.WMS=m0,h0.wms=M2;var Jr=qs.extend({options:{padding:.1},initialize:function(a){A(this,a),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,c),z=p.multiplyBy(-h).add(v).subtract(this._map._getNewPixelOrigin(a,c));be.any3d?Hr(this._container,z,h):Dt(this._container,z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new q(h,h.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),f0=Jr.extend({options:{tolerance:0},getEvents:function(){var a=Jr.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Jr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");De(a,"mousemove",this._onMouseMove,this),De(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),De(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,at(this._container),mt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var a=this._bounds,c=this._container,h=a.getSize(),p=be.retina?2:1;Dt(c,a.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",be.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Jr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[m(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete a._order,delete this._layers[m(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),h=[],p,v;for(v=0;v<c.length;v++){if(p=Number(c[v]),isNaN(p))return;h.push(p)}a.options._dashArray=h}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)a=p.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var h,p,v,z,H=a._parts,K=H.length,Y=this._ctx;if(K){for(Y.beginPath(),h=0;h<K;h++){for(p=0,v=H[h].length;p<v;p++)z=H[h][p],Y[p?"lineTo":"moveTo"](z.x,z.y);c&&Y.closePath()}this._fillStroke(Y,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,h=this._ctx,p=Math.max(Math.round(a._radius),1),v=(Math.max(Math.round(a._radiusY),1)||p)/p;v!==1&&(h.save(),h.scale(1,v)),h.beginPath(),h.arc(c.x,c.y/v,p,0,Math.PI*2,!1),v!==1&&h.restore(),this._fillStroke(h,a)}},_fillStroke:function(a,c){var h=c.options;h.fill&&(a.globalAlpha=h.fillOpacity,a.fillStyle=h.fillColor||h.color,a.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=h.opacity,a.lineWidth=h.weight,a.strokeStyle=h.color,a.lineCap=h.lineCap,a.lineJoin=h.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),h,p,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(wt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var h,p,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(a),p&&(ge(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,h){this._map._fireDOMEvent(c,h||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function p0(a){return be.canvas?new f0(a):null}var wc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),O2={_initContainer:function(){this._container=tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Jr.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=wc("shape");ge(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=wc("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;at(c),a.removeInteractiveTarget(c),delete this._layers[m(a)]},_updateStyle:function(a){var c=a._stroke,h=a._fill,p=a.options,v=a._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(c||(c=a._stroke=wc("stroke")),v.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=j(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(v.removeChild(c),a._stroke=null),p.fill?(h||(h=a._fill=wc("fill")),v.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(v.removeChild(h),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),h=Math.round(a._radius),p=Math.round(a._radiusY||h);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){bs(a._container)},_bringToBack:function(a){js(a._container)}},Td=be.vml?wc:J,vc=Jr.extend({_initContainer:function(){this._container=Td("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Td("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){at(this._container),mt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var a=this._bounds,c=a.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),Dt(h,a.min),h.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=Td("path");a.options.className&&ge(c,a.options.className),a.options.interactive&&ge(c,"leaflet-interactive"),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){at(a._path),a.removeInteractiveTarget(a._path),delete this._layers[m(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,h=a.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,xe(a._parts,c))},_updateCircle:function(a){var c=a._point,h=Math.max(Math.round(a._radius),1),p=Math.max(Math.round(a._radiusY),1)||h,v="a"+h+","+p+" 0 1,0 ",z=a._empty()?"M0 0":"M"+(c.x-h)+","+c.y+v+h*2+",0 "+v+-h*2+",0 ";this._setPath(a,z)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){bs(a._path)},_bringToBack:function(a){js(a._path)}});be.vml&&vc.include(O2);function g0(a){return be.svg||be.vml?new vc(a):null}We.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&p0(a)||g0(a)}});var y0=Fo.extend({initialize:function(a,c){Fo.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=se(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function V2(a,c){return new y0(a,c)}vc.create=Td,vc.pointsToPath=xe,Yr.geometryToLayer=wd,Yr.coordsToLatLng=bf,Yr.coordsToLatLngs=vd,Yr.latLngToCoords=jf,Yr.latLngsToCoords=_d,Yr.getFeature=$o,Yr.asFeature=bd,We.mergeOptions({boxZoom:!0});var x0=ls.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){at(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),$s(),zo(),this._startPoint=this._map.mouseEventToContainerPoint(a),De(document,{contextmenu:ur,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=tt("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new q(this._point,this._startPoint),h=c.getSize();Dt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(at(this._box),wt(this._container,"leaflet-crosshair")),os(),Po(),mt(document,{contextmenu:ur,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var c=new Ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});We.addInitHook("addHandler","boxZoom",x0),We.mergeOptions({doubleClickZoom:!0});var w0=ls.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,v=a.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(v):c.setZoomAround(a.containerPoint,v)}});We.addInitHook("addHandler","doubleClickZoom",w0),We.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var v0=ls.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Ws(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){wt(this._map._container,"leaflet-grab"),wt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=se(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-c+h)%a+c-h,z=(p+c+h)%a-c-h,H=Math.abs(v+h)<Math.abs(z+h)?v:z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(a){var c=this._map,h=c.options,p=!h.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),p)c.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),z=(this._lastTime-this._times[0])/1e3,H=h.easeLinearity,K=v.multiplyBy(H/z),Y=K.distanceTo([0,0]),ie=Math.min(h.inertiaMaxSpeed,Y),fe=K.multiplyBy(ie/Y),Ce=ie/(h.inertiaDeceleration*H),He=fe.multiplyBy(-Ce/2).round();!He.x&&!He.y?c.fire("moveend"):(He=c._limitOffset(He,c.options.maxBounds),B(function(){c.panBy(He,{duration:Ce,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});We.addInitHook("addHandler","dragging",v0),We.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _0=ls.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),De(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,h=a.scrollTop||c.scrollTop,p=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},h=this.keyCodes,p,v;for(p=0,v=h.left.length;p<v;p++)c[h.left[p]]=[-1*a,0];for(p=0,v=h.right.length;p<v;p++)c[h.right[p]]=[a,0];for(p=0,v=h.down.length;p<v;p++)c[h.down[p]]=[0,a];for(p=0,v=h.up.length;p<v;p++)c[h.up[p]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},h=this.keyCodes,p,v;for(p=0,v=h.zoomIn.length;p<v;p++)c[h.zoomIn[p]]=a;for(p=0,v=h.zoomOut.length;p<v;p++)c[h.zoomOut[p]]=-a},_addHooks:function(){De(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],a.shiftKey&&(p=O(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(O(p),h.options.maxBounds)),h.options.worldCopyJump){var v=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(v)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;ur(a)}}});We.addInitHook("addHandler","keyboard",_0),We.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var b0=ls.extend({addHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=lc(a),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),p),ur(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),h=this._map.options.zoomSnap||0;a._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,z=h?Math.ceil(v/h)*h:v,H=a._limitZoom(c+(this._delta>0?z:-z))-c;this._delta=0,this._startTime=null,H&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+H):a.setZoomAround(this._lastMousePos,c+H))}});We.addInitHook("addHandler","scrollWheelZoom",b0);var B2=600;We.mergeOptions({tapHold:be.touchNative&&be.safari&&be.mobile,tapTolerance:15});var j0=ls.extend({addHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new W(c.clientX,c.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(De(document,"touchend",Ht),De(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),B2),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){mt(document,"touchend",Ht),mt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new W(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var h=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});We.addInitHook("addHandler","tapHold",j0),We.mergeOptions({touchZoom:be.touch,bounceAtZoomLimits:!0});var N0=ls.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){wt(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(a.touches[0]),p=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),Ht(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(a.touches[0]),p=c.mouseEventToContainerPoint(a.touches[1]),v=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(v,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&v<1||this._zoom>c.getMaxZoom()&&v>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var z=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&z.x===0&&z.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(z),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var H=l(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(H,this,!0),Ht(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});We.addInitHook("addHandler","touchZoom",N0),We.BoxZoom=x0,We.DoubleClickZoom=w0,We.Drag=v0,We.Keyboard=_0,We.ScrollWheelZoom=b0,We.TapHold=j0,We.TouchZoom=N0,n.Bounds=q,n.Browser=be,n.CRS=pt,n.Canvas=f0,n.Circle=_f,n.CircleMarker=xd,n.Class=he,n.Control=qn,n.DivIcon=d0,n.DivOverlay=pr,n.DomEvent=Oa,n.DomUtil=vf,n.Draggable=Ws,n.Evented=te,n.FeatureGroup=Gr,n.GeoJSON=Yr,n.GridLayer=xc,n.Handler=ls,n.Icon=Uo,n.ImageOverlay=jd,n.LatLng=le,n.LatLngBounds=Ee,n.Layer=qs,n.LayerGroup=Bo,n.LineUtil=ks,n.Map=We,n.Marker=yd,n.Mixin=pd,n.Path=Ii,n.Point=W,n.PolyUtil=Mo,n.Polygon=Fo,n.Polyline=Qr,n.Popup=Nd,n.PosAnimation=uc,n.Projection=fr,n.Rectangle=y0,n.Renderer=Jr,n.SVG=vc,n.SVGOverlay=u0,n.TileLayer=Wo,n.Tooltip=kd,n.Transformation=$e,n.Util=I,n.VideoOverlay=c0,n.bind=l,n.bounds=ne,n.canvas=p0,n.circle=T2,n.circleMarker=k2,n.control=hr,n.divIcon=L2,n.extend=i,n.featureGroup=b2,n.geoJSON=l0,n.geoJson=z2,n.gridLayer=D2,n.icon=j2,n.imageOverlay=P2,n.latLng=Se,n.latLngBounds=se,n.layerGroup=_2,n.map=Ao,n.marker=N2,n.point=O,n.polygon=S2,n.polyline=E2,n.popup=A2,n.rectangle=V2,n.setOptions=A,n.stamp=m,n.svg=g0,n.svgOverlay=I2,n.tileLayer=h0,n.tooltip=R2,n.transformation=et,n.version=s,n.videoOverlay=C2;var U2=window.L;n.noConflict=function(){return window.L=U2,this},window.L=n})})(Gg,Gg.exports);var gf=Gg.exports;const d2=L_(gf);function h2(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function m2(t,e){return e==null?function(s,i){const o=N.useRef();return o.current||(o.current=t(s,i)),o}:function(s,i){const o=N.useRef();o.current||(o.current=t(s,i));const l=N.useRef(s),{instance:d}=o.current;return N.useEffect(function(){l.current!==s&&(e(d,s,l.current),l.current=s)},[d,s,i]),o}}function zD(t,e){N.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function f2(t){return function(n){const s=c2(),i=t(u2(n,s),s);return bD(s.map,n.attribution),SD(i.current,n.eventHandlers),zD(i.current,s),i}}function PD(t,e){const n=m2(t,e),s=f2(n);return TD(s)}function CD(t,e){const n=m2(t,e),s=f2(n);return ED(s)}function ID(t,e,n){const{opacity:s,zIndex:i}=e;s!=null&&s!==n.opacity&&t.setOpacity(s),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function p2(){return c2().map}function AD(t){const e=p2();return N.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Qg(){return Qg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Qg.apply(this,arguments)}function RD({bounds:t,boundsOptions:e,center:n,children:s,className:i,id:o,placeholder:l,style:d,whenReady:m,zoom:f,...g},x){const[w]=N.useState({className:i,id:o,style:d}),[E,S]=N.useState(null);N.useImperativeHandle(x,()=>(E==null?void 0:E.map)??null,[E]);const A=N.useCallback(b=>{if(b!==null&&E===null){const k=new gf.Map(b,g);n!=null&&f!=null?k.setView(n,f):t!=null&&k.fitBounds(t,e),m!=null&&k.whenReady(m),S(ND(k))}},[]);N.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const C=E?nu.createElement(l2,{value:E},s):l??null;return nu.createElement("div",Qg({},w,{ref:A}),C)}const LD=N.forwardRef(RD),DD=PD(function({position:e,...n},s){const i=new gf.Marker(e,n);return h2(i,kD(s,{overlayContainer:i}))},function(e,n,s){n.position!==s.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==s.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==s.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==s.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),MD=CD(function({url:e,...n},s){const i=new gf.TileLayer(e,u2(n,s));return h2(i,s)},function(e,n,s){ID(e,n,s);const{url:i}=n;i!=null&&i!==s.url&&e.setUrl(i)});delete d2.Icon.Default.prototype._getIconUrl;d2.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const OD=({onLocationSelect:t})=>(AD({click:e=>{t(e.latlng.lat,e.latlng.lng)}}),null),VD=({lat:t,lng:e})=>{const n=p2();return N.useEffect(()=>{n.setView([t,e],16)},[t,e,n]),null},BD=()=>{var gt;const t=xs(),{isAuthenticated:e,user:n,userData:s}=Et(),{showToast:i}=ln(),[o,l]=N.useState(1),[d,m]=N.useState(!1),[f,g]=N.useState(!0),[x,w]=N.useState(null),[E,S]=N.useState(null),[A,C]=N.useState(null),[b,k]=N.useState(""),[j,U]=N.useState(!1),[D,F]=N.useState([]),[P,T]=N.useState(!1),M=N.useRef(null),[R,B]=N.useState({businessName:"",profession:"",description:"",experience:"",location:{city:"",district:"",address:"",postalCode:"",lat:52.2297,lng:21.0122},services:[],features:[],workingHours:{monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"10:00",to:"14:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!1}},image:"",category:"",travelRadius:10}),[$,I]=N.useState({name:"",price:0,duration:"30 min",description:""}),[he,de]=N.useState(""),[we,te]=N.useState([52.2297,21.0122]);N.useEffect(()=>{(async()=>{var xe,Ze;if(!(n!=null&&n.id)){g(!1);return}try{const Re=await tn.getByOwner(n.id.toString());if(Re.length>0){const ke=Re[0];w(ke.id),B(Le=>({...Le,businessName:ke.name||Le.businessName,profession:ke.profession||Le.profession,description:ke.description||Le.description,experience:ke.experience||Le.experience,location:ke.location||Le.location,features:ke.features||Le.features,workingHours:ke.workingHours||Le.workingHours,category:ke.category||Le.category,travelRadius:ke.travelRadius||Le.travelRadius})),(xe=ke.location)!=null&&xe.lat&&((Ze=ke.location)!=null&&Ze.lng)&&te([ke.location.lat,ke.location.lng]),ke.image&&S(ke.image)}}catch(Re){console.error("Bd adowania profilu:",Re)}finally{g(!1)}})()},[n==null?void 0:n.id]);const W=async J=>{if(!J||J.length<3){F([]),T(!1);return}U(!0);try{const Ze=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(J)}&countrycodes=pl&addressdetails=1&limit=5`,{headers:{"Accept-Language":"pl"}})).json();F(Ze),T(!0)}catch(xe){console.error("Bd wyszukiwania:",xe)}finally{U(!1)}},Q=J=>{k(J),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{W(J)},500)},O=J=>{const xe=parseFloat(J.lat),Ze=parseFloat(J.lon),Re=J.address;te([xe,Ze]),B(ke=>({...ke,location:{city:Re.city||Re.town||Re.village||"",district:Re.suburb||Re.neighbourhood||"",address:`${Re.road||""}${Re.house_number?" "+Re.house_number:""}`.trim(),postalCode:Re.postcode||"",lat:xe,lng:Ze}})),T(!1),k(J.display_name.split(",")[0])},q=async(J,xe)=>{try{const ke=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${J}&lon=${xe}&addressdetails=1`,{headers:{"Accept-Language":"pl"}})).json()).address;B(Le=>({...Le,location:{city:ke.city||ke.town||ke.village||"",district:ke.suburb||ke.neighbourhood||"",address:`${ke.road||""}${ke.house_number?" "+ke.house_number:""}`.trim(),postalCode:ke.postcode||"",lat:J,lng:xe}}))}catch(Ze){console.error("Bd reverse geocoding:",Ze)}},ne=(J,xe)=>{te([J,xe]),q(J,xe)},Ee=J=>{var Ze;const xe=(Ze=J.target.files)==null?void 0:Ze[0];if(xe){if(!xe.type.startsWith("image/")){i("Wybierz plik graficzny","error");return}if(xe.size>5*1024*1024){i("Plik za duy (max 5MB)","error");return}C(xe);const Re=new FileReader;Re.onloadend=()=>S(Re.result),Re.readAsDataURL(xe)}},se=()=>{C(null),S(null)},le=()=>{if(!$.name||$.price<=0){i("Podaj nazw i cen usugi","error");return}const J={id:Date.now().toString(),...$};B(xe=>({...xe,services:[...xe.services,J]})),I({name:"",price:0,duration:"30 min",description:""}),i("Usuga dodana!","success")},Se=J=>{B(xe=>({...xe,services:xe.services.filter(Ze=>Ze.id!==J)}))},pt=J=>{J.trim()&&(R.features.includes(J)||(B(xe=>({...xe,features:[...xe.features,J]})),de("")))},Jt=J=>{B(xe=>({...xe,features:xe.features.filter(Ze=>Ze!==J)}))},ve=async()=>{var J;if(!e){i("Musisz by zalogowany","error"),t("/auth?redirect=/biznes/dodaj-usluge");return}if(!R.businessName){i("Podaj nazw firmy","error"),l(1);return}if(!R.category){i("Wybierz kategori","error"),l(1);return}if(!R.location.city){i("Podaj lokalizacj","error"),l(2);return}if(R.services.length===0){i("Dodaj przynajmniej jedn usug","error"),l(3);return}m(!0);try{const xe=((J=n==null?void 0:n.id)==null?void 0:J.toString())||"";if(console.log("=== DEBUG SAVE ==="),console.log("user:",n),console.log("ownerId:",xe),console.log("formData:",R),!xe){i("Bd: brak ID uytkownika","error"),m(!1);return}const Ze=await tn.getByOwner(xe);console.log("existingProviders:",Ze);const Re=Ze[0],ke={name:R.businessName,profession:R.profession,category:R.category,description:R.description,experience:R.experience||"",location:R.location,services:R.services.map(Le=>({...Le,id:Le.id||`service_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,category:"Usugi"})),features:R.features,image:E||(Re==null?void 0:Re.image)||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",workingHours:R.workingHours,travelRadius:R.travelRadius,hasTravel:R.features.includes("Dojazd do klienta"),acceptsCard:R.features.includes("Patno kart"),ownerEmail:(s==null?void 0:s.email)||(n==null?void 0:n.email)||"",ownerUsername:(s==null?void 0:s.username)||(n==null?void 0:n.username)||"",ownerPhone:(s==null?void 0:s.phone)||(n==null?void 0:n.phone)||"",ownerAvatar:(s==null?void 0:s.avatar)||(n==null?void 0:n.avatar)||"",isVerified:(s==null?void 0:s.isVerified)||!1};if(Re){const Le=Re.services||[],zn=ke.services||[],st=new Set(Le.map(yn=>yn.id)),$n=zn.filter(yn=>!st.has(yn.id)),Vs=[...Le,...$n];console.log("Aktualizuj istniejcy profil:",Re.id),console.log("Istniejce usugi:",Le.length),console.log("Nowe usugi:",zn.length),console.log("Po poczeniu:",Vs.length),await tn.update(Re.id,{...ke,services:Vs}),i(" Profil zaktualizowany!","success")}else{console.log("Tworz nowy profil z ownerId:",xe),console.log("providerData:",ke);const Le=await tn.create(ke,xe);console.log("Utworzony provider:",Le),i(" Profil utworzony pomylnie!","success")}t("/biznes/uslugi")}catch(xe){console.error("Bd zapisywania:",xe),xe.message==="DUPLICATE_NAME"?(i(" Salon o takiej nazwie ju istnieje! Wybierz inn nazw.","error"),l(1)):xe.message==="DUPLICATE_PHONE"?(i(" Ten numer telefonu jest ju uywany przez inny salon!","error"),l(2)):i("Bd podczas zapisywania","error")}finally{m(!1)}},Ue=[{id:"fryzjer",name:"Fryzjer / Barber",icon:""},{id:"paznokcie",name:"Paznokcie / Manicure",icon:""},{id:"masaz",name:"Masa",icon:""},{id:"makijaz",name:"Makija",icon:""},{id:"tatuaze",name:"Tatuae",icon:""},{id:"kosmetyka",name:"Kosmetyka / Twarz",icon:""},{id:"inne",name:"Inne usugi",icon:""}],$e=["15 min","30 min","45 min","1h","1h 30min","2h","2h 30min","3h"],et=["Dojazd do klienta","Produkty premium","Konsultacja gratis","Parking","WiFi","Klimatyzacja","Patno kart","Rezerwacja online"],je=[{number:1,title:"Podstawowe info",icon:P_},{number:2,title:"Lokalizacja",icon:Ir},{number:3,title:"Usugi i ceny",icon:Vl},{number:4,title:"Szczegy",icon:Au}];return f?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[r.jsx(Ve,{className:"w-12 h-12 animate-spin text-emerald-500 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Wczytywanie danych..."})]}):r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-gray-600 hover:text-emerald-600 mb-4 transition-colors",children:[r.jsx(Ml,{className:"w-5 h-5"}),"Wr"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:x?"Dodaj now usug":"Utwrz profil usugodawcy"}),r.jsx("p",{className:"text-gray-600",children:x?"Dodaj kolejn usug do swojego profilu. Dane firmy zostay wczytane.":"Stwrz profil swojej usugi i zacznij przyjmowa klientw"})]}),r.jsx("div",{className:"flex items-center justify-between mb-8 bg-white rounded-2xl p-4 shadow-sm",children:je.map((J,xe)=>r.jsxs("div",{className:"flex items-center",children:[r.jsxs("button",{onClick:()=>l(J.number),className:`flex items-center gap-3 px-4 py-2 rounded-xl transition-all ${o===J.number?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":o>J.number?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:[r.jsx(J.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline font-medium",children:J.title})]}),xe<je.length-1&&r.jsx("div",{className:`w-8 lg:w-16 h-1 mx-2 rounded ${o>J.number?"bg-green-400":"bg-gray-200"}`})]},J.number))}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[o===1&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[r.jsx(P_,{className:"w-6 h-6 text-emerald-500"}),"Podstawowe informacje"]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nazwa firmy / salonu ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:R.businessName,onChange:J=>B({...R,businessName:J.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kategoria ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Ue.map(J=>r.jsxs("button",{type:"button",onClick:()=>B({...R,category:J.id}),className:`p-4 rounded-xl border-2 text-center transition-all ${R.category===J.id?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("span",{className:"text-2xl mb-2 block",children:J.icon}),r.jsx("span",{className:"text-sm font-medium",children:J.name})]},J.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tytu zawodowy"}),r.jsx("input",{type:"text",value:R.profession,onChange:J=>B({...R,profession:J.target.value}),placeholder:"np. Mistrz Fryzjerstwa",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zdjcie profilowe"}),E?r.jsxs("div",{className:"relative inline-block",children:[r.jsx("img",{src:E,alt:"Podgld",className:"w-48 h-48 object-cover rounded-xl shadow-md"}),r.jsx("button",{type:"button",onClick:se,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:r.jsx(Tn,{className:"w-4 h-4"})})]}):r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-emerald-500 hover:bg-emerald-50 transition-all",children:[r.jsx(ML,{className:"w-10 h-10 mb-3 text-gray-400"}),r.jsx("p",{className:"text-sm text-gray-500",children:r.jsx("span",{className:"font-semibold text-emerald-600",children:"Kliknij aby wybra"})}),r.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG (max. 5MB)"}),r.jsx("input",{type:"file",accept:"image/*",onChange:Ee,className:"hidden"})]})]})]}),o===2&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[r.jsx(Ir,{className:"w-6 h-6 text-emerald-500"}),"Lokalizacja"]}),r.jsxs("div",{className:"relative z-20",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wyszukaj adres"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:b,onChange:J=>Q(J.target.value),placeholder:"Wpisz adres, np. Marszakowska 10, Warszawa",className:"w-full pl-10 pr-10 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"}),j&&r.jsx(Ve,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-500 animate-spin"})]}),P&&D.length>0&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-emerald-300 rounded-xl shadow-2xl max-h-72 overflow-y-auto",children:[r.jsx("div",{className:"p-2 bg-emerald-50 border-b border-emerald-200 text-sm text-emerald-700 font-medium",children:" Wybierz adres z listy:"}),D.map(J=>r.jsxs("button",{onClick:()=>O(J),className:"w-full px-4 py-3 text-left hover:bg-emerald-50 border-b border-gray-100 last:border-0 transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900",children:J.display_name.split(",")[0]}),r.jsx("div",{className:"text-sm text-gray-500 truncate",children:J.display_name})]},J.place_id))]})]}),r.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gray-200 relative z-10",style:{height:"300px"},children:r.jsxs(LD,{center:we,zoom:13,style:{height:"100%",width:"100%"},children:[r.jsx(MD,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.jsx(DD,{position:we}),r.jsx(OD,{onLocationSelect:ne}),r.jsx(VD,{lat:we[0],lng:we[1]})]})}),r.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-2",children:[r.jsx(Ir,{className:"w-4 h-4"}),"Kliknij na map aby wybra dokadn lokalizacj"]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Miasto ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:R.location.city,onChange:J=>B({...R,location:{...R.location,city:J.target.value}}),placeholder:"np. Warszawa",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dzielnica"}),r.jsx("input",{type:"text",value:R.location.district,onChange:J=>B({...R,location:{...R.location,district:J.target.value}}),placeholder:"np. Mokotw",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ulica i numer"}),r.jsx("input",{type:"text",value:R.location.address,onChange:J=>B({...R,location:{...R.location,address:J.target.value}}),placeholder:"np. ul. Marszakowska 1",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kod pocztowy"}),r.jsx("input",{type:"text",value:R.location.postalCode,onChange:J=>B({...R,location:{...R.location,postalCode:J.target.value}}),placeholder:"np. 00-001",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Maksymalny zasig dojazdu: ",r.jsxs("span",{className:"font-bold text-emerald-600",children:[R.travelRadius," km"]})]}),r.jsx("input",{type:"range",min:"1",max:"50",value:R.travelRadius,onChange:J=>B({...R,travelRadius:parseInt(J.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-emerald-500"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:"1 km"}),r.jsx("span",{children:"25 km"}),r.jsx("span",{children:"50 km"})]})]})]}),o===3&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[r.jsx(Vl,{className:"w-6 h-6 text-emerald-500"}),"Usugi i ceny"]}),R.services.length>0&&r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("h3",{className:"font-medium text-gray-700",children:["Dodane usugi (",R.services.length,")"]}),R.services.map(J=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:J.name}),r.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-3",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Tt,{className:"w-3 h-3"})," ",J.duration]}),r.jsxs("span",{className:"font-semibold text-emerald-600",children:[J.price," z"]})]})]}),r.jsx("button",{onClick:()=>Se(J.id),className:"p-2 text-red-500 hover:bg-red-100 rounded-lg",children:r.jsx(nr,{className:"w-5 h-5"})})]},J.id))]}),r.jsxs("div",{className:"p-6 bg-emerald-50 rounded-xl",children:[r.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[r.jsx(li,{className:"w-5 h-5"}),"Dodaj now usug"]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nazwa usugi *"}),r.jsx("input",{type:"text",value:$.name,onChange:J=>I({...$,name:J.target.value}),placeholder:"np. Strzyenie damskie",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Cena (z) *"}),r.jsx("input",{type:"number",value:$.price||"",onChange:J=>I({...$,price:Number(J.target.value)}),placeholder:"np. 80",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Czas trwania"}),r.jsx("select",{value:$.duration,onChange:J=>I({...$,duration:J.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none",children:$e.map(J=>r.jsx("option",{value:J,children:J},J))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Opis (opcjonalnie)"}),r.jsx("input",{type:"text",value:$.description,onChange:J=>I({...$,description:J.target.value}),placeholder:"Krtki opis",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),r.jsxs("button",{type:"button",onClick:le,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[r.jsx(li,{className:"w-5 h-5"}),"Dodaj usug"]})]})]}),o===4&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[r.jsx(Au,{className:"w-6 h-6 text-emerald-500"}),"Dodatkowe informacje"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis dziaalnoci"}),r.jsx("textarea",{value:R.description,onChange:J=>B({...R,description:J.target.value}),placeholder:"Opisz swoj dziaalno...",rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none resize-none"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(gm,{className:"w-5 h-5"}),"Dowiadczenie i kwalifikacje"]}),r.jsx("textarea",{value:R.experience,onChange:J=>B({...R,experience:J.target.value}),placeholder:"np. 10 lat dowiadczenia, certyfikaty...",rows:3,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Udogodnienia"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:R.features.map(J=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm",children:[J,r.jsx("button",{onClick:()=>Jt(J),className:"hover:text-red-500",children:""})]},J))}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:et.filter(J=>!R.features.includes(J)).map(J=>r.jsxs("button",{type:"button",onClick:()=>pt(J),className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm hover:bg-gray-200",children:["+ ",J]},J))})]}),r.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl",children:[r.jsx("h3",{className:"font-bold text-lg mb-4",children:" Podsumowanie"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Nazwa:"})," ",r.jsx("strong",{children:R.businessName||"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Kategoria:"})," ",r.jsx("strong",{children:((gt=Ue.find(J=>J.id===R.category))==null?void 0:gt.name)||"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Lokalizacja:"})," ",r.jsxs("strong",{children:[R.location.city,R.location.district&&`, ${R.location.district}`]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Liczba usug:"})," ",r.jsx("strong",{children:R.services.length})]})]})]})]}),r.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-100",children:[r.jsx("button",{type:"button",onClick:()=>l(J=>Math.max(1,J-1)),disabled:o===1,className:"px-6 py-2 border border-gray-300 rounded-xl font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:" Wstecz"}),o<4?r.jsx("button",{type:"button",onClick:()=>l(J=>Math.min(4,J+1)),className:"px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg",children:"Dalej "}):r.jsx("button",{type:"button",onClick:ve,disabled:d,className:"px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg disabled:opacity-50 flex items-center gap-2",children:d?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Qi,{className:"w-5 h-5"}),"Zapisz usug"]})})]})]})]})},UD=()=>{const{user:t}=Et(),{showToast:e}=ln(),[n,s]=N.useState(new Date),[i,o]=N.useState(new Date().toISOString().split("T")[0]),[l,d]=N.useState("week"),[m,f]=N.useState([]),[g,x]=N.useState(null),[w,E]=N.useState(!1),[S,A]=N.useState(!0);N.useEffect(()=>{(async()=>{if(!t||!t.id){console.log("BusinessCalendar: No user or user.id"),A(!1);return}console.log("BusinessCalendar: Loading for user",t.id);try{const W=await tn.getByOwner(t.id);if(console.log("BusinessCalendar: Found providers",W.length),W.length>0){const Q=W[0],O=On.subscribeToProviderBookings(Q.id,q=>{console.log("BusinessCalendar: Got bookings",q.length),f(q),A(!1)});return()=>O()}else A(!1)}catch(W){console.error("BusinessCalendar: Error loading bookings:",W),A(!1)}})()},[t]);const C=async te=>{try{await On.confirm(te),e("Rezerwacja potwierdzona! ","success")}catch{e("Bd potwierdzania rezerwacji","error")}},b=async te=>{try{await On.cancel(te,"provider"),e("Rezerwacja anulowana","info"),E(!1),x(null)}catch{e("Bd anulowania rezerwacji","error")}},k=async te=>{try{await On.complete(te),e("Usuga oznaczona jako zakoczona! ","success"),E(!1),x(null)}catch{e("Bd oznaczania usugi","error")}},j=()=>{const te=new Date(n);l==="month"?te.setMonth(te.getMonth()-1):l==="week"?te.setDate(te.getDate()-7):te.setDate(te.getDate()-1),s(te)},U=()=>{const te=new Date(n);l==="month"?te.setMonth(te.getMonth()+1):l==="week"?te.setDate(te.getDate()+7):te.setDate(te.getDate()+1),s(te)},D=()=>{s(new Date),o(new Date().toISOString().split("T")[0])},F=te=>{const W=te.getFullYear(),Q=te.getMonth(),O=new Date(W,Q,1),q=new Date(W,Q+1,0),ne=[],Ee=O.getDay()||7;for(let le=Ee-1;le>0;le--)ne.push(new Date(W,Q,1-le));for(let le=1;le<=q.getDate();le++)ne.push(new Date(W,Q,le));const se=42-ne.length;for(let le=1;le<=se;le++)ne.push(new Date(W,Q+1,le));return ne},P=te=>{const W=[],Q=new Date(te),O=Q.getDay()||7;Q.setDate(Q.getDate()-O+1);for(let q=0;q<7;q++)W.push(new Date(Q.getTime()+q*864e5));return W},T=te=>te.toISOString().split("T")[0],M=te=>m.filter(W=>W.date===te).sort((W,Q)=>W.time.localeCompare(Q.time)),R=te=>{switch(te){case"confirmed":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"completed":return"bg-gray-100 text-gray-700 border-gray-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700"}},B=te=>{switch(te){case"confirmed":return"Potwierdzona";case"pending":return"Oczekuje";case"completed":return"Zakoczona";case"cancelled":return"Anulowana";default:return te}},$=async(te,W)=>{try{W==="confirmed"?await C(te):W==="cancelled"?await b(te):W==="completed"&&await k(te)}catch{e("Bd zmiany statusu","error")}};if(S)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-12 h-12 animate-spin text-emerald-500"})});const I=Array.from({length:12},(te,W)=>W+8),he=["Pon","Wt","r","Czw","Pt","Sob","Nd"],de=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],we=P(n);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kalendarz"}),r.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoimi rezerwacjami"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:D,className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-medium hover:bg-gray-50",children:"Dzisiaj"}),r.jsx("div",{className:"flex bg-white border border-gray-200 rounded-lg overflow-hidden",children:["day","week","month"].map(te=>r.jsx("button",{onClick:()=>d(te),className:`px-4 py-2 text-sm font-medium transition-colors ${l===te?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:te==="day"?"Dzie":te==="week"?"Tydzie":"Miesic"},te))})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(t0,{className:"w-5 h-5"})}),r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:l==="day"?new Date(i).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):l==="week"?`${we[0].toLocaleDateString("pl-PL",{day:"numeric",month:"short"})} - ${we[6].toLocaleDateString("pl-PL",{day:"numeric",month:"short",year:"numeric"})}`:`${de[n.getMonth()]} ${n.getFullYear()}`}),r.jsx("button",{onClick:U,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ol,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[l==="week"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[r.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500 border-r border-gray-200",children:"Godzina"}),we.map((te,W)=>{const Q=T(te),O=Q===new Date().toISOString().split("T")[0],q=M(Q);return r.jsxs("div",{className:`p-3 text-center border-r border-gray-200 last:border-r-0 cursor-pointer hover:bg-gray-50 ${O?"bg-emerald-50":""}`,onClick:()=>o(Q),children:[r.jsx("div",{className:"text-xs text-gray-500",children:he[W]}),r.jsx("div",{className:`text-lg font-bold ${O?"text-emerald-600":"text-gray-900"}`,children:te.getDate()}),q.length>0&&r.jsxs("div",{className:"text-xs text-emerald-600 font-medium",children:[q.length," rez."]})]},W)})]}),r.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:I.map(te=>r.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-100",children:[r.jsxs("div",{className:"p-2 text-center text-sm text-gray-500 border-r border-gray-200 bg-gray-50",children:[te,":00"]}),we.map((W,Q)=>{const O=T(W),q=m.filter(ne=>ne.date===O&&parseInt(ne.time.split(":")[0])===te);return r.jsx("div",{className:"p-1 border-r border-gray-100 last:border-r-0 min-h-[60px] relative",children:q.map(ne=>r.jsxs("button",{onClick:()=>{x(ne),E(!0)},className:`w-full text-left p-2 rounded-lg text-xs mb-1 border ${R(ne.status)} hover:shadow-md transition-shadow`,children:[r.jsx("div",{className:"font-bold truncate",children:ne.time}),r.jsx("div",{className:"truncate",children:ne.clientName}),r.jsx("div",{className:"truncate text-gray-600",children:ne.serviceName})]},ne.id))},Q)})]},te))})]}),l==="day"&&r.jsxs("div",{className:"p-4",children:[r.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[r.jsx(Yt,{className:"w-5 h-5 text-emerald-500"}),"Rezerwacje na ",new Date(i).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long"})]}),r.jsx("div",{className:"space-y-3",children:I.map(te=>{const W=m.filter(Q=>Q.date===i&&parseInt(Q.time.split(":")[0])===te);return r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"w-16 text-sm text-gray-500 font-medium pt-2",children:[te,":00"]}),r.jsx("div",{className:"flex-1 min-h-[60px] border-l-2 border-gray-200 pl-4",children:W.length===0?r.jsx("div",{className:"text-sm text-gray-400 py-2",children:""}):W.map(Q=>r.jsx("button",{onClick:()=>{x(Q),E(!0)},className:`w-full text-left p-4 rounded-xl border-2 mb-2 ${R(Q.status)} hover:shadow-lg transition-all`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-bold text-gray-900",children:[Q.time," - ",Q.clientName]}),r.jsx("div",{className:"text-sm mt-1",children:Q.serviceName}),r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[Q.serviceDuration," min  ",Q.servicePrice," z"]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(Q.status)}`,children:B(Q.status)})]})},Q.id))})]},te)})})]}),l==="month"&&r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:he.map(te=>r.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:te},te))}),r.jsx("div",{className:"grid grid-cols-7 gap-1",children:F(n).map((te,W)=>{const Q=T(te),O=te.getMonth()===n.getMonth(),q=Q===new Date().toISOString().split("T")[0],ne=Q===i,Ee=M(Q);return r.jsxs("button",{onClick:()=>{o(Q),d("day")},className:`p-2 min-h-[80px] rounded-lg text-left transition-all ${O?"bg-white":"bg-gray-50"} ${q?"ring-2 ring-emerald-500":""} ${ne?"bg-emerald-50":""} hover:bg-gray-100`,children:[r.jsx("div",{className:`text-sm font-medium ${O?"text-gray-900":"text-gray-400"}`,children:te.getDate()}),Ee.slice(0,2).map(se=>r.jsxs("div",{className:`text-xs p-1 rounded mt-1 truncate ${R(se.status)}`,children:[se.time," ",se.clientName.split(" ")[0]]},se.id)),Ee.length>2&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",Ee.length-2," wicej"]})]},W)})})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h3",{className:"font-bold text-lg mb-4",children:"Podsumowanie dnia"}),r.jsxs("div",{className:"grid sm:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:M(new Date().toISOString().split("T")[0]).length}),r.jsx("div",{className:"text-sm text-blue-600",children:"Rezerwacje dzi"})]}),r.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:m.filter(te=>te.status==="pending").length}),r.jsx("div",{className:"text-sm text-yellow-600",children:"Oczekujce"})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-xl",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.filter(te=>te.status==="confirmed").length}),r.jsx("div",{className:"text-sm text-green-600",children:"Potwierdzone"})]}),r.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[m.filter(te=>te.date===new Date().toISOString().split("T")[0]).reduce((te,W)=>te+W.servicePrice,0)," z"]}),r.jsx("div",{className:"text-sm text-purple-600",children:"Przychd dzi"})]})]})]}),w&&g&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Szczegy rezerwacji"}),r.jsx("button",{onClick:()=>{E(!1),x(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Status:"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${R(g.status)}`,children:B(g.status)})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(rs,{className:"w-5 h-5 text-gray-400"}),r.jsx("span",{className:"font-medium",children:g.clientName})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(va,{className:"w-5 h-5 text-gray-400"}),r.jsx("a",{href:`tel:${g.clientPhone}`,className:"text-emerald-600 hover:underline",children:g.clientPhone})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Rr,{className:"w-5 h-5 text-gray-400"}),r.jsx("a",{href:`mailto:${g.clientEmail}`,className:"text-emerald-600 hover:underline",children:g.clientEmail})]})]}),r.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl",children:[r.jsx("div",{className:"font-bold text-emerald-700",children:g.serviceName}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-emerald-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Tt,{className:"w-4 h-4"}),g.time]}),r.jsx("span",{children:g.serviceDuration}),r.jsxs("span",{className:"font-bold",children:[g.servicePrice," z"]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[g.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>$(g.id,"confirmed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600",children:[r.jsx(Wt,{className:"w-5 h-5"}),"Potwierd"]}),r.jsxs("button",{onClick:()=>$(g.id,"cancelled"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600",children:[r.jsx(Tn,{className:"w-5 h-5"}),"Anuluj"]})]}),g.status==="confirmed"&&r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsxs("button",{onClick:()=>$(g.id,"completed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600",children:[r.jsx(Wt,{className:"w-5 h-5"}),"Oznacz jako zakoczone"]}),r.jsxs("button",{onClick:()=>{confirm("Czy na pewno chcesz anulowa t rezerwacj?")&&$(g.id,"cancelled")},className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-100 text-red-600 rounded-xl font-semibold hover:bg-red-200",children:[r.jsx(Tn,{className:"w-5 h-5"}),"Anuluj"]})]})]})]})]})})})]})},FD=()=>{const{user:t}=Et(),[e,n]=N.useState("month"),[s,i]=N.useState(!0),[o,l]=N.useState({revenue:{total:0,change:0,byDay:[]},bookings:{total:0,change:0,completed:0,cancelled:0,pending:0,confirmed:0},clients:{total:0,new:0,returning:0},rating:{average:0,count:0,distribution:[]},topServices:[],peakHours:[]});if(N.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){i(!1);return}try{const S=await tn.getByOwner(t.id);if(S.length===0){i(!1);return}const A=S[0],C=await On.getByProvider(A.id),b=new Date;let k;e==="week"?k=new Date(b.getTime()-6048e5):e==="month"?k=new Date(b.getTime()-2592e6):k=new Date(b.getTime()-31536e6);const j=C.filter(se=>new Date(se.createdAt)>=k),U=j.filter(se=>se.status==="completed").length,D=j.filter(se=>se.status==="cancelled").length,F=j.filter(se=>se.status==="pending").length,P=j.filter(se=>se.status==="confirmed").length,T=new Date;T.setHours(0,0,0,0);const M=j.filter(se=>{if(se.status==="completed")return!0;if(se.status==="confirmed"||se.status==="pending"){const le=new Date(se.date);return le.setHours(23,59,59,999),le<T}return!1}),R=M.reduce((se,le)=>se+(le.servicePrice||0),0),$=["Nd","Pon","Wt","r","Czw","Pt","Sob"].map(se=>({day:se,amount:0}));M.forEach(se=>{const le=new Date(se.date).getDay();$[le].amount+=se.servicePrice||0});const I=$.shift();$.push(I);const he=new Set(j.map(se=>se.clientId)),de={};j.forEach(se=>{de[se.clientId]=(de[se.clientId]||0)+1});const we=Object.values(de).filter(se=>se>1).length,te={};j.forEach(se=>{te[se.serviceName]||(te[se.serviceName]={count:0,revenue:0}),te[se.serviceName].count++;const le=se.status==="completed",Se=(()=>{if(se.status==="confirmed"||se.status==="pending"){const pt=new Date(se.date);return pt.setHours(23,59,59,999),pt<T}return!1})();(le||Se)&&(te[se.serviceName].revenue+=se.servicePrice||0)});const W=Object.entries(te).map(([se,le])=>({name:se,...le})).sort((se,le)=>le.revenue-se.revenue).slice(0,4),Q={};for(let se=9;se<=18;se++)Q[`${se}:00`]=0;j.forEach(se=>{var Se;const le=(Se=se.time)==null?void 0:Se.split(":")[0];le&&Q[`${le}:00`]!==void 0&&Q[`${le}:00`]++});const O=Object.entries(Q).map(([se,le])=>({hour:se,bookings:le})),q=A.rating||0,ne=A.reviewsCount||0,Ee=[{stars:5,count:Math.round(ne*.7)},{stars:4,count:Math.round(ne*.2)},{stars:3,count:Math.round(ne*.07)},{stars:2,count:Math.round(ne*.02)},{stars:1,count:Math.round(ne*.01)}];l({revenue:{total:R,change:0,byDay:$},bookings:{total:j.length,change:0,completed:U,cancelled:D,pending:F,confirmed:P},clients:{total:he.size,new:he.size-we,returning:we},rating:{average:q,count:ne,distribution:Ee},topServices:W,peakHours:O})}catch(S){console.error("Error loading stats:",S)}finally{i(!1)}})()},[t,e]),s)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-12 h-12 animate-spin text-emerald-500"})});const d=Math.max(...o.revenue.byDay.map(E=>E.amount),1),m=Math.max(...o.peakHours.map(E=>E.bookings),1),f=o.rating.distribution.reduce((E,S)=>E+S.count,0)||1,g=o.bookings.total||1,x=o.peakHours.reduce((E,S)=>S.bookings>E.bookings?S:E,{hour:"-",bookings:0}),w=[{title:"Przychd",value:`${o.revenue.total.toLocaleString()} z`,change:o.revenue.change,icon:yL,bgColor:"bg-emerald-100",textColor:"text-emerald-600"},{title:"Rezerwacje",value:o.bookings.total,change:o.bookings.change,icon:Yt,bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Klienci",value:o.clients.total,subtitle:`${o.clients.new} nowych`,icon:Bl,bgColor:"bg-purple-100",textColor:"text-purple-600"},{title:"Ocena",value:o.rating.average.toFixed(1),subtitle:`${o.rating.count} opinii`,icon:yt,bgColor:"bg-amber-100",textColor:"text-amber-600"},{title:"Ukoczone",value:o.bookings.completed,subtitle:"usug",icon:Tt,bgColor:"bg-pink-100",textColor:"text-pink-600"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Statystyki"}),r.jsx("p",{className:"text-gray-600",children:"Analizuj wyniki swojego biznesu"})]}),r.jsx("div",{className:"flex bg-white border border-gray-200 rounded-lg overflow-hidden",children:["week","month","year"].map(E=>r.jsx("button",{onClick:()=>n(E),className:`px-4 py-2 text-sm font-medium transition-colors ${e===E?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:E==="week"?"Tydzie":E==="month"?"Miesic":"Rok"},E))})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-5 gap-4",children:w.map((E,S)=>r.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${E.bgColor}`,children:r.jsx(E.icon,{className:`w-5 h-5 ${E.textColor}`})}),E.change!==void 0&&E.change!==0&&r.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${E.change>=0?"text-green-600":"text-red-600"}`,children:[E.change>=0?r.jsx(t2,{className:"w-4 h-4"}):r.jsx(e2,{className:"w-4 h-4"}),Math.abs(E.change),"%"]})]}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E.value}),r.jsx("div",{className:"text-sm text-gray-500",children:E.subtitle||E.title})]},S))}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(n2,{className:"w-5 h-5 text-emerald-500"}),"Przychody wedug dni"]}),r.jsxs("span",{className:"text-2xl font-bold text-emerald-600",children:[o.revenue.total.toLocaleString()," z"]})]}),r.jsx("div",{className:"flex items-end justify-between gap-2 h-48",children:o.revenue.byDay.map((E,S)=>r.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[r.jsx("div",{className:"w-full relative flex flex-col justify-end h-40",children:r.jsx("div",{className:"w-full bg-gradient-to-t from-emerald-500 to-emerald-400 rounded-t-lg transition-all hover:from-emerald-600 hover:to-emerald-500",style:{height:`${E.amount/d*100}%`,minHeight:E.amount>0?"8px":"0"}})}),r.jsx("div",{className:"mt-2 text-xs text-gray-500 font-medium",children:E.day}),r.jsx("div",{className:"text-xs text-gray-400",children:E.amount>0?`${E.amount}`:"-"})]},S))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[r.jsx(Tt,{className:"w-5 h-5 text-blue-500"}),"Godziny rezerwacji"]}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.peakHours.map((E,S)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 text-sm text-gray-600 font-medium",children:E.hour}),r.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full",style:{width:`${E.bookings/m*100}%`}})}),r.jsx("div",{className:"w-8 text-sm text-gray-600 font-medium text-right",children:E.bookings})]},S))}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:r.jsxs("p",{className:"text-sm text-gray-500",children:[" Popularna godzina: ",r.jsx("strong",{children:x.hour})," (",x.bookings," rez.)"]})})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[r.jsx(EL,{className:"w-5 h-5 text-purple-500"}),"Status rezerwacji"]}),r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsxs("div",{className:"relative w-40 h-40",children:[o.bookings.total>0?r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90",children:[r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10b981",strokeWidth:"20",strokeDasharray:`${o.bookings.completed/g*251.2} 251.2`}),r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3b82f6",strokeWidth:"20",strokeDasharray:`${o.bookings.confirmed/g*251.2} 251.2`,strokeDashoffset:`-${o.bookings.completed/g*251.2}`}),r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#f59e0b",strokeWidth:"20",strokeDasharray:`${o.bookings.pending/g*251.2} 251.2`,strokeDashoffset:`-${(o.bookings.completed+o.bookings.confirmed)/g*251.2}`}),r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ef4444",strokeWidth:"20",strokeDasharray:`${o.bookings.cancelled/g*251.2} 251.2`,strokeDashoffset:`-${(o.bookings.completed+o.bookings.confirmed+o.bookings.pending)/g*251.2}`})]}):r.jsx("div",{className:"w-full h-full rounded-full border-8 border-gray-200"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:o.bookings.total}),r.jsx("div",{className:"text-xs text-gray-500",children:"rezerwacji"})]})})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Zakoczone"})]}),r.jsx("span",{className:"font-medium",children:o.bookings.completed})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Potwierdzone"})]}),r.jsx("span",{className:"font-medium",children:o.bookings.confirmed})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Oczekujce"})]}),r.jsx("span",{className:"font-medium",children:o.bookings.pending})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Anulowane"})]}),r.jsx("span",{className:"font-medium",children:o.bookings.cancelled})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[r.jsx(yt,{className:"w-5 h-5 text-amber-500"}),"Rozkad ocen"]}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"text-5xl font-bold text-gray-900",children:o.rating.average.toFixed(1)}),r.jsx("div",{className:"flex items-center justify-center gap-1 mt-2",children:[1,2,3,4,5].map(E=>r.jsx(yt,{className:`w-5 h-5 ${E<=Math.round(o.rating.average)?"text-amber-400 fill-amber-400":"text-gray-300"}`},E))}),r.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[o.rating.count," opinii"]})]}),r.jsx("div",{className:"space-y-2",children:o.rating.distribution.map(E=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1 w-12",children:[r.jsx("span",{className:"text-sm font-medium",children:E.stars}),r.jsx(yt,{className:"w-3 h-3 text-amber-400 fill-amber-400"})]}),r.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-amber-400 rounded-full",style:{width:`${E.count/f*100}%`}})}),r.jsx("span",{className:"text-sm text-gray-600 w-8 text-right",children:E.count})]},E.stars))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[r.jsx(pf,{className:"w-5 h-5 text-emerald-500"}),"Top usugi"]}),o.topServices.length>0?r.jsx("div",{className:"space-y-4",children:o.topServices.map((E,S)=>r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-white ${S===0?"bg-amber-500":S===1?"bg-gray-400":S===2?"bg-amber-700":"bg-gray-300"}`,children:S+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-gray-900 truncate",children:E.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:[E.count," rezerwacji"]})]}),r.jsxs("div",{className:"font-bold text-emerald-600",children:[E.revenue," z"]})]},S))}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Yt,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),r.jsx("p",{children:"Brak danych"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[r.jsx(Bl,{className:"w-5 h-5 text-purple-500"}),"Klienci"]}),r.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl",children:[r.jsx("div",{className:"text-4xl font-bold text-purple-600",children:o.clients.total}),r.jsx("div",{className:"text-sm text-purple-600 mt-1",children:"Wszystkich klientw"})]}),r.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-xl",children:[r.jsx("div",{className:"text-4xl font-bold text-green-600",children:o.clients.new}),r.jsx("div",{className:"text-sm text-green-600 mt-1",children:"Nowych klientw"})]}),r.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-xl",children:[r.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[o.clients.total>0?Math.round(o.clients.returning/o.clients.total*100):0,"%"]}),r.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Powracajcych"})]})]})]})]})},$D=()=>{const{user:t}=Et(),[e,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState([]),[d,m]=N.useState(""),[f,g]=N.useState(""),[x,w]=N.useState(!0),[E,S]=N.useState(!1),[,A]=N.useState(null),C=N.useRef(null);N.useEffect(()=>{if(!(t!=null&&t.id)){w(!1);return}const D=async()=>{try{const P=await tn.getByOwner(t.id);if(P.length===0){w(!1);return}const T=P[0];return A(T.id),Js.subscribeToProviderConversations(T.id,R=>{n(R),w(!1)})}catch(P){console.error("Error loading messages:",P),w(!1)}};let F;return D().then(P=>{F=P}),()=>{F&&F()}},[t==null?void 0:t.id]),N.useEffect(()=>{if(!s||!(t!=null&&t.id))return;Js.markAsRead(s.id,t.id);const D=Js.subscribeToMessages(s.id,F=>{l(F)});return()=>D()},[s,t==null?void 0:t.id]),N.useEffect(()=>{var D;(D=C.current)==null||D.scrollIntoView({behavior:"smooth"})},[o]);const b=async()=>{if(!(!d.trim()||!s||!(t!=null&&t.id))){S(!0);try{const D=s.participants.find(F=>F!==t.id)||"";await Js.sendMessage(s.id,t.id,t.username||"Uytkownik",t.avatar||"",d.trim(),D),m("")}catch(D){console.error("Error sending message:",D)}finally{S(!1)}}},k=D=>{if(!(t!=null&&t.id))return{name:"Nieznany",avatar:""};const F=D.participants.find(P=>P!==t.id)||"";return{name:D.participantNames[F]||"Nieznany",avatar:D.participantAvatars[F]||""}},j=D=>{const F=new Date(D),T=new Date().getTime()-F.getTime(),M=Math.floor(T/6e4),R=Math.floor(T/36e5),B=Math.floor(T/864e5);return M<1?"Teraz":M<60?`${M} min`:R<24?`${R}h`:B<7?`${B}d`:F.toLocaleDateString("pl-PL")},U=e.filter(D=>k(D).name.toLowerCase().includes(f.toLowerCase()));return x?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-12 h-12 animate-spin text-emerald-500"})}):r.jsxs("div",{className:"h-[calc(100vh-180px)] flex bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsxs("div",{className:`w-full md:w-80 lg:w-96 border-r border-gray-100 flex flex-col ${s?"hidden md:flex":""}`,children:[r.jsxs("div",{className:"p-4 border-b border-gray-100",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Wiadomoci"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ti,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Szukaj...",value:f,onChange:D=>g(D.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:U.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(Bn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"Brak wiadomoci"}),r.jsx("p",{className:"text-sm mt-1",children:"Gdy klient napisze, pojawi si tutaj"})]}):U.map(D=>{const F=k(D),P=t!=null&&t.id&&D.unreadCount[t.id]||0;return r.jsx("div",{onClick:()=>i(D),className:`p-4 border-b border-gray-50 cursor-pointer transition-colors ${(s==null?void 0:s.id)===D.id?"bg-emerald-50":"hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[F.avatar?r.jsx("img",{src:F.avatar,alt:F.name,className:"w-12 h-12 rounded-full object-cover"}):r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center text-white font-bold",children:F.name.charAt(0).toUpperCase()}),P>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:P})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:F.name}),r.jsx("span",{className:"text-xs text-gray-500",children:j(D.lastMessageAt)})]}),r.jsx("p",{className:`text-sm truncate ${P>0?"font-medium text-gray-900":"text-gray-500"}`,children:D.lastMessage||"Brak wiadomoci"})]})]})},D.id)})})]}),s?r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>i(null),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg",children:""}),(()=>{const D=k(s);return r.jsxs(r.Fragment,{children:[D.avatar?r.jsx("img",{src:D.avatar,alt:D.name,className:"w-10 h-10 rounded-full object-cover"}):r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center text-white font-bold",children:D.name.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:D.name}),r.jsx("div",{className:"text-xs text-gray-500",children:"Klient"})]})]})})()]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:r.jsx(va,{className:"w-5 h-5"})}),r.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:r.jsx(OL,{className:"w-5 h-5"})}),r.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:r.jsx(kL,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[o.length===0?r.jsx("div",{className:"text-center text-gray-500 py-8",children:r.jsx("p",{children:"Rozpocznij rozmow"})}):o.map(D=>{const F=D.senderId===(t==null?void 0:t.id);return r.jsx("div",{className:`flex ${F?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2 ${F?"bg-emerald-500 text-white":"bg-white text-gray-900 shadow-sm"}`,children:[r.jsx("p",{children:D.text}),r.jsx("div",{className:`text-xs mt-1 ${F?"text-emerald-100":"text-gray-400"}`,children:j(D.createdAt)})]})},D.id)}),r.jsx("div",{ref:C})]}),r.jsx("div",{className:"p-4 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"text",value:d,onChange:D=>m(D.target.value),onKeyPress:D=>D.key==="Enter"&&b(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),r.jsx("button",{onClick:b,disabled:!d.trim()||E,className:"p-3 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed",children:E?r.jsx(Ve,{className:"w-5 h-5 animate-spin"}):r.jsx(Lu,{className:"w-5 h-5"})})]})})]}):r.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx(Bn,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"text-lg",children:"Wybierz konwersacj"}),r.jsx("p",{className:"text-sm",children:"lub poczekaj na wiadomo od klienta"})]})})]})},R_=()=>{const{user:t,login:e,logout:n}=Et(),{showToast:s}=ln(),[i,o]=N.useState(null),[l,d]=N.useState(!0),f=(O=>{if(!O)return{countryCode:"+48",number:""};const q=O.match(/^(\+\d{1,3})\s?(.*)$/);return q?{countryCode:q[1],number:q[2]}:{countryCode:"+48",number:O}})(t==null?void 0:t.phone),[g,x]=N.useState({username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||"",phone:f.number,phoneCountryCode:f.countryCode,businessName:(t==null?void 0:t.businessName)||""}),[w,E]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[S,A]=N.useState({current:!1,new:!1,confirm:!1}),[C,b]=N.useState({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),[k,j]=N.useState({emailBookings:!0,emailMessages:!0,emailMarketing:!1,smsBookings:!0,smsReminders:!0,pushNotifications:!0}),[U,D]=N.useState({profileVisible:!0,showPhone:!1,showEmail:!1}),[F,P]=N.useState("profile"),[T,M]=N.useState(!1);N.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){d(!1);return}try{const q=await tn.getByOwner(t.id);if(q.length>0){const ne=q[0];o(ne),b(ne.workingHours)}}catch(q){console.error("Error loading provider:",q)}finally{d(!1)}})()},[t==null?void 0:t.id]);const R=async()=>{M(!0);const O=g.username.trim().split(/\s+/);if(O.length<2||O.some(le=>le.length<2)){s("Podaj pene imi i nazwisko (np. Jan Kowalski)","error"),M(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)){s("Nieprawidowy adres email","error"),M(!1);return}if(g.phone){const le=s0(g.phoneCountryCode,g.phone);if(!le.valid){s(le.message,"error"),M(!1);return}}await new Promise(le=>setTimeout(le,500));const ne=g.phone.replace(/\D/g,""),Ee=`${g.phoneCountryCode} ${ne}`,se={...t,username:g.username,email:g.email,phone:Ee,businessName:g.businessName};e(se),s("Profil zaktualizowany pomylnie","success"),M(!1)},B=async()=>{if(!i){s("Najpierw utwrz profil usugodawcy","error");return}for(const[O,q]of Object.entries(C))if(q.enabled){const ne=parseInt(q.from.split(":")[0]),Ee=parseInt(q.to.split(":")[0]);if(ne>=Ee){s(`${{monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"}[O]}: Godzina otwarcia musi by wczeniejsza ni zamknicia`,"error");return}}M(!0);try{await tn.update(i.id,{workingHours:C}),o({...i,workingHours:C}),s("Godziny pracy zostay zapisane","success")}catch(O){console.error("Error saving working hours:",O),s("Bd zapisu godzin pracy","error")}finally{M(!1)}},$=async()=>{if(!w.currentPassword){s("Podaj aktualne haso","error");return}if(w.newPassword.length<8){s("Nowe haso musi mie minimum 8 znakw","error");return}if(!/[A-Z]/.test(w.newPassword)){s("Haso musi zawiera co najmniej jedn wielk liter","error");return}if(!/[a-z]/.test(w.newPassword)){s("Haso musi zawiera co najmniej jedn ma liter","error");return}if(!/[0-9]/.test(w.newPassword)){s("Haso musi zawiera co najmniej jedn cyfr","error");return}if(w.newPassword!==w.confirmPassword){s("Hasa nie s takie same","error");return}M(!0),await new Promise(O=>setTimeout(O,500)),s("Haso zostao zmienione","success"),E({currentPassword:"",newPassword:"",confirmPassword:""}),M(!1)},I=async()=>{M(!0),await new Promise(O=>setTimeout(O,500)),s("Ustawienia powiadomie zapisane","success"),M(!1)},he=async()=>{M(!0),await new Promise(O=>setTimeout(O,500)),s("Ustawienia prywatnoci zapisane","success"),M(!1)},de=()=>{const O=window.prompt("Aby usun konto, wpisz swoje haso:");if(O!==null){if(!O||O.length<8){s("Nieprawidowe haso","error");return}window.confirm("UWAGA: Czy na pewno chcesz usun swoje konto? Wszystkie Twoje dane, usugi i rezerwacje zostan trwale usunite. Ta operacja jest nieodwracalna!")&&(n(),s("Konto zostao usunite","info"))}},we=(O,q,ne)=>{b(Ee=>({...Ee,[O]:{...Ee[O],[q]:ne}}))},te=[];for(let O=0;O<24;O++)for(let q=0;q<60;q+=30){const ne=`${String(O).padStart(2,"0")}:${String(q).padStart(2,"0")}`;te.push(ne)}const W={monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"},Q=[{id:"profile",label:"Profil",icon:rs},{id:"hours",label:"Godziny pracy",icon:Tt},{id:"password",label:"Haso",icon:si},{id:"notifications",label:"Powiadomienia",icon:Ls},{id:"privacy",label:"Prywatno",icon:Mn},{id:"billing",label:"Patnoci",icon:fo},{id:"danger",label:"Strefa zagroenia",icon:Iu}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ustawienia"}),r.jsx("p",{className:"text-gray-600",children:"Zarzdzaj ustawieniami swojego konta i profilu"})]}),r.jsxs("div",{className:"grid lg:grid-cols-[250px,1fr] gap-6",children:[r.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:r.jsx("nav",{className:"space-y-1",children:Q.map(O=>r.jsxs("button",{onClick:()=>P(O.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-colors ${F===O.id?"bg-emerald-50 text-emerald-700 font-medium":"text-gray-600 hover:bg-gray-50"} ${O.id==="danger"?"text-red-600 hover:bg-red-50":""}`,children:[r.jsx(O.icon,{className:`w-5 h-5 ${O.id==="danger"?"text-red-500":""}`}),O.label]},O.id))})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[F==="profile"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Informacje profilowe"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Zaktualizuj swoje dane osobowe"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),r.jsxs("div",{className:"relative",children:[r.jsx(rs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:g.username,onChange:O=>x({...g,username:O.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"Jan Kowalski"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres email"}),r.jsxs("div",{className:"relative",children:[r.jsx(Rr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"email",value:g.email,onChange:O=>x({...g,email:O.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"jan@example.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numer telefonu"}),r.jsx(r0,{value:g.phone,countryCode:g.phoneCountryCode,onChange:(O,q)=>x({...g,phone:O,phoneCountryCode:q})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa firmy (opcjonalnie)"}),r.jsx("input",{type:"text",value:g.businessName,onChange:O=>x({...g,businessName:O.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"Salon Urody Anna"})]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsxs("button",{onClick:R,disabled:T,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[r.jsx(Qi,{className:"w-5 h-5"}),T?"Zapisywanie...":"Zapisz zmiany"]})})]}),F==="hours"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Godziny pracy"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Ustaw godziny, w ktrych przyjmujesz klientw. Te godziny bd widoczne przy rezerwacji."})]}),l?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-emerald-500"})}):i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-4",children:Object.keys(C).map(O=>r.jsx("div",{className:`p-4 rounded-xl border-2 transition-colors ${C[O].enabled?"border-emerald-200 bg-emerald-50/50":"border-gray-200 bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:C[O].enabled,onChange:q=>we(O,"enabled",q.target.checked),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]}),r.jsx("span",{className:`font-medium min-w-[100px] ${C[O].enabled?"text-gray-900":"text-gray-400"}`,children:W[O]})]}),C[O].enabled?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("select",{value:C[O].from,onChange:q=>we(O,"from",q.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-0 text-sm",children:te.map(q=>r.jsx("option",{value:q,children:q},`from-${q}`))}),r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("select",{value:C[O].to,onChange:q=>we(O,"to",q.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-0 text-sm",children:te.map(q=>r.jsx("option",{value:q,children:q},`to-${q}`))})]}):r.jsx("span",{className:"text-sm text-gray-400",children:"Zamknite"})]})},O))}),r.jsxs("div",{className:"pt-4 border-t",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Szybkie ustawienia:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>{b({monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"00:00",to:"00:00",enabled:!1},sunday:{from:"00:00",to:"00:00",enabled:!1}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Standardowe (Pn-Pt 9-17)"}),r.jsx("button",{onClick:()=>{b({monday:{from:"08:00",to:"20:00",enabled:!0},tuesday:{from:"08:00",to:"20:00",enabled:!0},wednesday:{from:"08:00",to:"20:00",enabled:!0},thursday:{from:"08:00",to:"20:00",enabled:!0},friday:{from:"08:00",to:"20:00",enabled:!0},saturday:{from:"09:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Rozszerzone (8-20 + Sob)"}),r.jsx("button",{onClick:()=>{b({monday:{from:"10:00",to:"18:00",enabled:!0},tuesday:{from:"10:00",to:"18:00",enabled:!0},wednesday:{from:"10:00",to:"18:00",enabled:!0},thursday:{from:"10:00",to:"18:00",enabled:!0},friday:{from:"10:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"16:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!0}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Cay tydzie"})]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsxs("button",{onClick:B,disabled:T,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[r.jsx(Qi,{className:"w-5 h-5"}),T?"Zapisywanie...":"Zapisz godziny pracy"]})})]}):r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[r.jsx(Tt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak profilu usugodawcy"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Najpierw utwrz profil usugodawcy, aby ustawi godziny pracy."}),r.jsx("a",{href:"/biznes/uslugi/dodaj",className:"text-emerald-600 font-medium hover:underline",children:"Utwrz profil "})]})]}),F==="password"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Zmiana hasa"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Upewnij si, e uywasz silnego hasa"})]}),r.jsxs("div",{className:"space-y-4 max-w-md",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aktualne haso"}),r.jsxs("div",{className:"relative",children:[r.jsx(si,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:S.current?"text":"password",value:w.currentPassword,onChange:O=>E({...w,currentPassword:O.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),r.jsx("button",{type:"button",onClick:()=>A({...S,current:!S.current}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:S.current?r.jsx(Ja,{className:"w-5 h-5"}):r.jsx(ss,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nowe haso"}),r.jsxs("div",{className:"relative",children:[r.jsx(si,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:S.new?"text":"password",value:w.newPassword,onChange:O=>E({...w,newPassword:O.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),r.jsx("button",{type:"button",onClick:()=>A({...S,new:!S.new}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:S.new?r.jsx(Ja,{className:"w-5 h-5"}):r.jsx(ss,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Min. 8 znakw, wielka litera, maa litera, cyfra"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Potwierd nowe haso"}),r.jsxs("div",{className:"relative",children:[r.jsx(si,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:S.confirm?"text":"password",value:w.confirmPassword,onChange:O=>E({...w,confirmPassword:O.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),r.jsx("button",{type:"button",onClick:()=>A({...S,confirm:!S.confirm}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:S.confirm?r.jsx(Ja,{className:"w-5 h-5"}):r.jsx(ss,{className:"w-5 h-5"})})]})]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsxs("button",{onClick:$,disabled:T,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[r.jsx(si,{className:"w-5 h-5"}),T?"Zmienianie...":"Zmie haso"]})})]}),F==="notifications"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Powiadomienia"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Zarzdzaj preferencjami powiadomie"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"opacity-50",children:[r.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(Rr,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia email",r.jsx("span",{className:"text-xs bg-gray-200 text-gray-500 px-2 py-0.5 rounded-full",children:"Wkrtce"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-not-allowed",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-400",children:"Nowe rezerwacje"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Otrzymuj email gdy kto zarezerwuje wizyt"})]}),r.jsx("input",{type:"checkbox",disabled:!0,className:"w-5 h-5 rounded text-gray-300 cursor-not-allowed"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-not-allowed",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-400",children:"Nowe wiadomoci"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Otrzymuj email gdy kto wyle wiadomo"})]}),r.jsx("input",{type:"checkbox",disabled:!0,className:"w-5 h-5 rounded text-gray-300 cursor-not-allowed"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-not-allowed",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-400",children:"Newsletter i promocje"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Informacje o nowociach i promocjach"})]}),r.jsx("input",{type:"checkbox",disabled:!0,className:"w-5 h-5 rounded text-gray-300 cursor-not-allowed"})]})]})]}),r.jsxs("div",{className:"opacity-50",children:[r.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(va,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia SMS",r.jsx("span",{className:"text-xs bg-gray-200 text-gray-500 px-2 py-0.5 rounded-full",children:"Wkrtce"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-not-allowed",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-400",children:"Nowe rezerwacje"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Otrzymuj SMS gdy kto zarezerwuje wizyt"})]}),r.jsx("input",{type:"checkbox",disabled:!0,className:"w-5 h-5 rounded text-gray-300 cursor-not-allowed"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-not-allowed",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-400",children:"Przypomnienia o wizytach"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Otrzymuj SMS przed nadchodzc wizyt"})]}),r.jsx("input",{type:"checkbox",disabled:!0,className:"w-5 h-5 rounded text-gray-300 cursor-not-allowed"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(Ls,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia push"]}),r.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Powiadomienia w przegldarce"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj powiadomienia w czasie rzeczywistym"})]}),r.jsx("input",{type:"checkbox",checked:k.pushNotifications,onChange:O=>j({...k,pushNotifications:O.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsxs("button",{onClick:I,disabled:T,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[r.jsx(Qi,{className:"w-5 h-5"}),T?"Zapisywanie...":"Zapisz ustawienia"]})})]}),F==="privacy"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Prywatno"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Kontroluj widoczno swoich danych"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Profil widoczny publicznie"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Pozwl klientom znale Twj profil w wyszukiwarce"})]}),r.jsx("input",{type:"checkbox",checked:U.profileVisible,onChange:O=>D({...U,profileVisible:O.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),r.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Poka numer telefonu"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Wywietlaj numer telefonu na profilu publicznym"})]}),r.jsx("input",{type:"checkbox",checked:U.showPhone,onChange:O=>D({...U,showPhone:O.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),r.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Poka adres email"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Wywietlaj adres email na profilu publicznym"})]}),r.jsx("input",{type:"checkbox",checked:U.showEmail,onChange:O=>D({...U,showEmail:O.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsxs("button",{onClick:he,disabled:T,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[r.jsx(Qi,{className:"w-5 h-5"}),T?"Zapisywanie...":"Zapisz ustawienia"]})})]}),F==="billing"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Patnoci i subskrypcja"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Zarzdzaj swoim planem i metodami patnoci"})]}),r.jsxs("div",{className:"p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Aktualny plan"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Darmowy"})]}),r.jsx("div",{className:"px-3 py-1 bg-emerald-500 text-white rounded-full text-sm font-medium",children:"Aktywny"})]}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-emerald-500"}),"Do 10 rezerwacji miesicznie"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-emerald-500"}),"Podstawowy profil"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4 text-emerald-500"}),"Wiadomoci z klientami"]})]}),r.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Przejd na Premium"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Metody patnoci"}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[r.jsx(fo,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"Brak dodanych metod patnoci"}),r.jsx("button",{className:"mt-3 text-emerald-600 font-medium hover:underline",children:"+ Dodaj kart"})]})]})]}),F==="danger"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-red-600 mb-1",children:"Strefa zagroenia"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Nieodwracalne akcje dotyczce Twojego konta"})]}),r.jsx("div",{className:"p-6 border-2 border-red-200 rounded-xl bg-red-50",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:r.jsx(nr,{className:"w-6 h-6 text-red-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-red-900",children:"Usu konto"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Po usuniciu konta wszystkie Twoje dane, rezerwacje i historia zostan trwale usunite. Ta operacja jest nieodwracalna."}),r.jsx("button",{onClick:de,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Usu moje konto"})]})]})}),r.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Iu,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-yellow-800",children:"Przed usuniciem konta"}),r.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[r.jsx("li",{children:" Upewnij si, e nie masz aktywnych rezerwacji"}),r.jsx("li",{children:" Poinformuj swoich klientw o zamkniciu dziaalnoci"}),r.jsx("li",{children:" Pobierz kopi swoich danych jeli potrzebujesz"})]})]})]})})]})]})]})]})},WD=()=>{const{user:t}=Et(),{showToast:e}=ln(),[n,s]=N.useState(null),[i,o]=N.useState(!0),[l,d]=N.useState(!1),[m,f]=N.useState({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),g={monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"},x=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],w=[];for(let C=0;C<24;C++)for(let b=0;b<60;b+=30){const k=`${String(C).padStart(2,"0")}:${String(b).padStart(2,"0")}`;w.push(k)}N.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){o(!1);return}try{const b=await tn.getByOwner(t.id);if(b.length>0){const k=b[0];s(k),f(k.workingHours)}}catch(b){console.error("Error loading provider:",b),e("Bd adowania danych","error")}finally{o(!1)}})()},[t==null?void 0:t.id]);const E=(C,b,k)=>{f(j=>({...j,[C]:{...j[C],[b]:k}}))},S=async()=>{if(!n){e("Najpierw utwrz profil usugodawcy","error");return}for(const[C,b]of Object.entries(m))if(b.enabled){const k=parseInt(b.from.split(":")[0]),j=parseInt(b.to.split(":")[0]);if(k>=j){e(`${g[C]}: Godzina otwarcia musi by wczeniejsza ni zamknicia`,"error");return}}d(!0);try{await tn.update(n.id,{workingHours:m}),s({...n,workingHours:m}),e("Godziny pracy zostay zapisane!","success")}catch(C){console.error("Error saving working hours:",C),e("Bd zapisu godzin pracy","error")}finally{d(!1)}},A=C=>{f({standard:{monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"00:00",to:"00:00",enabled:!1},sunday:{from:"00:00",to:"00:00",enabled:!1}},extended:{monday:{from:"08:00",to:"20:00",enabled:!0},tuesday:{from:"08:00",to:"20:00",enabled:!0},wednesday:{from:"08:00",to:"20:00",enabled:!0},thursday:{from:"08:00",to:"20:00",enabled:!0},friday:{from:"08:00",to:"20:00",enabled:!0},saturday:{from:"09:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}},fullWeek:{monday:{from:"10:00",to:"18:00",enabled:!0},tuesday:{from:"10:00",to:"18:00",enabled:!0},wednesday:{from:"10:00",to:"18:00",enabled:!0},thursday:{from:"10:00",to:"18:00",enabled:!0},friday:{from:"10:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"16:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!0}}}[C]),e("Szablon zastosowany","info")};return i?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(Tt,{className:"w-7 h-7 text-primary"}),"Godziny pracy"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Ustaw godziny, w ktrych przyjmujesz klientw. Bd widoczne przy rezerwacji."})]})}),n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Szybkie szablony"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>A("standard"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Standardowe (Pn-Pt 9-17)"}),r.jsx("button",{onClick:()=>A("extended"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Rozszerzone (8-20 + Sob)"}),r.jsx("button",{onClick:()=>A("fullWeek"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Cay tydzie"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-6",children:"Dostosuj godziny dla kadego dnia"}),r.jsx("div",{className:"space-y-4",children:x.map(C=>r.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${m[C].enabled?"border-emerald-200 bg-emerald-50/50":"border-gray-200 bg-gray-50"}`,children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m[C].enabled,onChange:b=>E(C,"enabled",b.target.checked),className:"sr-only peer"}),r.jsx("div",{className:"w-12 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]}),r.jsx("span",{className:`font-semibold text-lg min-w-[120px] ${m[C].enabled?"text-gray-900":"text-gray-400"}`,children:g[C]})]}),m[C].enabled?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"od"}),r.jsx("select",{value:m[C].from,onChange:b=>E(C,"from",b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0 font-medium",children:w.map(b=>r.jsx("option",{value:b,children:b},`from-${b}`))})]}),r.jsx("span",{className:"text-gray-400 text-xl",children:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"do"}),r.jsx("select",{value:m[C].to,onChange:b=>E(C,"to",b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0 font-medium",children:w.map(b=>r.jsx("option",{value:b,children:b},`to-${b}`))})]})]}):r.jsx("span",{className:"text-gray-400 font-medium px-4 py-2 bg-gray-100 rounded-xl",children:" Zamknite"})]})},C))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:S,disabled:l,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:l?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Qi,{className:"w-5 h-5"}),"Zapisz godziny pracy"]})})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:r.jsxs("p",{className:"text-blue-700 text-sm",children:[" ",r.jsx("strong",{children:"Wskazwka:"}),' Klienci bd mogli rezerwowa wizyty tylko w godzinach, ktre tutaj ustawisz. Dni oznaczone jako "Zamknite" nie bd dostpne do rezerwacji.']})})]}):r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Xk,{className:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-yellow-800",children:"Brak profilu usugodawcy"}),r.jsx("p",{className:"text-yellow-700 mt-1",children:"Aby ustawi godziny pracy, najpierw utwrz swj profil usugodawcy."}),r.jsx("a",{href:"/biznes/dodaj-usluge",className:"inline-block mt-4 px-6 py-2 bg-yellow-600 text-white rounded-xl font-medium hover:bg-yellow-700 transition-colors",children:"Utwrz profil"})]})]})})]})},HD=()=>{const{user:t}=Et(),{showToast:e}=ln(),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,d]=N.useState(null),[m,f]=N.useState(""),[g,x]=N.useState("all"),[w,E]=N.useState({average:0,count:0,distribution:[{stars:5,count:0},{stars:4,count:0},{stars:3,count:0},{stars:2,count:0},{stars:1,count:0}]}),[S,A]=N.useState(!1),[C,b]=N.useState(null),[k,j]=N.useState(""),[U,D]=N.useState(!1),[F,P]=N.useState(!1),[T,M]=N.useState(null),[R,B]=N.useState(""),[$,I]=N.useState(!1);N.useEffect(()=>{he()},[t]);const he=async()=>{if(!(t!=null&&t.id)){o(!1);return}o(!0);try{const q=await tn.getByOwner(t.id.toString());if(q.length>0){const ne=q[0];d(ne.id),f(ne.name);const Ee=await Is.getByProvider(ne.id);s(Ee);const se=await Is.getProviderStats(ne.id);E(se)}}catch(q){console.error("Error loading reviews:",q),e("Bd adowania opinii","error")}finally{o(!1)}},de=n.filter(q=>g==="positive"?q.rating>=4:g==="negative"?q.rating<=2:!0),we=q=>{b(q),j(""),A(!0)},te=async()=>{if(!(!C||!t||!l)){if(k.trim().length<10){e("Opisz powd zgoszenia (min. 10 znakw)","error");return}D(!0);try{await Is.reportReview({reviewId:C.id,reporterId:t.id,reporterName:t.username||"Usugodawca",reason:k.trim(),reviewContent:C.comment,reviewAuthor:C.clientName,providerId:l,providerName:m}),A(!1),e("Zgoszenie wysane do administratora ","success")}catch(q){console.error("Error reporting review:",q),e("Bd podczas wysyania zgoszenia","error")}finally{D(!1)}}},W=q=>{M(q),B(q.providerResponse||""),P(!0)},Q=async()=>{if(!(!T||!R.trim())){I(!0);try{await Is.addProviderResponse(T.id,R.trim()),s(q=>q.map(ne=>ne.id===T.id?{...ne,providerResponse:R.trim()}:ne)),P(!1),e("Odpowied dodana!","success")}catch(q){console.error("Error adding response:",q),e("Bd podczas dodawania odpowiedzi","error")}finally{I(!1)}}},O=q=>new Date(q).toLocaleDateString("pl-PL",{day:"numeric",month:"long",year:"numeric"});return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-emerald-500"})}):l?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Opinie klientw"}),r.jsx("p",{className:"text-gray-600",children:"Zobacz co mwi o Tobie klienci"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-xl flex items-center justify-center",children:r.jsx(yt,{className:"w-8 h-8 text-amber-500 fill-amber-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w.average.toFixed(1)}),r.jsx("p",{className:"text-gray-500",children:"rednia ocena"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-xl flex items-center justify-center",children:r.jsx(Bn,{className:"w-8 h-8 text-emerald-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w.count}),r.jsx("p",{className:"text-gray-500",children:"Wszystkich opinii"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(pf,{className:"w-8 h-8 text-green-500"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[w.count>0?Math.round(n.filter(q=>q.rating>=4).length/w.count*100):0,"%"]}),r.jsx("p",{className:"text-gray-500",children:"Pozytywnych"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Rozkad ocen"}),r.jsx("div",{className:"space-y-3",children:w.distribution.map(q=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1 w-20",children:[r.jsx("span",{className:"text-sm font-medium",children:q.stars}),r.jsx(yt,{className:"w-4 h-4 text-amber-400 fill-amber-400"})]}),r.jsx("div",{className:"flex-1 h-3 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-amber-400 rounded-full transition-all",style:{width:w.count>0?`${q.count/w.count*100}%`:"0%"}})}),r.jsx("span",{className:"text-sm text-gray-500 w-10 text-right",children:q.count})]},q.stars))})]}),r.jsx("div",{className:"flex gap-2",children:["all","positive","negative"].map(q=>r.jsxs("button",{onClick:()=>x(q),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${g===q?"bg-emerald-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[q==="all"&&`Wszystkie (${n.length})`,q==="positive"&&`Pozytywne (${n.filter(ne=>ne.rating>=4).length})`,q==="negative"&&`Negatywne (${n.filter(ne=>ne.rating<=2).length})`]},q))}),de.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[r.jsx(yt,{className:"w-16 h-16 text-gray-200 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Brak opinii"}),r.jsx("p",{className:"text-gray-500",children:g==="all"?"Jeszcze nikt nie wystawi opinii. Zachcaj klientw do dzielenia si swoimi wraeniami!":"Brak opinii w tej kategorii"})]}):r.jsx("div",{className:"space-y-4",children:de.map(q=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:q.clientName.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:q.clientName}),r.jsx("p",{className:"text-sm text-gray-500",children:q.serviceName})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"flex items-center gap-0.5 justify-end",children:[1,2,3,4,5].map(ne=>r.jsx(yt,{className:`w-5 h-5 ${ne<=q.rating?"text-amber-400 fill-amber-400":"text-gray-200"}`},ne))}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:O(q.createdAt)})]})]}),r.jsx("p",{className:"text-gray-700 mb-4",children:q.comment}),q.providerResponse&&r.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-emerald-700 mb-1",children:"Twoja odpowied:"}),r.jsx("p",{className:"text-gray-700",children:q.providerResponse})]}),r.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100",children:[r.jsxs("button",{onClick:()=>W(q),className:"flex items-center gap-2 px-3 py-2 text-sm text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",children:[r.jsx(Bn,{className:"w-4 h-4"}),q.providerResponse?"Edytuj odpowied":"Odpowiedz"]}),r.jsxs("button",{onClick:()=>we(q),className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[r.jsx(Cr,{className:"w-4 h-4"}),"Zgo"]})]})]},q.id))}),S&&C&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(Cr,{className:"w-5 h-5 text-red-500"}),"Zgo opini"]}),r.jsx("button",{onClick:()=>A(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-medium text-sm",children:C.clientName}),r.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(q=>r.jsx(yt,{className:`w-3 h-3 ${q<=C.rating?"text-amber-400 fill-amber-400":"text-gray-200"}`},q))})]}),r.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',C.comment,'"']})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dlaczego zgaszasz t opini?"}),r.jsx("div",{className:"space-y-2 mb-4",children:["Faszywa opinia (osoba nie korzystaa z usugi)","Obraliwa lub wulgarna tre","Spam lub reklama","Narusza prywatno","Inny powd"].map(q=>r.jsx("button",{onClick:()=>j(q),className:`w-full text-left px-4 py-2 rounded-lg border-2 transition-colors ${k===q?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:r.jsx("span",{className:"text-sm",children:q})},q))}),r.jsx("textarea",{value:k,onChange:q=>j(q.target.value),placeholder:"Opisz szczegy zgoszenia...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none",rows:3})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50",children:"Anuluj"}),r.jsxs("button",{onClick:te,disabled:U||k.length<10,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 disabled:opacity-50 flex items-center justify-center gap-2",children:[U?r.jsx(Ve,{className:"w-5 h-5 animate-spin"}):r.jsx(Cr,{className:"w-5 h-5"}),"Wylij zgoszenie"]})]})]})}),F&&T&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(Bn,{className:"w-5 h-5 text-emerald-500"}),"Odpowiedz na opini"]}),r.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-medium text-sm",children:T.clientName}),r.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(q=>r.jsx(yt,{className:`w-3 h-3 ${q<=T.rating?"text-amber-400 fill-amber-400":"text-gray-200"}`},q))})]}),r.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',T.comment,'"']})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Twoja odpowied"}),r.jsx("textarea",{value:R,onChange:q=>B(q.target.value),placeholder:"Napisz odpowied dla klienta...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0 resize-none",rows:4}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Odpowiedz profesjonalnie i uprzejmie - klienci to doceni!"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50",children:"Anuluj"}),r.jsxs("button",{onClick:Q,disabled:$||!R.trim(),className:"flex-1 px-4 py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600 disabled:opacity-50 flex items-center justify-center gap-2",children:[$?r.jsx(Ve,{className:"w-5 h-5 animate-spin"}):r.jsx(Lu,{className:"w-5 h-5"}),"Wylij odpowied"]})]})]})})]}):r.jsxs("div",{className:"text-center py-16",children:[r.jsx(yt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Brak profilu usugodawcy"}),r.jsx("p",{className:"text-gray-500",children:"Najpierw utwrz profil usugodawcy, aby widzie opinie."})]})},qD=({onMenuClick:t,isSuperAdmin:e=!1})=>{var s;const{user:n}=Et();return r.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-30",children:r.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 h-16",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:t,className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(s2,{className:"w-6 h-6 text-gray-600"})}),r.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 rounded-xl px-4 py-2 w-64 lg:w-96",children:[r.jsx(Ti,{className:"w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Szukaj uytkownikw, rezerwacji...",className:"bg-transparent focus:outline-none text-sm flex-1"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${e?"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[e?r.jsx(qa,{className:"w-4 h-4"}):r.jsx(Mn,{className:"w-4 h-4"}),e?"Super Admin":"Administrator"]}),r.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-xl",children:[r.jsx(Ls,{className:"w-5 h-5 text-gray-600"}),r.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),r.jsxs("div",{className:"flex items-center gap-3 pl-3 border-l border-gray-200",children:[r.jsxs("div",{className:"hidden sm:block text-right",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:n==null?void 0:n.username}),r.jsx("p",{className:"text-xs text-gray-500",children:n==null?void 0:n.email})]}),r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${e?"bg-gradient-to-br from-amber-500 to-orange-600":"bg-red-600"}`,children:((s=n==null?void 0:n.username)==null?void 0:s.charAt(0).toUpperCase())||"A"})]})]})]})})},ZD=({isOpen:t,onClose:e,isSuperAdmin:n=!1})=>{const{logout:s}=Et(),i=[{icon:Hg,label:"Dashboard",to:"/admin"},{icon:Bl,label:"Uytkownicy",to:"/admin/uzytkownicy"},{icon:wa,label:"Usugodawcy",to:"/admin/uslugodawcy"},{icon:Yt,label:"Rezerwacje",to:"/admin/rezerwacje"},{icon:Cr,label:"Zgoszenia",to:"/admin/zgloszenia"},{icon:ff,label:"Ustawienia",to:"/admin/ustawienia"}],o=async()=>{await s(),window.location.href="/#/"};return r.jsxs(r.Fragment,{children:[t&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:e}),r.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-gray-900 text-white transform transition-transform duration-300 lg:transform-none ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"p-4 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n?"bg-gradient-to-br from-amber-500 to-orange-600":"bg-red-600"}`,children:n?r.jsx(qa,{className:"w-6 h-6"}):r.jsx(Mn,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-lg",children:n?"Super Admin":"Admin Panel"}),r.jsx("p",{className:"text-xs text-gray-400",children:"ToMyHomeApp"})]})]}),r.jsx("button",{onClick:e,className:"lg:hidden p-2 hover:bg-white/10 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5"})})]})}),r.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:i.map(l=>r.jsxs(Ww,{to:l.to,end:l.to==="/admin",onClick:e,className:({isActive:d})=>`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${d?n?"bg-gradient-to-r from-amber-500 to-orange-600 text-white":"bg-red-600 text-white":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(l.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:l.label})]},l.to))}),r.jsxs("div",{className:"p-4 border-t border-white/10",children:[r.jsxs(Ww,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-gray-300 hover:bg-white/10 hover:text-white rounded-xl transition-all mb-2",children:[r.jsx(Hg,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Wr do strony"})]}),r.jsxs("button",{onClick:o,className:"flex items-center gap-3 px-4 py-3 text-red-400 hover:bg-red-600/20 hover:text-red-300 rounded-xl transition-all w-full",children:[r.jsx(Ru,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Wyloguj si"})]})]})]})})]})},g2=N.createContext({isSuperAdmin:!1,role:null}),y2=()=>N.useContext(g2),KD=()=>{const{isAuthenticated:t,isAdmin:e,isSuperAdmin:n,loading:s}=Et(),[i,o]=N.useState(!1),{pathname:l}=Os();return N.useEffect(()=>{window.scrollTo(0,0)},[l]),s?r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ve,{className:"w-12 h-12 text-red-500 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Weryfikacja uprawnie..."})]})}):t?e?r.jsx(g2.Provider,{value:{isSuperAdmin:n,role:n?"superadmin":"admin"},children:r.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[r.jsx(ZD,{isOpen:i,onClose:()=>o(!1),isSuperAdmin:n}),r.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[r.jsx(qD,{onMenuClick:()=>o(!0),isSuperAdmin:n}),r.jsx("main",{className:"flex-1 p-4 lg:p-6",children:r.jsx(rN,{})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Mn,{className:"w-10 h-10 text-red-500"})}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Brak dostpu"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Nie masz uprawnie do panelu administracyjnego. Ta strona jest dostpna tylko dla administratorw platformy."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("a",{href:"#/",className:"block w-full py-3 bg-red-600 text-white font-semibold rounded-xl hover:bg-red-700 transition-colors",children:"Wr do strony gwnej"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Jeli uwaasz, e to bd, skontaktuj si z administratorem."})]})]})}):r.jsx(dg,{to:"/auth?redirect=/admin",replace:!0})},Ei="users",Sa="providers",yf="bookings",i0=async t=>{try{const e=await Rs(Ie(ae,Ei,t));return e.exists()&&e.data().role||"user"}catch(e){return console.error("Error getting user role:",e),"user"}},GD=async t=>{const e=await i0(t);return e==="admin"||e==="superadmin"},QD=async t=>await i0(t)==="superadmin",YD=async()=>{try{const e=(await Ke(Fe(ae,Ei))).docs.map(A=>({id:A.id,...A.data()})),s=(await Ke(Fe(ae,Sa))).docs.map(A=>({id:A.id,...A.data()})),o=(await Ke(Fe(ae,yf))).docs.map(A=>({id:A.id,...A.data()})),l=new Date,d=new Date(l.getFullYear(),l.getMonth(),l.getDate()).toISOString(),m=new Date(l.getTime()-7*24*60*60*1e3).toISOString(),f=new Date(l.getTime()-30*24*60*60*1e3).toISOString(),g=o.filter(A=>A.createdAt>=d).length,x=o.filter(A=>A.createdAt>=m).length,w=o.filter(A=>A.createdAt>=f).length,S=o.filter(A=>A.status==="completed").reduce((A,C)=>A+(C.totalPrice||0),0);return{totalUsers:e.length,totalProviders:s.length,totalBookings:o.length,pendingVerifications:s.filter(A=>!A.isVerified&&!A.rejectedAt).length,activeProviders:s.filter(A=>A.isVerified&&A.isActive!==!1).length,blockedUsers:e.filter(A=>A.isBlocked).length,todayBookings:g,weekBookings:x,monthBookings:w,totalRevenue:S,totalAdmins:e.filter(A=>A.role==="admin").length,totalSuperAdmins:e.filter(A=>A.role==="superadmin").length}}catch(t){return console.error("Error getting platform stats:",t),{totalUsers:0,totalProviders:0,totalBookings:0,pendingVerifications:0,activeProviders:0,blockedUsers:0,todayBookings:0,weekBookings:0,monthBookings:0,totalRevenue:0,totalAdmins:0,totalSuperAdmins:0}}},JD=async()=>{try{return(await Ke(Fe(ae,Ei))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("Error getting users:",t),[]}},XD=async t=>{try{const e=await Rs(Ie(ae,Ei,t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){return console.error("Error getting user:",e),null}},e3=async(t,e)=>{try{return await zt(Ie(ae,Ei,t),{...e,updatedAt:new Date().toISOString()}),!0}catch(n){return console.error("Error updating user:",n),!1}},t3=(t,e,n)=>{const s=e||"user";return t==="superadmin"?!0:s==="superadmin"||t==="admin"&&s==="admin"&&(n==="changeRole"||n==="delete")?!1:t==="admin"&&n==="changeRole"?s==="user"||s==="admin":!0},n3=async(t,e)=>{try{return await zt(Ie(ae,Ei,t),{isBlocked:!0,blockedAt:new Date().toISOString(),blockedReason:e}),!0}catch(n){return console.error("Error blocking user:",n),!1}},s3=async t=>{try{return await zt(Ie(ae,Ei,t),{isBlocked:!1,blockedAt:null,blockedReason:null}),!0}catch(e){return console.error("Error unblocking user:",e),!1}},r3=async t=>{try{return await Yl(Ie(ae,Ei,t)),!0}catch(e){return console.error("Error deleting user:",e),!1}},i3=async(t,e)=>{try{return await zt(Ie(ae,Ei,t),{role:e}),!0}catch(n){return console.error("Error setting user role:",n),!1}},a3=async()=>{try{return(await Ke(Fe(ae,Sa))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("Error getting providers:",t),[]}},o3=async()=>{try{const t=dt(Fe(ae,Sa),xt("isVerified","==",!1));return(await Ke(t)).docs.map(n=>({id:n.id,...n.data()})).filter(n=>!n.rejectedAt)}catch(t){return console.error("Error getting pending providers:",t),[]}},l3=async(t,e)=>{try{return await zt(Ie(ae,Sa,t),{isVerified:!0,isActive:!0,verifiedAt:new Date().toISOString(),verifiedBy:e}),!0}catch(n){return console.error("Error verifying provider:",n),!1}},c3=async(t,e)=>{try{return await zt(Ie(ae,Sa,t),{isVerified:!1,rejectedAt:new Date().toISOString(),rejectedReason:e}),!0}catch(n){return console.error("Error rejecting provider:",n),!1}},u3=async(t,e)=>{try{return await zt(Ie(ae,Sa,t),{isActive:!1,suspendedAt:new Date().toISOString(),suspendedReason:e}),!0}catch(n){return console.error("Error suspending provider:",n),!1}},d3=async t=>{try{return await zt(Ie(ae,Sa,t),{isActive:!0,suspendedAt:null,suspendedReason:null}),!0}catch(e){return console.error("Error activating provider:",e),!1}},h3=async t=>{try{return await Yl(Ie(ae,Sa,t)),!0}catch(e){return console.error("Error deleting provider:",e),!1}},m3=async()=>{try{return(await Ke(Fe(ae,yf))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("Error getting bookings:",t),[]}},f3=async(t=20)=>{try{const e=dt(Fe(ae,yf),$x("createdAt","desc"),Ck(t));return(await Ke(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error getting recent bookings:",e),[]}},p3=async(t,e,n)=>{try{const s={status:e,updatedAt:new Date().toISOString()};return e==="cancelled"&&n&&(s.cancelledAt=new Date().toISOString(),s.cancelledBy="admin",s.cancelReason=n),await zt(Ie(ae,yf,t),s),!0}catch(s){return console.error("Error updating booking status:",s),!1}},hn={getUserRole:i0,checkIsAdmin:GD,checkIsSuperAdmin:QD,canPerformActionOnUser:t3,getPlatformStats:YD,getAllUsers:JD,getUserById:XD,updateUser:e3,blockUser:n3,unblockUser:s3,deleteUser:r3,setUserRole:i3,getAllProviders:a3,getPendingProviders:o3,verifyProvider:l3,rejectProvider:c3,suspendProvider:u3,activateProvider:d3,deleteProvider:h3,getAllBookings:m3,getRecentBookings:f3,updateBookingStatus:p3},g3=()=>{const[t,e]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,d]=N.useState(!0);N.useEffect(()=>{m()},[]);const m=async()=>{d(!0);try{const[w,E,S]=await Promise.all([hn.getPlatformStats(),hn.getRecentBookings(5),hn.getPendingProviders()]);e(w),s(E),o(S)}catch(w){console.error("Error loading dashboard data:",w)}finally{d(!1)}},f=t?[{title:"Uytkownicy",value:t.totalUsers,icon:Bl,color:"bg-blue-500",bgColor:"bg-blue-50",change:"+12%",positive:!0},{title:"Usugodawcy",value:t.totalProviders,subtitle:`${t.activeProviders} aktywnych`,icon:wa,color:"bg-emerald-500",bgColor:"bg-emerald-50",change:"+8%",positive:!0},{title:"Rezerwacje",value:t.totalBookings,subtitle:`${t.todayBookings} dzisiaj`,icon:Yt,color:"bg-purple-500",bgColor:"bg-purple-50",change:"+23%",positive:!0},{title:"Przychody",value:`${t.totalRevenue.toLocaleString()} z`,subtitle:"z prowizji",icon:Vl,color:"bg-amber-500",bgColor:"bg-amber-50",change:"+15%",positive:!0}]:[],g=w=>{switch(w){case"confirmed":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"completed":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},x=w=>{switch(w){case"confirmed":return"Potwierdzona";case"pending":return"Oczekujca";case"completed":return"Zakoczona";case"cancelled":return"Anulowana";default:return w}};return l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 text-red-500 animate-spin"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),r.jsx("p",{className:"text-gray-500",children:"Przegld statystyk platformy"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((w,E)=>r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:`p-3 rounded-xl ${w.bgColor}`,children:r.jsx(w.icon,{className:`w-6 h-6 ${w.color.replace("bg-","text-")}`})}),r.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${w.positive?"text-green-600":"text-red-600"}`,children:[w.positive?r.jsx(t2,{className:"w-4 h-4"}):r.jsx(e2,{className:"w-4 h-4"}),w.change]})]}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:w.value}),r.jsx("p",{className:"text-gray-500 text-sm",children:w.title}),w.subtitle&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:w.subtitle})]},E))}),t&&t.pendingVerifications>0&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:r.jsx(Xk,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h4",{className:"font-semibold text-amber-800",children:[t.pendingVerifications," usugodawcw oczekuje na weryfikacj"]}),r.jsx("p",{className:"text-sm text-amber-600",children:"Sprawd nowe zgoszenia i zweryfikuj profile"})]}),r.jsx(Ne,{to:"/admin/uslugodawcy",className:"px-4 py-2 bg-amber-600 text-white font-medium rounded-lg hover:bg-amber-700 transition-colors",children:"Weryfikuj"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Tt,{className:"w-5 h-5 text-gray-400"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Rezerwacje w czasie"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-500",children:"Dzisiaj"}),r.jsx("span",{className:"font-bold text-gray-900",children:(t==null?void 0:t.todayBookings)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-500",children:"Ten tydzie"}),r.jsx("span",{className:"font-bold text-gray-900",children:(t==null?void 0:t.weekBookings)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-500",children:"Ten miesic"}),r.jsx("span",{className:"font-bold text-gray-900",children:(t==null?void 0:t.monthBookings)||0})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(pf,{className:"w-5 h-5 text-gray-400"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Status platformy"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-500",children:"Aktywni usugodawcy"}),r.jsx("span",{className:"font-bold text-green-600",children:(t==null?void 0:t.activeProviders)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-500",children:"Oczekujce weryfikacje"}),r.jsx("span",{className:"font-bold text-amber-600",children:(t==null?void 0:t.pendingVerifications)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-500",children:"Zablokowani uytkownicy"}),r.jsx("span",{className:"font-bold text-red-600",children:(t==null?void 0:t.blockedUsers)||0})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Pr,{className:"w-5 h-5 text-gray-400"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Szybkie akcje"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ne,{to:"/admin/uzytkownicy",className:"block w-full py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",children:"Zarzdzaj uytkownikami"}),r.jsx(Ne,{to:"/admin/uslugodawcy",className:"block w-full py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",children:"Weryfikuj usugodawcw"}),r.jsx(Ne,{to:"/admin/rezerwacje",className:"block w-full py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",children:"Przegld rezerwacji"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Ostatnie rezerwacje"}),r.jsx(Ne,{to:"/admin/rezerwacje",className:"text-sm text-red-600 hover:underline",children:"Zobacz wszystkie"})]})}),r.jsx("div",{className:"divide-y divide-gray-100",children:n.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Brak rezerwacji"}):n.map(w=>r.jsxs("div",{className:"p-4 hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:w.clientName}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g(w.status)}`,children:x(w.status)})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[w.providerName,"  ",w.date," ",w.time]}),r.jsxs("div",{className:"text-sm font-medium text-gray-900 mt-1",children:[w.totalPrice," z"]})]},w.id))})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Oczekujce weryfikacje"}),r.jsx(Ne,{to:"/admin/uslugodawcy",className:"text-sm text-red-600 hover:underline",children:"Zobacz wszystkie"})]})}),r.jsx("div",{className:"divide-y divide-gray-100",children:i.length===0?r.jsxs("div",{className:"p-6 text-center text-gray-500",children:[r.jsx(Pr,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),"Wszystko zweryfikowane!"]}):i.slice(0,5).map(w=>r.jsx("div",{className:"p-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:w.image||"https://via.placeholder.com/40",alt:w.name,className:"w-10 h-10 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:w.name}),r.jsx("p",{className:"text-sm text-gray-500",children:w.profession})]}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Oczekuje"})]})},w.id))})]})]})]})},y3=()=>{const{showToast:t}=ln(),{user:e}=Et(),{role:n,isSuperAdmin:s}=y2(),[i,o]=N.useState([]),[l,d]=N.useState([]),[m,f]=N.useState(!0),[g,x]=N.useState(""),[w,E]=N.useState("all"),[S,A]=N.useState(null),[C,b]=N.useState(!1),[k,j]=N.useState(!1),[U,D]=N.useState(""),[F,P]=N.useState("user"),[T,M]=N.useState(!1);N.useEffect(()=>{R()},[]),N.useEffect(()=>{B()},[i,g,w]);const R=async()=>{f(!0);try{const O=await hn.getAllUsers();o(O)}catch(O){console.error("Error loading users:",O),t("Bd adowania uytkownikw","error")}finally{f(!1)}},B=()=>{let O=[...i];if(g){const q=g.toLowerCase();O=O.filter(ne=>{var Ee,se,le;return((Ee=ne.username)==null?void 0:Ee.toLowerCase().includes(q))||((se=ne.email)==null?void 0:se.toLowerCase().includes(q))||((le=ne.phone)==null?void 0:le.includes(q))})}switch(w){case"client":O=O.filter(q=>q.accountType==="client");break;case"provider":O=O.filter(q=>q.accountType==="provider");break;case"admin":O=O.filter(q=>q.role==="admin");break;case"superadmin":O=O.filter(q=>q.role==="superadmin");break;case"blocked":O=O.filter(q=>q.isBlocked);break}d(O)},$=(O,q)=>O.id===(e==null?void 0:e.id)||!n?!1:hn.canPerformActionOnUser(n,O.role,q),I=async()=>{if(!S||!U.trim()){t("Podaj powd blokady","error");return}if(!$(S,"block")){t("Nie masz uprawnie do tej akcji","error");return}M(!0);try{await hn.blockUser(S.id,U)?(t("Uytkownik zablokowany","success"),b(!1),D(""),R()):t("Bd blokowania uytkownika","error")}catch{t("Bd blokowania uytkownika","error")}finally{M(!1)}},he=async O=>{if(!$(O,"block")){t("Nie masz uprawnie do tej akcji","error");return}M(!0);try{await hn.unblockUser(O.id)?(t("Uytkownik odblokowany","success"),R()):t("Bd odblokowywania uytkownika","error")}catch{t("Bd odblokowywania uytkownika","error")}finally{M(!1)}},de=async O=>{if(!$(O,"delete")){t("Nie masz uprawnie do usunicia tego uytkownika","error");return}if(window.confirm(`Czy na pewno chcesz usun uytkownika ${O.username}? Ta operacja jest nieodwracalna.`)){M(!0);try{await hn.deleteUser(O.id)?(t("Uytkownik usunity","success"),R()):t("Bd usuwania uytkownika","error")}catch{t("Bd usuwania uytkownika","error")}finally{M(!1)}}},we=O=>{if(!$(O,"changeRole")){t("Nie masz uprawnie do zmiany roli tego uytkownika","error");return}A(O),P(O.role||"user"),j(!0)},te=async()=>{if(S){if(!s&&F==="superadmin"){t("Tylko Super Admin moe nadawa rol Super Admin","error");return}M(!0);try{await hn.setUserRole(S.id,F)?(t("Rola zmieniona pomylnie","success"),j(!1),R()):t("Bd zmiany roli","error")}catch{t("Bd zmiany roli","error")}finally{M(!1)}}},W=O=>{switch(O){case"superadmin":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700",children:[r.jsx(qa,{className:"w-3 h-3"}),"Super Admin"]});case"admin":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:[r.jsx(Mn,{className:"w-3 h-3"}),"Admin"]});default:return null}},Q=[{value:"all",label:"Wszyscy",count:i.length},{value:"client",label:"Klienci",count:i.filter(O=>O.accountType==="client").length},{value:"provider",label:"Usugodawcy",count:i.filter(O=>O.accountType==="provider").length},{value:"admin",label:"Administratorzy",count:i.filter(O=>O.role==="admin").length},{value:"superadmin",label:"Super Admini",count:i.filter(O=>O.role==="superadmin").length},{value:"blocked",label:"Zablokowani",count:i.filter(O=>O.isBlocked).length}];return m?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 text-red-500 animate-spin"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Uytkownicy"}),r.jsx("p",{className:"text-gray-500",children:"Zarzdzaj uytkownikami platformy"})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ti,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Szukaj po nazwie, emailu lub telefonie...",value:g,onChange:O=>x(O.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Q.map(O=>r.jsxs("button",{onClick:()=>E(O.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${w===O.value?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[O.label," (",O.count,")"]},O.value))})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Uytkownik"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Kontakt"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Typ / Rola"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Data rejestracji"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-600",children:"Akcje"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:l.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"Nie znaleziono uytkownikw"})}):l.map(O=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center overflow-hidden ${O.role==="superadmin"?"bg-gradient-to-br from-amber-500 to-orange-600 text-white":O.role==="admin"?"bg-red-600 text-white":"bg-gray-200"}`,children:O.avatar?r.jsx("img",{src:O.avatar,alt:"",className:"w-full h-full object-cover"}):O.role==="superadmin"?r.jsx(qa,{className:"w-5 h-5"}):O.role==="admin"?r.jsx(Mn,{className:"w-5 h-5"}):r.jsx(rs,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:O.username}),O.businessName&&r.jsx("p",{className:"text-xs text-gray-500",children:O.businessName})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[r.jsx(Rr,{className:"w-3 h-3"}),O.email]}),O.phone&&r.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[r.jsx(va,{className:"w-3 h-3"}),O.phoneCountryCode||""," ",O.phone]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O.accountType==="provider"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:O.accountType==="provider"?"Usugodawca":"Klient"}),W(O.role)]})}),r.jsx("td",{className:"px-6 py-4",children:O.isBlocked?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:[r.jsx(Ul,{className:"w-3 h-3"}),"Zablokowany"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:[r.jsx(Pr,{className:"w-3 h-3"}),"Aktywny"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-500",children:O.createdAt?new Date(O.createdAt).toLocaleDateString("pl-PL"):"-"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[$(O,"block")&&(O.isBlocked?r.jsx("button",{onClick:()=>he(O),disabled:T,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Odblokuj",children:r.jsx(r2,{className:"w-5 h-5"})}):r.jsx("button",{onClick:()=>{A(O),b(!0)},disabled:T,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Zablokuj",children:r.jsx(hL,{className:"w-5 h-5"})})),$(O,"changeRole")&&r.jsx("button",{onClick:()=>we(O),disabled:T,className:`p-2 rounded-lg transition-colors ${O.role==="superadmin"?"text-amber-600 hover:bg-amber-50":O.role==="admin"?"text-red-600 hover:bg-red-50":"text-gray-600 hover:bg-gray-100"}`,title:"Zmie rol",children:O.role==="superadmin"?r.jsx(qa,{className:"w-5 h-5"}):r.jsx(Mn,{className:"w-5 h-5"})}),$(O,"delete")&&r.jsx("button",{onClick:()=>de(O),disabled:T,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:r.jsx(nr,{className:"w-5 h-5"})}),!$(O,"block")&&!$(O,"changeRole")&&!$(O,"delete")&&r.jsx("span",{className:"text-gray-400 px-2",children:""})]})})]},O.id))})]})})}),C&&S&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Zablokuj uytkownika"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:["Zamierzasz zablokowa uytkownika ",r.jsx("strong",{children:S.username}),". Podaj powd blokady:"]}),r.jsx("textarea",{value:U,onChange:O=>D(O.target.value),placeholder:"Powd blokady...",rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none mb-4"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{b(!1),D("")},className:"flex-1 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Anuluj"}),r.jsx("button",{onClick:I,disabled:T||!U.trim(),className:"flex-1 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:T?"Blokowanie...":"Zablokuj"})]})]})}),k&&S&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Zmie rol uytkownika"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:["Zmie rol uytkownika ",r.jsx("strong",{children:S.username}),":"]}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-xl cursor-pointer transition-colors ${F==="user"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"role",value:"user",checked:F==="user",onChange:()=>P("user"),className:"sr-only"}),r.jsx(rs,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Uytkownik"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Standardowe uprawnienia"})]})]}),r.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-xl cursor-pointer transition-colors ${F==="admin"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"role",value:"admin",checked:F==="admin",onChange:()=>P("admin"),className:"sr-only"}),r.jsx(Mn,{className:"w-5 h-5 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Administrator"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Zarzdzanie platform"})]})]}),s&&r.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-xl cursor-pointer transition-colors ${F==="superadmin"?"border-amber-500 bg-amber-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"role",value:"superadmin",checked:F==="superadmin",onChange:()=>P("superadmin"),className:"sr-only"}),r.jsx(qa,{className:"w-5 h-5 text-amber-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Super Admin"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Pena kontrola nad platform"})]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>j(!1),className:"flex-1 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Anuluj"}),r.jsx("button",{onClick:te,disabled:T,className:"flex-1 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:T?"Zapisywanie...":"Zapisz"})]})]})})]})},x3=()=>{const{showToast:t}=ln(),{user:e}=Et(),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,d]=N.useState(!0),[m,f]=N.useState(""),[g,x]=N.useState("all"),[w,E]=N.useState(null),[S,A]=N.useState(!1),[C,b]=N.useState(""),[k,j]=N.useState(!1);N.useEffect(()=>{U()},[]),N.useEffect(()=>{D()},[n,m,g]);const U=async()=>{d(!0);try{const I=await hn.getAllProviders();s(I)}catch(I){console.error("Error loading providers:",I),t("Bd adowania usugodawcw","error")}finally{d(!1)}},D=()=>{let I=[...n];if(m){const he=m.toLowerCase();I=I.filter(de=>{var we,te,W;return((we=de.name)==null?void 0:we.toLowerCase().includes(he))||((te=de.profession)==null?void 0:te.toLowerCase().includes(he))||((W=de.locationString)==null?void 0:W.toLowerCase().includes(he))})}switch(g){case"pending":I=I.filter(he=>!he.isVerified&&!he.rejectedAt);break;case"verified":I=I.filter(he=>he.isVerified&&he.isActive!==!1);break;case"rejected":I=I.filter(he=>he.rejectedAt);break;case"suspended":I=I.filter(he=>he.isVerified&&he.isActive===!1);break}o(I)},F=async I=>{if(e!=null&&e.id){j(!0);try{await hn.verifyProvider(I.id,e.id)?(t("Usugodawca zweryfikowany pomylnie","success"),U()):t("Bd weryfikacji","error")}catch{t("Bd weryfikacji","error")}finally{j(!1)}}},P=async()=>{if(!w||!C.trim()){t("Podaj powd odrzucenia","error");return}j(!0);try{await hn.rejectProvider(w.id,C)?(t("Usugodawca odrzucony","success"),A(!1),b(""),U()):t("Bd odrzucania","error")}catch{t("Bd odrzucania","error")}finally{j(!1)}},T=async I=>{const he=window.prompt("Podaj powd zawieszenia:");if(he){j(!0);try{await hn.suspendProvider(I.id,he)?(t("Usugodawca zawieszony","success"),U()):t("Bd zawieszania","error")}catch{t("Bd zawieszania","error")}finally{j(!1)}}},M=async I=>{j(!0);try{await hn.activateProvider(I.id)?(t("Usugodawca aktywowany","success"),U()):t("Bd aktywacji","error")}catch{t("Bd aktywacji","error")}finally{j(!1)}},R=async I=>{if(window.confirm(`Czy na pewno chcesz usun profil ${I.name}? Ta operacja jest nieodwracalna.`)){j(!0);try{await hn.deleteProvider(I.id)?(t("Profil usunity","success"),U()):t("Bd usuwania","error")}catch{t("Bd usuwania","error")}finally{j(!1)}}},B=I=>I.rejectedAt?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:[r.jsx(Ul,{className:"w-3 h-3"}),"Odrzucony"]}):I.isVerified?I.isActive===!1?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700",children:[r.jsx(z_,{className:"w-3 h-3"}),"Zawieszony"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:[r.jsx(Pr,{className:"w-3 h-3"}),"Zweryfikowany"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:[r.jsx(Tt,{className:"w-3 h-3"}),"Oczekuje"]}),$=[{value:"all",label:"Wszyscy",count:n.length},{value:"pending",label:"Oczekujce",count:n.filter(I=>!I.isVerified&&!I.rejectedAt).length},{value:"verified",label:"Zweryfikowani",count:n.filter(I=>I.isVerified&&I.isActive!==!1).length},{value:"suspended",label:"Zawieszeni",count:n.filter(I=>I.isVerified&&I.isActive===!1).length},{value:"rejected",label:"Odrzuceni",count:n.filter(I=>I.rejectedAt).length}];return l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 text-red-500 animate-spin"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Usugodawcy"}),r.jsx("p",{className:"text-gray-500",children:"Weryfikuj i zarzdzaj profilami usugodawcw"})]}),$[1].count>0&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:r.jsx(Tt,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h4",{className:"font-semibold text-amber-800",children:[$[1].count," usugodawcw oczekuje na weryfikacj"]}),r.jsx("p",{className:"text-sm text-amber-600",children:"Sprawd profile i zatwierd lub odrzu"})]}),r.jsx("button",{onClick:()=>x("pending"),className:"px-4 py-2 bg-amber-600 text-white font-medium rounded-lg hover:bg-amber-700 transition-colors",children:"Poka oczekujce"})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ti,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Szukaj po nazwie, zawodzie lub lokalizacji...",value:m,onChange:I=>f(I.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(I=>r.jsxs("button",{onClick:()=>x(I.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${g===I.value?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[I.label," (",I.count,")"]},I.value))})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.length===0?r.jsx("div",{className:"col-span-full bg-white rounded-2xl p-12 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Nie znaleziono usugodawcw"})}):i.map(I=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"relative h-48",children:[r.jsx("img",{src:I.image||"https://via.placeholder.com/400x200?text=Brak+zdjcia",alt:I.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-3 right-3",children:B(I)})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900",children:I.name}),r.jsx("p",{className:"text-gray-600",children:I.profession}),r.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ir,{className:"w-4 h-4"}),I.locationString||"Brak lokalizacji"]}),I.rating>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(yt,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),I.rating.toFixed(1)," (",I.reviewsCount,")"]})]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Utworzono: ",new Date(I.createdAt).toLocaleDateString("pl-PL")]}),r.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[!I.isVerified&&!I.rejectedAt&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>F(I),disabled:k,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[r.jsx(Wt,{className:"w-4 h-4"}),"Zatwierd"]}),r.jsxs("button",{onClick:()=>{E(I),A(!0)},disabled:k,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[r.jsx(Tn,{className:"w-4 h-4"}),"Odrzu"]})]}),I.isVerified&&I.isActive!==!1&&r.jsxs(r.Fragment,{children:[r.jsxs("a",{href:`/#/uslugodawcy/profil/${I.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-1 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[r.jsx(ss,{className:"w-4 h-4"}),"Podgld"]}),r.jsxs("button",{onClick:()=>T(I),disabled:k,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-amber-100 text-amber-700 font-medium rounded-lg hover:bg-amber-200 transition-colors disabled:opacity-50",children:[r.jsx(z_,{className:"w-4 h-4"}),"Zawie"]})]}),I.isVerified&&I.isActive===!1&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>M(I),disabled:k,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[r.jsx(SL,{className:"w-4 h-4"}),"Aktywuj"]}),r.jsx("button",{onClick:()=>R(I),disabled:k,className:"py-2 px-4 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50",children:r.jsx(nr,{className:"w-4 h-4"})})]}),I.rejectedAt&&r.jsxs("button",{onClick:()=>R(I),disabled:k,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50",children:[r.jsx(nr,{className:"w-4 h-4"}),"Usu"]})]})]})]},I.id))}),S&&w&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Odrzu usugodawc"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:["Zamierzasz odrzuci profil ",r.jsx("strong",{children:w.name}),". Podaj powd odrzucenia (uytkownik go zobaczy):"]}),r.jsx("textarea",{value:C,onChange:I=>b(I.target.value),placeholder:"Powd odrzucenia...",rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none mb-4"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{A(!1),b("")},className:"flex-1 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Anuluj"}),r.jsx("button",{onClick:P,disabled:k||!C.trim(),className:"flex-1 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:k?"Odrzucanie...":"Odrzu"})]})]})})]})},w3=()=>{const{showToast:t}=ln(),[e,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(!0),[d,m]=N.useState(""),[f,g]=N.useState("all"),[x,w]=N.useState(!1);N.useEffect(()=>{E()},[]),N.useEffect(()=>{S()},[e,d,f]);const E=async()=>{l(!0);try{const D=await hn.getAllBookings();D.sort((F,P)=>new Date(P.createdAt).getTime()-new Date(F.createdAt).getTime()),n(D)}catch(D){console.error("Error loading bookings:",D),t("Bd adowania rezerwacji","error")}finally{l(!1)}},S=()=>{let D=[...e];if(d){const F=d.toLowerCase();D=D.filter(P=>{var T,M,R,B;return((T=P.clientName)==null?void 0:T.toLowerCase().includes(F))||((M=P.clientEmail)==null?void 0:M.toLowerCase().includes(F))||((R=P.providerName)==null?void 0:R.toLowerCase().includes(F))||((B=P.id)==null?void 0:B.toLowerCase().includes(F))})}f!=="all"&&(D=D.filter(F=>F.status===f)),i(D)},A=async(D,F)=>{let P="";if(!(F==="cancelled"&&(P=window.prompt("Podaj powd anulowania:")||"",!P))){w(!0);try{await hn.updateBookingStatus(D.id,F,P)?(t("Status zaktualizowany","success"),E()):t("Bd aktualizacji statusu","error")}catch{t("Bd aktualizacji statusu","error")}finally{w(!1)}}},C=D=>{switch(D){case"confirmed":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"completed":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},b=D=>{switch(D){case"confirmed":return"Potwierdzona";case"pending":return"Oczekujca";case"completed":return"Zakoczona";case"cancelled":return"Anulowana";default:return D}},k=[{value:"all",label:"Wszystkie",count:e.length},{value:"pending",label:"Oczekujce",count:e.filter(D=>D.status==="pending").length},{value:"confirmed",label:"Potwierdzone",count:e.filter(D=>D.status==="confirmed").length},{value:"completed",label:"Zakoczone",count:e.filter(D=>D.status==="completed").length},{value:"cancelled",label:"Anulowane",count:e.filter(D=>D.status==="cancelled").length}],j=e.filter(D=>D.status==="completed").reduce((D,F)=>D+(F.totalPrice||0),0),U=e.filter(D=>new Date(D.date).toDateString()===new Date().toDateString()).length;return o?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 text-red-500 animate-spin"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rezerwacje"}),r.jsx("p",{className:"text-gray-500",children:"Przegld wszystkich rezerwacji na platformie"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Yt,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Wszystkich"})]})]})}),r.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:r.jsx(Tt,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U}),r.jsx("p",{className:"text-sm text-gray-500",children:"Dzisiaj"})]})]})}),r.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Pr,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k[3].count}),r.jsx("p",{className:"text-sm text-gray-500",children:"Zakoczonych"})]})]})}),r.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:r.jsx(Vl,{className:"w-5 h-5 text-emerald-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[j.toLocaleString()," z"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Przychd"})]})]})})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ti,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Szukaj po kliencie, usugodawcy lub ID...",value:d,onChange:D=>m(D.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(D=>r.jsxs("button",{onClick:()=>g(D.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${f===D.value?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[D.label," (",D.count,")"]},D.value))})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"ID"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Klient"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Usugodawca"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Termin"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Usugi"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Kwota"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-600",children:"Akcje"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"Nie znaleziono rezerwacji"})}):s.map(D=>{var F;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[D.id.slice(0,8),"..."]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(rs,{className:"w-4 h-4 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:D.clientName||"Nieznany"}),r.jsx("p",{className:"text-xs text-gray-500",children:D.clientEmail})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx(wa,{className:"w-4 h-4 text-purple-600"})}),r.jsx("span",{className:"font-medium text-gray-900",children:D.providerName||"Nieznany"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:D.date}),r.jsx("p",{className:"text-sm text-gray-500",children:D.time})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"max-w-[200px]",children:((F=D.services)==null?void 0:F.map((P,T)=>r.jsxs("span",{className:"text-sm text-gray-600",children:[P.name,T<D.services.length-1?", ":""]},T)))||"-"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"font-bold text-gray-900",children:[D.totalPrice," z"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C(D.status)}`,children:b(D.status)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[D.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>A(D,"confirmed"),disabled:x,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Potwierd",children:r.jsx(Pr,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>A(D,"cancelled"),disabled:x,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Anuluj",children:r.jsx(Ul,{className:"w-5 h-5"})})]}),D.status==="confirmed"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>A(D,"completed"),disabled:x,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Oznacz jako zakoczone",children:r.jsx(Pr,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>A(D,"cancelled"),disabled:x,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Anuluj",children:r.jsx(Ul,{className:"w-5 h-5"})})]}),(D.status==="completed"||D.status==="cancelled")&&r.jsx("span",{className:"text-sm text-gray-400 px-2",children:""})]})})]},D.id)})})]})})})]})},v3=()=>{const{showToast:t}=ln(),{isSuperAdmin:e}=y2(),[n,s]=N.useState("general"),[i,o]=N.useState(!1),[l,d]=N.useState({siteName:"ToMyHomeApp",siteDescription:"Profesjonalne usugi beauty i wellness w zaciszu Twojego domu",contactEmail:"kontakt@tomyhomeapp.pl",contactPhone:"+48 123 456 789",maintenanceMode:!1}),[m,f]=N.useState({platformCommission:10,minWithdrawal:50,payoutDelay:7}),[g,x]=N.useState({emailNotifications:!0,bookingReminders:!0,marketingEmails:!1,providerAlerts:!0}),[w,E]=N.useState({requireEmailVerification:!1,requirePhoneVerification:!1,autoVerifyProviders:!1,maxLoginAttempts:5}),S=[{id:"general",label:"Oglne",icon:vL,superAdminOnly:!1},{id:"commission",label:"Prowizje",icon:Vl,superAdminOnly:!0},{id:"notifications",label:"Powiadomienia",icon:Ls,superAdminOnly:!1},{id:"security",label:"Bezpieczestwo",icon:Mn,superAdminOnly:!0},{id:"maintenance",label:"Konserwacja",icon:Wg,superAdminOnly:!0}],A=async()=>{o(!0),await new Promise(b=>setTimeout(b,1e3)),t("Ustawienia zapisane","success"),o(!1)},C=b=>b.superAdminOnly&&!e;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ustawienia"}),r.jsx("p",{className:"text-gray-500",children:"Konfiguracja platformy"})]}),r.jsxs("button",{onClick:A,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:[i?r.jsx(xm,{className:"w-5 h-5 animate-spin"}):r.jsx(Qi,{className:"w-5 h-5"}),"Zapisz zmiany"]})]}),!e&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:r.jsx(qa,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-amber-800",children:"Ograniczone uprawnienia"}),r.jsx("p",{className:"text-sm text-amber-600",children:"Niektre ustawienia s dostpne tylko dla Super Adminw"})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsx("div",{className:"lg:w-64 bg-white rounded-2xl shadow-sm p-4",children:r.jsx("nav",{className:"space-y-1",children:S.map(b=>{const k=C(b);return r.jsxs("button",{onClick:()=>!k&&s(b.id),disabled:k,className:`w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl transition-colors ${k?"text-gray-400 cursor-not-allowed":n===b.id?"bg-red-50 text-red-600":"text-gray-600 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(b.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:b.label})]}),k&&r.jsx(si,{className:"w-4 h-4"})]},b.id)})})}),r.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-sm p-6",children:[n==="general"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ustawienia oglne"}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa strony"}),r.jsx("input",{type:"text",value:l.siteName,onChange:b=>d({...l,siteName:b.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis strony"}),r.jsx("textarea",{value:l.siteDescription,onChange:b=>d({...l,siteDescription:b.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email kontaktowy"}),r.jsx("input",{type:"email",value:l.contactEmail,onChange:b=>d({...l,contactEmail:b.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon kontaktowy"}),r.jsx("input",{type:"tel",value:l.contactPhone,onChange:b=>d({...l,contactPhone:b.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]})]})]})]}),n==="commission"&&e&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ustawienia prowizji"}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Super Admin"})]}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prowizja platformy (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",value:m.platformCommission,onChange:b=>f({...m,platformCommission:Number(b.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Procent pobierany od kadej transakcji"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimalna kwota wypaty (z)"}),r.jsx("input",{type:"number",min:"0",value:m.minWithdrawal,onChange:b=>f({...m,minWithdrawal:Number(b.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opnienie wypaty (dni)"}),r.jsx("input",{type:"number",min:"0",value:m.payoutDelay,onChange:b=>f({...m,payoutDelay:Number(b.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Liczba dni po zakoczeniu usugi, po ktrych mona wypaci rodki"})]})]})]}),n==="notifications"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ustawienia powiadomie"}),r.jsx("div",{className:"space-y-4",children:[{key:"emailNotifications",label:"Powiadomienia email",desc:"Wysyaj powiadomienia email do uytkownikw"},{key:"bookingReminders",label:"Przypomnienia o rezerwacjach",desc:"Przypominaj o nadchodzcych wizytach"},{key:"marketingEmails",label:"Emaile marketingowe",desc:"Wysyaj newslettery i promocje"},{key:"providerAlerts",label:"Alerty dla usugodawcw",desc:"Powiadamiaj o nowych rezerwacjach i wiadomociach"}].map(b=>r.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:b.label}),r.jsx("p",{className:"text-sm text-gray-500",children:b.desc})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"checkbox",checked:g[b.key],onChange:k=>x({...g,[b.key]:k.target.checked}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-checked:bg-red-600 rounded-full transition-colors"}),r.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]})]},b.key))})]}),n==="security"&&e&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ustawienia bezpieczestwa"}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Super Admin"})]}),r.jsxs("div",{className:"space-y-4",children:[[{key:"requireEmailVerification",label:"Wymagaj weryfikacji email",desc:"Uytkownicy musz potwierdzi email przed aktywacj konta"},{key:"requirePhoneVerification",label:"Wymagaj weryfikacji telefonu",desc:"Uytkownicy musz potwierdzi numer telefonu SMS-em"},{key:"autoVerifyProviders",label:"Auto-weryfikacja usugodawcw",desc:"Automatycznie zatwierdzaj nowych usugodawcw (niezalecane)"}].map(b=>r.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:b.label}),r.jsx("p",{className:"text-sm text-gray-500",children:b.desc})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"checkbox",checked:w[b.key],onChange:k=>E({...w,[b.key]:k.target.checked}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-checked:bg-red-600 rounded-full transition-colors"}),r.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]})]},b.key)),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maksymalna liczba prb logowania"}),r.jsx("input",{type:"number",min:"1",max:"10",value:w.maxLoginAttempts,onChange:b=>E({...w,maxLoginAttempts:Number(b.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Po przekroczeniu konto zostanie tymczasowo zablokowane"})]})]})]}),n==="maintenance"&&e&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Tryb konserwacji"}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Super Admin"})]}),r.jsx("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Iu,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-amber-800",children:"Uwaga"}),r.jsx("p",{className:"text-amber-700 mb-4",children:"Wczenie trybu konserwacji spowoduje, e strona bdzie niedostpna dla wszystkich uytkownikw oprcz administratorw."}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"checkbox",checked:l.maintenanceMode,onChange:b=>d({...l,maintenanceMode:b.target.checked}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-checked:bg-red-600 rounded-full transition-colors"}),r.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]}),r.jsx("span",{className:"font-medium text-gray-900",children:l.maintenanceMode?"Tryb konserwacji WCZONY":"Tryb konserwacji wyczony"})]})]})]})}),r.jsxs("div",{className:"p-6 bg-gray-50 rounded-xl",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Akcje bazy danych"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{className:"w-full py-3 px-4 bg-white border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors text-left flex items-center gap-3",children:[r.jsx(Wg,{className:"w-5 h-5 text-gray-400"}),"Eksportuj dane (JSON)"]}),r.jsxs("button",{className:"w-full py-3 px-4 bg-white border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors text-left flex items-center gap-3",children:[r.jsx(xm,{className:"w-5 h-5 text-gray-400"}),"Wyczy cache"]}),r.jsxs("button",{className:"w-full py-3 px-4 bg-red-50 border border-red-200 text-red-700 font-medium rounded-xl hover:bg-red-100 transition-colors text-left flex items-center gap-3",children:[r.jsx(Iu,{className:"w-5 h-5 text-red-500"}),"Resetuj baz danych (NIEBEZPIECZNE)"]})]})]})]}),(n==="commission"||n==="security"||n==="maintenance")&&!e&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(si,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak dostpu"}),r.jsx("p",{className:"text-gray-500",children:"Te ustawienia s dostpne tylko dla Super Adminw"})]})]})]})]})},_3=()=>{const[t,e]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState("all"),[l,d]=N.useState(null),[m,f]=N.useState(!1),[g,x]=N.useState(!1),[w,E]=N.useState("");N.useEffect(()=>{S()},[]);const S=async()=>{s(!0);try{const j=await Is.getReports();e(j)}catch(j){console.error("Error loading reports:",j)}finally{s(!1)}},A=async j=>{if(l){x(!0);try{j==="dismiss"?await Is.updateReportStatus(l.id,"dismissed",w):j==="delete_review"&&(await Is.deleteReview(l.reviewId),await Is.updateReportStatus(l.id,"action_taken",w)),f(!1),S()}catch(U){console.error("Error handling report:",U)}finally{x(!1)}}},C=j=>{const U={pending:{text:"Oczekuje",bg:"bg-yellow-100",color:"text-yellow-700",icon:Tt},reviewed:{text:"Rozpatrzone",bg:"bg-blue-100",color:"text-blue-700",icon:ss},dismissed:{text:"Odrzucone",bg:"bg-gray-100",color:"text-gray-700",icon:Ul},action_taken:{text:"Usunito opini",bg:"bg-red-100",color:"text-red-700",icon:nr}},D=U[j]||U.pending,F=D.icon;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${D.bg} ${D.color}`,children:[r.jsx(F,{className:"w-3 h-3"}),D.text]})},b=t.filter(j=>i==="all"?!0:i==="pending"?j.status==="pending":i==="reviewed"?j.status!=="pending":!0),k=t.filter(j=>j.status==="pending").length;return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-red-500"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Cr,{className:"w-7 h-7 text-red-500"}),"Zgoszenia opinii",k>0&&r.jsxs("span",{className:"ml-2 px-2 py-1 bg-red-500 text-white text-sm rounded-full",children:[k," nowych"]})]}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Zarzdzaj zgoszeniami uytkownikw dotyczcymi opinii"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:r.jsx(Bn,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:t.length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Wszystkie zgoszenia"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(Tt,{className:"w-5 h-5 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:k}),r.jsx("p",{className:"text-sm text-gray-500",children:"Oczekujce"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Pr,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:t.filter(j=>j.status==="dismissed").length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Odrzucone"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:r.jsx(nr,{className:"w-5 h-5 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:t.filter(j=>j.status==="action_taken").length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Usunite opinie"})]})]})})]}),r.jsx("div",{className:"flex gap-2 mb-6",children:["all","pending","reviewed"].map(j=>r.jsxs("button",{onClick:()=>o(j),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===j?"bg-red-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[j==="all"&&"Wszystkie",j==="pending"&&`Oczekujce (${k})`,j==="reviewed"&&"Rozpatrzone"]},j))}),b.length===0?r.jsxs("div",{className:"bg-white rounded-xl p-8 text-center",children:[r.jsx(Cr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Brak zgosze do wywietlenia"})]}):r.jsx("div",{className:"space-y-4",children:b.map(j=>r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[C(j.status),r.jsx("span",{className:"text-sm text-gray-400",children:new Date(j.createdAt).toLocaleString("pl-PL")})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white text-sm font-bold",children:j.reviewAuthor.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:j.reviewAuthor}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Opinia dla: ",j.providerName]})]})]}),r.jsxs("p",{className:"text-gray-600 italic",children:['"',j.reviewContent,'"']})]}),r.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[r.jsx(Iu,{className:"w-4 h-4 text-red-500 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Powd zgoszenia:"}),r.jsx("p",{className:"text-sm text-gray-600",children:j.reason})]})]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Zgoszone przez: ",j.reporterName]}),j.adminNote&&r.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-xs font-medium text-blue-700",children:"Notatka admina:"}),r.jsx("p",{className:"text-sm text-blue-600",children:j.adminNote})]})]}),j.status==="pending"&&r.jsxs("button",{onClick:()=>{d(j),E(""),f(!0)},className:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 flex items-center gap-2",children:[r.jsx(ss,{className:"w-4 h-4"}),"Rozpatrz"]})]})},j.id))}),m&&l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full p-6",children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[r.jsx(Cr,{className:"w-5 h-5 text-red-500"}),"Rozpatrz zgoszenie"]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg mb-4",children:[r.jsxs("p",{className:"text-sm font-medium mb-1",children:[l.reviewAuthor," napisa:"]}),r.jsxs("p",{className:"text-gray-600 italic",children:['"',l.reviewContent,'"']})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Powd zgoszenia:"}),r.jsx("p",{className:"text-gray-600",children:l.reason})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notatka (opcjonalnie)"}),r.jsx("textarea",{value:w,onChange:j=>E(j.target.value),placeholder:"Dodaj notatk do decyzji...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none",rows:2})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50",children:"Anuluj"}),r.jsxs("button",{onClick:()=>A("dismiss"),disabled:g,className:"flex-1 px-4 py-3 bg-gray-500 text-white rounded-xl font-medium hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center gap-2",children:[g?r.jsx(Ve,{className:"w-4 h-4 animate-spin"}):r.jsx(Ul,{className:"w-4 h-4"}),"Odrzu"]}),r.jsxs("button",{onClick:()=>A("delete_review"),disabled:g,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl font-medium hover:bg-red-600 disabled:opacity-50 flex items-center justify-center gap-2",children:[g?r.jsx(Ve,{className:"w-4 h-4 animate-spin"}):r.jsx(nr,{className:"w-4 h-4"}),"Usu opini"]})]})]})})]})},b3=()=>{var he;const[t,e]=N.useState(!1),[n,s]=N.useState(!1),[i,o]=N.useState(!1),[l,d]=N.useState(!1),[m,f]=N.useState(!1),{isAuthenticated:g,user:x,logout:w}=Et(),E=Os(),S=xs(),A=(x==null?void 0:x.accountType)==="provider"||!!(x!=null&&x.businessName),C=N.useRef(null),b=N.useRef(null),k=N.useRef(null),[j,U]=N.useState([]),[D,F]=N.useState(0);N.useEffect(()=>{if(!(x!=null&&x.id)){U([]);return}const de=dn.subscribe(x.id,we=>{U(we.slice(0,5))});return()=>de()},[x==null?void 0:x.id]),N.useEffect(()=>{if(!(x!=null&&x.id)){F(0);return}const de=Js.subscribeToUnreadCount(x.id,we=>{F(we)});return()=>de()},[x==null?void 0:x.id]);const P=j.filter(de=>!de.read).length,T=de=>{const we=new Date(de),W=new Date().getTime()-we.getTime(),Q=Math.floor(W/6e4),O=Math.floor(W/36e5);return Q<1?"Teraz":Q<60?`${Q} min temu`:O<24?`${O}h temu`:we.toLocaleDateString("pl-PL")};N.useEffect(()=>{const de=()=>{s(window.scrollY>50)};return window.addEventListener("scroll",de),()=>window.removeEventListener("scroll",de)},[]),N.useEffect(()=>{const de=we=>{C.current&&!C.current.contains(we.target)&&o(!1),b.current&&!b.current.contains(we.target)&&d(!1),k.current&&!k.current.contains(we.target)&&f(!1)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]);const M=[{to:"/",label:"Strona Gwna"},{to:"/#services",label:"Usugi"},{to:"/#how",label:"Jak to dziaa"},{to:"/#reviews",label:"Opinie"},{to:"/#contact",label:"Kontakt"}],R=de=>{if(e(!1),de.startsWith("/#")){const we=de.replace("/#",""),te=document.getElementById(we);te&&te.scrollIntoView({behavior:"smooth"})}},B=async()=>{if(x!=null&&x.id)try{await dn.markAllAsRead(x.id)}catch(de){console.error("Error marking notifications as read:",de)}},$=()=>r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),r.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),r.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),I=()=>r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});return r.jsxs("header",{className:`sticky top-0 z-50 transition-all duration-300 ${n?"bg-white/95 backdrop-blur-xl shadow-lg":"bg-white/95 backdrop-blur-xl border-b border-gray-100"}`,children:[r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"h-[72px] flex items-center justify-between gap-8",children:[r.jsxs(Ne,{to:"/",className:"flex items-center gap-3 transition-transform duration-300 hover:scale-105",children:[r.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),r.jsx("span",{className:"font-extrabold text-xl gradient-text hidden sm:block",children:"TOMYHOMEAPP"})]}),r.jsx("nav",{className:"hidden lg:flex items-center gap-8",children:M.map(de=>r.jsx(Ne,{to:de.to,onClick:()=>R(de.to),className:`text-gray-600 font-medium text-[15px] relative py-2 transition-colors hover:text-primary
                  after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 
                  after:bg-gradient-to-r after:from-primary after:to-secondary after:transition-all
                  hover:after:w-full ${E.pathname===de.to?"text-primary after:w-full":""}`,children:de.label},de.to))}),r.jsx("div",{className:"hidden lg:flex items-center gap-3",children:g?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",ref:k,children:[r.jsxs("button",{onClick:()=>f(!m),className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[r.jsx(Ls,{className:"w-5 h-5"}),P>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:P})]}),m&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-50",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[r.jsx("h3",{className:"font-bold text-gray-900",children:"Powiadomienia"}),P>0&&r.jsx("button",{onClick:B,className:"text-sm text-primary hover:underline",children:"Oznacz jako przeczytane"})]}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:j.length===0?r.jsxs("div",{className:"p-6 text-center text-gray-500",children:[r.jsx(Ls,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),r.jsx("p",{className:"text-sm",children:"Brak powiadomie"})]}):j.map(de=>r.jsxs("div",{onClick:async()=>{await dn.markAsRead(de.id),f(!1),S("/powiadomienia")},className:`p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer ${de.read?"":"bg-blue-50"}`,children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[dn.getIcon(de.type)," ",de.title]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:de.message}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:T(de.createdAt)})]},de.id))}),r.jsx(Ne,{to:"/powiadomienia",className:"block p-3 text-center text-sm text-primary hover:bg-gray-50",onClick:()=>f(!1),children:"Zobacz wszystkie"})]})]}),r.jsxs(Ne,{to:"/wiadomosci",className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[r.jsx(Bn,{className:"w-5 h-5"}),D>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary text-white text-xs font-bold rounded-full flex items-center justify-center",children:D>9?"9+":D})]}),A&&r.jsx(Ne,{to:"/biznes",className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all text-sm",children:" Panel Biznes"}),r.jsxs("div",{className:"relative",ref:b,children:[r.jsxs("button",{onClick:()=>d(!l),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-xl transition-colors",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:((he=x==null?void 0:x.username)==null?void 0:he.charAt(0).toUpperCase())||"U"})}),r.jsx("span",{className:"text-sm font-medium text-gray-700 hidden xl:block",children:x==null?void 0:x.username}),r.jsx(ym,{className:"w-4 h-4 text-gray-500"})]}),l&&r.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[r.jsx("p",{className:"font-medium text-gray-900",children:x==null?void 0:x.username}),r.jsx("p",{className:"text-sm text-gray-500",children:x==null?void 0:x.email})]}),r.jsxs(Ne,{to:"/profil",className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>d(!1),children:[r.jsx(rs,{className:"w-4 h-4"}),"Mj profil"]}),r.jsxs(Ne,{to:"/wiadomosci",className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>d(!1),children:[r.jsx(Bn,{className:"w-4 h-4"}),"Wiadomoci"]}),r.jsx("hr",{className:"my-2"}),r.jsxs("button",{onClick:()=>{w(),d(!1),S("/")},className:"flex items-center gap-3 px-4 py-2 text-red-600 hover:bg-red-50 w-full text-left",children:[r.jsx(Ru,{className:"w-4 h-4"}),"Wyloguj si"]})]})]})]}):r.jsxs("div",{className:"relative",ref:C,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-primary transition-colors font-medium",children:[r.jsx(rs,{className:"w-5 h-5"}),r.jsx("span",{children:"Moje konto"}),r.jsx(ym,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&r.jsx("div",{className:"absolute right-0 mt-0 pt-2 z-50",children:r.jsxs("div",{className:"w-80 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"p-6 text-center bg-gradient-to-b from-gray-50 to-white",children:[r.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[r.jsx("div",{className:"text-5xl",children:""}),r.jsx("div",{className:"text-5xl",children:""})]}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Witaj w ToMyHomeApp"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Zaloguj si, aby zobaczy swoje rezerwacje, ulubione usugi i powiadomienia."})]}),r.jsx("div",{className:"px-6 pb-4",children:r.jsx(Ne,{to:"/auth?mode=login",className:"block w-full py-3 bg-gradient-to-r from-primary to-secondary text-white text-center rounded-xl font-bold hover:shadow-lg transition-all",onClick:()=>o(!1),children:"ZALOGUJ SI"})}),r.jsxs("div",{className:"px-6 pb-4",children:[r.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"Nie masz jeszcze konta? Za teraz."}),r.jsx(Ne,{to:"/auth?mode=register&type=client",className:"flex items-center justify-center w-full py-3 mb-2 border-2 border-primary text-primary rounded-xl font-bold hover:bg-primary hover:text-white transition-all",onClick:()=>o(!1),children:"DLA KLIENTA"}),r.jsx(Ne,{to:"/auth?mode=register&type=provider",className:"flex items-center justify-center w-full py-3 border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold hover:bg-emerald-500 hover:text-white transition-all",onClick:()=>o(!1),children:"DLA USUGODAWCY"})]})]})})]})}),r.jsx("button",{onClick:()=>e(!t),"aria-label":"Toggle menu",className:"lg:hidden flex items-center justify-center",style:{width:"44px",height:"44px",backgroundColor:"#ffffff",border:"2px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",color:"#374151",cursor:"pointer"},children:t?r.jsx(I,{}):r.jsx($,{})})]})}),t&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)}),r.jsx("div",{className:"lg:hidden fixed top-[72px] left-0 right-0 bg-white shadow-xl z-50 max-h-[calc(100vh-72px)] overflow-y-auto",style:{backgroundColor:"#ffffff"},children:r.jsxs("nav",{className:"p-6 flex flex-col gap-4",children:[M.map(de=>r.jsx(Ne,{to:de.to,onClick:()=>R(de.to),className:"py-3 border-b border-gray-100 text-gray-900 font-medium transition-all hover:text-primary hover:pl-2",children:de.label},de.to)),r.jsx("div",{className:"flex flex-col gap-3 mt-4",children:g?r.jsxs(r.Fragment,{children:[(x==null?void 0:x.accountType)==="provider"&&r.jsx(Ne,{to:"/biznes",onClick:()=>e(!1),className:"w-full py-3 px-4 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold text-center",children:" Panel Biznes"}),r.jsx(Ne,{to:"/wiadomosci",onClick:()=>e(!1),className:"w-full py-3 px-4 border border-gray-200 text-gray-700 rounded-xl font-medium text-center hover:bg-gray-50",children:" Wiadomoci"}),r.jsx(Ne,{to:"/profil",onClick:()=>e(!1),className:"w-full py-3 px-4 border border-gray-200 text-gray-700 rounded-xl font-medium text-center hover:bg-gray-50",children:"Mj profil"}),r.jsx("button",{onClick:()=>{w(),e(!1)},className:"w-full py-3 px-4 border border-red-200 text-red-600 rounded-xl font-medium text-center hover:bg-red-50",children:"Wyloguj si"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center mb-2",children:[r.jsx("div",{className:"text-3xl mb-2",children:" "}),r.jsx("p",{className:"text-sm text-gray-600",children:"Zaloguj si, aby korzysta z penych funkcji"})]}),r.jsx(Ne,{to:"/auth?mode=login",onClick:()=>e(!1),className:"w-full py-3 px-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold text-center",children:"ZALOGUJ SI"}),r.jsx(Ne,{to:"/auth?mode=register&type=client",onClick:()=>e(!1),className:"w-full py-3 px-4 border-2 border-primary text-primary rounded-xl font-semibold text-center",children:"REJESTRACJA - KLIENT"}),r.jsx(Ne,{to:"/auth?mode=register&type=provider",onClick:()=>e(!1),className:"w-full py-3 px-4 border-2 border-emerald-500 text-emerald-600 rounded-xl font-semibold text-center",children:"REJESTRACJA - USUGODAWCA"})]})})]})})]})]})},j3=()=>{const t=new Date().getFullYear(),e={services:[{label:"Fryzjer",to:"/uslugodawcy/fryzjer"},{label:"Manicure",to:"/uslugodawcy/paznokcie"},{label:"Masa",to:"/uslugodawcy/masaz"},{label:"Kosmetyka",to:"/uslugodawcy/kosmetyka"},{label:"Wszystkie usugi",to:"/uslugodawcy"}],company:[{label:"O nas",to:"/o-nas"},{label:"Kariera",to:"/kariera"},{label:"Blog",to:"/blog"},{label:"Kontakt",to:"/kontakt"}],help:[{label:"FAQ",to:"/faq"},{label:"Regulamin",to:"/regulamin"},{label:"Polityka prywatnoci",to:"/prywatnosc"},{label:"Wsparcie",to:"/wsparcie"}]};return r.jsxs("footer",{className:"bg-gray-900 text-white",id:"contact",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-6 pt-16 pb-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 lg:gap-12",children:[r.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[r.jsx(Ne,{to:"/",className:"inline-block mb-4",children:r.jsx("h4",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"TOMYHOMEAPP"})}),r.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"Profesjonalne usugi beauty i wellness w zaciszu Twojego domu. Znajd idealnego specjalist w kilka sekund."}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("a",{href:"mailto:kontakt@tomyhomeapp.pl",className:"flex items-center gap-3 text-gray-400 hover:text-white transition-colors",children:[r.jsx(Rr,{className:"w-4 h-4"}),r.jsx("span",{children:"kontakt@tomyhomeapp.pl"})]}),r.jsxs("a",{href:"tel:+48123456789",className:"flex items-center gap-3 text-gray-400 hover:text-white transition-colors",children:[r.jsx(va,{className:"w-4 h-4"}),r.jsx("span",{children:"+48 123 456 789"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[r.jsx(Ir,{className:"w-4 h-4"}),r.jsx("span",{children:"Pozna, Polska"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-primary hover:-translate-y-1",children:r.jsx(xL,{className:"w-5 h-5"})}),r.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-gradient-to-r hover:from-purple-500 hover:to-pink-500 hover:-translate-y-1",children:r.jsx(NL,{className:"w-5 h-5"})}),r.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-blue-400 hover:-translate-y-1",children:r.jsx(DL,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Usugi"}),r.jsx("ul",{className:"space-y-3",children:e.services.map(n=>r.jsx("li",{children:r.jsx(Ne,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Firma"}),r.jsx("ul",{className:"space-y-3",children:e.company.map(n=>r.jsx("li",{children:r.jsx(Ne,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Pomoc"}),r.jsx("ul",{className:"space-y-3",children:e.help.map(n=>r.jsx("li",{children:r.jsx(Ne,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]})]})}),r.jsx("div",{className:"border-t border-white/10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"text-lg font-bold mb-1",children:"Zapisz si do newslettera"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Otrzymuj informacje o promocjach i nowociach"})]}),r.jsxs("div",{className:"flex w-full md:w-auto gap-2",children:[r.jsx("input",{type:"email",placeholder:"Twj email...",className:"flex-1 md:w-64 px-4 py-2.5 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-primary"}),r.jsx("button",{className:"px-6 py-2.5 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-primary/25 transition-all",children:"Zapisz si"})]})]})})}),r.jsx("div",{className:"border-t border-white/10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-gray-500",children:[r.jsxs("p",{children:[" ",t," TOMYHOMEAPP. Wszystkie prawa zastrzeone."]}),r.jsxs("p",{className:"flex items-center gap-1",children:["Stworzone z ",r.jsx(Xa,{className:"w-4 h-4 text-red-500 fill-red-500"})," w Poznaniu"]})]})})})]})},N3=({message:t,type:e="success",onClose:n})=>{const[s,i]=N.useState(!1);N.useEffect(()=>{i(!0);const d=setTimeout(()=>{i(!1),setTimeout(n,300)},2700);return()=>clearTimeout(d)},[n]);const o={success:r.jsx(Wt,{className:"w-5 h-5"}),error:r.jsx(Tn,{className:"w-5 h-5"}),info:r.jsx(jL,{className:"w-5 h-5"})},l={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return r.jsxs("div",{className:`bg-white rounded-xl shadow-xl flex items-center gap-3 px-6 py-4 transition-all duration-300 ${s?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[r.jsx("div",{className:`w-8 h-8 ${l[e]} text-white rounded-full flex items-center justify-center`,children:o[e]}),r.jsx("span",{className:"font-medium text-gray-900",children:t}),r.jsx("button",{onClick:()=>{i(!1),setTimeout(n,300)},className:"ml-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Tn,{className:"w-4 h-4"})})]})},k3=()=>r.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden opacity-40 pointer-events-none",children:[r.jsx("div",{className:"absolute w-[600px] h-[600px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",top:"-200px",left:"-200px",animationDelay:"0s"}}),r.jsx("div",{className:"absolute w-[800px] h-[800px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",bottom:"-300px",right:"-300px",animationDelay:"7s"}}),r.jsx("div",{className:"absolute w-[500px] h-[500px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animationDelay:"14s"}})]}),T3=()=>{const{pathname:t}=Os();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null},x2=N.createContext({user:null,userData:null,firebaseUser:null,loading:!0,login:()=>{},logout:async()=>{},isAuthenticated:!1,isAdmin:!1,isSuperAdmin:!1}),w2=N.createContext({showToast:()=>{}}),Et=()=>N.useContext(x2),ln=()=>N.useContext(w2),E3=()=>r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(T3,{}),r.jsx(k3,{}),r.jsx(b3,{}),r.jsx("main",{className:"flex-grow",children:r.jsxs(iN,{children:[r.jsx(qe,{path:"/",element:r.jsx(BL,{})}),r.jsx(qe,{path:"/auth",element:r.jsx(FL,{})}),r.jsx(qe,{path:"/weryfikacja-email",element:r.jsx($L,{})}),r.jsx(qe,{path:"/profil",element:r.jsx(YL,{})}),r.jsx(qe,{path:"/uslugodawcy/profil/:id",element:r.jsx(aD,{})}),r.jsx(qe,{path:"/uslugodawcy/:category",element:r.jsx(I_,{})}),r.jsx(qe,{path:"/uslugodawcy",element:r.jsx(I_,{})}),r.jsx(qe,{path:"/wiadomosci",element:r.jsx(lD,{})}),r.jsx(qe,{path:"/powiadomienia",element:r.jsx(cD,{})}),r.jsx(qe,{path:"/o-nas",element:r.jsx(uD,{})}),r.jsx(qe,{path:"/kariera",element:r.jsx(dD,{})}),r.jsx(qe,{path:"/blog",element:r.jsx(hD,{})}),r.jsx(qe,{path:"/kontakt",element:r.jsx(mD,{})}),r.jsx(qe,{path:"/faq",element:r.jsx(fD,{})}),r.jsx(qe,{path:"/regulamin",element:r.jsx(pD,{})}),r.jsx(qe,{path:"/prywatnosc",element:r.jsx(gD,{})}),r.jsx(qe,{path:"/wsparcie",element:r.jsx(yD,{})})]})}),r.jsx(j3,{})]}),S3=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"adowanie..."})]})});function z3(){const[t,e]=N.useState(null),[n,s]=N.useState(null),[i,o]=N.useState(!0),[l,d]=N.useState(null),[m,f]=N.useState([]);N.useEffect(()=>{const C=yI(kn,async b=>{if(console.log("Auth state changed:",b==null?void 0:b.email),b){e(b);try{const k=await Rs(Ie(ae,"users",b.uid));if(k.exists()){const j=k.data();s(j),d({id:b.uid,username:j.username||b.displayName||"Uytkownik",email:j.email||b.email||"",phone:j.phone||"",accountType:j.accountType||"client",avatar:j.avatar})}else d({id:b.uid,username:b.displayName||"Uytkownik",email:b.email||"",phone:"",accountType:"client"})}catch(k){console.error("Error fetching user data:",k),d({id:b.uid,username:b.displayName||"Uytkownik",email:b.email||"",phone:"",accountType:"client"})}}else e(null),s(null),d(null);o(!1)});return()=>C()},[]);const g=C=>{d(C)},x=async()=>{try{await xI(kn),d(null),s(null),e(null)}catch(C){console.error("Logout error:",C)}},w=(C,b="success")=>{const k=Date.now().toString();f(j=>[...j,{id:k,message:C,type:b}]),setTimeout(()=>{f(j=>j.filter(U=>U.id!==k))},3e3)},E=C=>{f(b=>b.filter(k=>k.id!==C))};if(i)return r.jsx(S3,{});const S=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="superadmin",A=(n==null?void 0:n.role)==="superadmin";return r.jsx(x2.Provider,{value:{user:l,userData:n,firebaseUser:t,loading:i,login:g,logout:x,isAuthenticated:!!t,isAdmin:S,isSuperAdmin:A},children:r.jsxs(w2.Provider,{value:{showToast:w},children:[r.jsxs(iN,{children:[r.jsxs(qe,{path:"/admin/*",element:r.jsx(KD,{}),children:[r.jsx(qe,{index:!0,element:r.jsx(g3,{})}),r.jsx(qe,{path:"uzytkownicy",element:r.jsx(y3,{})}),r.jsx(qe,{path:"uslugodawcy",element:r.jsx(x3,{})}),r.jsx(qe,{path:"rezerwacje",element:r.jsx(w3,{})}),r.jsx(qe,{path:"zgloszenia",element:r.jsx(_3,{})}),r.jsx(qe,{path:"ustawienia",element:r.jsx(v3,{})})]}),r.jsxs(qe,{path:"/biznes/*",element:r.jsx(vD,{}),children:[r.jsx(qe,{index:!0,element:r.jsx(A_,{})}),r.jsx(qe,{path:"uslugi",element:r.jsx(_D,{})}),r.jsx(qe,{path:"dodaj-usluge",element:r.jsx(BD,{})}),r.jsx(qe,{path:"godziny-pracy",element:r.jsx(WD,{})}),r.jsx(qe,{path:"kalendarz",element:r.jsx(UD,{})}),r.jsx(qe,{path:"wiadomosci",element:r.jsx($D,{})}),r.jsx(qe,{path:"opinie",element:r.jsx(HD,{})}),r.jsx(qe,{path:"statystyki",element:r.jsx(FD,{})}),r.jsx(qe,{path:"profil",element:r.jsx(R_,{})}),r.jsx(qe,{path:"ustawienia",element:r.jsx(R_,{})}),r.jsx(qe,{path:"pomoc",element:r.jsx(A_,{})})]}),r.jsx(qe,{path:"/*",element:r.jsx(E3,{})})]}),r.jsx("div",{className:"fixed bottom-8 right-8 z-50 flex flex-col gap-3",children:m.map(C=>r.jsx(N3,{message:C.message,type:C.type,onClose:()=>E(C.id)},C.id))})]})})}gp.createRoot(document.getElementById("root")).render(r.jsx(nu.StrictMode,{children:r.jsx(Nz,{children:r.jsx(z3,{})})}));
