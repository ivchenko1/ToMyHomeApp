function h2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var f2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a_={exports:{}},Jh={},o_={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iu=Symbol.for("react.element"),m2=Symbol.for("react.portal"),p2=Symbol.for("react.fragment"),g2=Symbol.for("react.strict_mode"),y2=Symbol.for("react.profiler"),x2=Symbol.for("react.provider"),v2=Symbol.for("react.context"),w2=Symbol.for("react.forward_ref"),_2=Symbol.for("react.suspense"),b2=Symbol.for("react.memo"),j2=Symbol.for("react.lazy"),Jx=Symbol.iterator;function N2(t){return t===null||typeof t!="object"?null:(t=Jx&&t[Jx]||t["@@iterator"],typeof t=="function"?t:null)}var l_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c_=Object.assign,u_={};function ul(t,e,n){this.props=t,this.context=e,this.refs=u_,this.updater=n||l_}ul.prototype.isReactComponent={};ul.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ul.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d_(){}d_.prototype=ul.prototype;function jg(t,e,n){this.props=t,this.context=e,this.refs=u_,this.updater=n||l_}var Ng=jg.prototype=new d_;Ng.constructor=jg;c_(Ng,ul.prototype);Ng.isPureReactComponent=!0;var Xx=Array.isArray,h_=Object.prototype.hasOwnProperty,kg={current:null},f_={key:!0,ref:!0,__self:!0,__source:!0};function m_(t,e,n){var r,s={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)h_.call(e,r)&&!f_.hasOwnProperty(r)&&(s[r]=e[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var f=Array(h),m=0;m<h;m++)f[m]=arguments[m+2];s.children=f}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:iu,type:t,key:o,ref:l,props:s,_owner:kg.current}}function k2(t,e){return{$$typeof:iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tg(t){return typeof t=="object"&&t!==null&&t.$$typeof===iu}function T2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var e0=/\/+/g;function rm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T2(""+t.key):e.toString(36)}function Ad(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case iu:case m2:l=!0}}if(l)return l=t,s=s(l),t=r===""?"."+rm(l,0):r,Xx(s)?(n="",t!=null&&(n=t.replace(e0,"$&/")+"/"),Ad(s,e,n,"",function(m){return m})):s!=null&&(Tg(s)&&(s=k2(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(e0,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=r===""?".":r+":",Xx(t))for(var h=0;h<t.length;h++){o=t[h];var f=r+rm(o,h);l+=Ad(o,e,n,f,s)}else if(f=N2(t),typeof f=="function")for(t=f.call(t),h=0;!(o=t.next()).done;)o=o.value,f=r+rm(o,h++),l+=Ad(o,e,n,f,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ad(t,e,n){if(t==null)return t;var r=[],s=0;return Ad(t,r,"","",function(o){return e.call(n,o,s++)}),r}function E2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},Rd={transition:null},S2={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Rd,ReactCurrentOwner:kg};function p_(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:ad,forEach:function(t,e,n){ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!Tg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=ul;Le.Fragment=p2;Le.Profiler=y2;Le.PureComponent=jg;Le.StrictMode=g2;Le.Suspense=_2;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S2;Le.act=p_;Le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=c_({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=kg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(f in e)h_.call(e,f)&&!f_.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&h!==void 0?h[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){h=Array(f);for(var m=0;m<f;m++)h[m]=arguments[m+2];r.children=h}return{$$typeof:iu,type:t.type,key:s,ref:o,props:r,_owner:l}};Le.createContext=function(t){return t={$$typeof:v2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:x2,_context:t},t.Consumer=t};Le.createElement=m_;Le.createFactory=function(t){var e=m_.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:w2,render:t}};Le.isValidElement=Tg;Le.lazy=function(t){return{$$typeof:j2,_payload:{_status:-1,_result:t},_init:E2}};Le.memo=function(t,e){return{$$typeof:b2,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=Rd.transition;Rd.transition={};try{t()}finally{Rd.transition=e}};Le.unstable_act=p_;Le.useCallback=function(t,e){return pn.current.useCallback(t,e)};Le.useContext=function(t){return pn.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Le.useEffect=function(t,e){return pn.current.useEffect(t,e)};Le.useId=function(){return pn.current.useId()};Le.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Le.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return pn.current.useMemo(t,e)};Le.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Le.useRef=function(t){return pn.current.useRef(t)};Le.useState=function(t){return pn.current.useState(t)};Le.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Le.useTransition=function(){return pn.current.useTransition()};Le.version="18.3.1";o_.exports=Le;var D=o_.exports;const kc=i_(D),P2=h2({__proto__:null,default:kc},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2=D,C2=Symbol.for("react.element"),z2=Symbol.for("react.fragment"),A2=Object.prototype.hasOwnProperty,R2=I2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L2={key:!0,ref:!0,__self:!0,__source:!0};function g_(t,e,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)A2.call(e,r)&&!L2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:C2,type:t,key:o,ref:l,props:s,_owner:R2.current}}Jh.Fragment=z2;Jh.jsx=g_;Jh.jsxs=g_;a_.exports=Jh;var a=a_.exports,qm={},y_={exports:{}},Wn={},x_={exports:{}},v_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var F=B.length;B.push(Q);e:for(;0<F;){var ee=F-1>>>1,Y=B[ee];if(0<s(Y,Q))B[ee]=Q,B[F]=Y,F=ee;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],F=B.pop();if(F!==Q){B[0]=F;e:for(var ee=0,Y=B.length,pe=Y>>>1;ee<pe;){var X=2*(ee+1)-1,se=B[X],ce=X+1,Ve=B[ce];if(0>s(se,F))ce<Y&&0>s(Ve,se)?(B[ee]=Ve,B[ce]=F,ee=ce):(B[ee]=se,B[X]=F,ee=X);else if(ce<Y&&0>s(Ve,F))B[ee]=Ve,B[ce]=F,ee=ce;else break e}}return Q}function s(B,Q){var F=B.sortIndex-Q.sortIndex;return F!==0?F:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var f=[],m=[],g=1,x=null,_=3,T=!1,k=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var Q=n(m);Q!==null;){if(Q.callback===null)r(m);else if(Q.startTime<=B)r(m),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=n(m)}}function H(B){if(C=!1,I(B),!k)if(n(f)!==null)k=!0,le(O);else{var Q=n(m);Q!==null&&re(H,Q.startTime-B)}}function O(B,Q){k=!1,C&&(C=!1,E(b),b=-1),T=!0;var F=_;try{for(I(Q),x=n(f);x!==null&&(!(x.expirationTime>Q)||B&&!V());){var ee=x.callback;if(typeof ee=="function"){x.callback=null,_=x.priorityLevel;var Y=ee(x.expirationTime<=Q);Q=t.unstable_now(),typeof Y=="function"?x.callback=Y:x===n(f)&&r(f),I(Q)}else r(f);x=n(f)}if(x!==null)var pe=!0;else{var X=n(m);X!==null&&re(H,X.startTime-Q),pe=!1}return pe}finally{x=null,_=F,T=!1}}var R=!1,N=null,b=-1,z=5,M=-1;function V(){return!(t.unstable_now()-M<z)}function $(){if(N!==null){var B=t.unstable_now();M=B;var Q=!0;try{Q=N(!0,B)}finally{Q?U():(R=!1,N=null)}}else R=!1}var U;if(typeof S=="function")U=function(){S($)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,fe=Te.port2;Te.port1.onmessage=$,U=function(){fe.postMessage(null)}}else U=function(){A($,0)};function le(B){N=B,R||(R=!0,U())}function re(B,Q){b=A(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,le(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(B){switch(_){case 1:case 2:case 3:var Q=3;break;default:Q=_}var F=_;_=Q;try{return B()}finally{_=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var F=_;_=B;try{return Q()}finally{_=F}},t.unstable_scheduleCallback=function(B,Q,F){var ee=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ee+F:ee):F=ee,B){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=F+Y,B={id:g++,callback:Q,priorityLevel:B,startTime:F,expirationTime:Y,sortIndex:-1},F>ee?(B.sortIndex=F,e(m,B),n(f)===null&&B===n(m)&&(C?(E(b),b=-1):C=!0,re(H,F-ee))):(B.sortIndex=Y,e(f,B),k||T||(k=!0,le(O))),B},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(B){var Q=_;return function(){var F=_;_=Q;try{return B.apply(this,arguments)}finally{_=F}}}})(v_);x_.exports=v_;var D2=x_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2=D,Fn=D2;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w_=new Set,Tc={};function La(t,e){Ko(t,e),Ko(t+"Capture",e)}function Ko(t,e){for(Tc[t]=e,t=0;t<e.length;t++)w_.add(e[t])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zm=Object.prototype.hasOwnProperty,O2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t0={},n0={};function V2(t){return Zm.call(n0,t)?!0:Zm.call(t0,t)?!1:O2.test(t)?n0[t]=!0:(t0[t]=!0,!1)}function U2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B2(t,e,n,r){if(e===null||typeof e>"u"||U2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Eg=/[\-:]([a-z])/g;function Sg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eg,Sg);Gt[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eg,Sg);Gt[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eg,Sg);Gt[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pg(t,e,n,r){var s=Gt.hasOwnProperty(e)?Gt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(B2(e,n,s,r)&&(n=null),r||s===null?V2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ms=M2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,od=Symbol.for("react.element"),jo=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),Ig=Symbol.for("react.strict_mode"),Km=Symbol.for("react.profiler"),__=Symbol.for("react.provider"),b_=Symbol.for("react.context"),Cg=Symbol.for("react.forward_ref"),Gm=Symbol.for("react.suspense"),Qm=Symbol.for("react.suspense_list"),zg=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),j_=Symbol.for("react.offscreen"),r0=Symbol.iterator;function $l(t){return t===null||typeof t!="object"?null:(t=r0&&t[r0]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,sm;function Xl(t){if(sm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sm=e&&e[1]||""}return`
`+sm+t}var im=!1;function am(t,e){if(!t||im)return"";im=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){r=m}t.call(e.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var f=`
`+s[l].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=l&&0<=h);break}}}finally{im=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xl(t):""}function F2(t){switch(t.tag){case 5:return Xl(t.type);case 16:return Xl("Lazy");case 13:return Xl("Suspense");case 19:return Xl("SuspenseList");case 0:case 2:case 15:return t=am(t.type,!1),t;case 11:return t=am(t.type.render,!1),t;case 1:return t=am(t.type,!0),t;default:return""}}function Ym(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case jo:return"Portal";case Km:return"Profiler";case Ig:return"StrictMode";case Gm:return"Suspense";case Qm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case b_:return(t.displayName||"Context")+".Consumer";case __:return(t._context.displayName||"Context")+".Provider";case Cg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zg:return e=t.displayName||null,e!==null?e:Ym(t.type)||"Memo";case Js:e=t._payload,t=t._init;try{return Ym(t(e))}catch{}}return null}function W2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ym(e);case 8:return e===Ig?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $2(t){var e=N_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ld(t){t._valueTracker||(t._valueTracker=$2(t))}function k_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=N_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jm(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function s0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T_(t,e){e=e.checked,e!=null&&Pg(t,"checked",e,!1)}function Xm(t,e){T_(t,e);var n=ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ep(t,e.type,n):e.hasOwnProperty("defaultValue")&&ep(t,e.type,ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function i0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ep(t,e,n){(e!=="number"||th(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ec=Array.isArray;function Do(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ki(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function a0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(ec(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ki(n)}}function E_(t,e){var n=ki(e.value),r=ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function o0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function S_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function np(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?S_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cd,P_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ec(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H2=["Webkit","ms","Moz","O"];Object.keys(cc).forEach(function(t){H2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cc[e]=cc[t]})});function I_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cc.hasOwnProperty(t)&&cc[t]?(""+e).trim():e+"px"}function C_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=I_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var q2=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rp(t,e){if(e){if(q2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=null;function Ag(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ap=null,Mo=null,Oo=null;function l0(t){if(t=lu(t)){if(typeof ap!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=rf(e),ap(t.stateNode,t.type,e))}}function z_(t){Mo?Oo?Oo.push(t):Oo=[t]:Mo=t}function A_(){if(Mo){var t=Mo,e=Oo;if(Oo=Mo=null,l0(t),e)for(t=0;t<e.length;t++)l0(e[t])}}function R_(t,e){return t(e)}function L_(){}var om=!1;function D_(t,e,n){if(om)return t(e,n);om=!0;try{return R_(t,e,n)}finally{om=!1,(Mo!==null||Oo!==null)&&(L_(),A_())}}function Sc(t,e){var n=t.stateNode;if(n===null)return null;var r=rf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var op=!1;if(Ss)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){op=!0}}),window.addEventListener("test",Hl,Hl),window.removeEventListener("test",Hl,Hl)}catch{op=!1}function Z2(t,e,n,r,s,o,l,h,f){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(g){this.onError(g)}}var uc=!1,nh=null,rh=!1,lp=null,K2={onError:function(t){uc=!0,nh=t}};function G2(t,e,n,r,s,o,l,h,f){uc=!1,nh=null,Z2.apply(K2,arguments)}function Q2(t,e,n,r,s,o,l,h,f){if(G2.apply(this,arguments),uc){if(uc){var m=nh;uc=!1,nh=null}else throw Error(ae(198));rh||(rh=!0,lp=m)}}function Da(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function M_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c0(t){if(Da(t)!==t)throw Error(ae(188))}function Y2(t){var e=t.alternate;if(!e){if(e=Da(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return c0(s),t;if(o===r)return c0(s),e;o=o.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,r=o;break}if(h===r){l=!0,r=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,r=s;break}if(h===r){l=!0,r=o,n=s;break}h=h.sibling}if(!l)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function O_(t){return t=Y2(t),t!==null?V_(t):null}function V_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V_(t);if(e!==null)return e;t=t.sibling}return null}var U_=Fn.unstable_scheduleCallback,u0=Fn.unstable_cancelCallback,J2=Fn.unstable_shouldYield,X2=Fn.unstable_requestPaint,_t=Fn.unstable_now,eT=Fn.unstable_getCurrentPriorityLevel,Rg=Fn.unstable_ImmediatePriority,B_=Fn.unstable_UserBlockingPriority,sh=Fn.unstable_NormalPriority,tT=Fn.unstable_LowPriority,F_=Fn.unstable_IdlePriority,Xh=null,Fr=null;function nT(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Xh,t,void 0,(t.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:iT,rT=Math.log,sT=Math.LN2;function iT(t){return t>>>=0,t===0?32:31-(rT(t)/sT|0)|0}var ud=64,dd=4194304;function tc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?r=tc(h):(o&=l,o!==0&&(r=tc(o)))}else l=n&~s,l!==0?r=tc(l):o!==0&&(r=tc(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yr(e),s=1<<n,r|=t[n],e&=~s;return r}function aT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-yr(o),h=1<<l,f=s[l];f===-1?(!(h&n)||h&r)&&(s[l]=aT(h,e)):f<=e&&(t.expiredLanes|=h),o&=~h}}function cp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function W_(){var t=ud;return ud<<=1,!(ud&4194240)&&(ud=64),t}function lm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function au(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yr(e),t[e]=n}function lT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yr(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function Lg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Xe=0;function $_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var H_,Dg,q_,Z_,K_,up=!1,hd=[],di=null,hi=null,fi=null,Pc=new Map,Ic=new Map,ei=[],cT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d0(t,e){switch(t){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(e.pointerId)}}function ql(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=lu(e),e!==null&&Dg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function uT(t,e,n,r,s){switch(e){case"focusin":return di=ql(di,t,e,n,r,s),!0;case"dragenter":return hi=ql(hi,t,e,n,r,s),!0;case"mouseover":return fi=ql(fi,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return Pc.set(o,ql(Pc.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ic.set(o,ql(Ic.get(o)||null,t,e,n,r,s)),!0}return!1}function G_(t){var e=ca(t.target);if(e!==null){var n=Da(e);if(n!==null){if(e=n.tag,e===13){if(e=M_(n),e!==null){t.blockedOn=e,K_(t.priority,function(){q_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ld(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ip=r,n.target.dispatchEvent(r),ip=null}else return e=lu(n),e!==null&&Dg(e),t.blockedOn=n,!1;e.shift()}return!0}function h0(t,e,n){Ld(t)&&n.delete(e)}function dT(){up=!1,di!==null&&Ld(di)&&(di=null),hi!==null&&Ld(hi)&&(hi=null),fi!==null&&Ld(fi)&&(fi=null),Pc.forEach(h0),Ic.forEach(h0)}function Zl(t,e){t.blockedOn===e&&(t.blockedOn=null,up||(up=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,dT)))}function Cc(t){function e(s){return Zl(s,t)}if(0<hd.length){Zl(hd[0],t);for(var n=1;n<hd.length;n++){var r=hd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(di!==null&&Zl(di,t),hi!==null&&Zl(hi,t),fi!==null&&Zl(fi,t),Pc.forEach(e),Ic.forEach(e),n=0;n<ei.length;n++)r=ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)G_(n),n.blockedOn===null&&ei.shift()}var Vo=Ms.ReactCurrentBatchConfig,ah=!0;function hT(t,e,n,r){var s=Xe,o=Vo.transition;Vo.transition=null;try{Xe=1,Mg(t,e,n,r)}finally{Xe=s,Vo.transition=o}}function fT(t,e,n,r){var s=Xe,o=Vo.transition;Vo.transition=null;try{Xe=4,Mg(t,e,n,r)}finally{Xe=s,Vo.transition=o}}function Mg(t,e,n,r){if(ah){var s=dp(t,e,n,r);if(s===null)xm(t,e,r,oh,n),d0(t,r);else if(uT(s,t,e,n,r))r.stopPropagation();else if(d0(t,r),e&4&&-1<cT.indexOf(t)){for(;s!==null;){var o=lu(s);if(o!==null&&H_(o),o=dp(t,e,n,r),o===null&&xm(t,e,r,oh,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else xm(t,e,r,null,n)}}var oh=null;function dp(t,e,n,r){if(oh=null,t=Ag(r),t=ca(t),t!==null)if(e=Da(t),e===null)t=null;else if(n=e.tag,n===13){if(t=M_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oh=t,null}function Q_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eT()){case Rg:return 1;case B_:return 4;case sh:case tT:return 16;case F_:return 536870912;default:return 16}default:return 16}}var oi=null,Og=null,Dd=null;function Y_(){if(Dd)return Dd;var t,e=Og,n=e.length,r,s="value"in oi?oi.value:oi.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===s[o-r];r++);return Dd=s.slice(t,1<r?1-r:void 0)}function Md(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fd(){return!0}function f0(){return!1}function $n(t){function e(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fd:f0,this.isPropagationStopped=f0,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),e}var dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vg=$n(dl),ou=ht({},dl,{view:0,detail:0}),mT=$n(ou),cm,um,Kl,ef=ht({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kl&&(Kl&&t.type==="mousemove"?(cm=t.screenX-Kl.screenX,um=t.screenY-Kl.screenY):um=cm=0,Kl=t),cm)},movementY:function(t){return"movementY"in t?t.movementY:um}}),m0=$n(ef),pT=ht({},ef,{dataTransfer:0}),gT=$n(pT),yT=ht({},ou,{relatedTarget:0}),dm=$n(yT),xT=ht({},dl,{animationName:0,elapsedTime:0,pseudoElement:0}),vT=$n(xT),wT=ht({},dl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_T=$n(wT),bT=ht({},dl,{data:0}),p0=$n(bT),jT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kT[t])?!!e[t]:!1}function Ug(){return TT}var ET=ht({},ou,{key:function(t){if(t.key){var e=jT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Md(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ug,charCode:function(t){return t.type==="keypress"?Md(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Md(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ST=$n(ET),PT=ht({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g0=$n(PT),IT=ht({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ug}),CT=$n(IT),zT=ht({},dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),AT=$n(zT),RT=ht({},ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LT=$n(RT),DT=[9,13,27,32],Bg=Ss&&"CompositionEvent"in window,dc=null;Ss&&"documentMode"in document&&(dc=document.documentMode);var MT=Ss&&"TextEvent"in window&&!dc,J_=Ss&&(!Bg||dc&&8<dc&&11>=dc),y0=" ",x0=!1;function X_(t,e){switch(t){case"keyup":return DT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ko=!1;function OT(t,e){switch(t){case"compositionend":return eb(e);case"keypress":return e.which!==32?null:(x0=!0,y0);case"textInput":return t=e.data,t===y0&&x0?null:t;default:return null}}function VT(t,e){if(ko)return t==="compositionend"||!Bg&&X_(t,e)?(t=Y_(),Dd=Og=oi=null,ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J_&&e.locale!=="ko"?null:e.data;default:return null}}var UT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UT[t.type]:e==="textarea"}function tb(t,e,n,r){z_(r),e=lh(e,"onChange"),0<e.length&&(n=new Vg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hc=null,zc=null;function BT(t){hb(t,0)}function tf(t){var e=So(t);if(k_(e))return t}function FT(t,e){if(t==="change")return e}var nb=!1;if(Ss){var hm;if(Ss){var fm="oninput"in document;if(!fm){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),fm=typeof w0.oninput=="function"}hm=fm}else hm=!1;nb=hm&&(!document.documentMode||9<document.documentMode)}function _0(){hc&&(hc.detachEvent("onpropertychange",rb),zc=hc=null)}function rb(t){if(t.propertyName==="value"&&tf(zc)){var e=[];tb(e,zc,t,Ag(t)),D_(BT,e)}}function WT(t,e,n){t==="focusin"?(_0(),hc=e,zc=n,hc.attachEvent("onpropertychange",rb)):t==="focusout"&&_0()}function $T(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tf(zc)}function HT(t,e){if(t==="click")return tf(e)}function qT(t,e){if(t==="input"||t==="change")return tf(e)}function ZT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wr=typeof Object.is=="function"?Object.is:ZT;function Ac(t,e){if(wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zm.call(e,s)||!wr(t[s],e[s]))return!1}return!0}function b0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j0(t,e){var n=b0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b0(n)}}function sb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ib(){for(var t=window,e=th();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=th(t.document)}return e}function Fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KT(t){var e=ib(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sb(n.ownerDocument.documentElement,n)){if(r!==null&&Fg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=j0(n,o);var l=j0(n,r);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GT=Ss&&"documentMode"in document&&11>=document.documentMode,To=null,hp=null,fc=null,fp=!1;function N0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fp||To==null||To!==th(r)||(r=To,"selectionStart"in r&&Fg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fc&&Ac(fc,r)||(fc=r,r=lh(hp,"onSelect"),0<r.length&&(e=new Vg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=To)))}function md(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},mm={},ab={};Ss&&(ab=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function nf(t){if(mm[t])return mm[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ab)return mm[t]=e[n];return t}var ob=nf("animationend"),lb=nf("animationiteration"),cb=nf("animationstart"),ub=nf("transitionend"),db=new Map,k0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(t,e){db.set(t,e),La(e,[t])}for(var pm=0;pm<k0.length;pm++){var gm=k0[pm],QT=gm.toLowerCase(),YT=gm[0].toUpperCase()+gm.slice(1);Li(QT,"on"+YT)}Li(ob,"onAnimationEnd");Li(lb,"onAnimationIteration");Li(cb,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(ub,"onTransitionEnd");Ko("onMouseEnter",["mouseout","mouseover"]);Ko("onMouseLeave",["mouseout","mouseover"]);Ko("onPointerEnter",["pointerout","pointerover"]);Ko("onPointerLeave",["pointerout","pointerover"]);La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));La("onBeforeInput",["compositionend","keypress","textInput","paste"]);La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("cancel close invalid load scroll toggle".split(" ").concat(nc));function T0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Q2(r,e,void 0,t),t.currentTarget=null}function hb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var h=r[l],f=h.instance,m=h.currentTarget;if(h=h.listener,f!==o&&s.isPropagationStopped())break e;T0(s,h,m),o=f}else for(l=0;l<r.length;l++){if(h=r[l],f=h.instance,m=h.currentTarget,h=h.listener,f!==o&&s.isPropagationStopped())break e;T0(s,h,m),o=f}}}if(rh)throw t=lp,rh=!1,lp=null,t}function st(t,e){var n=e[xp];n===void 0&&(n=e[xp]=new Set);var r=t+"__bubble";n.has(r)||(fb(e,t,2,!1),n.add(r))}function ym(t,e,n){var r=0;e&&(r|=4),fb(n,t,r,e)}var pd="_reactListening"+Math.random().toString(36).slice(2);function Rc(t){if(!t[pd]){t[pd]=!0,w_.forEach(function(n){n!=="selectionchange"&&(JT.has(n)||ym(n,!1,t),ym(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pd]||(e[pd]=!0,ym("selectionchange",!1,e))}}function fb(t,e,n,r){switch(Q_(e)){case 1:var s=hT;break;case 4:s=fT;break;default:s=Mg}n=s.bind(null,e,n,t),s=void 0,!op||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xm(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;l=l.return}for(;h!==null;){if(l=ca(h),l===null)return;if(f=l.tag,f===5||f===6){r=o=l;continue e}h=h.parentNode}}r=r.return}D_(function(){var m=o,g=Ag(n),x=[];e:{var _=db.get(t);if(_!==void 0){var T=Vg,k=t;switch(t){case"keypress":if(Md(n)===0)break e;case"keydown":case"keyup":T=ST;break;case"focusin":k="focus",T=dm;break;case"focusout":k="blur",T=dm;break;case"beforeblur":case"afterblur":T=dm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=m0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=gT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=CT;break;case ob:case lb:case cb:T=vT;break;case ub:T=AT;break;case"scroll":T=mT;break;case"wheel":T=LT;break;case"copy":case"cut":case"paste":T=_T;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=g0}var C=(e&4)!==0,A=!C&&t==="scroll",E=C?_!==null?_+"Capture":null:_;C=[];for(var S=m,I;S!==null;){I=S;var H=I.stateNode;if(I.tag===5&&H!==null&&(I=H,E!==null&&(H=Sc(S,E),H!=null&&C.push(Lc(S,H,I)))),A)break;S=S.return}0<C.length&&(_=new T(_,k,null,n,g),x.push({event:_,listeners:C}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&n!==ip&&(k=n.relatedTarget||n.fromElement)&&(ca(k)||k[Ps]))break e;if((T||_)&&(_=g.window===g?g:(_=g.ownerDocument)?_.defaultView||_.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=m,k=k?ca(k):null,k!==null&&(A=Da(k),k!==A||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=m),T!==k)){if(C=m0,H="onMouseLeave",E="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(C=g0,H="onPointerLeave",E="onPointerEnter",S="pointer"),A=T==null?_:So(T),I=k==null?_:So(k),_=new C(H,S+"leave",T,n,g),_.target=A,_.relatedTarget=I,H=null,ca(g)===m&&(C=new C(E,S+"enter",k,n,g),C.target=I,C.relatedTarget=A,H=C),A=H,T&&k)t:{for(C=T,E=k,S=0,I=C;I;I=yo(I))S++;for(I=0,H=E;H;H=yo(H))I++;for(;0<S-I;)C=yo(C),S--;for(;0<I-S;)E=yo(E),I--;for(;S--;){if(C===E||E!==null&&C===E.alternate)break t;C=yo(C),E=yo(E)}C=null}else C=null;T!==null&&E0(x,_,T,C,!1),k!==null&&A!==null&&E0(x,A,k,C,!0)}}e:{if(_=m?So(m):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var O=FT;else if(v0(_))if(nb)O=qT;else{O=$T;var R=WT}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(O=HT);if(O&&(O=O(t,m))){tb(x,O,n,g);break e}R&&R(t,_,m),t==="focusout"&&(R=_._wrapperState)&&R.controlled&&_.type==="number"&&ep(_,"number",_.value)}switch(R=m?So(m):window,t){case"focusin":(v0(R)||R.contentEditable==="true")&&(To=R,hp=m,fc=null);break;case"focusout":fc=hp=To=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,N0(x,n,g);break;case"selectionchange":if(GT)break;case"keydown":case"keyup":N0(x,n,g)}var N;if(Bg)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ko?X_(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(J_&&n.locale!=="ko"&&(ko||b!=="onCompositionStart"?b==="onCompositionEnd"&&ko&&(N=Y_()):(oi=g,Og="value"in oi?oi.value:oi.textContent,ko=!0)),R=lh(m,b),0<R.length&&(b=new p0(b,t,null,n,g),x.push({event:b,listeners:R}),N?b.data=N:(N=eb(n),N!==null&&(b.data=N)))),(N=MT?OT(t,n):VT(t,n))&&(m=lh(m,"onBeforeInput"),0<m.length&&(g=new p0("onBeforeInput","beforeinput",null,n,g),x.push({event:g,listeners:m}),g.data=N))}hb(x,e)})}function Lc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Sc(t,n),o!=null&&r.unshift(Lc(t,o,s)),o=Sc(t,e),o!=null&&r.push(Lc(t,o,s))),t=t.return}return r}function yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function E0(t,e,n,r,s){for(var o=e._reactName,l=[];n!==null&&n!==r;){var h=n,f=h.alternate,m=h.stateNode;if(f!==null&&f===r)break;h.tag===5&&m!==null&&(h=m,s?(f=Sc(n,o),f!=null&&l.unshift(Lc(n,f,h))):s||(f=Sc(n,o),f!=null&&l.push(Lc(n,f,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var XT=/\r\n?/g,eE=/\u0000|\uFFFD/g;function S0(t){return(typeof t=="string"?t:""+t).replace(XT,`
`).replace(eE,"")}function gd(t,e,n){if(e=S0(e),S0(t)!==e&&n)throw Error(ae(425))}function ch(){}var mp=null,pp=null;function gp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yp=typeof setTimeout=="function"?setTimeout:void 0,tE=typeof clearTimeout=="function"?clearTimeout:void 0,P0=typeof Promise=="function"?Promise:void 0,nE=typeof queueMicrotask=="function"?queueMicrotask:typeof P0<"u"?function(t){return P0.resolve(null).then(t).catch(rE)}:yp;function rE(t){setTimeout(function(){throw t})}function vm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Cc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cc(e)}function mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function I0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hl=Math.random().toString(36).slice(2),Mr="__reactFiber$"+hl,Dc="__reactProps$"+hl,Ps="__reactContainer$"+hl,xp="__reactEvents$"+hl,sE="__reactListeners$"+hl,iE="__reactHandles$"+hl;function ca(t){var e=t[Mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ps]||n[Mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=I0(t);t!==null;){if(n=t[Mr])return n;t=I0(t)}return e}t=n,n=t.parentNode}return null}function lu(t){return t=t[Mr]||t[Ps],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function So(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function rf(t){return t[Dc]||null}var vp=[],Po=-1;function Di(t){return{current:t}}function at(t){0>Po||(t.current=vp[Po],vp[Po]=null,Po--)}function nt(t,e){Po++,vp[Po]=t.current,t.current=e}var Ti={},an=Di(Ti),En=Di(!1),wa=Ti;function Go(t,e){var n=t.type.contextTypes;if(!n)return Ti;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Sn(t){return t=t.childContextTypes,t!=null}function uh(){at(En),at(an)}function C0(t,e,n){if(an.current!==Ti)throw Error(ae(168));nt(an,e),nt(En,n)}function mb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,W2(t)||"Unknown",s));return ht({},n,r)}function dh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ti,wa=an.current,nt(an,t),nt(En,En.current),!0}function z0(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=mb(t,e,wa),r.__reactInternalMemoizedMergedChildContext=t,at(En),at(an),nt(an,t)):at(En),nt(En,n)}var ys=null,sf=!1,wm=!1;function pb(t){ys===null?ys=[t]:ys.push(t)}function aE(t){sf=!0,pb(t)}function Mi(){if(!wm&&ys!==null){wm=!0;var t=0,e=Xe;try{var n=ys;for(Xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ys=null,sf=!1}catch(s){throw ys!==null&&(ys=ys.slice(t+1)),U_(Rg,Mi),s}finally{Xe=e,wm=!1}}return null}var Io=[],Co=0,hh=null,fh=0,Jn=[],Xn=0,_a=null,xs=1,vs="";function ia(t,e){Io[Co++]=fh,Io[Co++]=hh,hh=t,fh=e}function gb(t,e,n){Jn[Xn++]=xs,Jn[Xn++]=vs,Jn[Xn++]=_a,_a=t;var r=xs;t=vs;var s=32-yr(r)-1;r&=~(1<<s),n+=1;var o=32-yr(e)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,xs=1<<32-yr(e)+s|n<<s|r,vs=o+t}else xs=1<<o|n<<s|r,vs=t}function Wg(t){t.return!==null&&(ia(t,1),gb(t,1,0))}function $g(t){for(;t===hh;)hh=Io[--Co],Io[Co]=null,fh=Io[--Co],Io[Co]=null;for(;t===_a;)_a=Jn[--Xn],Jn[Xn]=null,vs=Jn[--Xn],Jn[Xn]=null,xs=Jn[--Xn],Jn[Xn]=null}var Bn=null,Mn=null,ot=!1,pr=null;function yb(t,e){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function A0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Mn=mi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_a!==null?{id:xs,overflow:vs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Mn=null,!0):!1;default:return!1}}function wp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _p(t){if(ot){var e=Mn;if(e){var n=e;if(!A0(t,e)){if(wp(t))throw Error(ae(418));e=mi(n.nextSibling);var r=Bn;e&&A0(t,e)?yb(r,n):(t.flags=t.flags&-4097|2,ot=!1,Bn=t)}}else{if(wp(t))throw Error(ae(418));t.flags=t.flags&-4097|2,ot=!1,Bn=t}}}function R0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function yd(t){if(t!==Bn)return!1;if(!ot)return R0(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gp(t.type,t.memoizedProps)),e&&(e=Mn)){if(wp(t))throw xb(),Error(ae(418));for(;e;)yb(t,e),e=mi(e.nextSibling)}if(R0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=mi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=Bn?mi(t.stateNode.nextSibling):null;return!0}function xb(){for(var t=Mn;t;)t=mi(t.nextSibling)}function Qo(){Mn=Bn=null,ot=!1}function Hg(t){pr===null?pr=[t]:pr.push(t)}var oE=Ms.ReactCurrentBatchConfig;function Gl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function xd(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L0(t){var e=t._init;return e(t._payload)}function vb(t){function e(E,S){if(t){var I=E.deletions;I===null?(E.deletions=[S],E.flags|=16):I.push(S)}}function n(E,S){if(!t)return null;for(;S!==null;)e(E,S),S=S.sibling;return null}function r(E,S){for(E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function s(E,S){return E=xi(E,S),E.index=0,E.sibling=null,E}function o(E,S,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<S?(E.flags|=2,S):I):(E.flags|=2,S)):(E.flags|=1048576,S)}function l(E){return t&&E.alternate===null&&(E.flags|=2),E}function h(E,S,I,H){return S===null||S.tag!==6?(S=Em(I,E.mode,H),S.return=E,S):(S=s(S,I),S.return=E,S)}function f(E,S,I,H){var O=I.type;return O===No?g(E,S,I.props.children,H,I.key):S!==null&&(S.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Js&&L0(O)===S.type)?(H=s(S,I.props),H.ref=Gl(E,S,I),H.return=E,H):(H=$d(I.type,I.key,I.props,null,E.mode,H),H.ref=Gl(E,S,I),H.return=E,H)}function m(E,S,I,H){return S===null||S.tag!==4||S.stateNode.containerInfo!==I.containerInfo||S.stateNode.implementation!==I.implementation?(S=Sm(I,E.mode,H),S.return=E,S):(S=s(S,I.children||[]),S.return=E,S)}function g(E,S,I,H,O){return S===null||S.tag!==7?(S=pa(I,E.mode,H,O),S.return=E,S):(S=s(S,I),S.return=E,S)}function x(E,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Em(""+S,E.mode,I),S.return=E,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case od:return I=$d(S.type,S.key,S.props,null,E.mode,I),I.ref=Gl(E,null,S),I.return=E,I;case jo:return S=Sm(S,E.mode,I),S.return=E,S;case Js:var H=S._init;return x(E,H(S._payload),I)}if(ec(S)||$l(S))return S=pa(S,E.mode,I,null),S.return=E,S;xd(E,S)}return null}function _(E,S,I,H){var O=S!==null?S.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:h(E,S,""+I,H);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case od:return I.key===O?f(E,S,I,H):null;case jo:return I.key===O?m(E,S,I,H):null;case Js:return O=I._init,_(E,S,O(I._payload),H)}if(ec(I)||$l(I))return O!==null?null:g(E,S,I,H,null);xd(E,I)}return null}function T(E,S,I,H,O){if(typeof H=="string"&&H!==""||typeof H=="number")return E=E.get(I)||null,h(S,E,""+H,O);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case od:return E=E.get(H.key===null?I:H.key)||null,f(S,E,H,O);case jo:return E=E.get(H.key===null?I:H.key)||null,m(S,E,H,O);case Js:var R=H._init;return T(E,S,I,R(H._payload),O)}if(ec(H)||$l(H))return E=E.get(I)||null,g(S,E,H,O,null);xd(S,H)}return null}function k(E,S,I,H){for(var O=null,R=null,N=S,b=S=0,z=null;N!==null&&b<I.length;b++){N.index>b?(z=N,N=null):z=N.sibling;var M=_(E,N,I[b],H);if(M===null){N===null&&(N=z);break}t&&N&&M.alternate===null&&e(E,N),S=o(M,S,b),R===null?O=M:R.sibling=M,R=M,N=z}if(b===I.length)return n(E,N),ot&&ia(E,b),O;if(N===null){for(;b<I.length;b++)N=x(E,I[b],H),N!==null&&(S=o(N,S,b),R===null?O=N:R.sibling=N,R=N);return ot&&ia(E,b),O}for(N=r(E,N);b<I.length;b++)z=T(N,E,b,I[b],H),z!==null&&(t&&z.alternate!==null&&N.delete(z.key===null?b:z.key),S=o(z,S,b),R===null?O=z:R.sibling=z,R=z);return t&&N.forEach(function(V){return e(E,V)}),ot&&ia(E,b),O}function C(E,S,I,H){var O=$l(I);if(typeof O!="function")throw Error(ae(150));if(I=O.call(I),I==null)throw Error(ae(151));for(var R=O=null,N=S,b=S=0,z=null,M=I.next();N!==null&&!M.done;b++,M=I.next()){N.index>b?(z=N,N=null):z=N.sibling;var V=_(E,N,M.value,H);if(V===null){N===null&&(N=z);break}t&&N&&V.alternate===null&&e(E,N),S=o(V,S,b),R===null?O=V:R.sibling=V,R=V,N=z}if(M.done)return n(E,N),ot&&ia(E,b),O;if(N===null){for(;!M.done;b++,M=I.next())M=x(E,M.value,H),M!==null&&(S=o(M,S,b),R===null?O=M:R.sibling=M,R=M);return ot&&ia(E,b),O}for(N=r(E,N);!M.done;b++,M=I.next())M=T(N,E,b,M.value,H),M!==null&&(t&&M.alternate!==null&&N.delete(M.key===null?b:M.key),S=o(M,S,b),R===null?O=M:R.sibling=M,R=M);return t&&N.forEach(function($){return e(E,$)}),ot&&ia(E,b),O}function A(E,S,I,H){if(typeof I=="object"&&I!==null&&I.type===No&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case od:e:{for(var O=I.key,R=S;R!==null;){if(R.key===O){if(O=I.type,O===No){if(R.tag===7){n(E,R.sibling),S=s(R,I.props.children),S.return=E,E=S;break e}}else if(R.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Js&&L0(O)===R.type){n(E,R.sibling),S=s(R,I.props),S.ref=Gl(E,R,I),S.return=E,E=S;break e}n(E,R);break}else e(E,R);R=R.sibling}I.type===No?(S=pa(I.props.children,E.mode,H,I.key),S.return=E,E=S):(H=$d(I.type,I.key,I.props,null,E.mode,H),H.ref=Gl(E,S,I),H.return=E,E=H)}return l(E);case jo:e:{for(R=I.key;S!==null;){if(S.key===R)if(S.tag===4&&S.stateNode.containerInfo===I.containerInfo&&S.stateNode.implementation===I.implementation){n(E,S.sibling),S=s(S,I.children||[]),S.return=E,E=S;break e}else{n(E,S);break}else e(E,S);S=S.sibling}S=Sm(I,E.mode,H),S.return=E,E=S}return l(E);case Js:return R=I._init,A(E,S,R(I._payload),H)}if(ec(I))return k(E,S,I,H);if($l(I))return C(E,S,I,H);xd(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,S!==null&&S.tag===6?(n(E,S.sibling),S=s(S,I),S.return=E,E=S):(n(E,S),S=Em(I,E.mode,H),S.return=E,E=S),l(E)):n(E,S)}return A}var Yo=vb(!0),wb=vb(!1),mh=Di(null),ph=null,zo=null,qg=null;function Zg(){qg=zo=ph=null}function Kg(t){var e=mh.current;at(mh),t._currentValue=e}function bp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Uo(t,e){ph=t,qg=zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function sr(t){var e=t._currentValue;if(qg!==t)if(t={context:t,memoizedValue:e,next:null},zo===null){if(ph===null)throw Error(ae(308));zo=t,ph.dependencies={lanes:0,firstContext:t}}else zo=zo.next=t;return e}var ua=null;function Gg(t){ua===null?ua=[t]:ua.push(t)}function _b(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Is(t,r)}function Is(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xs=!1;function Qg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function js(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Is(t,n)}return s=r.interleaved,s===null?(e.next=e,Gg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Is(t,n)}function Od(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lg(t,n)}}function D0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gh(t,e,n,r){var s=t.updateQueue;Xs=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var f=h,m=f.next;f.next=null,l===null?o=m:l.next=m,l=f;var g=t.alternate;g!==null&&(g=g.updateQueue,h=g.lastBaseUpdate,h!==l&&(h===null?g.firstBaseUpdate=m:h.next=m,g.lastBaseUpdate=f))}if(o!==null){var x=s.baseState;l=0,g=m=f=null,h=o;do{var _=h.lane,T=h.eventTime;if((r&_)===_){g!==null&&(g=g.next={eventTime:T,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var k=t,C=h;switch(_=e,T=n,C.tag){case 1:if(k=C.payload,typeof k=="function"){x=k.call(T,x,_);break e}x=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,_=typeof k=="function"?k.call(T,x,_):k,_==null)break e;x=ht({},x,_);break e;case 2:Xs=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[h]:_.push(h))}else T={eventTime:T,lane:_,tag:h.tag,payload:h.payload,callback:h.callback,next:null},g===null?(m=g=T,f=x):g=g.next=T,l|=_;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;_=h,h=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(g===null&&(f=x),s.baseState=f,s.firstBaseUpdate=m,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);ja|=l,t.lanes=l,t.memoizedState=x}}function M0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var cu={},Wr=Di(cu),Mc=Di(cu),Oc=Di(cu);function da(t){if(t===cu)throw Error(ae(174));return t}function Yg(t,e){switch(nt(Oc,e),nt(Mc,t),nt(Wr,cu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:np(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=np(e,t)}at(Wr),nt(Wr,e)}function Jo(){at(Wr),at(Mc),at(Oc)}function jb(t){da(Oc.current);var e=da(Wr.current),n=np(e,t.type);e!==n&&(nt(Mc,t),nt(Wr,n))}function Jg(t){Mc.current===t&&(at(Wr),at(Mc))}var lt=Di(0);function yh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _m=[];function Xg(){for(var t=0;t<_m.length;t++)_m[t]._workInProgressVersionPrimary=null;_m.length=0}var Vd=Ms.ReactCurrentDispatcher,bm=Ms.ReactCurrentBatchConfig,ba=0,dt=null,zt=null,Bt=null,xh=!1,mc=!1,Vc=0,lE=0;function Xt(){throw Error(ae(321))}function ey(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wr(t[n],e[n]))return!1;return!0}function ty(t,e,n,r,s,o){if(ba=o,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vd.current=t===null||t.memoizedState===null?hE:fE,t=n(r,s),mc){o=0;do{if(mc=!1,Vc=0,25<=o)throw Error(ae(301));o+=1,Bt=zt=null,e.updateQueue=null,Vd.current=mE,t=n(r,s)}while(mc)}if(Vd.current=vh,e=zt!==null&&zt.next!==null,ba=0,Bt=zt=dt=null,xh=!1,e)throw Error(ae(300));return t}function ny(){var t=Vc!==0;return Vc=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?dt.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function ir(){if(zt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var e=Bt===null?dt.memoizedState:Bt.next;if(e!==null)Bt=e,zt=t;else{if(t===null)throw Error(ae(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Bt===null?dt.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Uc(t,e){return typeof e=="function"?e(t):e}function jm(t){var e=ir(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=zt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var h=l=null,f=null,m=o;do{var g=m.lane;if((ba&g)===g)f!==null&&(f=f.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var x={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};f===null?(h=f=x,l=r):f=f.next=x,dt.lanes|=g,ja|=g}m=m.next}while(m!==null&&m!==o);f===null?l=r:f.next=h,wr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=f,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,dt.lanes|=o,ja|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nm(t){var e=ir(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);wr(o,e.memoizedState)||(Tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Nb(){}function kb(t,e){var n=dt,r=ir(),s=e(),o=!wr(r.memoizedState,s);if(o&&(r.memoizedState=s,Tn=!0),r=r.queue,ry(Sb.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Bc(9,Eb.bind(null,n,r,s,e),void 0,null),Wt===null)throw Error(ae(349));ba&30||Tb(n,e,s)}return s}function Tb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Eb(t,e,n,r){e.value=n,e.getSnapshot=r,Pb(e)&&Ib(t)}function Sb(t,e,n){return n(function(){Pb(e)&&Ib(t)})}function Pb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wr(t,n)}catch{return!0}}function Ib(t){var e=Is(t,1);e!==null&&xr(e,t,1,-1)}function O0(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:t},e.queue=t,t=t.dispatch=dE.bind(null,dt,t),[e.memoizedState,t]}function Bc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Cb(){return ir().memoizedState}function Ud(t,e,n,r){var s=Lr();dt.flags|=t,s.memoizedState=Bc(1|e,n,void 0,r===void 0?null:r)}function af(t,e,n,r){var s=ir();r=r===void 0?null:r;var o=void 0;if(zt!==null){var l=zt.memoizedState;if(o=l.destroy,r!==null&&ey(r,l.deps)){s.memoizedState=Bc(e,n,o,r);return}}dt.flags|=t,s.memoizedState=Bc(1|e,n,o,r)}function V0(t,e){return Ud(8390656,8,t,e)}function ry(t,e){return af(2048,8,t,e)}function zb(t,e){return af(4,2,t,e)}function Ab(t,e){return af(4,4,t,e)}function Rb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lb(t,e,n){return n=n!=null?n.concat([t]):null,af(4,4,Rb.bind(null,e,t),n)}function sy(){}function Db(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ey(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mb(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ey(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ob(t,e,n){return ba&21?(wr(n,e)||(n=W_(),dt.lanes|=n,ja|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function cE(t,e){var n=Xe;Xe=n!==0&&4>n?n:4,t(!0);var r=bm.transition;bm.transition={};try{t(!1),e()}finally{Xe=n,bm.transition=r}}function Vb(){return ir().memoizedState}function uE(t,e,n){var r=yi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ub(t))Bb(e,n);else if(n=_b(t,e,n,r),n!==null){var s=mn();xr(n,t,r,s),Fb(n,e,r)}}function dE(t,e,n){var r=yi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ub(t))Bb(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,wr(h,l)){var f=e.interleaved;f===null?(s.next=s,Gg(e)):(s.next=f.next,f.next=s),e.interleaved=s;return}}catch{}finally{}n=_b(t,e,s,r),n!==null&&(s=mn(),xr(n,t,r,s),Fb(n,e,r))}}function Ub(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function Bb(t,e){mc=xh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lg(t,n)}}var vh={readContext:sr,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},hE={readContext:sr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:sr,useEffect:V0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ud(4194308,4,Rb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ud(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ud(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uE.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:O0,useDebugValue:sy,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=O0(!1),e=t[0];return t=cE.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,s=Lr();if(ot){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Wt===null)throw Error(ae(349));ba&30||Tb(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,V0(Sb.bind(null,r,o,t),[t]),r.flags|=2048,Bc(9,Eb.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Lr(),e=Wt.identifierPrefix;if(ot){var n=vs,r=xs;n=(r&~(1<<32-yr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fE={readContext:sr,useCallback:Db,useContext:sr,useEffect:ry,useImperativeHandle:Lb,useInsertionEffect:zb,useLayoutEffect:Ab,useMemo:Mb,useReducer:jm,useRef:Cb,useState:function(){return jm(Uc)},useDebugValue:sy,useDeferredValue:function(t){var e=ir();return Ob(e,zt.memoizedState,t)},useTransition:function(){var t=jm(Uc)[0],e=ir().memoizedState;return[t,e]},useMutableSource:Nb,useSyncExternalStore:kb,useId:Vb,unstable_isNewReconciler:!1},mE={readContext:sr,useCallback:Db,useContext:sr,useEffect:ry,useImperativeHandle:Lb,useInsertionEffect:zb,useLayoutEffect:Ab,useMemo:Mb,useReducer:Nm,useRef:Cb,useState:function(){return Nm(Uc)},useDebugValue:sy,useDeferredValue:function(t){var e=ir();return zt===null?e.memoizedState=t:Ob(e,zt.memoizedState,t)},useTransition:function(){var t=Nm(Uc)[0],e=ir().memoizedState;return[t,e]},useMutableSource:Nb,useSyncExternalStore:kb,useId:Vb,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var of={isMounted:function(t){return(t=t._reactInternals)?Da(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mn(),s=yi(t),o=js(r,s);o.payload=e,n!=null&&(o.callback=n),e=pi(t,o,s),e!==null&&(xr(e,t,s,r),Od(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mn(),s=yi(t),o=js(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=pi(t,o,s),e!==null&&(xr(e,t,s,r),Od(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mn(),r=yi(t),s=js(n,r);s.tag=2,e!=null&&(s.callback=e),e=pi(t,s,r),e!==null&&(xr(e,t,r,n),Od(e,t,r))}};function U0(t,e,n,r,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ac(n,r)||!Ac(s,o):!0}function Wb(t,e,n){var r=!1,s=Ti,o=e.contextType;return typeof o=="object"&&o!==null?o=sr(o):(s=Sn(e)?wa:an.current,r=e.contextTypes,o=(r=r!=null)?Go(t,s):Ti),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=of,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function B0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&of.enqueueReplaceState(e,e.state,null)}function Np(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Qg(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=sr(o):(o=Sn(e)?wa:an.current,s.context=Go(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(jp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&of.enqueueReplaceState(s,s.state,null),gh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xo(t,e){try{var n="",r=e;do n+=F2(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function km(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pE=typeof WeakMap=="function"?WeakMap:Map;function $b(t,e,n){n=js(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_h||(_h=!0,Lp=r),kp(t,e)},n}function Hb(t,e,n){n=js(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){kp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){kp(t,e),typeof r!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function F0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=PE.bind(null,t,e,n),e.then(t,t))}function W0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=js(-1,1),e.tag=2,pi(n,e,1))),n.lanes|=1),t)}var gE=Ms.ReactCurrentOwner,Tn=!1;function fn(t,e,n,r){e.child=t===null?wb(e,null,n,r):Yo(e,t.child,n,r)}function H0(t,e,n,r,s){n=n.render;var o=e.ref;return Uo(e,s),r=ty(t,e,n,r,o,s),n=ny(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cs(t,e,s)):(ot&&n&&Wg(e),e.flags|=1,fn(t,e,r,s),e.child)}function q0(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!hy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,qb(t,e,o,r,s)):(t=$d(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ac,n(l,r)&&t.ref===e.ref)return Cs(t,e,s)}return e.flags|=1,t=xi(o,r),t.ref=e.ref,t.return=e,e.child=t}function qb(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Ac(o,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,Cs(t,e,s)}return Tp(t,e,n,r,s)}function Zb(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ro,Rn),Rn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(Ro,Rn),Rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,nt(Ro,Rn),Rn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,nt(Ro,Rn),Rn|=r;return fn(t,e,s,n),e.child}function Kb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tp(t,e,n,r,s){var o=Sn(n)?wa:an.current;return o=Go(e,o),Uo(e,s),n=ty(t,e,n,r,o,s),r=ny(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cs(t,e,s)):(ot&&r&&Wg(e),e.flags|=1,fn(t,e,n,s),e.child)}function Z0(t,e,n,r,s){if(Sn(n)){var o=!0;dh(e)}else o=!1;if(Uo(e,s),e.stateNode===null)Bd(t,e),Wb(e,n,r),Np(e,n,r,s),r=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var f=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=sr(m):(m=Sn(n)?wa:an.current,m=Go(e,m));var g=n.getDerivedStateFromProps,x=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==r||f!==m)&&B0(e,l,r,m),Xs=!1;var _=e.memoizedState;l.state=_,gh(e,r,l,s),f=e.memoizedState,h!==r||_!==f||En.current||Xs?(typeof g=="function"&&(jp(e,n,g,r),f=e.memoizedState),(h=Xs||U0(e,n,h,r,_,f,m))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),l.props=r,l.state=f,l.context=m,r=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,bb(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:fr(e.type,h),l.props=m,x=e.pendingProps,_=l.context,f=n.contextType,typeof f=="object"&&f!==null?f=sr(f):(f=Sn(n)?wa:an.current,f=Go(e,f));var T=n.getDerivedStateFromProps;(g=typeof T=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==x||_!==f)&&B0(e,l,r,f),Xs=!1,_=e.memoizedState,l.state=_,gh(e,r,l,s);var k=e.memoizedState;h!==x||_!==k||En.current||Xs?(typeof T=="function"&&(jp(e,n,T,r),k=e.memoizedState),(m=Xs||U0(e,n,m,r,_,k,f)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,k,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,k,f)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),l.props=r,l.state=k,l.context=f,r=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Ep(t,e,n,r,o,s)}function Ep(t,e,n,r,s,o){Kb(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&z0(e,n,!1),Cs(t,e,o);r=e.stateNode,gE.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Yo(e,t.child,null,o),e.child=Yo(e,null,h,o)):fn(t,e,h,o),e.memoizedState=r.state,s&&z0(e,n,!0),e.child}function Gb(t){var e=t.stateNode;e.pendingContext?C0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C0(t,e.context,!1),Yg(t,e.containerInfo)}function K0(t,e,n,r,s){return Qo(),Hg(s),e.flags|=256,fn(t,e,n,r),e.child}var Sp={dehydrated:null,treeContext:null,retryLane:0};function Pp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qb(t,e,n){var r=e.pendingProps,s=lt.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),nt(lt,s&1),t===null)return _p(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=uf(l,r,0,null),t=pa(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Pp(n),e.memoizedState=Sp,t):iy(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return yE(t,e,l,r,h,s,n);if(o){o=r.fallback,l=e.mode,s=t.child,h=s.sibling;var f={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=xi(s,f),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=xi(h,o):(o=pa(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?Pp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Sp,r}return o=t.child,t=o.sibling,r=xi(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function iy(t,e){return e=uf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vd(t,e,n,r){return r!==null&&Hg(r),Yo(e,t.child,null,n),t=iy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yE(t,e,n,r,s,o,l){if(n)return e.flags&256?(e.flags&=-257,r=km(Error(ae(422))),vd(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=uf({mode:"visible",children:r.children},s,0,null),o=pa(o,s,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Yo(e,t.child,null,l),e.child.memoizedState=Pp(l),e.memoizedState=Sp,o);if(!(e.mode&1))return vd(t,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(ae(419)),r=km(o,r,void 0),vd(t,e,l,r)}if(h=(l&t.childLanes)!==0,Tn||h){if(r=Wt,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Is(t,s),xr(r,t,s,-1))}return dy(),r=km(Error(ae(421))),vd(t,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=IE.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Mn=mi(s.nextSibling),Bn=e,ot=!0,pr=null,t!==null&&(Jn[Xn++]=xs,Jn[Xn++]=vs,Jn[Xn++]=_a,xs=t.id,vs=t.overflow,_a=e),e=iy(e,r.children),e.flags|=4096,e)}function G0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bp(t.return,e,n)}function Tm(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Yb(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(fn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&G0(t,n,e);else if(t.tag===19)G0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&yh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Tm(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&yh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Tm(e,!0,n,null,o);break;case"together":Tm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ja|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=xi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xE(t,e,n){switch(e.tag){case 3:Gb(e),Qo();break;case 5:jb(e);break;case 1:Sn(e.type)&&dh(e);break;case 4:Yg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nt(mh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?Qb(t,e,n):(nt(lt,lt.current&1),t=Cs(t,e,n),t!==null?t.sibling:null);nt(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nt(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,Zb(t,e,n)}return Cs(t,e,n)}var Jb,Ip,Xb,e1;Jb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ip=function(){};Xb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,da(Wr.current);var o=null;switch(n){case"input":s=Jm(t,s),r=Jm(t,r),o=[];break;case"select":s=ht({},s,{value:void 0}),r=ht({},r,{value:void 0}),o=[];break;case"textarea":s=tp(t,s),r=tp(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ch)}rp(n,r);var l;n=null;for(m in s)if(!r.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Tc.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in r){var f=r[m];if(h=s!=null?s[m]:void 0,r.hasOwnProperty(m)&&f!==h&&(f!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in f)f.hasOwnProperty(l)&&h[l]!==f[l]&&(n||(n={}),n[l]=f[l])}else n||(o||(o=[]),o.push(m,n)),n=f;else m==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(o=o||[]).push(m,f)):m==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(m,""+f):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Tc.hasOwnProperty(m)?(f!=null&&m==="onScroll"&&st("scroll",t),o||h===f||(o=[])):(o=o||[]).push(m,f))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};e1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ql(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function en(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vE(t,e,n){var r=e.pendingProps;switch($g(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(e),null;case 1:return Sn(e.type)&&uh(),en(e),null;case 3:return r=e.stateNode,Jo(),at(En),at(an),Xg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pr!==null&&(Op(pr),pr=null))),Ip(t,e),en(e),null;case 5:Jg(e);var s=da(Oc.current);if(n=e.type,t!==null&&e.stateNode!=null)Xb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return en(e),null}if(t=da(Wr.current),yd(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Mr]=e,r[Dc]=o,t=(e.mode&1)!==0,n){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(s=0;s<nc.length;s++)st(nc[s],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":s0(r,o),st("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},st("invalid",r);break;case"textarea":a0(r,o),st("invalid",r)}rp(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&gd(r.textContent,h,t),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&gd(r.textContent,h,t),s=["children",""+h]):Tc.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&st("scroll",r)}switch(n){case"input":ld(r),i0(r,o,!0);break;case"textarea":ld(r),o0(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ch)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=S_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Mr]=e,t[Dc]=r,Jb(t,e,!1,!1),e.stateNode=t;e:{switch(l=sp(n,r),n){case"dialog":st("cancel",t),st("close",t),s=r;break;case"iframe":case"object":case"embed":st("load",t),s=r;break;case"video":case"audio":for(s=0;s<nc.length;s++)st(nc[s],t);s=r;break;case"source":st("error",t),s=r;break;case"img":case"image":case"link":st("error",t),st("load",t),s=r;break;case"details":st("toggle",t),s=r;break;case"input":s0(t,r),s=Jm(t,r),st("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ht({},r,{value:void 0}),st("invalid",t);break;case"textarea":a0(t,r),s=tp(t,r),st("invalid",t);break;default:s=r}rp(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var f=h[o];o==="style"?C_(t,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&P_(t,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Ec(t,f):typeof f=="number"&&Ec(t,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tc.hasOwnProperty(o)?f!=null&&o==="onScroll"&&st("scroll",t):f!=null&&Pg(t,o,f,l))}switch(n){case"input":ld(t),i0(t,r,!1);break;case"textarea":ld(t),o0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ki(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Do(t,!!r.multiple,o,!1):r.defaultValue!=null&&Do(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ch)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return en(e),null;case 6:if(t&&e.stateNode!=null)e1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=da(Oc.current),da(Wr.current),yd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mr]=e,(o=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:gd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gd(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mr]=e,e.stateNode=r}return en(e),null;case 13:if(at(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Mn!==null&&e.mode&1&&!(e.flags&128))xb(),Qo(),e.flags|=98560,o=!1;else if(o=yd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ae(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ae(317));o[Mr]=e}else Qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;en(e),o=!1}else pr!==null&&(Op(pr),pr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Rt===0&&(Rt=3):dy())),e.updateQueue!==null&&(e.flags|=4),en(e),null);case 4:return Jo(),Ip(t,e),t===null&&Rc(e.stateNode.containerInfo),en(e),null;case 10:return Kg(e.type._context),en(e),null;case 17:return Sn(e.type)&&uh(),en(e),null;case 19:if(at(lt),o=e.memoizedState,o===null)return en(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)Ql(o,!1);else{if(Rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=yh(t),l!==null){for(e.flags|=128,Ql(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(lt,lt.current&1|2),e.child}t=t.sibling}o.tail!==null&&_t()>el&&(e.flags|=128,r=!0,Ql(o,!1),e.lanes=4194304)}else{if(!r)if(t=yh(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ql(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!ot)return en(e),null}else 2*_t()-o.renderingStartTime>el&&n!==1073741824&&(e.flags|=128,r=!0,Ql(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=_t(),e.sibling=null,n=lt.current,nt(lt,r?n&1|2:n&1),e):(en(e),null);case 22:case 23:return uy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rn&1073741824&&(en(e),e.subtreeFlags&6&&(e.flags|=8192)):en(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function wE(t,e){switch($g(e),e.tag){case 1:return Sn(e.type)&&uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jo(),at(En),at(an),Xg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jg(e),null;case 13:if(at(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(lt),null;case 4:return Jo(),null;case 10:return Kg(e.type._context),null;case 22:case 23:return uy(),null;case 24:return null;default:return null}}var wd=!1,rn=!1,_E=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function Cp(t,e,n){try{n()}catch(r){pt(t,e,r)}}var Q0=!1;function bE(t,e){if(mp=ah,t=ib(),Fg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,f=-1,m=0,g=0,x=t,_=null;t:for(;;){for(var T;x!==n||s!==0&&x.nodeType!==3||(h=l+s),x!==o||r!==0&&x.nodeType!==3||(f=l+r),x.nodeType===3&&(l+=x.nodeValue.length),(T=x.firstChild)!==null;)_=x,x=T;for(;;){if(x===t)break t;if(_===n&&++m===s&&(h=l),_===o&&++g===r&&(f=l),(T=x.nextSibling)!==null)break;x=_,_=x.parentNode}x=T}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(pp={focusedElem:t,selectionRange:n},ah=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,A=k.memoizedState,E=e.stateNode,S=E.getSnapshotBeforeUpdate(e.elementType===e.type?C:fr(e.type,C),A);E.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(H){pt(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return k=Q0,Q0=!1,k}function pc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Cp(e,n,o)}s=s.next}while(s!==r)}}function lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function t1(t){var e=t.alternate;e!==null&&(t.alternate=null,t1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mr],delete e[Dc],delete e[xp],delete e[sE],delete e[iE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function n1(t){return t.tag===5||t.tag===3||t.tag===4}function Y0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||n1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ap(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ch));else if(r!==4&&(t=t.child,t!==null))for(Ap(t,e,n),t=t.sibling;t!==null;)Ap(t,e,n),t=t.sibling}function Rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rp(t,e,n),t=t.sibling;t!==null;)Rp(t,e,n),t=t.sibling}var $t=null,mr=!1;function Ks(t,e,n){for(n=n.child;n!==null;)r1(t,e,n),n=n.sibling}function r1(t,e,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Xh,n)}catch{}switch(n.tag){case 5:rn||Ao(n,e);case 6:var r=$t,s=mr;$t=null,Ks(t,e,n),$t=r,mr=s,$t!==null&&(mr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(mr?(t=$t,n=n.stateNode,t.nodeType===8?vm(t.parentNode,n):t.nodeType===1&&vm(t,n),Cc(t)):vm($t,n.stateNode));break;case 4:r=$t,s=mr,$t=n.stateNode.containerInfo,mr=!0,Ks(t,e,n),$t=r,mr=s;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Cp(n,e,l),s=s.next}while(s!==r)}Ks(t,e,n);break;case 1:if(!rn&&(Ao(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){pt(n,e,h)}Ks(t,e,n);break;case 21:Ks(t,e,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,Ks(t,e,n),rn=r):Ks(t,e,n);break;default:Ks(t,e,n)}}function J0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _E),e.forEach(function(r){var s=CE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:$t=h.stateNode,mr=!1;break e;case 3:$t=h.stateNode.containerInfo,mr=!0;break e;case 4:$t=h.stateNode.containerInfo,mr=!0;break e}h=h.return}if($t===null)throw Error(ae(160));r1(o,l,s),$t=null,mr=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(m){pt(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)s1(e,t),e=e.sibling}function s1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hr(e,t),Ar(t),r&4){try{pc(3,t,t.return),lf(3,t)}catch(C){pt(t,t.return,C)}try{pc(5,t,t.return)}catch(C){pt(t,t.return,C)}}break;case 1:hr(e,t),Ar(t),r&512&&n!==null&&Ao(n,n.return);break;case 5:if(hr(e,t),Ar(t),r&512&&n!==null&&Ao(n,n.return),t.flags&32){var s=t.stateNode;try{Ec(s,"")}catch(C){pt(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&T_(s,o),sp(h,l);var m=sp(h,o);for(l=0;l<f.length;l+=2){var g=f[l],x=f[l+1];g==="style"?C_(s,x):g==="dangerouslySetInnerHTML"?P_(s,x):g==="children"?Ec(s,x):Pg(s,g,x,m)}switch(h){case"input":Xm(s,o);break;case"textarea":E_(s,o);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Do(s,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Do(s,!!o.multiple,o.defaultValue,!0):Do(s,!!o.multiple,o.multiple?[]:"",!1))}s[Dc]=o}catch(C){pt(t,t.return,C)}}break;case 6:if(hr(e,t),Ar(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(C){pt(t,t.return,C)}}break;case 3:if(hr(e,t),Ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cc(e.containerInfo)}catch(C){pt(t,t.return,C)}break;case 4:hr(e,t),Ar(t);break;case 13:hr(e,t),Ar(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(ly=_t())),r&4&&J0(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(m=rn)||g,hr(e,t),rn=m):hr(e,t),Ar(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!g&&t.mode&1)for(ye=t,g=t.child;g!==null;){for(x=ye=g;ye!==null;){switch(_=ye,T=_.child,_.tag){case 0:case 11:case 14:case 15:pc(4,_,_.return);break;case 1:Ao(_,_.return);var k=_.stateNode;if(typeof k.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(C){pt(r,n,C)}}break;case 5:Ao(_,_.return);break;case 22:if(_.memoizedState!==null){ev(x);continue}}T!==null?(T.return=_,ye=T):ev(x)}g=g.sibling}e:for(g=null,x=t;;){if(x.tag===5){if(g===null){g=x;try{s=x.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=x.stateNode,f=x.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=I_("display",l))}catch(C){pt(t,t.return,C)}}}else if(x.tag===6){if(g===null)try{x.stateNode.nodeValue=m?"":x.memoizedProps}catch(C){pt(t,t.return,C)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;g===x&&(g=null),x=x.return}g===x&&(g=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:hr(e,t),Ar(t),r&4&&J0(t);break;case 21:break;default:hr(e,t),Ar(t)}}function Ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(n1(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ec(s,""),r.flags&=-33);var o=Y0(t);Rp(t,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,h=Y0(t);Ap(t,h,l);break;default:throw Error(ae(161))}}catch(f){pt(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jE(t,e,n){ye=t,i1(t)}function i1(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var s=ye,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||wd;if(!l){var h=s.alternate,f=h!==null&&h.memoizedState!==null||rn;h=wd;var m=rn;if(wd=l,(rn=f)&&!m)for(ye=s;ye!==null;)l=ye,f=l.child,l.tag===22&&l.memoizedState!==null?tv(s):f!==null?(f.return=l,ye=f):tv(s);for(;o!==null;)ye=o,i1(o),o=o.sibling;ye=s,wd=h,rn=m}X0(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ye=o):X0(t)}}function X0(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||lf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&M0(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}M0(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var x=g.dehydrated;x!==null&&Cc(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}rn||e.flags&512&&zp(e)}catch(_){pt(e,e.return,_)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function ev(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function tv(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lf(4,e)}catch(f){pt(e,n,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(f){pt(e,s,f)}}var o=e.return;try{zp(e)}catch(f){pt(e,o,f)}break;case 5:var l=e.return;try{zp(e)}catch(f){pt(e,l,f)}}}catch(f){pt(e,e.return,f)}if(e===t){ye=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ye=h;break}ye=e.return}}var NE=Math.ceil,wh=Ms.ReactCurrentDispatcher,ay=Ms.ReactCurrentOwner,rr=Ms.ReactCurrentBatchConfig,We=0,Wt=null,Pt=null,Zt=0,Rn=0,Ro=Di(0),Rt=0,Fc=null,ja=0,cf=0,oy=0,gc=null,jn=null,ly=0,el=1/0,gs=null,_h=!1,Lp=null,gi=null,_d=!1,li=null,bh=0,yc=0,Dp=null,Fd=-1,Wd=0;function mn(){return We&6?_t():Fd!==-1?Fd:Fd=_t()}function yi(t){return t.mode&1?We&2&&Zt!==0?Zt&-Zt:oE.transition!==null?(Wd===0&&(Wd=W_()),Wd):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:Q_(t.type)),t):1}function xr(t,e,n,r){if(50<yc)throw yc=0,Dp=null,Error(ae(185));au(t,n,r),(!(We&2)||t!==Wt)&&(t===Wt&&(!(We&2)&&(cf|=n),Rt===4&&ti(t,Zt)),Pn(t,r),n===1&&We===0&&!(e.mode&1)&&(el=_t()+500,sf&&Mi()))}function Pn(t,e){var n=t.callbackNode;oT(t,e);var r=ih(t,t===Wt?Zt:0);if(r===0)n!==null&&u0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&u0(n),e===1)t.tag===0?aE(nv.bind(null,t)):pb(nv.bind(null,t)),nE(function(){!(We&6)&&Mi()}),n=null;else{switch($_(r)){case 1:n=Rg;break;case 4:n=B_;break;case 16:n=sh;break;case 536870912:n=F_;break;default:n=sh}n=f1(n,a1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function a1(t,e){if(Fd=-1,Wd=0,We&6)throw Error(ae(327));var n=t.callbackNode;if(Bo()&&t.callbackNode!==n)return null;var r=ih(t,t===Wt?Zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jh(t,r);else{e=r;var s=We;We|=2;var o=l1();(Wt!==t||Zt!==e)&&(gs=null,el=_t()+500,ma(t,e));do try{EE();break}catch(h){o1(t,h)}while(!0);Zg(),wh.current=o,We=s,Pt!==null?e=0:(Wt=null,Zt=0,e=Rt)}if(e!==0){if(e===2&&(s=cp(t),s!==0&&(r=s,e=Mp(t,s))),e===1)throw n=Fc,ma(t,0),ti(t,r),Pn(t,_t()),n;if(e===6)ti(t,r);else{if(s=t.current.alternate,!(r&30)&&!kE(s)&&(e=jh(t,r),e===2&&(o=cp(t),o!==0&&(r=o,e=Mp(t,o))),e===1))throw n=Fc,ma(t,0),ti(t,r),Pn(t,_t()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:aa(t,jn,gs);break;case 3:if(ti(t,r),(r&130023424)===r&&(e=ly+500-_t(),10<e)){if(ih(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yp(aa.bind(null,t,jn,gs),e);break}aa(t,jn,gs);break;case 4:if(ti(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var l=31-yr(r);o=1<<l,l=e[l],l>s&&(s=l),r&=~o}if(r=s,r=_t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*NE(r/1960))-r,10<r){t.timeoutHandle=yp(aa.bind(null,t,jn,gs),r);break}aa(t,jn,gs);break;case 5:aa(t,jn,gs);break;default:throw Error(ae(329))}}}return Pn(t,_t()),t.callbackNode===n?a1.bind(null,t):null}function Mp(t,e){var n=gc;return t.current.memoizedState.isDehydrated&&(ma(t,e).flags|=256),t=jh(t,e),t!==2&&(e=jn,jn=n,e!==null&&Op(e)),t}function Op(t){jn===null?jn=t:jn.push.apply(jn,t)}function kE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!wr(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ti(t,e){for(e&=~oy,e&=~cf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yr(e),r=1<<n;t[n]=-1,e&=~r}}function nv(t){if(We&6)throw Error(ae(327));Bo();var e=ih(t,0);if(!(e&1))return Pn(t,_t()),null;var n=jh(t,e);if(t.tag!==0&&n===2){var r=cp(t);r!==0&&(e=r,n=Mp(t,r))}if(n===1)throw n=Fc,ma(t,0),ti(t,e),Pn(t,_t()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,aa(t,jn,gs),Pn(t,_t()),null}function cy(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(el=_t()+500,sf&&Mi())}}function Na(t){li!==null&&li.tag===0&&!(We&6)&&Bo();var e=We;We|=1;var n=rr.transition,r=Xe;try{if(rr.transition=null,Xe=1,t)return t()}finally{Xe=r,rr.transition=n,We=e,!(We&6)&&Mi()}}function uy(){Rn=Ro.current,at(Ro)}function ma(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tE(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch($g(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uh();break;case 3:Jo(),at(En),at(an),Xg();break;case 5:Jg(r);break;case 4:Jo();break;case 13:at(lt);break;case 19:at(lt);break;case 10:Kg(r.type._context);break;case 22:case 23:uy()}n=n.return}if(Wt=t,Pt=t=xi(t.current,null),Zt=Rn=e,Rt=0,Fc=null,oy=cf=ja=0,jn=gc=null,ua!==null){for(e=0;e<ua.length;e++)if(n=ua[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}ua=null}return t}function o1(t,e){do{var n=Pt;try{if(Zg(),Vd.current=vh,xh){for(var r=dt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xh=!1}if(ba=0,Bt=zt=dt=null,mc=!1,Vc=0,ay.current=null,n===null||n.return===null){Rt=1,Fc=e,Pt=null;break}e:{var o=t,l=n.return,h=n,f=e;if(e=Zt,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=f,g=h,x=g.tag;if(!(g.mode&1)&&(x===0||x===11||x===15)){var _=g.alternate;_?(g.updateQueue=_.updateQueue,g.memoizedState=_.memoizedState,g.lanes=_.lanes):(g.updateQueue=null,g.memoizedState=null)}var T=W0(l);if(T!==null){T.flags&=-257,$0(T,l,h,o,e),T.mode&1&&F0(o,m,e),e=T,f=m;var k=e.updateQueue;if(k===null){var C=new Set;C.add(f),e.updateQueue=C}else k.add(f);break e}else{if(!(e&1)){F0(o,m,e),dy();break e}f=Error(ae(426))}}else if(ot&&h.mode&1){var A=W0(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),$0(A,l,h,o,e),Hg(Xo(f,h));break e}}o=f=Xo(f,h),Rt!==4&&(Rt=2),gc===null?gc=[o]:gc.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var E=$b(o,f,e);D0(o,E);break e;case 1:h=f;var S=o.type,I=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(gi===null||!gi.has(I)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=Hb(o,h,e);D0(o,H);break e}}o=o.return}while(o!==null)}u1(n)}catch(O){e=O,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function l1(){var t=wh.current;return wh.current=vh,t===null?vh:t}function dy(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Wt===null||!(ja&268435455)&&!(cf&268435455)||ti(Wt,Zt)}function jh(t,e){var n=We;We|=2;var r=l1();(Wt!==t||Zt!==e)&&(gs=null,ma(t,e));do try{TE();break}catch(s){o1(t,s)}while(!0);if(Zg(),We=n,wh.current=r,Pt!==null)throw Error(ae(261));return Wt=null,Zt=0,Rt}function TE(){for(;Pt!==null;)c1(Pt)}function EE(){for(;Pt!==null&&!J2();)c1(Pt)}function c1(t){var e=h1(t.alternate,t,Rn);t.memoizedProps=t.pendingProps,e===null?u1(t):Pt=e,ay.current=null}function u1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wE(n,e),n!==null){n.flags&=32767,Pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rt=6,Pt=null;return}}else if(n=vE(n,e,Rn),n!==null){Pt=n;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Rt===0&&(Rt=5)}function aa(t,e,n){var r=Xe,s=rr.transition;try{rr.transition=null,Xe=1,SE(t,e,n,r)}finally{rr.transition=s,Xe=r}return null}function SE(t,e,n,r){do Bo();while(li!==null);if(We&6)throw Error(ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(lT(t,o),t===Wt&&(Pt=Wt=null,Zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_d||(_d=!0,f1(sh,function(){return Bo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=rr.transition,rr.transition=null;var l=Xe;Xe=1;var h=We;We|=4,ay.current=null,bE(t,n),s1(n,t),KT(pp),ah=!!mp,pp=mp=null,t.current=n,jE(n),X2(),We=h,Xe=l,rr.transition=o}else t.current=n;if(_d&&(_d=!1,li=t,bh=s),o=t.pendingLanes,o===0&&(gi=null),nT(n.stateNode),Pn(t,_t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_h)throw _h=!1,t=Lp,Lp=null,t;return bh&1&&t.tag!==0&&Bo(),o=t.pendingLanes,o&1?t===Dp?yc++:(yc=0,Dp=t):yc=0,Mi(),null}function Bo(){if(li!==null){var t=$_(bh),e=rr.transition,n=Xe;try{if(rr.transition=null,Xe=16>t?16:t,li===null)var r=!1;else{if(t=li,li=null,bh=0,We&6)throw Error(ae(331));var s=We;for(We|=4,ye=t.current;ye!==null;){var o=ye,l=o.child;if(ye.flags&16){var h=o.deletions;if(h!==null){for(var f=0;f<h.length;f++){var m=h[f];for(ye=m;ye!==null;){var g=ye;switch(g.tag){case 0:case 11:case 15:pc(8,g,o)}var x=g.child;if(x!==null)x.return=g,ye=x;else for(;ye!==null;){g=ye;var _=g.sibling,T=g.return;if(t1(g),g===m){ye=null;break}if(_!==null){_.return=T,ye=_;break}ye=T}}}var k=o.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}ye=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ye=l;else e:for(;ye!==null;){if(o=ye,o.flags&2048)switch(o.tag){case 0:case 11:case 15:pc(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,ye=E;break e}ye=o.return}}var S=t.current;for(ye=S;ye!==null;){l=ye;var I=l.child;if(l.subtreeFlags&2064&&I!==null)I.return=l,ye=I;else e:for(l=S;ye!==null;){if(h=ye,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:lf(9,h)}}catch(O){pt(h,h.return,O)}if(h===l){ye=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,ye=H;break e}ye=h.return}}if(We=s,Mi(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Xh,t)}catch{}r=!0}return r}finally{Xe=n,rr.transition=e}}return!1}function rv(t,e,n){e=Xo(n,e),e=$b(t,e,1),t=pi(t,e,1),e=mn(),t!==null&&(au(t,1,e),Pn(t,e))}function pt(t,e,n){if(t.tag===3)rv(t,t,n);else for(;e!==null;){if(e.tag===3){rv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gi===null||!gi.has(r))){t=Xo(n,t),t=Hb(e,t,1),e=pi(e,t,1),t=mn(),e!==null&&(au(e,1,t),Pn(e,t));break}}e=e.return}}function PE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mn(),t.pingedLanes|=t.suspendedLanes&n,Wt===t&&(Zt&n)===n&&(Rt===4||Rt===3&&(Zt&130023424)===Zt&&500>_t()-ly?ma(t,0):oy|=n),Pn(t,e)}function d1(t,e){e===0&&(t.mode&1?(e=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):e=1);var n=mn();t=Is(t,e),t!==null&&(au(t,e,n),Pn(t,n))}function IE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),d1(t,n)}function CE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),d1(t,n)}var h1;h1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,xE(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,ot&&e.flags&1048576&&gb(e,fh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bd(t,e),t=e.pendingProps;var s=Go(e,an.current);Uo(e,n),s=ty(null,e,r,t,s,n);var o=ny();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(r)?(o=!0,dh(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qg(e),s.updater=of,e.stateNode=s,s._reactInternals=e,Np(e,r,t,n),e=Ep(null,e,r,!0,o,n)):(e.tag=0,ot&&o&&Wg(e),fn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=AE(r),t=fr(r,t),s){case 0:e=Tp(null,e,r,t,n);break e;case 1:e=Z0(null,e,r,t,n);break e;case 11:e=H0(null,e,r,t,n);break e;case 14:e=q0(null,e,r,fr(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),Tp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),Z0(t,e,r,s,n);case 3:e:{if(Gb(e),t===null)throw Error(ae(387));r=e.pendingProps,o=e.memoizedState,s=o.element,bb(t,e),gh(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Xo(Error(ae(423)),e),e=K0(t,e,r,n,s);break e}else if(r!==s){s=Xo(Error(ae(424)),e),e=K0(t,e,r,n,s);break e}else for(Mn=mi(e.stateNode.containerInfo.firstChild),Bn=e,ot=!0,pr=null,n=wb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qo(),r===s){e=Cs(t,e,n);break e}fn(t,e,r,n)}e=e.child}return e;case 5:return jb(e),t===null&&_p(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,gp(r,s)?l=null:o!==null&&gp(r,o)&&(e.flags|=32),Kb(t,e),fn(t,e,l,n),e.child;case 6:return t===null&&_p(e),null;case 13:return Qb(t,e,n);case 4:return Yg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yo(e,null,r,n):fn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),H0(t,e,r,s,n);case 7:return fn(t,e,e.pendingProps,n),e.child;case 8:return fn(t,e,e.pendingProps.children,n),e.child;case 12:return fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,nt(mh,r._currentValue),r._currentValue=l,o!==null)if(wr(o.value,l)){if(o.children===s.children&&!En.current){e=Cs(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var f=h.firstContext;f!==null;){if(f.context===r){if(o.tag===1){f=js(-1,n&-n),f.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?f.next=f:(f.next=g.next,g.next=f),m.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),bp(o.return,n,e),h.lanes|=n;break}f=f.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(ae(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),bp(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}fn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Uo(e,n),s=sr(s),r=r(s),e.flags|=1,fn(t,e,r,n),e.child;case 14:return r=e.type,s=fr(r,e.pendingProps),s=fr(r.type,s),q0(t,e,r,s,n);case 15:return qb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),Bd(t,e),e.tag=1,Sn(r)?(t=!0,dh(e)):t=!1,Uo(e,n),Wb(e,r,s),Np(e,r,s,n),Ep(null,e,r,!0,t,n);case 19:return Yb(t,e,n);case 22:return Zb(t,e,n)}throw Error(ae(156,e.tag))};function f1(t,e){return U_(t,e)}function zE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,n,r){return new zE(t,e,n,r)}function hy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AE(t){if(typeof t=="function")return hy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cg)return 11;if(t===zg)return 14}return 2}function xi(t,e){var n=t.alternate;return n===null?(n=tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $d(t,e,n,r,s,o){var l=2;if(r=t,typeof t=="function")hy(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case No:return pa(n.children,s,o,e);case Ig:l=8,s|=8;break;case Km:return t=tr(12,n,e,s|2),t.elementType=Km,t.lanes=o,t;case Gm:return t=tr(13,n,e,s),t.elementType=Gm,t.lanes=o,t;case Qm:return t=tr(19,n,e,s),t.elementType=Qm,t.lanes=o,t;case j_:return uf(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case __:l=10;break e;case b_:l=9;break e;case Cg:l=11;break e;case zg:l=14;break e;case Js:l=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=tr(l,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function pa(t,e,n,r){return t=tr(7,t,r,e),t.lanes=n,t}function uf(t,e,n,r){return t=tr(22,t,r,e),t.elementType=j_,t.lanes=n,t.stateNode={isHidden:!1},t}function Em(t,e,n){return t=tr(6,t,null,e),t.lanes=n,t}function Sm(t,e,n){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lm(0),this.expirationTimes=lm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fy(t,e,n,r,s,o,l,h,f){return t=new RE(t,e,n,h,f),e===1?(e=1,o===!0&&(e|=8)):e=0,o=tr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qg(o),t}function LE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function m1(t){if(!t)return Ti;t=t._reactInternals;e:{if(Da(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Sn(n))return mb(t,n,e)}return e}function p1(t,e,n,r,s,o,l,h,f){return t=fy(n,r,!0,t,s,o,l,h,f),t.context=m1(null),n=t.current,r=mn(),s=yi(n),o=js(r,s),o.callback=e??null,pi(n,o,s),t.current.lanes=s,au(t,s,r),Pn(t,r),t}function df(t,e,n,r){var s=e.current,o=mn(),l=yi(s);return n=m1(n),e.context===null?e.context=n:e.pendingContext=n,e=js(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pi(s,e,l),t!==null&&(xr(t,s,l,o),Od(t,s,l)),l}function Nh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function my(t,e){sv(t,e),(t=t.alternate)&&sv(t,e)}function DE(){return null}var g1=typeof reportError=="function"?reportError:function(t){console.error(t)};function py(t){this._internalRoot=t}hf.prototype.render=py.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));df(t,e,null,null)};hf.prototype.unmount=py.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Na(function(){df(null,t,null,null)}),e[Ps]=null}};function hf(t){this._internalRoot=t}hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&G_(t)}};function gy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iv(){}function ME(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var m=Nh(l);o.call(m)}}var l=p1(e,r,t,0,null,!1,!1,"",iv);return t._reactRootContainer=l,t[Ps]=l.current,Rc(t.nodeType===8?t.parentNode:t),Na(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var m=Nh(f);h.call(m)}}var f=fy(t,0,!1,null,null,!1,!1,"",iv);return t._reactRootContainer=f,t[Ps]=f.current,Rc(t.nodeType===8?t.parentNode:t),Na(function(){df(e,f,n,r)}),f}function mf(t,e,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var f=Nh(l);h.call(f)}}df(e,l,t,s)}else l=ME(n,e,t,s,r);return Nh(l)}H_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tc(e.pendingLanes);n!==0&&(Lg(e,n|1),Pn(e,_t()),!(We&6)&&(el=_t()+500,Mi()))}break;case 13:Na(function(){var r=Is(t,1);if(r!==null){var s=mn();xr(r,t,1,s)}}),my(t,1)}};Dg=function(t){if(t.tag===13){var e=Is(t,134217728);if(e!==null){var n=mn();xr(e,t,134217728,n)}my(t,134217728)}};q_=function(t){if(t.tag===13){var e=yi(t),n=Is(t,e);if(n!==null){var r=mn();xr(n,t,e,r)}my(t,e)}};Z_=function(){return Xe};K_=function(t,e){var n=Xe;try{return Xe=t,e()}finally{Xe=n}};ap=function(t,e,n){switch(e){case"input":if(Xm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=rf(r);if(!s)throw Error(ae(90));k_(r),Xm(r,s)}}}break;case"textarea":E_(t,n);break;case"select":e=n.value,e!=null&&Do(t,!!n.multiple,e,!1)}};R_=cy;L_=Na;var OE={usingClientEntryPoint:!1,Events:[lu,So,rf,z_,A_,cy]},Yl={findFiberByHostInstance:ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VE={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=O_(t),t===null?null:t.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||DE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bd.isDisabled&&bd.supportsFiber)try{Xh=bd.inject(VE),Fr=bd}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OE;Wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gy(e))throw Error(ae(200));return LE(t,e,null,n)};Wn.createRoot=function(t,e){if(!gy(t))throw Error(ae(299));var n=!1,r="",s=g1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=fy(t,1,!1,null,null,n,!1,r,s),t[Ps]=e.current,Rc(t.nodeType===8?t.parentNode:t),new py(e)};Wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=O_(e),t=t===null?null:t.stateNode,t};Wn.flushSync=function(t){return Na(t)};Wn.hydrate=function(t,e,n){if(!ff(e))throw Error(ae(200));return mf(null,t,e,!0,n)};Wn.hydrateRoot=function(t,e,n){if(!gy(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=g1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=p1(e,null,t,1,n??null,s,!1,o,l),t[Ps]=e.current,Rc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hf(e)};Wn.render=function(t,e,n){if(!ff(e))throw Error(ae(200));return mf(null,t,e,!1,n)};Wn.unmountComponentAtNode=function(t){if(!ff(t))throw Error(ae(40));return t._reactRootContainer?(Na(function(){mf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ps]=null})}),!0):!1};Wn.unstable_batchedUpdates=cy;Wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ff(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return mf(t,e,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function y1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y1)}catch(t){console.error(t)}}y1(),y_.exports=Wn;var UE=y_.exports,av=UE;qm.createRoot=av.createRoot,qm.hydrateRoot=av.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wc.apply(this,arguments)}var ci;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ci||(ci={}));const ov="popstate";function BE(t){t===void 0&&(t={});function e(s,o){let{pathname:l="/",search:h="",hash:f=""}=Ma(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Vp("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let l=s.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let f=s.location.href,m=f.indexOf("#");h=m===-1?f:f.slice(0,m)}return h+"#"+(typeof o=="string"?o:kh(o))}function r(s,o){pf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return WE(e,n,r,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FE(){return Math.random().toString(36).substr(2,8)}function lv(t,e){return{usr:t.state,key:t.key,idx:e}}function Vp(t,e,n,r){return n===void 0&&(n=null),Wc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ma(e):e,{state:n,key:e&&e.key||r||FE()})}function kh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ma(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WE(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,h=ci.Pop,f=null,m=g();m==null&&(m=0,l.replaceState(Wc({},l.state,{idx:m}),""));function g(){return(l.state||{idx:null}).idx}function x(){h=ci.Pop;let A=g(),E=A==null?null:A-m;m=A,f&&f({action:h,location:C.location,delta:E})}function _(A,E){h=ci.Push;let S=Vp(C.location,A,E);n&&n(S,A),m=g()+1;let I=lv(S,m),H=C.createHref(S);try{l.pushState(I,"",H)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(H)}o&&f&&f({action:h,location:C.location,delta:1})}function T(A,E){h=ci.Replace;let S=Vp(C.location,A,E);n&&n(S,A),m=g();let I=lv(S,m),H=C.createHref(S);l.replaceState(I,"",H),o&&f&&f({action:h,location:C.location,delta:0})}function k(A){let E=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof A=="string"?A:kh(A);return S=S.replace(/ $/,"%20"),bt(E,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,E)}let C={get action(){return h},get location(){return t(s,l)},listen(A){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(ov,x),f=A,()=>{s.removeEventListener(ov,x),f=null}},createHref(A){return e(s,A)},createURL:k,encodeLocation(A){let E=k(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:_,replace:T,go(A){return l.go(A)}};return C}var cv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cv||(cv={}));function $E(t,e,n){return n===void 0&&(n="/"),HE(t,e,n)}function HE(t,e,n,r){let s=typeof e=="string"?Ma(e):e,o=yy(s.pathname||"/",n);if(o==null)return null;let l=x1(t);qE(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let m=sS(o);h=tS(l[f],m)}return h}function x1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,l,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};f.relativePath.startsWith("/")&&(bt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=vi([r,f.relativePath]),g=n.concat(f);o.children&&o.children.length>0&&(bt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),x1(o.children,e,g,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:XE(m,o.index),routesMeta:g})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let f of v1(o.path))s(o,l,f)}),e}function v1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=v1(r.join("/")),h=[];return h.push(...l.map(f=>f===""?o:[o,f].join("/"))),s&&h.push(...l),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function qE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZE=/^:[\w-]+$/,KE=3,GE=2,QE=1,YE=10,JE=-2,uv=t=>t==="*";function XE(t,e){let n=t.split("/"),r=n.length;return n.some(uv)&&(r+=JE),e&&(r+=GE),n.filter(s=>!uv(s)).reduce((s,o)=>s+(ZE.test(o)?KE:o===""?QE:YE),r)}function eS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function tS(t,e,n){let{routesMeta:r}=t,s={},o="/",l=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",x=nS({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),_=f.route;if(!x)return null;Object.assign(s,x.params),l.push({params:s,pathname:vi([o,x.pathname]),pathnameBase:cS(vi([o,x.pathnameBase])),route:_}),x.pathnameBase!=="/"&&(o=vi([o,x.pathnameBase]))}return l}function nS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,g,x)=>{let{paramName:_,isOptional:T}=g;if(_==="*"){let C=h[x]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const k=h[x];return T&&!k?m[_]=void 0:m[_]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:t}}function rS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function sS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const iS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aS=t=>iS.test(t);function oS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ma(t):t,o;if(n)if(aS(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),pf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=dv(n.substring(1),"/"):o=dv(n,e)}else o=e;return{pathname:o,search:uS(r),hash:dS(s)}}function dv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xy(t,e){let n=lS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ma(t):(s=Wc({},t),bt(!s.pathname||!s.pathname.includes("?"),Pm("?","pathname","search",s)),bt(!s.pathname||!s.pathname.includes("#"),Pm("#","pathname","hash",s)),bt(!s.search||!s.search.includes("#"),Pm("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let x=e.length-1;if(!r&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),x-=1;s.pathname=_.join("/")}h=x>=0?e[x]:"/"}let f=oS(s,h),m=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}const vi=t=>t.join("/").replace(/\/\/+/g,"/"),cS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const w1=["post","put","patch","delete"];new Set(w1);const fS=["get",...w1];new Set(fS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$c.apply(this,arguments)}const wy=D.createContext(null),mS=D.createContext(null),Oi=D.createContext(null),gf=D.createContext(null),Xr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),_1=D.createContext(null);function pS(t,e){let{relative:n}=e===void 0?{}:e;fl()||bt(!1);let{basename:r,navigator:s}=D.useContext(Oi),{hash:o,pathname:l,search:h}=N1(t,{relative:n}),f=l;return r!=="/"&&(f=l==="/"?r:vi([r,l])),s.createHref({pathname:f,search:h,hash:o})}function fl(){return D.useContext(gf)!=null}function es(){return fl()||bt(!1),D.useContext(gf).location}function b1(t){D.useContext(Oi).static||D.useLayoutEffect(t)}function Nr(){let{isDataRoute:t}=D.useContext(Xr);return t?IS():gS()}function gS(){fl()||bt(!1);let t=D.useContext(wy),{basename:e,future:n,navigator:r}=D.useContext(Oi),{matches:s}=D.useContext(Xr),{pathname:o}=es(),l=JSON.stringify(xy(s,n.v7_relativeSplatPath)),h=D.useRef(!1);return b1(()=>{h.current=!0}),D.useCallback(function(m,g){if(g===void 0&&(g={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let x=vy(m,JSON.parse(l),o,g.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:vi([e,x.pathname])),(g.replace?r.replace:r.push)(x,g.state,g)},[e,r,l,o,t])}const yS=D.createContext(null);function xS(t){let e=D.useContext(Xr).outlet;return e&&D.createElement(yS.Provider,{value:t},e)}function j1(){let{matches:t}=D.useContext(Xr),e=t[t.length-1];return e?e.params:{}}function N1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Oi),{matches:s}=D.useContext(Xr),{pathname:o}=es(),l=JSON.stringify(xy(s,r.v7_relativeSplatPath));return D.useMemo(()=>vy(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function vS(t,e){return wS(t,e)}function wS(t,e,n,r){fl()||bt(!1);let{navigator:s}=D.useContext(Oi),{matches:o}=D.useContext(Xr),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let m=es(),g;if(e){var x;let A=typeof e=="string"?Ma(e):e;f==="/"||(x=A.pathname)!=null&&x.startsWith(f)||bt(!1),g=A}else g=m;let _=g.pathname||"/",T=_;if(f!=="/"){let A=f.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(A.length).join("/")}let k=$E(t,{pathname:T}),C=kS(k&&k.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:vi([f,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:vi([f,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),o,n,r);return e&&C?D.createElement(gf.Provider,{value:{location:$c({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ci.Pop}},C):C}function _S(){let t=PS(),e=hS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const bS=D.createElement(_S,null);class jS extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Xr.Provider,{value:this.props.routeContext},D.createElement(_1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NS(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(wy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Xr.Provider,{value:e},r)}function kS(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let g=l.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);g>=0||bt(!1),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let x=l[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=g),x.route.id){let{loaderData:_,errors:T}=n,k=x.route.loader&&_[x.route.id]===void 0&&(!T||T[x.route.id]===void 0);if(x.route.lazy||k){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((g,x,_)=>{let T,k=!1,C=null,A=null;n&&(T=h&&x.route.id?h[x.route.id]:void 0,C=x.route.errorElement||bS,f&&(m<0&&_===0?(CS("route-fallback"),k=!0,A=null):m===_&&(k=!0,A=x.route.hydrateFallbackElement||null)));let E=e.concat(l.slice(0,_+1)),S=()=>{let I;return T?I=C:k?I=A:x.route.Component?I=D.createElement(x.route.Component,null):x.route.element?I=x.route.element:I=g,D.createElement(NS,{match:x,routeContext:{outlet:g,matches:E,isDataRoute:n!=null},children:I})};return n&&(x.route.ErrorBoundary||x.route.errorElement||_===0)?D.createElement(jS,{location:n.location,revalidation:n.revalidation,component:C,error:T,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}var k1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(k1||{}),T1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(T1||{});function TS(t){let e=D.useContext(wy);return e||bt(!1),e}function ES(t){let e=D.useContext(mS);return e||bt(!1),e}function SS(t){let e=D.useContext(Xr);return e||bt(!1),e}function E1(t){let e=SS(),n=e.matches[e.matches.length-1];return n.route.id||bt(!1),n.route.id}function PS(){var t;let e=D.useContext(_1),n=ES(),r=E1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function IS(){let{router:t}=TS(k1.UseNavigateStable),e=E1(T1.UseNavigateStable),n=D.useRef(!1);return b1(()=>{n.current=!0}),D.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,$c({fromRouteId:e},o)))},[t,e])}const hv={};function CS(t,e,n){hv[t]||(hv[t]=!0)}function zS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function fv(t){let{to:e,replace:n,state:r,relative:s}=t;fl()||bt(!1);let{future:o,static:l}=D.useContext(Oi),{matches:h}=D.useContext(Xr),{pathname:f}=es(),m=Nr(),g=vy(e,xy(h,o.v7_relativeSplatPath),f,s==="path"),x=JSON.stringify(g);return D.useEffect(()=>m(JSON.parse(x),{replace:n,state:r,relative:s}),[m,x,s,n,r]),null}function AS(t){return xS(t.context)}function Je(t){bt(!1)}function RS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ci.Pop,navigator:o,static:l=!1,future:h}=t;fl()&&bt(!1);let f=e.replace(/^\/*/,"/"),m=D.useMemo(()=>({basename:f,navigator:o,static:l,future:$c({v7_relativeSplatPath:!1},h)}),[f,h,o,l]);typeof r=="string"&&(r=Ma(r));let{pathname:g="/",search:x="",hash:_="",state:T=null,key:k="default"}=r,C=D.useMemo(()=>{let A=yy(g,f);return A==null?null:{location:{pathname:A,search:x,hash:_,state:T,key:k},navigationType:s}},[f,g,x,_,T,k,s]);return C==null?null:D.createElement(Oi.Provider,{value:m},D.createElement(gf.Provider,{children:n,value:C}))}function S1(t){let{children:e,location:n}=t;return vS(Up(e),n)}new Promise(()=>{});function Up(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let o=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Up(r.props.children,o));return}r.type!==Je&&bt(!1),!r.props.index||!r.props.children||bt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Up(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bp(){return Bp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bp.apply(this,arguments)}function LS(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function DS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MS(t,e){return t.button===0&&(!e||e==="_self")&&!DS(t)}function Fp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function OS(t,e){let n=Fp(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}const VS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],US="6";try{window.__reactRouterVersion=US}catch{}const BS="startTransition",mv=P2[BS];function FS(t){let{basename:e,children:n,future:r,window:s}=t,o=D.useRef();o.current==null&&(o.current=BE({window:s,v5Compat:!0}));let l=o.current,[h,f]=D.useState({action:l.action,location:l.location}),{v7_startTransition:m}=r||{},g=D.useCallback(x=>{m&&mv?mv(()=>f(x)):f(x)},[f,m]);return D.useLayoutEffect(()=>l.listen(g),[l,g]),D.useEffect(()=>zS(r),[r]),D.createElement(RS,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}const WS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:l,state:h,target:f,to:m,preventScrollReset:g,viewTransition:x}=e,_=LS(e,VS),{basename:T}=D.useContext(Oi),k,C=!1;if(typeof m=="string"&&$S.test(m)&&(k=m,WS))try{let I=new URL(window.location.href),H=m.startsWith("//")?new URL(I.protocol+m):new URL(m),O=yy(H.pathname,T);H.origin===I.origin&&O!=null?m=O+H.search+H.hash:C=!0}catch{}let A=pS(m,{relative:s}),E=HS(m,{replace:l,state:h,target:f,preventScrollReset:g,relative:s,viewTransition:x});function S(I){r&&r(I),I.defaultPrevented||E(I)}return D.createElement("a",Bp({},_,{href:k||A,onClick:C||o?r:S,ref:n,target:f}))});var pv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pv||(pv={}));var gv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gv||(gv={}));function HS(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:l,viewTransition:h}=e===void 0?{}:e,f=Nr(),m=es(),g=N1(t,{relative:l});return D.useCallback(x=>{if(MS(x,n)){x.preventDefault();let _=r!==void 0?r:kh(m)===kh(g);f(t,{replace:_,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[m,f,g,r,s,n,t,o,l,h])}function P1(t){let e=D.useRef(Fp(t)),n=D.useRef(!1),r=es(),s=D.useMemo(()=>OS(r.search,n.current?null:e.current),[r.search]),o=Nr(),l=D.useCallback((h,f)=>{const m=Fp(typeof h=="function"?h(s):h);n.current=!0,o("?"+m,f)},[o,s]);return[s,l]}const qS=()=>{};var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ZS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],f=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},C1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,f=s+2<t.length,m=f?t[s+2]:0,g=o>>2,x=(o&3)<<4|h>>4;let _=(h&15)<<2|m>>6,T=m&63;f||(T=64,l||(_=64)),r.push(n[g],n[x],n[_],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const x=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||x==null)throw new KS;const _=o<<2|h>>4;if(r.push(_),m!==64){const T=h<<4&240|m>>2;if(r.push(T),x!==64){const k=m<<6&192|x;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GS=function(t){const e=I1(t);return C1.encodeByteArray(e,!0)},Th=function(t){return GS(t).replace(/\./g,"")},z1=function(t){try{return C1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=()=>QS().__FIREBASE_DEFAULTS__,JS=()=>{if(typeof process>"u"||typeof yv>"u")return;const t=yv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z1(t[1]);return e&&JSON.parse(e)},yf=()=>{try{return qS()||YS()||JS()||XS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},A1=t=>{var e,n;return(n=(e=yf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},R1=t=>{const e=A1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},L1=()=>{var t;return(t=yf())==null?void 0:t.config},D1=t=>{var e;return(e=yf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _y(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Th(JSON.stringify(n)),Th(JSON.stringify(l)),""].join(".")}const xc={};function tP(){const t={prod:[],emulator:[]};for(const e of Object.keys(xc))xc[e]?t.emulator.push(e):t.prod.push(e);return t}function nP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xv=!1;function by(t,e){if(typeof window>"u"||typeof document>"u"||!Vi(window.location.host)||xc[t]===e||xc[t]||xv)return;xc[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",o=tP().prod.length>0;function l(){const _=document.getElementById(r);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function m(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{xv=!0,l()},_}function g(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function x(){const _=nP(r),T=n("text"),k=document.getElementById(T)||document.createElement("span"),C=n("learnmore"),A=document.getElementById(C)||document.createElement("a"),E=n("preprendIcon"),S=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const I=_.element;h(I),g(A,C);const H=m();f(S,E),I.append(S,k,A,H),document.body.appendChild(I)}o?(k.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function sP(){var e;const t=(e=yf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lP(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cP(){return!sP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uP(){try{return typeof indexedDB=="object"}catch{return!1}}function dP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="FirebaseError";class ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hP,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?fP(o,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new ts(s,h,r)}}function fP(t,e){return t.replace(mP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mP=/\{\$([^}]+)}/g;function pP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ka(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(vv(o)&&vv(l)){if(!ka(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function sc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gP(t,e){const n=new yP(t,e);return n.subscribe.bind(n)}class yP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Im),s.error===void 0&&(s.error=Im),s.complete===void 0&&(s.complete=Im);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Ei{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_P(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wP(t){return t===oa?void 0:t}function _P(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const jP={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},NP=De.INFO,kP={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},TP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jy{constructor(e){this.name=e,this._logLevel=NP,this._logHandler=TP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const EP=(t,e)=>e.some(n=>t instanceof n);let wv,_v;function SP(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PP(){return _v||(_v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O1=new WeakMap,Wp=new WeakMap,V1=new WeakMap,Cm=new WeakMap,Ny=new WeakMap;function IP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(wi(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&O1.set(n,t)}).catch(()=>{}),Ny.set(e,t),e}function CP(t){if(Wp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Wp.set(t,e)}let $p={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zP(t){$p=t($p)}function AP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zm(this),e,...n);return V1.set(r,e.sort?e.sort():[e]),wi(r)}:PP().includes(t)?function(...e){return t.apply(zm(this),e),wi(O1.get(this))}:function(...e){return wi(t.apply(zm(this),e))}}function RP(t){return typeof t=="function"?AP(t):(t instanceof IDBTransaction&&CP(t),EP(t,SP())?new Proxy(t,$p):t)}function wi(t){if(t instanceof IDBRequest)return IP(t);if(Cm.has(t))return Cm.get(t);const e=RP(t);return e!==t&&(Cm.set(t,e),Ny.set(e,t)),e}const zm=t=>Ny.get(t);function LP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=wi(l);return r&&l.addEventListener("upgradeneeded",f=>{r(wi(l.result),f.oldVersion,f.newVersion,wi(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const DP=["get","getKey","getAll","getAllKeys","count"],MP=["put","add","delete","clear"],Am=new Map;function bv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||DP.includes(n)))return;const o=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&f.done]))[0]};return Am.set(e,o),o}zP(t=>({...t,get:(e,n,r)=>bv(e,n)||t.get(e,n,r),has:(e,n)=>!!bv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hp="@firebase/app",jv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new jy("@firebase/app"),UP="@firebase/app-compat",BP="@firebase/analytics-compat",FP="@firebase/analytics",WP="@firebase/app-check-compat",$P="@firebase/app-check",HP="@firebase/auth",qP="@firebase/auth-compat",ZP="@firebase/database",KP="@firebase/data-connect",GP="@firebase/database-compat",QP="@firebase/functions",YP="@firebase/functions-compat",JP="@firebase/installations",XP="@firebase/installations-compat",eI="@firebase/messaging",tI="@firebase/messaging-compat",nI="@firebase/performance",rI="@firebase/performance-compat",sI="@firebase/remote-config",iI="@firebase/remote-config-compat",aI="@firebase/storage",oI="@firebase/storage-compat",lI="@firebase/firestore",cI="@firebase/ai",uI="@firebase/firestore-compat",dI="firebase",hI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="[DEFAULT]",fI={[Hp]:"fire-core",[UP]:"fire-core-compat",[FP]:"fire-analytics",[BP]:"fire-analytics-compat",[$P]:"fire-app-check",[WP]:"fire-app-check-compat",[HP]:"fire-auth",[qP]:"fire-auth-compat",[ZP]:"fire-rtdb",[KP]:"fire-data-connect",[GP]:"fire-rtdb-compat",[QP]:"fire-fn",[YP]:"fire-fn-compat",[JP]:"fire-iid",[XP]:"fire-iid-compat",[eI]:"fire-fcm",[tI]:"fire-fcm-compat",[nI]:"fire-perf",[rI]:"fire-perf-compat",[sI]:"fire-rc",[iI]:"fire-rc-compat",[aI]:"fire-gcs",[oI]:"fire-gcs-compat",[lI]:"fire-fst",[uI]:"fire-fst-compat",[cI]:"fire-vertex","fire-js":"fire-js",[dI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,mI=new Map,Zp=new Map;function Nv(t,e){try{t.container.addComponent(e)}catch(n){zs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ta(t){const e=t.name;if(Zp.has(e))return zs.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,t);for(const n of Eh.values())Nv(n,t);for(const n of mI.values())Nv(n,t);return!0}function xf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new uu("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=hI;function U1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw _i.create("bad-app-name",{appName:String(s)});if(n||(n=L1()),!n)throw _i.create("no-options");const o=Eh.get(s);if(o){if(ka(n,o.options)&&ka(r,o.config))return o;throw _i.create("duplicate-app",{appName:s})}const l=new bP(s);for(const f of Zp.values())l.addComponent(f);const h=new gI(n,r,l);return Eh.set(s,h),h}function ky(t=qp){const e=Eh.get(t);if(!e&&t===qp&&L1())return U1();if(!e)throw _i.create("no-app",{appName:t});return e}function $r(t,e,n){let r=fI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zs.warn(l.join(" "));return}Ta(new Ei(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firebase-heartbeat-database",xI=1,Hc="firebase-heartbeat-store";let Rm=null;function B1(){return Rm||(Rm=LP(yI,xI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw _i.create("idb-open",{originalErrorMessage:t.message})})),Rm}async function vI(t){try{const n=(await B1()).transaction(Hc),r=await n.objectStore(Hc).get(F1(t));return await n.done,r}catch(e){if(e instanceof ts)zs.warn(e.message);else{const n=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zs.warn(n.message)}}}async function kv(t,e){try{const r=(await B1()).transaction(Hc,"readwrite");await r.objectStore(Hc).put(e,F1(t)),await r.done}catch(n){if(n instanceof ts)zs.warn(n.message);else{const r=_i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zs.warn(r.message)}}}function F1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=1024,_I=30;class bI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>_I){const l=kI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tv(),{heartbeatsToSend:r,unsentEntries:s}=jI(this._heartbeatsCache.heartbeats),o=Th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return zs.warn(n),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function jI(t,e=wI){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Ev(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ev(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uP()?dP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ev(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}function kI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){Ta(new Ei("platform-logger",e=>new OP(e),"PRIVATE")),Ta(new Ei("heartbeat",e=>new bI(e),"PRIVATE")),$r(Hp,jv,t),$r(Hp,jv,"esm2020"),$r("fire-js","")}TI("");function W1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EI=W1,$1=new uu("auth","Firebase",W1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new jy("@firebase/auth");function SI(t,...e){Sh.logLevel<=De.WARN&&Sh.warn(`Auth (${Oa}): ${t}`,...e)}function Hd(t,...e){Sh.logLevel<=De.ERROR&&Sh.error(`Auth (${Oa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,...e){throw Ty(t,...e)}function Hr(t,...e){return Ty(t,...e)}function H1(t,e,n){const r={...EI(),[e]:n};return new uu("auth","Firebase",r).create(e,{appName:t.name})}function Ns(t){return H1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ty(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $1.create(t,...e)}function je(t,e,...n){if(!t)throw Ty(e,...n)}function ws(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hd(e),new Error(e)}function As(t,e){t||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function PI(){return Sv()==="http:"||Sv()==="https:"}function Sv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PI()||aP()||"connection"in navigator)?navigator.onLine:!0}function CI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.shortDelay=e,this.longDelay=n,As(n>e,"Short delay should be less than long delay!"),this.isMobile=rP()||oP()}get(){return II()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t,e){As(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RI=new hu(3e4,6e4);function Ui(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ns(t,e,n,r,s={}){return Z1(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const h=du({key:t.config.apiKey,...l}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:f,...o};return iP()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Vi(t.emulatorConfig.host)&&(m.credentials="include"),q1.fetch()(await K1(t,t.config.apiHost,n,h),m)})}async function Z1(t,e,n){t._canInitEmulator=!1;const r={...zI,...e};try{const s=new DI(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw jd(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw jd(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw jd(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw jd(t,"user-disabled",l);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw H1(t,g,m);_r(t,g)}}catch(s){if(s instanceof ts)throw s;_r(t,"network-request-failed",{message:String(s)})}}async function fu(t,e,n,r,s={}){const o=await ns(t,e,n,r,s);return"mfaPendingCredential"in o&&_r(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function K1(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?Ey(t.config,s):`${t.config.apiScheme}://${s}`;return AI.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function LI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hr(this.auth,"network-request-failed")),RI.get())})}}function jd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Hr(t,e,r);return s.customData._tokenResponse=n,s}function Pv(t){return t!==void 0&&t.enterprise!==void 0}class MI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OI(t,e){return ns(t,"GET","/v2/recaptchaConfig",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(t,e){return ns(t,"POST","/v1/accounts:delete",e)}async function Ph(t,e){return ns(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UI(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=Sy(r);je(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:vc(Lm(s.auth_time)),issuedAtTime:vc(Lm(s.iat)),expirationTime:vc(Lm(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Lm(t){return Number(t)*1e3}function Sy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hd("JWT malformed, contained fewer than 3 sections"),null;try{const s=z1(n);return s?JSON.parse(s):(Hd("Failed to decode base64 JWT payload"),null)}catch(s){return Hd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Iv(t){const e=Sy(t);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ts&&BI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function BI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vc(this.lastLoginAt),this.creationTime=vc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(t){var x;const e=t.auth,n=await t.getIdToken(),r=await Ea(t,Ph(e,{idToken:n}));je(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(x=s.providerUserInfo)!=null&&x.length?G1(s.providerUserInfo):[],l=$I(t.providerData,o),h=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),m=h?f:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Gp(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function WI(t){const e=Ge(t);await Ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $I(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function G1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HI(t,e){const n=await Z1(t,{},async()=>{const r=du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await K1(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return t.emulatorConfig&&Vi(t.emulatorConfig.host)&&(f.credentials="include"),q1.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qI(t,e){return ns(t,"POST","/v2/accounts:revokeToken",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Iv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=Iv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await HI(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new Fo;return r&&(je(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(je(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(je(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t,e){je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new FI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ea(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UI(this,e)}reload(){return WI(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ih(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(Ns(this.auth));const e=await this.getIdToken();return await Ea(this,VI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,f=n._redirectEventId??void 0,m=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:x,emailVerified:_,isAnonymous:T,providerData:k,stsTokenManager:C}=n;je(x&&C,e,"internal-error");const A=Fo.fromJSON(this.name,C);je(typeof x=="string",e,"internal-error"),Gs(r,e.name),Gs(s,e.name),je(typeof _=="boolean",e,"internal-error"),je(typeof T=="boolean",e,"internal-error"),Gs(o,e.name),Gs(l,e.name),Gs(h,e.name),Gs(f,e.name),Gs(m,e.name),Gs(g,e.name);const E=new gr({uid:x,auth:e,email:s,emailVerified:_,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:A,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(E.providerData=k.map(S=>({...S}))),f&&(E._redirectEventId=f),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Fo;s.updateFromServerResponse(n);const o=new gr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ih(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?G1(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Fo;h.updateFromIdToken(r);const f=new gr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Gp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;function _s(t){As(t instanceof Function,"Expected a class definition");let e=Cv.get(t);return e?(As(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Q1.type="NONE";const zv=Q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e,n){return`firebase:${t}:${e}:${n}`}class Wo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=qd(this.userKey,s.apiKey,o),this.fullPersistenceKey=qd("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ph(this.auth,{idToken:e}).catch(()=>{});return n?gr._fromGetAccountInfoResponse(this.auth,n,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wo(_s(zv),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||_s(zv);const l=qd(r,e.config.apiKey,e.name);let h=null;for(const m of n)try{const g=await m._get(l);if(g){let x;if(typeof g=="string"){const _=await Ph(e,{idToken:g}).catch(()=>{});if(!_)break;x=await gr._fromGetAccountInfoResponse(e,_,g)}else x=gr._fromJSON(e,g);m!==o&&(h=x),o=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Wo(o,e,r):(o=f[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new Wo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ej(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nj(e))return"Blackberry";if(rj(e))return"Webos";if(J1(e))return"Safari";if((e.includes("chrome/")||X1(e))&&!e.includes("edge/"))return"Chrome";if(tj(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Y1(t=on()){return/firefox\//i.test(t)}function J1(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function X1(t=on()){return/crios\//i.test(t)}function ej(t=on()){return/iemobile/i.test(t)}function tj(t=on()){return/android/i.test(t)}function nj(t=on()){return/blackberry/i.test(t)}function rj(t=on()){return/webos/i.test(t)}function Py(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZI(t=on()){var e;return Py(t)&&!!((e=window.navigator)!=null&&e.standalone)}function KI(){return lP()&&document.documentMode===10}function sj(t=on()){return Py(t)||tj(t)||rj(t)||nj(t)||/windows phone/i.test(t)||ej(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t,e=[]){let n;switch(t){case"Browser":n=Av(on());break;case"Worker":n=`${Av(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,h)=>{try{const f=e(o);l(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(t,e={}){return ns(t,"GET","/v2/passwordPolicy",Ui(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=6;class JI{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??YI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rv(this),this.idTokenSubscription=new Rv(this),this.beforeStateQueue=new GI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ph(this,{idToken:e}),r=await gr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ln(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&(f!=null&&f.user)&&(r=f.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ih(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(Ns(this));const n=e?Ge(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(Ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(Ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QI(this),n=new JI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ij(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&SI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Va(t){return Ge(t)}class Rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=gP(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eC(t){vf=t}function aj(t){return vf.loadJS(t)}function tC(){return vf.recaptchaEnterpriseScript}function nC(){return vf.gapiScript}function rC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class sC{constructor(){this.enterprise=new iC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class iC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const aC="recaptcha-enterprise",oj="NO_RECAPTCHA";class oC{constructor(e){this.type=aC,this.auth=Va(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{OI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new MI(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(f=>{h(f)})})}function s(o,l,h){const f=window.grecaptcha;Pv(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(oj)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sC().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(h=>{if(!n&&Pv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=tC();f.length!==0&&(f+=h),aj(f).then(()=>{s(h,o,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function Lv(t,e,n,r=!1,s=!1){const o=new oC(t);let l;if(s)l=oj;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Qp(t,e,n,r,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Lv(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Lv(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t,e){const n=xf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(ka(o,e??{}))return s;_r(s,"already-initialized")}return n.initialize({options:e})}function cC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_s);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uC(t,e,n){const r=Va(t);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=lj(e),{host:l,port:h}=dC(e),f=h===null?"":`:${h}`,m={url:`${o}//${l}${f}/`},g=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(ka(m,r.config.emulator)&&ka(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Vi(l)?(_y(`${o}//${l}${f}`),by("Auth",!0)):hC()}function lj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dC(t){const e=lj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:Dv(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:Dv(l)}}}function Dv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,n){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function fC(t,e){return ns(t,"POST","/v1/accounts:update",e)}async function mC(t,e){return ns(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(t,e){return fu(t,"POST","/v1/accounts:signInWithPassword",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(t,e){return fu(t,"POST","/v1/accounts:signInWithEmailLink",Ui(t,e))}async function yC(t,e){return fu(t,"POST","/v1/accounts:signInWithEmailLink",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Iy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new qc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new qc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qp(e,n,"signInWithPassword",pC);case"emailLink":return gC(e,{email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qp(e,r,"signUpPassword",mC);case"emailLink":return yC(e,{idToken:n,email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t,e){return fu(t,"POST","/v1/accounts:signInWithIdp",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="http://localhost";class Sa extends Iy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=n;if(!r||!s)return null;const l=new Sa(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return $o(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$o(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$o(e,n)}buildRequest(){const e={requestUri:xC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=du(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wC(t){const e=rc(sc(t)).link,n=e?rc(sc(e)).deep_link_id:null,r=rc(sc(t)).deep_link_id;return(r?rc(sc(r)).link:null)||r||n||e||t}class Cy{constructor(e){const n=rc(sc(e)),r=n.apiKey??null,s=n.oobCode??null,o=vC(n.mode??null);je(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=wC(e);try{return new Cy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.providerId=Bi.PROVIDER_ID}static credential(e,n){return qc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cy.parseLink(n);return je(r,"argument-error"),qc._fromEmailAndCode(e,r.code,r.tenantId)}}Bi.PROVIDER_ID="password";Bi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends cj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends mu{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Sa._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ri.credential(n,r)}catch{return null}}}ri.GOOGLE_SIGN_IN_METHOD="google.com";ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends mu{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.GITHUB_SIGN_IN_METHOD="github.com";si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends mu{constructor(){super("twitter.com")}static credential(e,n){return Sa._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t,e){return fu(t,"POST","/v1/accounts:signUp",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await gr._fromIdTokenResponse(e,r,s),l=Mv(r);return new Pa({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Mv(r);return new Pa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Mv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends ts{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ch(e,n,r,s)}}function uj(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(t,o,e,r):o})}async function bC(t,e,n=!1){const r=await Ea(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e,n=!1){const{auth:r}=t;if(Ln(r.app))return Promise.reject(Ns(r));const s="reauthenticate";try{const o=await Ea(t,uj(r,s,e,t),n);je(o.idToken,r,"internal-error");const l=Sy(o.idToken);je(l,r,"internal-error");const{sub:h}=l;return je(t.uid===h,r,"user-mismatch"),Pa._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&_r(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(t,e,n=!1){if(Ln(t.app))return Promise.reject(Ns(t));const r="signIn",s=await uj(t,r,e),o=await Pa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function jC(t,e){return hj(Va(t),e)}async function fj(t,e){return dj(Ge(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t){const e=Va(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NC(t,e,n){if(Ln(t.app))return Promise.reject(Ns(t));const r=Va(t),l=await Qp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_C).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&mj(t),f}),h=await Pa._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function kC(t,e,n){return Ln(t.app)?Promise.reject(Ns(t)):jC(Ge(t),Bi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mj(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(t,e){return ns(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ge(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Ea(r,TC(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function EC(t,e){return SC(Ge(t),null,e)}async function SC(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const l=await Ea(t,fC(r,o));await t._updateTokensIfNecessary(l,!0)}function PC(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function IC(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function CC(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function zC(t){return Ge(t).signOut()}async function AC(t){return Ge(t).delete()}const zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=1e3,LC=10;class gj extends pj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);KI()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gj.type="LOCAL";const DC=gj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj extends pj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yj.type="SESSION";const xj=yj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),f=await MC(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,f)=>{const m=zy("",20);s.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(x){const _=x;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(_.data.response);break;default:clearTimeout(g),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){return window}function VC(t){qr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(){return typeof qr().WorkerGlobalScope<"u"&&typeof qr().importScripts=="function"}async function UC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function FC(){return vj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="firebaseLocalStorageDb",WC=1,Ah="firebaseLocalStorage",_j="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _f(t,e){return t.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function $C(){const t=indexedDB.deleteDatabase(wj);return new pu(t).toPromise()}function Jp(){const t=indexedDB.open(wj,WC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ah,{keyPath:_j})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ah)?e(r):(r.close(),await $C(),e(await Jp()))})})}async function Ov(t,e,n){const r=_f(t,!0).put({[_j]:e,value:n});return new pu(r).toPromise()}async function HC(t,e){const n=_f(t,!1).get(e),r=await new pu(n).toPromise();return r===void 0?null:r.value}function Vv(t,e){const n=_f(t,!0).delete(e);return new pu(n).toPromise()}const qC=800,ZC=3;class bj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ZC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wf._getInstance(FC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await UC(),!this.activeServiceWorker)return;this.sender=new OC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await Ov(e,zh,"1"),await Vv(e,zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ov(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>HC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=_f(s,!1).getAll();return new pu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bj.type="LOCAL";const KC=bj;new hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t,e){return e?_s(e):(je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay extends Iy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QC(t){return hj(t.auth,new Ay(t),t.bypassAuthState)}function YC(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),dj(n,new Ay(t),t.bypassAuthState)}async function JC(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),bC(n,new Ay(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QC;case"linkViaPopup":case"linkViaRedirect":return JC;case"reauthViaPopup":case"reauthViaRedirect":return YC;default:_r(this.auth,"internal-error")}}resolve(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new hu(2e3,1e4);class Lo extends jj{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const e=zy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XC.get())};e()}}Lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez="pendingRedirect",Zd=new Map;class tz extends jj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const r=await nz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nz(t,e){const n=iz(e),r=sz(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function rz(t,e){Zd.set(t._key(),e)}function sz(t){return _s(t._redirectPersistence)}function iz(t){return qd(ez,t.config.apiKey,t.name)}async function az(t,e,n=!1){if(Ln(t.app))return Promise.reject(Ns(t));const r=Va(t),s=GC(r,e),l=await new tz(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=10*60*1e3;class lz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Nj(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oz&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uv(e))}saveEventToCache(e){this.cachedEventUids.add(Uv(e)),this.lastProcessedEventTime=Date.now()}}function Uv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Nj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(t,e={}){return ns(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hz=/^https?/;async function fz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uz(t);for(const n of e)try{if(mz(n))return}catch{}_r(t,"unauthorized-domain")}function mz(t){const e=Kp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!hz.test(n))return!1;if(dz.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz=new hu(3e4,6e4);function Bv(){const t=qr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gz(t){return new Promise((e,n)=>{var s,o,l;function r(){Bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bv(),n(Hr(t,"network-request-failed"))},timeout:pz.get()})}if((o=(s=qr().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=qr().gapi)!=null&&l.load)r();else{const h=rC("iframefcb");return qr()[h]=()=>{gapi.load?r():n(Hr(t,"network-request-failed"))},aj(`${nC()}?onload=${h}`).catch(f=>n(f))}}).catch(e=>{throw Kd=null,e})}let Kd=null;function yz(t){return Kd=Kd||gz(t),Kd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=new hu(5e3,15e3),vz="__/auth/iframe",wz="emulator/auth/iframe",_z={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jz(t){const e=t.config;je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ey(e,wz):`https://${t.config.authDomain}/${vz}`,r={apiKey:e.apiKey,appName:t.name,v:Oa},s=bz.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${du(r).slice(1)}`}async function Nz(t){const e=await yz(t),n=qr().gapi;return je(n,t,"internal-error"),e.open({where:document.body,url:jz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_z,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Hr(t,"network-request-failed"),h=qr().setTimeout(()=>{o(l)},xz.get());function f(){qr().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tz=500,Ez=600,Sz="_blank",Pz="http://localhost";class Fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Iz(t,e,n,r=Tz,s=Ez){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...kz,width:r.toString(),height:s.toString(),top:o,left:l},m=on().toLowerCase();n&&(h=X1(m)?Sz:n),Y1(m)&&(e=e||Pz,f.scrollbars="yes");const g=Object.entries(f).reduce((_,[T,k])=>`${_}${T}=${k},`,"");if(ZI(m)&&h!=="_self")return Cz(e||"",h),new Fv(null);const x=window.open(e||"",h,g);je(x,t,"popup-blocked");try{x.focus()}catch{}return new Fv(x)}function Cz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz="__/auth/handler",Az="emulator/auth/handler",Rz=encodeURIComponent("fac");async function Wv(t,e,n,r,s,o){je(t.config.authDomain,t,"auth-domain-config-required"),je(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oa,eventId:s};if(e instanceof cj){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",pP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,x]of Object.entries({}))l[g]=x}if(e instanceof mu){const g=e.getScopes().filter(x=>x!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const f=await t._getAppCheckToken(),m=f?`#${Rz}=${encodeURIComponent(f)}`:"";return`${Lz(t)}?${du(h).slice(1)}${m}`}function Lz({config:t}){return t.emulator?Ey(t,Az):`https://${t.authDomain}/${zz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="webStorageSupport";class Dz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xj,this._completeRedirectFn=az,this._overrideRedirectResult=rz}async _openPopup(e,n,r,s){var l;As((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await Wv(e,n,r,Kp(),s);return Iz(e,o,zy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Wv(e,n,r,Kp(),s);return VC(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(As(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Nz(e),r=new lz(e);return n.register("authEvent",s=>(je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dm,{type:Dm},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Dm];o!==void 0&&n(!!o),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sj()||J1()||Py()}}const Mz=Dz;var $v="@firebase/auth",Hv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Uz(t){Ta(new Ei("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;je(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ij(t)},m=new XI(r,s,o,f);return cC(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ta(new Ei("auth-internal",e=>{const n=Va(e.getProvider("auth").getImmediate());return(r=>new Oz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r($v,Hv,Vz(t)),$r($v,Hv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=5*60,Fz=D1("authIdTokenMaxAge")||Bz;let qv=null;const Wz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Fz)return;const s=n==null?void 0:n.token;qv!==s&&(qv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $z(t=ky()){const e=xf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lC(t,{popupRedirectResolver:Mz,persistence:[KC,DC,xj]}),r=D1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=Wz(o.toString());IC(n,l,()=>l(n.currentUser)),PC(n,h=>l(h))}}const s=A1("auth");return s&&uC(n,`http://${s}`),n}function Hz(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}eC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Hr("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",Hz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Uz("Browser");var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,kj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,b){function z(){}z.prototype=b.prototype,N.F=b.prototype,N.prototype=new z,N.prototype.constructor=N,N.D=function(M,V,$){for(var U=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)U[Te-2]=arguments[Te];return b.prototype[V].apply(M,U)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,b,z){z||(z=0);const M=Array(16);if(typeof b=="string")for(var V=0;V<16;++V)M[V]=b.charCodeAt(z++)|b.charCodeAt(z++)<<8|b.charCodeAt(z++)<<16|b.charCodeAt(z++)<<24;else for(V=0;V<16;++V)M[V]=b[z++]|b[z++]<<8|b[z++]<<16|b[z++]<<24;b=N.g[0],z=N.g[1],V=N.g[2];let $=N.g[3],U;U=b+($^z&(V^$))+M[0]+3614090360&4294967295,b=z+(U<<7&4294967295|U>>>25),U=$+(V^b&(z^V))+M[1]+3905402710&4294967295,$=b+(U<<12&4294967295|U>>>20),U=V+(z^$&(b^z))+M[2]+606105819&4294967295,V=$+(U<<17&4294967295|U>>>15),U=z+(b^V&($^b))+M[3]+3250441966&4294967295,z=V+(U<<22&4294967295|U>>>10),U=b+($^z&(V^$))+M[4]+4118548399&4294967295,b=z+(U<<7&4294967295|U>>>25),U=$+(V^b&(z^V))+M[5]+1200080426&4294967295,$=b+(U<<12&4294967295|U>>>20),U=V+(z^$&(b^z))+M[6]+2821735955&4294967295,V=$+(U<<17&4294967295|U>>>15),U=z+(b^V&($^b))+M[7]+4249261313&4294967295,z=V+(U<<22&4294967295|U>>>10),U=b+($^z&(V^$))+M[8]+1770035416&4294967295,b=z+(U<<7&4294967295|U>>>25),U=$+(V^b&(z^V))+M[9]+2336552879&4294967295,$=b+(U<<12&4294967295|U>>>20),U=V+(z^$&(b^z))+M[10]+4294925233&4294967295,V=$+(U<<17&4294967295|U>>>15),U=z+(b^V&($^b))+M[11]+2304563134&4294967295,z=V+(U<<22&4294967295|U>>>10),U=b+($^z&(V^$))+M[12]+1804603682&4294967295,b=z+(U<<7&4294967295|U>>>25),U=$+(V^b&(z^V))+M[13]+4254626195&4294967295,$=b+(U<<12&4294967295|U>>>20),U=V+(z^$&(b^z))+M[14]+2792965006&4294967295,V=$+(U<<17&4294967295|U>>>15),U=z+(b^V&($^b))+M[15]+1236535329&4294967295,z=V+(U<<22&4294967295|U>>>10),U=b+(V^$&(z^V))+M[1]+4129170786&4294967295,b=z+(U<<5&4294967295|U>>>27),U=$+(z^V&(b^z))+M[6]+3225465664&4294967295,$=b+(U<<9&4294967295|U>>>23),U=V+(b^z&($^b))+M[11]+643717713&4294967295,V=$+(U<<14&4294967295|U>>>18),U=z+($^b&(V^$))+M[0]+3921069994&4294967295,z=V+(U<<20&4294967295|U>>>12),U=b+(V^$&(z^V))+M[5]+3593408605&4294967295,b=z+(U<<5&4294967295|U>>>27),U=$+(z^V&(b^z))+M[10]+38016083&4294967295,$=b+(U<<9&4294967295|U>>>23),U=V+(b^z&($^b))+M[15]+3634488961&4294967295,V=$+(U<<14&4294967295|U>>>18),U=z+($^b&(V^$))+M[4]+3889429448&4294967295,z=V+(U<<20&4294967295|U>>>12),U=b+(V^$&(z^V))+M[9]+568446438&4294967295,b=z+(U<<5&4294967295|U>>>27),U=$+(z^V&(b^z))+M[14]+3275163606&4294967295,$=b+(U<<9&4294967295|U>>>23),U=V+(b^z&($^b))+M[3]+4107603335&4294967295,V=$+(U<<14&4294967295|U>>>18),U=z+($^b&(V^$))+M[8]+1163531501&4294967295,z=V+(U<<20&4294967295|U>>>12),U=b+(V^$&(z^V))+M[13]+2850285829&4294967295,b=z+(U<<5&4294967295|U>>>27),U=$+(z^V&(b^z))+M[2]+4243563512&4294967295,$=b+(U<<9&4294967295|U>>>23),U=V+(b^z&($^b))+M[7]+1735328473&4294967295,V=$+(U<<14&4294967295|U>>>18),U=z+($^b&(V^$))+M[12]+2368359562&4294967295,z=V+(U<<20&4294967295|U>>>12),U=b+(z^V^$)+M[5]+4294588738&4294967295,b=z+(U<<4&4294967295|U>>>28),U=$+(b^z^V)+M[8]+2272392833&4294967295,$=b+(U<<11&4294967295|U>>>21),U=V+($^b^z)+M[11]+1839030562&4294967295,V=$+(U<<16&4294967295|U>>>16),U=z+(V^$^b)+M[14]+4259657740&4294967295,z=V+(U<<23&4294967295|U>>>9),U=b+(z^V^$)+M[1]+2763975236&4294967295,b=z+(U<<4&4294967295|U>>>28),U=$+(b^z^V)+M[4]+1272893353&4294967295,$=b+(U<<11&4294967295|U>>>21),U=V+($^b^z)+M[7]+4139469664&4294967295,V=$+(U<<16&4294967295|U>>>16),U=z+(V^$^b)+M[10]+3200236656&4294967295,z=V+(U<<23&4294967295|U>>>9),U=b+(z^V^$)+M[13]+681279174&4294967295,b=z+(U<<4&4294967295|U>>>28),U=$+(b^z^V)+M[0]+3936430074&4294967295,$=b+(U<<11&4294967295|U>>>21),U=V+($^b^z)+M[3]+3572445317&4294967295,V=$+(U<<16&4294967295|U>>>16),U=z+(V^$^b)+M[6]+76029189&4294967295,z=V+(U<<23&4294967295|U>>>9),U=b+(z^V^$)+M[9]+3654602809&4294967295,b=z+(U<<4&4294967295|U>>>28),U=$+(b^z^V)+M[12]+3873151461&4294967295,$=b+(U<<11&4294967295|U>>>21),U=V+($^b^z)+M[15]+530742520&4294967295,V=$+(U<<16&4294967295|U>>>16),U=z+(V^$^b)+M[2]+3299628645&4294967295,z=V+(U<<23&4294967295|U>>>9),U=b+(V^(z|~$))+M[0]+4096336452&4294967295,b=z+(U<<6&4294967295|U>>>26),U=$+(z^(b|~V))+M[7]+1126891415&4294967295,$=b+(U<<10&4294967295|U>>>22),U=V+(b^($|~z))+M[14]+2878612391&4294967295,V=$+(U<<15&4294967295|U>>>17),U=z+($^(V|~b))+M[5]+4237533241&4294967295,z=V+(U<<21&4294967295|U>>>11),U=b+(V^(z|~$))+M[12]+1700485571&4294967295,b=z+(U<<6&4294967295|U>>>26),U=$+(z^(b|~V))+M[3]+2399980690&4294967295,$=b+(U<<10&4294967295|U>>>22),U=V+(b^($|~z))+M[10]+4293915773&4294967295,V=$+(U<<15&4294967295|U>>>17),U=z+($^(V|~b))+M[1]+2240044497&4294967295,z=V+(U<<21&4294967295|U>>>11),U=b+(V^(z|~$))+M[8]+1873313359&4294967295,b=z+(U<<6&4294967295|U>>>26),U=$+(z^(b|~V))+M[15]+4264355552&4294967295,$=b+(U<<10&4294967295|U>>>22),U=V+(b^($|~z))+M[6]+2734768916&4294967295,V=$+(U<<15&4294967295|U>>>17),U=z+($^(V|~b))+M[13]+1309151649&4294967295,z=V+(U<<21&4294967295|U>>>11),U=b+(V^(z|~$))+M[4]+4149444226&4294967295,b=z+(U<<6&4294967295|U>>>26),U=$+(z^(b|~V))+M[11]+3174756917&4294967295,$=b+(U<<10&4294967295|U>>>22),U=V+(b^($|~z))+M[2]+718787259&4294967295,V=$+(U<<15&4294967295|U>>>17),U=z+($^(V|~b))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(V+(U<<21&4294967295|U>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+$&4294967295}r.prototype.v=function(N,b){b===void 0&&(b=N.length);const z=b-this.blockSize,M=this.C;let V=this.h,$=0;for(;$<b;){if(V==0)for(;$<=z;)s(this,N,$),$+=this.blockSize;if(typeof N=="string"){for(;$<b;)if(M[V++]=N.charCodeAt($++),V==this.blockSize){s(this,M),V=0;break}}else for(;$<b;)if(M[V++]=N[$++],V==this.blockSize){s(this,M),V=0;break}}this.h=V,this.o+=b},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;b=this.o*8;for(var z=N.length-8;z<N.length;++z)N[z]=b&255,b/=256;for(this.v(N),N=Array(16),b=0,z=0;z<4;++z)for(let M=0;M<32;M+=8)N[b++]=this.g[z]>>>M&255;return N};function o(N,b){var z=h;return Object.prototype.hasOwnProperty.call(z,N)?z[N]:z[N]=b(N)}function l(N,b){this.h=b;const z=[];let M=!0;for(let V=N.length-1;V>=0;V--){const $=N[V]|0;M&&$==b||(z[V]=$,M=!1)}this.g=z}var h={};function f(N){return-128<=N&&N<128?o(N,function(b){return new l([b|0],b<0?-1:0)}):new l([N|0],N<0?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return x;if(N<0)return A(m(-N));const b=[];let z=1;for(let M=0;N>=z;M++)b[M]=N/z|0,z*=4294967296;return new l(b,0)}function g(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return A(g(N.substring(1),b));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const z=m(Math.pow(b,8));let M=x;for(let $=0;$<N.length;$+=8){var V=Math.min(8,N.length-$);const U=parseInt(N.substring($,$+V),b);V<8?(V=m(Math.pow(b,V)),M=M.j(V).add(m(U))):(M=M.j(z),M=M.add(m(U)))}return M}var x=f(0),_=f(1),T=f(16777216);t=l.prototype,t.m=function(){if(C(this))return-A(this).m();let N=0,b=1;for(let z=0;z<this.g.length;z++){const M=this.i(z);N+=(M>=0?M:4294967296+M)*b,b*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(k(this))return"0";if(C(this))return"-"+A(this).toString(N);const b=m(Math.pow(N,6));var z=this;let M="";for(;;){const V=H(z,b).g;z=E(z,V.j(b));let $=((z.g.length>0?z.g[0]:z.h)>>>0).toString(N);if(z=V,k(z))return $+M;for(;$.length<6;)$="0"+$;M=$+M}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function k(N){if(N.h!=0)return!1;for(let b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function C(N){return N.h==-1}t.l=function(N){return N=E(this,N),C(N)?-1:k(N)?0:1};function A(N){const b=N.g.length,z=[];for(let M=0;M<b;M++)z[M]=~N.g[M];return new l(z,~N.h).add(_)}t.abs=function(){return C(this)?A(this):this},t.add=function(N){const b=Math.max(this.g.length,N.g.length),z=[];let M=0;for(let V=0;V<=b;V++){let $=M+(this.i(V)&65535)+(N.i(V)&65535),U=($>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);M=U>>>16,$&=65535,U&=65535,z[V]=U<<16|$}return new l(z,z[z.length-1]&-2147483648?-1:0)};function E(N,b){return N.add(A(b))}t.j=function(N){if(k(this)||k(N))return x;if(C(this))return C(N)?A(this).j(A(N)):A(A(this).j(N));if(C(N))return A(this.j(A(N)));if(this.l(T)<0&&N.l(T)<0)return m(this.m()*N.m());const b=this.g.length+N.g.length,z=[];for(var M=0;M<2*b;M++)z[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<N.g.length;V++){const $=this.i(M)>>>16,U=this.i(M)&65535,Te=N.i(V)>>>16,fe=N.i(V)&65535;z[2*M+2*V]+=U*fe,S(z,2*M+2*V),z[2*M+2*V+1]+=$*fe,S(z,2*M+2*V+1),z[2*M+2*V+1]+=U*Te,S(z,2*M+2*V+1),z[2*M+2*V+2]+=$*Te,S(z,2*M+2*V+2)}for(N=0;N<b;N++)z[N]=z[2*N+1]<<16|z[2*N];for(N=b;N<2*b;N++)z[N]=0;return new l(z,0)};function S(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function I(N,b){this.g=N,this.h=b}function H(N,b){if(k(b))throw Error("division by zero");if(k(N))return new I(x,x);if(C(N))return b=H(A(N),b),new I(A(b.g),A(b.h));if(C(b))return b=H(N,A(b)),new I(A(b.g),b.h);if(N.g.length>30){if(C(N)||C(b))throw Error("slowDivide_ only works with positive integers.");for(var z=_,M=b;M.l(N)<=0;)z=O(z),M=O(M);var V=R(z,1),$=R(M,1);for(M=R(M,2),z=R(z,2);!k(M);){var U=$.add(M);U.l(N)<=0&&(V=V.add(z),$=U),M=R(M,1),z=R(z,1)}return b=E(N,V.j(b)),new I(V,b)}for(V=x;N.l(b)>=0;){for(z=Math.max(1,Math.floor(N.m()/b.m())),M=Math.ceil(Math.log(z)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),$=m(z),U=$.j(b);C(U)||U.l(N)>0;)z-=M,$=m(z),U=$.j(b);k($)&&($=_),V=V.add($),N=E(N,U)}return new I(V,N)}t.B=function(N){return H(this,N).h},t.and=function(N){const b=Math.max(this.g.length,N.g.length),z=[];for(let M=0;M<b;M++)z[M]=this.i(M)&N.i(M);return new l(z,this.h&N.h)},t.or=function(N){const b=Math.max(this.g.length,N.g.length),z=[];for(let M=0;M<b;M++)z[M]=this.i(M)|N.i(M);return new l(z,this.h|N.h)},t.xor=function(N){const b=Math.max(this.g.length,N.g.length),z=[];for(let M=0;M<b;M++)z[M]=this.i(M)^N.i(M);return new l(z,this.h^N.h)};function O(N){const b=N.g.length+1,z=[];for(let M=0;M<b;M++)z[M]=N.i(M)<<1|N.i(M-1)>>>31;return new l(z,N.h)}function R(N,b){const z=b>>5;b%=32;const M=N.g.length-z,V=[];for(let $=0;$<M;$++)V[$]=b>0?N.i($+z)>>>b|N.i($+z+1)<<32-b:N.i($+z);return new l(V,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,kj=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=g,bi=l}).apply(typeof Zv<"u"?Zv:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tj,ic,Ej,Gd,Xp,Sj,Pj,Ij;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var y=0;y<u.length;++y){var w=u[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(u,y){if(y)e:{var w=r;u=u.split(".");for(var P=0;P<u.length-1;P++){var q=u[P];if(!(q in w))break e;w=w[q]}u=u[u.length-1],P=w[u],y=y(P),y!=P&&y!=null&&e(w,u,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(y){var w=[],P;for(P in y)Object.prototype.hasOwnProperty.call(y,P)&&w.push([P,y[P]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function f(u,y,w){return u.call.apply(u.bind,arguments)}function m(u,y,w){return m=f,m.apply(null,arguments)}function g(u,y){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function x(u,y){function w(){}w.prototype=y.prototype,u.Z=y.prototype,u.prototype=new w,u.prototype.constructor=u,u.Ob=function(P,q,K){for(var oe=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)oe[Se-2]=arguments[Se];return y.prototype[q].apply(P,oe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function T(u){const y=u.length;if(y>0){const w=Array(y);for(let P=0;P<y;P++)w[P]=u[P];return w}return[]}function k(u,y){for(let P=1;P<arguments.length;P++){const q=arguments[P];var w=typeof q;if(w=w!="object"?w:q?Array.isArray(q)?"array":w:"null",w=="array"||w=="object"&&typeof q.length=="number"){w=u.length||0;const K=q.length||0;u.length=w+K;for(let oe=0;oe<K;oe++)u[w+oe]=q[oe]}else u.push(q)}}class C{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function A(u){l.setTimeout(()=>{throw u},0)}function E(){var u=N;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class S{constructor(){this.h=this.g=null}add(y,w){const P=I.get();P.set(y,w),this.h?this.h.next=P:this.g=P,this.h=P}}var I=new C(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let O,R=!1,N=new S,b=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(z)}};function z(){for(var u;u=E();){try{u.h.call(u.g)}catch(w){A(w)}var y=I;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}R=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};l.addEventListener("test",w,y),l.removeEventListener("test",w,y)}catch{}return u}();function U(u){return/^[\s\xa0]*$/.test(u)}function Te(u,y){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}x(Te,V),Te.prototype.init=function(u,y){const w=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(w=="mouseover"?y=u.fromElement:w=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),le=0;function re(u,y,w,P,q){this.listener=u,this.proxy=null,this.src=y,this.type=w,this.capture=!!P,this.ha=q,this.key=++le,this.da=this.fa=!1}function B(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Q(u,y,w){for(const P in u)y.call(w,u[P],P,u)}function F(u,y){for(const w in u)y.call(void 0,u[w],w,u)}function ee(u){const y={};for(const w in u)y[w]=u[w];return y}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(u,y){let w,P;for(let q=1;q<arguments.length;q++){P=arguments[q];for(w in P)u[w]=P[w];for(let K=0;K<Y.length;K++)w=Y[K],Object.prototype.hasOwnProperty.call(P,w)&&(u[w]=P[w])}}function X(u){this.src=u,this.g={},this.h=0}X.prototype.add=function(u,y,w,P,q){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const oe=ce(u,y,P,q);return oe>-1?(y=u[oe],w||(y.fa=!1)):(y=new re(y,this.src,K,!!P,q),y.fa=w,u.push(y)),y};function se(u,y){const w=y.type;if(w in u.g){var P=u.g[w],q=Array.prototype.indexOf.call(P,y,void 0),K;(K=q>=0)&&Array.prototype.splice.call(P,q,1),K&&(B(y),u.g[w].length==0&&(delete u.g[w],u.h--))}}function ce(u,y,w,P){for(let q=0;q<u.length;++q){const K=u[q];if(!K.da&&K.listener==y&&K.capture==!!w&&K.ha==P)return q}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),_e={};function Qe(u,y,w,P,q){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Qe(u,y[K],w,P,q);return null}return w=$i(w),u&&u[fe]?u.J(y,w,h(P)?!!P.capture:!1,q):jt(u,y,w,!1,P,q)}function jt(u,y,w,P,q,K){if(!y)throw Error("Invalid event type");const oe=h(q)?!!q.capture:!!q;let Se=yn(u);if(Se||(u[Ve]=Se=new X(u)),w=Se.add(y,w,P,oe,K),w.proxy)return w;if(P=J(),w.proxy=P,P.src=u,P.listener=w,u.addEventListener)$||(q=oe),q===void 0&&(q=!1),u.addEventListener(y.toString(),P,q);else if(u.attachEvent)u.attachEvent(Re(y.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function J(){function u(w){return y.call(u.src,u.listener,w)}const y=rt;return u}function ve(u,y,w,P,q){if(Array.isArray(y))for(var K=0;K<y.length;K++)ve(u,y[K],w,P,q);else P=h(P)?!!P.capture:!!P,w=$i(w),u&&u[fe]?(u=u.i,K=String(y).toString(),K in u.g&&(y=u.g[K],w=ce(y,w,P,q),w>-1&&(B(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete u.g[K],u.h--)))):u&&(u=yn(u))&&(y=u.g[y.toString()],u=-1,y&&(u=ce(y,w,P,q)),(w=u>-1?y[u]:null)&&Ue(w))}function Ue(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[fe])se(y.i,u);else{var w=u.type,P=u.proxy;y.removeEventListener?y.removeEventListener(w,P,u.capture):y.detachEvent?y.detachEvent(Re(w),P):y.addListener&&y.removeListener&&y.removeListener(P),(w=yn(y))?(se(w,u),w.h==0&&(w.src=null,y[Ve]=null)):B(u)}}}function Re(u){return u in _e?_e[u]:_e[u]="on"+u}function rt(u,y){if(u.da)u=!0;else{y=new Te(y,this);const w=u.listener,P=u.ha||u.src;u.fa&&Ue(u),u=w.call(P,y)}return u}function yn(u){return u=u[Ve],u instanceof X?u:null}var rs="__closure_events_fn_"+(Math.random()*1e9>>>0);function $i(u){return typeof u=="function"?u:(u[rs]||(u[rs]=function(y){return u.handleEvent(y)}),u[rs])}function Dt(){M.call(this),this.i=new X(this),this.M=this,this.G=null}x(Dt,M),Dt.prototype[fe]=!0,Dt.prototype.removeEventListener=function(u,y,w,P){ve(this,u,y,w,P)};function Mt(u,y){var w,P=u.G;if(P)for(w=[];P;P=P.G)w.push(P);if(u=u.M,P=y.type||y,typeof y=="string")y=new V(y,u);else if(y instanceof V)y.target=y.target||u;else{var q=y;y=new V(P,u),pe(y,q)}q=!0;let K,oe;if(w)for(oe=w.length-1;oe>=0;oe--)K=y.g=w[oe],q=Os(K,P,!0,y)&&q;if(K=y.g=u,q=Os(K,P,!0,y)&&q,q=Os(K,P,!1,y)&&q,w)for(oe=0;oe<w.length;oe++)K=y.g=w[oe],q=Os(K,P,!1,y)&&q}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const w=u.g[y];for(let P=0;P<w.length;P++)B(w[P]);delete u.g[y],u.h--}}this.G=null},Dt.prototype.J=function(u,y,w,P){return this.i.add(String(u),y,!1,w,P)},Dt.prototype.K=function(u,y,w,P){return this.i.add(String(u),y,!0,w,P)};function Os(u,y,w,P){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let K=0;K<y.length;++K){const oe=y[K];if(oe&&!oe.da&&oe.capture==w){const Se=oe.listener,He=oe.ha||oe.src;oe.fa&&se(u.i,oe),q=Se.call(He,P)!==!1&&q}}return q&&!P.defaultPrevented}function Su(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:l.setTimeout(u,y||0)}function xl(u){u.g=Su(()=>{u.g=null,u.i&&(u.i=!1,xl(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class $f extends M{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:xl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(u){M.call(this),this.h=u,this.g={}}x(Hi,M);var Wa=[];function vl(u){Q(u.g,function(y,w){this.g.hasOwnProperty(w)&&Ue(y)},u),u.g={}}Hi.prototype.N=function(){Hi.Z.N.call(this),vl(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $a=l.JSON.stringify,Hf=l.JSON.parse,Pu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function wl(){}function Iu(){}var Vs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qi(){V.call(this,"d")}x(qi,V);function Ha(){V.call(this,"c")}x(Ha,V);var ss={},Us=null;function qa(){return Us=Us||new Dt}ss.Ia="serverreachability";function Cu(u){V.call(this,ss.Ia,u)}x(Cu,V);function Bs(u){const y=qa();Mt(y,new Cu(y))}ss.STAT_EVENT="statevent";function _l(u,y){V.call(this,ss.STAT_EVENT,u),this.stat=y}x(_l,V);function Ot(u){const y=qa();Mt(y,new _l(y,u))}ss.Ja="timingevent";function zu(u,y){V.call(this,ss.Ja,u),this.size=y}x(zu,V);function Zi(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},y)}function Ki(){this.g=!0}Ki.prototype.ua=function(){this.g=!1};function qf(u,y,w,P,q,K){u.info(function(){if(u.g)if(K){var oe="",Se=K.split("&");for(let Ze=0;Ze<Se.length;Ze++){var He=Se[Ze].split("=");if(He.length>1){const vt=He[0];He=He[1];const Gn=vt.split("_");oe=Gn.length>=2&&Gn[1]=="type"?oe+(vt+"="+He+"&"):oe+(vt+"=redacted&")}}}else oe=null;else oe=K;return"XMLHTTP REQ ("+P+") [attempt "+q+"]: "+y+`
`+w+`
`+oe})}function Zf(u,y,w,P,q,K,oe){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+q+"]: "+y+`
`+w+`
`+K+" "+oe})}function Fs(u,y,w,P){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Kf(u,w)+(P?" "+P:"")})}function bl(u,y){u.info(function(){return"TIMEOUT: "+y})}Ki.prototype.info=function(){};function Kf(u,y){if(!u.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var w=K[u];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var q=P[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<P.length;oe++)P[oe]=""}}}}return $a(K)}catch{return y}}var Za={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Au={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ru;function xn(){}x(xn,wl),xn.prototype.g=function(){return new XMLHttpRequest},Ru=new xn;function xe(u){return encodeURIComponent(String(u))}function Lu(u){var y=1;u=u.split(":");const w=[];for(;y>0&&u.length;)w.push(u.shift()),y--;return u.length&&w.push(u.join(":")),w}function or(u,y,w,P){this.j=u,this.i=y,this.l=w,this.S=P||1,this.V=new Hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new jl}function jl(){this.i=null,this.g="",this.h=!1}var Nl={},Gi={};function Ka(u,y,w){u.M=1,u.A=et(cn(y)),u.u=w,u.R=!0,is(u,null)}function is(u,y){u.F=Date.now(),Ga(u),u.B=cn(u.A);var w=u.B,P=u.S;Array.isArray(P)||(P=[String(P)]),eo(w.i,"t",P),u.C=0,w=u.j.L,u.h=new jl,u.g=Ol(u.j,w?y:null,!u.u),u.P>0&&(u.O=new $f(m(u.Y,u,u.g),u.P)),y=u.V,w=u.g,P=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(Wa[0]=q.toString()),q=Wa);for(let K=0;K<q.length;K++){const oe=Qe(w,q[K],P||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=u.J?ee(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Bs(),qf(u.i,u.v,u.B,u.l,u.S,u.u)}or.prototype.ba=function(u){u=u.target;const y=this.O;y&&Sr(u)==3?y.j():this.Y(u)},or.prototype.Y=function(u){try{if(u==this.g)e:{const Se=Sr(this.g),He=this.g.ya(),Ze=this.g.ca();if(!(Se<3)&&(Se!=3||this.g&&(this.h.h||this.g.la()||Cl(this.g)))){this.K||Se!=4||He==7||(He==8||Ze<=0?Bs(3):Bs(2)),Qa(this);var y=this.g.ca();this.X=y;var w=Du(this);if(this.o=y==200,Zf(this.i,this.v,this.B,this.l,this.S,Se,y),this.o){if(this.U&&!this.L){t:{if(this.g){var P,q=this.g;if((P=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(P)){var K=P;break t}}K=null}if(u=K)Fs(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,kl(this,u);else{this.o=!1,this.m=3,Ot(12),Hn(this),Qi(this);break e}}if(this.R){u=!0;let vt;for(;!this.K&&this.C<w.length;)if(vt=Gf(this,w),vt==Gi){Se==4&&(this.m=4,Ot(14),u=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Nl){this.m=4,Ot(15),Fs(this.i,this.l,w,"[Invalid Chunk]"),u=!1;break}else Fs(this.i,this.l,vt,null),kl(this,vt);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||w.length!=0||this.h.h||(this.m=1,Ot(16),u=!1),this.o=this.o&&u,!u)Fs(this.i,this.l,w,"[Invalid Chunked Response]"),Hn(this),Qi(this);else if(w.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Dl(oe),oe.P=!0,Ot(11))}}else Fs(this.i,this.l,w,null),kl(this,w);Se==4&&Hn(this),this.o&&!this.K&&(Se==4?An(this.j,this):(this.o=!1,Ga(this)))}else zl(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Hn(this),Qi(this)}}}catch{}finally{}};function Du(u){if(!Mu(u))return u.g.la();const y=Cl(u.g);if(y==="")return"";let w="";const P=y.length,q=Sr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Hn(u),Qi(u),"";u.h.i=new l.TextDecoder}for(let K=0;K<P;K++)u.h.h=!0,w+=u.h.i.decode(y[K],{stream:!(q&&K==P-1)});return y.length=0,u.h.g+=w,u.C=0,u.h.g}function Mu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Gf(u,y){var w=u.C,P=y.indexOf(`
`,w);return P==-1?Gi:(w=Number(y.substring(w,P)),isNaN(w)?Nl:(P+=1,P+w>y.length?Gi:(y=y.slice(P,P+w),u.C=P+w,y)))}or.prototype.cancel=function(){this.K=!0,Hn(this)};function Ga(u){u.T=Date.now()+u.H,Ou(u,u.H)}function Ou(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Zi(m(u.aa,u),y)}function Qa(u){u.D&&(l.clearTimeout(u.D),u.D=null)}or.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(bl(this.i,this.B),this.M!=2&&(Bs(),Ot(17)),Hn(this),this.m=2,Qi(this)):Ou(this,this.T-u)};function Qi(u){u.j.I==0||u.K||An(u.j,u)}function Hn(u){Qa(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,vl(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function kl(u,y){try{var w=u.j;if(w.I!=0&&(w.g==u||Yi(w.h,u))){if(!u.L&&Yi(w.h,u)&&w.I==3){try{var P=w.Ba.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var q=P;if(q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<u.F)io(w),ro(w);else break e;Ll(w),Ot(18)}}else w.xa=q[1],0<w.xa-w.K&&q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Zi(m(w.Va,w),6e3));Bu(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ir(w,11)}else if((u.L||w.g==u)&&io(w),!U(y))for(q=w.Ba.g.parse(y),y=0;y<q.length;y++){let Ze=q[y];const vt=Ze[0];if(!(vt<=w.K))if(w.K=vt,Ze=Ze[1],w.I==2)if(Ze[0]=="c"){w.M=Ze[1],w.ba=Ze[2];const Gn=Ze[3];Gn!=null&&(w.ka=Gn,w.j.info("VER="+w.ka));const ur=Ze[4];ur!=null&&(w.za=ur,w.j.info("SVER="+w.za));const Qn=Ze[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(P=1.5*Qn,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const Cr=u.g;if(Cr){const lo=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lo){var K=P.h;K.g||lo.indexOf("spdy")==-1&&lo.indexOf("quic")==-1&&lo.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(as(K,K.h),K.h=null))}if(P.G){const co=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;co&&(P.wa=co,ge(P.J,P.G,co))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-u.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var oe=u;if(P.na=Ml(P,P.L?P.ba:null,P.W),oe.L){Tl(P.h,oe);var Se=oe,He=P.O;He&&(Se.H=He),Se.D&&(Qa(Se),Ga(Se)),P.g=oe}else Rl(P);w.i.length>0&&Pr(w)}else Ze[0]!="stop"&&Ze[0]!="close"||Ir(w,7);else w.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Ir(w,7):ze(w):Ze[0]!="noop"&&w.l&&w.l.qa(Ze),w.A=0)}}Bs(4)}catch{}}var Qf=class{constructor(u,y){this.g=u,this.map=y}};function Vu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bu(u){return u.h?1:u.g?u.g.size:0}function Yi(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function as(u,y){u.g?u.g.add(y):u.h=y}function Tl(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Vu.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function El(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const w of u.g.values())y=y.concat(w.G);return y}return T(u.i)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Be(u,y){if(u){u=u.split("&");for(let w=0;w<u.length;w++){const P=u[w].indexOf("=");let q,K=null;P>=0?(q=u[w].substring(0,P),K=u[w].substring(P+1)):q=u[w],y(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function $e(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof $e?(this.l=u.l,qn(this,u.j),this.o=u.o,this.g=u.g,Zn(this,u.u),this.h=u.h,Ji(this,Xi(u.i)),this.m=u.m):u&&(y=String(u).match(Ws))?(this.l=!1,qn(this,y[1]||"",!0),this.o=os(y[2]||""),this.g=os(y[3]||"",!0),Zn(this,y[4]),this.h=os(y[5]||"",!0),Ji(this,y[6]||"",!0),this.m=os(y[7]||"")):(this.l=!1,this.i=new lr(null,this.l))}$e.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(kr(y,Fu,!0),":");var w=this.g;return(w||y=="file")&&(u.push("//"),(y=this.o)&&u.push(kr(y,Fu,!0),"@"),u.push(xe(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&u.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(kr(w,w.charAt(0)=="/"?ls:Ya,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",kr(w,cs)),u.join("")},$e.prototype.resolve=function(u){const y=cn(this);let w=!!u.j;w?qn(y,u.j):w=!!u.o,w?y.o=u.o:w=!!u.g,w?y.g=u.g:w=u.u!=null;var P=u.h;if(w)Zn(y,u.u);else if(w=!!u.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var q=y.h.lastIndexOf("/");q!=-1&&(P=y.h.slice(0,q+1)+P)}if(q=P,q==".."||q==".")P="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){P=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let oe=0;oe<q.length;){const Se=q[oe++];Se=="."?P&&oe==q.length&&K.push(""):Se==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),P&&oe==q.length&&K.push("")):(K.push(Se),P=!0)}P=K.join("/")}else P=q}return w?y.h=P:w=u.i.toString()!=="",w?Ji(y,Xi(u.i)):w=!!u.m,w&&(y.m=u.m),y};function cn(u){return new $e(u)}function qn(u,y,w){u.j=w?os(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Zn(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function Ji(u,y,w){y instanceof lr?(u.i=y,Sl(u.i,u.l)):(w||(y=kr(y,mt)),u.i=new lr(y,u.l))}function ge(u,y,w){u.i.set(y,w)}function et(u){return ge(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function os(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function kr(u,y,w){return typeof u=="string"?(u=encodeURI(u).replace(y,vn),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fu=/[#\/\?@]/g,Ya=/[#\?:]/g,ls=/[#\?]/g,mt=/[#\?@]/g,cs=/#/g;function lr(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function zn(u){u.g||(u.g=new Map,u.h=0,u.i&&Be(u.i,function(y,w){u.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=lr.prototype,t.add=function(u,y){zn(this),this.i=null,u=Tr(this,u);let w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(y),this.h+=1,this};function Ja(u,y){zn(u),y=Tr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function $s(u,y){return zn(u),y=Tr(u,y),u.g.has(y)}t.forEach=function(u,y){zn(this),this.g.forEach(function(w,P){w.forEach(function(q){u.call(y,q,P,this)},this)},this)};function Xa(u,y){zn(u);let w=[];if(typeof y=="string")$s(u,y)&&(w=w.concat(u.g.get(Tr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)w=w.concat(u[y]);return w}t.set=function(u,y){return zn(this),this.i=null,u=Tr(this,u),$s(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},t.get=function(u,y){return u?(u=Xa(this,u),u.length>0?String(u[0]):y):y};function eo(u,y,w){Ja(u,y),w.length>0&&(u.i=null,u.g.set(Tr(u,y),T(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let P=0;P<y.length;P++){var w=y[P];const q=xe(w);w=Xa(this,w);for(let K=0;K<w.length;K++){let oe=q;w[K]!==""&&(oe+="="+xe(w[K])),u.push(oe)}}return this.i=u.join("&")};function Xi(u){const y=new lr;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function Tr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Sl(u,y){y&&!u.j&&(zn(u),u.i=null,u.g.forEach(function(w,P){const q=P.toLowerCase();P!=q&&(Ja(this,P),eo(this,q,w))},u)),u.j=y}function to(u,y){const w=new Ki;if(l.Image){const P=new Image;P.onload=g(Kn,w,"TestLoadImage: loaded",!0,y,P),P.onerror=g(Kn,w,"TestLoadImage: error",!1,y,P),P.onabort=g(Kn,w,"TestLoadImage: abort",!1,y,P),P.ontimeout=g(Kn,w,"TestLoadImage: timeout",!1,y,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else y(!1)}function Wu(u,y){const w=new Ki,P=new AbortController,q=setTimeout(()=>{P.abort(),Kn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:P.signal}).then(K=>{clearTimeout(q),K.ok?Kn(w,"TestPingServer: ok",!0,y):Kn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Kn(w,"TestPingServer: error",!1,y)})}function Kn(u,y,w,P,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),P(w)}catch{}}function Yf(){this.g=new Pu}function Ee(u){this.i=u.Sb||null,this.h=u.ab||!1}x(Ee,wl),Ee.prototype.g=function(){return new un(this.i,this.h)};function un(u,y){Dt.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(un,Dt),t=un.prototype,t.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,us(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||l).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ye(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ye(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Hs(this):us(this),this.readyState==3&&Ye(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Hs(this))},t.Na=function(u){this.g&&(this.response=u,Hs(this))},t.ga=function(){this.g&&Hs(this)};function Hs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,us(u)}t.setRequestHeader=function(u,y){this.A.append(u,y)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=y.next();return u.join(`\r
`)};function us(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function no(u){let y="";return Q(u,function(w,P){y+=P,y+=":",y+=w,y+=`\r
`}),y}function ea(u,y,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=no(w),typeof u=="string"?w!=null&&xe(w):ge(u,y,w))}function qe(u){Dt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(qe,Dt);var Pl=/^https?$/i,ta=["POST","PUT"];t=qe.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,y,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ru.g(),this.g.onreadystatechange=_(m(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(K){Nt(this,K);return}if(u=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var q in P)w.set(q,P[q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const K of P.keys())w.set(K,P.get(K));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),q=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(ta,y,void 0)>=0)||P||q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,oe]of w)this.g.setRequestHeader(K,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){Nt(this,K)}};function Nt(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,Er(u),na(u)}function Er(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Mt(this,"complete"),Mt(this,"abort"),na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),na(this,!0)),qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Il(this):this.Xa())},t.Xa=function(){Il(this)};function Il(u){if(u.h&&typeof o<"u"){if(u.v&&Sr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Mt(u,"readystatechange"),Sr(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var P;if(P=K===0){let oe=String(u.D).match(Ws)[1]||null;!oe&&l.self&&l.self.location&&(oe=l.self.location.protocol.slice(0,-1)),P=!Pl.test(oe?oe.toLowerCase():"")}w=P}if(w)Mt(u,"complete"),Mt(u,"success");else{u.o=6;try{var q=Sr(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",Er(u)}}finally{na(u)}}}}function na(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const w=u.g;u.g=null,y||Mt(u,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Sr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Sr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Hf(y)}};function Cl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zl(u){const y={};u=(u.g&&Sr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(U(u[P]))continue;var w=Lu(u[P]);const q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=y[q]||[];y[q]=K,K.push(w)}F(y,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(u,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||y}function Al(u){this.za=0,this.i=[],this.j=new Ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ra("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ra("baseRetryDelayMs",5e3,u),this.Za=ra("retryDelaySeedMs",1e4,u),this.Ta=ra("forwardChannelMaxRetries",2,u),this.va=ra("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Vu(u&&u.concurrentRequestLimit),this.Ba=new Yf,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Al.prototype,t.ka=8,t.I=1,t.connect=function(u,y,w,P){Ot(0),this.W=u,this.H=y||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=Ml(this,null,this.W),Pr(this)};function ze(u){if(wn(u),u.I==3){var y=u.V++,w=cn(u.J);if(ge(w,"SID",u.M),ge(w,"RID",y),ge(w,"TYPE","terminate"),ds(u,w),y=new or(u,u.j,y),y.M=2,y.A=et(cn(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=y.A,w=!0),w||(y.g=Ol(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ga(y)}cr(u)}function ro(u){u.g&&(Dl(u),u.g.cancel(),u.g=null)}function wn(u){ro(u),u.v&&(l.clearTimeout(u.v),u.v=null),io(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function Pr(u){if(!Uu(u.h)&&!u.m){u.m=!0;var y=u.Ea;O||b(),R||(O(),R=!0),N.add(y,u),u.D=0}}function $u(u,y){return Bu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Zi(m(u.Ea,u,y),Zu(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new or(this,this.j,u);let K=this.o;if(this.U&&(K?(K=ee(K),pe(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=qu(this,q,y),w=cn(this.J),ge(w,"RID",u),ge(w,"CVER",22),this.G&&ge(w,"X-HTTP-Session-Id",this.G),ds(this,w),K&&(this.R?y="headers="+xe(no(K))+"&"+y:this.u&&ea(w,this.u,K)),as(this.h,q),this.Ra&&ge(w,"TYPE","init"),this.S?(ge(w,"$req",y),ge(w,"SID","null"),q.U=!0,Ka(q,w,null)):Ka(q,w,y),this.I=2}}else this.I==3&&(u?Hu(this,u):this.i.length==0||Uu(this.h)||Hu(this))};function Hu(u,y){var w;y?w=y.l:w=u.V++;const P=cn(u.J);ge(P,"SID",u.M),ge(P,"RID",w),ge(P,"AID",u.K),ds(u,P),u.u&&u.o&&ea(P,u.u,u.o),w=new or(u,u.j,w,u.D+1),u.u===null&&(w.J=u.o),y&&(u.i=y.G.concat(u.i)),y=qu(u,w,1e3),w.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),as(u.h,w),Ka(w,P,y)}function ds(u,y){u.H&&Q(u.H,function(w,P){ge(y,P,w)}),u.l&&Q({},function(w,P){ge(y,P,w)})}function qu(u,y,w){w=Math.min(u.i.length,w);const P=u.l?m(u.l.Ka,u.l,u):null;e:{var q=u.i;let Se=-1;for(;;){const He=["count="+w];Se==-1?w>0?(Se=q[0].g,He.push("ofs="+Se)):Se=0:He.push("ofs="+Se);let Ze=!0;for(let vt=0;vt<w;vt++){var K=q[vt].g;const Gn=q[vt].map;if(K-=Se,K<0)Se=Math.max(0,q[vt].g-100),Ze=!1;else try{K="req"+K+"_"||"";try{var oe=Gn instanceof Map?Gn:Object.entries(Gn);for(const[ur,Qn]of oe){let Cr=Qn;h(Qn)&&(Cr=$a(Qn)),He.push(K+ur+"="+encodeURIComponent(Cr))}}catch(ur){throw He.push(K+"type="+encodeURIComponent("_badmap")),ur}}catch{P&&P(Gn)}}if(Ze){oe=He.join("&");break e}}oe=void 0}return u=u.i.splice(0,w),y.G=u,oe}function Rl(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;O||b(),R||(O(),R=!0),N.add(y,u),u.A=0}}function Ll(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Zi(m(u.Da,u),Zu(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,so(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Zi(m(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),ro(this),so(this))};function Dl(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function so(u){u.g=new or(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=cn(u.na);ge(y,"RID","rpc"),ge(y,"SID",u.M),ge(y,"AID",u.K),ge(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&ge(y,"TO",u.ia),ge(y,"TYPE","xmlhttp"),ds(u,y),u.u&&u.o&&ea(y,u.u,u.o),u.O&&(u.g.H=u.O);var w=u.g;u=u.ba,w.M=1,w.A=et(cn(y)),w.u=null,w.R=!0,is(w,u)}t.Va=function(){this.C!=null&&(this.C=null,ro(this),Ll(this),Ot(19))};function io(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function An(u,y){var w=null;if(u.g==y){io(u),Dl(u),u.g=null;var P=2}else if(Yi(u.h,y))w=y.G,Tl(u.h,y),P=1;else return;if(u.I!=0){if(y.o)if(P==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var q=u.D;P=qa(),Mt(P,new zu(P,w)),Pr(u)}else Rl(u);else if(q=y.m,q==3||q==0&&y.X>0||!(P==1&&$u(u,y)||P==2&&Ll(u)))switch(w&&w.length>0&&(y=u.h,y.i=y.i.concat(w)),q){case 1:Ir(u,5);break;case 4:Ir(u,10);break;case 3:Ir(u,6);break;default:Ir(u,2)}}}function Zu(u,y){let w=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(w*=2),w*y}function Ir(u,y){if(u.j.info("Error code "+y),y==2){var w=m(u.bb,u),P=u.Ua;const q=!P;P=new $e(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||qn(P,"https"),et(P),q?to(P.toString(),w):Wu(P.toString(),w)}else Ot(2);u.I=0,u.l&&u.l.pa(y),cr(u),wn(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function cr(u){if(u.I=0,u.ja=[],u.l){const y=El(u.h);(y.length!=0||u.i.length!=0)&&(k(u.ja,y),k(u.ja,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.oa()}}function Ml(u,y,w){var P=w instanceof $e?cn(w):new $e(w);if(P.g!="")y&&(P.g=y+"."+P.g),Zn(P,P.u);else{var q=l.location;P=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const K=new $e(null);P&&qn(K,P),y&&(K.g=y),q&&Zn(K,q),w&&(K.h=w),P=K}return w=u.G,y=u.wa,w&&y&&ge(P,w,y),ge(P,"VER",u.ka),ds(u,P),P}function Ol(u,y,w){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new qe(new Ee({ab:w})):new qe(u.ma),y.Fa(u.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ao(){}t=ao.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function oo(){}oo.prototype.g=function(u,y){return new Jt(u,y)};function Jt(u,y){Dt.call(this),this.g=new Al(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!U(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!U(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new qs(this)}x(Jt,Dt),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){ze(this.g)},Jt.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.v&&(w={},w.__data__=$a(u),u=w);y.i.push(new Qf(y.Ya++,u)),y.I==3&&Pr(y)},Jt.prototype.N=function(){this.g.l=null,delete this.j,ze(this.g),delete this.g,Jt.Z.N.call(this)};function Vl(u){qi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const w in y){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}x(Vl,qi);function Ku(){Ha.call(this),this.status=1}x(Ku,Ha);function qs(u){this.g=u}x(qs,ao),qs.prototype.ra=function(){Mt(this.g,"a")},qs.prototype.qa=function(u){Mt(this.g,new Vl(u))},qs.prototype.pa=function(u){Mt(this.g,new Ku)},qs.prototype.oa=function(){Mt(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,Ij=function(){return new oo},Pj=function(){return qa()},Sj=ss,Xp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,Gd=Za,Au.COMPLETE="complete",Ej=Au,Iu.EventType=Vs,Vs.OPEN="a",Vs.CLOSE="b",Vs.ERROR="c",Vs.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,ic=Iu,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,Tj=qe}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});const Kv="@firebase/firestore",Gv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=new jy("@firebase/firestore");function vo(){return Ia.logLevel}function me(t,...e){if(Ia.logLevel<=De.DEBUG){const n=e.map(Ry);Ia.debug(`Firestore (${ml}): ${t}`,...n)}}function Rs(t,...e){if(Ia.logLevel<=De.ERROR){const n=e.map(Ry);Ia.error(`Firestore (${ml}): ${t}`,...n)}}function tl(t,...e){if(Ia.logLevel<=De.WARN){const n=e.map(Ry);Ia.warn(`Firestore (${ml}): ${t}`,...n)}}function Ry(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Cj(t,r,n)}function Cj(t,e,n){let r=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Rs(r),new Error(r)}function Ke(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Cj(e,s,r)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class Zz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Kz{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ks,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ks)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new zj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Gz{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Qz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Gz(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Qv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Jz(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function eg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return Mm(s)===Mm(o)?Me(s,o):Mm(s)?1:-1}return Me(t.length,e.length)}const Xz=55296,eA=57343;function Mm(t){const e=t.charCodeAt(0);return e>=Xz&&e<=eA}function nl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="__name__";class Dr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Dr.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Me(e.length,n.length)}static compareSegments(e,n){const r=Dr.isNumericId(e),s=Dr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Dr.extractNumericId(e).compare(Dr.extractNumericId(n)):eg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class tt extends Dr{construct(e,n,r){return new tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const tA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Dr{construct(e,n,r){return new qt(e,n,r)}static isValidIdentifier(e){return tA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yv}static keyField(){return new qt([Yv])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new de(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(o(),s++)}if(o(),l)throw new de(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(tt.fromString(e))}static fromName(e){return new we(tt.fromString(e).popFirst(5))}static empty(){return new we(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t,e,n){if(!n)throw new de(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nA(t,e,n,r){if(e===!0&&r===!0)throw new de(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jv(t){if(!we.isDocumentKey(t))throw new de(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xv(t){if(we.isDocumentKey(t))throw new de(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne(12329,{type:typeof t})}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bf(t);throw new de(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,e){const n={typeString:t};return e&&(n.value=e),n}function gu(t,e){if(!Rj(t))throw new de(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(s&&typeof l!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new de(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=-62135596800,tw=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tw);return new it(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ew)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tw}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ew;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:Ct("string",it._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new it(0,0))}static max(){return new Pe(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=-1;function rA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new Si(s,we.empty(),e)}function sA(t){return new Si(t.readTime,t.key,Zc)}class Si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Si(Pe.min(),we.empty(),Zc)}static max(){return new Si(Pe.max(),we.empty(),Zc)}}function iA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==aA)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},f=>r(f))}),l=!0,o===s&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(s=>s?ne.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,s)=>{const o=e.length,l=new Array(o);let h=0;for(let f=0;f<o;f++){const m=f;n(e[m]).next(g=>{l[m]=g,++h,h===o&&r(l)},g=>s(g))}})}static doWhile(e,n){return new ne((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function lA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=-1;function Nf(t){return t==null}function Rh(t){return t===0&&1/t==-1/0}function cA(t){return typeof t=="number"&&Number.isInteger(t)&&!Rh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="";function uA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nw(e)),e=dA(t.get(n),e);return nw(e)}function dA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case Lj:n+="";break;default:n+=o}}return n}function nw(t){return t+Lj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Dj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kd(this.root,e,this.comparator,!0)}}class kd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=s??Ht.EMPTY,this.right=o??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Ht(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sw(this.data.getIterator())}getIteratorFrom(e){return new sw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class sw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Lt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mj("Invalid base64 string: "+o):o}}(e);return new Qt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const hA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=hA.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ii(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="server_timestamp",Vj="__type__",Uj="__previous_value__",Bj="__local_write_time__";function My(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Vj])==null?void 0:r.stringValue)===Oj}function kf(t){const e=t.mapValue.fields[Uj];return My(e)?kf(e):e}function Kc(t){const e=Pi(t.mapValue.fields[Bj].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r,s,o,l,h,f,m,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=g}}const Lh="(default)";class Gc{constructor(e,n){this.projectId=e,this.database=n||Lh}static empty(){return new Gc("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj="__type__",mA="__max__",Td={mapValue:{}},Wj="__vector__",Dh="value";function Ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?My(t)?4:gA(t)?9007199254740991:pA(t)?10:11:Ne(28295,{value:t})}function Jr(t,e){if(t===e)return!0;const n=Ci(t);if(n!==Ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kc(t).isEqual(Kc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Pi(s.timestampValue),h=Pi(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Ii(s.bytesValue).isEqual(Ii(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return wt(s.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(s.geoPointValue.longitude)===wt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return wt(s.integerValue)===wt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=wt(s.doubleValue),h=wt(o.doubleValue);return l===h?Rh(l)===Rh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return nl(t.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(rw(l)!==rw(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Jr(l[f],h[f])))return!1;return!0}(t,e);default:return Ne(52216,{left:t})}}function Qc(t,e){return(t.values||[]).find(n=>Jr(n,e))!==void 0}function rl(t,e){if(t===e)return 0;const n=Ci(t),r=Ci(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=wt(o.integerValue||o.doubleValue),f=wt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return iw(t.timestampValue,e.timestampValue);case 4:return iw(Kc(t),Kc(e));case 5:return eg(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Ii(o),f=Ii(l);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),f=l.split("/");for(let m=0;m<h.length&&m<f.length;m++){const g=Me(h[m],f[m]);if(g!==0)return g}return Me(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Me(wt(o.latitude),wt(l.latitude));return h!==0?h:Me(wt(o.longitude),wt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return aw(t.arrayValue,e.arrayValue);case 10:return function(o,l){var _,T,k,C;const h=o.fields||{},f=l.fields||{},m=(_=h[Dh])==null?void 0:_.arrayValue,g=(T=f[Dh])==null?void 0:T.arrayValue,x=Me(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((C=g==null?void 0:g.values)==null?void 0:C.length)||0);return x!==0?x:aw(m,g)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Td.mapValue&&l===Td.mapValue)return 0;if(o===Td.mapValue)return 1;if(l===Td.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),m=l.fields||{},g=Object.keys(m);f.sort(),g.sort();for(let x=0;x<f.length&&x<g.length;++x){const _=eg(f[x],g[x]);if(_!==0)return _;const T=rl(h[f[x]],m[g[x]]);if(T!==0)return T}return Me(f.length,g.length)}(t.mapValue,e.mapValue);default:throw Ne(23264,{he:n})}}function iw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=Pi(t),r=Pi(e),s=Me(n.seconds,r.seconds);return s!==0?s:Me(n.nanos,r.nanos)}function aw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=rl(n[s],r[s]);if(o)return o}return Me(n.length,r.length)}function sl(t){return tg(t)}function tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=tg(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${tg(n.fields[l])}`;return s+"}"}(t.mapValue):Ne(61005,{value:t})}function Qd(t){switch(Ci(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(t);return e?16+Qd(e):16;case 5:return 2*t.stringValue.length;case 6:return Ii(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Qd(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Fi(r.fields,(o,l)=>{s+=o.length+Qd(l)}),s}(t.mapValue);default:throw Ne(13486,{value:t})}}function ow(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ng(t){return!!t&&"integerValue"in t}function Oy(t){return!!t&&"arrayValue"in t}function lw(t){return!!t&&"nullValue"in t}function cw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yd(t){return!!t&&"mapValue"in t}function pA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Fj])==null?void 0:r.stringValue)===Wj}function wc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wc(t.arrayValue.values[n]);return e}return{...t}}function gA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===mA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(n)}setAll(e){let n=qt.emptyPath(),r={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=h.popLast()}l?r[h.lastSegment()]=wc(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fi(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new kn(wc(this.value))}}function $j(t){const e=[];return Fi(t.fields,(n,r)=>{const s=new qt([n]);if(Yd(r)){const o=$j(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,r,s,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new sn(e,0,Pe.min(),Pe.min(),Pe.min(),kn.empty(),0)}static newFoundDocument(e,n,r,s){return new sn(e,1,n,Pe.min(),r,s,0)}static newNoDocument(e,n){return new sn(e,2,n,Pe.min(),Pe.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,Pe.min(),Pe.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.position=e,this.inclusive=n}}function uw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=we.comparator(we.fromName(l.referenceValue),n.key):r=rl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function dw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n="asc"){this.field=e,this.dir=n}}function yA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hj=class{};class It extends Hj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vA(e,n,r):n==="array-contains"?new bA(e,r):n==="in"?new jA(e,r):n==="not-in"?new NA(e,r):n==="array-contains-any"?new kA(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wA(e,r):new _A(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(rl(n,this.value)):n!==null&&Ci(this.value)===Ci(n)&&this.matchesComparison(rl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends Hj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new br(e,n)}matches(e){return qj(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qj(t){return t.op==="and"}function Zj(t){return xA(t)&&qj(t)}function xA(t){for(const e of t.filters)if(e instanceof br)return!1;return!0}function rg(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+sl(t.value);if(Zj(t))return t.filters.map(e=>rg(e)).join(",");{const e=t.filters.map(n=>rg(n)).join(",");return`${t.op}(${e})`}}function Kj(t,e){return t instanceof It?function(r,s){return s instanceof It&&r.op===s.op&&r.field.isEqual(s.field)&&Jr(r.value,s.value)}(t,e):t instanceof br?function(r,s){return s instanceof br&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,h)=>o&&Kj(l,s.filters[h]),!0):!1}(t,e):void Ne(19439)}function Gj(t){return t instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${sl(n.value)}`}(t):t instanceof br?function(n){return n.op.toString()+" {"+n.getFilters().map(Gj).join(" ,")+"}"}(t):"Filter"}class vA extends It{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class wA extends It{constructor(e,n){super(e,"in",n),this.keys=Qj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _A extends It{constructor(e,n){super(e,"not-in",n),this.keys=Qj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Qj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>we.fromName(r.referenceValue))}class bA extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Oy(n)&&Qc(n.arrayValue,this.value)}}class jA extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qc(this.value.arrayValue,n)}}class NA extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qc(this.value.arrayValue,n)}}class kA extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n=null,r=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function hw(t,e=null,n=[],r=[],s=null,o=null,l=null){return new TA(t,e,n,r,s,o,l)}function Vy(t){const e=Ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>sl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>sl(r)).join(",")),e.Te=n}return e.Te}function Uy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Kj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dw(t.startAt,e.startAt)&&dw(t.endAt,e.endAt)}function sg(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n=null,r=[],s=[],o=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EA(t,e,n,r,s,o,l,h){return new yu(t,e,n,r,s,o,l,h)}function Tf(t){return new yu(t)}function fw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Yj(t){return t.collectionGroup!==null}function _c(t){const e=Ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Lt(qt.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Oh(o,r))}),n.has(qt.keyField().canonicalString())||e.Ie.push(new Oh(qt.keyField(),r))}return e.Ie}function Zr(t){const e=Ce(t);return e.Ee||(e.Ee=SA(e,_c(t))),e.Ee}function SA(t,e){if(t.limitType==="F")return hw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Oh(s.field,o)});const n=t.endAt?new Mh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mh(t.startAt.position,t.startAt.inclusive):null;return hw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ig(t,e){const n=t.filters.concat([e]);return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ag(t,e,n){return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ef(t,e){return Uy(Zr(t),Zr(e))&&t.limitType===e.limitType}function Jj(t){return`${Vy(Zr(t))}|lt:${t.limitType}`}function wo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Gj(s)).join(", ")}]`),Nf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>sl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>sl(s)).join(",")),`Target(${r})`}(Zr(t))}; limitType=${t.limitType})`}function Sf(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):we.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of _c(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,h,f){const m=uw(l,h,f);return l.inclusive?m<=0:m<0}(r.startAt,_c(r),s)||r.endAt&&!function(l,h,f){const m=uw(l,h,f);return l.inclusive?m>=0:m>0}(r.endAt,_c(r),s))}(t,e)}function PA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xj(t){return(e,n)=>{let r=!1;for(const s of _c(t)){const o=IA(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function IA(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):function(o,l,h){const f=l.data.field(o),m=h.data.field(o);return f!==null&&m!==null?rl(f,m):Ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Dj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new ft(we.comparator);function Ls(){return CA}const eN=new ft(we.comparator);function ac(...t){let e=eN;for(const n of t)e=e.insert(n.key,n);return e}function tN(t){let e=eN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ha(){return bc()}function nN(){return bc()}function bc(){return new Ua(t=>t.toString(),(t,e)=>t.isEqual(e))}const zA=new ft(we.comparator),AA=new Lt(we.comparator);function Oe(...t){let e=AA;for(const n of t)e=e.add(n);return e}const RA=new Lt(Me);function LA(){return RA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function rN(t){return{integerValue:""+t}}function DA(t,e){return cA(e)?rN(e):By(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this._=void 0}}function MA(t,e,n){return t instanceof Yc?function(s,o){const l={fields:{[Vj]:{stringValue:Oj},[Bj]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&My(o)&&(o=kf(o)),o&&(l.fields[Uj]=o),{mapValue:l}}(n,e):t instanceof Jc?iN(t,e):t instanceof Xc?aN(t,e):function(s,o){const l=sN(s,o),h=mw(l)+mw(s.Ae);return ng(l)&&ng(s.Ae)?rN(h):By(s.serializer,h)}(t,e)}function OA(t,e,n){return t instanceof Jc?iN(t,e):t instanceof Xc?aN(t,e):n}function sN(t,e){return t instanceof Vh?function(r){return ng(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Yc extends Pf{}class Jc extends Pf{constructor(e){super(),this.elements=e}}function iN(t,e){const n=oN(e);for(const r of t.elements)n.some(s=>Jr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xc extends Pf{constructor(e){super(),this.elements=e}}function aN(t,e){let n=oN(e);for(const r of t.elements)n=n.filter(s=>!Jr(s,r));return{arrayValue:{values:n}}}class Vh extends Pf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function mw(t){return wt(t.integerValue||t.doubleValue)}function oN(t){return Oy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n){this.field=e,this.transform=n}}function UA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Jc&&s instanceof Jc||r instanceof Xc&&s instanceof Xc?nl(r.elements,s.elements,Jr):r instanceof Vh&&s instanceof Vh?Jr(r.Ae,s.Ae):r instanceof Yc&&s instanceof Yc}(t.transform,e.transform)}class BA{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class If{}function lN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cf(t.key,Cn.none()):new xu(t.key,t.data,Cn.none());{const n=t.data,r=kn.empty();let s=new Lt(qt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Wi(t.key,r,new On(s.toArray()),Cn.none())}}function FA(t,e,n){t instanceof xu?function(s,o,l){const h=s.value.clone(),f=gw(s.fieldTransforms,o,l.transformResults);h.setAll(f),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Wi?function(s,o,l){if(!Jd(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=gw(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(cN(s)),f.setAll(h),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function jc(t,e,n,r){return t instanceof xu?function(o,l,h,f){if(!Jd(o.precondition,l))return h;const m=o.value.clone(),g=yw(o.fieldTransforms,f,l);return m.setAll(g),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wi?function(o,l,h,f){if(!Jd(o.precondition,l))return h;const m=yw(o.fieldTransforms,f,l),g=l.data;return g.setAll(cN(o)),g.setAll(m),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(x=>x.field))}(t,e,n,r):function(o,l,h){return Jd(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function WA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=sN(r.transform,s||null);o!=null&&(n===null&&(n=kn.empty()),n.set(r.field,o))}return n||null}function pw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&nl(r,s,(o,l)=>UA(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xu extends If{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wi extends If{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function cN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gw(t,e,n){const r=new Map;Ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);r.set(o.field,OA(l,h,n[s]))}return r}function yw(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,MA(o,l,e))}return r}class Cf extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $A extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&FA(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nN();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const f=lN(l,h);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,(n,r)=>pw(n,r))&&nl(this.baseMutations,e.baseMutations,(n,r)=>pw(n,r))}}class Fy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return zA}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new Fy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Fe;function KA(t){switch(t){case te.OK:return Ne(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ne(15467,{code:t})}}function uN(t){if(t===void 0)return Rs("GRPC error has no .code"),te.UNKNOWN;switch(t){case Tt.OK:return te.OK;case Tt.CANCELLED:return te.CANCELLED;case Tt.UNKNOWN:return te.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return te.INTERNAL;case Tt.UNAVAILABLE:return te.UNAVAILABLE;case Tt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Tt.NOT_FOUND:return te.NOT_FOUND;case Tt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Tt.ABORTED:return te.ABORTED;case Tt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Tt.DATA_LOSS:return te.DATA_LOSS;default:return Ne(39323,{code:t})}}(Fe=Tt||(Tt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new bi([4294967295,4294967295],0);function xw(t){const e=GA().encode(t),n=new kj;return n.update(e),new Uint8Array(n.digest())}function vw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bi([n,r],0),new bi([s,o],0)]}class Wy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oc(`Invalid padding: ${n}`);if(r<0)throw new oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new oc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(bi.fromNumber(r)));return s.compare(QA)===1&&(s=new bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=xw(e),[r,s]=vw(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Wy(o,s,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=xw(e),[r,s]=vw(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zf(Pe.min(),s,new ft(Me),Ls(),Oe())}}class vu{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vu(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class dN{constructor(e,n){this.targetId=e,this.Ce=n}}class hN{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ww{constructor(){this.ve=0,this.Fe=_w(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),r=Oe();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ne(38017,{changeType:o})}}),new vu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=_w()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ls(),this.Je=Ed(),this.He=Ed(),this.Ye=new ft(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(sg(o))if(r===0){const l=new we(o.path);this.et(n,l,sn.newNoDocument(l,Pe.min()))}else Ke(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Ii(r).toUint8Array()}catch(f){if(f instanceof Mj)return tl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Wy(l,s,o)}catch(f){return tl(f instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&sg(h.target)){const f=new we(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,sn.newNoDocument(f,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let r=Oe();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new zf(e,n,this.Ye,this.je,r);return this.je=Ls(),this.Je=Ed(),this.He=Ed(),this.Ye=new ft(Me),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ww,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Lt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Lt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ww),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ed(){return new ft(we.comparator)}function _w(){return new ft(we.comparator)}const JA={asc:"ASCENDING",desc:"DESCENDING"},XA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eR={and:"AND",or:"OR"};class tR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function og(t,e){return t.useProto3Json||Nf(e)?e:{value:e}}function Uh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nR(t,e){return Uh(t,e.toTimestamp())}function Kr(t){return Ke(!!t,49232),Pe.fromTimestamp(function(n){const r=Pi(n);return new it(r.seconds,r.nanos)}(t))}function $y(t,e){return lg(t,e).canonicalString()}function lg(t,e){const n=function(s){return new tt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mN(t){const e=tt.fromString(t);return Ke(vN(e),10190,{key:e.toString()}),e}function cg(t,e){return $y(t.databaseId,e.path)}function Om(t,e){const n=mN(e);if(n.get(1)!==t.databaseId.projectId)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(gN(n))}function pN(t,e){return $y(t.databaseId,e)}function rR(t){const e=mN(t);return e.length===4?tt.emptyPath():gN(e)}function ug(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gN(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bw(t,e,n){return{name:cg(t,e),fields:n.value.mapValue.fields}}function sR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ne(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,g){return m.useProto3Json?(Ke(g===void 0||typeof g=="string",58123),Qt.fromBase64String(g||"")):(Ke(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Qt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const g=m.code===void 0?te.UNKNOWN:uN(m.code);return new de(g,m.message||"")}(l);n=new hN(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Om(t,r.document.name),o=Kr(r.document.updateTime),l=r.document.createTime?Kr(r.document.createTime):Pe.min(),h=new kn({mapValue:{fields:r.document.fields}}),f=sn.newFoundDocument(s,o,l,h),m=r.targetIds||[],g=r.removedTargetIds||[];n=new Xd(m,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Om(t,r.document),o=r.readTime?Kr(r.readTime):Pe.min(),l=sn.newNoDocument(s,o),h=r.removedTargetIds||[];n=new Xd([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Om(t,r.document),o=r.removedTargetIds||[];n=new Xd([],o,s,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new ZA(s,o),h=r.targetId;n=new dN(h,l)}}return n}function iR(t,e){let n;if(e instanceof xu)n={update:bw(t,e.key,e.value)};else if(e instanceof Cf)n={delete:cg(t,e.key)};else if(e instanceof Wi)n={update:bw(t,e.key,e.data),updateMask:mR(e.fieldMask)};else{if(!(e instanceof $A))return Ne(16599,{Vt:e.type});n={verify:cg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof Yc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Xc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Vh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw Ne(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:nR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ne(27497)}(t,e.precondition)),n}function aR(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?Kr(s.updateTime):Kr(o);return l.isEqual(Pe.min())&&(l=Kr(o)),new BA(l,s.transformResults||[])}(n,e))):[]}function oR(t,e){return{documents:[pN(t,e.path)]}}function lR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pN(t,s);const o=function(m){if(m.length!==0)return xN(br.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(g=>function(_){return{field:_o(_.field),direction:dR(_.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=og(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ft:n,parent:s}}function cR(t){let e=rR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ke(r===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(x){const _=yN(x);return _ instanceof br&&Zj(_)?_.getFilters():[_]}(n.where));let l=[];n.orderBy&&(l=function(x){return x.map(_=>function(k){return new Oh(bo(k.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(_))}(n.orderBy));let h=null;n.limit&&(h=function(x){let _;return _=typeof x=="object"?x.value:x,Nf(_)?null:_}(n.limit));let f=null;n.startAt&&(f=function(x){const _=!!x.before,T=x.values||[];return new Mh(T,_)}(n.startAt));let m=null;return n.endAt&&(m=function(x){const _=!x.before,T=x.values||[];return new Mh(T,_)}(n.endAt)),EA(e,s,l,o,h,"F",f,m)}function uR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bo(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bo(n.unaryFilter.field);return It.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=bo(n.unaryFilter.field);return It.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=bo(n.unaryFilter.field);return It.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return It.create(bo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return br.create(n.compositeFilter.filters.map(r=>yN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}}(n.compositeFilter.op))}(t):Ne(30097,{filter:t})}function dR(t){return JA[t]}function hR(t){return XA[t]}function fR(t){return eR[t]}function _o(t){return{fieldPath:t.canonicalString()}}function bo(t){return qt.fromServerFormat(t.fieldPath)}function xN(t){return t instanceof It?function(n){if(n.op==="=="){if(cw(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NAN"}};if(lw(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cw(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NAN"}};if(lw(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(n.field),op:hR(n.op),value:n.value}}}(t):t instanceof br?function(n){const r=n.getFilters().map(s=>xN(s));return r.length===1?r[0]:{compositeFilter:{op:fR(n.op),filters:r}}}(t):Ne(54877,{filter:t})}function mR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r,s,o=Pe.min(),l=Pe.min(),h=Qt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.yt=e}}function gR(t){const e=cR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ag(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.Cn=new xR}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Si.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class xR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Lt(tt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Lt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wN=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(wN,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new il(0)}static cr(){return new il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="LruGarbageCollector",vR=1048576;function kw([t,e],[n,r]){const s=Me(t,n);return s===0?Me(e,r):s}class wR{constructor(e){this.Ir=e,this.buffer=new Lt(kw),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _R{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(Nw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){gl(n)?me(Nw,"Ignoring IndexedDB error during garbage collection: ",n):await pl(n)}await this.Vr(3e5)})}}class bR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(jf.ce);const r=new wR(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(jw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jw):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,l,h,f,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,l=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,h=Date.now(),this.removeTargets(e,r,n))).next(x=>(o=x,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(m=Date.now(),vo()<=De.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${x} documents in `+(m-f)+`ms
Total Duration: ${m-g}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:x})))}}function jR(t,e){return new bR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.changes=new Ua(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&jc(r.mutation,s,On.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const s=ha();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=ac();return o.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=ha();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,s){let o=Ls();const l=bc(),h=function(){return bc()}();return n.forEach((f,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Wi)?o=o.insert(m.key,m):g!==void 0?(l.set(m.key,g.mutation.getFieldMask()),jc(g.mutation,m,g.mutation.getFieldMask(),it.now())):l.set(m.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((m,g)=>l.set(m,g)),n.forEach((m,g)=>h.set(m,new kR(g,l.get(m)??null))),h))}recalculateAndSaveOverlays(e,n){const r=bc();let s=new ft((l,h)=>l-h),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(f=>{const m=n.get(f);if(m===null)return;let g=r.get(f)||On.empty();g=h.applyToLocalView(m,g),r.set(f,g);const x=(s.get(h.batchId)||Oe()).add(f);s=s.insert(h.batchId,x)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,g=f.value,x=nN();g.forEach(_=>{if(!o.has(_)){const T=lN(n.get(_),r.get(_));T!==null&&x.set(_,T),o=o.add(_)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,x))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return we.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Yj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):ne.resolve(ha());let h=Zc,f=o;return l.next(m=>ne.forEach(m,(g,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),o.get(g)?ne.resolve():this.remoteDocumentCache.getEntry(e,g).next(_=>{f=f.insert(g,_)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,f,m,Oe())).next(g=>({batchId:h,changes:tN(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(r=>{let s=ac();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=ac();return this.indexManager.getCollectionParents(e,o).next(h=>ne.forEach(h,f=>{const m=function(x,_){return new yu(_,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(g=>{g.forEach((x,_)=>{l=l.insert(x,_)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((f,m)=>{const g=m.getKey();l.get(g)===null&&(l=l.insert(g,sn.newInvalidDocument(g)))});let h=ac();return l.forEach((f,m)=>{const g=o.get(f);g!==void 0&&jc(g.mutation,m,On.empty(),it.now()),Sf(n,m)&&(h=h.insert(f,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Kr(s.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:gR(s.bundledQuery),readTime:Kr(s.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.overlays=new ft(we.comparator),this.qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ha();return ne.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const s=ha(),o=n.length+1,l=new we(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new ft((m,g)=>m-g);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let g=o.get(m.largestBatchId);g===null&&(g=ha(),o=o.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=ha(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,g)=>h.set(m,g)),!(h.size()>=s)););return ne.resolve(h)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new qA(n,r));let o=this.qr.get(n);o===void 0&&(o=Oe(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.Qr=new Lt(Ut.$r),this.Ur=new Lt(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ut(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new we(new tt([])),r=new Ut(n,e),s=new Ut(n,e+1),o=[];return this.Ur.forEachInRange([r,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new we(new tt([])),r=new Ut(n,e),s=new Ut(n,e+1);let o=Oe();return this.Ur.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Ut(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return we.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(Ut.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new HA(o,n,r,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new Ut(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,n){return ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Dy:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),s=new Ut(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(Me);return n.forEach(s=>{const o=new Ut(s,0),l=new Ut(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{r=r.add(h.Yr)})}),ne.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;we.isDocumentKey(o)||(o=o.child(""));const l=new Ut(new we(o),0);let h=new Lt(Me);return this.Zr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.Yr)),!0)},l),ne.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ne.forEach(n.mutations,s=>{const o=new Ut(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ut(n,0),s=this.Zr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.ri=e,this.docs=function(){return new ft(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=Ls();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():sn.newInvalidDocument(s))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Ls();const l=n.path,h=new we(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:g}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||iA(sA(g),r)<=0||(s.has(g.key)||Sf(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ne(9500)}ii(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zR(this)}getSize(e){return ne.resolve(this.size)}}class zR extends NR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.persistence=e,this.si=new Ua(n=>Vy(n),Uy),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Hy,this.targetCount=0,this.ai=il.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new il(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Pr(n),ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),ne.waitFor(o).next(()=>s)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n){this.ui={},this.overlays={},this.ci=new jf(0),this.li=!1,this.li=!0,this.hi=new PR,this.referenceDelegate=e(this),this.Pi=new AR(this),this.indexManager=new yR,this.remoteDocumentCache=function(s){return new CR(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new pR(n),this.Ii=new ER(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new IR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const s=new RR(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return ne.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class RR extends oA{constructor(e){super(),this.currentSequenceNumber=e}}class qy{constructor(e){this.persistence=e,this.Ri=new Hy,this.Vi=null}static mi(e){return new qy(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,r=>{const s=we.fromPath(r);return this.gi(e,s).next(o=>{o||n.removeEntry(s,Pe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ne.or([()=>ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Bh{constructor(e,n){this.persistence=e,this.pi=new Ua(r=>uA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=jR(this,n)}static mi(e,n){return new Bh(e,n)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return ne.forEach(this.pi,(r,s)=>this.br(e,r,s).next(o=>o?ne.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(r++,o.removeEntry(l,Pe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qd(e.data.value)),n}br(e,n,r){return ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Oe(),s=Oe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Zy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cP()?8:lA(on())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new LR;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(vo()<=De.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",wo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(vo()<=De.DEBUG&&me("QueryEngine","Query:",wo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(vo()<=De.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",wo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(n))):ne.resolve())}ys(e,n){if(fw(n))return ne.resolve(null);let r=Zr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ag(n,null,"F"),r=Zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Oe(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.Ds(n,h);return this.Cs(n,m,l,f.readTime)?this.ys(e,ag(n,null,"F")):this.vs(e,m,n,f)}))})))}ws(e,n,r,s){return fw(n)||s.isEqual(Pe.min())?ne.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,s)?ne.resolve(null):(vo()<=De.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wo(n)),this.vs(e,l,n,rA(s,Zc)).next(h=>h))})}Ds(e,n){let r=new Lt(Xj(e));return n.forEach((s,o)=>{Sf(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return vo()<=De.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",wo(n)),this.ps.getDocumentsMatchingQuery(e,n,Si.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="LocalStore",MR=3e8;class OR{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ft(Me),this.xs=new Ua(o=>Vy(o),Uy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function VR(t,e,n,r){return new OR(t,e,n,r)}async function bN(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let f=Oe();for(const m of s){l.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}for(const m of o){h.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}return n.localDocuments.getDocuments(r,f).next(m=>({Ls:m,removedBatchIds:l,addedBatchIds:h}))})})}function UR(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,f,m,g){const x=m.batch,_=x.keys();let T=ne.resolve();return _.forEach(k=>{T=T.next(()=>g.getEntry(f,k)).next(C=>{const A=m.docVersions.get(k);Ke(A!==null,48541),C.version.compareTo(A)<0&&(x.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),g.addEntry(C)))})}),T.next(()=>h.mutationQueue.removeMutationBatch(f,x))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Oe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function jN(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function BR(t,e){const n=Ce(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((g,x)=>{const _=s.get(x);if(!_)return;h.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,x).next(()=>n.Pi.addMatchingKeys(o,g.addedDocuments,x)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?T=T.withResumeToken(Qt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(x,T),function(C,A,E){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=MR?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(_,T,g)&&h.push(n.Pi.updateTargetData(o,T))});let f=Ls(),m=Oe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),h.push(FR(o,l,e.documentUpdates).next(g=>{f=g.ks,m=g.qs})),!r.isEqual(Pe.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next(x=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(g)}return ne.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,m)).next(()=>f)}).then(o=>(n.Ms=s,o))}function FR(t,e,n){let r=Oe(),s=Oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Ls();return n.forEach((h,f)=>{const m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(Pe.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):me(Ky,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{ks:l,qs:s}})}function WR(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $R(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(o=>o?(s=o,ne.resolve(s)):n.Pi.allocateTargetId(r).next(l=>(s=new ui(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function dg(t,e,n){const r=Ce(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!gl(l))throw l;me(Ky,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Tw(t,e,n){const r=Ce(t);let s=Pe.min(),o=Oe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,m,g){const x=Ce(f),_=x.xs.get(g);return _!==void 0?ne.resolve(x.Ms.get(_)):x.Pi.getTargetData(m,g)}(r,l,Zr(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next(f=>{o=f})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,n?s:Pe.min(),n?o:Oe())).next(h=>(HR(r,PA(e),h),{documents:h,Qs:o})))}function HR(t,e,n){let r=t.Os.get(e)||Pe.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Ew{constructor(){this.activeTargetIds=LA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qR{constructor(){this.Mo=new Ew,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ew,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="ConnectivityMonitor";class Pw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(Sw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(Sw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd=null;function hg(){return Sd===null?Sd=function(){return 268435456+Math.round(2147483648*Math.random())}():Sd++,"0x"+Sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RestConnection",KR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Lh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const l=hg(),h=this.zo(e,n.toUriEncodedString());me(Vm,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,o);const{host:m}=new URL(h),g=Vi(m);return this.Jo(e,h,f,r,g).then(x=>(me(Vm,`Received RPC '${e}' ${l}: `,x),x),x=>{throw tl(Vm,`RPC '${e}' ${l} failed with error: `,x,"url: ",h,"request:",r),x})}Ho(e,n,r,s,o,l){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ml}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const r=KR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class YR extends GR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=hg();return new Promise((h,f)=>{const m=new Tj;m.setWithCredentials(!0),m.listenOnce(Ej.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Gd.NO_ERROR:const x=m.getResponseJson();me(tn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(x)),h(x);break;case Gd.TIMEOUT:me(tn,`RPC '${e}' ${l} timed out`),f(new de(te.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:const _=m.getStatus();if(me(tn,`RPC '${e}' ${l} failed with status:`,_,"response text:",m.getResponseText()),_>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const C=function(E){const S=E.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(S)>=0?S:te.UNKNOWN}(k.status);f(new de(C,k.message))}else f(new de(te.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new de(te.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{me(tn,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(s);me(tn,`RPC '${e}' ${l} sending request:`,s),m.send(n,"POST",g,r,15)})}T_(e,n,r){const s=hg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Ij(),h=Pj(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const g=o.join("");me(tn,`Creating RPC '${e}' stream ${s}: ${g}`,f);const x=l.createWebChannel(g,f);this.I_(x);let _=!1,T=!1;const k=new QR({Yo:A=>{T?me(tn,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(_||(me(tn,`Opening RPC '${e}' stream ${s} transport.`),x.open(),_=!0),me(tn,`RPC '${e}' stream ${s} sending:`,A),x.send(A))},Zo:()=>x.close()}),C=(A,E,S)=>{A.listen(E,I=>{try{S(I)}catch(H){setTimeout(()=>{throw H},0)}})};return C(x,ic.EventType.OPEN,()=>{T||(me(tn,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),C(x,ic.EventType.CLOSE,()=>{T||(T=!0,me(tn,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(x))}),C(x,ic.EventType.ERROR,A=>{T||(T=!0,tl(tn,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),k.a_(new de(te.UNAVAILABLE,"The operation could not be completed")))}),C(x,ic.EventType.MESSAGE,A=>{var E;if(!T){const S=A.data[0];Ke(!!S,16349);const I=S,H=(I==null?void 0:I.error)||((E=I[0])==null?void 0:E.error);if(H){me(tn,`RPC '${e}' stream ${s} received error:`,H);const O=H.status;let R=function(z){const M=Tt[z];if(M!==void 0)return uN(M)}(O),N=H.message;R===void 0&&(R=te.INTERNAL,N="Unknown error status: "+O+" with message "+H.message),T=!0,k.a_(new de(R,N)),x.close()}else me(tn,`RPC '${e}' stream ${s} received:`,S),k.u_(S)}}),C(h,Sj.STAT_EVENT,A=>{A.stat===Xp.PROXY?me(tn,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Xp.NOPROXY&&me(tn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return new tR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="PersistentStream";class kN{constructor(e,n,r,s,o,l,h,f){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Rs(n.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new de(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return me(Iw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(me(Iw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JR extends kN{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sR(this.serializer,e),r=function(o){if(!("targetChange"in o))return Pe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Pe.min():l.readTime?Kr(l.readTime):Pe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ug(this.serializer),n.addTarget=function(o,l){let h;const f=l.target;if(h=sg(f)?{documents:oR(o,f)}:{query:lR(o,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=fN(o,l.resumeToken);const m=og(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(Pe.min())>0){h.readTime=Uh(o,l.snapshotVersion.toTimestamp());const m=og(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const r=uR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ug(this.serializer),n.removeTarget=e,this.q_(n)}}class XR extends kN{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aR(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ug(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>iR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{}class t4 extends e4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,lg(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(te.UNKNOWN,o.toString())})}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,lg(n,r),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(te.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class n4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="RemoteStore";class r4{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Ba(this)&&(me(Ca,"Restarting streams for network reachability change."),await async function(f){const m=Ce(f);m.Ea.add(4),await wu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Rf(m)}(this))})}),this.Ra=new n4(r,s)}}async function Rf(t){if(Ba(t))for(const e of t.da)await e(!0)}async function wu(t){for(const e of t.da)await e(!1)}function TN(t,e){const n=Ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jy(n)?Yy(n):yl(n).O_()&&Qy(n,e))}function Gy(t,e){const n=Ce(t),r=yl(n);n.Ia.delete(e),r.O_()&&EN(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ba(n)&&n.Ra.set("Unknown"))}function Qy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yl(t).Y_(e)}function EN(t,e){t.Va.Ue(e),yl(t).Z_(e)}function Yy(t){t.Va=new YA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),yl(t).start(),t.Ra.ua()}function Jy(t){return Ba(t)&&!yl(t).x_()&&t.Ia.size>0}function Ba(t){return Ce(t).Ea.size===0}function SN(t){t.Va=void 0}async function s4(t){t.Ra.set("Online")}async function i4(t){t.Ia.forEach((e,n)=>{Qy(t,e)})}async function a4(t,e){SN(t),Jy(t)?(t.Ra.ha(e),Yy(t)):t.Ra.set("Unknown")}async function o4(t,e,n){if(t.Ra.set("Online"),e instanceof hN&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(r){me(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fh(t,r)}else if(e instanceof Xd?t.Va.Ze(e):e instanceof dN?t.Va.st(e):t.Va.tt(e),!n.isEqual(Pe.min()))try{const r=await jN(t.localStore);n.compareTo(r)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const g=o.Ia.get(m);g&&o.Ia.set(m,g.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,m)=>{const g=o.Ia.get(f);if(!g)return;o.Ia.set(f,g.withResumeToken(Qt.EMPTY_BYTE_STRING,g.snapshotVersion)),EN(o,f);const x=new ui(g.target,f,m,g.sequenceNumber);Qy(o,x)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){me(Ca,"Failed to raise snapshot:",r),await Fh(t,r)}}async function Fh(t,e,n){if(!gl(e))throw e;t.Ea.add(1),await wu(t),t.Ra.set("Offline"),n||(n=()=>jN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me(Ca,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Rf(t)})}function PN(t,e){return e().catch(n=>Fh(t,n,e))}async function Lf(t){const e=Ce(t),n=zi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dy;for(;l4(e);)try{const s=await WR(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,c4(e,s)}catch(s){await Fh(e,s)}IN(e)&&CN(e)}function l4(t){return Ba(t)&&t.Ta.length<10}function c4(t,e){t.Ta.push(e);const n=zi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function IN(t){return Ba(t)&&!zi(t).x_()&&t.Ta.length>0}function CN(t){zi(t).start()}async function u4(t){zi(t).ra()}async function d4(t){const e=zi(t);for(const n of t.Ta)e.ea(n.mutations)}async function h4(t,e,n){const r=t.Ta.shift(),s=Fy.from(r,e,n);await PN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lf(t)}async function f4(t,e){e&&zi(t).X_&&await async function(r,s){if(function(l){return KA(l)&&l!==te.ABORTED}(s.code)){const o=r.Ta.shift();zi(r).B_(),await PN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Lf(r)}}(t,e),IN(t)&&CN(t)}async function Cw(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),me(Ca,"RemoteStore received new credentials");const r=Ba(n);n.Ea.add(3),await wu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Rf(n)}async function m4(t,e){const n=Ce(t);e?(n.Ea.delete(2),await Rf(n)):e||(n.Ea.add(2),await wu(n),n.Ra.set("Unknown"))}function yl(t){return t.ma||(t.ma=function(n,r,s){const o=Ce(n);return o.sa(),new JR(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:s4.bind(null,t),t_:i4.bind(null,t),r_:a4.bind(null,t),H_:o4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Jy(t)?Yy(t):t.Ra.set("Unknown")):(await t.ma.stop(),SN(t))})),t.ma}function zi(t){return t.fa||(t.fa=function(n,r,s){const o=Ce(n);return o.sa(),new XR(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:u4.bind(null,t),r_:f4.bind(null,t),ta:d4.bind(null,t),na:h4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Lf(t)):(await t.fa.stop(),t.Ta.length>0&&(me(Ca,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,h=new Xy(e,n,l,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ex(t,e){if(Rs("AsyncQueue",`${e}: ${t}`),gl(t))return new de(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=ac(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.ga=new ft(we.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class al{constructor(e,n,r,s,o,l,h,f,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new al(e,n,Ho.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class g4{constructor(){this.queries=Aw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ce(n),o=s.queries;s.queries=Aw(),o.forEach((l,h)=>{for(const f of h.Sa)f.onError(r)})})(this,new de(te.ABORTED,"Firestore shutting down"))}}function Aw(){return new Ua(t=>Jj(t),Ef)}async function tx(t,e){const n=Ce(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new p4,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=ex(l,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&rx(n)}async function nx(t,e){const n=Ce(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function y4(t,e){const n=Ce(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(r=!0);l.wa=s}}r&&rx(n)}function x4(t,e,n){const r=Ce(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function rx(t){t.Ca.forEach(e=>{e.next()})}var fg,Rw;(Rw=fg||(fg={})).Ma="default",Rw.Cache="cache";class sx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new al(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.key=e}}class AN{constructor(e){this.key=e}}class v4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=Xj(e),this.tu=new Ho(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new zw,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,x)=>{const _=s.get(g),T=Sf(this.query,x)?x:null,k=!!_&&this.mutatedKeys.has(_.key),C=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;_&&T?_.data.isEqual(T.data)?k!==C&&(r.track({type:3,doc:T}),A=!0):this.su(_,T)||(r.track({type:2,doc:T}),A=!0,(f&&this.eu(T,f)>0||m&&this.eu(T,m)<0)&&(h=!0)):!_&&T?(r.track({type:0,doc:T}),A=!0):_&&!T&&(r.track({type:1,doc:_}),A=!0,(f||m)&&(h=!0)),A&&(T?(l=l.add(T),o=C?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((g,x)=>function(T,k){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:A})}};return C(T)-C(k)}(g.type,x.type)||this.eu(g.doc,x.doc)),this.ou(r),s=s??!1;const h=n&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,m=f!==this.Za;return this.Za=f,l.length!==0||m?{snapshot:new al(this.query,e.tu,o,l,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new AN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new zN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ix="SyncEngine";class w4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _4{constructor(e){this.key=e,this.hu=!1}}class b4{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ua(h=>Jj(h),Ef),this.Iu=new Map,this.Eu=new Set,this.du=new ft(we.comparator),this.Au=new Map,this.Ru=new Hy,this.Vu={},this.mu=new Map,this.fu=il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function j4(t,e,n=!0){const r=VN(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await RN(r,e,n,!0),s}async function N4(t,e){const n=VN(t);await RN(n,e,!0,!1)}async function RN(t,e,n,r){const s=await $R(t.localStore,Zr(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await k4(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&TN(t.remoteStore,s),h}async function k4(t,e,n,r,s){t.pu=(x,_,T)=>async function(C,A,E,S){let I=A.view.ru(E);I.Cs&&(I=await Tw(C.localStore,A.query,!1).then(({documents:N})=>A.view.ru(N,I)));const H=S&&S.targetChanges.get(A.targetId),O=S&&S.targetMismatches.get(A.targetId)!=null,R=A.view.applyChanges(I,C.isPrimaryClient,H,O);return Dw(C,A.targetId,R.au),R.snapshot}(t,x,_,T);const o=await Tw(t.localStore,e,!0),l=new v4(e,o.Qs),h=l.ru(o.documents),f=vu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,f);Dw(t,n,m.au);const g=new w4(e,n,l);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function T4(t,e,n){const r=Ce(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter(l=>!Ef(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gy(r.remoteStore,s.targetId),mg(r,s.targetId)}).catch(pl)):(mg(r,s.targetId),await dg(r.localStore,s.targetId,!0))}async function E4(t,e){const n=Ce(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gy(n.remoteStore,r.targetId))}async function S4(t,e,n){const r=L4(t);try{const s=await function(l,h){const f=Ce(l),m=it.now(),g=h.reduce((T,k)=>T.add(k.key),Oe());let x,_;return f.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=Ls(),C=Oe();return f.Ns.getEntries(T,g).next(A=>{k=A,k.forEach((E,S)=>{S.isValidDocument()||(C=C.add(E))})}).next(()=>f.localDocuments.getOverlayedDocuments(T,k)).next(A=>{x=A;const E=[];for(const S of h){const I=WA(S,x.get(S.key).overlayedDocument);I!=null&&E.push(new Wi(S.key,I,$j(I.value.mapValue),Cn.exists(!0)))}return f.mutationQueue.addMutationBatch(T,m,E,h)}).next(A=>{_=A;const E=A.applyToLocalDocumentSet(x,C);return f.documentOverlayCache.saveOverlays(T,A.batchId,E)})}).then(()=>({batchId:_.batchId,changes:tN(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,f){let m=l.Vu[l.currentUser.toKey()];m||(m=new ft(Me)),m=m.insert(h,f),l.Vu[l.currentUser.toKey()]=m}(r,s.batchId,n),await _u(r,s.changes),await Lf(r.remoteStore)}catch(s){const o=ex(s,"Failed to persist write");n.reject(o)}}async function LN(t,e){const n=Ce(t);try{const r=await BR(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Ke(l.hu,14607):s.removedDocuments.size>0&&(Ke(l.hu,42227),l.hu=!1))}),await _u(n,r,e)}catch(r){await pl(r)}}function Lw(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const f=Ce(l);f.onlineState=h;let m=!1;f.queries.forEach((g,x)=>{for(const _ of x.Sa)_.va(h)&&(m=!0)}),m&&rx(f)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P4(t,e,n){const r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new ft(we.comparator);l=l.insert(o,sn.newNoDocument(o,Pe.min()));const h=Oe().add(o),f=new zf(Pe.min(),new Map,new ft(Me),l,h);await LN(r,f),r.du=r.du.remove(o),r.Au.delete(e),ax(r)}else await dg(r.localStore,e,!1).then(()=>mg(r,e,n)).catch(pl)}async function I4(t,e){const n=Ce(t),r=e.batch.batchId;try{const s=await UR(n.localStore,e);MN(n,r,null),DN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _u(n,s)}catch(s){await pl(s)}}async function C4(t,e,n){const r=Ce(t);try{const s=await function(l,h){const f=Ce(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return f.mutationQueue.lookupMutationBatch(m,h).next(x=>(Ke(x!==null,37113),g=x.keys(),f.mutationQueue.removeMutationBatch(m,x))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,g,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>f.localDocuments.getDocuments(m,g))})}(r.localStore,e);MN(r,e,n),DN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _u(r,s)}catch(s){await pl(s)}}function DN(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function MN(t,e,n){const r=Ce(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function mg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||ON(t,r)})}function ON(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ax(t))}function Dw(t,e,n){for(const r of n)r instanceof zN?(t.Ru.addReference(r.key,e),z4(t,r)):r instanceof AN?(me(ix,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ON(t,r.key)):Ne(19791,{wu:r})}function z4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(me(ix,"New document in limbo: "+n),t.Eu.add(r),ax(t))}function ax(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new we(tt.fromString(e)),r=t.fu.next();t.Au.set(r,new _4(n)),t.du=t.du.insert(n,r),TN(t.remoteStore,new ui(Zr(Tf(n.path)),r,"TargetPurposeLimboResolution",jf.ce))}}async function _u(t,e,n){const r=Ce(t),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((h,f)=>{l.push(r.pu(f,e,n).then(m=>{var g;if((m||n)&&r.isPrimaryClient){const x=m?!m.fromCache:(g=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(f.targetId,x?"current":"not-current")}if(m){s.push(m);const x=Zy.As(f.targetId,m);o.push(x)}}))}),await Promise.all(l),r.Pu.H_(s),await async function(f,m){const g=Ce(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ne.forEach(m,_=>ne.forEach(_.Es,T=>g.persistence.referenceDelegate.addReference(x,_.targetId,T)).next(()=>ne.forEach(_.ds,T=>g.persistence.referenceDelegate.removeReference(x,_.targetId,T)))))}catch(x){if(!gl(x))throw x;me(Ky,"Failed to update sequence numbers: "+x)}for(const x of m){const _=x.targetId;if(!x.fromCache){const T=g.Ms.get(_),k=T.snapshotVersion,C=T.withLastLimboFreeSnapshotVersion(k);g.Ms=g.Ms.insert(_,C)}}}(r.localStore,o))}async function A4(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){me(ix,"User change. New user:",e.toKey());const r=await bN(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(f=>{f.reject(new de(te.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _u(n,r.Ls)}}function R4(t,e){const n=Ce(t),r=n.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let s=Oe();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function VN(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P4.bind(null,e),e.Pu.H_=y4.bind(null,e.eventManager),e.Pu.yu=x4.bind(null,e.eventManager),e}function L4(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C4.bind(null,e),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VR(this.persistence,new DR,e.initialUser,this.serializer)}Cu(e){return new _N(qy.mi,this.serializer)}Du(e){return new qR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class D4 extends Wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof Bh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _R(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new _N(r=>Bh.mi(r,n),this.serializer)}}class pg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A4.bind(null,this.syncEngine),await m4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g4}()}createDatastore(e){const n=Af(e.databaseInfo.databaseId),r=function(o){return new YR(o)}(e.databaseInfo);return function(o,l,h,f){return new t4(o,l,h,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,h){return new r4(r,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Lw(this.syncEngine,n,0),function(){return Pw.v()?new Pw:new ZR}())}createSyncEngine(e,n){return function(s,o,l,h,f,m,g){const x=new b4(s,o,l,h,f,m);return g&&(x.gu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Ce(s);me(Ca,"RemoteStore shutting down."),o.Ea.add(5),await wu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}pg.provider={build:()=>new pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="FirestoreClient";class M4{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=nn.UNAUTHENTICATED,this.clientId=Ly.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{me(Ai,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(me(Ai,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ex(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bm(t,e){t.asyncQueue.verifyOperationInProgress(),me(Ai,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Mw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await O4(t);me(Ai,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Cw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Cw(e.remoteStore,s)),t._onlineComponents=e}async function O4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(Ai,"Using user provided OfflineComponentProvider");try{await Bm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;tl("Error using user provided cache. Falling back to memory cache: "+n),await Bm(t,new Wh)}}else me(Ai,"Using default OfflineComponentProvider"),await Bm(t,new D4(void 0));return t._offlineComponents}async function UN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(Ai,"Using user provided OnlineComponentProvider"),await Mw(t,t._uninitializedComponentsProvider._online)):(me(Ai,"Using default OnlineComponentProvider"),await Mw(t,new pg))),t._onlineComponents}function V4(t){return UN(t).then(e=>e.syncEngine)}async function $h(t){const e=await UN(t),n=e.eventManager;return n.onListen=j4.bind(null,e.syncEngine),n.onUnlisten=T4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=E4.bind(null,e.syncEngine),n}function U4(t,e,n={}){const r=new ks;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,f,m){const g=new ox({next:_=>{g.Nu(),l.enqueueAndForget(()=>nx(o,x));const T=_.docs.has(h);!T&&_.fromCache?m.reject(new de(te.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&_.fromCache&&f&&f.source==="server"?m.reject(new de(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(_)},error:_=>m.reject(_)}),x=new sx(Tf(h.path),g,{includeMetadataChanges:!0,qa:!0});return tx(o,x)}(await $h(t),t.asyncQueue,e,n,r)),r.promise}function B4(t,e,n={}){const r=new ks;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,f,m){const g=new ox({next:_=>{g.Nu(),l.enqueueAndForget(()=>nx(o,x)),_.fromCache&&f.source==="server"?m.reject(new de(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(_)},error:_=>m.reject(_)}),x=new sx(h,g,{includeMetadataChanges:!0,qa:!0});return tx(o,x)}(await $h(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firestore.googleapis.com",Vw=!0;class Uw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FN,this.ssl=Vw}else this.host=e.host,this.ssl=e.ssl??Vw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vR)throw new de(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qz;switch(r.type){case"firstParty":return new Qz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ow.get(n);r&&(me("ComponentProvider","Removing Datastore"),Ow.delete(n),r.terminate())}(this),Promise.resolve()}}function F4(t,e,n,r={}){var m;t=In(t,Df);const s=Vi(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(_y(`https://${h}`),by("Firestore",!0)),o.host!==FN&&o.host!==h&&tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:s,emulatorOptions:r};if(!ka(f,l)&&(t._setSettings(f),r.mockUserToken)){let g,x;if(typeof r.mockUserToken=="string")g=r.mockUserToken,x=nn.MOCK_USER;else{g=M1(r.mockUserToken,(m=t._app)==null?void 0:m.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new de(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new nn(_)}t._authCredentials=new Zz(new zj(g,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fa(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(gu(n,gt._jsonSchema))return new gt(e,r||null,new we(tt.fromString(n.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:Ct("string",gt._jsonSchemaVersion),referencePath:Ct("string")};class ji extends Fa{constructor(e,n,r){super(e,n,Tf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new we(e))}withConverter(e){return new ji(this.firestore,e,this._path)}}function At(t,e,...n){if(t=Ge(t),Aj("collection","path",e),t instanceof Df){const r=tt.fromString(e,...n);return Xv(r),new ji(t,null,r)}{if(!(t instanceof gt||t instanceof ji))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return Xv(r),new ji(t.firestore,null,r)}}function ct(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=Ly.newId()),Aj("doc","path",e),t instanceof Df){const r=tt.fromString(e,...n);return Jv(r),new gt(t,null,new we(r))}{if(!(t instanceof gt||t instanceof ji))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return Jv(r),new gt(t.firestore,t instanceof ji?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="AsyncQueue";class Fw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NN(this,"async_queue_retry"),this._c=()=>{const r=Um();r&&me(Bw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gl(e))throw e;me(Bw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",Ww(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Xy.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&Ne(47125,{Pc:Ww(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ww(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ds extends Df{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Fw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fw(e),this._firestoreClient=void 0,await e}}}function W4(t,e){const n=typeof t=="object"?t:ky(),r=typeof t=="string"?t:Lh,s=xf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=R1("firestore");o&&F4(s,...o)}return s}function bu(t){if(t._terminated)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$4(t),t._firestoreClient}function $4(t){var r,s,o;const e=t._freezeSettings(),n=function(h,f,m,g){return new fA(h,f,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,BN(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new M4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(Qt.fromBase64String(e))}catch(n){throw new de(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new er(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:Ct("string",er._jsonSchemaVersion),bytes:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(gu(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:Ct("string",Gr._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,Qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Qr(e.vectorValues);throw new de(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qr._jsonSchemaVersion="firestore/vectorValue/1.0",Qr._jsonSchema={type:Ct("string",Qr._jsonSchemaVersion),vectorValues:Ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^__.*__$/;class q4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class WN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $N(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:t})}}class lx{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($N(this.Ac)&&H4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Z4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Af(e)}Cc(e,n,r,s=!1){return new lx({Ac:e,methodName:n,Dc:r,path:qt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Of(t){const e=t._freezeSettings(),n=Af(t._databaseId);return new Z4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HN(t,e,n,r,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);ux("Data must be an object, but it was:",l,r);const h=KN(r,l);let f,m;if(o.merge)f=new On(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const x of o.mergeFields){const _=gg(e,x,n);if(!l.contains(_))throw new de(te.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);QN(g,_)||g.push(_)}f=new On(g),m=l.fieldTransforms.filter(x=>f.covers(x.field))}else f=null,m=l.fieldTransforms;return new q4(new kn(h),f,m)}class Vf extends Mf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vf}}class cx extends Mf{_toFieldTransform(e){return new VA(e.path,new Yc)}isEqual(e){return e instanceof cx}}function qN(t,e,n,r){const s=t.Cc(1,e,n);ux("Data must be an object, but it was:",s,r);const o=[],l=kn.empty();Fi(r,(f,m)=>{const g=dx(e,f,n);m=Ge(m);const x=s.yc(g);if(m instanceof Vf)o.push(g);else{const _=Nu(m,x);_!=null&&(o.push(g),l.set(g,_))}});const h=new On(o);return new WN(l,h,s.fieldTransforms)}function ZN(t,e,n,r,s,o){const l=t.Cc(1,e,n),h=[gg(e,r,n)],f=[s];if(o.length%2!=0)throw new de(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)h.push(gg(e,o[_])),f.push(o[_+1]);const m=[],g=kn.empty();for(let _=h.length-1;_>=0;--_)if(!QN(m,h[_])){const T=h[_];let k=f[_];k=Ge(k);const C=l.yc(T);if(k instanceof Vf)m.push(T);else{const A=Nu(k,C);A!=null&&(m.push(T),g.set(T,A))}}const x=new On(m);return new WN(g,x,l.fieldTransforms)}function K4(t,e,n,r=!1){return Nu(n,t.Cc(r?4:3,e))}function Nu(t,e){if(GN(t=Ge(t)))return ux("Unsupported field value:",e,t),KN(t,e);if(t instanceof Mf)return function(r,s){if(!$N(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const h of r){let f=Nu(h,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=it.fromDate(r);return{timestampValue:Uh(s.serializer,o)}}if(r instanceof it){const o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uh(s.serializer,o)}}if(r instanceof Gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof er)return{bytesValue:fN(s.serializer,r._byteString)};if(r instanceof gt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$y(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Qr)return function(l,h){return{mapValue:{fields:{[Fj]:{stringValue:Wj},[Dh]:{arrayValue:{values:l.toArray().map(m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return By(h.serializer,m)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${bf(r)}`)}(t,e)}function KN(t,e){const n={};return Dj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(t,(r,s)=>{const o=Nu(s,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function GN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof Gr||t instanceof er||t instanceof gt||t instanceof Mf||t instanceof Qr)}function ux(t,e,n){if(!GN(n)||!Rj(n)){const r=bf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function gg(t,e,n){if((e=Ge(e))instanceof ju)return e._internalPath;if(typeof e=="string")return dx(t,e);throw Hh("Field path arguments must be of type string or ",t,!1,void 0,n)}const G4=new RegExp("[~\\*/\\[\\]]");function dx(t,e,n){if(e.search(G4)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ju(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hh(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new de(te.INVALID_ARGUMENT,h+t+f)}function QN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Q4 extends YN{data(){return super.data()}}function hx(t,e){return typeof e=="string"?dx(t,e):e instanceof ju?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fx{}class Y4 extends fx{}function Ft(t,e,...n){let r=[];e instanceof fx&&r.push(e),r=r.concat(n),function(o){const l=o.filter(f=>f instanceof mx).length,h=o.filter(f=>f instanceof Uf).length;if(l>1||l>0&&h>0)throw new de(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Uf extends Y4{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uf(e,n,r)}_apply(e){const n=this._parse(e);return XN(e._query,n),new Fa(e.firestore,e.converter,ig(e._query,n))}_parse(e){const n=Of(e.firestore);return function(o,l,h,f,m,g,x){let _;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new de(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){qw(x,g);const k=[];for(const C of x)k.push(Hw(f,o,C));_={arrayValue:{values:k}}}else _=Hw(f,o,x)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||qw(x,g),_=K4(h,l,x,g==="in"||g==="not-in");return It.create(m,g,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Et(t,e,n){const r=e,s=hx("where",t);return Uf._create(s,r,n)}class mx extends fx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const f of h)XN(l,f),l=ig(l,f)}(e._query,n),new Fa(e.firestore,e.converter,ig(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Hw(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new de(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yj(e)&&n.indexOf("/")!==-1)throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(tt.fromString(n));if(!we.isDocumentKey(r))throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ow(t,new we(r))}if(n instanceof gt)return ow(t,n._key);throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bf(n)}.`)}function qw(t,e){if(!Array.isArray(t)||t.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XN(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class J4{convertValue(e,n="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fi(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,s,o;const n=(o=(s=(r=e.fields)==null?void 0:r[Dh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>wt(l.doubleValue));return new Qr(n)}convertGeoPoint(e){return new Gr(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kc(e));default:return null}}convertTimestamp(e){const n=Pi(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tt.fromString(e);Ke(vN(r),9688,{name:e});const s=new Gc(r.get(1),r.get(3)),o=new we(r.popFirst(5));return s.isEqual(n)||Rs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class lc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends YN{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:Ct("string",ga._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class eh extends ga{data(e={}){return super.data(e)}}class ya{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new lc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new eh(this._firestore,this._userDataWriter,r.key,r,new lc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const f=new eh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new lc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const f=new eh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new lc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:X4(h.type),doc:f,oldIndex:m,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ly.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function X4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){t=In(t,gt);const e=In(t.firestore,Ds);return U4(bu(e),t._key).then(n=>tk(e,t,n))}ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:Ct("string",ya._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class px extends J4{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function Dn(t){t=In(t,Fa);const e=In(t.firestore,Ds),n=bu(e),r=new px(e);return JN(t._query),B4(n,t._query).then(s=>new ya(e,r,t,s))}function ll(t,e,n){t=In(t,gt);const r=In(t.firestore,Ds),s=ek(t.converter,e,n);return Bf(r,[HN(Of(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Cn.none())])}function Ts(t,e,n,...r){t=In(t,gt);const s=In(t.firestore,Ds),o=Of(s);let l;return l=typeof(e=Ge(e))=="string"||e instanceof ju?ZN(o,"updateDoc",t._key,e,n,r):qN(o,"updateDoc",t._key,e),Bf(s,[l.toMutation(t._key,Cn.exists(!0))])}function gx(t){return Bf(In(t.firestore,Ds),[new Cf(t._key,Cn.none())])}function qo(t,...e){var f,m,g;t=Ge(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||$w(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if($w(e[r])){const x=e[r];e[r]=(f=x.next)==null?void 0:f.bind(x),e[r+1]=(m=x.error)==null?void 0:m.bind(x),e[r+2]=(g=x.complete)==null?void 0:g.bind(x)}let o,l,h;if(t instanceof gt)l=In(t.firestore,Ds),h=Tf(t._key.path),o={next:x=>{e[r]&&e[r](tk(l,t,x))},error:e[r+1],complete:e[r+2]};else{const x=In(t,Fa);l=In(x.firestore,Ds),h=x._query;const _=new px(l);o={next:T=>{e[r]&&e[r](new ya(l,_,x,T))},error:e[r+1],complete:e[r+2]},JN(t._query)}return function(_,T,k,C){const A=new ox(C),E=new sx(T,A,k);return _.asyncQueue.enqueueAndForget(async()=>tx(await $h(_),E)),()=>{A.Nu(),_.asyncQueue.enqueueAndForget(async()=>nx(await $h(_),E))}}(bu(l),h,s,o)}function Bf(t,e){return function(r,s){const o=new ks;return r.asyncQueue.enqueueAndForget(async()=>S4(await V4(r),s,o)),o.promise}(bu(t),e)}function tk(t,e,n){const r=n.docs.get(e._key),s=new px(t);return new ga(t,s,e._key,r,new lc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Of(e)}set(e,n,r){this._verifyNotCommitted();const s=Fm(e,this._firestore),o=ek(s.converter,n,r),l=HN(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,Cn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Fm(e,this._firestore);let l;return l=typeof(n=Ge(n))=="string"||n instanceof ju?ZN(this._dataReader,"WriteBatch.update",o._key,n,r,s):qN(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fm(e,this._firestore);return this._mutations=this._mutations.concat(new Cf(n._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fm(t,e){if((t=Ge(t)).firestore!==e)throw new de(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function tL(){return new cx("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){return bu(t=In(t,Ds)),new eL(t,e=>Bf(t,e))}(function(e,n=!0){(function(s){ml=s})(Oa),Ta(new Ei("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new Ds(new Kz(r.getProvider("auth-internal")),new Yz(l,r.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new de(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(m.options.projectId,g)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),$r(Kv,Gv,e),$r(Kv,Gv,"esm2020")})();var nL="firebase",rL="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(nL,rL,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="firebasestorage.googleapis.com",rk="storageBucket",sL=2*60*1e3,iL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt extends ts{constructor(e,n,r=0){super(Wm(e),`Firebase Storage: ${n} (${Wm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yt||(yt={}));function Wm(t){return"storage/"+t}function yx(){const t="An unknown error occurred, please check the error payload for server response.";return new xt(yt.UNKNOWN,t)}function aL(t){return new xt(yt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oL(t){return new xt(yt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xt(yt.UNAUTHENTICATED,t)}function cL(){return new xt(yt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function uL(t){return new xt(yt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function dL(){return new xt(yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hL(){return new xt(yt.CANCELED,"User canceled the upload/download.")}function fL(t){return new xt(yt.INVALID_URL,"Invalid URL '"+t+"'.")}function mL(t){return new xt(yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pL(){return new xt(yt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rk+"' property when initializing the app?")}function gL(){return new xt(yt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yL(){return new xt(yt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xL(t){return new xt(yt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yg(t){return new xt(yt.INVALID_ARGUMENT,t)}function sk(){return new xt(yt.APP_DELETED,"The Firebase app was deleted.")}function vL(t){return new xt(yt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nc(t,e){return new xt(yt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Jl(t){throw new xt(yt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vn.makeFromUrl(e,n)}catch{return new Vn(e,"")}if(r.path==="")return r;throw mL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+s+l,"i"),f={bucket:1,path:3};function m(H){H.path_=decodeURIComponent(H.path)}const g="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",T=new RegExp(`^https?://${x}/${g}/b/${s}/o${_}`,"i"),k={bucket:1,path:3},C=n===nk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",E=new RegExp(`^https?://${C}/${s}/${A}`,"i"),I=[{regex:h,indices:f,postModify:o},{regex:T,indices:k,postModify:m},{regex:E,indices:{bucket:1,path:2},postModify:m}];for(let H=0;H<I.length;H++){const O=I[H],R=O.regex.exec(e);if(R){const N=R[O.indices.bucket];let b=R[O.indices.path];b||(b=""),r=new Vn(N,b),O.postModify(r);break}}if(r==null)throw fL(e);return r}}class wL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t,e,n){let r=1,s=null,o=null,l=!1,h=0;function f(){return h===2}let m=!1;function g(...A){m||(m=!0,e.apply(null,A))}function x(A){s=setTimeout(()=>{s=null,t(T,f())},A)}function _(){o&&clearTimeout(o)}function T(A,...E){if(m){_();return}if(A){_(),g.call(null,A,...E);return}if(f()||l){_(),g.call(null,A,...E);return}r<64&&(r*=2);let I;h===1?(h=2,I=0):I=(r+Math.random())*1e3,x(I)}let k=!1;function C(A){k||(k=!0,_(),!m&&(s!==null?(A||(h=2),clearTimeout(s),x(0)):A||(h=1)))}return x(0),o=setTimeout(()=>{l=!0,C(!0)},n),C}function bL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){return t!==void 0}function NL(t){return typeof t=="object"&&!Array.isArray(t)}function xx(t){return typeof t=="string"||t instanceof String}function Kw(t){return vx()&&t instanceof Blob}function vx(){return typeof Blob<"u"}function Gw(t,e,n,r){if(r<e)throw yg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw yg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ik(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var xa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xa||(xa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n,r,s,o,l,h,f,m,g,x,_=!0,T=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=x,this.retry=_,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,C)=>{this.resolve_=k,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Pd(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{const f=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===xa.NO_ERROR,f=o.getStatus();if(!h||kL(f,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===xa.ABORT;r(!1,new Pd(!1,null,g));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new Pd(m,o))})},n=(r,s)=>{const o=this.resolve_,l=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());jL(f)?o(f):o()}catch(f){l(f)}else if(h!==null){const f=yx();f.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,f)):l(f)}else if(s.canceled){const f=this.appDelete_?sk():hL();l(f)}else{const f=dL();l(f)}};this.canceled_?n(!1,new Pd(!1,null,!0)):this.backoffId_=_L(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function EL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function SL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function IL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function CL(t,e,n,r,s,o,l=!0,h=!1){const f=ik(t.urlParams),m=t.url+f,g=Object.assign({},t.headers);return PL(g,e),EL(g,n),SL(g,o),IL(g,r),new TL(m,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function AL(...t){const e=zL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(vx())return new Blob(t);throw new xt(yt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function RL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t){if(typeof atob>"u")throw xL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $m{constructor(e,n){this.data=e,this.contentType=n||null}}function DL(t,e){switch(t){case Vr.RAW:return new $m(ak(e));case Vr.BASE64:case Vr.BASE64URL:return new $m(ok(t,e));case Vr.DATA_URL:return new $m(OL(e),VL(e))}throw yx()}function ak(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=t.charCodeAt(++n);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function ML(t){let e;try{e=decodeURIComponent(t)}catch{throw Nc(Vr.DATA_URL,"Malformed data URL.")}return ak(e)}function ok(t,e){switch(t){case Vr.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw Nc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Vr.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw Nc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=LL(e)}catch(s){throw s.message.includes("polyfill")?s:Nc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class lk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Nc(Vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=UL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function OL(t){const e=new lk(t);return e.base64?ok(Vr.BASE64,e.rest):ML(e.rest)}function VL(t){return new lk(t).contentType}function UL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){let r=0,s="";Kw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Kw(this.data_)){const r=this.data_,s=RL(r,e,n);return s===null?null:new ai(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ai(r,!0)}}static getBlob(...e){if(vx()){const n=e.map(r=>r instanceof ai?r.data_:r);return new ai(AL.apply(null,n))}else{const n=e.map(l=>xx(l)?DL(Vr.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let h=0;h<l.length;h++)s[o++]=l[h]}),new ai(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t){let e;try{e=JSON.parse(t)}catch{return null}return NL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function FL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function uk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t,e){return e}class hn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||WL}}let Id=null;function $L(t){return!xx(t)||t.length<2?t:uk(t)}function dk(){if(Id)return Id;const t=[];t.push(new hn("bucket")),t.push(new hn("generation")),t.push(new hn("metageneration")),t.push(new hn("name","fullPath",!0));function e(o,l){return $L(l)}const n=new hn("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const s=new hn("size");return s.xform=r,t.push(s),t.push(new hn("timeCreated")),t.push(new hn("updated")),t.push(new hn("md5Hash",null,!0)),t.push(new hn("cacheControl",null,!0)),t.push(new hn("contentDisposition",null,!0)),t.push(new hn("contentEncoding",null,!0)),t.push(new hn("contentLanguage",null,!0)),t.push(new hn("contentType",null,!0)),t.push(new hn("metadata","customMetadata",!0)),Id=t,Id}function HL(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new Vn(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function qL(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return HL(r,t),r}function hk(t,e,n){const r=ck(e);return r===null?null:qL(t,r,n)}function ZL(t,e,n,r){const s=ck(e);if(s===null||!xx(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(m=>{const g=t.bucket,x=t.fullPath,_="/b/"+l(g)+"/o/"+l(x),T=Ff(_,n,r),k=ik({alt:"media",token:m});return T+k})[0]}function KL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class wx{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){if(!t)throw yx()}function GL(t,e){function n(r,s){const o=hk(t,s,e);return fk(o!==null),o}return n}function QL(t,e){function n(r,s){const o=hk(t,s,e);return fk(o!==null),ZL(o,s,t.host,t._protocol)}return n}function mk(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=cL():s=lL():n.getStatus()===402?s=oL(t.bucket):n.getStatus()===403?s=uL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function pk(t){const e=mk(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=aL(t.path)),o.serverResponse=s.serverResponse,o}return n}function YL(t,e,n){const r=e.fullServerUrl(),s=Ff(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,h=new wx(s,o,QL(t,n),l);return h.errorHandler=pk(e),h}function JL(t,e){const n=e.fullServerUrl(),r=Ff(n,t.host,t._protocol),s="DELETE",o=t.maxOperationRetryTime;function l(f,m){}const h=new wx(r,s,l,o);return h.successCodes=[200,204],h.errorHandler=pk(e),h}function XL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function e5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=XL(null,e)),r}function t5(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function h(){let I="";for(let H=0;H<2;H++)I=I+Math.random().toString().slice(2);return I}const f=h();l["Content-Type"]="multipart/related; boundary="+f;const m=e5(e,r,s),g=KL(m,n),x="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,_=`\r
--`+f+"--",T=ai.getBlob(x,r,_);if(T===null)throw gL();const k={name:m.fullPath},C=Ff(o,t.host,t._protocol),A="POST",E=t.maxUploadRetryTime,S=new wx(C,A,GL(t,n),E);return S.urlParams=k,S.headers=l,S.body=T.uploadData(),S.errorHandler=mk(e),S}class n5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,o){if(this.sent_)throw Jl("cannot .send() more than once");if(Vi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class r5 extends n5{initXhr(){this.xhr_.responseType="text"}}function _x(){return new r5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this._service=e,n instanceof Vn?this._location=n:this._location=Vn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new za(e,n)}get root(){const e=new Vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uk(this._location.path)}get storage(){return this._service}get parent(){const e=BL(this._location.path);if(e===null)return null;const n=new Vn(this._location.bucket,e);return new za(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vL(e)}}function s5(t,e,n){t._throwIfRoot("uploadBytes");const r=t5(t.storage,t._location,dk(),new ai(e,!0),n);return t.storage.makeRequestWithTokens(r,_x).then(s=>({metadata:s,ref:t}))}function i5(t){t._throwIfRoot("getDownloadURL");const e=YL(t.storage,t._location,dk());return t.storage.makeRequestWithTokens(e,_x).then(n=>{if(n===null)throw yL();return n})}function a5(t){t._throwIfRoot("deleteObject");const e=JL(t.storage,t._location);return t.storage.makeRequestWithTokens(e,_x)}function o5(t,e){const n=FL(t._location.path,e),r=new Vn(t._location.bucket,n);return new za(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t){return/^[A-Za-z]+:\/\//.test(t)}function c5(t,e){return new za(t,e)}function gk(t,e){if(t instanceof bx){const n=t;if(n._bucket==null)throw pL();const r=new za(n,n._bucket);return e!=null?gk(r,e):r}else return e!==void 0?o5(t,e):t}function u5(t,e){if(e&&l5(e)){if(t instanceof bx)return c5(t,e);throw yg("To use ref(service, url), the first argument must be a Storage instance.")}else return gk(t,e)}function Qw(t,e){const n=e==null?void 0:e[rk];return n==null?null:Vn.makeFromBucketSpec(n,t)}function d5(t,e,n,r={}){t.host=`${e}:${n}`;const s=Vi(e);s&&(_y(`https://${t.host}/b`),by("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:M1(o,t.app.options.projectId))}class bx{constructor(e,n,r,s,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=nk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sL,this._maxUploadRetryTime=iL,this._requests=new Set,s!=null?this._bucket=Vn.makeFromBucketSpec(s,this._host):this._bucket=Qw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vn.makeFromBucketSpec(this._url,e):this._bucket=Qw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new za(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new wL(sk());{const l=CL(e,this._appId,r,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Yw="@firebase/storage",Jw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="storage";function xk(t,e,n){return t=Ge(t),s5(t,e,n)}function vk(t){return t=Ge(t),i5(t)}function h5(t){return t=Ge(t),a5(t)}function jx(t,e){return t=Ge(t),u5(t,e)}function f5(t=ky(),e){t=Ge(t);const r=xf(t,yk).getImmediate({identifier:e}),s=R1("storage");return s&&m5(r,...s),r}function m5(t,e,n,r={}){d5(t,e,n,r)}function p5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new bx(n,r,s,e,Oa)}function g5(){Ta(new Ei(yk,p5,"PUBLIC").setMultipleInstances(!0)),$r(Yw,Jw,""),$r(Yw,Jw,"esm2020")}g5();const y5={apiKey:"AIzaSyCBgcl8j_uJDVMpcNFEQvW-EqnshPiW2n8",authDomain:"tomyhomeapp-b7bf1.firebaseapp.com",projectId:"tomyhomeapp-b7bf1",storageBucket:"tomyhomeapp-b7bf1.firebasestorage.app",messagingSenderId:"1034110443870",appId:"1:1034110443870:web:1aa986bfe6fdf770e62fcf",measurementId:"G-Y5P06F4581"},Nx=U1(y5),Ur=$z(Nx),Ie=W4(Nx),kx=f5(Nx),x5=({service:t})=>a.jsxs(ke,{to:`/uslugodawcy/${t.slug}`,className:"block bg-white rounded-2xl shadow-sm p-6 text-center hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-r from-primary/10 to-secondary/10 flex items-center justify-center",children:a.jsx("span",{className:"text-3xl",children:t.icon})}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:t.name}),t.price>0?a.jsxs("p",{className:"text-sm text-gray-500",children:["od ",t.price," z"]}):a.jsx("p",{className:"text-sm text-gray-500",children:"Zobacz wszystkie"})]});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const n=D.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:h="",children:f,...m},g)=>D.createElement("svg",{ref:g,...v5,width:s,height:s,stroke:r,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide",`lucide-${w5(t)}`,h].join(" "),...m},[...e.map(([x,_])=>D.createElement(x,_)),...Array.isArray(f)?f:[f]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=ue("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=ue("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=ue("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=ue("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=ue("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=ue("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=ue("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ue("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=ue("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=ue("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=ue("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=ue("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=ue("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ue("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=ue("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=ue("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=ue("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=ue("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=ue("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=ue("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=ue("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=ue("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=ue("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=ue("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=ue("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=ue("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),eD=({review:t})=>{const[e,n]=D.useState(t.helpful),[r,s]=D.useState(!1),o=()=>{r||(n(l=>l+1),s(!0))};return a.jsxs("div",{className:"card card-hover p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full ${t.gradientClass} flex items-center justify-center text-white font-bold text-lg`,children:t.avatar}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:t.author}),a.jsxs("p",{className:"text-sm text-gray-500",children:[t.service,"  ",t.date]})]})]}),a.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((l,h)=>a.jsx(Br,{className:`w-4 h-4 ${h<t.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},h))}),a.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:t.content}),a.jsxs("button",{onClick:o,disabled:r,className:`flex items-center gap-2 text-sm transition-colors ${r?"text-accent cursor-default":"text-gray-500 hover:text-accent"}`,children:[a.jsx(H5,{className:"w-4 h-4"}),a.jsxs("span",{children:["Pomocne (",e,")"]})]})]})},tD=({target:t,label:e,suffix:n=""})=>{const[r,s]=D.useState(0),[o,l]=D.useState(!1),h=D.useRef(null);D.useEffect(()=>{const m=new IntersectionObserver(g=>{g[0].isIntersecting&&!o&&(l(!0),f())},{threshold:.5});return h.current&&m.observe(h.current),()=>m.disconnect()},[o,t]);const f=()=>{const x=t/60;let _=0;const T=setInterval(()=>{_+=x,_>=t?(s(t),clearInterval(T)):s(Math.floor(_))},2e3/60)};return a.jsxs("div",{ref:h,className:"text-center",children:[a.jsxs("div",{className:"text-4xl lg:text-5xl font-black text-white mb-2",children:[r.toLocaleString(),n]}),a.jsx("div",{className:"text-white/80",children:e})]})},nD=()=>{const t=[{target:1e4,label:"Zadowolonych klientw",suffix:"+"},{target:500,label:"Specjalistw",suffix:"+"},{target:50,label:"Miast w Polsce",suffix:""},{target:98,label:"Pozytywnych opinii",suffix:"%"}];return a.jsx("section",{className:"py-20 bg-gradient-to-r from-primary to-secondary",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:t.map((e,n)=>a.jsx(tD,{target:e.target,label:e.label,suffix:e.suffix},n))})})})},rD=()=>{const{showToast:t}=ar(),{isAuthenticated:e,user:n}=Yt(),r=Nr(),s=D.useRef(null),o=[{id:"fryzjer",name:"Fryzjer",icon:"",price:80,slug:"fryzjer"},{id:"tatuaze",name:"Tatuae",icon:"",price:200,slug:"tatuaze"},{id:"paznokcie",name:"Paznokcie",icon:"",price:60,slug:"paznokcie"},{id:"masaz",name:"Masa",icon:"",price:120,slug:"masaz"},{id:"makijaz",name:"Makija",icon:"",price:100,slug:"makijaz"},{id:"twarz",name:"Twarz",icon:"",price:120,slug:"twarz"},{id:"inne",name:"Inne usugi",icon:"",price:0,slug:"inne"}],l=[{id:1,author:"Anna Kowalska",avatar:"A",service:"Fryzjer",date:"2 dni temu",rating:5,content:"wietna usuga! Fryzjer przyjecha punktualnie, by bardzo profesjonalny. Efekt przekroczy moje oczekiwania. Na pewno skorzystam ponownie!",helpful:23,gradientClass:"bg-gradient-to-r from-primary to-secondary"},{id:2,author:"Krzysztof Chjan",avatar:"K",service:"Masa",date:"Tydzie temu",rating:5,content:"Bardzo wygodne rozwizanie. Masaysta przywiz profesjonalny st, wszystko przebiego sprawnie. Polecam kademu!",helpful:18,gradientClass:"bg-gradient-to-r from-pink-500 to-rose-500"},{id:3,author:"Magdalena Winiewska",avatar:"M",service:"Manicure",date:"3 dni temu",rating:5,content:"Profesjonalny manicure w domu - wietny efekt, przystpna cena. Oszczdno czasu nieoceniona!",helpful:31,gradientClass:"bg-gradient-to-r from-purple-500 to-indigo-500"}],h=[{step:1,title:"Wybierz usug",description:"Przegldaj kategorie i wybierz specjalist wedug opinii i ceny",gradient:"from-red-400 to-orange-500"},{step:2,title:"Zarezerwuj termin",description:"Wybierz dogodny termin i potwierd rezerwacj online",gradient:"from-primary to-secondary"},{step:3,title:"Specjalista przyjeda",description:"Profesjonalista przyjedzie pod wskazany adres z caym sprztem",gradient:"from-pink-400 to-rose-500"}],f=()=>{var m;(m=s.current)==null||m.scrollIntoView({behavior:"smooth"})};return D.useEffect(()=>{const m=new IntersectionObserver(g=>{g.forEach(x=>{x.isIntersecting&&(x.target.classList.add("opacity-100","translate-y-0"),x.target.classList.remove("opacity-0","translate-y-10"))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return document.querySelectorAll(".fade-in-scroll").forEach(g=>{m.observe(g)}),()=>m.disconnect()},[]),a.jsxs("div",{children:[a.jsx("section",{className:"py-20 lg:py-32 animate-fade-in",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[a.jsxs("div",{className:"animate-slide-in-left",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-accent/10 text-accent px-4 py-2 rounded-full text-sm font-semibold mb-6 animate-bounce-slow",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Nowy w Twojej okolicy"})]}),a.jsxs("h1",{className:"text-4xl lg:text-6xl font-black leading-tight mb-6",children:["Zamw usug i nie tylko",a.jsx("br",{}),a.jsx("span",{className:"gradient-text",children:"Usugi z dojazdem do domu"})]}),a.jsx("p",{className:"text-gray-600 text-lg mb-8 leading-relaxed",children:"Specjalici przyjad pod wskazany adres  fryzjer, manicure, tatuaysta, masa i wicej."}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("button",{onClick:()=>{e?f():r("/auth?mode=register&type=client")},className:"btn btn-cta animate-pulse-slow group",children:[a.jsx("span",{children:"Zarezerwuj usug"}),a.jsx("span",{className:"transition-transform group-hover:translate-x-1",children:""})]}),(!e||(n==null?void 0:n.accountType)==="provider")&&a.jsxs(ke,{to:e?"/biznes/dodaj-usluge":"/auth?mode=register&type=provider",className:"btn btn-ghost border-2 border-primary text-primary hover:bg-primary hover:text-white group",children:[a.jsx("span",{children:" Dodaj usug"}),a.jsx("span",{className:"transition-transform group-hover:translate-x-1",children:""})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-6 mt-8 text-sm text-gray-600",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""})," Bez opat za dojazd"]}),a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""})," Sprawdzeni specjalici"]}),a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""})," Gwarancja satysfakcji"]})]})]}),a.jsx("div",{className:"animate-slide-in-right",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-3xl blur-3xl"}),a.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl overflow-hidden",children:[a.jsx("img",{src:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=600&h=400&fit=crop",alt:"Profesjonalna usuga fryzjerska",className:"w-full h-64 lg:h-80 object-cover"}),a.jsxs("div",{className:"p-6 flex gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"10K+"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Zadowolonych klientw"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"500+"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Specjalistw"})]})]})]})]})})]})})}),a.jsx("section",{id:"services",ref:s,className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"USUGI"}),a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Popularne usugi"}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Wybierz spord szerokiej gamy profesjonalnych usug"})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-4",children:o.map(m=>a.jsx(x5,{service:m},m.id))})]})}),a.jsx("section",{id:"how",className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"JAK TO DZIAA"}),a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Proste 3 kroki"}),a.jsx("p",{className:"text-gray-600",children:"Od rezerwacji do realizacji usugi"})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:h.map((m,g)=>a.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",style:{animationDelay:`${g*100}ms`},children:[a.jsxs("div",{className:"text-sm font-bold text-gray-400 mb-4",children:["Krok ",m.step]}),a.jsx("div",{className:`w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-r ${m.gradient} flex items-center justify-center`,children:a.jsx("span",{className:"text-white text-2xl",children:""})}),a.jsx("h3",{className:"text-xl font-bold mb-3",children:m.title}),a.jsx("p",{className:"text-gray-600",children:m.description})]},m.step))})]})}),a.jsx("section",{id:"reviews",className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"OPINIE"}),a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Co mwi nasi klienci"}),a.jsx("p",{className:"text-gray-600",children:"Ponad 10 000 zadowolonych uytkownikw"})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:l.map(m=>a.jsx(eD,{review:m},m.id))})]})}),a.jsx(nD,{}),a.jsx("section",{className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-3xl p-12 lg:p-16 text-center text-white relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(255,255,255,0.1),transparent_70%)]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("span",{className:"inline-block bg-white/20 px-4 py-2 rounded-full text-sm font-bold tracking-wider mb-6",children:" ZACZNIJ JU DZI"}),a.jsx("h2",{className:"text-3xl lg:text-5xl font-black mb-4",children:"Gotowy, by zamwi?"}),a.jsx("p",{className:"text-lg opacity-95 max-w-xl mx-auto mb-8",children:"Docz do tysicy zadowolonych klientw. Pierwsze zamwienie z rabatem 20%!"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[a.jsxs("button",{onClick:()=>{f(),t("Wybierz usug powyej, aby rozpocz rezerwacj","info")},className:"btn bg-white text-gray-900 font-bold shadow-lg hover:shadow-xl hover:-translate-y-1",children:[a.jsx("span",{children:"Zarezerwuj usug"}),a.jsx("span",{children:""})]}),a.jsx("button",{className:"btn border-2 border-white/30 text-white hover:bg-white/10",children:"Dowiedz si wicej"})]}),a.jsxs("div",{className:"flex flex-wrap gap-6 justify-center text-sm opacity-90",children:[a.jsx("span",{children:" Bez ukrytych kosztw"}),a.jsx("span",{children:" Anuluj bezpatnie"}),a.jsx("span",{children:" Patno po usudze"})]})]})]})})})]})},vg=[{code:"+48",flag:"",name:"Polska",minDigits:9,maxDigits:9},{code:"+49",flag:"",name:"Niemcy",minDigits:10,maxDigits:11},{code:"+33",flag:"",name:"Francja",minDigits:9,maxDigits:9},{code:"+34",flag:"",name:"Hiszpania",minDigits:9,maxDigits:9},{code:"+39",flag:"",name:"Wochy",minDigits:9,maxDigits:10},{code:"+44",flag:"",name:"Wielka Brytania",minDigits:10,maxDigits:10},{code:"+31",flag:"",name:"Holandia",minDigits:9,maxDigits:9},{code:"+32",flag:"",name:"Belgia",minDigits:8,maxDigits:9},{code:"+420",flag:"",name:"Czechy",minDigits:9,maxDigits:9},{code:"+421",flag:"",name:"Sowacja",minDigits:9,maxDigits:9},{code:"+43",flag:"",name:"Austria",minDigits:10,maxDigits:13},{code:"+41",flag:"",name:"Szwajcaria",minDigits:9,maxDigits:9},{code:"+351",flag:"",name:"Portugalia",minDigits:9,maxDigits:9},{code:"+353",flag:"",name:"Irlandia",minDigits:9,maxDigits:9},{code:"+352",flag:"",name:"Luksemburg",minDigits:8,maxDigits:9},{code:"+45",flag:"",name:"Dania",minDigits:8,maxDigits:8},{code:"+46",flag:"",name:"Szwecja",minDigits:9,maxDigits:9},{code:"+47",flag:"",name:"Norwegia",minDigits:8,maxDigits:8},{code:"+358",flag:"",name:"Finlandia",minDigits:9,maxDigits:10},{code:"+354",flag:"",name:"Islandia",minDigits:7,maxDigits:7},{code:"+30",flag:"",name:"Grecja",minDigits:10,maxDigits:10},{code:"+356",flag:"",name:"Malta",minDigits:8,maxDigits:8},{code:"+357",flag:"",name:"Cypr",minDigits:8,maxDigits:8},{code:"+36",flag:"",name:"Wgry",minDigits:9,maxDigits:9},{code:"+40",flag:"",name:"Rumunia",minDigits:9,maxDigits:9},{code:"+359",flag:"",name:"Bugaria",minDigits:9,maxDigits:9},{code:"+385",flag:"",name:"Chorwacja",minDigits:9,maxDigits:9},{code:"+386",flag:"",name:"Sowenia",minDigits:8,maxDigits:8},{code:"+381",flag:"",name:"Serbia",minDigits:9,maxDigits:9},{code:"+382",flag:"",name:"Czarnogra",minDigits:8,maxDigits:8},{code:"+383",flag:"",name:"Kosowo",minDigits:8,maxDigits:8},{code:"+389",flag:"",name:"Macedonia Pn.",minDigits:8,maxDigits:8},{code:"+380",flag:"",name:"Ukraina",minDigits:9,maxDigits:9},{code:"+375",flag:"",name:"Biaoru",minDigits:9,maxDigits:9},{code:"+7",flag:"",name:"Rosja",minDigits:10,maxDigits:10}],jk=t=>vg.find(e=>e.code===t)||vg[0],Sx=(t,e)=>{const n=jk(t),r=e.replace(/\D/g,"");return r?r.length<n.minDigits?{valid:!1,message:`Numer dla ${n.name} musi mie min. ${n.minDigits} cyfr`}:r.length>n.maxDigits?{valid:!1,message:`Numer dla ${n.name} moe mie max. ${n.maxDigits} cyfr`}:{valid:!0,message:""}:{valid:!1,message:"Numer telefonu jest wymagany"}},Px=({value:t,countryCode:e,onChange:n,className:r="",error:s})=>{const[o,l]=D.useState(!1),[h,f]=D.useState(""),m=D.useRef(null),g=D.useRef(null),x=jk(e);D.useEffect(()=>{const A=E=>{m.current&&!m.current.contains(E.target)&&(l(!1),f(""))};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const _=vg.filter(A=>A.name.toLowerCase().includes(h.toLowerCase())||A.code.includes(h)),T=A=>{var E;n(t,A.code),l(!1),f(""),(E=g.current)==null||E.focus()},k=A=>{const E=A.target.value.replace(/[^\d\s]/g,"");n(E,e)},C=()=>`${x.minDigits===x.maxDigits?x.minDigits:`${x.minDigits}-${x.maxDigits}`} cyfr`;return a.jsxs("div",{className:`relative ${r}`,ref:m,children:[a.jsxs("div",{className:`flex rounded-xl border-2 ${s?"border-red-300":"border-gray-200"} focus-within:border-primary overflow-hidden`,children:[a.jsxs("button",{type:"button",onClick:()=>l(!o),className:"flex items-center gap-1 px-3 py-3 bg-gray-50 hover:bg-gray-100 border-r border-gray-200 transition-colors min-w-[100px]",children:[a.jsx("span",{className:"text-xl",children:x.flag}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:x.code}),a.jsx(Zh,{className:`w-4 h-4 text-gray-500 transition-transform ${o?"rotate-180":""}`})]}),a.jsx("input",{ref:g,type:"tel",value:t,onChange:k,placeholder:C(),maxLength:x.maxDigits+3,className:"flex-1 px-4 py-3 focus:outline-none"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.name,": ",x.minDigits===x.maxDigits?`${x.minDigits} cyfr`:`${x.minDigits}-${x.maxDigits} cyfr`]}),s&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:s}),o&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-primary/30 rounded-xl shadow-2xl max-h-80 overflow-hidden",children:[a.jsx("div",{className:"p-2 border-b border-gray-100",children:a.jsx("input",{type:"text",value:h,onChange:A=>f(A.target.value),placeholder:"Szukaj kraju...",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-primary",autoFocus:!0})}),a.jsx("div",{className:"overflow-y-auto max-h-60",children:_.map(A=>a.jsxs("button",{type:"button",onClick:()=>T(A),className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-primary/10 transition-colors text-left ${A.code===e?"bg-primary/5":""}`,children:[a.jsx("span",{className:"text-2xl",children:A.flag}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:A.name}),a.jsx("div",{className:"text-xs text-gray-500",children:A.code})]}),A.code===e&&a.jsx(St,{className:"w-5 h-5 text-primary"})]},A.code))})]})]})},sD=()=>{const t=Nr(),[e]=P1(),{isAuthenticated:n}=Yt(),{showToast:r}=ar(),[s,o]=D.useState("select"),[l,h]=D.useState({email:"",password:""}),[f,m]=D.useState(!1),[g,x]=D.useState({email:"",username:"",phone:"",phoneCountryCode:"+48",password:"",confirmPassword:"",businessName:"",terms:!1,accountType:"client"}),[_,T]=D.useState(!1),[k,C]=D.useState(!1),[A,E]=D.useState("");D.useEffect(()=>{const O=e.get("mode"),R=e.get("type");O==="login"?o("login"):O==="register"&&(R==="provider"?(o("register-provider"),x(N=>({...N,accountType:"provider"}))):(o("register-client"),x(N=>({...N,accountType:"client"}))))},[e]),D.useEffect(()=>{if(n){const O=e.get("redirect");t(O||"/")}},[n,t,e]);const S=async O=>{O.preventDefault(),E(""),C(!0);try{await kC(Ur,l.email,l.password),r("Logowanie pomylne! Witaj z powrotem!","success");const R=e.get("redirect");t(R||"/")}catch(R){console.error("Login error:",R);let N="Nieprawidowy email lub haso";switch(R.code){case"auth/user-not-found":N="Nie znaleziono uytkownika z tym adresem email";break;case"auth/wrong-password":N="Nieprawidowe haso";break;case"auth/invalid-credential":N="Nieprawidowy email lub haso";break;case"auth/too-many-requests":N="Zbyt wiele nieudanych prb. Sprbuj ponownie pniej";break;case"auth/user-disabled":N="To konto zostao zablokowane";break;case"auth/invalid-email":N="Nieprawidowy format adresu email";break}E(N),r("Bd logowania","error")}finally{C(!1)}},I=async O=>{if(O.preventDefault(),E(""),!g.terms){E("Musisz zaakceptowa regulamin!");return}const R=g.username.trim().split(/\s+/);if(R.length<2||R.some(b=>b.length<2)){E("Podaj pene imi i nazwisko (np. Jan Kowalski)");return}const N=Sx(g.phoneCountryCode,g.phone);if(!N.valid){E(N.message);return}if(g.password.length<8){E("Haso musi mie co najmniej 8 znakw");return}if(!/[A-Z]/.test(g.password)){E("Haso musi zawiera co najmniej jedn wielk liter");return}if(!/[a-z]/.test(g.password)){E("Haso musi zawiera co najmniej jedn ma liter");return}if(!/[0-9]/.test(g.password)){E("Haso musi zawiera co najmniej jedn cyfr");return}if(g.password!==g.confirmPassword){E("Hasa nie s takie same");return}C(!0);try{const z=(await NC(Ur,g.email,g.password)).user;await Yp(z,{displayName:g.username});const M=g.phone.replace(/\D/g,""),V=`${g.phoneCountryCode} ${M}`;await ll(ct(Ie,"users",z.uid),{uid:z.uid,username:g.username,email:g.email,phone:V,accountType:g.accountType,businessName:g.businessName||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...g.accountType==="provider"&&{isVerified:!1,rating:0,reviewsCount:0,servicesCount:0}}),r("Konto utworzone pomylnie! Witamy w ToMyHomeApp!","success"),g.accountType==="provider"?t("/biznes/dodaj-usluge"):t("/")}catch(b){console.error("Registration error:",b);let z="Bd podczas rejestracji";switch(b.code){case"auth/email-already-in-use":z="Ten adres email jest ju zajty";break;case"auth/invalid-email":z="Nieprawidowy format adresu email";break;case"auth/weak-password":z="Haso jest zbyt sabe";break;case"auth/operation-not-allowed":z="Rejestracja jest tymczasowo niedostpna";break}E(z),r("Bd rejestracji","error")}finally{C(!1)}};if(s==="select")return a.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:a.jsxs("div",{className:"max-w-lg w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[a.jsx("div",{className:"text-5xl",children:""}),a.jsx("div",{className:"text-5xl",children:""})]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Witaj w ToMyHomeApp"}),a.jsx("p",{className:"text-gray-600",children:"Znajd specjalistw beauty lub oferuj swoje usugi"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[a.jsx("button",{onClick:()=>o("login"),className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all mb-6",children:"ZALOGUJ SI"}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-200"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Nie masz konta? Zarejestruj si jako"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:()=>{o("register-client"),x(O=>({...O,accountType:"client"}))},className:"w-full py-4 border-2 border-primary text-primary rounded-xl font-bold text-lg hover:bg-primary hover:text-white transition-all flex items-center justify-center gap-3",children:[a.jsx(jr,{className:"w-6 h-6"}),"DLA KLIENTA"]}),a.jsx("p",{className:"text-center text-sm text-gray-500",children:"Szukasz fryzjera, kosmetyczki lub masaysty?"}),a.jsxs("button",{onClick:()=>{o("register-provider"),x(O=>({...O,accountType:"provider"}))},className:"w-full py-4 border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold text-lg hover:bg-emerald-500 hover:text-white transition-all flex items-center justify-center gap-3",children:[a.jsx(tu,{className:"w-6 h-6"}),"DLA USUGODAWCY"]}),a.jsx("p",{className:"text-center text-sm text-gray-500",children:"Oferujesz usugi beauty i chcesz zdobywa klientw?"})]})]})]})});if(s==="login")return a.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("button",{onClick:()=>o("select"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[a.jsx(eu,{className:"w-5 h-5"}),"Wr"]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zaloguj si"}),a.jsx("p",{className:"text-gray-600",children:"Wpisz swoje dane logowania"})]}),A&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm flex items-start gap-2",children:[a.jsx("span",{children:""}),a.jsx("span",{children:A})]}),a.jsxs("form",{onSubmit:S,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:l.email,onChange:O=>h({...l,email:O.target.value}),placeholder:"twoj@email.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haso"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:f?"text":"password",value:l.password,onChange:O=>h({...l,password:O.target.value}),placeholder:"",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),a.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?a.jsx(va,{className:"w-5 h-5"}):a.jsx(vr,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(ke,{to:"/reset-hasla",className:"text-sm text-primary hover:underline",children:"Zapomniae hasa?"})}),a.jsx("button",{type:"submit",disabled:k,className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:k?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-5 h-5 animate-spin mr-2"}),"Logowanie..."]}):"ZALOGUJ SI"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-600",children:["Nie masz konta?"," ",a.jsx("button",{onClick:()=>o("select"),className:"text-primary font-semibold hover:underline",children:"Zarejestruj si"})]})})]})]})});const H=s==="register-provider";return a.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("button",{onClick:()=>o("select"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[a.jsx(eu,{className:"w-5 h-5"}),"Wr"]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${H?"bg-emerald-100":"bg-primary/10"}`,children:H?a.jsx(tu,{className:"w-8 h-8 text-emerald-600"}):a.jsx(jr,{className:"w-8 h-8 text-primary"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:H?"Rejestracja usugodawcy":"Rejestracja klienta"}),a.jsx("p",{className:"text-gray-600",children:H?"Docz i zacznij zdobywa klientw":"Za konto i rezerwuj usugi"})]}),a.jsxs("div",{className:`mb-6 p-4 rounded-xl ${H?"bg-emerald-50":"bg-primary/5"}`,children:[a.jsx("p",{className:"font-semibold mb-2 text-sm",children:H?" Korzyci dla usugodawcy:":" Korzyci dla klienta:"}),a.jsx("ul",{className:"text-sm space-y-1",children:H?a.jsxs(a.Fragment,{children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-emerald-500"})," Wasny profil i portfolio"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-emerald-500"})," Zarzdzanie rezerwacjami online"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-emerald-500"})," Dostp do nowych klientw"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-primary"})," atwe rezerwacje online"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-primary"})," Historia wizyt i ulubieni"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-primary"})," Powiadomienia i przypomnienia"]})]})})]}),A&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm flex items-start gap-2",children:[a.jsx("span",{children:""}),a.jsx("span",{children:A})]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[H&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa firmy / salonu"}),a.jsx("input",{type:"text",value:g.businessName,onChange:O=>x({...g,businessName:O.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),a.jsx("input",{type:"text",value:g.username,onChange:O=>x({...g,username:O.target.value}),placeholder:"Jan Kowalski",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:g.email,onChange:O=>x({...g,email:O.target.value}),placeholder:"twoj@email.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numer telefonu"}),a.jsx(Px,{value:g.phone,countryCode:g.phoneCountryCode,onChange:(O,R)=>x({...g,phone:O,phoneCountryCode:R})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haso"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:_?"text":"password",value:g.password,onChange:O=>x({...g,password:O.target.value}),placeholder:"Wprowad haso",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),a.jsx("button",{type:"button",onClick:()=>T(!_),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:_?a.jsx(va,{className:"w-5 h-5"}):a.jsx(vr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[a.jsxs("p",{className:g.password.length>=8?"text-green-600":"",children:[g.password.length>=8?"":""," Minimum 8 znakw"]}),a.jsxs("p",{className:/[A-Z]/.test(g.password)?"text-green-600":"",children:[/[A-Z]/.test(g.password)?"":""," Co najmniej jedna wielka litera (A-Z)"]}),a.jsxs("p",{className:/[a-z]/.test(g.password)?"text-green-600":"",children:[/[a-z]/.test(g.password)?"":""," Co najmniej jedna maa litera (a-z)"]}),a.jsxs("p",{className:/[0-9]/.test(g.password)?"text-green-600":"",children:[/[0-9]/.test(g.password)?"":""," Co najmniej jedna cyfra (0-9)"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Powtrz haso"}),a.jsx("input",{type:"password",value:g.confirmPassword,onChange:O=>x({...g,confirmPassword:O.target.value}),placeholder:"Powtrz haso",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),g.confirmPassword&&a.jsx("p",{className:`text-xs mt-1 ${g.password===g.confirmPassword?"text-green-600":"text-red-500"}`,children:g.password===g.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("input",{type:"checkbox",id:"terms",checked:g.terms,onChange:O=>x({...g,terms:O.target.checked}),className:"mt-1 w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary"}),a.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600",children:["Akceptuj"," ",a.jsx(ke,{to:"/regulamin",className:"text-primary hover:underline",children:"Regulamin"})," ","oraz"," ",a.jsx(ke,{to:"/prywatnosc",className:"text-primary hover:underline",children:"Polityk Prywatnoci"})]})]}),a.jsx("button",{type:"submit",disabled:k,className:`w-full py-4 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${H?"bg-gradient-to-r from-emerald-500 to-teal-600":"bg-gradient-to-r from-primary to-secondary"}`,children:k?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-5 h-5 animate-spin mr-2"}),"Rejestracja..."]}):"ZAREJESTRUJ SI"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-600",children:["Masz ju konto?"," ",a.jsx("button",{onClick:()=>o("login"),className:"text-primary font-semibold hover:underline",children:"Zaloguj si"})]})})]})]})})},iD=async t=>{try{const e=ct(Ie,"users",t),n=await ol(e);return n.exists()?{uid:n.id,...n.data()}:null}catch(e){throw console.error("Error getting user profile:",e),e}},Nk=async(t,e)=>{try{const n=ct(Ie,"users",t),r={};Object.entries(e).forEach(([s,o])=>{o!==void 0&&(r[s]=o)}),Object.keys(r).length>0&&await Ts(n,{...r,updatedAt:tL()}),e.username&&Ur.currentUser&&await Yp(Ur.currentUser,{displayName:e.username}),e.avatar&&Ur.currentUser&&await Yp(Ur.currentUser,{photoURL:e.avatar})}catch(n){throw console.error("Error updating user profile:",n),n}},aD=async(t,e)=>{try{if(!e.type.startsWith("image/"))throw new Error("Plik musi by obrazem");if(e.size>5*1024*1024)throw new Error("Plik jest za duy (max 5MB)");const n=e.name.split(".").pop(),r=`avatars/${t}_${Date.now()}.${n}`,s=jx(kx,r),o=await xk(s,e),l=await vk(o.ref);return await Nk(t,{avatar:l}),l}catch(n){throw console.error("Error uploading avatar:",n),n}},oD=async(t,e)=>{try{const n=Ur.currentUser;if(!n||!n.email)throw new Error("Brak zalogowanego uytkownika");if(e.length<8)throw new Error("Haso musi mie co najmniej 8 znakw");if(!/[A-Z]/.test(e))throw new Error("Haso musi zawiera wielk liter");if(!/[a-z]/.test(e))throw new Error("Haso musi zawiera ma liter");if(!/[0-9]/.test(e))throw new Error("Haso musi zawiera cyfr");const r=Bi.credential(n.email,t);await fj(n,r),await EC(n,e)}catch(n){throw console.error("Error changing password:",n),n.code==="auth/wrong-password"?new Error("Nieprawidowe obecne haso"):n.code==="auth/weak-password"?new Error("Nowe haso jest za sabe"):n.code==="auth/requires-recent-login"?new Error("Zaloguj si ponownie i sprbuj jeszcze raz"):n}},lD=async t=>{try{const e=Ur.currentUser;if(!e||!e.email)throw new Error("Brak zalogowanego uytkownika");const n=Bi.credential(e.email,t);await fj(e,n);try{const r=await iD(e.uid);if(r!=null&&r.avatar&&r.avatar.includes("firebase")){const s=jx(kx,r.avatar);await h5(s)}}catch{console.log("Avatar deletion skipped")}await gx(ct(Ie,"users",e.uid)),await AC(e)}catch(e){throw console.error("Error deleting account:",e),e.code==="auth/wrong-password"?new Error("Nieprawidowe haso"):e.code==="auth/requires-recent-login"?new Error("Zaloguj si ponownie i sprbuj jeszcze raz"):e}},cD=()=>{var S;const t=Nr(),{user:e,userData:n,isAuthenticated:r,logout:s}=Yt(),{showToast:o}=ar(),[l,h]=D.useState("dashboard"),[f,m]=D.useState(new Date);D.useEffect(()=>{r||t("/auth")},[r,t]);const g=[{id:"dashboard",label:"Panel Gwny",icon:A5},{id:"referral",label:"Pole znajomym",icon:C5},{id:"favorites",label:"Ulubione",icon:cl},{id:"wallet",label:"Portfel",icon:J5},{id:"visits",label:"Moje wizyty",icon:Un},{id:"settings",label:"Ustawienia",icon:Ex},{id:"help",label:"Pomoc",icon:Zo}],x=async()=>{if(window.confirm("Czy na pewno chcesz si wylogowa?"))try{await s(),o("Wylogowano pomylnie","success"),t("/")}catch{o("Bd wylogowania","error")}},_=I=>new Date(I.getFullYear(),I.getMonth()+1,0).getDate(),T=I=>{const H=new Date(I.getFullYear(),I.getMonth(),1).getDay();return H===0?6:H-1},k=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],C=()=>{const I=_(f),H=T(f),O=new Date,R=["Pn","Wt","r","Cz","Pt","Sb","Nd"];return a.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-100 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-100",children:[a.jsx("button",{onClick:()=>m(new Date(f.getFullYear(),f.getMonth()-1)),className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:a.jsx(_k,{className:"w-4 h-4"})}),a.jsxs("div",{className:"font-bold text-lg",children:[k[f.getMonth()]," ",f.getFullYear()]}),a.jsx("button",{onClick:()=>m(new Date(f.getFullYear(),f.getMonth()+1)),className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:a.jsx(nu,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-2 text-center",children:[R.map(N=>a.jsx("div",{className:"font-semibold text-gray-500 text-sm py-2",children:N},N)),[...Array(H)].map((N,b)=>a.jsx("div",{},`empty-${b}`)),[...Array(I)].map((N,b)=>{const z=b+1,M=z===O.getDate()&&f.getMonth()===O.getMonth()&&f.getFullYear()===O.getFullYear();return a.jsx("div",{className:`py-3 rounded-lg cursor-pointer transition-all hover:scale-110 ${M?"bg-primary text-white font-bold":"bg-gray-50 hover:bg-gray-100"}`,children:z},z)})]})]})},A=()=>{switch(l){case"dashboard":return a.jsxs("div",{children:[a.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 mb-8",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Witaj z powrotem, ",(e==null?void 0:e.username)||(n==null?void 0:n.username),"!"]}),a.jsx("p",{className:"opacity-90",children:"Mio Ci widzie. Oto Twj panel uytkownika gdzie moesz zarzdza swoim kontem i rezerwacjami."})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0"}),a.jsx("div",{className:"text-gray-500",children:"Nadchodzcych wizyt"})]}),a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0"}),a.jsx("div",{className:"text-gray-500",children:"Ulubionych miejsc"})]}),a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0 z"}),a.jsx("div",{className:"text-gray-500",children:"W portfelu"})]})]})]});case"referral":return a.jsxs("div",{children:[a.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Zapraszaj i zarabiaj!"}),a.jsxs("p",{className:"text-lg opacity-95",children:["Kady polecony znajomy to ",a.jsx("strong",{children:"50 z"})," na Twoje konto!"]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-8",children:[a.jsx("h3",{className:"font-bold text-lg mb-4",children:"Twj unikalny link:"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("input",{type:"text",readOnly:!0,value:`https://tomyhomeapp.pl/ref/${(e==null?void 0:e.id)||"user"}`,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl bg-white"}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`https://tomyhomeapp.pl/ref/${(e==null?void 0:e.id)||"user"}`),o("Link skopiowany!","success")},className:"btn btn-primary",children:"Kopiuj"})]})]})]});case"favorites":return a.jsxs("div",{className:"text-center py-16",children:[a.jsx(cl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Nie masz jeszcze ulubionych miejsc."})]});case"wallet":return a.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-400 text-white rounded-2xl p-8",children:[a.jsx("h2",{className:"text-xl mb-2",children:"Dostpne rodki"}),a.jsx("div",{className:"text-5xl font-bold mb-6",children:"0.00 z"}),a.jsx("button",{onClick:()=>o("Funkcja w budowie","info"),className:"btn bg-white text-emerald-600 font-bold",children:"Doaduj"})]});case"visits":return a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("h3",{className:"font-bold text-lg mb-4",children:"Kalendarz wizyt"}),C()]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg mb-4",children:"Nadchodzce wizyty"}),a.jsx("p",{className:"text-gray-500",children:"Brak nadchodzcych wizyt."})]})]});case"settings":return a.jsx(E,{});case"help":return a.jsxs("div",{className:"card p-8",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Centrum Pomocy"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Masz pytania? Skontaktuj si z nami!"}),a.jsx("p",{className:"text-primary font-semibold",children:"pomoc@tomyhomeapp.pl"})]});default:return null}},E=()=>{const I=D.useRef(null),O=(_e=>{if(!_e)return{countryCode:"+48",number:""};const Qe=_e.match(/^(\+\d{1,3})\s?(.*)$/);return Qe?{countryCode:Qe[1],number:Qe[2]}:{countryCode:"+48",number:_e}})((n==null?void 0:n.phone)||(e==null?void 0:e.phone)),[R,N]=D.useState({username:(n==null?void 0:n.username)||(e==null?void 0:e.username)||"",phone:O.number,phoneCountryCode:O.countryCode,businessName:(n==null?void 0:n.businessName)||""}),[b,z]=D.useState((n==null?void 0:n.avatar)||(e==null?void 0:e.avatar)||""),[M,V]=D.useState(!1),[$,U]=D.useState(!1),[Te,fe]=D.useState(!1),[le,re]=D.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[B,Q]=D.useState(!1),[F,ee]=D.useState(!1),[Y,pe]=D.useState(!1),X=async _e=>{var jt;const Qe=(jt=_e.target.files)==null?void 0:jt[0];if(!(!Qe||!(e!=null&&e.id))){U(!0);try{const J=await aD(e.id,Qe);z(J),o("Zdjcie zostao zmienione!","success")}catch(J){o(J.message||"Bd przesyania zdjcia","error")}finally{U(!1)}}},se=async _e=>{_e.preventDefault();const Qe=R.username.trim().split(/\s+/);if(Qe.length<2||Qe.some(J=>J.length<2)){o("Podaj pene imi i nazwisko (np. Jan Kowalski)","error");return}const jt=Sx(R.phoneCountryCode,R.phone);if(!jt.valid){o(jt.message,"error");return}if(e!=null&&e.id){V(!0);try{const J=`${R.phoneCountryCode} ${R.phone.replace(/\D/g,"")}`,ve={username:R.username,phone:J};R.businessName&&R.businessName.trim()&&(ve.businessName=R.businessName.trim()),await Nk(e.id,ve),o("Zmiany zostay zapisane!","success")}catch(J){o(J.message||"Bd zapisywania zmian","error")}finally{V(!1)}}},ce=async _e=>{if(_e.preventDefault(),le.newPassword!==le.confirmPassword){o("Hasa nie s zgodne","error");return}if(le.newPassword.length<8){o("Haso musi mie co najmniej 8 znakw","error");return}pe(!0);try{await oD(le.currentPassword,le.newPassword),o("Haso zostao zmienione!","success"),fe(!1),re({currentPassword:"",newPassword:"",confirmPassword:""})}catch(Qe){o(Qe.message||"Bd zmiany hasa","error")}finally{pe(!1)}},Ve=async()=>{const _e=window.prompt("Aby usun konto, wpisz swoje haso:");if(_e!==null){if(!_e||_e.length<8){o("Nieprawidowe haso","error");return}if(window.confirm("UWAGA: Czy na pewno chcesz usun swoje konto? Ta operacja jest nieodwracalna!"))try{await lD(_e),o("Konto zostao usunite","info"),t("/")}catch(Qe){o(Qe.message||"Bd usuwania konta","error")}}};return a.jsxs("div",{className:"max-w-2xl space-y-6",children:[a.jsxs("div",{className:"card p-8",children:[a.jsx("h3",{className:"font-bold text-lg mb-6",children:"Zdjcie profilowe"}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-3xl",children:$?a.jsx(ut,{className:"w-8 h-8 animate-spin"}):b?a.jsx("img",{src:b,alt:"Avatar",className:"w-full h-full object-cover"}):""}),a.jsx("button",{onClick:()=>{var _e;return(_e=I.current)==null?void 0:_e.click()},disabled:$,className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-100 transition-colors disabled:opacity-50",children:a.jsx(T5,{className:"w-4 h-4 text-gray-600"})}),a.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:X,className:"hidden"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Kliknij ikon aparatu aby zmieni zdjcie."}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Max 5MB, formaty: JPG, PNG, GIF"})]})]})]}),a.jsxs("div",{className:"card p-8",children:[a.jsx("h3",{className:"font-bold text-lg mb-6",children:"Dane osobowe"}),a.jsxs("form",{onSubmit:se,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Imi i Nazwisko"}),a.jsx("input",{type:"text",value:R.username,onChange:_e=>N({...R,username:_e.target.value}),placeholder:"Jan Kowalski",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:(n==null?void 0:n.email)||(e==null?void 0:e.email)||"",readOnly:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-500"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email nie moe by zmieniony"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Telefon"}),a.jsx(Px,{value:R.phone,countryCode:R.phoneCountryCode,onChange:(_e,Qe)=>{N({...R,phone:_e,phoneCountryCode:Qe})}})]}),((n==null?void 0:n.accountType)==="provider"||(e==null?void 0:e.accountType)==="provider")&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Nazwa firmy / salonu"}),a.jsx("input",{type:"text",value:R.businessName,onChange:_e=>N({...R,businessName:_e.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none"})]}),a.jsx("button",{type:"submit",disabled:M,className:"btn btn-primary mt-4 flex items-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fa,{className:"w-5 h-5"}),"Zapisz zmiany"]})})]})]}),a.jsxs("div",{className:"card p-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Zmiana hasa"}),a.jsx("button",{onClick:()=>fe(!Te),className:"text-primary hover:underline text-sm font-medium",children:Te?"Anuluj":"Zmie haso"})]}),Te?a.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Obecne haso"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:B?"text":"password",value:le.currentPassword,onChange:_e=>re({...le,currentPassword:_e.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),a.jsx("button",{type:"button",onClick:()=>Q(!B),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:B?a.jsx(va,{className:"w-5 h-5"}):a.jsx(vr,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Nowe haso"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:F?"text":"password",value:le.newPassword,onChange:_e=>re({...le,newPassword:_e.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),a.jsx("button",{type:"button",onClick:()=>ee(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:F?a.jsx(va,{className:"w-5 h-5"}):a.jsx(vr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[a.jsxs("p",{className:le.newPassword.length>=8?"text-green-600":"",children:[le.newPassword.length>=8?"":""," Minimum 8 znakw"]}),a.jsxs("p",{className:/[A-Z]/.test(le.newPassword)?"text-green-600":"",children:[/[A-Z]/.test(le.newPassword)?"":""," Wielka litera"]}),a.jsxs("p",{className:/[a-z]/.test(le.newPassword)?"text-green-600":"",children:[/[a-z]/.test(le.newPassword)?"":""," Maa litera"]}),a.jsxs("p",{className:/[0-9]/.test(le.newPassword)?"text-green-600":"",children:[/[0-9]/.test(le.newPassword)?"":""," Cyfra"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Potwierd nowe haso"}),a.jsx("input",{type:"password",value:le.confirmPassword,onChange:_e=>re({...le,confirmPassword:_e.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),le.confirmPassword&&a.jsx("p",{className:`text-xs mt-1 ${le.newPassword===le.confirmPassword?"text-green-600":"text-red-500"}`,children:le.newPassword===le.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]}),a.jsx("button",{type:"submit",disabled:Y,className:"btn btn-primary flex items-center gap-2",children:Y?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-5 h-5 animate-spin"}),"Zmieniam..."]}):a.jsxs(a.Fragment,{children:[a.jsx(la,{className:"w-5 h-5"}),"Zmie haso"]})})]}):a.jsx("p",{className:"text-gray-500 text-sm",children:"Zalecamy regularn zmian hasa dla bezpieczestwa konta."})]}),a.jsxs("div",{className:"card p-8 border-2 border-red-200 bg-red-50",children:[a.jsx("h3",{className:"font-bold text-lg text-red-600 mb-4",children:"Strefa zagroenia"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Po usuniciu konta wszystkie Twoje dane, rezerwacje i historia zostan trwale usunite. Ta operacja jest nieodwracalna."}),a.jsx("button",{onClick:Ve,className:"px-4 py-2 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-colors",children:"Usu moje konto"})]})]})};return r?a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsx("div",{className:"lg:hidden mb-6 overflow-x-auto",children:a.jsxs("div",{className:"flex gap-2 pb-2 min-w-max",children:[g.map(I=>a.jsxs("button",{onClick:()=>h(I.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all ${l===I.id?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(I.icon,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:I.label})]},I.id)),a.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap bg-red-50 text-red-600 hover:bg-red-100 transition-all",children:[a.jsx(Gh,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Wyloguj"})]})]})}),a.jsxs("div",{className:"flex gap-8",children:[a.jsx("aside",{className:"w-72 shrink-0 hidden lg:block",children:a.jsxs("div",{className:"card p-6 sticky top-24",children:[a.jsxs("div",{className:"text-center mb-6 pb-6 border-b border-gray-100",children:[a.jsx("div",{className:"relative inline-block",children:a.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-3xl",children:n!=null&&n.avatar||e!=null&&e.avatar?a.jsx("img",{src:(n==null?void 0:n.avatar)||(e==null?void 0:e.avatar),alt:"Avatar",className:"w-full h-full object-cover"}):""})}),a.jsx("div",{className:"font-bold text-lg mt-3",children:(n==null?void 0:n.username)||(e==null?void 0:e.username)}),a.jsx("div",{className:"text-gray-500 text-sm",children:(n==null?void 0:n.phone)||(e==null?void 0:e.phone)}),((n==null?void 0:n.accountType)==="provider"||(e==null?void 0:e.accountType)==="provider")&&a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full",children:"Usugodawca"})]}),a.jsxs("nav",{className:"space-y-1",children:[g.map(I=>a.jsxs("button",{onClick:()=>h(I.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${l===I.id?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,children:[a.jsx(I.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:I.label})]},I.id)),a.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 transition-all",children:[a.jsx(Gh,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Wyloguj"})]})]})]})}),a.jsxs("main",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:((S=g.find(I=>I.id===l))==null?void 0:S.label)||"Panel Gwny"}),a.jsxs("p",{className:"text-gray-500",children:[l==="dashboard"&&"Przegld Twojej aktywnoci",l==="referral"&&"Zapraszaj znajomych i zarabiaj",l==="favorites"&&"Twoje ulubione miejsca i usugi",l==="wallet"&&"Zarzdzaj swoimi rodkami",l==="visits"&&"Kalendarz i historia rezerwacji",l==="settings"&&"Personalizuj swoje konto",l==="help"&&"FAQ i Kontakt"]})]}),A()]})]})]}):null},sa="providers",wg=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),uD=()=>({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),xo=(t,e)=>{var h,f;const n=new Date().toISOString(),r=e||((h=t.id)==null?void 0:h.toString())||wg();let s=[];t.services&&Array.isArray(t.services)&&(s=t.services.map((m,g)=>({id:m.id||`service-${g}`,name:m.name||"",description:m.description||"",duration:m.duration||"30 min",price:Number(m.price)||0,oldPrice:m.oldPrice?Number(m.oldPrice):void 0,discount:m.discount?Number(m.discount):void 0,badge:m.badge,category:m.category||"Usugi"})));let o;t.location&&typeof t.location=="object"?o={city:t.location.city||"",district:t.location.district||"",address:t.location.address||"",postalCode:t.location.postalCode||"",lat:Number(t.location.lat)||52.2297,lng:Number(t.location.lng)||21.0122}:o={city:"",district:"",address:"",postalCode:"",lat:52.2297,lng:21.0122};const l=[o.city,o.district].filter(Boolean).join(", ")||"Nie podano";return{id:r,ownerId:((f=t.ownerId)==null?void 0:f.toString())||"",name:t.name||"",profession:t.profession||"",description:t.description||"",experience:t.experience||"",category:t.category||"",location:o,locationString:l,travelRadius:Number(t.travelRadius)||10,hasTravel:t.hasTravel??!0,image:t.image||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",portfolio:t.portfolio||[],services:s,serviceNames:s.map(m=>m.name),features:t.features||[],priceFrom:s.length>0?Math.min(...s.map(m=>m.price)):0,rating:Number(t.rating)||0,reviewsCount:Number(t.reviewsCount)||0,completedServices:Number(t.completedServices)||0,punctuality:Number(t.punctuality)||95,regularClients:Number(t.regularClients)||0,certifications:t.certifications||[],workingHours:t.workingHours||uD(),acceptsCard:t.acceptsCard??!0,responseTime:t.responseTime||"24h",isPremium:t.isPremium||!1,isVerified:t.isVerified||!1,isActive:t.isActive??!0,isAvailableToday:t.isAvailableToday??!0,createdAt:t.createdAt||n,updatedAt:t.updatedAt||n,ownerEmail:t.ownerEmail||"",ownerUsername:t.ownerUsername||"",ownerPhone:t.ownerPhone||"",ownerAvatar:t.ownerAvatar||""}},Kt={async getAll(){try{const t=await Dn(At(Ie,sa));return console.log("Firebase getAll - znaleziono:",t.docs.length),t.docs.map(e=>xo({...e.data(),id:e.id}))}catch(t){return console.error("Firebase getAll error:",t),[]}},async getById(t){try{const e=ct(Ie,sa,t),n=await ol(e);return n.exists()?xo({...n.data(),id:n.id}):null}catch(e){return console.error("Firebase getById error:",e),null}},async getByCategory(t){try{const e=Ft(At(Ie,sa),Et("category","==",t));return(await Dn(e)).docs.map(r=>xo({...r.data(),id:r.id}))}catch(e){return console.error("Firebase getByCategory error:",e),[]}},async getByOwner(t){try{const e=Ft(At(Ie,sa),Et("ownerId","==",t));return(await Dn(e)).docs.map(r=>xo({...r.data(),id:r.id}))}catch(e){return console.error("Firebase getByOwner error:",e),[]}},async create(t,e){const n=wg(),r=xo({...t,ownerId:e,isActive:!0},n),s=JSON.parse(JSON.stringify(r));try{return console.log("Firebase create - zapisuj:",s),await ll(ct(Ie,sa,n),s),console.log("Firebase create - zapisano pomylnie"),window.dispatchEvent(new CustomEvent("providerCreated",{detail:r})),r}catch(o){throw console.error("Firebase create error:",o),o}},async update(t,e){try{const n=await this.getById(t);if(!n)return null;const r=xo({...n,...e},t);r.updatedAt=new Date().toISOString();const s=JSON.parse(JSON.stringify(r));return await Ts(ct(Ie,sa,t),s),window.dispatchEvent(new CustomEvent("providerUpdated",{detail:r})),r}catch(n){throw console.error("Firebase update error:",n),n}},async delete(t){try{return await gx(ct(Ie,sa,t)),window.dispatchEvent(new CustomEvent("providerDeleted",{detail:{id:t}})),!0}catch(e){return console.error("Firebase delete error:",e),!1}},async uploadImage(t,e){try{const n=`providers/${e}/${Date.now()}_${t.name}`,r=jx(kx,n);return await xk(r,t),vk(r)}catch(n){throw console.error("Firebase upload error:",n),n}},async addService(t,e){const n=await this.getById(t);if(!n)return null;const r={...e,id:wg()},s=[...n.services,r];return this.update(t,{services:s,serviceNames:s.map(o=>o.name),priceFrom:Math.min(...s.map(o=>o.price))})},async removeService(t,e){const n=await this.getById(t);if(!n)return null;const r=n.services.filter(s=>s.id!==e);return this.update(t,{services:r,serviceNames:r.map(s=>s.name),priceFrom:r.length>0?Math.min(...r.map(s=>s.price)):0})}},dD={fryzjer:["fryzjer","fryzjerstwo","hair"],pedicure:["pedicure","pedikre"],paznokcie:["paznokcie","manicure","nails","stylizacja paznokci"],masaz:["masa","masaz","massage"],makijaz:["makija","makijaz","makeup","wiza"],"pielegnacja-twarzy":["pielgnacja twarzy","kosmetyka","facial"],depilacja:["depilacja","wax","waxing"],barber:["barber","fryzjer mski","barbershop"],tatuaz:["tatua","tatuaz","tattoo"],kosmetyka:["kosmetyka","kosmetyczka","beauty"],"brwi-rzesy":["brwi","rzsy","lashes","brows"],inne:["inne","other"]},hD=["Wszystkie miasta","Warszawa","Krakw","d","Wrocaw","Pozna","Gdask","Szczecin","Bydgoszcz","Lublin","Biaystok","Katowice","Gdynia","Czstochowa","Radom","Sosnowiec","Toru","Kielce","Rzeszw","Gliwice","Zabrze","Olsztyn","Bielsko-Biaa","Bytom","Zielona Gra","Rybnik","Ruda lska","Opole","Tychy","Gorzw Wielkopolski","Pock","Dbrowa Grnicza","Elblg","Wabrzych","Wocawek","Tarnw","Chorzw","Koszalin"],fD=["Wszystkie specjalizacje","Fryzjer","Barber","Kosmetyka","Paznokcie / Manicure","Pedicure","Masa","Makija","Pielgnacja twarzy","Depilacja","Brwi i rzsy","Tatua","Inne usugi"],mD={Fryzjer:["fryzjer","fryzjerstwo","hair"],Barber:["barber","fryzjer mski","barbershop"],Kosmetyka:["kosmetyka","kosmetyczka","beauty"],"Paznokcie / Manicure":["paznokcie","manicure","nails","stylizacja paznokci"],Pedicure:["pedicure","pedikre"],Masa:["masa","masaz","massage"],Makija:["makija","makijaz","makeup","wiza"],"Pielgnacja twarzy":["pielgnacja twarzy","kosmetyka","facial"],Depilacja:["depilacja","wax","waxing"],"Brwi i rzsy":["brwi","rzsy","lashes","brows"],Tatua:["tatua","tatuaz","tattoo"],"Inne usugi":["inne","other"]},pD=(t,e,n,r)=>{const o=(n-t)*Math.PI/180,l=(r-e)*Math.PI/180,h=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))},t_=()=>{const{category:t}=j1(),{showToast:e}=ar(),[n,r]=D.useState([]),[s,o]=D.useState(!0),[l,h]=D.useState(!1),[f,m]=D.useState(!0),[g,x]=D.useState(0),[_,T]=D.useState([]),[k,C]=D.useState("Wszystkie miasta"),[A,E]=D.useState("Wszystkie specjalizacje"),[S,I]=D.useState(null),[H,O]=D.useState("rating"),[R,N]=D.useState(null),[b,z]=D.useState(!1),M=()=>{if(!navigator.geolocation){e("Twoja przegldarka nie wspiera geolokalizacji","error");return}z(!0),navigator.geolocation.getCurrentPosition(B=>{N({lat:B.coords.latitude,lng:B.coords.longitude}),z(!1),e("Lokalizacja pobrana!","success")},B=>{switch(console.error("Bd geolokalizacji:",B),z(!1),B.code){case B.PERMISSION_DENIED:e("Brak zgody na lokalizacj. Wcz w ustawieniach przegldarki.","error");break;case B.POSITION_UNAVAILABLE:e("Nie mona ustali lokalizacji","error");break;case B.TIMEOUT:e("Przekroczono czas oczekiwania na lokalizacj","error");break;default:e("Bd pobierania lokalizacji","error")}O("rating")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};D.useEffect(()=>{H==="distance"&&!R&&M()},[H]);const V=async(B=!1)=>{B?h(!0):o(!0);try{let Q=await Kt.getAll();if(t){const F=dD[t]||[t];Q=Q.filter(ee=>{if(!ee.category)return!1;const Y=ee.category.toLowerCase();return F.some(pe=>Y.includes(pe.toLowerCase()))})}if(A&&A!=="Wszystkie specjalizacje"){const F=mD[A]||[];F.length>0&&(Q=Q.filter(ee=>{if(!ee.category)return!1;const Y=ee.category.toLowerCase();return F.some(pe=>Y.includes(pe.toLowerCase()))}))}k&&k!=="Wszystkie miasta"&&(Q=Q.filter(F=>{var pe,X,se;const ee=((pe=F.locationString)==null?void 0:pe.toLowerCase())||"",Y=((se=(X=F.location)==null?void 0:X.city)==null?void 0:se.toLowerCase())||"";return ee.includes(k.toLowerCase())||Y.includes(k.toLowerCase())})),S&&(Q=Q.filter(F=>F.rating>=S)),_.includes("available-today")&&(Q=Q.filter(F=>F.isAvailableToday)),_.includes("with-travel")&&(Q=Q.filter(F=>F.hasTravel)),H==="rating"?Q.sort((F,ee)=>ee.rating-F.rating):H==="price-asc"?Q.sort((F,ee)=>F.priceFrom-ee.priceFrom):H==="price-desc"?Q.sort((F,ee)=>ee.priceFrom-F.priceFrom):H==="distance"&&R&&(Q=Q.map(F=>{var Y,pe;let ee=1/0;return(Y=F.location)!=null&&Y.lat&&((pe=F.location)!=null&&pe.lng)&&(ee=pD(R.lat,R.lng,F.location.lat,F.location.lng)),{...F,_distance:ee}}).sort((F,ee)=>F._distance-ee._distance)),r(Q),x(Q.length),m(!1)}catch(Q){console.error("Bd pobierania usugodawcw:",Q),e("Bd adowania danych","error")}finally{o(!1),h(!1)}};D.useEffect(()=>{V()},[t,k,A,S,H,_,R]);const $={ratings:[{label:"Wszystkie oceny",value:null},{label:" 5.0",value:5},{label:" 4.5+",value:4.5},{label:" 4.0+",value:4},{label:" 3.5+",value:3.5}]},U=[{id:"available-today",label:"Dostpny dzi"},{id:"with-travel",label:"Z dojazdem"},{id:"recommended",label:"Polecany"},{id:"discount",label:"Nowi uytkownicy -20%"},{id:"weekend",label:"Weekend"}],Te=B=>{T(Q=>Q.includes(B)?Q.filter(F=>F!==B):[...Q,B])},fe=()=>{T([]),C("Wszystkie miasta"),E("Wszystkie specjalizacje"),I(null),O("rating"),e("Filtry wyczyszczone","info")},le=t?t.charAt(0).toUpperCase()+t.slice(1):"Wszystkie usugi",re=()=>{!l&&f&&V(!0)};return a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-6",children:[a.jsx(ke,{to:"/",className:"hover:text-primary transition-colors",children:"Strona gwna"}),a.jsx("span",{children:"/"}),a.jsx(ke,{to:"/uslugodawcy",className:"hover:text-primary transition-colors",children:"Usugi"}),t&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"/"}),a.jsx("span",{className:"text-gray-900",children:le})]})]}),a.jsxs("div",{className:"text-center mb-10",children:[a.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:le.toUpperCase()}),a.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Wybierz swojego specjalist"}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Znajd idealnego specjalist w Twojej okolicy. Sprawd opinie, ceny i dostpne terminy."})]}),a.jsxs("section",{className:"card p-6 mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[a.jsx(Tx,{className:"w-5 h-5"}),"Filtry wyszukiwania"]}),a.jsx("button",{onClick:fe,className:"text-sm text-primary hover:underline",children:"Wyczy filtry"})]}),a.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Miasto"}),a.jsx("select",{value:k,onChange:B=>C(B.target.value),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:hD.map(B=>a.jsx("option",{value:B,children:B},B))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Specjalizacja"}),a.jsx("select",{value:A,onChange:B=>E(B.target.value),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:fD.map(B=>a.jsx("option",{value:B,children:B},B))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Ocena"}),a.jsx("select",{value:S??"",onChange:B=>I(B.target.value?parseFloat(B.target.value):null),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:$.ratings.map(B=>a.jsx("option",{value:B.value??"",children:B.label},B.label))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Twoja lokalizacja"}),a.jsx("button",{onClick:M,disabled:b,className:`w-full px-4 py-2.5 border-2 rounded-xl flex items-center justify-center gap-2 transition-colors ${R?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-primary hover:text-primary"}`,children:b?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-4 h-4 animate-spin"}),"Pobieranie..."]}):R?a.jsxs(a.Fragment,{children:[a.jsx(Hm,{className:"w-4 h-4"}),"Lokalizacja pobrana"]}):a.jsxs(a.Fragment,{children:[a.jsx(Hm,{className:"w-4 h-4"}),"Pobierz lokalizacj"]})})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(B=>a.jsx("button",{onClick:()=>Te(B.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${_.includes(B.id)?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:B.label},B.id))})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[a.jsx("div",{className:"text-gray-600",children:s?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ut,{className:"w-4 h-4 animate-spin"}),"adowanie..."]}):a.jsxs(a.Fragment,{children:["Znaleziono ",a.jsxs("strong",{className:"text-gray-900",children:[g," specjalistw"]}),k!=="Wszystkie miasta"&&` w miecie ${k}`]})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Sortuj:"}),a.jsxs("select",{value:H,onChange:B=>O(B.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 text-sm",children:[a.jsx("option",{value:"rating",children:"Najwyej oceniane"}),a.jsx("option",{value:"recommended",children:"Polecane"}),a.jsx("option",{value:"price-asc",children:"Cena: od najniszej"}),a.jsx("option",{value:"price-desc",children:"Cena: od najwyszej"}),a.jsx("option",{value:"distance",children:"Najbliej mnie"})]})]})]}),H==="distance"&&!R&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[a.jsx(Hm,{className:"w-5 h-5 text-yellow-600"}),a.jsx("p",{className:"text-yellow-700 text-sm",children:'Aby sortowa po odlegoci, kliknij "Pobierz lokalizacj" lub zezwl przegldarce na dostp do lokalizacji.'})]}),s&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[a.jsx(ut,{className:"w-12 h-12 animate-spin text-primary mb-4"}),a.jsx("p",{className:"text-gray-500",children:"adowanie specjalistw..."})]}),!s&&n.length===0&&a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Brak wynikw"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Nie znaleziono specjalistw speniajcych kryteria wyszukiwania."}),a.jsx("button",{onClick:fe,className:"btn btn-primary",children:"Wyczy filtry"})]}),!s&&n.length>0&&a.jsx("div",{className:"grid gap-6",children:n.map(B=>a.jsxs("div",{className:"card card-hover p-6 grid md:grid-cols-[200px,1fr,200px] gap-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:B.image,alt:B.name,className:"w-full h-48 md:h-full object-cover rounded-xl"}),B.isPremium&&a.jsx("div",{className:"absolute top-3 left-3 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:" Premium"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:B.name}),a.jsx("p",{className:"text-gray-500",children:B.profession})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"flex",children:[...Array(5)].map((Q,F)=>a.jsx(Br,{className:`w-4 h-4 ${F<Math.floor(B.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},F))}),a.jsx("span",{className:"font-bold text-gray-900",children:B.rating}),a.jsxs("span",{className:"text-gray-500",children:["(",B.reviewsCount," opinii)"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-4",children:[a.jsx(Es,{className:"w-4 h-4"}),a.jsx("span",{children:B.locationString}),H==="distance"&&B._distance&&B._distance!==1/0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-primary/10 text-primary rounded-full text-xs font-medium",children:B._distance<1?`${Math.round(B._distance*1e3)} m`:`${B._distance.toFixed(1)} km`})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[B.serviceNames.slice(0,4).map((Q,F)=>a.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:Q},F)),B.serviceNames.length>4&&a.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:["+",B.serviceNames.length-4]})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:B.description}),a.jsx("div",{className:"flex flex-wrap gap-4",children:B.features.slice(0,3).map(Q=>a.jsxs("span",{className:"flex items-center gap-1 text-sm text-gray-600",children:[a.jsx(St,{className:"w-4 h-4 text-green-500"}),Q]},Q))})]}),a.jsxs("div",{className:"flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-2 text-sm mb-4 ${B.isAvailableToday?"text-green-600":"text-orange-500"}`,children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${B.isAvailableToday?"bg-green-500":"bg-orange-500"}`}),B.isAvailableToday?"Dostpna dzi":"Zajta dzi"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Od"}),a.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[B.priceFrom," ",a.jsx("span",{className:"text-base font-normal text-gray-500",children:"z"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ke,{to:`/uslugodawcy/profil/${B.id}`,className:"w-full btn btn-primary justify-center",children:"Zarezerwuj"}),a.jsx(ke,{to:`/uslugodawcy/profil/${B.id}`,className:"w-full btn btn-ghost justify-center",children:"Zobacz profil"})]})]})]},B.id))}),!s&&f&&n.length>0&&a.jsx("div",{className:"flex justify-center mt-10",children:a.jsx("button",{onClick:re,disabled:l,className:"btn btn-ghost px-8 py-3 text-lg",children:l?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-5 h-5 animate-spin mr-2"}),"adowanie..."]}):"Zaaduj wicej"})}),!s&&!f&&n.length>0&&a.jsx("div",{className:"text-center mt-10 py-6 border-t border-gray-200",children:a.jsxs("p",{className:"text-gray-500",children:["To wszyscy dostpni specjalici (",g,")"]})}),a.jsxs("button",{className:"fixed bottom-6 right-6 btn btn-primary shadow-xl",children:[a.jsx(Es,{className:"w-5 h-5"}),a.jsx("span",{children:"Poka na mapie"})]})]})},Qs="notifications",gD=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),Nn={async create(t){const e=gD(),n=new Date().toISOString(),r={id:e,userId:t.userId,type:t.type,title:t.title,message:t.message,data:t.data,read:!1,createdAt:n};try{return await ll(ct(Ie,Qs,e),r),console.log("Notification created:",r),window.dispatchEvent(new CustomEvent("newNotification",{detail:r})),r}catch(s){throw console.error("Notification create error:",s),s}},async getByUser(t){try{const e=Ft(At(Ie,Qs),Et("userId","==",t));return(await Dn(e)).docs.map(s=>s.data()).sort((s,o)=>new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(e){return console.error("Notification getByUser error:",e),[]}},async getUnreadByUser(t){try{const e=Ft(At(Ie,Qs),Et("userId","==",t));return(await Dn(e)).docs.map(s=>s.data()).filter(s=>!s.read).sort((s,o)=>new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(e){return console.error("Notification getUnreadByUser error:",e),[]}},async countUnread(t){try{return(await this.getUnreadByUser(t)).length}catch(e){return console.error("Notification countUnread error:",e),0}},async markAsRead(t){try{await Ts(ct(Ie,Qs,t),{read:!0})}catch(e){throw console.error("Notification markAsRead error:",e),e}},async markAllAsRead(t){try{const e=await this.getUnreadByUser(t);if(e.length===0)return;const n=Zw(Ie);e.forEach(r=>{const s=ct(Ie,Qs,r.id);n.update(s,{read:!0})}),await n.commit()}catch(e){throw console.error("Notification markAllAsRead error:",e),e}},async delete(t){try{await gx(ct(Ie,Qs,t))}catch(e){throw console.error("Notification delete error:",e),e}},async deleteAllByUser(t){try{const e=await this.getByUser(t);if(e.length===0)return;const n=Zw(Ie);e.forEach(r=>{const s=ct(Ie,Qs,r.id);n.delete(s)}),await n.commit()}catch(e){throw console.error("Notification deleteAllByUser error:",e),e}},subscribe(t,e){const n=Ft(At(Ie,Qs),Et("userId","==",t));return qo(n,r=>{const s=r.docs.map(o=>o.data());s.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(s)})},getIcon(t){return{booking_request:"",booking_confirmed:"",booking_cancelled:"",booking_completed:"",booking_reminder:"",new_message:"",new_review:"",system:""}[t]||""},getColor(t){return{booking_request:"bg-blue-100 text-blue-600",booking_confirmed:"bg-green-100 text-green-600",booking_cancelled:"bg-red-100 text-red-600",booking_completed:"bg-purple-100 text-purple-600",booking_reminder:"bg-yellow-100 text-yellow-600",new_message:"bg-indigo-100 text-indigo-600",new_review:"bg-orange-100 text-orange-600",system:"bg-gray-100 text-gray-600"}[t]||"bg-gray-100 text-gray-600"}},Rr="bookings",yD=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),nr={async create(t){const e=yD(),n=new Date().toISOString(),r={id:e,...t,status:"pending",createdAt:n,updatedAt:n};try{return await ll(ct(Ie,Rr,e),r),console.log("Booking created:",r),await Nn.create({userId:t.providerId,type:"booking_request",title:"Nowa proba o rezerwacj",message:`${t.clientName} chce zarezerwowa ${t.serviceName} na ${t.date} o ${t.time}`,data:{bookingId:e}}),r}catch(s){throw console.error("Booking create error:",s),s}},async getById(t){try{const e=ct(Ie,Rr,t),n=await ol(e);return n.exists()?n.data():null}catch(e){return console.error("Booking getById error:",e),null}},async getByClient(t){try{const e=Ft(At(Ie,Rr),Et("clientId","==",t));return(await Dn(e)).docs.map(s=>s.data()).sort((s,o)=>new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(e){return console.error("Booking getByClient error:",e),[]}},async getByProvider(t){try{const e=Ft(At(Ie,Rr),Et("providerId","==",t));return(await Dn(e)).docs.map(s=>s.data()).sort((s,o)=>new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(e){return console.error("Booking getByProvider error:",e),[]}},async getByProviderAndDate(t,e){try{const n=Ft(At(Ie,Rr),Et("providerId","==",t),Et("date","==",e));return(await Dn(n)).docs.map(s=>s.data())}catch(n){return console.error("Booking getByProviderAndDate error:",n),[]}},async confirm(t){try{const e=await this.getById(t);if(!e)return null;const n=new Date().toISOString(),r={status:"confirmed",updatedAt:n,confirmedAt:n};return await Ts(ct(Ie,Rr,t),r),await Nn.create({userId:e.clientId,type:"booking_confirmed",title:"Rezerwacja potwierdzona! ",message:`${e.providerName} potwierdzi Twoj rezerwacj na ${e.date} o ${e.time}`,data:{bookingId:t}}),{...e,...r}}catch(e){throw console.error("Booking confirm error:",e),e}},async cancel(t,e){try{const n=await this.getById(t);if(!n)return null;const r=new Date().toISOString(),s={status:"cancelled",updatedAt:r,cancelledAt:r};await Ts(ct(Ie,Rr,t),s);const o=e==="client"?n.providerId:n.clientId,l=e==="client"?n.clientName:n.providerName;return await Nn.create({userId:o,type:"booking_cancelled",title:"Rezerwacja anulowana ",message:`${l} anulowa rezerwacj na ${n.date} o ${n.time}`,data:{bookingId:t}}),{...n,...s}}catch(n){throw console.error("Booking cancel error:",n),n}},async complete(t){try{const e=await this.getById(t);if(!e)return null;const n=new Date().toISOString(),r={status:"completed",updatedAt:n,completedAt:n};return await Ts(ct(Ie,Rr,t),r),await Nn.create({userId:e.clientId,type:"booking_completed",title:"Usuga zakoczona! ",message:`Jak oceniasz usug ${e.serviceName} u ${e.providerName}? Zostaw opini!`,data:{bookingId:t,providerId:e.providerId}}),{...e,...r}}catch(e){throw console.error("Booking complete error:",e),e}},async isTimeSlotAvailable(t,e,n){try{return!(await this.getByProviderAndDate(t,e)).find(o=>o.time===n&&(o.status==="pending"||o.status==="confirmed"))}catch(r){return console.error("isTimeSlotAvailable error:",r),!1}},async getBookedSlots(t,e){try{return(await this.getByProviderAndDate(t,e)).filter(r=>r.status==="pending"||r.status==="confirmed").map(r=>r.time)}catch(n){return console.error("getBookedSlots error:",n),[]}},async getProviderStats(t){try{const e=await this.getByProvider(t),n=new Date,r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,s=e.filter(m=>m.status==="completed"),o=e.filter(m=>m.status==="pending"),l=e.filter(m=>m.status==="cancelled"),h=e.filter(m=>m.date.startsWith(r)),f=h.filter(m=>m.status==="completed");return{totalBookings:e.length,completedBookings:s.length,pendingBookings:o.length,cancelledBookings:l.length,totalRevenue:s.reduce((m,g)=>m+g.servicePrice,0),thisMonthRevenue:f.reduce((m,g)=>m+g.servicePrice,0),thisMonthBookings:h.length}}catch(e){return console.error("getProviderStats error:",e),{totalBookings:0,completedBookings:0,pendingBookings:0,cancelledBookings:0,totalRevenue:0,thisMonthRevenue:0,thisMonthBookings:0}}},subscribeToProviderBookings(t,e){const n=Ft(At(Ie,Rr),Et("providerId","==",t));return qo(n,r=>{const s=r.docs.map(o=>o.data());s.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(s)})},subscribeToClientBookings(t,e){const n=Ft(At(Ie,Rr),Et("clientId","==",t));return qo(n,r=>{const s=r.docs.map(o=>o.data());s.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(s)})}},Cd=({icon:t,value:e,label:n,color:r})=>a.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl ${r}`,children:[a.jsx(t,{className:"w-4 h-4"}),a.jsx("span",{className:"font-bold",children:e}),a.jsx("span",{className:"text-sm opacity-80",children:n})]}),xD=({service:t,isSelected:e,onToggle:n})=>a.jsxs("div",{onClick:n,className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${e?"border-primary bg-primary/5 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"font-bold text-gray-900",children:t.name}),t.badge&&a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${t.badge==="Premium"?"bg-yellow-100 text-yellow-700":"bg-primary/10 text-primary"}`,children:t.badge})]}),t.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:t.description})]}),a.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${e?"bg-primary border-primary":"border-gray-300"}`,children:e&&a.jsx(St,{className:"w-4 h-4 text-white"})})]}),a.jsxs("div",{className:"flex items-center justify-between mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(ln,{className:"w-4 h-4"}),a.jsx("span",{children:t.duration})]}),a.jsxs("div",{className:"text-right",children:[t.oldPrice&&a.jsxs("span",{className:"text-sm text-gray-400 line-through mr-2",children:[t.oldPrice," z"]}),a.jsxs("span",{className:"text-lg font-bold text-primary",children:[t.price," z"]}),t.discount&&a.jsxs("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:["-",t.discount,"%"]})]})]})]}),vD=()=>{var ee,Y,pe;const{id:t}=j1(),e=Nr(),{showToast:n}=ar(),{user:r}=Yt(),[s,o]=D.useState(null),[l,h]=D.useState(!0),[f,m]=D.useState(!1),[g,x]=D.useState([]),[_,T]=D.useState(null),[k,C]=D.useState(null),[A,E]=D.useState("Wszystkie"),[S,I]=D.useState(!1),[H,O]=D.useState([]),[R,N]=D.useState(!1),[b]=D.useState({month:"Grudzie",year:2025});D.useEffect(()=>{(async()=>{if(t){h(!0);try{const ce=await Kt.getById(t);ce?o(ce):n("Nie znaleziono profilu usugodawcy","error")}catch(ce){console.error("Error loading provider:",ce),n("Bd adowania profilu","error")}finally{h(!1)}}})();const se=ce=>{var Ve;((Ve=ce.detail)==null?void 0:Ve.id)===t&&o(ce.detail)};return window.addEventListener("providerUpdated",se),()=>window.removeEventListener("providerUpdated",se)},[t]);const z=s!=null&&s.services?["Wszystkie",...new Set(s.services.map(X=>X.category).filter(Boolean))]:["Wszystkie"],M=((ee=s==null?void 0:s.services)==null?void 0:ee.filter(X=>A==="Wszystkie"||X.category===A))||[],V=g.reduce((X,se)=>X+se.price,0),$=g.reduce((X,se)=>{const ce=se.duration.match(/(\d+)/);return X+(ce?parseInt(ce[1]):30)},0),U=X=>{x(se=>se.find(ce=>ce.id===X.id)?se.filter(ce=>ce.id!==X.id):[...se,X])},fe=(()=>{var Qe;const X=new Date,se=[],ce=new Date(X.getFullYear(),X.getMonth(),1),Ve=ce.getDay()===0?6:ce.getDay()-1,_e={1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"};for(let jt=0;jt<35;jt++){const J=new Date(X.getFullYear(),X.getMonth(),jt-Ve+1),ve=J.getMonth()===X.getMonth(),Ue=J<new Date(X.getFullYear(),X.getMonth(),X.getDate());let Re=!1;if(s){const rt=_e[J.getDay()];Re=!((Qe=s.workingHours[rt])!=null&&Qe.enabled)}se.push({day:J.getDate(),isToday:J.toDateString()===X.toDateString(),disabled:!ve||Ue||Re,isClosed:Re,fullDate:J})}return se})();D.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)||!_)return;const se=new Date,ce=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}-${String(_).padStart(2,"0")}`,Ve=await nr.getBookedSlots(s.id,ce);O(Ve)})()},[s==null?void 0:s.id,_]);const le=X=>({1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"})[X.getDay()]||null,B=(()=>{if(!s||!_)return[];const X=[],se=new Date,ce=new Date(se.getFullYear(),se.getMonth(),_),Ve=le(ce);if(!Ve)return[];const _e=s.workingHours[Ve];if(!_e.enabled)return[];const[Qe,jt]=_e.from.split(":").map(Number),[J,ve]=_e.to.split(":").map(Number);let Ue=Qe,Re=jt;for(;Ue<J||Ue===J&&Re<ve;){const rt=`${String(Ue).padStart(2,"0")}:${String(Re).padStart(2,"0")}`,rs=ce.toDateString()===se.toDateString()&&(Ue<se.getHours()||Ue===se.getHours()&&Re<=se.getMinutes());X.push({time:rt,disabled:H.includes(rt)||rs}),Re+=30,Re>=60&&(Re=0,Ue++)}return X})(),Q=async()=>{if(!r||!r.id){n("Zaloguj si, aby zarezerwowa wizyt","info"),e(`/auth?mode=login&redirect=/uslugodawcy/profil/${t}`);return}if(g.length===0){n("Wybierz przynajmniej jedn usug","error");return}if(!_||!k){n("Wybierz dat i godzin","error");return}if(s){m(!0),console.log("Creating booking for user:",r.id);try{const X=new Date,se=`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}-${String(_).padStart(2,"0")}`;if(!await nr.isTimeSlotAvailable(s.id,se,k)){n("Ten termin jest ju zajty. Wybierz inny.","error"),m(!1);return}const Ve=g[0];await nr.create({clientId:r.id,clientName:r.username||"Klient",clientEmail:r.email||"",clientPhone:r.phone||"",providerId:s.id,providerName:s.name,providerImage:s.image,serviceId:Ve.id,serviceName:g.map(_e=>_e.name).join(", "),servicePrice:V,serviceDuration:`${$} min`,date:se,time:k}),console.log("Booking created successfully"),I(!0)}catch(X){console.error("Bd rezerwacji:",X),n("Bd podczas tworzenia rezerwacji","error")}finally{m(!1)}}};if(l)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"adowanie profilu..."})]})});if(!s)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Nie znaleziono profilu"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Ten usugodawca nie istnieje lub zosta usunity"}),a.jsx("button",{onClick:()=>e("/uslugodawcy"),className:"px-6 py-2 bg-primary text-white rounded-xl hover:bg-primary/90",children:"Wr do listy"})]})});const F={monday:"Pon",tuesday:"Wt",wednesday:"r",thursday:"Czw",friday:"Pt",saturday:"Sob",sunday:"Nd"};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b sticky top-0 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:a.jsxs("div",{className:"flex items-center justify-between h-14",children:[a.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-gray-600 hover:text-primary transition-colors",children:[a.jsx(eu,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Wr"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>N(!R),className:`p-2 rounded-full transition-colors ${R?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,children:a.jsx(cl,{className:`w-5 h-5 ${R?"fill-current":""}`})}),a.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-primary hover:bg-primary/10 transition-colors",children:a.jsx(F5,{className:"w-5 h-5"})})]})]})})}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"relative h-48 sm:h-64",children:[a.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),a.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[s.isPremium&&a.jsxs("span",{className:"px-3 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full flex items-center gap-1",children:[a.jsx(Br,{className:"w-3 h-3 fill-current"})," Premium"]}),s.isVerified&&a.jsxs("span",{className:"px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full flex items-center gap-1",children:[a.jsx(Tu,{className:"w-3 h-3"})," Zweryfikowany"]})]}),a.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:s.name}),a.jsx("p",{className:"text-white/90",children:s.profession})]})]}),a.jsxs("div",{className:"p-4 flex flex-wrap gap-3",children:[a.jsx(Cd,{icon:Br,value:s.rating>0?s.rating.toFixed(1):"Nowy",label:s.reviewsCount>0?`(${s.reviewsCount} opinii)`:"",color:"bg-yellow-50 text-yellow-700"}),s.completedServices>0&&a.jsx(Cd,{icon:qh,value:s.completedServices,label:"usug",color:"bg-blue-50 text-blue-700"}),s.hasTravel&&a.jsx(Cd,{icon:E5,value:`${s.travelRadius} km`,label:"dojazd",color:"bg-green-50 text-green-700"}),s.acceptsCard&&a.jsx(Cd,{icon:Kh,value:"Karta",label:"",color:"bg-purple-50 text-purple-700"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"O mnie"}),s.description?a.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:s.description}):a.jsx("p",{className:"text-gray-400 italic",children:"Brak opisu"}),s.experience&&a.jsxs("p",{className:"mt-4 text-sm text-gray-500 flex items-center gap-2",children:[a.jsx(qh,{className:"w-4 h-4 text-primary"}),s.experience]}),s.features.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Udogodnienia"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.features.map((X,se)=>a.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:X},se))})]}),s.certifications.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Certyfikaty"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.certifications.map((X,se)=>a.jsxs("span",{className:"px-3 py-1 bg-green-50 text-green-700 text-sm rounded-full flex items-center gap-1",children:[a.jsx(St,{className:"w-3 h-3"})," ",X]},se))})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Usugi i cennik"}),z.length>1&&a.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:z.map(X=>a.jsx("button",{onClick:()=>E(X),className:`px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors ${A===X?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X},X))}),a.jsx("div",{className:"space-y-3",children:M.length>0?M.map(X=>a.jsx(xD,{service:X,isSelected:g.some(se=>se.id===X.id),onToggle:()=>U(X)},X.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-500 mb-2",children:"Brak usug"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Ten usugodawca nie doda jeszcze usug"})]})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Lokalizacja"}),a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx(Es,{className:"w-5 h-5 text-primary mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:s.locationString}),s.location.address&&a.jsx("p",{className:"text-sm text-gray-500",children:s.location.address}),s.hasTravel&&a.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" Dojazd do klienta (do ",s.travelRadius," km)"]})]})]}),(Y=s.location)!=null&&Y.lat&&((pe=s.location)!=null&&pe.lng)?a.jsxs("div",{className:"h-48 rounded-xl overflow-hidden",children:[a.jsx("iframe",{title:"Lokalizacja usugodawcy",width:"100%",height:"100%",style:{border:0},loading:"lazy",src:`https://www.openstreetmap.org/export/embed.html?bbox=${s.location.lng-.01}%2C${s.location.lat-.01}%2C${s.location.lng+.01}%2C${s.location.lat+.01}&layer=mapnik&marker=${s.location.lat}%2C${s.location.lng}`}),a.jsx("a",{href:`https://www.openstreetmap.org/?mlat=${s.location.lat}&mlon=${s.location.lng}#map=16/${s.location.lat}/${s.location.lng}`,target:"_blank",rel:"noopener noreferrer",className:"block text-center text-sm text-primary hover:underline mt-2",children:"Otwrz wiksz map"})]}):a.jsx("div",{className:"h-48 bg-gray-100 rounded-xl flex items-center justify-center",children:a.jsx("p",{className:"text-gray-400",children:"Brak danych lokalizacji"})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Godziny pracy"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(s.workingHours).map(([X,se])=>a.jsxs("div",{className:`p-3 rounded-xl ${se.enabled?"bg-green-50":"bg-gray-100"}`,children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:F[X]}),a.jsx("p",{className:`text-sm ${se.enabled?"text-green-700":"text-gray-500"}`,children:se.enabled?`${se.from} - ${se.to}`:"Zamknite"})]},X))})]})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 sticky top-20",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Zarezerwuj wizyt"}),g.length>0?a.jsxs("div",{className:"mb-4 p-4 bg-primary/5 rounded-xl",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Wybrane usugi:"}),g.map(X=>a.jsxs("div",{className:"flex justify-between text-sm py-1",children:[a.jsx("span",{children:X.name}),a.jsxs("span",{className:"font-medium",children:[X.price," z"]})]},X.id)),a.jsxs("div",{className:"flex justify-between mt-2 pt-2 border-t border-primary/20",children:[a.jsx("span",{className:"font-bold",children:"Razem:"}),a.jsxs("span",{className:"font-bold text-primary",children:[V," z"]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Czas: ~",$," min"]})]}):a.jsx("p",{className:"text-sm text-gray-500 mb-4 p-4 bg-gray-50 rounded-xl",children:"Wybierz usugi z listy"}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Data"}),a.jsxs("span",{className:"text-sm text-gray-500",children:[b.month," ",b.year]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[["Pn","Wt","r","Cz","Pt","So","Nd"].map(X=>a.jsx("div",{className:"text-xs font-medium text-gray-400 py-1",children:X},X)),fe.slice(0,35).map((X,se)=>a.jsx("button",{disabled:X.disabled,onClick:()=>!X.disabled&&T(X.day),className:`aspect-square text-sm rounded-lg transition-colors ${X.disabled?"opacity-30 cursor-not-allowed":_===X.day?"bg-primary text-white":X.isToday?"ring-2 ring-primary text-primary":"hover:bg-gray-100"}`,children:X.day},se))]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Godzina"}),_?B.length===0?a.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-center",children:[a.jsx("p",{className:"text-red-600 font-medium",children:"Dzie zamknity"}),a.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Wybierz inny dzie"})]}):a.jsx("div",{className:"grid grid-cols-3 gap-2",children:B.map(X=>a.jsx("button",{disabled:X.disabled,onClick:()=>!X.disabled&&C(X.time),className:`py-2 text-sm rounded-lg transition-colors ${X.disabled?"opacity-30 cursor-not-allowed bg-gray-100":k===X.time?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"}`,children:X.time},X.time))}):a.jsx("p",{className:"text-sm text-gray-500 p-4 bg-gray-50 rounded-xl text-center",children:"Wybierz dat, aby zobaczy dostpne godziny"})]}),a.jsx("button",{onClick:Q,disabled:g.length===0||f,className:`w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${g.length>0&&!f?"bg-gradient-to-r from-primary to-secondary text-white hover:shadow-lg hover:-translate-y-0.5":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:f?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-5 h-5 animate-spin"}),"Rezerwuj..."]}):g.length>0?`Zarezerwuj za ${V} z`:"Wybierz usug"}),a.jsxs("button",{onClick:()=>{if(!r){n("Zaloguj si, aby napisa wiadomo","info"),e(`/auth?mode=login&redirect=/uslugodawcy/profil/${t}`);return}e(`/wiadomosci?providerId=${t}`)},className:"w-full mt-3 py-3 border-2 border-gray-200 rounded-xl font-medium text-gray-700 hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2",children:[a.jsx(xg,{className:"w-5 h-5"}),"Napisz wiadomo"]})]})})]})}),S&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Rezerwacja wysana!"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["Twoja proba o rezerwacj u ",a.jsx("strong",{children:s.name})," zostaa wysana. Czekaj na potwierdzenie od usugodawcy."]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-left mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 font-medium mb-2",children:[a.jsx(ln,{className:"w-4 h-4"}),"Oczekuje na potwierdzenie"]}),a.jsx("p",{className:"text-sm text-yellow-600",children:"Otrzymasz powiadomienie gdy usugodawca potwierdzi Twoj wizyt."})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-left mb-4",children:[a.jsxs("p",{className:"text-sm mb-1",children:[a.jsx("strong",{children:"Data:"})," ",_," ",b.month]}),a.jsxs("p",{className:"text-sm mb-1",children:[a.jsx("strong",{children:"Godzina:"})," ",k]}),a.jsxs("p",{className:"text-sm mb-1",children:[a.jsx("strong",{children:"Usugi:"})," ",g.map(X=>X.name).join(", ")]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"cznie:"})," ",V," z"]})]}),a.jsx("button",{onClick:()=>{I(!1),x([]),T(null),C(null),n("Rezerwacja wysana! Czekaj na potwierdzenie.","success")},className:"w-full py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90",children:"OK, rozumiem"})]})})})]})},Ys="conversations",zd="messages",n_=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),Or={async getOrCreateConversation(t,e,n,r,s,o,l){try{const h=Ft(At(Ie,Ys),Et("providerId","==",r),Et("clientId","==",t)),f=await Dn(h);if(!f.empty)return f.docs[0].data();const m=n_(),g=new Date().toISOString(),x={id:m,participants:[t,s],participantNames:{[t]:e,[s]:o},participantAvatars:{[t]:n||"",[s]:l||""},providerId:r,providerOwnerId:s,clientId:t,lastMessage:"",lastMessageAt:g,lastMessageSenderId:"",unreadCount:{[t]:0,[s]:0},createdAt:g};return await ll(ct(Ie,Ys,m),x),x}catch(h){throw console.error("getOrCreateConversation error:",h),h}},async getConversations(t){try{const e=Ft(At(Ie,Ys),Et("participants","array-contains",t));return(await Dn(e)).docs.map(s=>s.data()).sort((s,o)=>new Date(o.lastMessageAt).getTime()-new Date(s.lastMessageAt).getTime())}catch(e){return console.error("getConversations error:",e),[]}},async getConversationsByProvider(t){try{const e=Ft(At(Ie,Ys),Et("providerId","==",t));return(await Dn(e)).docs.map(s=>s.data()).sort((s,o)=>new Date(o.lastMessageAt).getTime()-new Date(s.lastMessageAt).getTime())}catch(e){return console.error("getConversationsByProvider error:",e),[]}},subscribeToConversations(t,e){const n=Ft(At(Ie,Ys),Et("participants","array-contains",t));return qo(n,r=>{const s=r.docs.map(o=>o.data());s.sort((o,l)=>new Date(l.lastMessageAt).getTime()-new Date(o.lastMessageAt).getTime()),e(s)})},subscribeToProviderConversations(t,e){const n=Ft(At(Ie,Ys),Et("providerId","==",t));return qo(n,r=>{const s=r.docs.map(o=>o.data());s.sort((o,l)=>new Date(l.lastMessageAt).getTime()-new Date(o.lastMessageAt).getTime()),e(s)})},async getMessages(t){try{const e=Ft(At(Ie,zd),Et("conversationId","==",t));return(await Dn(e)).docs.map(s=>s.data()).sort((s,o)=>new Date(s.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(e){return console.error("getMessages error:",e),[]}},subscribeToMessages(t,e){const n=Ft(At(Ie,zd),Et("conversationId","==",t));return qo(n,r=>{const s=r.docs.map(o=>o.data());s.sort((o,l)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime()),e(s)})},async sendMessage(t,e,n,r,s,o){try{const l=n_(),h=new Date().toISOString(),f={id:l,conversationId:t,senderId:e,senderName:n,senderAvatar:r||"",text:s,createdAt:h,read:!1};await ll(ct(Ie,zd,l),f);const m=ct(Ie,Ys,t),g=await ol(m);if(g.exists()){const _={...g.data().unreadCount};_[o]=(_[o]||0)+1,await Ts(m,{lastMessage:s,lastMessageAt:h,lastMessageSenderId:e,unreadCount:_})}return f}catch(l){throw console.error("sendMessage error:",l),l}},async markAsRead(t,e){try{const n=Ft(At(Ie,zd),Et("conversationId","==",t)),s=(await Dn(n)).docs.filter(h=>{const f=h.data();return f.senderId!==e&&!f.read}).map(h=>Ts(h.ref,{read:!0}));await Promise.all(s);const o=ct(Ie,Ys,t),l=await ol(o);if(l.exists()){const f={...l.data().unreadCount};f[e]=0,await Ts(o,{unreadCount:f})}}catch(n){console.error("markAsRead error:",n)}},async countUnread(t){try{return(await this.getConversations(t)).reduce((n,r)=>n+(r.unreadCount[t]||0),0)}catch(e){return console.error("countUnread error:",e),0}},subscribeToUnreadCount(t,e){return this.subscribeToConversations(t,n=>{const r=n.reduce((s,o)=>s+(o.unreadCount[t]||0),0);e(r)})}},wD=()=>{const{user:t}=Yt(),e=Nr(),[n]=P1(),[r,s]=D.useState([]),[o,l]=D.useState(null),[h,f]=D.useState([]),[m,g]=D.useState(""),[x,_]=D.useState(""),[T,k]=D.useState(!0),[C,A]=D.useState(!1),E=D.useRef(null);D.useEffect(()=>{(async()=>{const N=n.get("providerId");if(!(!N||!(t!=null&&t.id)))try{const b=await Kt.getById(N);if(!b)return;const z=await Or.getOrCreateConversation(t.id,t.username||"Uytkownik",t.avatar||"",b.id,b.ownerId,b.name,b.image||"");l(z)}catch(b){console.error("Error initializing conversation:",b)}})()},[n,t]),D.useEffect(()=>{if(!(t!=null&&t.id)){k(!1);return}const R=Or.subscribeToConversations(t.id,N=>{s(N),k(!1)});return()=>R()},[t==null?void 0:t.id]),D.useEffect(()=>{if(!o||!(t!=null&&t.id))return;Or.markAsRead(o.id,t.id);const R=Or.subscribeToMessages(o.id,N=>{f(N)});return()=>R()},[o,t==null?void 0:t.id]),D.useEffect(()=>{var R;(R=E.current)==null||R.scrollIntoView({behavior:"smooth"})},[h]);const S=async()=>{if(!(!m.trim()||!o||!(t!=null&&t.id))){A(!0);try{const R=o.participants.find(N=>N!==t.id)||"";await Or.sendMessage(o.id,t.id,t.username||"Uytkownik",t.avatar||"",m.trim(),R),g("")}catch(R){console.error("Error sending message:",R)}finally{A(!1)}}},I=R=>{if(!(t!=null&&t.id))return{name:"Nieznany",avatar:""};const N=R.participants.find(b=>b!==t.id)||"";return{name:R.participantNames[N]||"Nieznany",avatar:R.participantAvatars[N]||""}},H=R=>{const N=new Date(R),z=new Date().getTime()-N.getTime(),M=Math.floor(z/6e4),V=Math.floor(z/36e5),$=Math.floor(z/864e5);return M<1?"Teraz":M<60?`${M} min`:V<24?`${V}h`:$<7?`${$}d`:N.toLocaleDateString("pl-PL")},O=r.filter(R=>I(R).name.toLowerCase().includes(x.toLowerCase()));return t?T?a.jsx("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center",children:a.jsx(ut,{className:"w-12 h-12 animate-spin text-primary"})}):a.jsx("div",{className:"min-h-screen pt-20 pb-0",children:a.jsx("div",{className:"max-w-6xl mx-auto px-6",children:a.jsxs("div",{className:"h-[calc(100vh-120px)] flex bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:`w-full md:w-80 lg:w-96 border-r border-gray-100 flex flex-col ${o?"hidden md:flex":""}`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-100",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Wiadomoci"}),a.jsxs("div",{className:"relative",children:[a.jsx(ku,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Szukaj...",value:x,onChange:R=>_(R.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:O.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(Yr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"Brak wiadomoci"}),a.jsx("p",{className:"text-sm mt-1",children:"Napisz do usugodawcy ze strony jego profilu"})]}):O.map(R=>{const N=I(R),b=t!=null&&t.id&&R.unreadCount[t.id]||0;return a.jsx("div",{onClick:()=>l(R),className:`p-4 border-b border-gray-50 cursor-pointer transition-colors ${(o==null?void 0:o.id)===R.id?"bg-primary/10":"hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[N.avatar?a.jsx("img",{src:N.avatar,alt:N.name,className:"w-12 h-12 rounded-full object-cover"}):a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white font-bold",children:N.name.charAt(0).toUpperCase()}),b>0&&a.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:b})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:N.name}),a.jsx("span",{className:"text-xs text-gray-500",children:H(R.lastMessageAt)})]}),a.jsx("p",{className:`text-sm truncate ${b>0?"font-medium text-gray-900":"text-gray-500"}`,children:R.lastMessage||"Brak wiadomoci"})]})]})},R.id)})})]}),o?a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center gap-3",children:[a.jsx("button",{onClick:()=>l(null),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(eu,{className:"w-5 h-5"})}),(()=>{const R=I(o);return a.jsxs(a.Fragment,{children:[R.avatar?a.jsx("img",{src:R.avatar,alt:R.name,className:"w-10 h-10 rounded-full object-cover"}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white font-bold",children:R.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:R.name}),a.jsx("div",{className:"text-xs text-gray-500",children:"Usugodawca"})]})]})})()]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[h.length===0?a.jsxs("div",{className:"text-center text-gray-500 py-8",children:[a.jsx("p",{children:"Rozpocznij rozmow"}),a.jsx("p",{className:"text-sm",children:"Napisz do usugodawcy"})]}):h.map(R=>{const N=R.senderId===(t==null?void 0:t.id);return a.jsx("div",{className:`flex ${N?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2 ${N?"bg-gradient-to-r from-primary to-secondary text-white":"bg-white text-gray-900 shadow-sm"}`,children:[a.jsx("p",{children:R.text}),a.jsx("div",{className:`text-xs mt-1 ${N?"text-white/70":"text-gray-400"}`,children:H(R.createdAt)})]})},R.id)}),a.jsx("div",{ref:E})]}),a.jsx("div",{className:"p-4 border-t border-gray-100 bg-white",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"text",value:m,onChange:R=>g(R.target.value),onKeyPress:R=>R.key==="Enter"&&S(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary"}),a.jsx("button",{onClick:S,disabled:!m.trim()||C,className:"p-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:C?a.jsx(ut,{className:"w-5 h-5 animate-spin"}):a.jsx(Qh,{className:"w-5 h-5"})})]})})]}):a.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx(Yr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("p",{className:"text-lg",children:"Wybierz konwersacj"}),a.jsx("p",{className:"text-sm",children:"lub napisz do usugodawcy z jego profilu"})]})})]})})}):a.jsx("div",{className:"min-h-screen pt-24 pb-12",children:a.jsx("div",{className:"max-w-4xl mx-auto px-6",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[a.jsx(Yr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Zaloguj si"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Musisz by zalogowany, aby korzysta z wiadomoci"}),a.jsx("button",{onClick:()=>e("/auth?mode=login"),className:"px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold",children:"Zaloguj si"})]})})})},_D=()=>{const{user:t}=Yt(),{showToast:e}=ar(),n=Nr(),[r,s]=D.useState([]),[o,l]=D.useState(!0),[h,f]=D.useState("all"),[m,g]=D.useState("all");D.useEffect(()=>{if(!t||!t.id){console.log("NotificationsPage: No user or user.id"),l(!1);return}console.log("NotificationsPage: Subscribing for user",t.id);const O=Nn.subscribe(t.id,R=>{console.log("NotificationsPage: Got notifications",R.length),s(R),l(!1)});return()=>O()},[t]);const x=async O=>{try{await Nn.markAsRead(O)}catch{e("Bd oznaczania jako przeczytane","error")}},_=async()=>{if(!(!t||!t.id))try{await Nn.markAllAsRead(t.id),e("Wszystkie oznaczone jako przeczytane","success")}catch{e("Bd oznaczania powiadomie","error")}},T=async O=>{try{await Nn.delete(O),e("Powiadomienie usunite","success")}catch{e("Bd usuwania powiadomienia","error")}},k=async()=>{if(!(!t||!t.id)&&confirm("Czy na pewno chcesz usun wszystkie powiadomienia?"))try{await Nn.deleteAllByUser(t.id),e("Wszystkie powiadomienia usunite","success")}catch{e("Bd usuwania powiadomie","error")}},C=O=>{var R,N;x(O.id),(R=O.data)!=null&&R.bookingId?n("/profil"):O.type==="new_message"?n("/wiadomosci"):O.type==="new_review"&&((N=O.data)!=null&&N.providerId)&&n(`/uslugodawcy/profil/${O.data.providerId}`)},A=O=>{switch(O){case"booking_request":case"booking_confirmed":case"booking_cancelled":case"booking_completed":case"booking_reminder":return a.jsx(Un,{className:"w-5 h-5"});case"new_message":return a.jsx(Yr,{className:"w-5 h-5"});case"new_review":return a.jsx(Br,{className:"w-5 h-5"});default:return a.jsx(Ni,{className:"w-5 h-5"})}},E=O=>{switch(O){case"booking_request":return"bg-blue-100 text-blue-600";case"booking_confirmed":return"bg-green-100 text-green-600";case"booking_cancelled":return"bg-red-100 text-red-600";case"booking_completed":return"bg-purple-100 text-purple-600";case"booking_reminder":return"bg-yellow-100 text-yellow-600";case"new_message":return"bg-indigo-100 text-indigo-600";case"new_review":return"bg-amber-100 text-amber-600";default:return"bg-gray-100 text-gray-600"}},S=O=>{const R=new Date(O),b=new Date().getTime()-R.getTime(),z=Math.floor(b/6e4),M=Math.floor(b/36e5),V=Math.floor(b/864e5);return z<1?"Teraz":z<60?`${z} min temu`:M<24?`${M}h temu`:V===1?"Wczoraj":V<7?`${V} dni temu`:R.toLocaleDateString("pl-PL")},I=r.filter(O=>!(h==="unread"&&O.read||m!=="all"&&(m==="booking"&&!O.type.startsWith("booking")||m==="message"&&O.type!=="new_message"||m==="system"&&O.type!=="system"))),H=r.filter(O=>!O.read).length;return o?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx(ut,{className:"w-8 h-8 animate-spin text-primary"})}):t?a.jsx("div",{className:"min-h-screen bg-gray-50 pt-8 pb-16",children:a.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Powiadomienia"}),a.jsx("p",{className:"text-gray-600",children:H>0?`${H} nieprzeczytanych`:"Wszystkie przeczytane"})]}),a.jsx("div",{className:"flex items-center gap-2",children:H>0&&a.jsxs("button",{onClick:_,className:"px-4 py-2 text-sm font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:[a.jsx(St,{className:"w-4 h-4 inline mr-1"}),"Przeczytaj wszystkie"]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>f("all"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${h==="all"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:"Wszystkie"}),a.jsxs("button",{onClick:()=>f("unread"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${h==="unread"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:["Nieprzeczytane (",H,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tx,{className:"w-4 h-4 text-gray-400"}),a.jsxs("select",{value:m,onChange:O=>g(O.target.value),className:"bg-transparent text-sm text-gray-600 focus:outline-none cursor-pointer",children:[a.jsx("option",{value:"all",children:"Wszystkie typy"}),a.jsx("option",{value:"booking",children:"Rezerwacje"}),a.jsx("option",{value:"message",children:"Wiadomoci"}),a.jsx("option",{value:"system",children:"Systemowe"})]})]}),r.length>0&&a.jsx("button",{onClick:k,className:"ml-auto text-sm text-red-500 hover:text-red-600",children:"Usu wszystkie"})]})}),a.jsx("div",{className:"space-y-3",children:I.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[a.jsx(Ni,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak powiadomie"}),a.jsx("p",{className:"text-gray-500",children:h==="unread"?"Wszystkie powiadomienia zostay przeczytane":"Nie masz jeszcze adnych powiadomie"})]}):I.map(O=>a.jsxs("div",{className:`bg-white rounded-xl shadow-sm p-4 flex items-start gap-4 transition-all hover:shadow-md cursor-pointer ${O.read?"":"border-l-4 border-primary"}`,onClick:()=>C(O),children:[a.jsx("div",{className:`p-3 rounded-xl ${E(O.type)}`,children:A(O.type)}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:`font-semibold ${O.read?"text-gray-700":"text-gray-900"}`,children:[Nn.getIcon(O.type)," ",O.title]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.message}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:S(O.createdAt)})]}),a.jsxs("div",{className:"flex items-center gap-1 ml-4",onClick:R=>R.stopPropagation(),children:[!O.read&&a.jsx("button",{onClick:()=>x(O.id),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Oznacz jako przeczytane",children:a.jsx(St,{className:"w-4 h-4 text-gray-400"})}),a.jsx("button",{onClick:()=>T(O.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:a.jsx(Eu,{className:"w-4 h-4 text-gray-400 hover:text-red-500"})})]})]})})]},O.id))})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ni,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Zaloguj si"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Zaloguj si, aby zobaczy powiadomienia"}),a.jsx(ke,{to:"/auth",className:"text-primary hover:underline",children:"Przejd do logowania"})]})})},bD=()=>{const t=[{icon:cl,title:"Pasja",description:"Kochamy to co robimy i wkadamy serce w kady aspekt naszej platformy."},{icon:Yh,title:"Spoeczno",description:"Budujemy mosty midzy specjalistami a klientami, tworzc siln spoeczno."},{icon:Tu,title:"Zaufanie",description:"Bezpieczestwo i wiarygodno to fundamenty naszej dziaalnoci."},{icon:W5,title:"Innowacja",description:"Cigle rozwijamy platform, by oferowa najlepsze dowiadczenia."}],e=[{value:"10,000+",label:"Zadowolonych klientw"},{value:"500+",label:"Specjalistw"},{value:"25,000+",label:"Wykonanych usug"},{value:"4.9",label:"rednia ocena"}],n=[{name:"Mykyta Ivchenko",role:"Co-Founder & Developer",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200"},{name:"Grzegorz Rychlicki",role:"Co-Founder & CEO",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200"},{name:"Jakub Biaasik",role:"Co-Founder & CTO",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=200"}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"O nas"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"ToMyHomeApp to platforma czca profesjonalnych specjalistw beauty i wellness z klientami szukajcymi usug w zaciszu wasnego domu."})]})}),a.jsx("section",{className:"py-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 text-primary rounded-full text-sm font-semibold mb-6",children:[a.jsx($5,{className:"w-4 h-4"}),"Nasza misja"]}),a.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Demokratyzujemy dostp do profesjonalnych usug beauty"}),a.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:"Wierzymy, e kady zasuguje na profesjonaln pielgnacj bez wychodzenia z domu. Nasza platforma powstaa z myl o wygodzie klientw i rozwoju specjalistw."}),a.jsx("p",{className:"text-gray-600 leading-relaxed",children:"czymy najlepszych specjalistw z klientami, zapewniajc bezpieczestwo, wygod i najwysz jako usug. Od fryzjerstwa po masae - wszystko dostpne na wycignicie rki."})]}),a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=600",alt:"Nasza misja",className:"rounded-2xl shadow-xl"}),a.jsx("div",{className:"absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(qh,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-900",children:"Od 2024"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Na rynku"})]})]})})]})]})})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((r,s)=>a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-4xl font-bold text-primary mb-2",children:r.value}),a.jsx("p",{className:"text-gray-600",children:r.label})]},s))})})}),a.jsx("section",{className:"py-16",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Nasze wartoci"}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Kierujemy si zasadami, ktre pomagaj nam tworzy lepsz platform dla wszystkich."})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((r,s)=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4",children:a.jsx(r.icon,{className:"w-6 h-6 text-primary"})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:r.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:r.description})]},s))})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Nasz zesp"}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Poznaj ludzi, ktrzy tworz ToMyHomeApp i dbaj o Twoje dowiadczenia."})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-3xl mx-auto",children:n.map((r,s)=>a.jsxs("div",{className:"text-center",children:[a.jsx("img",{src:r.image,alt:r.name,className:"w-32 h-32 rounded-full mx-auto mb-4 object-cover"}),a.jsx("h3",{className:"font-bold text-lg",children:r.name}),a.jsx("p",{className:"text-gray-500",children:r.role})]},s))})]})}),a.jsx("section",{className:"py-16 bg-gradient-to-r from-primary to-secondary text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Docz do nas!"}),a.jsx("p",{className:"text-white/90 mb-8 max-w-2xl mx-auto",children:"Zosta czci naszej spoecznoci - jako klient lub specjalista."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx("a",{href:"/uslugodawcy",className:"px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Znajd specjalist"}),a.jsx("a",{href:"/auth?mode=register&type=provider",className:"px-8 py-3 bg-white/20 text-white font-semibold rounded-xl hover:bg-white/30 transition-all",children:"Zosta specjalist"})]})]})})]})},jD=()=>{const t=[{icon:cl,title:"Ubezpieczenie zdrowotne",description:"Peny pakiet medyczny dla Ciebie i rodziny"},{icon:X5,title:"Elastyczna praca",description:"Hybrydowy model pracy - biuro lub zdalnie"},{icon:Yh,title:"wietny zesp",description:"Pracuj z pasjonatami technologii i beauty"},{icon:S5,title:"Benefity",description:"Karta sportowa, owocowe wtorki, integracje"}],e=[{title:"Senior Frontend Developer",department:"Engineering",location:"Pozna / Remote",type:"Peny etat",description:"Szukamy dowiadczonego frontend developera do rozwoju naszej platformy React."},{title:"Product Designer",department:"Design",location:"Pozna / Remote",type:"Peny etat",description:"Docz do zespou designu i twrz pikne interfejsy dla naszych uytkownikw."},{title:"Customer Success Manager",department:"Operations",location:"Pozna",type:"Peny etat",description:"Pomagaj naszym specjalistom rozwija ich biznesy na platformie."},{title:"Marketing Specialist",department:"Marketing",location:"Pozna / Remote",type:"Peny etat",description:"Twrz kampanie marketingowe i rozwijaj nasz obecno w social media."}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Kariera"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Docz do zespou, ktry zmienia bran beauty i wellness w Polsce. Szukamy talentw, ktre pomog nam rosn!"})]})}),a.jsx("section",{className:"py-16",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Dlaczego warto z nami pracowa?"}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Oferujemy nie tylko prac, ale moliwo rozwoju w dynamicznym startupie."})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((n,r)=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center",children:[a.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(n.icon,{className:"w-7 h-7 text-primary"})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:n.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:n.description})]},r))})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Otwarte stanowiska"}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Znajd swoj wymarzon rol i docz do naszego zespou."})]}),a.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:e.map((n,r)=>a.jsx("div",{className:"bg-gray-50 p-6 rounded-2xl hover:shadow-md transition-shadow cursor-pointer group",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary text-xs font-semibold rounded-full",children:n.department})}),a.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-primary transition-colors",children:n.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-3",children:n.description}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Es,{className:"w-4 h-4"}),n.location]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ln,{className:"w-4 h-4"}),n.type]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold group-hover:translate-x-2 transition-transform",children:["Aplikuj",a.jsx(nu,{className:"w-5 h-5"})]})]})},r))})]})}),a.jsx("section",{className:"py-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[a.jsx(tu,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie znalaze odpowiedniej oferty?"}),a.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Wylij nam swoje CV, a odezwiemy si gdy pojawi si stanowisko odpowiadajce Twoim umiejtnociom."}),a.jsxs("a",{href:"mailto:kariera@tomyhomeapp.pl",className:"inline-flex items-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:["Wylij CV",a.jsx(nu,{className:"w-5 h-5"})]})]})})})]})},ND=()=>{const t={title:"Jak wybra idealnego fryzjera mobilnego? Kompletny przewodnik",excerpt:"Dowiedz si, na co zwraca uwag przy wyborze specjalisty, ktry przyjedzie do Twojego domu. Porady ekspertw i wskazwki od naszych najlepszych fryzjerw.",image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800",author:"Anna Kowalska",date:"20 grudnia 2024",readTime:"8 min",category:"Porady"},e=[{title:"5 trendw w manicure na 2025 rok",excerpt:"Poznaj najgortsze trendy w stylizacji paznokci, ktre bd krlowa w nadchodzcym roku.",image:"https://images.unsplash.com/photo-1604654894610-df63bc536371?w=400",author:"Marta Winiewska",date:"18 grudnia 2024",readTime:"5 min",category:"Trendy"},{title:"Masa relaksacyjny w domu - co przygotowa?",excerpt:"Lista rzeczy, ktre warto mie pod rk przed wizyt masaysty w Twoim domu.",image:"https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=400",author:"Tomasz Zieliski",date:"15 grudnia 2024",readTime:"4 min",category:"Porady"},{title:"Jak zosta specjalist na ToMyHomeApp?",excerpt:"Przewodnik krok po kroku dla profesjonalistw, ktrzy chc doczy do naszej platformy.",image:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=400",author:"Piotr Nowak",date:"12 grudnia 2024",readTime:"6 min",category:"Dla specjalistw"},{title:"Pielgnacja wosw zim - porady eksperta",excerpt:"Jak dba o wosy w chodne miesice? Nasze specjalistki dziel si sekretami.",image:"https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=400",author:"Karolina Maj",date:"10 grudnia 2024",readTime:"5 min",category:"Porady"},{title:"Historia sukcesu: Od maego salonu do 100 klientw miesicznie",excerpt:"Poznaj histori Ewy, ktra dziki ToMyHomeApp rozwina swj biznes.",image:"https://images.unsplash.com/photo-1582095133179-bfd08e2fc6b3?w=400",author:"Ewa Szymaska",date:"8 grudnia 2024",readTime:"7 min",category:"Historie sukcesu"},{title:"Bezpieczestwo usug mobilnych - na co zwraca uwag?",excerpt:"Wskazwki dotyczce bezpieczestwa zarwno dla klientw, jak i specjalistw.",image:"https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=400",author:"Anna Kowalska",date:"5 grudnia 2024",readTime:"6 min",category:"Bezpieczestwo"}],n=["Wszystkie","Porady","Trendy","Dla specjalistw","Historie sukcesu","Bezpieczestwo"];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Blog"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Porady, inspiracje i nowoci ze wiata beauty i wellness. Bd na bieco z najnowszymi trendami!"})]})}),a.jsx("section",{className:"py-8 bg-white border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:n.map((r,s)=>a.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${s===0?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:r},s))})})}),a.jsx("section",{className:"py-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:a.jsxs("div",{className:"grid lg:grid-cols-2",children:[a.jsx("img",{src:t.image,alt:t.title,className:"w-full h-64 lg:h-full object-cover"}),a.jsxs("div",{className:"p-8 lg:p-12 flex flex-col justify-center",children:[a.jsx("span",{className:"inline-block px-3 py-1 bg-primary/10 text-primary text-sm font-semibold rounded-full w-fit mb-4",children:t.category}),a.jsx("h2",{className:"text-2xl lg:text-3xl font-bold mb-4",children:t.title}),a.jsx("p",{className:"text-gray-600 mb-6",children:t.excerpt}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-6",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(jr,{className:"w-4 h-4"}),t.author]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Un,{className:"w-4 h-4"}),t.date]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ln,{className:"w-4 h-4"}),t.readTime]})]}),a.jsxs("button",{className:"flex items-center gap-2 text-primary font-semibold hover:gap-3 transition-all",children:["Czytaj wicej",a.jsx(j5,{className:"w-5 h-5"})]})]})]})})})}),a.jsx("section",{className:"py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-8",children:"Najnowsze artykuy"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((r,s)=>a.jsxs("article",{className:"bg-white rounded-2xl shadow-sm overflow-hidden hover:shadow-md transition-shadow cursor-pointer group",children:[a.jsxs("div",{className:"relative overflow-hidden",children:[a.jsx("img",{src:r.image,alt:r.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),a.jsx("span",{className:"absolute top-4 left-4 px-3 py-1 bg-white/90 text-sm font-medium rounded-full",children:r.category})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"font-bold text-lg mb-2 group-hover:text-primary transition-colors",children:r.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:r.excerpt}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(jr,{className:"w-4 h-4"}),r.author]}),a.jsx("span",{children:r.readTime})]})]})]},s))})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie przegap adnego artykuu!"}),a.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Zapisz si do naszego newslettera i otrzymuj najnowsze porady i inspiracje prosto na swoj skrzynk."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center max-w-md mx-auto",children:[a.jsx("input",{type:"email",placeholder:"Twj email...",className:"flex-1 px-4 py-3 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"}),a.jsx("button",{className:"px-6 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Zapisz si"})]})]})})})]})},kD=()=>{const[t,e]=D.useState({name:"",email:"",subject:"",message:""}),[n,r]=D.useState(!1),[s,o]=D.useState(!1),l=async m=>{m.preventDefault(),r(!0),await new Promise(g=>setTimeout(g,1e3)),r(!1),o(!0),e({name:"",email:"",subject:"",message:""})},h=[{icon:Ri,title:"Email",value:"kontakt@tomyhomeapp.pl",link:"mailto:kontakt@tomyhomeapp.pl"},{icon:Aa,title:"Telefon",value:"+48 123 456 789",link:"tel:+48123456789"},{icon:Es,title:"Adres",value:"ul. Przykadowa 1, 61-001 Pozna",link:"https://maps.google.com"},{icon:ln,title:"Godziny pracy",value:"Pn-Pt: 9:00 - 17:00",link:null}],f=[{icon:z5,title:"Obsuga klienta",description:"Pomoc z rezerwacjami i kontem",email:"pomoc@tomyhomeapp.pl"},{icon:k5,title:"Dla specjalistw",description:"Pytania dotyczce wsppracy",email:"specjalisci@tomyhomeapp.pl"},{icon:Yr,title:"Media i PR",description:"Zapytania prasowe i wspprace",email:"media@tomyhomeapp.pl"}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Kontakt"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Masz pytania? Chtnie pomoemy! Skontaktuj si z nami w dogodny dla Ciebie sposb."})]})}),a.jsx("section",{className:"py-12 -mt-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:h.map((m,g)=>a.jsxs("a",{href:m.link||"#",className:`bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow ${m.link?"cursor-pointer":"cursor-default"}`,children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4",children:a.jsx(m.icon,{className:"w-6 h-6 text-primary"})}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:m.title}),a.jsx("p",{className:"text-gray-600",children:m.value})]},g))})})}),a.jsx("section",{className:"py-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Wylij wiadomo"}),s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Qh,{className:"w-8 h-8 text-green-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Wiadomo wysana!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Dzikujemy za kontakt. Odpowiemy najszybciej jak to moliwe."}),a.jsx("button",{onClick:()=>o(!1),className:"text-primary font-semibold hover:underline",children:"Wylij kolejn wiadomo"})]}):a.jsxs("form",{onSubmit:l,className:"space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),a.jsx("input",{type:"text",required:!0,value:t.name,onChange:m=>e({...t,name:m.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",placeholder:"Jan Kowalski"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",required:!0,value:t.email,onChange:m=>e({...t,email:m.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",placeholder:"jan@example.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temat"}),a.jsxs("select",{required:!0,value:t.subject,onChange:m=>e({...t,subject:m.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:[a.jsx("option",{value:"",children:"Wybierz temat"}),a.jsx("option",{value:"general",children:"Pytanie oglne"}),a.jsx("option",{value:"booking",children:"Problem z rezerwacj"}),a.jsx("option",{value:"account",children:"Problem z kontem"}),a.jsx("option",{value:"specialist",children:"Chc zosta specjalist"}),a.jsx("option",{value:"partnership",children:"Wsppraca biznesowa"}),a.jsx("option",{value:"other",children:"Inne"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wiadomo"}),a.jsx("textarea",{required:!0,rows:5,value:t.message,onChange:m=>e({...t,message:m.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 resize-none",placeholder:"Opisz swoje pytanie lub problem..."})]}),a.jsx("button",{type:"submit",disabled:n,className:"w-full py-3 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-xl hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:n?"Wysyanie...":a.jsxs(a.Fragment,{children:[a.jsx(Qh,{className:"w-5 h-5"}),"Wylij wiadomo"]})})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Dziay"}),a.jsx("div",{className:"space-y-4 mb-8",children:f.map((m,g)=>a.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(m.icon,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900",children:m.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-2",children:m.description}),a.jsx("a",{href:`mailto:${m.email}`,className:"text-primary font-medium hover:underline",children:m.email})]})]})},g))}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[a.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Nasza lokalizacja"}),a.jsx("div",{className:"h-64 bg-gray-100 rounded-xl overflow-hidden",children:a.jsx("iframe",{title:"Lokalizacja",width:"100%",height:"100%",style:{border:0},loading:"lazy",src:"https://www.openstreetmap.org/export/embed.html?bbox=16.90%2C52.40%2C16.95%2C52.42&layer=mapnik"})}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"ul. Przykadowa 1, 61-001 Pozna"})]})]})]})})})]})},TD=()=>{const[t,e]=D.useState("all"),[n,r]=D.useState(""),[s,o]=D.useState(null),l=[{id:"all",label:"Wszystkie",icon:Zo},{id:"client",label:"Dla klientw",icon:jr},{id:"specialist",label:"Dla specjalistw",icon:tu},{id:"payments",label:"Patnoci",icon:Kh},{id:"safety",label:"Bezpieczestwo",icon:Tu}],f=[{category:"client",question:"Jak zarezerwowa wizyt u specjalisty?",answer:"Aby zarezerwowa wizyt, wyszukaj interesujc Ci usug lub specjalist, wybierz odpowiedni termin z kalendarza i potwierd rezerwacj. Otrzymasz powiadomienie email z potwierdzeniem oraz przypomnienie przed wizyt."},{category:"client",question:"Czy mog anulowa rezerwacj?",answer:'Tak, moesz anulowa rezerwacj w dowolnym momencie. Zalecamy jednak anulowanie z minimum 24-godzinnym wyprzedzeniem, aby specjalista mg przyj innych klientw. Anulowanie moesz wykona w zakadce "Moje rezerwacje".'},{category:"client",question:"Jak dziaa usuga z dojazdem do domu?",answer:"Specjalici oferujcy usugi mobilne przyjedaj do Twojego domu z penym wyposaeniem. Przy rezerwacji podajesz swj adres, a specjalista potwierdza moliwo dojazdu. Niektrzy specjalici mog doliczy opat za dojazd."},{category:"client",question:"Co jeli nie jestem zadowolony z usugi?",answer:"Twoje zadowolenie jest dla nas najwaniejsze. Jeli usuga nie spenia Twoich oczekiwa, skontaktuj si z nami przez formularz kontaktowy w cigu 48 godzin. Rozpatrzymy kad reklamacj indywidualnie."},{category:"specialist",question:"Jak zosta specjalist na platformie?",answer:'Zarejestruj si wybierajc opcj "Konto specjalisty", uzupenij swj profil, dodaj usugi i zdjcia portfolio. Po weryfikacji Twoje konto zostanie aktywowane i bdziesz widoczny dla klientw.'},{category:"specialist",question:"Ile kosztuje konto specjalisty?",answer:"Rejestracja i podstawowe konto s cakowicie bezpatne. Pobieramy niewielk prowizj tylko od zrealizowanych rezerwacji. Oferujemy te plany Premium z dodatkowymi funkcjami promocyjnymi."},{category:"specialist",question:"Jak ustawi swoje godziny pracy?",answer:'W panelu specjalisty przejd do sekcji "Godziny pracy". Moesz ustawi godziny dla kadego dnia tygodnia osobno, a take blokowa konkretne daty gdy nie pracujesz.'},{category:"specialist",question:"Jak otrzymuj patnoci za usugi?",answer:"Patnoci s przetwarzane przez nasz platform. Po zrealizowanej usudze rodki trafiaj na Twoje konto w systemie. Moesz je wypaci na konto bankowe w dowolnym momencie (minimum 50 z)."},{category:"payments",question:"Jakie formy patnoci s akceptowane?",answer:"Akceptujemy patnoci kart (Visa, Mastercard), BLIK, szybkie przelewy oraz tradycyjne przelewy bankowe. Niektrzy specjalici akceptuj te patno gotwk na miejscu."},{category:"payments",question:"Kiedy nastpuje patno za usug?",answer:"Patno jest pobierana po potwierdzeniu rezerwacji przez specjalist. rodki s blokowane na Twoim koncie i przekazywane specjalicie po wykonaniu usugi."},{category:"payments",question:"Czy otrzymam faktur?",answer:"Tak, po kadej transakcji otrzymasz potwierdzenie patnoci na email. Jeli potrzebujesz faktury VAT, moesz j wygenerowa w panelu uytkownika lub poprosi o ni specjalist."},{category:"safety",question:"Czy specjalici s weryfikowani?",answer:"Tak, kady specjalista przechodzi proces weryfikacji tosamoci. Sprawdzamy dokumenty, certyfikaty i dowiadczenie. Dodatkowo system opinii pozwala klientom ocenia jako usug."},{category:"safety",question:"Jak chronione s moje dane osobowe?",answer:"Stosujemy najwysze standardy bezpieczestwa danych zgodne z RODO. Twoje dane s szyfrowane i nigdy nie s udostpniane osobom trzecim bez Twojej zgody. Wicej w naszej Polityce Prywatnoci."},{category:"safety",question:"Co zrobi w przypadku problemu podczas wizyty?",answer:"W nagych przypadkach skontaktuj si z nami przez formularz kontaktowy lub telefon. Nasz zesp wsparcia jest dostpny 7 dni w tygodniu i pomoe rozwiza kady problem."}].filter(m=>{const g=t==="all"||m.category===t,x=m.question.toLowerCase().includes(n.toLowerCase())||m.answer.toLowerCase().includes(n.toLowerCase());return g&&x});return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Czsto zadawane pytania"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto mb-8",children:"Znajd odpowiedzi na najczstsze pytania dotyczce naszej platformy."}),a.jsxs("div",{className:"max-w-xl mx-auto relative",children:[a.jsx(ku,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Szukaj pytania...",value:n,onChange:m=>r(m.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"})]})]})}),a.jsx("section",{className:"py-8 bg-white border-b sticky top-16 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:l.map(m=>a.jsxs("button",{onClick:()=>e(m.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${t===m.id?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(m.icon,{className:"w-4 h-4"}),m.label]},m.id))})})}),a.jsx("section",{className:"py-12",children:a.jsx("div",{className:"max-w-3xl mx-auto px-6",children:f.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Zo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak wynikw"}),a.jsx("p",{className:"text-gray-600",children:"Nie znaleziono pyta pasujcych do kryteriw. Sprbuj innych sw kluczowych."})]}):a.jsx("div",{className:"space-y-4",children:f.map((m,g)=>a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>o(s===g?null:g),className:"w-full px-6 py-5 text-left flex items-center justify-between gap-4",children:[a.jsx("span",{className:"font-semibold text-gray-900",children:m.question}),a.jsx(Zh,{className:`w-5 h-5 text-gray-400 transition-transform ${s===g?"rotate-180":""}`})]}),s===g&&a.jsx("div",{className:"px-6 pb-5",children:a.jsx("p",{className:"text-gray-600 leading-relaxed",children:m.answer})})]},g))})})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[a.jsx(Zo,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie znalaze odpowiedzi?"}),a.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Nasz zesp wsparcia chtnie odpowie na Twoje pytania. Skontaktuj si z nami!"}),a.jsx("a",{href:"/kontakt",className:"inline-flex items-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Skontaktuj si z nami"})]})})})]})},ED=()=>{const t="1 grudnia 2024",e=[{title:"1. Postanowienia oglne",content:`
        <p>1.1. Niniejszy Regulamin okrela zasady korzystania z platformy ToMyHomeApp, dostpnej pod adresem tomyhomeapp.pl.</p>
        <p>1.2. Wacicielem i operatorem platformy jest ToMyHomeApp Sp. z o.o. z siedzib w Poznaniu, ul. Przykadowa 1, 61-001 Pozna, wpisana do rejestru przedsibiorcw KRS pod numerem 0000000000.</p>
        <p>1.3. Korzystanie z platformy oznacza akceptacj niniejszego Regulaminu.</p>
        <p>1.4. Platforma umoliwia czenie Klientw ze Specjalistami wiadczcymi usugi z zakresu beauty i wellness.</p>
      `},{title:"2. Definicje",content:`
        <p><strong>Platforma</strong> - serwis internetowy ToMyHomeApp umoliwiajcy rezerwacj usug.</p>
        <p><strong>Klient</strong> - osoba fizyczna korzystajca z Platformy w celu rezerwacji usug.</p>
        <p><strong>Specjalista</strong> - osoba fizyczna lub prawna oferujca swoje usugi za porednictwem Platformy.</p>
        <p><strong>Usuga</strong> - wiadczenie oferowane przez Specjalist za porednictwem Platformy.</p>
        <p><strong>Rezerwacja</strong> - umowa o wiadczenie Usugi zawarta midzy Klientem a Specjalist.</p>
        <p><strong>Konto</strong> - indywidualne konto uytkownika na Platformie.</p>
      `},{title:"3. Rejestracja i Konto",content:`
        <p>3.1. Korzystanie z penej funkcjonalnoci Platformy wymaga utworzenia Konta.</p>
        <p>3.2. Rejestracja jest bezpatna i wymaga podania prawdziwych danych osobowych.</p>
        <p>3.3. Uytkownik zobowizuje si do zachowania poufnoci danych logowania.</p>
        <p>3.4. Jedno Konto moe by uywane wycznie przez jedn osob.</p>
        <p>3.5. Operator zastrzega sobie prawo do zawieszenia lub usunicia Konta w przypadku naruszenia Regulaminu.</p>
      `},{title:"4. Rezerwacje",content:`
        <p>4.1. Rezerwacja zostaje dokonana po wyborze Usugi, terminu i potwierdzeniu przez Specjalist.</p>
        <p>4.2. Klient otrzymuje potwierdzenie Rezerwacji drog elektroniczn.</p>
        <p>4.3. Anulowanie Rezerwacji jest moliwe zgodnie z polityk anulowania danego Specjalisty.</p>
        <p>4.4. Zalecamy anulowanie z minimum 24-godzinnym wyprzedzeniem.</p>
        <p>4.5. Niestawienie si na umwion wizyt bez uprzedniego anulowania moe skutkowa naliczeniem opaty.</p>
      `},{title:"5. Patnoci",content:`
        <p>5.1. Ceny Usug s okrelane przez Specjalistw i widoczne przy kadej ofercie.</p>
        <p>5.2. Platforma umoliwia patnoci online za porednictwem zaufanych operatorw patnoci.</p>
        <p>5.3. Patno jest pobierana po potwierdzeniu Rezerwacji przez Specjalist.</p>
        <p>5.4. W przypadku anulowania Rezerwacji, zwrot rodkw nastpuje zgodnie z polityk zwrotw.</p>
        <p>5.5. Platforma pobiera prowizj od Specjalistw za zrealizowane Rezerwacje.</p>
      `},{title:"6. Obowizki Specjalistw",content:`
        <p>6.1. Specjalista zobowizuje si do wiadczenia Usug zgodnie z opisem i najwysz starannoci.</p>
        <p>6.2. Specjalista ponosi pen odpowiedzialno za jako wiadczonych Usug.</p>
        <p>6.3. Specjalista zobowizuje si do posiadania wymaganych kwalifikacji i uprawnie.</p>
        <p>6.4. Specjalista zobowizuje si do przestrzegania zasad higieny i bezpieczestwa.</p>
        <p>6.5. Specjalista zobowizuje si do terminowego realizowania Rezerwacji.</p>
      `},{title:"7. Obowizki Klientw",content:`
        <p>7.1. Klient zobowizuje si do podawania prawdziwych danych przy Rezerwacji.</p>
        <p>7.2. Klient zobowizuje si do terminowego stawiania si na umwione wizyty.</p>
        <p>7.3. Klient zobowizuje si do informowania o wszelkich przeciwwskazaniach zdrowotnych.</p>
        <p>7.4. Klient zobowizuje si do traktowania Specjalisty z szacunkiem.</p>
        <p>7.5. Klient zobowizuje si do terminowej zapaty za Usugi.</p>
      `},{title:"8. Odpowiedzialno",content:`
        <p>8.1. Platforma peni rol porednika midzy Klientem a Specjalist.</p>
        <p>8.2. Platforma nie ponosi odpowiedzialnoci za jako Usug wiadczonych przez Specjalistw.</p>
        <p>8.3. Platforma nie ponosi odpowiedzialnoci za szkody wynike z dziaa Specjalistw.</p>
        <p>8.4. Wszelkie spory midzy Klientem a Specjalist powinny by rozwizywane bezporednio midzy stronami.</p>
        <p>8.5. Platforma moe poredniczy w rozwizywaniu sporw na prob stron.</p>
      `},{title:"9. Reklamacje",content:`
        <p>9.1. Reklamacje mona skada drog elektroniczn na adres: reklamacje@tomyhomeapp.pl.</p>
        <p>9.2. Reklamacja powinna zawiera opis problemu i dane kontaktowe.</p>
        <p>9.3. Reklamacje s rozpatrywane w terminie 14 dni roboczych.</p>
        <p>9.4. O wyniku rozpatrzenia reklamacji Uytkownik zostanie poinformowany drog elektroniczn.</p>
      `},{title:"10. Ochrona danych osobowych",content:`
        <p>10.1. Administratorem danych osobowych jest ToMyHomeApp Sp. z o.o.</p>
        <p>10.2. Dane osobowe s przetwarzane zgodnie z RODO i Polityk Prywatnoci.</p>
        <p>10.3. Uytkownik ma prawo dostpu do swoich danych, ich poprawiania i usunicia.</p>
        <p>10.4. Szczegowe informacje znajduj si w Polityce Prywatnoci.</p>
      `},{title:"11. Postanowienia kocowe",content:`
        <p>11.1. Operator zastrzega sobie prawo do zmiany Regulaminu.</p>
        <p>11.2. O zmianach Uytkownicy zostan poinformowani z 14-dniowym wyprzedzeniem.</p>
        <p>11.3. W sprawach nieuregulowanych stosuje si przepisy prawa polskiego.</p>
        <p>11.4. Spory bd rozstrzygane przez sd waciwy dla siedziby Operatora.</p>
        <p>11.5. Regulamin wchodzi w ycie z dniem publikacji na Platformie.</p>
      `}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Regulamin"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Zasady korzystania z platformy ToMyHomeApp"})]})}),a.jsx("section",{className:"py-12",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-8 flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:a.jsx(Un,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Ostatnia aktualizacja"}),a.jsx("p",{className:"font-semibold text-gray-900",children:t})]})]}),a.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:e.map((n,r)=>a.jsxs("div",{className:`p-6 ${r!==e.length-1?"border-b border-gray-100":""}`,children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[a.jsx(su,{className:"w-5 h-5 text-primary"}),n.title]}),a.jsx("div",{className:"prose prose-gray max-w-none text-gray-600 space-y-2",dangerouslySetInnerHTML:{__html:n.content}})]},r))}),a.jsxs("div",{className:"mt-8 bg-primary/5 rounded-2xl p-6 text-center",children:[a.jsx("p",{className:"text-gray-600 mb-2",children:"Masz pytania dotyczce regulaminu?"}),a.jsx("a",{href:"/kontakt",className:"text-primary font-semibold hover:underline",children:"Skontaktuj si z nami "})]})]})})]})},SD=()=>{const t="1 grudnia 2024",e=[{icon:la,title:"Szyfrowanie",description:"Wszystkie dane s szyfrowane SSL/TLS"},{icon:vr,title:"Transparentno",description:"Jasno informujemy o przetwarzaniu danych"},{icon:P5,title:"Minimalizacja",description:"Zbieramy tylko niezbdne dane"},{icon:Q5,title:"Twoje prawa",description:"Pena kontrola nad swoimi danymi"}],n=[{title:"1. Administrator danych",content:`
        <p>Administratorem Twoich danych osobowych jest:</p>
        <p><strong>ToMyHomeApp Sp. z o.o.</strong><br>
        ul. Przykadowa 1<br>
        61-001 Pozna<br>
        NIP: 0000000000<br>
        Email: dane@tomyhomeapp.pl</p>
      `},{title:"2. Jakie dane zbieramy?",content:`
        <p>Zbieramy nastpujce kategorie danych:</p>
        <ul>
          <li><strong>Dane identyfikacyjne:</strong> imi, nazwisko, adres email, numer telefonu</li>
          <li><strong>Dane adresowe:</strong> adres zamieszkania (dla usug z dojazdem)</li>
          <li><strong>Dane finansowe:</strong> informacje o patnociach (przetwarzane przez operatorw patnoci)</li>
          <li><strong>Dane techniczne:</strong> adres IP, informacje o urzdzeniu, pliki cookies</li>
          <li><strong>Dane o aktywnoci:</strong> historia rezerwacji, preferencje, opinie</li>
        </ul>
      `},{title:"3. Cele przetwarzania danych",content:`
        <p>Twoje dane przetwarzamy w celu:</p>
        <ul>
          <li>wiadczenia usug platformy i realizacji rezerwacji</li>
          <li>Komunikacji z uytkownikami (powiadomienia, przypomnienia)</li>
          <li>Obsugi patnoci i rozlicze</li>
          <li>Zapewnienia bezpieczestwa platformy</li>
          <li>Analizy i ulepszania usug</li>
          <li>Marketingu bezporedniego (za zgod)</li>
          <li>Wypeniania obowizkw prawnych</li>
        </ul>
      `},{title:"4. Podstawy prawne przetwarzania",content:`
        <p>Przetwarzamy dane na podstawie:</p>
        <ul>
          <li><strong>Art. 6 ust. 1 lit. a RODO</strong> - zgoda (np. na marketing)</li>
          <li><strong>Art. 6 ust. 1 lit. b RODO</strong> - wykonanie umowy (realizacja rezerwacji)</li>
          <li><strong>Art. 6 ust. 1 lit. c RODO</strong> - obowizek prawny (rachunkowo)</li>
          <li><strong>Art. 6 ust. 1 lit. f RODO</strong> - prawnie uzasadniony interes (bezpieczestwo)</li>
        </ul>
      `},{title:"5. Udostpnianie danych",content:`
        <p>Twoje dane mog by udostpniane:</p>
        <ul>
          <li><strong>Specjalistom</strong> - w zakresie niezbdnym do realizacji usugi</li>
          <li><strong>Operatorom patnoci</strong> - do przetwarzania transakcji</li>
          <li><strong>Dostawcom usug IT</strong> - hosting, analityka (na podstawie umw powierzenia)</li>
          <li><strong>Organom publicznym</strong> - gdy wymagaj tego przepisy prawa</li>
        </ul>
        <p>Nie sprzedajemy danych osobowych podmiotom trzecim.</p>
      `},{title:"6. Okres przechowywania danych",content:`
        <p>Dane przechowujemy przez okres:</p>
        <ul>
          <li><strong>Dane konta:</strong> do momentu usunicia konta + 30 dni</li>
          <li><strong>Historia rezerwacji:</strong> 5 lat (wymogi ksigowe)</li>
          <li><strong>Dane marketingowe:</strong> do cofnicia zgody</li>
          <li><strong>Logi systemowe:</strong> 12 miesicy</li>
          <li><strong>Cookies:</strong> zgodnie z ustawieniami przegldarki</li>
        </ul>
      `},{title:"7. Twoje prawa",content:`
        <p>Przysuguj Ci nastpujce prawa:</p>
        <ul>
          <li><strong>Prawo dostpu</strong> - moesz uzyska informacje o przetwarzanych danych</li>
          <li><strong>Prawo do sprostowania</strong> - moesz poprawi nieprawidowe dane</li>
          <li><strong>Prawo do usunicia</strong> - moesz da usunicia danych ("prawo do bycia zapomnianym")</li>
          <li><strong>Prawo do ograniczenia</strong> - moesz ograniczy przetwarzanie</li>
          <li><strong>Prawo do przenoszenia</strong> - moesz otrzyma dane w formacie elektronicznym</li>
          <li><strong>Prawo do sprzeciwu</strong> - moesz sprzeciwi si przetwarzaniu</li>
          <li><strong>Prawo do cofnicia zgody</strong> - w dowolnym momencie</li>
        </ul>
        <p>Aby skorzysta z tych praw, skontaktuj si z nami: dane@tomyhomeapp.pl</p>
      `},{title:"8. Pliki cookies",content:`
        <p>Uywamy plikw cookies do:</p>
        <ul>
          <li><strong>Niezbdne:</strong> funkcjonowanie strony, logowanie, bezpieczestwo</li>
          <li><strong>Analityczne:</strong> analiza ruchu, ulepszanie usug (Google Analytics)</li>
          <li><strong>Marketingowe:</strong> personalizacja reklam (za zgod)</li>
        </ul>
        <p>Moesz zarzdza cookies w ustawieniach przegldarki.</p>
      `},{title:"9. Bezpieczestwo danych",content:`
        <p>Stosujemy nastpujce zabezpieczenia:</p>
        <ul>
          <li>Szyfrowanie SSL/TLS wszystkich pocze</li>
          <li>Hashowanie hase (bcrypt)</li>
          <li>Regularne kopie zapasowe</li>
          <li>Kontrola dostpu do danych</li>
          <li>Monitoring bezpieczestwa 24/7</li>
          <li>Regularne audyty bezpieczestwa</li>
        </ul>
      `},{title:"10. Zmiany polityki",content:`
        <p>Zastrzegamy sobie prawo do aktualizacji niniejszej Polityki Prywatnoci.</p>
        <p>O istotnych zmianach poinformujemy uytkownikw drog elektroniczn z 14-dniowym wyprzedzeniem.</p>
        <p>Aktualna wersja jest zawsze dostpna na tej stronie.</p>
      `},{title:"11. Kontakt",content:`
        <p>W sprawach zwizanych z ochron danych osobowych moesz skontaktowa si z nami:</p>
        <p><strong>Email:</strong> dane@tomyhomeapp.pl<br>
        <strong>Adres:</strong> ToMyHomeApp Sp. z o.o., ul. Przykadowa 1, 61-001 Pozna</p>
        <p>Masz rwnie prawo wnie skarg do Prezesa Urzdu Ochrony Danych Osobowych.</p>
      `}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Polityka Prywatnoci"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Twoje dane s dla nas wane. Dowiedz si, jak je chronimy."})]})}),a.jsx("section",{className:"py-12 -mt-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.map((r,s)=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(r.icon,{className:"w-6 h-6 text-primary"})}),a.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:r.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:r.description})]},s))})})}),a.jsx("section",{className:"py-12",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-8 flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:a.jsx(Un,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Ostatnia aktualizacja"}),a.jsx("p",{className:"font-semibold text-gray-900",children:t})]})]}),a.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:n.map((r,s)=>a.jsxs("div",{className:`p-6 ${s!==n.length-1?"border-b border-gray-100":""}`,children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[a.jsx(Tu,{className:"w-5 h-5 text-primary"}),r.title]}),a.jsx("div",{className:"prose prose-gray max-w-none text-gray-600 [&>ul]:list-disc [&>ul]:pl-5 [&>ul]:space-y-1",dangerouslySetInnerHTML:{__html:r.content}})]},s))}),a.jsxs("div",{className:"mt-8 grid md:grid-cols-2 gap-4",children:[a.jsxs("a",{href:"mailto:dane@tomyhomeapp.pl",className:"bg-white rounded-2xl p-6 shadow-sm flex items-center gap-4 hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:a.jsx(Ri,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Masz pytania?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Napisz do nas: dane@tomyhomeapp.pl"})]})]}),a.jsxs("a",{href:"/profil",className:"bg-white rounded-2xl p-6 shadow-sm flex items-center gap-4 hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:a.jsx(Eu,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Usu swoje dane"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Zarzdzaj w ustawieniach konta"})]})]})]})]})})]})},PD=()=>{const t=[{icon:xg,title:"Chat na ywo",description:"Porozmawiaj z naszym konsultantem w czasie rzeczywistym",availability:"Pn-Pt: 9:00 - 20:00, Sob: 10:00 - 16:00",action:"Rozpocznij chat",primary:!0},{icon:Ri,title:"Email",description:"Wylij wiadomo, odpowiemy w cigu 24 godzin",availability:"pomoc@tomyhomeapp.pl",action:"Wylij email",href:"mailto:pomoc@tomyhomeapp.pl"},{icon:Aa,title:"Telefon",description:"Zadzwo do nas w godzinach pracy",availability:"+48 123 456 789",action:"Zadzwo",href:"tel:+48123456789"}],e=[{icon:Zo,title:"FAQ",description:"Odpowiedzi na najczstsze pytania",to:"/faq"},{icon:su,title:"Regulamin",description:"Zasady korzystania z platformy",to:"/regulamin"},{icon:su,title:"Polityka prywatnoci",description:"Jak chronimy Twoje dane",to:"/prywatnosc"}],n=[{title:"Jak zarezerwowa wizyt?",steps:["Wyszukaj usug lub specjalist","Wybierz odpowiedni termin z kalendarza","Potwierd rezerwacj i dokonaj patnoci","Otrzymaj potwierdzenie na email"]},{title:"Jak anulowa rezerwacj?",steps:["Zaloguj si na swoje konto",'Przejd do "Moje rezerwacje"','Znajd rezerwacj i kliknij "Anuluj"',"Potwierd anulowanie"]},{title:"Jak zmieni dane konta?",steps:["Zaloguj si na swoje konto","Kliknij w ikon profilu",'Wybierz "Ustawienia"',"Edytuj dane i zapisz zmiany"]}],r=[{problem:"Nie mog si zalogowa",solution:'Sprawd czy wpisujesz prawidowy email. Uyj opcji "Zapomniaem hasa" aby je zresetowa.'},{problem:"Nie otrzymaem potwierdzenia rezerwacji",solution:"Sprawd folder SPAM. Jeli wiadomoci tam nie ma, skontaktuj si z nami."},{problem:"Specjalista nie pojawi si na wizycie",solution:"Skontaktuj si z nami natychmiast. Pomoemy rozwiza sytuacj i zapewnimy zwrot rodkw."},{problem:"Chc zmieni termin wizyty",solution:"Anuluj obecn rezerwacj i utwrz now z innym terminem. Moesz te skontaktowa si ze specjalist."}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Centrum wsparcia"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Jestemy tu, aby Ci pomc. Wybierz preferowany sposb kontaktu lub znajd odpowied w naszych poradnikach."})]})}),a.jsx("section",{className:"py-12 -mt-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:t.map((s,o)=>a.jsxs("div",{className:`p-6 rounded-2xl ${s.primary?"bg-gradient-to-br from-primary to-secondary text-white":"bg-white shadow-sm"}`,children:[a.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center mb-4 ${s.primary?"bg-white/20":"bg-primary/10"}`,children:a.jsx(s.icon,{className:`w-7 h-7 ${s.primary?"text-white":"text-primary"}`})}),a.jsx("h3",{className:`text-xl font-bold mb-2 ${s.primary?"text-white":"text-gray-900"}`,children:s.title}),a.jsx("p",{className:`mb-3 ${s.primary?"text-white/80":"text-gray-600"}`,children:s.description}),a.jsxs("p",{className:`text-sm mb-4 flex items-center gap-2 ${s.primary?"text-white/70":"text-gray-500"}`,children:[a.jsx(ln,{className:"w-4 h-4"}),s.availability]}),a.jsxs("a",{href:s.href||"#",className:`inline-flex items-center gap-2 font-semibold ${s.primary?"text-white hover:underline":"text-primary hover:underline"}`,children:[s.action,a.jsx(nu,{className:"w-4 h-4"})]})]},o))})})}),a.jsx("section",{className:"py-12 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Przydatne linki"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:e.map((s,o)=>a.jsx(ke,{to:s.to,className:"p-6 bg-gray-50 rounded-2xl hover:bg-gray-100 transition-colors group",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(s.icon,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 group-hover:text-primary transition-colors",children:s.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:s.description})]})]})},o))})]})}),a.jsx("section",{className:"py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Poradniki krok po kroku"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map((s,o)=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-4",children:s.title}),a.jsx("ol",{className:"space-y-3",children:s.steps.map((l,h)=>a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"w-6 h-6 bg-primary/10 text-primary rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:h+1}),a.jsx("span",{className:"text-gray-600 text-sm",children:l})]},h))})]},o))})]})}),a.jsx("section",{className:"py-12 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Najczstsze problemy"}),a.jsx("div",{className:"max-w-3xl mx-auto space-y-4",children:r.map((s,o)=>a.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[a.jsxs("h3",{className:"font-bold text-gray-900 mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.problem]}),a.jsx("p",{className:"text-gray-600 pl-4",children:s.solution})]},o))})]})}),a.jsx("section",{className:"py-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[a.jsx(xg,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nadal potrzebujesz pomocy?"}),a.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Nasz zesp wsparcia jest dostpny 7 dni w tygodniu. Chtnie odpowiemy na wszystkie Twoje pytania!"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(ke,{to:"/kontakt",className:"inline-flex items-center justify-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:[a.jsx(Ri,{className:"w-5 h-5"}),"Napisz do nas"]}),a.jsxs("a",{href:"tel:+48123456789",className:"inline-flex items-center justify-center gap-2 px-8 py-3 bg-white/20 text-white font-semibold rounded-xl hover:bg-white/30 transition-all",children:[a.jsx(Aa,{className:"w-5 h-5"}),"+48 123 456 789"]})]})]})})})]})},ID=()=>{var l;const[t,e]=D.useState(!1),[n,r]=D.useState(!1),{user:s,logout:o}=Yt();return a.jsxs("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:[a.jsx("div",{className:"px-4 lg:px-8",children:a.jsxs("div",{className:"h-16 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{className:"lg:hidden p-2 bg-white rounded-lg border border-gray-200 hover:bg-gray-50",onClick:()=>e(!t),style:{backgroundColor:"white"},children:t?a.jsx(Ra,{className:"w-5 h-5 text-gray-700"}):a.jsx(M5,{className:"w-5 h-5 text-gray-700"})}),a.jsxs(ke,{to:"/biznes",className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),a.jsxs("div",{className:"hidden sm:block",children:[a.jsx("span",{className:"font-extrabold text-lg text-gray-900",children:"TOMYHOMEAPP"}),a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full",children:"BIZNES"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ke,{to:"/",className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",children:[a.jsx("span",{className:"hidden sm:inline",children:"Widok klienta"}),a.jsx("span",{className:"sm:hidden",children:""}),a.jsx("span",{children:""})]}),a.jsxs("button",{className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:[a.jsx(Ni,{className:"w-5 h-5"}),a.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:((l=s==null?void 0:s.username)==null?void 0:l.charAt(0).toUpperCase())||"U"})}),a.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:(s==null?void 0:s.username)||"Uytkownik"})]}),n&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-50",children:[a.jsxs(ke,{to:"/biznes/profil",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>r(!1),children:[a.jsx(jr,{className:"w-4 h-4"}),"Mj profil"]}),a.jsxs(ke,{to:"/biznes/ustawienia",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>r(!1),children:[a.jsx(Ex,{className:"w-4 h-4"}),"Ustawienia"]}),a.jsx("hr",{className:"my-2"}),a.jsxs("button",{onClick:()=>{o(),r(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[a.jsx(Gh,{className:"w-4 h-4"}),"Wyloguj si"]})]})]})]})]})}),t&&a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)})]})},CD=({isOpen:t=!0,onClose:e})=>{const n=es(),r=[{icon:D5,label:"Dashboard",to:"/biznes",exact:!0},{icon:tu,label:"Moje usugi",to:"/biznes/uslugi"},{icon:B5,label:"Dodaj usug",to:"/biznes/dodaj-usluge"},{icon:ln,label:"Godziny pracy",to:"/biznes/godziny-pracy"},{icon:Un,label:"Kalendarz",to:"/biznes/kalendarz"},{icon:Yr,label:"Wiadomoci",to:"/biznes/wiadomosci",badge:3},{icon:wk,label:"Statystyki",to:"/biznes/statystyki"}],s=[{icon:Ex,label:"Ustawienia",to:"/biznes/ustawienia"},{icon:Zo,label:"Pomoc",to:"/biznes/pomoc"}],o=(l,h=!1)=>h?n.pathname===l:n.pathname.startsWith(l);return a.jsxs(a.Fragment,{children:[t&&a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:e}),a.jsx("aside",{className:`
          fixed lg:sticky top-16 left-0 z-40
          w-64 h-[calc(100vh-64px)] bg-white border-r border-gray-200
          transform transition-transform duration-300 ease-in-out
          lg:translate-x-0
          ${t?"translate-x-0":"-translate-x-full"}
        `,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider px-3",children:"Menu gwne"})}),r.map(l=>a.jsxs(ke,{to:l.to,onClick:e,className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
                  transition-all duration-200
                  ${o(l.to,l.exact)?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                `,children:[a.jsx(l.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"flex-1",children:l.label}),l.badge&&a.jsx("span",{className:`
                    px-2 py-0.5 text-xs font-bold rounded-full
                    ${o(l.to,l.exact)?"bg-white/20 text-white":"bg-red-100 text-red-600"}
                  `,children:l.badge})]},l.to))]}),a.jsx("div",{className:"p-4 border-t border-gray-100",children:s.map(l=>a.jsxs(ke,{to:l.to,onClick:e,className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
                  transition-all duration-200
                  ${o(l.to)?"bg-gray-100 text-gray-900":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}
                `,children:[a.jsx(l.icon,{className:"w-5 h-5"}),a.jsx("span",{children:l.label})]},l.to))}),a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"p-4 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl text-white",children:[a.jsx("h4",{className:"font-bold mb-1",children:"Przejd na PRO"}),a.jsx("p",{className:"text-xs text-white/80 mb-3",children:"Odblokuj wszystkie funkcje i zwiksz widoczno"}),a.jsx("button",{className:"w-full py-2 bg-white text-emerald-600 rounded-lg text-sm font-semibold hover:bg-gray-50 transition-colors",children:"Sprawd ofert"})]})})]})})]})},zD=()=>{const{isAuthenticated:t,user:e}=Yt(),[n,r]=D.useState(!1),{pathname:s}=es();D.useEffect(()=>{window.scrollTo(0,0)},[s]);const o=(e==null?void 0:e.accountType)==="provider"||!!(e!=null&&e.businessName);return t?o?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(ID,{}),a.jsxs("div",{className:"flex",children:[a.jsx(CD,{isOpen:n,onClose:()=>r(!1)}),a.jsx("main",{className:"flex-1 min-h-[calc(100vh-64px)] p-4 lg:p-8",children:a.jsx(AS,{})})]})]}):a.jsx(fv,{to:"/",replace:!0}):a.jsx(fv,{to:"/auth?redirect=/biznes",replace:!0})},r_=()=>{const{user:t}=Yt(),{showToast:e}=ar(),[n,r]=D.useState({totalBookings:0,pendingBookings:0,completedBookings:0,revenue:0,thisMonthRevenue:0,rating:0,reviewsCount:0}),[s,o]=D.useState([]),[l,h]=D.useState(!1),[f,m]=D.useState(!0);D.useEffect(()=>{(async()=>{if(!t||!t.id){console.log("BusinessDashboard: No user or user.id"),m(!1);return}console.log("BusinessDashboard: Loading for user",t.id);try{const C=await Kt.getByOwner(t.id);if(console.log("BusinessDashboard: Found providers",C.length),C.length>0){h(!0);const A=C[0],E=await nr.getProviderStats(A.id);r({totalBookings:E.totalBookings,pendingBookings:E.pendingBookings,completedBookings:E.completedBookings,revenue:E.totalRevenue,thisMonthRevenue:E.thisMonthRevenue,rating:A.rating||0,reviewsCount:A.reviewsCount||0});const S=nr.subscribeToProviderBookings(A.id,I=>{const H=I.filter(O=>O.status==="pending"||O.status==="confirmed").slice(0,5);o(H)});return()=>S()}else h(!1)}catch(C){console.error("Bd adowania danych:",C)}finally{m(!1)}})()},[t]);const g=async k=>{try{await nr.confirm(k),e("Rezerwacja potwierdzona! ","success")}catch{e("Bd potwierdzania rezerwacji","error")}},x=async k=>{try{await nr.cancel(k,"provider"),e("Rezerwacja anulowana","info")}catch{e("Bd anulowania rezerwacji","error")}},_=[{title:"Rezerwacje",value:n.totalBookings,subtitle:`${n.pendingBookings} oczekuje`,icon:Un,color:"emerald"},{title:"Przychd",value:`${n.revenue} z`,subtitle:`${n.thisMonthRevenue} z ten miesic`,icon:ru,color:"blue"},{title:"Ukoczone",value:n.completedBookings,subtitle:"wizyt",icon:St,color:"purple"},{title:"Ocena",value:n.rating>0?n.rating.toFixed(1):"-",subtitle:n.reviewsCount>0?`${n.reviewsCount} opinii`:"brak opinii",icon:Br,color:"amber"}],T=k=>{switch(k){case"confirmed":return a.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Potwierdzona"});case"pending":return a.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full",children:"Oczekuje"});case"completed":return a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Zakoczona"});default:return null}};return f?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(ut,{className:"w-12 h-12 animate-spin text-emerald-500"})}):l?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Witaj, ",(t==null?void 0:t.username)||"Uytkowniku","! "]}),a.jsx("p",{className:"text-gray-600",children:"Oto przegld Twojego biznesu"})]}),a.jsxs(ke,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[a.jsx(bs,{className:"w-5 h-5"}),"Dodaj usug"]})]}),a.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:_.map((k,C)=>a.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm",children:[a.jsx("div",{className:"flex items-start justify-between mb-3",children:a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center bg-${k.color}-100`,children:a.jsx(k.icon,{className:`w-5 h-5 text-${k.color}-600`})})}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:k.value}),a.jsx("div",{className:"text-sm text-gray-500",children:k.subtitle})]},C))}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-5 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Nadchodzce rezerwacje"}),a.jsx(ke,{to:"/biznes/kalendarz",className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:"Zobacz wszystkie "})]})}),a.jsxs("div",{className:"divide-y divide-gray-100",children:[s.map(k=>a.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:k.clientName.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:k.clientName}),a.jsx("div",{className:"text-sm text-gray-500",children:k.serviceName})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600",children:k.date}),a.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[a.jsx(ln,{className:"w-3 h-3"}),k.time]})]}),k.status==="pending"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>g(k.id),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Potwierd",children:a.jsx(St,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>x(k.id),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Anuluj",children:a.jsx(Ra,{className:"w-4 h-4"})})]}),k.status==="confirmed"&&T(k.status)]})]},k.id)),s.length===0&&a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(Un,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"Brak nadchodzcych rezerwacji"}),a.jsx("p",{className:"text-sm mt-1",children:"Rezerwacje pojawi si tutaj, gdy klienci je zo"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Szybkie akcje"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(ke,{to:"/biznes/uslugi",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center",children:a.jsx(vr,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Zobacz swj profil"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Tak widz Ci klienci"})]})]}),a.jsxs(ke,{to:"/biznes/kalendarz",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Un,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Zarzdzaj kalendarzem"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Dostpno i godziny"})]})]}),a.jsxs(ke,{to:"/biznes/statystyki",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(bk,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Zobacz statystyki"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Analizuj swj biznes"})]})]})]})]})]})]}):a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(bs,{className:"w-12 h-12 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Witaj w ToMyHomeApp Biznes!"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Nie masz jeszcze profilu usugodawcy. Dodaj swoj pierwsz usug, aby zacz przyjmowa rezerwacje od klientw."}),a.jsxs(ke,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[a.jsx(bs,{className:"w-5 h-5"}),"Dodaj pierwsz usug"]}),a.jsxs("div",{className:"mt-12 grid md:grid-cols-3 gap-6 text-left",children:[a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center mb-4",children:a.jsx(bs,{className:"w-5 h-5"})}),a.jsx("h3",{className:"font-bold mb-2",children:"1. Dodaj usug"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Opisz swoj usug, ustal ceny i godziny pracy"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-4",children:a.jsx(vr,{className:"w-5 h-5"})}),a.jsx("h3",{className:"font-bold mb-2",children:"2. Bd widoczny"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Klienci znajd Ci w wyszukiwarce usug"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center mb-4",children:a.jsx(Un,{className:"w-5 h-5"})}),a.jsx("h3",{className:"font-bold mb-2",children:"3. Przyjmuj rezerwacje"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Zarzdzaj kalendarzem i rozwijaj biznes"})]})]})]})},AD=()=>{const{user:t}=Yt(),{showToast:e}=ar(),[n,r]=D.useState(null),[s,o]=D.useState(null),[l,h]=D.useState(!0),[f,m]=D.useState("");D.useEffect(()=>{g()},[t]);const g=async()=>{if(!(t!=null&&t.id)){h(!1);return}h(!0);try{const k=await Kt.getByOwner(t.id.toString());if(k.length>0){const C=k[0],A=C.services.map(E=>({id:E.id,name:E.name,description:E.description||"",price:E.price||0,duration:E.duration||"30 min",isActive:!0,category:E.category||"Inne"}));o(C.id),r({id:C.id,name:C.name,profession:C.profession||"",location:C.locationString||"",image:C.image||"",services:A,isActive:C.isActive})}}catch(k){console.error("Bd adowania profilu z Firebase:",k),e("Bd adowania danych","error")}finally{h(!1)}},x=async k=>{if(!n||!s)return;const C=n.services.map(A=>A.id===k?{...A,isActive:!A.isActive}:A);r({...n,services:C});try{await Kt.update(s,{services:C.map(A=>({id:A.id,name:A.name,description:A.description,price:A.price,duration:A.duration,category:A.category}))}),e("Status usugi zmieniony","success")}catch(A){console.error("Bd aktualizacji:",A),e("Bd aktualizacji","error"),g()}},_=async k=>{if(!n||!s)return;const C=n.services.filter(A=>A.id!==k);r({...n,services:C});try{await Kt.removeService(s,k),e("Usuga usunita","info")}catch(A){console.error("Bd usuwania:",A),e("Bd usuwania usugi","error"),g()}},T=(n==null?void 0:n.services.filter(k=>k.name.toLowerCase().includes(f.toLowerCase())))||[];return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):n?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Moje usugi"}),a.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoimi usugami i cenami"})]}),a.jsxs(ke,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[a.jsx(bs,{className:"w-5 h-5"}),"Dodaj usug"]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("img",{src:n.image||"https://via.placeholder.com/80",alt:n.name,className:"w-20 h-20 rounded-xl object-cover"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n.name}),a.jsx("p",{className:"text-gray-500",children:n.profession}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n.location})]}),a.jsxs(ke,{to:`/uslugodawcy/profil/${n.id}`,target:"_blank",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[a.jsx(vr,{className:"w-4 h-4"}),"Podgld profilu"]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Szukaj usugi...",value:f,onChange:k=>m(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(Tx,{className:"w-5 h-5"}),"Filtruj"]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-100",children:a.jsxs("h3",{className:"font-semibold text-gray-900",children:["Wszystkie usugi (",T.length,")"]})}),T.length===0?a.jsx("div",{className:"p-8 text-center text-gray-500",children:f?"Nie znaleziono usug":"Brak usug"}):a.jsx("div",{className:"divide-y divide-gray-100",children:T.map(k=>a.jsxs("div",{className:`p-4 flex items-center justify-between hover:bg-gray-50 transition-colors ${k.isActive?"":"opacity-60"}`,children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("button",{onClick:()=>x(k.id),className:`p-1 rounded transition-colors ${k.isActive?"text-emerald-500":"text-gray-400"}`,title:k.isActive?"Aktywna":"Nieaktywna",children:k.isActive?a.jsx(Z5,{className:"w-8 h-8"}):a.jsx(q5,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:k.name}),a.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:k.description||"Brak opisu"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right mr-4",children:[a.jsxs("div",{className:"flex items-center gap-1 text-gray-900 font-semibold",children:[a.jsx(ru,{className:"w-4 h-4"}),k.price," z"]}),a.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[a.jsx(ln,{className:"w-3 h-3"}),k.duration]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{e("Funkcja edycji w przygotowaniu","info")},className:"p-2 text-gray-500 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"Edytuj",children:a.jsx(V5,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{window.confirm("Czy na pewno chcesz usun t usug?")&&_(k.id)},className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:a.jsx(Eu,{className:"w-5 h-5"})})]})]})]},k.id))})]})]}):a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(bs,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Nie masz jeszcze usug"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Dodaj swoj pierwsz usug, aby klienci mogli j znale i zarezerwowa."}),a.jsxs(ke,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[a.jsx(bs,{className:"w-5 h-5"}),"Dodaj pierwsz usug"]})]})};function RD(t,e){const n=D.useRef(e);D.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const LD=1;function DD(t){return Object.freeze({__version:LD,map:t})}function MD(t,e){return Object.freeze({...t,...e})}const kk=D.createContext(null),Tk=kk.Provider;function Ek(){const t=D.useContext(kk);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function OD(t){function e(n,r){const{instance:s,context:o}=t(n).current;return D.useImperativeHandle(r,()=>s),n.children==null?null:kc.createElement(Tk,{value:o},n.children)}return D.forwardRef(e)}function VD(t){function e(n,r){const{instance:s}=t(n).current;return D.useImperativeHandle(r,()=>s),null}return D.forwardRef(e)}function UD(t,e){const n=D.useRef();D.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Sk(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var _g={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(f2,function(n){var r="1.9.4";function s(i){var c,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(c in v)i[c]=v[c]}return i}var o=Object.create||function(){function i(){}return function(c){return i.prototype=c,new i}}();function l(i,c){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var p=d.call(arguments,2);return function(){return i.apply(c,p.length?p.concat(d.call(arguments)):arguments)}}var h=0;function f(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function m(i,c,d){var p,v,j,W;return W=function(){p=!1,v&&(j.apply(d,v),v=!1)},j=function(){p?v=arguments:(i.apply(d,arguments),setTimeout(W,c),p=!0)},j}function g(i,c,d){var p=c[1],v=c[0],j=p-v;return i===p&&d?i:((i-v)%j+j)%j+v}function x(){return!1}function _(i,c){if(c===!1)return i;var d=Math.pow(10,c===void 0?6:c);return Math.round(i*d)/d}function T(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function k(i){return T(i).split(/\s+/)}function C(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?o(i.options):{});for(var d in c)i.options[d]=c[d];return i.options}function A(i,c,d){var p=[];for(var v in i)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(i[v]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function S(i,c){return i.replace(E,function(d,p){var v=c[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(c)),v})}var I=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function H(i,c){for(var d=0;d<i.length;d++)if(i[d]===c)return d;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var N=0;function b(i){var c=+new Date,d=Math.max(0,16-(c-N));return N=c+d,window.setTimeout(i,d)}var z=window.requestAnimationFrame||R("RequestAnimationFrame")||b,M=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function V(i,c,d){if(d&&z===b)i.call(c);else return z.call(window,l(i,c))}function $(i){i&&M.call(window,i)}var U={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:f,throttle:m,wrapNum:g,falseFn:x,formatNum:_,trim:T,splitWords:k,setOptions:C,getParamString:A,template:S,isArray:I,indexOf:H,emptyImageUrl:O,requestFn:z,cancelFn:M,requestAnimFrame:V,cancelAnimFrame:$};function Te(){}Te.extend=function(i){var c=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=c.__super__=this.prototype,p=o(d);p.constructor=c,c.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(c[v]=this[v]);return i.statics&&s(c,i.statics),i.includes&&(fe(i.includes),s.apply(null,[p].concat(i.includes))),s(p,i),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},s(p.options,i.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,W=p._initHooks.length;j<W;j++)p._initHooks[j].call(this)}},c},Te.include=function(i){var c=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},Te.mergeOptions=function(i){return s(this.prototype.options,i),this},Te.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function fe(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=I(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var le={on:function(i,c,d){if(typeof i=="object")for(var p in i)this._on(p,i[p],c);else{i=k(i);for(var v=0,j=i.length;v<j;v++)this._on(i[v],c,d)}return this},off:function(i,c,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var p in i)this._off(p,i[p],c);else{i=k(i);for(var v=arguments.length===1,j=0,W=i.length;j<W;j++)v?this._off(i[j]):this._off(i[j],c,d)}return this},_on:function(i,c,d,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,d)===!1){d===this&&(d=void 0);var v={fn:c,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(v)}},_off:function(i,c,d){var p,v,j;if(this._events&&(p=this._events[i],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,j=p.length;v<j;v++)p[v].fn=x;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var W=this._listens(i,c,d);if(W!==!1){var Z=p[W];this._firingCount&&(Z.fn=x,this._events[i]=p=p.slice()),p.splice(W,1)}}},fire:function(i,c,d){if(!this.listens(i,d))return this;var p=s({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var v=this._events[i];if(v){this._firingCount=this._firingCount+1||1;for(var j=0,W=v.length;j<W;j++){var Z=v[j],G=Z.fn;Z.once&&this.off(i,G,Z.ctx),G.call(Z.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(i,c,d,p){typeof i!="string"&&console.warn('"string" type argument expected');var v=c;typeof c!="function"&&(p=!!c,v=void 0,d=void 0);var j=this._events&&this._events[i];if(j&&j.length&&this._listens(i,v,d)!==!1)return!0;if(p){for(var W in this._eventParents)if(this._eventParents[W].listens(i,c,d,p))return!0}return!1},_listens:function(i,c,d){if(!this._events)return!1;var p=this._events[i]||[];if(!c)return!!p.length;d===this&&(d=void 0);for(var v=0,j=p.length;v<j;v++)if(p[v].fn===c&&p[v].ctx===d)return v;return!1},once:function(i,c,d){if(typeof i=="object")for(var p in i)this._on(p,i[p],c,!0);else{i=k(i);for(var v=0,j=i.length;v<j;v++)this._on(i[v],c,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[f(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[f(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};le.addEventListener=le.on,le.removeEventListener=le.clearAllEventListeners=le.off,le.addOneTimeEventListener=le.once,le.fireEvent=le.fire,le.hasEventListeners=le.listens;var re=Te.extend(le);function B(i,c,d){this.x=d?Math.round(i):i,this.y=d?Math.round(c):c}var Q=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(i){return this.clone()._add(F(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(F(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new B(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new B(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(i){i=F(i);var c=i.x-this.x,d=i.y-this.y;return Math.sqrt(c*c+d*d)},equals:function(i){return i=F(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=F(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function F(i,c,d){return i instanceof B?i:I(i)?new B(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new B(i.x,i.y):new B(i,c,d)}function ee(i,c){if(i)for(var d=c?[i,c]:i,p=0,v=d.length;p<v;p++)this.extend(d[p])}ee.prototype={extend:function(i){var c,d;if(!i)return this;if(i instanceof B||typeof i[0]=="number"||"x"in i)c=d=F(i);else if(i=Y(i),c=i.min,d=i.max,!c||!d)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=d.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,d;return typeof i[0]=="number"||i instanceof B?i=F(i):i=Y(i),i instanceof ee?(c=i.min,d=i.max):c=d=i,c.x>=this.min.x&&d.x<=this.max.x&&c.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=Y(i);var c=this.min,d=this.max,p=i.min,v=i.max,j=v.x>=c.x&&p.x<=d.x,W=v.y>=c.y&&p.y<=d.y;return j&&W},overlaps:function(i){i=Y(i);var c=this.min,d=this.max,p=i.min,v=i.max,j=v.x>c.x&&p.x<d.x,W=v.y>c.y&&p.y<d.y;return j&&W},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,d=this.max,p=Math.abs(c.x-d.x)*i,v=Math.abs(c.y-d.y)*i;return Y(F(c.x-p,c.y-v),F(d.x+p,d.y+v))},equals:function(i){return i?(i=Y(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Y(i,c){return!i||i instanceof ee?i:new ee(i,c)}function pe(i,c){if(i)for(var d=c?[i,c]:i,p=0,v=d.length;p<v;p++)this.extend(d[p])}pe.prototype={extend:function(i){var c=this._southWest,d=this._northEast,p,v;if(i instanceof se)p=i,v=i;else if(i instanceof pe){if(p=i._southWest,v=i._northEast,!p||!v)return this}else return i?this.extend(ce(i)||X(i)):this;return!c&&!d?(this._southWest=new se(p.lat,p.lng),this._northEast=new se(v.lat,v.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(i){var c=this._southWest,d=this._northEast,p=Math.abs(c.lat-d.lat)*i,v=Math.abs(c.lng-d.lng)*i;return new pe(new se(c.lat-p,c.lng-v),new se(d.lat+p,d.lng+v))},getCenter:function(){return new se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new se(this.getNorth(),this.getWest())},getSouthEast:function(){return new se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof se||"lat"in i?i=ce(i):i=X(i);var c=this._southWest,d=this._northEast,p,v;return i instanceof pe?(p=i.getSouthWest(),v=i.getNorthEast()):p=v=i,p.lat>=c.lat&&v.lat<=d.lat&&p.lng>=c.lng&&v.lng<=d.lng},intersects:function(i){i=X(i);var c=this._southWest,d=this._northEast,p=i.getSouthWest(),v=i.getNorthEast(),j=v.lat>=c.lat&&p.lat<=d.lat,W=v.lng>=c.lng&&p.lng<=d.lng;return j&&W},overlaps:function(i){i=X(i);var c=this._southWest,d=this._northEast,p=i.getSouthWest(),v=i.getNorthEast(),j=v.lat>c.lat&&p.lat<d.lat,W=v.lng>c.lng&&p.lng<d.lng;return j&&W},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=X(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function X(i,c){return i instanceof pe?i:new pe(i,c)}function se(i,c,d){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,d!==void 0&&(this.alt=+d)}se.prototype={equals:function(i,c){if(!i)return!1;i=ce(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+_(this.lat,i)+", "+_(this.lng,i)+")"},distanceTo:function(i){return _e.distance(this,ce(i))},wrap:function(){return _e.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,d=c/Math.cos(Math.PI/180*this.lat);return X([this.lat-c,this.lng-d],[this.lat+c,this.lng+d])},clone:function(){return new se(this.lat,this.lng,this.alt)}};function ce(i,c,d){return i instanceof se?i:I(i)&&typeof i[0]!="object"?i.length===3?new se(i[0],i[1],i[2]):i.length===2?new se(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new se(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new se(i,c,d)}var Ve={latLngToPoint:function(i,c){var d=this.projection.project(i),p=this.scale(c);return this.transformation._transform(d,p)},pointToLatLng:function(i,c){var d=this.scale(c),p=this.transformation.untransform(i,d);return this.projection.unproject(p)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,d=this.scale(i),p=this.transformation.transform(c.min,d),v=this.transformation.transform(c.max,d);return new ee(p,v)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?g(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?g(i.lat,this.wrapLat,!0):i.lat,p=i.alt;return new se(d,c,p)},wrapLatLngBounds:function(i){var c=i.getCenter(),d=this.wrapLatLng(c),p=c.lat-d.lat,v=c.lng-d.lng;if(p===0&&v===0)return i;var j=i.getSouthWest(),W=i.getNorthEast(),Z=new se(j.lat-p,j.lng-v),G=new se(W.lat-p,W.lng-v);return new pe(Z,G)}},_e=s({},Ve,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var d=Math.PI/180,p=i.lat*d,v=c.lat*d,j=Math.sin((c.lat-i.lat)*d/2),W=Math.sin((c.lng-i.lng)*d/2),Z=j*j+Math.cos(p)*Math.cos(v)*W*W,G=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*G}}),Qe=6378137,jt={R:Qe,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,i.lat),-d),v=Math.sin(p*c);return new B(this.R*i.lng*c,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(i){var c=180/Math.PI;return new se((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:function(){var i=Qe*Math.PI;return new ee([-i,-i],[i,i])}()};function J(i,c,d,p){if(I(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=d,this._d=p}J.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new B((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function ve(i,c,d,p){return new J(i,c,d,p)}var Ue=s({},_e,{code:"EPSG:3857",projection:jt,transformation:function(){var i=.5/(Math.PI*jt.R);return ve(i,.5,-i,.5)}()}),Re=s({},Ue,{code:"EPSG:900913"});function rt(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function yn(i,c){var d="",p,v,j,W,Z,G;for(p=0,j=i.length;p<j;p++){for(Z=i[p],v=0,W=Z.length;v<W;v++)G=Z[v],d+=(v?"L":"M")+G.x+" "+G.y;d+=c?xe.svg?"z":"x":""}return d||"M0 0"}var rs=document.documentElement.style,$i="ActiveXObject"in window,Dt=$i&&!document.addEventListener,Mt="msLaunchUri"in navigator&&!("documentMode"in document),Os=xn("webkit"),Su=xn("android"),xl=xn("android 2")||xn("android 3"),$f=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Hi=Su&&xn("Google")&&$f<537&&!("AudioNode"in window),Wa=!!window.opera,vl=!Mt&&xn("chrome"),$a=xn("gecko")&&!Os&&!Wa&&!$i,Hf=!vl&&xn("safari"),Pu=xn("phantom"),wl="OTransition"in rs,Iu=navigator.platform.indexOf("Win")===0,Vs=$i&&"transition"in rs,qi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xl,Ha="MozPerspective"in rs,ss=!window.L_DISABLE_3D&&(Vs||qi||Ha)&&!wl&&!Pu,Us=typeof orientation<"u"||xn("mobile"),qa=Us&&Os,Cu=Us&&qi,Bs=!window.PointerEvent&&window.MSPointerEvent,_l=!!(window.PointerEvent||Bs),Ot="ontouchstart"in window||!!window.TouchEvent,zu=!window.L_NO_TOUCH&&(Ot||_l),Zi=Us&&Wa,Ki=Us&&$a,qf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Zf=function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",x,c),window.removeEventListener("testPassiveEventSupport",x,c)}catch{}return i}(),Fs=function(){return!!document.createElement("canvas").getContext}(),bl=!!(document.createElementNS&&rt("svg").createSVGRect),Kf=!!bl&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Za=!bl&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Au=navigator.platform.indexOf("Mac")===0,Ru=navigator.platform.indexOf("Linux")===0;function xn(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var xe={ie:$i,ielt9:Dt,edge:Mt,webkit:Os,android:Su,android23:xl,androidStock:Hi,opera:Wa,chrome:vl,gecko:$a,safari:Hf,phantom:Pu,opera12:wl,win:Iu,ie3d:Vs,webkit3d:qi,gecko3d:Ha,any3d:ss,mobile:Us,mobileWebkit:qa,mobileWebkit3d:Cu,msPointer:Bs,pointer:_l,touch:zu,touchNative:Ot,mobileOpera:Zi,mobileGecko:Ki,retina:qf,passiveEvents:Zf,canvas:Fs,svg:bl,vml:Za,inlineSvg:Kf,mac:Au,linux:Ru},Lu=xe.msPointer?"MSPointerDown":"pointerdown",or=xe.msPointer?"MSPointerMove":"pointermove",jl=xe.msPointer?"MSPointerUp":"pointerup",Nl=xe.msPointer?"MSPointerCancel":"pointercancel",Gi={touchstart:Lu,touchmove:or,touchend:jl,touchcancel:Nl},Ka={touchstart:kl,touchmove:Hn,touchend:Hn,touchcancel:Hn},is={},Du=!1;function Mu(i,c,d){return c==="touchstart"&&Qi(),Ka[c]?(d=Ka[c].bind(this,d),i.addEventListener(Gi[c],d,!1),d):(console.warn("wrong event specified:",c),x)}function Gf(i,c,d){if(!Gi[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(Gi[c],d,!1)}function Ga(i){is[i.pointerId]=i}function Ou(i){is[i.pointerId]&&(is[i.pointerId]=i)}function Qa(i){delete is[i.pointerId]}function Qi(){Du||(document.addEventListener(Lu,Ga,!0),document.addEventListener(or,Ou,!0),document.addEventListener(jl,Qa,!0),document.addEventListener(Nl,Qa,!0),Du=!0)}function Hn(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var d in is)c.touches.push(is[d]);c.changedTouches=[c],i(c)}}function kl(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Nt(c),Hn(i,c)}function Qf(i){var c={},d,p;for(p in i)d=i[p],c[p]=d&&d.bind?d.bind(i):d;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Vu=200;function Uu(i,c){i.addEventListener("dblclick",c);var d=0,p;function v(j){if(j.detail!==1){p=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var W=Il(j);if(!(W.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!W.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var Z=Date.now();Z-d<=Vu?(p++,p===2&&c(Qf(j))):p=1,d=Z}}}return i.addEventListener("click",v),{dblclick:c,simDblclick:v}}function Bu(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var Yi=Ya(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),as=Ya(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Tl=as==="webkitTransition"||as==="OTransition"?as+"End":"transitionend";function El(i){return typeof i=="string"?document.getElementById(i):i}function Ws(i,c){var d=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(i,null);d=p?p[c]:null}return d==="auto"?null:d}function Be(i,c,d){var p=document.createElement(i);return p.className=c||"",d&&d.appendChild(p),p}function $e(i){var c=i.parentNode;c&&c.removeChild(i)}function cn(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function qn(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function Zn(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function Ji(i,c){if(i.classList!==void 0)return i.classList.contains(c);var d=kr(i);return d.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(d)}function ge(i,c){if(i.classList!==void 0)for(var d=k(c),p=0,v=d.length;p<v;p++)i.classList.add(d[p]);else if(!Ji(i,c)){var j=kr(i);os(i,(j?j+" ":"")+c)}}function et(i,c){i.classList!==void 0?i.classList.remove(c):os(i,T((" "+kr(i)+" ").replace(" "+c+" "," ")))}function os(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function kr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function vn(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&Fu(i,c)}function Fu(i,c){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),d?(d.Enabled=c!==100,d.Opacity=c):i.style.filter+=" progid:"+p+"(opacity="+c+")"}function Ya(i){for(var c=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in c)return i[d];return!1}function ls(i,c,d){var p=c||new B(0,0);i.style[Yi]=(xe.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function mt(i,c){i._leaflet_pos=c,xe.any3d?ls(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function cs(i){return i._leaflet_pos||new B(0,0)}var lr,zn,Ja;if("onselectstart"in document)lr=function(){Ee(window,"selectstart",Nt)},zn=function(){Ye(window,"selectstart",Nt)};else{var $s=Ya(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);lr=function(){if($s){var i=document.documentElement.style;Ja=i[$s],i[$s]="none"}},zn=function(){$s&&(document.documentElement.style[$s]=Ja,Ja=void 0)}}function Xa(){Ee(window,"dragstart",Nt)}function eo(){Ye(window,"dragstart",Nt)}var Xi,Tr;function Sl(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(to(),Xi=i,Tr=i.style.outlineStyle,i.style.outlineStyle="none",Ee(window,"keydown",to))}function to(){Xi&&(Xi.style.outlineStyle=Tr,Xi=void 0,Tr=void 0,Ye(window,"keydown",to))}function Wu(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Kn(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var Yf={__proto__:null,TRANSFORM:Yi,TRANSITION:as,TRANSITION_END:Tl,get:El,getStyle:Ws,create:Be,remove:$e,empty:cn,toFront:qn,toBack:Zn,hasClass:Ji,addClass:ge,removeClass:et,setClass:os,getClass:kr,setOpacity:vn,testProp:Ya,setTransform:ls,setPosition:mt,getPosition:cs,get disableTextSelection(){return lr},get enableTextSelection(){return zn},disableImageDrag:Xa,enableImageDrag:eo,preventOutline:Sl,restoreOutline:to,getSizedParentNode:Wu,getScale:Kn};function Ee(i,c,d,p){if(c&&typeof c=="object")for(var v in c)no(i,v,c[v],d);else{c=k(c);for(var j=0,W=c.length;j<W;j++)no(i,c[j],d,p)}return this}var un="_leaflet_events";function Ye(i,c,d,p){if(arguments.length===1)Hs(i),delete i[un];else if(c&&typeof c=="object")for(var v in c)ea(i,v,c[v],d);else if(c=k(c),arguments.length===2)Hs(i,function(Z){return H(c,Z)!==-1});else for(var j=0,W=c.length;j<W;j++)ea(i,c[j],d,p);return this}function Hs(i,c){for(var d in i[un]){var p=d.split(/\d/)[0];(!c||c(p))&&ea(i,p,null,null,d)}}var us={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function no(i,c,d,p){var v=c+f(d)+(p?"_"+f(p):"");if(i[un]&&i[un][v])return this;var j=function(Z){return d.call(p||i,Z||window.event)},W=j;!xe.touchNative&&xe.pointer&&c.indexOf("touch")===0?j=Mu(i,c,j):xe.touch&&c==="dblclick"?j=Uu(i,j):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(us[c]||c,j,xe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(j=function(Z){Z=Z||window.event,zl(i,Z)&&W(Z)},i.addEventListener(us[c],j,!1)):i.addEventListener(c,W,!1):i.attachEvent("on"+c,j),i[un]=i[un]||{},i[un][v]=j}function ea(i,c,d,p,v){v=v||c+f(d)+(p?"_"+f(p):"");var j=i[un]&&i[un][v];if(!j)return this;!xe.touchNative&&xe.pointer&&c.indexOf("touch")===0?Gf(i,c,j):xe.touch&&c==="dblclick"?Bu(i,j):"removeEventListener"in i?i.removeEventListener(us[c]||c,j,!1):i.detachEvent("on"+c,j),i[un][v]=null}function qe(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Pl(i){return no(i,"wheel",qe),this}function ta(i){return Ee(i,"mousedown touchstart dblclick contextmenu",qe),i._leaflet_disable_click=!0,this}function Nt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Er(i){return Nt(i),qe(i),this}function Il(i){if(i.composedPath)return i.composedPath();for(var c=[],d=i.target;d;)c.push(d),d=d.parentNode;return c}function na(i,c){if(!c)return new B(i.clientX,i.clientY);var d=Kn(c),p=d.boundingClientRect;return new B((i.clientX-p.left)/d.x-c.clientLeft,(i.clientY-p.top)/d.y-c.clientTop)}var Sr=xe.linux&&xe.chrome?window.devicePixelRatio:xe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Cl(i){return xe.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Sr:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function zl(i,c){var d=c.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var ra={__proto__:null,on:Ee,off:Ye,stopPropagation:qe,disableScrollPropagation:Pl,disableClickPropagation:ta,preventDefault:Nt,stop:Er,getPropagationPath:Il,getMousePosition:na,getWheelDelta:Cl,isExternalTarget:zl,addListener:Ee,removeListener:Ye},Al=re.extend({run:function(i,c,d,p){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=cs(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,d=this._duration*1e3;c<d?this._runFrame(this._easeOut(c/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var d=this._startPos.add(this._offset.multiplyBy(i));c&&d._round(),mt(this._el,d),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),ze=re.extend({options:{crs:Ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=C(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ce(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=as&&xe.any3d&&!xe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,Tl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,d){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(ce(i),c,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=s({animate:d.animate},d.zoom),d.pan=s({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,d.zoom):this._tryAnimatedPan(i,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||(xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||(xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,d){var p=this.getZoomScale(c),v=this.getSize().divideBy(2),j=i instanceof B?i:this.latLngToContainerPoint(i),W=j.subtract(v).multiplyBy(1-1/p),Z=this.containerPointToLatLng(v.add(W));return this.setView(Z,c,{zoom:d})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():X(i);var d=F(c.paddingTopLeft||c.padding||[0,0]),p=F(c.paddingBottomRight||c.padding||[0,0]),v=this.getBoundsZoom(i,!1,d.add(p));if(v=typeof c.maxZoom=="number"?Math.min(c.maxZoom,v):v,v===1/0)return{center:i.getCenter(),zoom:v};var j=p.subtract(d).divideBy(2),W=this.project(i.getSouthWest(),v),Z=this.project(i.getNorthEast(),v),G=this.unproject(W.add(Z).divideBy(2).add(j),v);return{center:G,zoom:v}},fitBounds:function(i,c){if(i=X(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,c);return this.setView(d.center,d.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=F(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Al,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ge(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,d){if(d=d||{},d.animate===!1||!xe.any3d)return this.setView(i,c,d);this._stop();var p=this.project(this.getCenter()),v=this.project(i),j=this.getSize(),W=this._zoom;i=ce(i),c=c===void 0?W:c;var Z=Math.max(j.x,j.y),G=Z*this.getZoomScale(W,c),ie=v.distanceTo(p)||1,he=1.42,be=he*he;function Ae(kt){var id=kt?-1:1,l2=kt?G:Z,c2=G*G-Z*Z+id*be*be*ie*ie,u2=2*l2*be*ie,nm=c2/u2,Yx=Math.sqrt(nm*nm+1)-nm,d2=Yx<1e-9?-18:Math.log(Yx);return d2}function dn(kt){return(Math.exp(kt)-Math.exp(-kt))/2}function Vt(kt){return(Math.exp(kt)+Math.exp(-kt))/2}function Yn(kt){return dn(kt)/Vt(kt)}var _n=Ae(0);function go(kt){return Z*(Vt(_n)/Vt(_n+he*kt))}function s2(kt){return Z*(Vt(_n)*Yn(_n+he*kt)-dn(_n))/be}function i2(kt){return 1-Math.pow(1-kt,1.5)}var a2=Date.now(),Gx=(Ae(1)-_n)/he,o2=d.duration?1e3*d.duration:1e3*Gx*.8;function Qx(){var kt=(Date.now()-a2)/o2,id=i2(kt)*Gx;kt<=1?(this._flyToFrame=V(Qx,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(s2(id)/ie)),W),this.getScaleZoom(Z/go(id),W),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Qx.call(this),this},flyToBounds:function(i,c){var d=this._getBoundsCenterZoom(i,c);return this.flyTo(d.center,d.zoom,c)},setMaxBounds:function(i){return i=X(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,X(i));return d.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var d=F(c.paddingTopLeft||c.padding||[0,0]),p=F(c.paddingBottomRight||c.padding||[0,0]),v=this.project(this.getCenter()),j=this.project(i),W=this.getPixelBounds(),Z=Y([W.min.add(d),W.max.subtract(p)]),G=Z.getSize();if(!Z.contains(j)){this._enforcingBounds=!0;var ie=j.subtract(Z.getCenter()),he=Z.extend(j).getSize().subtract(G);v.x+=ie.x<0?-he.x:he.x,v.y+=ie.y<0?-he.y:he.y,this.panTo(this.unproject(v),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=c.divideBy(2).round(),v=d.divideBy(2).round(),j=p.subtract(v);return!j.x&&!j.y?this:(i.animate&&i.pan?this.panBy(j):(i.pan&&this._rawPanBy(j),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=l(this._handleGeolocationResponse,this),d=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,d,i):navigator.geolocation.getCurrentPosition(c,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,d=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,d=i.coords.longitude,p=new se(c,d),v=p.toBounds(i.coords.accuracy*2),j=this._locateOptions;if(j.setView){var W=this.getBoundsZoom(v);this.setView(p,j.maxZoom?Math.min(W,j.maxZoom):W)}var Z={latlng:p,bounds:v,timestamp:i.timestamp};for(var G in i.coords)typeof i.coords[G]=="number"&&(Z[G]=i.coords[G]);this.fire("locationfound",Z)}},addHandler:function(i,c){if(!c)return this;var d=this[i]=new c(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)$e(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),p=Be("div",d,c||this._mapPane);return i&&(this._panes[i]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new pe(c,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,d){i=X(i),d=F(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),j=this.getMaxZoom(),W=i.getNorthWest(),Z=i.getSouthEast(),G=this.getSize().subtract(d),ie=Y(this.project(Z,p),this.project(W,p)).getSize(),he=xe.any3d?this.options.zoomSnap:1,be=G.x/ie.x,Ae=G.y/ie.y,dn=c?Math.max(be,Ae):Math.min(be,Ae);return p=this.getScaleZoom(dn,p),he&&(p=Math.round(p/(he/100))*(he/100),p=c?Math.ceil(p/he)*he:Math.floor(p/he)*he),Math.max(v,Math.min(j,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var d=this._getTopLeftPoint(i,c);return new ee(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var d=this.options.crs;return c=c===void 0?this._zoom:c,d.scale(i)/d.scale(c)},getScaleZoom:function(i,c){var d=this.options.crs;c=c===void 0?this._zoom:c;var p=d.zoom(i*d.scale(c));return isNaN(p)?1/0:p},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ce(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(F(i),c)},layerPointToLatLng:function(i){var c=F(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(ce(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ce(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(X(i))},distance:function(i,c){return this.options.crs.distance(ce(i),ce(c))},containerPointToLayerPoint:function(i){return F(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return F(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(F(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(i)))},mouseEventToContainerPoint:function(i){return na(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=El(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(c,"scroll",this._onScroll,this),this._containerId=f(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&xe.any3d,ge(i,"leaflet-container"+(xe.touch?" leaflet-touch":"")+(xe.retina?" leaflet-retina":"")+(xe.ielt9?" leaflet-oldie":"")+(xe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Ws(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),mt(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(i.markerPane,"leaflet-zoom-hide"),ge(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,d){mt(this._mapPane,new B(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var v=this._zoom!==c;this._moveStart(v,d)._move(i,c)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,d,p){c===void 0&&(c=this._zoom);var v=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){mt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[f(this._container)]=this;var c=i?Ye:Ee;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),xe.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var d=[],p,v=c==="mouseout"||c==="mouseover",j=i.target||i.srcElement,W=!1;j;){if(p=this._targets[f(j)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){W=!0;break}if(p&&p.listens(c,!0)&&(v&&!zl(j,i)||(d.push(p),v))||j===this._container)break;j=j.parentNode}return!d.length&&!W&&!v&&this.listens(c,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var d=i.type;d==="mousedown"&&Sl(c),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,d){if(i.type==="click"){var p=s({},i);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(i,c);if(d){for(var j=[],W=0;W<d.length;W++)d[W].listens(c,!0)&&j.push(d[W]);v=j.concat(v)}if(v.length){c==="contextmenu"&&Nt(i);var Z=v[0],G={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var ie=Z.getLatLng&&(!Z._radius||Z._radius<=10);G.containerPoint=ie?this.latLngToContainerPoint(Z.getLatLng()):this.mouseEventToContainerPoint(i),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=ie?Z.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(W=0;W<v.length;W++)if(v[W].fire(c,G,!0),G.originalEvent._stopped||v[W].options.bubblingMouseEvents===!1&&H(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return cs(this._mapPane)||new B(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var d=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var d=this.getSize()._divideBy(2);return this.project(i,c)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,d){var p=this._getNewPixelOrigin(d,c);return this.project(i,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(i,c,d){var p=this._getNewPixelOrigin(d,c);return Y([this.project(i.getSouthWest(),c)._subtract(p),this.project(i.getNorthWest(),c)._subtract(p),this.project(i.getSouthEast(),c)._subtract(p),this.project(i.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,d){if(!d)return i;var p=this.project(i,c),v=this.getSize().divideBy(2),j=new ee(p.subtract(v),p.add(v)),W=this._getBoundsOffset(j,d,c);return Math.abs(W.x)<=1&&Math.abs(W.y)<=1?i:this.unproject(p.add(W),c)},_limitOffset:function(i,c){if(!c)return i;var d=this.getPixelBounds(),p=new ee(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(i,c,d){var p=Y(this.project(c.getNorthEast(),d),this.project(c.getSouthWest(),d)),v=p.min.subtract(i.min),j=p.max.subtract(i.max),W=this._rebound(v.x,-j.x),Z=this._rebound(v.y,-j.y);return new B(W,Z)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),d=this.getMaxZoom(),p=xe.any3d?this.options.zoomSnap:1;return p&&(i=Math.round(i/p)*p),Math.max(c,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var d=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,c),!0)},_createAnimProxy:function(){var i=this._proxy=Be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var d=Yi,p=this._proxy.style[d];ls(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();ls(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),v=this._getCenterOffset(i)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ro(i,c){return new ze(i,c)}var wn=Te.extend({options:{position:"topright"},initialize:function(i){C(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),d=this.getPosition(),p=i._controlCorners[d];return ge(c,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Pr=function(i){return new wn(i)};ze.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",d=this._controlContainer=Be("div",c+"control-container",this._container);function p(v,j){var W=c+v+" "+c+j;i[v+j]=Be("div",W,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)$e(this._controlCorners[i]);$e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $u=wn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,d,p){return d<p?-1:p<d?1:0}},initialize:function(i,c,d){C(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in i)this._addLayer(i[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return wn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(f(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=Be("div",i),d=this.options.collapsed;c.setAttribute("aria-haspopup",!0),ta(c),Pl(c);var p=this._section=Be("section",i+"-list");d&&(this._map.on("click",this.collapse,this),Ee(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Be("a",i+"-toggle",c);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ee(v,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){Nt(j),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Be("div",i+"-base",p),this._separator=Be("div",i+"-separator",p),this._overlaysList=Be("div",i+"-overlays",p),c.appendChild(p)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&f(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:d}),this.options.sortLayers&&this._layers.sort(l(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;cn(this._baseLayersList),cn(this._overlaysList),this._layerControlInputs=[];var i,c,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),c=c||p.overlay,i=i||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(i=i&&v>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(f(i.target)),d=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,c)},_createRadioElement:function(i,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(i){var c=document.createElement("label"),d=this._map.hasLayer(i.layer),p;i.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+f(this),d),this._layerControlInputs.push(p),p.layerId=f(i.layer),Ee(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+i.name;var j=document.createElement("span");c.appendChild(j),j.appendChild(p),j.appendChild(v);var W=i.overlay?this._overlaysList:this._baseLayersList;return W.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,d,p=[],v=[];this._handlingClick=!0;for(var j=i.length-1;j>=0;j--)c=i[j],d=this._getLayer(c.layerId).layer,c.checked?p.push(d):c.checked||v.push(d);for(j=0;j<v.length;j++)this._map.hasLayer(v[j])&&this._map.removeLayer(v[j]);for(j=0;j<p.length;j++)this._map.hasLayer(p[j])||this._map.addLayer(p[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,d,p=this._map.getZoom(),v=i.length-1;v>=0;v--)c=i[v],d=this._getLayer(c.layerId).layer,c.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Ee(i,"click",Nt),this.expand();var c=this;setTimeout(function(){Ye(i,"click",Nt),c._preventClick=!1})}}),Hu=function(i,c,d){return new $u(i,c,d)},ds=wn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",d=Be("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,d,p,v){var j=Be("a",d,p);return j.innerHTML=i,j.href="#",j.title=c,j.setAttribute("role","button"),j.setAttribute("aria-label",c),ta(j),Ee(j,"click",Er),Ee(j,"click",v,this),Ee(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";et(this._zoomInButton,c),et(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(ge(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(ge(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});ze.mergeOptions({zoomControl:!0}),ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ds,this.addControl(this.zoomControl))});var qu=function(i){return new ds(i)},Rl=wn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",d=Be("div",c),p=this.options;return this._addScales(p,c+"-line",d),i.on(p.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,d){i.metric&&(this._mScale=Be("div",c,d)),i.imperial&&(this._iScale=Be("div",c,d))},_update:function(){var i=this._map,c=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),d=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,d,c/i)},_updateImperial:function(i){var c=i*3.2808399,d,p,v;c>5280?(d=c/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(c),this._updateScale(this._iScale,v+" ft",v/c))},_updateScale:function(i,c,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),d=i/c;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,c*d}}),Ll=function(i){return new Rl(i)},Dl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',so=wn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(xe.inlineSvg?Dl+" ":"")+"Leaflet</a>"},initialize:function(i){C(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Be("div","leaflet-control-attribution"),ta(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});ze.mergeOptions({attributionControl:!0}),ze.addInitHook(function(){this.options.attributionControl&&new so().addTo(this)});var io=function(i){return new so(i)};wn.Layers=$u,wn.Zoom=ds,wn.Scale=Rl,wn.Attribution=so,Pr.layers=Hu,Pr.zoom=qu,Pr.scale=Ll,Pr.attribution=io;var An=Te.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});An.addTo=function(i,c){return i.addHandler(c,this),this};var Zu={Events:le},Ir=xe.touch?"touchstart mousedown":"mousedown",cr=re.extend({options:{clickTolerance:3},initialize:function(i,c,d,p){C(this,p),this._element=i,this._dragStartTarget=c||i,this._preventOutline=d},enable:function(){this._enabled||(Ee(this._dragStartTarget,Ir,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cr._dragging===this&&this.finishDrag(!0),Ye(this._dragStartTarget,Ir,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Ji(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){cr._dragging===this&&this.finishDrag();return}if(!(cr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(cr._dragging=this,this._preventOutline&&Sl(this._element),Xa(),lr(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,d=Wu(this._element);this._startPoint=new B(c.clientX,c.clientY),this._startPos=cs(this._element),this._parentScale=Kn(d);var p=i.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,d=new B(c.clientX,c.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Nt(i),this._moved||(this.fire("dragstart"),this._moved=!0,ge(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),mt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){et(document.body,"leaflet-dragging"),this._lastTarget&&(et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ye(document,"mousemove touchmove",this._onMove,this),Ye(document,"mouseup touchend touchcancel",this._onUp,this),eo(),zn();var c=this._moved&&this._moving;this._moving=!1,cr._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ml(i,c,d){var p,v=[1,4,2,8],j,W,Z,G,ie,he,be,Ae;for(j=0,he=i.length;j<he;j++)i[j]._code=K(i[j],c);for(Z=0;Z<4;Z++){for(be=v[Z],p=[],j=0,he=i.length,W=he-1;j<he;W=j++)G=i[j],ie=i[W],G._code&be?ie._code&be||(Ae=q(ie,G,be,c,d),Ae._code=K(Ae,c),p.push(Ae)):(ie._code&be&&(Ae=q(ie,G,be,c,d),Ae._code=K(Ae,c),p.push(Ae)),p.push(G));i=p}return i}function Ol(i,c){var d,p,v,j,W,Z,G,ie,he;if(!i||i.length===0)throw new Error("latlngs not passed");He(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var be=ce([0,0]),Ae=X(i),dn=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());dn<1700&&(be=ao(i));var Vt=i.length,Yn=[];for(d=0;d<Vt;d++){var _n=ce(i[d]);Yn.push(c.project(ce([_n.lat-be.lat,_n.lng-be.lng])))}for(Z=G=ie=0,d=0,p=Vt-1;d<Vt;p=d++)v=Yn[d],j=Yn[p],W=v.y*j.x-j.y*v.x,G+=(v.x+j.x)*W,ie+=(v.y+j.y)*W,Z+=W*3;Z===0?he=Yn[0]:he=[G/Z,ie/Z];var go=c.unproject(F(he));return ce([go.lat+be.lat,go.lng+be.lng])}function ao(i){for(var c=0,d=0,p=0,v=0;v<i.length;v++){var j=ce(i[v]);c+=j.lat,d+=j.lng,p++}return ce([c/p,d/p])}var oo={__proto__:null,clipPolygon:Ml,polygonCenter:Ol,centroid:ao};function Jt(i,c){if(!c||!i.length)return i.slice();var d=c*c;return i=y(i,d),i=qs(i,d),i}function Vl(i,c,d){return Math.sqrt(Se(i,c,d,!0))}function Ku(i,c,d){return Se(i,c,d)}function qs(i,c){var d=i.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,u(i,v,c,0,d-1);var j,W=[];for(j=0;j<d;j++)v[j]&&W.push(i[j]);return W}function u(i,c,d,p,v){var j=0,W,Z,G;for(Z=p+1;Z<=v-1;Z++)G=Se(i[Z],i[p],i[v],!0),G>j&&(W=Z,j=G);j>d&&(c[W]=1,u(i,c,d,p,W),u(i,c,d,W,v))}function y(i,c){for(var d=[i[0]],p=1,v=0,j=i.length;p<j;p++)oe(i[p],i[v])>c&&(d.push(i[p]),v=p);return v<j-1&&d.push(i[j-1]),d}var w;function P(i,c,d,p,v){var j=p?w:K(i,d),W=K(c,d),Z,G,ie;for(w=W;;){if(!(j|W))return[i,c];if(j&W)return!1;Z=j||W,G=q(i,c,Z,d,v),ie=K(G,d),Z===j?(i=G,j=ie):(c=G,W=ie)}}function q(i,c,d,p,v){var j=c.x-i.x,W=c.y-i.y,Z=p.min,G=p.max,ie,he;return d&8?(ie=i.x+j*(G.y-i.y)/W,he=G.y):d&4?(ie=i.x+j*(Z.y-i.y)/W,he=Z.y):d&2?(ie=G.x,he=i.y+W*(G.x-i.x)/j):d&1&&(ie=Z.x,he=i.y+W*(Z.x-i.x)/j),new B(ie,he,v)}function K(i,c){var d=0;return i.x<c.min.x?d|=1:i.x>c.max.x&&(d|=2),i.y<c.min.y?d|=4:i.y>c.max.y&&(d|=8),d}function oe(i,c){var d=c.x-i.x,p=c.y-i.y;return d*d+p*p}function Se(i,c,d,p){var v=c.x,j=c.y,W=d.x-v,Z=d.y-j,G=W*W+Z*Z,ie;return G>0&&(ie=((i.x-v)*W+(i.y-j)*Z)/G,ie>1?(v=d.x,j=d.y):ie>0&&(v+=W*ie,j+=Z*ie)),W=i.x-v,Z=i.y-j,p?W*W+Z*Z:new B(v,j)}function He(i){return!I(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Ze(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),He(i)}function vt(i,c){var d,p,v,j,W,Z,G,ie;if(!i||i.length===0)throw new Error("latlngs not passed");He(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var he=ce([0,0]),be=X(i),Ae=be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest());Ae<1700&&(he=ao(i));var dn=i.length,Vt=[];for(d=0;d<dn;d++){var Yn=ce(i[d]);Vt.push(c.project(ce([Yn.lat-he.lat,Yn.lng-he.lng])))}for(d=0,p=0;d<dn-1;d++)p+=Vt[d].distanceTo(Vt[d+1])/2;if(p===0)ie=Vt[0];else for(d=0,j=0;d<dn-1;d++)if(W=Vt[d],Z=Vt[d+1],v=W.distanceTo(Z),j+=v,j>p){G=(j-p)/v,ie=[Z.x-G*(Z.x-W.x),Z.y-G*(Z.y-W.y)];break}var _n=c.unproject(F(ie));return ce([_n.lat+he.lat,_n.lng+he.lng])}var Gn={__proto__:null,simplify:Jt,pointToSegmentDistance:Vl,closestPointOnSegment:Ku,clipSegment:P,_getEdgeIntersection:q,_getBitCode:K,_sqClosestPointOnSegment:Se,isFlat:He,_flat:Ze,polylineCenter:vt},ur={project:function(i){return new B(i.lng,i.lat)},unproject:function(i){return new se(i.y,i.x)},bounds:new ee([-180,-90],[180,90])},Qn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,d=this.R,p=i.lat*c,v=this.R_MINOR/d,j=Math.sqrt(1-v*v),W=j*Math.sin(p),Z=Math.tan(Math.PI/4-p/2)/Math.pow((1-W)/(1+W),j/2);return p=-d*Math.log(Math.max(Z,1e-10)),new B(i.lng*c*d,p)},unproject:function(i){for(var c=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),j=Math.exp(-i.y/d),W=Math.PI/2-2*Math.atan(j),Z=0,G=.1,ie;Z<15&&Math.abs(G)>1e-7;Z++)ie=v*Math.sin(W),ie=Math.pow((1-ie)/(1+ie),v/2),G=Math.PI/2-2*Math.atan(j*ie)-W,W+=G;return new se(W*c,i.x*c/d)}},Cr={__proto__:null,LonLat:ur,Mercator:Qn,SphericalMercator:jt},lo=s({},_e,{code:"EPSG:3395",projection:Qn,transformation:function(){var i=.5/(Math.PI*Qn.R);return ve(i,.5,-i,.5)}()}),co=s({},_e,{code:"EPSG:4326",projection:ur,transformation:ve(1/180,1,-1/180,.5)}),Dk=s({},Ve,{projection:ur,transformation:ve(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var d=c.lng-i.lng,p=c.lat-i.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Ve.Earth=_e,Ve.EPSG3395=lo,Ve.EPSG3857=Ue,Ve.EPSG900913=Re,Ve.EPSG4326=co,Ve.Simple=Dk;var dr=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[f(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[f(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var d=this.getEvents();c.on(d,this),this.once("remove",function(){c.off(d,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});ze.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=f(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=f(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return f(i)in this._layers},eachLayer:function(i,c){for(var d in this._layers)i.call(c,this._layers[d]);return this},_addLayers:function(i){i=i?I(i)?i:[i]:[];for(var c=0,d=i.length;c<d;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[f(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=f(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;i=v.minZoom===void 0?i:Math.min(i,v.minZoom),c=v.maxZoom===void 0?c:Math.max(c,v.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var uo=dr.extend({initialize:function(i,c){C(this,c),this._layers={};var d,p;if(i)for(d=0,p=i.length;d<p;d++)this.addLayer(i[d])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[i]&&p[i].apply(p,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var d in this._layers)i.call(c,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return f(i)}}),Mk=function(i,c){return new uo(i,c)},hs=uo.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),uo.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),uo.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new pe;for(var c in this._layers){var d=this._layers[c];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),Ok=function(i,c){return new hs(i,c)},ho=Te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){C(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(i,c){var d=this.options,p=d[c+"Size"];typeof p=="number"&&(p=[p,p]);var v=F(p),j=F(c==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(d.className||""),j&&(i.style.marginLeft=-j.x+"px",i.style.marginTop=-j.y+"px"),v&&(i.style.width=v.x+"px",i.style.height=v.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return xe.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Vk(i){return new ho(i)}var Ul=ho.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Ul.imagePath!="string"&&(Ul.imagePath=this._detectIconPath()),(this.options.imagePath||Ul.imagePath)+ho.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(d,p,v){var j=p.exec(d);return j&&j[v]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Be("div","leaflet-default-icon-path",document.body),c=Ws(i,"background-image")||Ws(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Ix=An.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new cr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,d=c._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,j=cs(c._icon),W=d.getPixelBounds(),Z=d.getPixelOrigin(),G=Y(W.min._subtract(Z).add(v),W.max._subtract(Z).subtract(v));if(!G.contains(j)){var ie=F((Math.max(G.max.x,j.x)-G.max.x)/(W.max.x-G.max.x)-(Math.min(G.min.x,j.x)-G.min.x)/(W.min.x-G.min.x),(Math.max(G.max.y,j.y)-G.max.y)/(W.max.y-G.max.y)-(Math.min(G.min.y,j.y)-G.min.y)/(W.min.y-G.min.y)).multiplyBy(p);d.panBy(ie,{animate:!1}),this._draggable._newPos._add(ie),this._draggable._startPos._add(ie),mt(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=V(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,d=c._shadow,p=cs(c._icon),v=c._map.layerPointToLatLng(p);d&&mt(d,p),c._latlng=v,i.latlng=v,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Gu=dr.extend({options:{icon:new Ul,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){C(this,c),this._latlng=ce(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=ce(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),ge(d,c),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(d,"focus",this._panOnFocus,this);var v=i.icon.createShadow(this._shadow),j=!1;v!==this._shadow&&(this._removeShadow(),j=!0),v&&(ge(v,c),v.alt=""),this._shadow=v,i.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&j&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ye(this._icon,"focus",this._panOnFocus,this),$e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$e(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&mt(this._icon,i),this._shadow&&mt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ix)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ix(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&vn(this._icon,i),this._shadow&&vn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,d=c.iconSize?F(c.iconSize):F(0,0),p=c.iconAnchor?F(c.iconAnchor):F(0,0);i.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Uk(i,c){return new Gu(i,c)}var Zs=dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return C(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qu=Zs.extend({options:{fill:!0,radius:10},initialize:function(i,c){C(this,c),this._latlng=ce(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=ce(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return Zs.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,d=this._clickTolerance(),p=[i+d,c+d];this._pxBounds=new ee(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bk(i,c){return new Qu(i,c)}var Jf=Qu.extend({initialize:function(i,c,d){if(typeof c=="number"&&(c=s({},d,{radius:c})),C(this,c),this._latlng=ce(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new pe(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Zs.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===_e.distance){var v=Math.PI/180,j=this._mRadius/_e.R/v,W=d.project([c+j,i]),Z=d.project([c-j,i]),G=W.add(Z).divideBy(2),ie=d.unproject(G).lat,he=Math.acos((Math.cos(j*v)-Math.sin(c*v)*Math.sin(ie*v))/(Math.cos(c*v)*Math.cos(ie*v)))/v;(isNaN(he)||he===0)&&(he=j/Math.cos(Math.PI/180*c)),this._point=G.subtract(d.getPixelOrigin()),this._radius=isNaN(he)?0:G.x-d.project([ie,i-he]).x,this._radiusY=G.y-W.y}else{var be=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(be).x}this._updateBounds()}});function Fk(i,c,d){return new Jf(i,c,d)}var fs=Zs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){C(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,d=null,p=Se,v,j,W=0,Z=this._parts.length;W<Z;W++)for(var G=this._parts[W],ie=1,he=G.length;ie<he;ie++){v=G[ie-1],j=G[ie];var be=p(i,v,j,!0);be<c&&(c=be,d=p(i,v,j))}return d&&(d.distance=Math.sqrt(c)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=ce(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new pe,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return He(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],d=He(i),p=0,v=i.length;p<v;p++)d?(c[p]=ce(i[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(i[p]);return c},_project:function(){var i=new ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new B(i,i);this._rawPxBounds&&(this._pxBounds=new ee([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,d){var p=i[0]instanceof se,v=i.length,j,W;if(p){for(W=[],j=0;j<v;j++)W[j]=this._map.latLngToLayerPoint(i[j]),d.extend(W[j]);c.push(W)}else for(j=0;j<v;j++)this._projectLatlngs(i[j],c,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,d,p,v,j,W,Z,G;for(d=0,v=0,j=this._rings.length;d<j;d++)for(G=this._rings[d],p=0,W=G.length;p<W-1;p++)Z=P(G[p],G[p+1],i,p,!0),Z&&(c[v]=c[v]||[],c[v].push(Z[0]),(Z[1]!==G[p+1]||p===W-2)&&(c[v].push(Z[1]),v++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,d=0,p=i.length;d<p;d++)i[d]=Jt(i[d],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var d,p,v,j,W,Z,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,j=this._parts.length;d<j;d++)for(Z=this._parts[d],p=0,W=Z.length,v=W-1;p<W;v=p++)if(!(!c&&p===0)&&Vl(i,Z[v],Z[p])<=G)return!0;return!1}});function Wk(i,c){return new fs(i,c)}fs._flat=Ze;var fo=fs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ol(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=fs.prototype._convertLatLngs.call(this,i),d=c.length;return d>=2&&c[0]instanceof se&&c[0].equals(c[d-1])&&c.pop(),c},_setLatLngs:function(i){fs.prototype._setLatLngs.call(this,i),He(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return He(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,d=new B(c,c);if(i=new ee(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,j;p<v;p++)j=Ml(this._rings[p],i,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,d,p,v,j,W,Z,G,ie;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(j=0,G=this._parts.length;j<G;j++)for(d=this._parts[j],W=0,ie=d.length,Z=ie-1;W<ie;Z=W++)p=d[W],v=d[Z],p.y>i.y!=v.y>i.y&&i.x<(v.x-p.x)*(i.y-p.y)/(v.y-p.y)+p.x&&(c=!c);return c||fs.prototype._containsPoint.call(this,i,!0)}});function $k(i,c){return new fo(i,c)}var ms=hs.extend({initialize:function(i,c){C(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=I(i)?i:i.features,d,p,v;if(c){for(d=0,p=c.length;d<p;d++)v=c[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var j=this.options;if(j.filter&&!j.filter(i))return this;var W=Yu(i,j);return W?(W.feature=ed(i),W.defaultOptions=W.options,this.resetStyle(W),j.onEachFeature&&j.onEachFeature(i,W),this.addLayer(W)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function Yu(i,c){var d=i.type==="Feature"?i.geometry:i,p=d?d.coordinates:null,v=[],j=c&&c.pointToLayer,W=c&&c.coordsToLatLng||Xf,Z,G,ie,he;if(!p&&!d)return null;switch(d.type){case"Point":return Z=W(p),Cx(j,i,Z,c);case"MultiPoint":for(ie=0,he=p.length;ie<he;ie++)Z=W(p[ie]),v.push(Cx(j,i,Z,c));return new hs(v);case"LineString":case"MultiLineString":return G=Ju(p,d.type==="LineString"?0:1,W),new fs(G,c);case"Polygon":case"MultiPolygon":return G=Ju(p,d.type==="Polygon"?1:2,W),new fo(G,c);case"GeometryCollection":for(ie=0,he=d.geometries.length;ie<he;ie++){var be=Yu({geometry:d.geometries[ie],type:"Feature",properties:i.properties},c);be&&v.push(be)}return new hs(v);case"FeatureCollection":for(ie=0,he=d.features.length;ie<he;ie++){var Ae=Yu(d.features[ie],c);Ae&&v.push(Ae)}return new hs(v);default:throw new Error("Invalid GeoJSON object.")}}function Cx(i,c,d,p){return i?i(c,d):new Gu(d,p&&p.markersInheritOptions&&p)}function Xf(i){return new se(i[1],i[0],i[2])}function Ju(i,c,d){for(var p=[],v=0,j=i.length,W;v<j;v++)W=c?Ju(i[v],c-1,d):(d||Xf)(i[v]),p.push(W);return p}function em(i,c){return i=ce(i),i.alt!==void 0?[_(i.lng,c),_(i.lat,c),_(i.alt,c)]:[_(i.lng,c),_(i.lat,c)]}function Xu(i,c,d,p){for(var v=[],j=0,W=i.length;j<W;j++)v.push(c?Xu(i[j],He(i[j])?0:c-1,d,p):em(i[j],p));return!c&&d&&v.length>0&&v.push(v[0].slice()),v}function mo(i,c){return i.feature?s({},i.feature,{geometry:c}):ed(c)}function ed(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var tm={toGeoJSON:function(i){return mo(this,{type:"Point",coordinates:em(this.getLatLng(),i)})}};Gu.include(tm),Jf.include(tm),Qu.include(tm),fs.include({toGeoJSON:function(i){var c=!He(this._latlngs),d=Xu(this._latlngs,c?1:0,!1,i);return mo(this,{type:(c?"Multi":"")+"LineString",coordinates:d})}}),fo.include({toGeoJSON:function(i){var c=!He(this._latlngs),d=c&&!He(this._latlngs[0]),p=Xu(this._latlngs,d?2:c?1:0,!0,i);return c||(p=[p]),mo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),uo.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(d){c.push(d.toGeoJSON(i).geometry.coordinates)}),mo(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var d=c==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var j=v.toGeoJSON(i);if(d)p.push(j.geometry);else{var W=ed(j);W.type==="FeatureCollection"?p.push.apply(p,W.features):p.push(W)}}}),d?mo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function zx(i,c){return new ms(i,c)}var Hk=zx,td=dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,d){this._url=i,this._bounds=X(c),C(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&qn(this._image),this},bringToBack:function(){return this._map&&Zn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=X(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:Be("img");if(ge(c,"leaflet-image-layer"),this._zoomAnimated&&ge(c,"leaflet-zoom-animated"),this.options.className&&ge(c,this.options.className),c.onselectstart=x,c.onmousemove=x,c.onload=l(this.fire,this,"load"),c.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ls(this._image,d,c)},_reset:function(){var i=this._image,c=new ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=c.getSize();mt(i,c.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){vn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),qk=function(i,c,d){return new td(i,c,d)},Ax=td.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:Be("video");if(ge(c,"leaflet-image-layer"),this._zoomAnimated&&ge(c,"leaflet-zoom-animated"),this.options.className&&ge(c,this.options.className),c.onselectstart=x,c.onmousemove=x,c.onloadeddata=l(this.fire,this,"load"),i){for(var d=c.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[c.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var W=Be("source");W.src=this._url[j],c.appendChild(W)}}});function Zk(i,c,d){return new Ax(i,c,d)}var Rx=td.extend({_initImage:function(){var i=this._image=this._url;ge(i,"leaflet-image-layer"),this._zoomAnimated&&ge(i,"leaflet-zoom-animated"),this.options.className&&ge(i,this.options.className),i.onselectstart=x,i.onmousemove=x}});function Kk(i,c,d){return new Rx(i,c,d)}var zr=dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof se||I(i))?(this._latlng=ce(i),C(this,c)):(C(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&vn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&vn(this._container,1),this.bringToFront(),this.options.interactive&&(ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(vn(this._container,0),this._removeTimeout=setTimeout(l($e,void 0,this._container),200)):$e(this._container),this.options.interactive&&(et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ce(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&qn(this._container),this},bringToBack:function(){return this._map&&Zn(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof hs){c=null;var d=this._source._layers;for(var p in d)if(d[p]._map){c=d[p];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=F(this.options.offset),d=this._getAnchor();this._zoomAnimated?mt(this._container,i.add(d)):c=c.add(i).add(d);var p=this._containerBottom=-c.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});ze.include({_initOverlay:function(i,c,d,p){var v=c;return v instanceof i||(v=new i(p).setContent(c)),d&&v.setLatLng(d),v}}),dr.include({_initOverlay:function(i,c,d,p){var v=d;return v instanceof i?(C(v,p),v._source=this):(v=c&&!p?c:new i(p,this),v.setContent(d)),v}});var nd=zr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,zr.prototype.openOn.call(this,i)},onAdd:function(i){zr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Zs||this._source.on("preclick",qe))},onRemove:function(i){zr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Zs||this._source.off("preclick",qe))},getEvents:function(){var i=zr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=Be("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Be("div",i+"-content-wrapper",c);if(this._contentNode=Be("div",i+"-content",d),ta(c),Pl(this._contentNode),Ee(c,"contextmenu",qe),this._tipContainer=Be("div",i+"-tip-container",c),this._tip=Be("div",i+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Be("a",i+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(v){Nt(v),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),c.width=d+1+"px",c.whiteSpace="",c.height="";var p=i.offsetHeight,v=this.options.maxHeight,j="leaflet-popup-scrolled";v&&p>v?(c.height=v+"px",ge(i,j)):et(i,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();mt(this._container,c.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt(Ws(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+c,p=this._containerWidth,v=new B(this._containerLeft,-d-this._containerBottom);v._add(cs(this._container));var j=i.layerPointToContainerPoint(v),W=F(this.options.autoPanPadding),Z=F(this.options.autoPanPaddingTopLeft||W),G=F(this.options.autoPanPaddingBottomRight||W),ie=i.getSize(),he=0,be=0;j.x+p+G.x>ie.x&&(he=j.x+p-ie.x+G.x),j.x-he-Z.x<0&&(he=j.x-Z.x),j.y+d+G.y>ie.y&&(be=j.y+d-ie.y+G.y),j.y-be-Z.y<0&&(be=j.y-Z.y),(he||be)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([he,be]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gk=function(i,c){return new nd(i,c)};ze.mergeOptions({closePopupOnClick:!0}),ze.include({openPopup:function(i,c,d){return this._initOverlay(nd,i,c,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),dr.include({bindPopup:function(i,c){return this._popup=this._initOverlay(nd,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof hs||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Er(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof Zs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var rd=zr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){zr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){zr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=zr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Be("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,d,p=this._map,v=this._container,j=p.latLngToContainerPoint(p.getCenter()),W=p.layerPointToContainerPoint(i),Z=this.options.direction,G=v.offsetWidth,ie=v.offsetHeight,he=F(this.options.offset),be=this._getAnchor();Z==="top"?(c=G/2,d=ie):Z==="bottom"?(c=G/2,d=0):Z==="center"?(c=G/2,d=ie/2):Z==="right"?(c=0,d=ie/2):Z==="left"?(c=G,d=ie/2):W.x<j.x?(Z="right",c=0,d=ie/2):(Z="left",c=G+(he.x+be.x)*2,d=ie/2),i=i.subtract(F(c,d,!0)).add(he).add(be),et(v,"leaflet-tooltip-right"),et(v,"leaflet-tooltip-left"),et(v,"leaflet-tooltip-top"),et(v,"leaflet-tooltip-bottom"),ge(v,"leaflet-tooltip-"+Z),mt(v,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&vn(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Qk=function(i,c){return new rd(i,c)};ze.include({openTooltip:function(i,c,d){return this._initOverlay(rd,i,c,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),dr.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rd,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[c](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof hs||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(Ee(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Ee(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,d,p;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),p=this._map.containerPointToLayerPoint(d),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var Lx=ho.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(cn(c),c.appendChild(d.html)):c.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=F(d.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Yk(i){return new Lx(i)}ho.Default=Ul;var Bl=dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:xe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){C(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),$e(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(qn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Zn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof B?i:new B(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,d=-i(-1/0,1/0),p=0,v=c.length,j;p<v;p++)j=c[p].style.zIndex,c[p]!==this._container&&j&&(d=i(d,+j));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!xe.ielt9){vn(this._container,this.options.opacity);var i=+new Date,c=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var j=Math.min(1,(i-v.loaded)/200);vn(v.el,j),j<1?c=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),c&&($(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=Be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=c-Math.abs(i-d),this._onUpdateLevel(d)):($e(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[i],v=this._map;return p||(p=this._levels[i]={},p.el=Be("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=v.project(v.unproject(v.getPixelOrigin()),i).round(),p.zoom=i,this._setZoomTransform(p,v.getCenter(),v.getZoom()),x(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var i,c,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)$e(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,d,p){var v=Math.floor(i/2),j=Math.floor(c/2),W=d-1,Z=new B(+v,+j);Z.z=+W;var G=this._tileCoordsToKey(Z),ie=this._tiles[G];return ie&&ie.active?(ie.retain=!0,!0):(ie&&ie.loaded&&(ie.retain=!0),W>p?this._retainParent(v,j,W,p):!1)},_retainChildren:function(i,c,d,p){for(var v=2*i;v<2*i+2;v++)for(var j=2*c;j<2*c+2;j++){var W=new B(v,j);W.z=d+1;var Z=this._tileCoordsToKey(W),G=this._tiles[Z];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);d+1<p&&this._retainChildren(v,j,d+1,p)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,d,p){var v=Math.round(c);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var j=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||j)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,c)},_setZoomTransform:function(i,c,d){var p=this._map.getZoomScale(d,i.zoom),v=i.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,d)).round();xe.any3d?ls(i.el,v,p):mt(i.el,v)},_resetGrid:function(){var i=this._map,c=i.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],p).x/d.x),Math.ceil(i.project([0,c.wrapLng[1]],p).x/d.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],p).y/d.x),Math.ceil(i.project([c.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,d=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(d,this._tileZoom),v=c.project(i,this._tileZoom).floor(),j=c.getSize().divideBy(p*2);return new ee(v.subtract(j),v.add(j))},_update:function(i){var c=this._map;if(c){var d=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(i),v=this._pxBoundsToTileRange(p),j=v.getCenter(),W=[],Z=this.options.keepBuffer,G=new ee(v.getBottomLeft().subtract([Z,-Z]),v.getTopRight().add([Z,-Z]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ie in this._tiles){var he=this._tiles[ie].coords;(he.z!==this._tileZoom||!G.contains(new B(he.x,he.y)))&&(this._tiles[ie].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var be=v.min.y;be<=v.max.y;be++)for(var Ae=v.min.x;Ae<=v.max.x;Ae++){var dn=new B(Ae,be);if(dn.z=this._tileZoom,!!this._isValidTile(dn)){var Vt=this._tiles[this._tileCoordsToKey(dn)];Vt?Vt.current=!0:W.push(dn)}}if(W.sort(function(_n,go){return _n.distanceTo(j)-go.distanceTo(j)}),W.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Yn=document.createDocumentFragment();for(Ae=0;Ae<W.length;Ae++)this._addTile(W[Ae],Yn);this._level.el.appendChild(Yn)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var d=this._globalTileRange;if(!c.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!c.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(i);return X(this.options.bounds).overlaps(p)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,d=this.getTileSize(),p=i.scaleBy(d),v=p.add(d),j=c.unproject(p,i.z),W=c.unproject(v,i.z);return[j,W]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),d=new pe(c[0],c[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),d=new B(+c[0],+c[1]);return d.z=+c[2],d},_removeTile:function(i){var c=this._tiles[i];c&&($e(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){ge(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=x,i.onmousemove=x,xe.ielt9&&this.options.opacity<1&&vn(i,this.options.opacity)},_addTile:function(i,c){var d=this._getTilePos(i),p=this._tileCoordsToKey(i),v=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(v),this.createTile.length<2&&V(l(this._tileReady,this,i,null,v)),mt(v,d),this._tiles[p]={el:v,coords:i,current:!0},c.appendChild(v),this.fire("tileloadstart",{tile:v,coords:i})},_tileReady:function(i,c,d){c&&this.fire("tileerror",{error:c,tile:d,coords:i});var p=this._tileCoordsToKey(i);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(vn(d.el,0),$(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),c||(ge(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),xe.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new B(this._wrapX?g(i.x,this._wrapX):i.x,this._wrapY?g(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new ee(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Jk(i){return new Bl(i)}var po=Bl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=C(this,c),c.detectRetina&&xe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var d=document.createElement("img");return Ee(d,"load",l(this._tileOnLoad,this,c,d)),Ee(d,"error",l(this._tileOnError,this,c,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var c={r:xe.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=d),c["-y"]=d}return S(this._url,s(c,this.options))},_tileOnLoad:function(i,c){xe.ielt9?setTimeout(l(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,d){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),i(d,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(i=c-i),i+p},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=x,c.onerror=x,!c.complete)){c.src=O;var d=this._tiles[i].coords;$e(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:d})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",O),Bl.prototype._removeTile.call(this,i)},_tileReady:function(i,c,d){if(!(!this._map||d&&d.getAttribute("src")===O))return Bl.prototype._tileReady.call(this,i,c,d)}});function Dx(i,c){return new po(i,c)}var Mx=po.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var d=s({},this.defaultWmsParams);for(var p in c)p in this.options||(d[p]=c[p]);c=C(this,c);var v=c.detectRetina&&xe.retina?2:1,j=this.getTileSize();d.width=j.x*v,d.height=j.y*v,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,po.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),d=this._crs,p=Y(d.project(c[0]),d.project(c[1])),v=p.min,j=p.max,W=(this._wmsVersion>=1.3&&this._crs===co?[v.y,v.x,j.y,j.x]:[v.x,v.y,j.x,j.y]).join(","),Z=po.prototype.getTileUrl.call(this,i);return Z+A(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+W},setParams:function(i,c){return s(this.wmsParams,i),c||this.redraw(),this}});function Xk(i,c){return new Mx(i,c)}po.WMS=Mx,Dx.wms=Xk;var ps=dr.extend({options:{padding:.1},initialize:function(i){C(this,i),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var d=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,c),j=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(i,c));xe.any3d?ls(this._container,j,d):mt(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),d=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new ee(d,d.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ox=ps.extend({options:{tolerance:0},getEvents:function(){var i=ps.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ps.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Ee(i,"mousemove",this._onMouseMove,this),Ee(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,$e(this._container),Ye(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ps.prototype._update.call(this);var i=this._bounds,c=this._container,d=i.getSize(),p=xe.retina?2:1;mt(c,i.min),c.width=p*d.x,c.height=p*d.y,c.style.width=d.x+"px",c.style.height=d.y+"px",xe.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ps.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[f(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,d=c.next,p=c.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete i._order,delete this._layers[f(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<c.length;v++){if(p=Number(c[v]),isNaN(p))return;d.push(p)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ee,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var d=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)i=p.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var d,p,v,j,W=i._parts,Z=W.length,G=this._ctx;if(Z){for(G.beginPath(),d=0;d<Z;d++){for(p=0,v=W[d].length;p<v;p++)j=W[d][p],G[p?"lineTo":"moveTo"](j.x,j.y);c&&G.closePath()}this._fillStroke(G,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,d=this._ctx,p=Math.max(Math.round(i._radius),1),v=(Math.max(Math.round(i._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(c.x,c.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,c){var d=c.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&(et(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(c)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(i),p&&(ge(this._container,"leaflet-interactive"),this._fireEvent([p],i,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,d){this._map._fireDOMEvent(c,d||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var d=c.next,p=c.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var d=c.next,p=c.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function Vx(i){return xe.canvas?new Ox(i):null}var Fl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),e2={_initContainer:function(){this._container=Be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ps.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=Fl("shape");ge(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=Fl("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;$e(c),i.removeInteractiveTarget(c),delete this._layers[f(i)]},_updateStyle:function(i){var c=i._stroke,d=i._fill,p=i.options,v=i._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(c||(c=i._stroke=Fl("stroke")),v.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=I(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(v.removeChild(c),i._stroke=null),p.fill?(d||(d=i._fill=Fl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),d=Math.round(i._radius),p=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){qn(i._container)},_bringToBack:function(i){Zn(i._container)}},sd=xe.vml?Fl:rt,Wl=ps.extend({_initContainer:function(){this._container=sd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$e(this._container),Ye(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ps.prototype._update.call(this);var i=this._bounds,c=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,d.setAttribute("width",c.x),d.setAttribute("height",c.y)),mt(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=sd("path");i.options.className&&ge(c,i.options.className),i.options.interactive&&ge(c,"leaflet-interactive"),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){$e(i._path),i.removeInteractiveTarget(i._path),delete this._layers[f(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,d=i.options;c&&(d.stroke?(c.setAttribute("stroke",d.color),c.setAttribute("stroke-opacity",d.opacity),c.setAttribute("stroke-width",d.weight),c.setAttribute("stroke-linecap",d.lineCap),c.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?c.setAttribute("stroke-dasharray",d.dashArray):c.removeAttribute("stroke-dasharray"),d.dashOffset?c.setAttribute("stroke-dashoffset",d.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),d.fill?(c.setAttribute("fill",d.fillColor||d.color),c.setAttribute("fill-opacity",d.fillOpacity),c.setAttribute("fill-rule",d.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,yn(i._parts,c))},_updateCircle:function(i){var c=i._point,d=Math.max(Math.round(i._radius),1),p=Math.max(Math.round(i._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",j=i._empty()?"M0 0":"M"+(c.x-d)+","+c.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(i,j)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){qn(i._path)},_bringToBack:function(i){Zn(i._path)}});xe.vml&&Wl.include(e2);function Ux(i){return xe.svg||xe.vml?new Wl(i):null}ze.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&Vx(i)||Ux(i)}});var Bx=fo.extend({initialize:function(i,c){fo.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=X(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function t2(i,c){return new Bx(i,c)}Wl.create=sd,Wl.pointsToPath=yn,ms.geometryToLayer=Yu,ms.coordsToLatLng=Xf,ms.coordsToLatLngs=Ju,ms.latLngToCoords=em,ms.latLngsToCoords=Xu,ms.getFeature=mo,ms.asFeature=ed,ze.mergeOptions({boxZoom:!0});var Fx=An.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ye(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),lr(),Xa(),this._startPoint=this._map.mouseEventToContainerPoint(i),Ee(document,{contextmenu:Er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Be("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new ee(this._point,this._startPoint),d=c.getSize();mt(this._box,c.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&($e(this._box),et(this._container,"leaflet-crosshair")),zn(),eo(),Ye(document,{contextmenu:Er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var c=new pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ze.addInitHook("addHandler","boxZoom",Fx),ze.mergeOptions({doubleClickZoom:!0});var Wx=An.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,d=c.getZoom(),p=c.options.zoomDelta,v=i.originalEvent.shiftKey?d-p:d+p;c.options.doubleClickZoom==="center"?c.setZoom(v):c.setZoomAround(i.containerPoint,v)}});ze.addInitHook("addHandler","doubleClickZoom",Wx),ze.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $x=An.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new cr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){et(this._map._container,"leaflet-grab"),et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=X(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-c+d)%i+c-d,j=(p+c+d)%i-c-d,W=Math.abs(v+d)<Math.abs(j+d)?v:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=W},_onDragEnd:function(i){var c=this._map,d=c.options,p=!d.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),p)c.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,W=d.easeLinearity,Z=v.multiplyBy(W/j),G=Z.distanceTo([0,0]),ie=Math.min(d.inertiaMaxSpeed,G),he=Z.multiplyBy(ie/G),be=ie/(d.inertiaDeceleration*W),Ae=he.multiplyBy(-be/2).round();!Ae.x&&!Ae.y?c.fire("moveend"):(Ae=c._limitOffset(Ae,c.options.maxBounds),V(function(){c.panBy(Ae,{duration:be,easeLinearity:W,noMoveStart:!0,animate:!0})}))}}});ze.addInitHook("addHandler","dragging",$x),ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Hx=An.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Ee(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ye(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,d=i.scrollTop||c.scrollTop,p=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)c[d.left[p]]=[-1*i,0];for(p=0,v=d.right.length;p<v;p++)c[d.right[p]]=[i,0];for(p=0,v=d.down.length;p<v;p++)c[d.down[p]]=[0,i];for(p=0,v=d.up.length;p<v;p++)c[d.up[p]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)c[d.zoomIn[p]]=i;for(p=0,v=d.zoomOut.length;p<v;p++)c[d.zoomOut[p]]=-i},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ye(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,d=this._map,p;if(c in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[c],i.shiftKey&&(p=F(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(F(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(c in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Er(i)}}});ze.addInitHook("addHandler","keyboard",Hx),ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qx=An.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ye(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=Cl(i),d=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),p),Er(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,j=d?Math.ceil(v/d)*d:v,W=i._limitZoom(c+(this._delta>0?j:-j))-c;this._delta=0,this._startTime=null,W&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+W):i.setZoomAround(this._lastMousePos,c+W))}});ze.addInitHook("addHandler","scrollWheelZoom",qx);var n2=600;ze.mergeOptions({tapHold:xe.touchNative&&xe.safari&&xe.mobile,tapTolerance:15});var Zx=An.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ye(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new B(c.clientX,c.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",Nt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),n2),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Ye(document,"touchend",Nt),Ye(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Ye(document,"touchend touchcancel contextmenu",this._cancel,this),Ye(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new B(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});d._simulated=!0,c.target.dispatchEvent(d)}});ze.addInitHook("addHandler","tapHold",Zx),ze.mergeOptions({touchZoom:xe.touch,bounceAtZoomLimits:!0});var Kx=An.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){et(this._map._container,"leaflet-touch-zoom"),Ye(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var d=c.mouseEventToContainerPoint(i.touches[0]),p=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),Nt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,d=c.mouseEventToContainerPoint(i.touches[0]),p=c.mouseEventToContainerPoint(i.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(v,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&v<1||this._zoom>c.getMaxZoom()&&v>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var j=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&j.x===0&&j.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var W=l(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(W,this,!0),Nt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),Ye(document,"touchmove",this._onTouchMove,this),Ye(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ze.addInitHook("addHandler","touchZoom",Kx),ze.BoxZoom=Fx,ze.DoubleClickZoom=Wx,ze.Drag=$x,ze.Keyboard=Hx,ze.ScrollWheelZoom=qx,ze.TapHold=Zx,ze.TouchZoom=Kx,n.Bounds=ee,n.Browser=xe,n.CRS=Ve,n.Canvas=Ox,n.Circle=Jf,n.CircleMarker=Qu,n.Class=Te,n.Control=wn,n.DivIcon=Lx,n.DivOverlay=zr,n.DomEvent=ra,n.DomUtil=Yf,n.Draggable=cr,n.Evented=re,n.FeatureGroup=hs,n.GeoJSON=ms,n.GridLayer=Bl,n.Handler=An,n.Icon=ho,n.ImageOverlay=td,n.LatLng=se,n.LatLngBounds=pe,n.Layer=dr,n.LayerGroup=uo,n.LineUtil=Gn,n.Map=ze,n.Marker=Gu,n.Mixin=Zu,n.Path=Zs,n.Point=B,n.PolyUtil=oo,n.Polygon=fo,n.Polyline=fs,n.Popup=nd,n.PosAnimation=Al,n.Projection=Cr,n.Rectangle=Bx,n.Renderer=ps,n.SVG=Wl,n.SVGOverlay=Rx,n.TileLayer=po,n.Tooltip=rd,n.Transformation=J,n.Util=U,n.VideoOverlay=Ax,n.bind=l,n.bounds=Y,n.canvas=Vx,n.circle=Fk,n.circleMarker=Bk,n.control=Pr,n.divIcon=Yk,n.extend=s,n.featureGroup=Ok,n.geoJSON=zx,n.geoJson=Hk,n.gridLayer=Jk,n.icon=Vk,n.imageOverlay=qk,n.latLng=ce,n.latLngBounds=X,n.layerGroup=Mk,n.map=ro,n.marker=Uk,n.point=F,n.polygon=$k,n.polyline=Wk,n.popup=Gk,n.rectangle=t2,n.setOptions=C,n.stamp=f,n.svg=Ux,n.svgOverlay=Kk,n.tileLayer=Dx,n.tooltip=Qk,n.transformation=ve,n.version=r,n.videoOverlay=Zk;var r2=window.L;n.noConflict=function(){return window.L=r2,this},window.L=n})})(_g,_g.exports);var Wf=_g.exports;const Pk=i_(Wf);function Ik(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Ck(t,e){return e==null?function(r,s){const o=D.useRef();return o.current||(o.current=t(r,s)),o}:function(r,s){const o=D.useRef();o.current||(o.current=t(r,s));const l=D.useRef(r),{instance:h}=o.current;return D.useEffect(function(){l.current!==r&&(e(h,r,l.current),l.current=r)},[h,r,s]),o}}function BD(t,e){D.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function zk(t){return function(n){const r=Ek(),s=t(Sk(n,r),r);return RD(r.map,n.attribution),UD(s.current,n.eventHandlers),BD(s.current,r),s}}function FD(t,e){const n=Ck(t,e),r=zk(n);return OD(r)}function WD(t,e){const n=Ck(t,e),r=zk(n);return VD(r)}function $D(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Ak(){return Ek().map}function HD(t){const e=Ak();return D.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function bg(){return bg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bg.apply(this,arguments)}function qD({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:o,placeholder:l,style:h,whenReady:f,zoom:m,...g},x){const[_]=D.useState({className:s,id:o,style:h}),[T,k]=D.useState(null);D.useImperativeHandle(x,()=>(T==null?void 0:T.map)??null,[T]);const C=D.useCallback(E=>{if(E!==null&&T===null){const S=new Wf.Map(E,g);n!=null&&m!=null?S.setView(n,m):t!=null&&S.fitBounds(t,e),f!=null&&S.whenReady(f),k(DD(S))}},[]);D.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const A=T?kc.createElement(Tk,{value:T},r):l??null;return kc.createElement("div",bg({},_,{ref:C}),A)}const ZD=D.forwardRef(qD),KD=FD(function({position:e,...n},r){const s=new Wf.Marker(e,n);return Ik(s,MD(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),GD=WD(function({url:e,...n},r){const s=new Wf.TileLayer(e,Sk(n,r));return Ik(s,r)},function(e,n,r){$D(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});delete Pk.Icon.Default.prototype._getIconUrl;Pk.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const QD=({onLocationSelect:t})=>(HD({click:e=>{t(e.latlng.lat,e.latlng.lng)}}),null),YD=({lat:t,lng:e})=>{const n=Ak();return D.useEffect(()=>{n.setView([t,e],16)},[t,e,n]),null},JD=()=>{var jt;const t=Nr(),{isAuthenticated:e,user:n,userData:r}=Yt(),{showToast:s}=ar(),[o,l]=D.useState(1),[h,f]=D.useState(!1),[m,g]=D.useState(null),[x,_]=D.useState(null),[T,k]=D.useState(""),[C,A]=D.useState(!1),[E,S]=D.useState([]),[I,H]=D.useState(!1),O=D.useRef(null),[R,N]=D.useState({businessName:"",profession:"",description:"",experience:"",location:{city:"",district:"",address:"",postalCode:"",lat:52.2297,lng:21.0122},services:[],features:[],workingHours:{monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"10:00",to:"14:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!1}},image:"",category:"",travelRadius:10}),[b,z]=D.useState({name:"",price:0,duration:"30 min",description:""}),[M,V]=D.useState(""),[$,U]=D.useState([52.2297,21.0122]),Te=async J=>{if(!J||J.length<3){S([]),H(!1);return}A(!0);try{const Ue=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(J)}&countrycodes=pl&addressdetails=1&limit=5`,{headers:{"Accept-Language":"pl"}})).json();S(Ue),H(!0)}catch(ve){console.error("Bd wyszukiwania:",ve)}finally{A(!1)}},fe=J=>{k(J),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{Te(J)},500)},le=J=>{const ve=parseFloat(J.lat),Ue=parseFloat(J.lon),Re=J.address;U([ve,Ue]),N(rt=>({...rt,location:{city:Re.city||Re.town||Re.village||"",district:Re.suburb||Re.neighbourhood||"",address:`${Re.road||""}${Re.house_number?" "+Re.house_number:""}`.trim(),postalCode:Re.postcode||"",lat:ve,lng:Ue}})),H(!1),k(J.display_name.split(",")[0])},re=async(J,ve)=>{try{const rt=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${J}&lon=${ve}&addressdetails=1`,{headers:{"Accept-Language":"pl"}})).json()).address;N(yn=>({...yn,location:{city:rt.city||rt.town||rt.village||"",district:rt.suburb||rt.neighbourhood||"",address:`${rt.road||""}${rt.house_number?" "+rt.house_number:""}`.trim(),postalCode:rt.postcode||"",lat:J,lng:ve}}))}catch(Ue){console.error("Bd reverse geocoding:",Ue)}},B=(J,ve)=>{U([J,ve]),re(J,ve)},Q=J=>{var Ue;const ve=(Ue=J.target.files)==null?void 0:Ue[0];if(ve){if(!ve.type.startsWith("image/")){s("Wybierz plik graficzny","error");return}if(ve.size>5*1024*1024){s("Plik za duy (max 5MB)","error");return}_(ve);const Re=new FileReader;Re.onloadend=()=>g(Re.result),Re.readAsDataURL(ve)}},F=()=>{_(null),g(null)},ee=()=>{if(!b.name||b.price<=0){s("Podaj nazw i cen usugi","error");return}const J={id:Date.now().toString(),...b};N(ve=>({...ve,services:[...ve.services,J]})),z({name:"",price:0,duration:"30 min",description:""}),s("Usuga dodana!","success")},Y=J=>{N(ve=>({...ve,services:ve.services.filter(Ue=>Ue.id!==J)}))},pe=J=>{J.trim()&&(R.features.includes(J)||(N(ve=>({...ve,features:[...ve.features,J]})),V("")))},X=J=>{N(ve=>({...ve,features:ve.features.filter(Ue=>Ue!==J)}))},se=async()=>{var J;if(!e){s("Musisz by zalogowany","error"),t("/auth?redirect=/biznes/dodaj-usluge");return}if(!R.businessName){s("Podaj nazw firmy","error"),l(1);return}if(!R.category){s("Wybierz kategori","error"),l(1);return}if(!R.location.city){s("Podaj lokalizacj","error"),l(2);return}if(R.services.length===0){s("Dodaj przynajmniej jedn usug","error"),l(3);return}f(!0);try{const ve=((J=n==null?void 0:n.id)==null?void 0:J.toString())||"";if(console.log("=== DEBUG SAVE ==="),console.log("user:",n),console.log("ownerId:",ve),console.log("formData:",R),!ve){s("Bd: brak ID uytkownika","error"),f(!1);return}const Ue=await Kt.getByOwner(ve);console.log("existingProviders:",Ue);const Re=Ue[0],rt={name:R.businessName,profession:R.profession,category:R.category,description:R.description,experience:R.experience||"",location:R.location,services:R.services.map(yn=>({...yn,id:yn.id||`service_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,category:"Usugi"})),features:R.features,image:m||(Re==null?void 0:Re.image)||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",workingHours:R.workingHours,travelRadius:R.travelRadius,hasTravel:R.features.includes("Dojazd do klienta"),acceptsCard:R.features.includes("Patno kart"),ownerEmail:(r==null?void 0:r.email)||(n==null?void 0:n.email)||"",ownerUsername:(r==null?void 0:r.username)||(n==null?void 0:n.username)||"",ownerPhone:(r==null?void 0:r.phone)||(n==null?void 0:n.phone)||"",ownerAvatar:(r==null?void 0:r.avatar)||(n==null?void 0:n.avatar)||"",isVerified:(r==null?void 0:r.isVerified)||!1};if(Re)console.log("Aktualizuj istniejcy profil:",Re.id),await Kt.update(Re.id,rt),s(" Profil zaktualizowany!","success");else{console.log("Tworz nowy profil z ownerId:",ve),console.log("providerData:",rt);const yn=await Kt.create(rt,ve);console.log("Utworzony provider:",yn),s(" Profil utworzony pomylnie!","success")}t("/biznes/uslugi")}catch(ve){console.error("Bd zapisywania:",ve),s("Bd podczas zapisywania","error")}finally{f(!1)}},ce=[{id:"fryzjer",name:"Fryzjer / Barber",icon:""},{id:"paznokcie",name:"Paznokcie / Manicure",icon:""},{id:"masaz",name:"Masa",icon:""},{id:"makijaz",name:"Makija",icon:""},{id:"tatuaze",name:"Tatuae",icon:""},{id:"kosmetyka",name:"Kosmetyka / Twarz",icon:""},{id:"inne",name:"Inne usugi",icon:""}],Ve=["15 min","30 min","45 min","1h","1h 30min","2h","2h 30min","3h"],_e=["Dojazd do klienta","Produkty premium","Konsultacja gratis","Parking","WiFi","Klimatyzacja","Patno kart","Rezerwacja online"],Qe=[{number:1,title:"Podstawowe info",icon:e_},{number:2,title:"Lokalizacja",icon:Es},{number:3,title:"Usugi i ceny",icon:ru},{number:4,title:"Szczegy",icon:su}];return a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-gray-600 hover:text-emerald-600 mb-4 transition-colors",children:[a.jsx(eu,{className:"w-5 h-5"}),"Wr"]}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dodaj now usug"}),a.jsx("p",{className:"text-gray-600",children:"Stwrz profil swojej usugi i zacznij przyjmowa klientw"})]}),a.jsx("div",{className:"flex items-center justify-between mb-8 bg-white rounded-2xl p-4 shadow-sm",children:Qe.map((J,ve)=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("button",{onClick:()=>l(J.number),className:`flex items-center gap-3 px-4 py-2 rounded-xl transition-all ${o===J.number?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":o>J.number?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:[a.jsx(J.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline font-medium",children:J.title})]}),ve<Qe.length-1&&a.jsx("div",{className:`w-8 lg:w-16 h-1 mx-2 rounded ${o>J.number?"bg-green-400":"bg-gray-200"}`})]},J.number))}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[o===1&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[a.jsx(e_,{className:"w-6 h-6 text-emerald-500"}),"Podstawowe informacje"]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nazwa firmy / salonu ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:R.businessName,onChange:J=>N({...R,businessName:J.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kategoria ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:ce.map(J=>a.jsxs("button",{type:"button",onClick:()=>N({...R,category:J.id}),className:`p-4 rounded-xl border-2 text-center transition-all ${R.category===J.id?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("span",{className:"text-2xl mb-2 block",children:J.icon}),a.jsx("span",{className:"text-sm font-medium",children:J.name})]},J.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tytu zawodowy"}),a.jsx("input",{type:"text",value:R.profession,onChange:J=>N({...R,profession:J.target.value}),placeholder:"np. Mistrz Fryzjerstwa",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zdjcie profilowe"}),m?a.jsxs("div",{className:"relative inline-block",children:[a.jsx("img",{src:m,alt:"Podgld",className:"w-48 h-48 object-cover rounded-xl shadow-md"}),a.jsx("button",{type:"button",onClick:F,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:a.jsx(Ra,{className:"w-4 h-4"})})]}):a.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-emerald-500 hover:bg-emerald-50 transition-all",children:[a.jsx(G5,{className:"w-10 h-10 mb-3 text-gray-400"}),a.jsx("p",{className:"text-sm text-gray-500",children:a.jsx("span",{className:"font-semibold text-emerald-600",children:"Kliknij aby wybra"})}),a.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG (max. 5MB)"}),a.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"hidden"})]})]})]}),o===2&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[a.jsx(Es,{className:"w-6 h-6 text-emerald-500"}),"Lokalizacja"]}),a.jsxs("div",{className:"relative z-20",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wyszukaj adres"}),a.jsxs("div",{className:"relative",children:[a.jsx(ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:T,onChange:J=>fe(J.target.value),placeholder:"Wpisz adres, np. Marszakowska 10, Warszawa",className:"w-full pl-10 pr-10 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"}),C&&a.jsx(ut,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-500 animate-spin"})]}),I&&E.length>0&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-emerald-300 rounded-xl shadow-2xl max-h-72 overflow-y-auto",children:[a.jsx("div",{className:"p-2 bg-emerald-50 border-b border-emerald-200 text-sm text-emerald-700 font-medium",children:" Wybierz adres z listy:"}),E.map(J=>a.jsxs("button",{onClick:()=>le(J),className:"w-full px-4 py-3 text-left hover:bg-emerald-50 border-b border-gray-100 last:border-0 transition-colors",children:[a.jsx("div",{className:"font-medium text-gray-900",children:J.display_name.split(",")[0]}),a.jsx("div",{className:"text-sm text-gray-500 truncate",children:J.display_name})]},J.place_id))]})]}),a.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gray-200 relative z-10",style:{height:"300px"},children:a.jsxs(ZD,{center:$,zoom:13,style:{height:"100%",width:"100%"},children:[a.jsx(GD,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.jsx(KD,{position:$}),a.jsx(QD,{onLocationSelect:B}),a.jsx(YD,{lat:$[0],lng:$[1]})]})}),a.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-2",children:[a.jsx(Es,{className:"w-4 h-4"}),"Kliknij na map aby wybra dokadn lokalizacj"]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Miasto ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:R.location.city,onChange:J=>N({...R,location:{...R.location,city:J.target.value}}),placeholder:"np. Warszawa",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dzielnica"}),a.jsx("input",{type:"text",value:R.location.district,onChange:J=>N({...R,location:{...R.location,district:J.target.value}}),placeholder:"np. Mokotw",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ulica i numer"}),a.jsx("input",{type:"text",value:R.location.address,onChange:J=>N({...R,location:{...R.location,address:J.target.value}}),placeholder:"np. ul. Marszakowska 1",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kod pocztowy"}),a.jsx("input",{type:"text",value:R.location.postalCode,onChange:J=>N({...R,location:{...R.location,postalCode:J.target.value}}),placeholder:"np. 00-001",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Maksymalny zasig dojazdu: ",a.jsxs("span",{className:"font-bold text-emerald-600",children:[R.travelRadius," km"]})]}),a.jsx("input",{type:"range",min:"1",max:"50",value:R.travelRadius,onChange:J=>N({...R,travelRadius:parseInt(J.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-emerald-500"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"1 km"}),a.jsx("span",{children:"25 km"}),a.jsx("span",{children:"50 km"})]})]})]}),o===3&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[a.jsx(ru,{className:"w-6 h-6 text-emerald-500"}),"Usugi i ceny"]}),R.services.length>0&&a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("h3",{className:"font-medium text-gray-700",children:["Dodane usugi (",R.services.length,")"]}),R.services.map(J=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:J.name}),a.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-3",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ln,{className:"w-3 h-3"})," ",J.duration]}),a.jsxs("span",{className:"font-semibold text-emerald-600",children:[J.price," z"]})]})]}),a.jsx("button",{onClick:()=>Y(J.id),className:"p-2 text-red-500 hover:bg-red-100 rounded-lg",children:a.jsx(Eu,{className:"w-5 h-5"})})]},J.id))]}),a.jsxs("div",{className:"p-6 bg-emerald-50 rounded-xl",children:[a.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[a.jsx(bs,{className:"w-5 h-5"}),"Dodaj now usug"]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nazwa usugi *"}),a.jsx("input",{type:"text",value:b.name,onChange:J=>z({...b,name:J.target.value}),placeholder:"np. Strzyenie damskie",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Cena (z) *"}),a.jsx("input",{type:"number",value:b.price||"",onChange:J=>z({...b,price:Number(J.target.value)}),placeholder:"np. 80",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Czas trwania"}),a.jsx("select",{value:b.duration,onChange:J=>z({...b,duration:J.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none",children:Ve.map(J=>a.jsx("option",{value:J,children:J},J))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Opis (opcjonalnie)"}),a.jsx("input",{type:"text",value:b.description,onChange:J=>z({...b,description:J.target.value}),placeholder:"Krtki opis",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),a.jsxs("button",{type:"button",onClick:ee,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[a.jsx(bs,{className:"w-5 h-5"}),"Dodaj usug"]})]})]}),o===4&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[a.jsx(su,{className:"w-6 h-6 text-emerald-500"}),"Dodatkowe informacje"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis dziaalnoci"}),a.jsx("textarea",{value:R.description,onChange:J=>N({...R,description:J.target.value}),placeholder:"Opisz swoj dziaalno...",rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none resize-none"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(qh,{className:"w-5 h-5"}),"Dowiadczenie i kwalifikacje"]}),a.jsx("textarea",{value:R.experience,onChange:J=>N({...R,experience:J.target.value}),placeholder:"np. 10 lat dowiadczenia, certyfikaty...",rows:3,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Udogodnienia"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:R.features.map(J=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm",children:[J,a.jsx("button",{onClick:()=>X(J),className:"hover:text-red-500",children:""})]},J))}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:_e.filter(J=>!R.features.includes(J)).map(J=>a.jsxs("button",{type:"button",onClick:()=>pe(J),className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm hover:bg-gray-200",children:["+ ",J]},J))})]}),a.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl",children:[a.jsx("h3",{className:"font-bold text-lg mb-4",children:" Podsumowanie"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Nazwa:"})," ",a.jsx("strong",{children:R.businessName||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Kategoria:"})," ",a.jsx("strong",{children:((jt=ce.find(J=>J.id===R.category))==null?void 0:jt.name)||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Lokalizacja:"})," ",a.jsxs("strong",{children:[R.location.city,R.location.district&&`, ${R.location.district}`]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Liczba usug:"})," ",a.jsx("strong",{children:R.services.length})]})]})]})]}),a.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-100",children:[a.jsx("button",{type:"button",onClick:()=>l(J=>Math.max(1,J-1)),disabled:o===1,className:"px-6 py-2 border border-gray-300 rounded-xl font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:" Wstecz"}),o<4?a.jsx("button",{type:"button",onClick:()=>l(J=>Math.min(4,J+1)),className:"px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg",children:"Dalej "}):a.jsx("button",{type:"button",onClick:se,disabled:h,className:"px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg disabled:opacity-50 flex items-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fa,{className:"w-5 h-5"}),"Zapisz usug"]})})]})]})]})},XD=()=>{const{user:t}=Yt(),{showToast:e}=ar(),[n,r]=D.useState(new Date),[s,o]=D.useState(new Date().toISOString().split("T")[0]),[l,h]=D.useState("week"),[f,m]=D.useState([]),[g,x]=D.useState(null),[_,T]=D.useState(!1),[k,C]=D.useState(!0);D.useEffect(()=>{(async()=>{if(!t||!t.id){console.log("BusinessCalendar: No user or user.id"),C(!1);return}console.log("BusinessCalendar: Loading for user",t.id);try{const B=await Kt.getByOwner(t.id);if(console.log("BusinessCalendar: Found providers",B.length),B.length>0){const Q=B[0],F=nr.subscribeToProviderBookings(Q.id,ee=>{console.log("BusinessCalendar: Got bookings",ee.length),m(ee),C(!1)});return()=>F()}else C(!1)}catch(B){console.error("BusinessCalendar: Error loading bookings:",B),C(!1)}})()},[t]);const A=async re=>{try{await nr.confirm(re),e("Rezerwacja potwierdzona! ","success")}catch{e("Bd potwierdzania rezerwacji","error")}},E=async re=>{try{await nr.cancel(re,"provider"),e("Rezerwacja anulowana","info"),T(!1),x(null)}catch{e("Bd anulowania rezerwacji","error")}},S=async re=>{try{await nr.complete(re),e("Usuga oznaczona jako zakoczona! ","success"),T(!1),x(null)}catch{e("Bd oznaczania usugi","error")}},I=()=>{const re=new Date(n);l==="month"?re.setMonth(re.getMonth()-1):l==="week"?re.setDate(re.getDate()-7):re.setDate(re.getDate()-1),r(re)},H=()=>{const re=new Date(n);l==="month"?re.setMonth(re.getMonth()+1):l==="week"?re.setDate(re.getDate()+7):re.setDate(re.getDate()+1),r(re)},O=()=>{r(new Date),o(new Date().toISOString().split("T")[0])},R=re=>{const B=re.getFullYear(),Q=re.getMonth(),F=new Date(B,Q,1),ee=new Date(B,Q+1,0),Y=[],pe=F.getDay()||7;for(let se=pe-1;se>0;se--)Y.push(new Date(B,Q,1-se));for(let se=1;se<=ee.getDate();se++)Y.push(new Date(B,Q,se));const X=42-Y.length;for(let se=1;se<=X;se++)Y.push(new Date(B,Q+1,se));return Y},N=re=>{const B=[],Q=new Date(re),F=Q.getDay()||7;Q.setDate(Q.getDate()-F+1);for(let ee=0;ee<7;ee++)B.push(new Date(Q.getTime()+ee*864e5));return B},b=re=>re.toISOString().split("T")[0],z=re=>f.filter(B=>B.date===re).sort((B,Q)=>B.time.localeCompare(Q.time)),M=re=>{switch(re){case"confirmed":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"completed":return"bg-gray-100 text-gray-700 border-gray-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700"}},V=re=>{switch(re){case"confirmed":return"Potwierdzona";case"pending":return"Oczekuje";case"completed":return"Zakoczona";case"cancelled":return"Anulowana";default:return re}},$=async(re,B)=>{try{B==="confirmed"?await A(re):B==="cancelled"?await E(re):B==="completed"&&await S(re)}catch{e("Bd zmiany statusu","error")}};if(k)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(ut,{className:"w-12 h-12 animate-spin text-emerald-500"})});const U=Array.from({length:12},(re,B)=>B+8),Te=["Pon","Wt","r","Czw","Pt","Sob","Nd"],fe=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],le=N(n);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kalendarz"}),a.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoimi rezerwacjami"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:O,className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-medium hover:bg-gray-50",children:"Dzisiaj"}),a.jsx("div",{className:"flex bg-white border border-gray-200 rounded-lg overflow-hidden",children:["day","week","month"].map(re=>a.jsx("button",{onClick:()=>h(re),className:`px-4 py-2 text-sm font-medium transition-colors ${l===re?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:re==="day"?"Dzie":re==="week"?"Tydzie":"Miesic"},re))})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(_k,{className:"w-5 h-5"})}),a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:l==="day"?new Date(s).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):l==="week"?`${le[0].toLocaleDateString("pl-PL",{day:"numeric",month:"short"})} - ${le[6].toLocaleDateString("pl-PL",{day:"numeric",month:"short",year:"numeric"})}`:`${fe[n.getMonth()]} ${n.getFullYear()}`}),a.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(nu,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[l==="week"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[a.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500 border-r border-gray-200",children:"Godzina"}),le.map((re,B)=>{const Q=b(re),F=Q===new Date().toISOString().split("T")[0],ee=z(Q);return a.jsxs("div",{className:`p-3 text-center border-r border-gray-200 last:border-r-0 cursor-pointer hover:bg-gray-50 ${F?"bg-emerald-50":""}`,onClick:()=>o(Q),children:[a.jsx("div",{className:"text-xs text-gray-500",children:Te[B]}),a.jsx("div",{className:`text-lg font-bold ${F?"text-emerald-600":"text-gray-900"}`,children:re.getDate()}),ee.length>0&&a.jsxs("div",{className:"text-xs text-emerald-600 font-medium",children:[ee.length," rez."]})]},B)})]}),a.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:U.map(re=>a.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-100",children:[a.jsxs("div",{className:"p-2 text-center text-sm text-gray-500 border-r border-gray-200 bg-gray-50",children:[re,":00"]}),le.map((B,Q)=>{const F=b(B),ee=f.filter(Y=>Y.date===F&&parseInt(Y.time.split(":")[0])===re);return a.jsx("div",{className:"p-1 border-r border-gray-100 last:border-r-0 min-h-[60px] relative",children:ee.map(Y=>a.jsxs("button",{onClick:()=>{x(Y),T(!0)},className:`w-full text-left p-2 rounded-lg text-xs mb-1 border ${M(Y.status)} hover:shadow-md transition-shadow`,children:[a.jsx("div",{className:"font-bold truncate",children:Y.time}),a.jsx("div",{className:"truncate",children:Y.clientName}),a.jsx("div",{className:"truncate text-gray-600",children:Y.serviceName})]},Y.id))},Q)})]},re))})]}),l==="day"&&a.jsxs("div",{className:"p-4",children:[a.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[a.jsx(Un,{className:"w-5 h-5 text-emerald-500"}),"Rezerwacje na ",new Date(s).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long"})]}),a.jsx("div",{className:"space-y-3",children:U.map(re=>{const B=f.filter(Q=>Q.date===s&&parseInt(Q.time.split(":")[0])===re);return a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"w-16 text-sm text-gray-500 font-medium pt-2",children:[re,":00"]}),a.jsx("div",{className:"flex-1 min-h-[60px] border-l-2 border-gray-200 pl-4",children:B.length===0?a.jsx("div",{className:"text-sm text-gray-400 py-2",children:""}):B.map(Q=>a.jsx("button",{onClick:()=>{x(Q),T(!0)},className:`w-full text-left p-4 rounded-xl border-2 mb-2 ${M(Q.status)} hover:shadow-lg transition-all`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-bold text-gray-900",children:[Q.time," - ",Q.clientName]}),a.jsx("div",{className:"text-sm mt-1",children:Q.serviceName}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[Q.serviceDuration," min  ",Q.servicePrice," z"]})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M(Q.status)}`,children:V(Q.status)})]})},Q.id))})]},re)})})]}),l==="month"&&a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Te.map(re=>a.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:re},re))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:R(n).map((re,B)=>{const Q=b(re),F=re.getMonth()===n.getMonth(),ee=Q===new Date().toISOString().split("T")[0],Y=Q===s,pe=z(Q);return a.jsxs("button",{onClick:()=>{o(Q),h("day")},className:`p-2 min-h-[80px] rounded-lg text-left transition-all ${F?"bg-white":"bg-gray-50"} ${ee?"ring-2 ring-emerald-500":""} ${Y?"bg-emerald-50":""} hover:bg-gray-100`,children:[a.jsx("div",{className:`text-sm font-medium ${F?"text-gray-900":"text-gray-400"}`,children:re.getDate()}),pe.slice(0,2).map(X=>a.jsxs("div",{className:`text-xs p-1 rounded mt-1 truncate ${M(X.status)}`,children:[X.time," ",X.clientName.split(" ")[0]]},X.id)),pe.length>2&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",pe.length-2," wicej"]})]},B)})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"font-bold text-lg mb-4",children:"Podsumowanie dnia"}),a.jsxs("div",{className:"grid sm:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:z(new Date().toISOString().split("T")[0]).length}),a.jsx("div",{className:"text-sm text-blue-600",children:"Rezerwacje dzi"})]}),a.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:f.filter(re=>re.status==="pending").length}),a.jsx("div",{className:"text-sm text-yellow-600",children:"Oczekujce"})]}),a.jsxs("div",{className:"p-4 bg-green-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.filter(re=>re.status==="confirmed").length}),a.jsx("div",{className:"text-sm text-green-600",children:"Potwierdzone"})]}),a.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[f.filter(re=>re.date===new Date().toISOString().split("T")[0]).reduce((re,B)=>re+B.servicePrice,0)," z"]}),a.jsx("div",{className:"text-sm text-purple-600",children:"Przychd dzi"})]})]})]}),_&&g&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold",children:"Szczegy rezerwacji"}),a.jsx("button",{onClick:()=>{T(!1),x(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(Ra,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Status:"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M(g.status)}`,children:V(g.status)})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(jr,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"font-medium",children:g.clientName})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Aa,{className:"w-5 h-5 text-gray-400"}),a.jsx("a",{href:`tel:${g.clientPhone}`,className:"text-emerald-600 hover:underline",children:g.clientPhone})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ri,{className:"w-5 h-5 text-gray-400"}),a.jsx("a",{href:`mailto:${g.clientEmail}`,className:"text-emerald-600 hover:underline",children:g.clientEmail})]})]}),a.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl",children:[a.jsx("div",{className:"font-bold text-emerald-700",children:g.serviceName}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-emerald-600",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ln,{className:"w-4 h-4"}),g.time]}),a.jsx("span",{children:g.serviceDuration}),a.jsxs("span",{className:"font-bold",children:[g.servicePrice," z"]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[g.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>$(g.id,"confirmed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600",children:[a.jsx(St,{className:"w-5 h-5"}),"Potwierd"]}),a.jsxs("button",{onClick:()=>$(g.id,"cancelled"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600",children:[a.jsx(Ra,{className:"w-5 h-5"}),"Anuluj"]})]}),g.status==="confirmed"&&a.jsxs("button",{onClick:()=>$(g.id,"completed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600",children:[a.jsx(St,{className:"w-5 h-5"}),"Oznacz jako zakoczone"]})]})]})]})})})]})},eM=()=>{const{user:t}=Yt(),[e,n]=D.useState("month"),[r,s]=D.useState(!0),[o,l]=D.useState({revenue:{total:0,change:0,byDay:[]},bookings:{total:0,change:0,completed:0,cancelled:0,pending:0,confirmed:0},clients:{total:0,new:0,returning:0},rating:{average:0,count:0,distribution:[]},topServices:[],peakHours:[]});if(D.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){s(!1);return}try{const k=await Kt.getByOwner(t.id);if(k.length===0){s(!1);return}const C=k[0],A=await nr.getByProvider(C.id),E=new Date;let S;e==="week"?S=new Date(E.getTime()-6048e5):e==="month"?S=new Date(E.getTime()-2592e6):S=new Date(E.getTime()-31536e6);const I=A.filter(Y=>new Date(Y.createdAt)>=S),H=I.filter(Y=>Y.status==="completed").length,O=I.filter(Y=>Y.status==="cancelled").length,R=I.filter(Y=>Y.status==="pending").length,N=I.filter(Y=>Y.status==="confirmed").length,b=I.filter(Y=>Y.status==="completed"||Y.status==="confirmed").reduce((Y,pe)=>Y+(pe.servicePrice||0),0),M=["Nd","Pon","Wt","r","Czw","Pt","Sob"].map(Y=>({day:Y,amount:0}));I.filter(Y=>Y.status==="completed"||Y.status==="confirmed").forEach(Y=>{const pe=new Date(Y.date).getDay();M[pe].amount+=Y.servicePrice||0});const V=M.shift();M.push(V);const $=new Set(I.map(Y=>Y.clientId)),U={};I.forEach(Y=>{U[Y.clientId]=(U[Y.clientId]||0)+1});const Te=Object.values(U).filter(Y=>Y>1).length,fe={};I.forEach(Y=>{fe[Y.serviceName]||(fe[Y.serviceName]={count:0,revenue:0}),fe[Y.serviceName].count++,(Y.status==="completed"||Y.status==="confirmed")&&(fe[Y.serviceName].revenue+=Y.servicePrice||0)});const le=Object.entries(fe).map(([Y,pe])=>({name:Y,...pe})).sort((Y,pe)=>pe.revenue-Y.revenue).slice(0,4),re={};for(let Y=9;Y<=18;Y++)re[`${Y}:00`]=0;I.forEach(Y=>{var X;const pe=(X=Y.time)==null?void 0:X.split(":")[0];pe&&re[`${pe}:00`]!==void 0&&re[`${pe}:00`]++});const B=Object.entries(re).map(([Y,pe])=>({hour:Y,bookings:pe})),Q=C.rating||0,F=C.reviewsCount||0,ee=[{stars:5,count:Math.round(F*.7)},{stars:4,count:Math.round(F*.2)},{stars:3,count:Math.round(F*.07)},{stars:2,count:Math.round(F*.02)},{stars:1,count:Math.round(F*.01)}];l({revenue:{total:b,change:0,byDay:M},bookings:{total:I.length,change:0,completed:H,cancelled:O,pending:R,confirmed:N},clients:{total:$.size,new:$.size-Te,returning:Te},rating:{average:Q,count:F,distribution:ee},topServices:le,peakHours:B})}catch(k){console.error("Error loading stats:",k)}finally{s(!1)}})()},[t,e]),r)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(ut,{className:"w-12 h-12 animate-spin text-emerald-500"})});const h=Math.max(...o.revenue.byDay.map(T=>T.amount),1),f=Math.max(...o.peakHours.map(T=>T.bookings),1),m=o.rating.distribution.reduce((T,k)=>T+k.count,0)||1,g=o.bookings.total||1,x=o.peakHours.reduce((T,k)=>k.bookings>T.bookings?k:T,{hour:"-",bookings:0}),_=[{title:"Przychd",value:`${o.revenue.total.toLocaleString()} z`,change:o.revenue.change,icon:ru,bgColor:"bg-emerald-100",textColor:"text-emerald-600"},{title:"Rezerwacje",value:o.bookings.total,change:o.bookings.change,icon:Un,bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Klienci",value:o.clients.total,subtitle:`${o.clients.new} nowych`,icon:Yh,bgColor:"bg-purple-100",textColor:"text-purple-600"},{title:"Ocena",value:o.rating.average.toFixed(1),subtitle:`${o.rating.count} opinii`,icon:Br,bgColor:"bg-amber-100",textColor:"text-amber-600"},{title:"Ukoczone",value:o.bookings.completed,subtitle:"usug",icon:ln,bgColor:"bg-pink-100",textColor:"text-pink-600"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Statystyki"}),a.jsx("p",{className:"text-gray-600",children:"Analizuj wyniki swojego biznesu"})]}),a.jsx("div",{className:"flex bg-white border border-gray-200 rounded-lg overflow-hidden",children:["week","month","year"].map(T=>a.jsx("button",{onClick:()=>n(T),className:`px-4 py-2 text-sm font-medium transition-colors ${e===T?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:T==="week"?"Tydzie":T==="month"?"Miesic":"Rok"},T))})]}),a.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-5 gap-4",children:_.map((T,k)=>a.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${T.bgColor}`,children:a.jsx(T.icon,{className:`w-5 h-5 ${T.textColor}`})}),T.change!==void 0&&T.change!==0&&a.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${T.change>=0?"text-green-600":"text-red-600"}`,children:[T.change>=0?a.jsx(N5,{className:"w-4 h-4"}):a.jsx(b5,{className:"w-4 h-4"}),Math.abs(T.change),"%"]})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:T.value}),a.jsx("div",{className:"text-sm text-gray-500",children:T.subtitle||T.title})]},k))}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(wk,{className:"w-5 h-5 text-emerald-500"}),"Przychody wedug dni"]}),a.jsxs("span",{className:"text-2xl font-bold text-emerald-600",children:[o.revenue.total.toLocaleString()," z"]})]}),a.jsx("div",{className:"flex items-end justify-between gap-2 h-48",children:o.revenue.byDay.map((T,k)=>a.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[a.jsx("div",{className:"w-full relative flex flex-col justify-end h-40",children:a.jsx("div",{className:"w-full bg-gradient-to-t from-emerald-500 to-emerald-400 rounded-t-lg transition-all hover:from-emerald-600 hover:to-emerald-500",style:{height:`${T.amount/h*100}%`,minHeight:T.amount>0?"8px":"0"}})}),a.jsx("div",{className:"mt-2 text-xs text-gray-500 font-medium",children:T.day}),a.jsx("div",{className:"text-xs text-gray-400",children:T.amount>0?`${T.amount}`:"-"})]},k))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[a.jsx(ln,{className:"w-5 h-5 text-blue-500"}),"Godziny rezerwacji"]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.peakHours.map((T,k)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 text-sm text-gray-600 font-medium",children:T.hour}),a.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full",style:{width:`${T.bookings/f*100}%`}})}),a.jsx("div",{className:"w-8 text-sm text-gray-600 font-medium text-right",children:T.bookings})]},k))}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:a.jsxs("p",{className:"text-sm text-gray-500",children:[" Popularna godzina: ",a.jsx("strong",{children:x.hour})," (",x.bookings," rez.)"]})})]})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[a.jsx(U5,{className:"w-5 h-5 text-purple-500"}),"Status rezerwacji"]}),a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsxs("div",{className:"relative w-40 h-40",children:[o.bookings.total>0?a.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90",children:[a.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10b981",strokeWidth:"20",strokeDasharray:`${o.bookings.completed/g*251.2} 251.2`}),a.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3b82f6",strokeWidth:"20",strokeDasharray:`${o.bookings.confirmed/g*251.2} 251.2`,strokeDashoffset:`-${o.bookings.completed/g*251.2}`}),a.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#f59e0b",strokeWidth:"20",strokeDasharray:`${o.bookings.pending/g*251.2} 251.2`,strokeDashoffset:`-${(o.bookings.completed+o.bookings.confirmed)/g*251.2}`}),a.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ef4444",strokeWidth:"20",strokeDasharray:`${o.bookings.cancelled/g*251.2} 251.2`,strokeDashoffset:`-${(o.bookings.completed+o.bookings.confirmed+o.bookings.pending)/g*251.2}`})]}):a.jsx("div",{className:"w-full h-full rounded-full border-8 border-gray-200"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:o.bookings.total}),a.jsx("div",{className:"text-xs text-gray-500",children:"rezerwacji"})]})})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Zakoczone"})]}),a.jsx("span",{className:"font-medium",children:o.bookings.completed})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Potwierdzone"})]}),a.jsx("span",{className:"font-medium",children:o.bookings.confirmed})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Oczekujce"})]}),a.jsx("span",{className:"font-medium",children:o.bookings.pending})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Anulowane"})]}),a.jsx("span",{className:"font-medium",children:o.bookings.cancelled})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[a.jsx(Br,{className:"w-5 h-5 text-amber-500"}),"Rozkad ocen"]}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-5xl font-bold text-gray-900",children:o.rating.average.toFixed(1)}),a.jsx("div",{className:"flex items-center justify-center gap-1 mt-2",children:[1,2,3,4,5].map(T=>a.jsx(Br,{className:`w-5 h-5 ${T<=Math.round(o.rating.average)?"text-amber-400 fill-amber-400":"text-gray-300"}`},T))}),a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[o.rating.count," opinii"]})]}),a.jsx("div",{className:"space-y-2",children:o.rating.distribution.map(T=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-1 w-12",children:[a.jsx("span",{className:"text-sm font-medium",children:T.stars}),a.jsx(Br,{className:"w-3 h-3 text-amber-400 fill-amber-400"})]}),a.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-amber-400 rounded-full",style:{width:`${T.count/m*100}%`}})}),a.jsx("span",{className:"text-sm text-gray-600 w-8 text-right",children:T.count})]},T.stars))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[a.jsx(bk,{className:"w-5 h-5 text-emerald-500"}),"Top usugi"]}),o.topServices.length>0?a.jsx("div",{className:"space-y-4",children:o.topServices.map((T,k)=>a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-white ${k===0?"bg-amber-500":k===1?"bg-gray-400":k===2?"bg-amber-700":"bg-gray-300"}`,children:k+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 truncate",children:T.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:[T.count," rezerwacji"]})]}),a.jsxs("div",{className:"font-bold text-emerald-600",children:[T.revenue," z"]})]},k))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Un,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"Brak danych"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[a.jsx(Yh,{className:"w-5 h-5 text-purple-500"}),"Klienci"]}),a.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-600",children:o.clients.total}),a.jsx("div",{className:"text-sm text-purple-600 mt-1",children:"Wszystkich klientw"})]}),a.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-xl",children:[a.jsx("div",{className:"text-4xl font-bold text-green-600",children:o.clients.new}),a.jsx("div",{className:"text-sm text-green-600 mt-1",children:"Nowych klientw"})]}),a.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-xl",children:[a.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[o.clients.total>0?Math.round(o.clients.returning/o.clients.total*100):0,"%"]}),a.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Powracajcych"})]})]})]})]})},tM=()=>{const{user:t}=Yt(),[e,n]=D.useState([]),[r,s]=D.useState(null),[o,l]=D.useState([]),[h,f]=D.useState(""),[m,g]=D.useState(""),[x,_]=D.useState(!0),[T,k]=D.useState(!1),[,C]=D.useState(null),A=D.useRef(null);D.useEffect(()=>{if(!(t!=null&&t.id)){_(!1);return}const O=async()=>{try{const N=await Kt.getByOwner(t.id);if(N.length===0){_(!1);return}const b=N[0];return C(b.id),Or.subscribeToProviderConversations(b.id,M=>{n(M),_(!1)})}catch(N){console.error("Error loading messages:",N),_(!1)}};let R;return O().then(N=>{R=N}),()=>{R&&R()}},[t==null?void 0:t.id]),D.useEffect(()=>{if(!r||!(t!=null&&t.id))return;Or.markAsRead(r.id,t.id);const O=Or.subscribeToMessages(r.id,R=>{l(R)});return()=>O()},[r,t==null?void 0:t.id]),D.useEffect(()=>{var O;(O=A.current)==null||O.scrollIntoView({behavior:"smooth"})},[o]);const E=async()=>{if(!(!h.trim()||!r||!(t!=null&&t.id))){k(!0);try{const O=r.participants.find(R=>R!==t.id)||"";await Or.sendMessage(r.id,t.id,t.username||"Uytkownik",t.avatar||"",h.trim(),O),f("")}catch(O){console.error("Error sending message:",O)}finally{k(!1)}}},S=O=>{if(!(t!=null&&t.id))return{name:"Nieznany",avatar:""};const R=O.participants.find(N=>N!==t.id)||"";return{name:O.participantNames[R]||"Nieznany",avatar:O.participantAvatars[R]||""}},I=O=>{const R=new Date(O),b=new Date().getTime()-R.getTime(),z=Math.floor(b/6e4),M=Math.floor(b/36e5),V=Math.floor(b/864e5);return z<1?"Teraz":z<60?`${z} min`:M<24?`${M}h`:V<7?`${V}d`:R.toLocaleDateString("pl-PL")},H=e.filter(O=>S(O).name.toLowerCase().includes(m.toLowerCase()));return x?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(ut,{className:"w-12 h-12 animate-spin text-emerald-500"})}):a.jsxs("div",{className:"h-[calc(100vh-180px)] flex bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsxs("div",{className:`w-full md:w-80 lg:w-96 border-r border-gray-100 flex flex-col ${r?"hidden md:flex":""}`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-100",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Wiadomoci"}),a.jsxs("div",{className:"relative",children:[a.jsx(ku,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Szukaj...",value:m,onChange:O=>g(O.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:H.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(Yr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"Brak wiadomoci"}),a.jsx("p",{className:"text-sm mt-1",children:"Gdy klient napisze, pojawi si tutaj"})]}):H.map(O=>{const R=S(O),N=t!=null&&t.id&&O.unreadCount[t.id]||0;return a.jsx("div",{onClick:()=>s(O),className:`p-4 border-b border-gray-50 cursor-pointer transition-colors ${(r==null?void 0:r.id)===O.id?"bg-emerald-50":"hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[R.avatar?a.jsx("img",{src:R.avatar,alt:R.name,className:"w-12 h-12 rounded-full object-cover"}):a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center text-white font-bold",children:R.name.charAt(0).toUpperCase()}),N>0&&a.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:N})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:R.name}),a.jsx("span",{className:"text-xs text-gray-500",children:I(O.lastMessageAt)})]}),a.jsx("p",{className:`text-sm truncate ${N>0?"font-medium text-gray-900":"text-gray-500"}`,children:O.lastMessage||"Brak wiadomoci"})]})]})},O.id)})})]}),r?a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>s(null),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg",children:""}),(()=>{const O=S(r);return a.jsxs(a.Fragment,{children:[O.avatar?a.jsx("img",{src:O.avatar,alt:O.name,className:"w-10 h-10 rounded-full object-cover"}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center text-white font-bold",children:O.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:O.name}),a.jsx("div",{className:"text-xs text-gray-500",children:"Klient"})]})]})})()]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:a.jsx(Aa,{className:"w-5 h-5"})}),a.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:a.jsx(Y5,{className:"w-5 h-5"})}),a.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:a.jsx(O5,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[o.length===0?a.jsx("div",{className:"text-center text-gray-500 py-8",children:a.jsx("p",{children:"Rozpocznij rozmow"})}):o.map(O=>{const R=O.senderId===(t==null?void 0:t.id);return a.jsx("div",{className:`flex ${R?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2 ${R?"bg-emerald-500 text-white":"bg-white text-gray-900 shadow-sm"}`,children:[a.jsx("p",{children:O.text}),a.jsx("div",{className:`text-xs mt-1 ${R?"text-emerald-100":"text-gray-400"}`,children:I(O.createdAt)})]})},O.id)}),a.jsx("div",{ref:A})]}),a.jsx("div",{className:"p-4 border-t border-gray-100",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),onKeyPress:O=>O.key==="Enter"&&E(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),a.jsx("button",{onClick:E,disabled:!h.trim()||T,className:"p-3 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed",children:T?a.jsx(ut,{className:"w-5 h-5 animate-spin"}):a.jsx(Qh,{className:"w-5 h-5"})})]})})]}):a.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx(Yr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("p",{className:"text-lg",children:"Wybierz konwersacj"}),a.jsx("p",{className:"text-sm",children:"lub poczekaj na wiadomo od klienta"})]})})]})},s_=()=>{const{user:t,login:e,logout:n}=Yt(),{showToast:r}=ar(),[s,o]=D.useState(null),[l,h]=D.useState(!0),m=(F=>{if(!F)return{countryCode:"+48",number:""};const ee=F.match(/^(\+\d{1,3})\s?(.*)$/);return ee?{countryCode:ee[1],number:ee[2]}:{countryCode:"+48",number:F}})(t==null?void 0:t.phone),[g,x]=D.useState({username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||"",phone:m.number,phoneCountryCode:m.countryCode,businessName:(t==null?void 0:t.businessName)||""}),[_,T]=D.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[k,C]=D.useState({current:!1,new:!1,confirm:!1}),[A,E]=D.useState({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),[S,I]=D.useState({emailBookings:!0,emailMessages:!0,emailMarketing:!1,smsBookings:!0,smsReminders:!0,pushNotifications:!0}),[H,O]=D.useState({profileVisible:!0,showPhone:!1,showEmail:!1}),[R,N]=D.useState("profile"),[b,z]=D.useState(!1);D.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){h(!1);return}try{const ee=await Kt.getByOwner(t.id);if(ee.length>0){const Y=ee[0];o(Y),E(Y.workingHours)}}catch(ee){console.error("Error loading provider:",ee)}finally{h(!1)}})()},[t==null?void 0:t.id]);const M=async()=>{z(!0);const F=g.username.trim().split(/\s+/);if(F.length<2||F.some(se=>se.length<2)){r("Podaj pene imi i nazwisko (np. Jan Kowalski)","error"),z(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)){r("Nieprawidowy adres email","error"),z(!1);return}if(g.phone){const se=Sx(g.phoneCountryCode,g.phone);if(!se.valid){r(se.message,"error"),z(!1);return}}await new Promise(se=>setTimeout(se,500));const Y=g.phone.replace(/\D/g,""),pe=`${g.phoneCountryCode} ${Y}`,X={...t,username:g.username,email:g.email,phone:pe,businessName:g.businessName};e(X),r("Profil zaktualizowany pomylnie","success"),z(!1)},V=async()=>{if(!s){r("Najpierw utwrz profil usugodawcy","error");return}for(const[F,ee]of Object.entries(A))if(ee.enabled){const Y=parseInt(ee.from.split(":")[0]),pe=parseInt(ee.to.split(":")[0]);if(Y>=pe){r(`${{monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"}[F]}: Godzina otwarcia musi by wczeniejsza ni zamknicia`,"error");return}}z(!0);try{await Kt.update(s.id,{workingHours:A}),o({...s,workingHours:A}),r("Godziny pracy zostay zapisane","success")}catch(F){console.error("Error saving working hours:",F),r("Bd zapisu godzin pracy","error")}finally{z(!1)}},$=async()=>{if(!_.currentPassword){r("Podaj aktualne haso","error");return}if(_.newPassword.length<8){r("Nowe haso musi mie minimum 8 znakw","error");return}if(!/[A-Z]/.test(_.newPassword)){r("Haso musi zawiera co najmniej jedn wielk liter","error");return}if(!/[a-z]/.test(_.newPassword)){r("Haso musi zawiera co najmniej jedn ma liter","error");return}if(!/[0-9]/.test(_.newPassword)){r("Haso musi zawiera co najmniej jedn cyfr","error");return}if(_.newPassword!==_.confirmPassword){r("Hasa nie s takie same","error");return}z(!0),await new Promise(F=>setTimeout(F,500)),r("Haso zostao zmienione","success"),T({currentPassword:"",newPassword:"",confirmPassword:""}),z(!1)},U=async()=>{z(!0),await new Promise(F=>setTimeout(F,500)),r("Ustawienia powiadomie zapisane","success"),z(!1)},Te=async()=>{z(!0),await new Promise(F=>setTimeout(F,500)),r("Ustawienia prywatnoci zapisane","success"),z(!1)},fe=()=>{const F=window.prompt("Aby usun konto, wpisz swoje haso:");if(F!==null){if(!F||F.length<8){r("Nieprawidowe haso","error");return}window.confirm("UWAGA: Czy na pewno chcesz usun swoje konto? Wszystkie Twoje dane, usugi i rezerwacje zostan trwale usunite. Ta operacja jest nieodwracalna!")&&(n(),r("Konto zostao usunite","info"))}},le=(F,ee,Y)=>{E(pe=>({...pe,[F]:{...pe[F],[ee]:Y}}))},re=[];for(let F=0;F<24;F++)for(let ee=0;ee<60;ee+=30){const Y=`${String(F).padStart(2,"0")}:${String(ee).padStart(2,"0")}`;re.push(Y)}const B={monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"},Q=[{id:"profile",label:"Profil",icon:jr},{id:"hours",label:"Godziny pracy",icon:ln},{id:"password",label:"Haso",icon:la},{id:"notifications",label:"Powiadomienia",icon:Ni},{id:"privacy",label:"Prywatno",icon:Tu},{id:"billing",label:"Patnoci",icon:Kh},{id:"danger",label:"Strefa zagroenia",icon:Xw}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ustawienia"}),a.jsx("p",{className:"text-gray-600",children:"Zarzdzaj ustawieniami swojego konta i profilu"})]}),a.jsxs("div",{className:"grid lg:grid-cols-[250px,1fr] gap-6",children:[a.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:a.jsx("nav",{className:"space-y-1",children:Q.map(F=>a.jsxs("button",{onClick:()=>N(F.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-colors ${R===F.id?"bg-emerald-50 text-emerald-700 font-medium":"text-gray-600 hover:bg-gray-50"} ${F.id==="danger"?"text-red-600 hover:bg-red-50":""}`,children:[a.jsx(F.icon,{className:`w-5 h-5 ${F.id==="danger"?"text-red-500":""}`}),F.label]},F.id))})}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[R==="profile"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Informacje profilowe"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Zaktualizuj swoje dane osobowe"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),a.jsxs("div",{className:"relative",children:[a.jsx(jr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:g.username,onChange:F=>x({...g,username:F.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"Jan Kowalski"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ri,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:g.email,onChange:F=>x({...g,email:F.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"jan@example.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numer telefonu"}),a.jsx(Px,{value:g.phone,countryCode:g.phoneCountryCode,onChange:(F,ee)=>x({...g,phone:F,phoneCountryCode:ee})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa firmy (opcjonalnie)"}),a.jsx("input",{type:"text",value:g.businessName,onChange:F=>x({...g,businessName:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"Salon Urody Anna"})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{onClick:M,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[a.jsx(fa,{className:"w-5 h-5"}),b?"Zapisywanie...":"Zapisz zmiany"]})})]}),R==="hours"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Godziny pracy"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Ustaw godziny, w ktrych przyjmujesz klientw. Te godziny bd widoczne przy rezerwacji."})]}),l?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(ut,{className:"w-8 h-8 animate-spin text-emerald-500"})}):s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:Object.keys(A).map(F=>a.jsx("div",{className:`p-4 rounded-xl border-2 transition-colors ${A[F].enabled?"border-emerald-200 bg-emerald-50/50":"border-gray-200 bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:A[F].enabled,onChange:ee=>le(F,"enabled",ee.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]}),a.jsx("span",{className:`font-medium min-w-[100px] ${A[F].enabled?"text-gray-900":"text-gray-400"}`,children:B[F]})]}),A[F].enabled?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("select",{value:A[F].from,onChange:ee=>le(F,"from",ee.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-0 text-sm",children:re.map(ee=>a.jsx("option",{value:ee,children:ee},`from-${ee}`))}),a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("select",{value:A[F].to,onChange:ee=>le(F,"to",ee.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-0 text-sm",children:re.map(ee=>a.jsx("option",{value:ee,children:ee},`to-${ee}`))})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Zamknite"})]})},F))}),a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Szybkie ustawienia:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>{E({monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"00:00",to:"00:00",enabled:!1},sunday:{from:"00:00",to:"00:00",enabled:!1}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Standardowe (Pn-Pt 9-17)"}),a.jsx("button",{onClick:()=>{E({monday:{from:"08:00",to:"20:00",enabled:!0},tuesday:{from:"08:00",to:"20:00",enabled:!0},wednesday:{from:"08:00",to:"20:00",enabled:!0},thursday:{from:"08:00",to:"20:00",enabled:!0},friday:{from:"08:00",to:"20:00",enabled:!0},saturday:{from:"09:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Rozszerzone (8-20 + Sob)"}),a.jsx("button",{onClick:()=>{E({monday:{from:"10:00",to:"18:00",enabled:!0},tuesday:{from:"10:00",to:"18:00",enabled:!0},wednesday:{from:"10:00",to:"18:00",enabled:!0},thursday:{from:"10:00",to:"18:00",enabled:!0},friday:{from:"10:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"16:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!0}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Cay tydzie"})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{onClick:V,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[a.jsx(fa,{className:"w-5 h-5"}),b?"Zapisywanie...":"Zapisz godziny pracy"]})})]}):a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[a.jsx(ln,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak profilu usugodawcy"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Najpierw utwrz profil usugodawcy, aby ustawi godziny pracy."}),a.jsx("a",{href:"/biznes/uslugi/dodaj",className:"text-emerald-600 font-medium hover:underline",children:"Utwrz profil "})]})]}),R==="password"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Zmiana hasa"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Upewnij si, e uywasz silnego hasa"})]}),a.jsxs("div",{className:"space-y-4 max-w-md",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aktualne haso"}),a.jsxs("div",{className:"relative",children:[a.jsx(la,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:k.current?"text":"password",value:_.currentPassword,onChange:F=>T({..._,currentPassword:F.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),a.jsx("button",{type:"button",onClick:()=>C({...k,current:!k.current}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:k.current?a.jsx(va,{className:"w-5 h-5"}):a.jsx(vr,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nowe haso"}),a.jsxs("div",{className:"relative",children:[a.jsx(la,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:k.new?"text":"password",value:_.newPassword,onChange:F=>T({..._,newPassword:F.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),a.jsx("button",{type:"button",onClick:()=>C({...k,new:!k.new}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:k.new?a.jsx(va,{className:"w-5 h-5"}):a.jsx(vr,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Min. 8 znakw, wielka litera, maa litera, cyfra"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Potwierd nowe haso"}),a.jsxs("div",{className:"relative",children:[a.jsx(la,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:k.confirm?"text":"password",value:_.confirmPassword,onChange:F=>T({..._,confirmPassword:F.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),a.jsx("button",{type:"button",onClick:()=>C({...k,confirm:!k.confirm}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:k.confirm?a.jsx(va,{className:"w-5 h-5"}):a.jsx(vr,{className:"w-5 h-5"})})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{onClick:$,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[a.jsx(la,{className:"w-5 h-5"}),b?"Zmienianie...":"Zmie haso"]})})]}),R==="notifications"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Powiadomienia"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Zarzdzaj preferencjami powiadomie"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(Ri,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia email"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Nowe rezerwacje"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj email gdy kto zarezerwuje wizyt"})]}),a.jsx("input",{type:"checkbox",checked:S.emailBookings,onChange:F=>I({...S,emailBookings:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Nowe wiadomoci"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj email gdy kto wyle wiadomo"})]}),a.jsx("input",{type:"checkbox",checked:S.emailMessages,onChange:F=>I({...S,emailMessages:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Newsletter i promocje"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Informacje o nowociach i promocjach"})]}),a.jsx("input",{type:"checkbox",checked:S.emailMarketing,onChange:F=>I({...S,emailMarketing:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(Aa,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia SMS"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Nowe rezerwacje"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj SMS gdy kto zarezerwuje wizyt"})]}),a.jsx("input",{type:"checkbox",checked:S.smsBookings,onChange:F=>I({...S,smsBookings:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Przypomnienia o wizytach"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj SMS przed nadchodzc wizyt"})]}),a.jsx("input",{type:"checkbox",checked:S.smsReminders,onChange:F=>I({...S,smsReminders:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(Ni,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia push"]}),a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Powiadomienia w przegldarce"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj powiadomienia w czasie rzeczywistym"})]}),a.jsx("input",{type:"checkbox",checked:S.pushNotifications,onChange:F=>I({...S,pushNotifications:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{onClick:U,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[a.jsx(fa,{className:"w-5 h-5"}),b?"Zapisywanie...":"Zapisz ustawienia"]})})]}),R==="privacy"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Prywatno"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Kontroluj widoczno swoich danych"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Profil widoczny publicznie"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Pozwl klientom znale Twj profil w wyszukiwarce"})]}),a.jsx("input",{type:"checkbox",checked:H.profileVisible,onChange:F=>O({...H,profileVisible:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Poka numer telefonu"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Wywietlaj numer telefonu na profilu publicznym"})]}),a.jsx("input",{type:"checkbox",checked:H.showPhone,onChange:F=>O({...H,showPhone:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Poka adres email"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Wywietlaj adres email na profilu publicznym"})]}),a.jsx("input",{type:"checkbox",checked:H.showEmail,onChange:F=>O({...H,showEmail:F.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{onClick:Te,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[a.jsx(fa,{className:"w-5 h-5"}),b?"Zapisywanie...":"Zapisz ustawienia"]})})]}),R==="billing"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Patnoci i subskrypcja"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Zarzdzaj swoim planem i metodami patnoci"})]}),a.jsxs("div",{className:"p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Aktualny plan"}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Darmowy"})]}),a.jsx("div",{className:"px-3 py-1 bg-emerald-500 text-white rounded-full text-sm font-medium",children:"Aktywny"})]}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-emerald-500"}),"Do 10 rezerwacji miesicznie"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-emerald-500"}),"Podstawowy profil"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-emerald-500"}),"Wiadomoci z klientami"]})]}),a.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Przejd na Premium"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Metody patnoci"}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[a.jsx(Kh,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Brak dodanych metod patnoci"}),a.jsx("button",{className:"mt-3 text-emerald-600 font-medium hover:underline",children:"+ Dodaj kart"})]})]})]}),R==="danger"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-red-600 mb-1",children:"Strefa zagroenia"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Nieodwracalne akcje dotyczce Twojego konta"})]}),a.jsx("div",{className:"p-6 border-2 border-red-200 rounded-xl bg-red-50",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:a.jsx(Eu,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-red-900",children:"Usu konto"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Po usuniciu konta wszystkie Twoje dane, rezerwacje i historia zostan trwale usunite. Ta operacja jest nieodwracalna."}),a.jsx("button",{onClick:fe,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Usu moje konto"})]})]})}),a.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Xw,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-yellow-800",children:"Przed usuniciem konta"}),a.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[a.jsx("li",{children:" Upewnij si, e nie masz aktywnych rezerwacji"}),a.jsx("li",{children:" Poinformuj swoich klientw o zamkniciu dziaalnoci"}),a.jsx("li",{children:" Pobierz kopi swoich danych jeli potrzebujesz"})]})]})]})})]})]})]})]})},nM=()=>{const{user:t}=Yt(),{showToast:e}=ar(),[n,r]=D.useState(null),[s,o]=D.useState(!0),[l,h]=D.useState(!1),[f,m]=D.useState({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),g={monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"},x=[];for(let C=0;C<24;C++)for(let A=0;A<60;A+=30){const E=`${String(C).padStart(2,"0")}:${String(A).padStart(2,"0")}`;x.push(E)}D.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){o(!1);return}try{const A=await Kt.getByOwner(t.id);if(A.length>0){const E=A[0];r(E),m(E.workingHours)}}catch(A){console.error("Error loading provider:",A),e("Bd adowania danych","error")}finally{o(!1)}})()},[t==null?void 0:t.id]);const _=(C,A,E)=>{m(S=>({...S,[C]:{...S[C],[A]:E}}))},T=async()=>{if(!n){e("Najpierw utwrz profil usugodawcy","error");return}for(const[C,A]of Object.entries(f))if(A.enabled){const E=parseInt(A.from.split(":")[0]),S=parseInt(A.to.split(":")[0]);if(E>=S){e(`${g[C]}: Godzina otwarcia musi by wczeniejsza ni zamknicia`,"error");return}}h(!0);try{await Kt.update(n.id,{workingHours:f}),r({...n,workingHours:f}),e("Godziny pracy zostay zapisane!","success")}catch(C){console.error("Error saving working hours:",C),e("Bd zapisu godzin pracy","error")}finally{h(!1)}},k=C=>{m({standard:{monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"00:00",to:"00:00",enabled:!1},sunday:{from:"00:00",to:"00:00",enabled:!1}},extended:{monday:{from:"08:00",to:"20:00",enabled:!0},tuesday:{from:"08:00",to:"20:00",enabled:!0},wednesday:{from:"08:00",to:"20:00",enabled:!0},thursday:{from:"08:00",to:"20:00",enabled:!0},friday:{from:"08:00",to:"20:00",enabled:!0},saturday:{from:"09:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}},fullWeek:{monday:{from:"10:00",to:"18:00",enabled:!0},tuesday:{from:"10:00",to:"18:00",enabled:!0},wednesday:{from:"10:00",to:"18:00",enabled:!0},thursday:{from:"10:00",to:"18:00",enabled:!0},friday:{from:"10:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"16:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!0}}}[C]),e("Szablon zastosowany","info")};return s?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(ut,{className:"w-8 h-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[a.jsx(ln,{className:"w-7 h-7 text-primary"}),"Godziny pracy"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Ustaw godziny, w ktrych przyjmujesz klientw. Bd widoczne przy rezerwacji."})]})}),n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Szybkie szablony"}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{onClick:()=>k("standard"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Standardowe (Pn-Pt 9-17)"}),a.jsx("button",{onClick:()=>k("extended"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Rozszerzone (8-20 + Sob)"}),a.jsx("button",{onClick:()=>k("fullWeek"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Cay tydzie"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-6",children:"Dostosuj godziny dla kadego dnia"}),a.jsx("div",{className:"space-y-4",children:Object.keys(f).map(C=>a.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${f[C].enabled?"border-emerald-200 bg-emerald-50/50":"border-gray-200 bg-gray-50"}`,children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:f[C].enabled,onChange:A=>_(C,"enabled",A.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-12 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]}),a.jsx("span",{className:`font-semibold text-lg min-w-[120px] ${f[C].enabled?"text-gray-900":"text-gray-400"}`,children:g[C]})]}),f[C].enabled?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"od"}),a.jsx("select",{value:f[C].from,onChange:A=>_(C,"from",A.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0 font-medium",children:x.map(A=>a.jsx("option",{value:A,children:A},`from-${A}`))})]}),a.jsx("span",{className:"text-gray-400 text-xl",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"do"}),a.jsx("select",{value:f[C].to,onChange:A=>_(C,"to",A.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0 font-medium",children:x.map(A=>a.jsx("option",{value:A,children:A},`to-${A}`))})]})]}):a.jsx("span",{className:"text-gray-400 font-medium px-4 py-2 bg-gray-100 rounded-xl",children:" Zamknite"})]})},C))})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:T,disabled:l,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:l?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fa,{className:"w-5 h-5"}),"Zapisz godziny pracy"]})})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("p",{className:"text-blue-700 text-sm",children:[" ",a.jsx("strong",{children:"Wskazwka:"}),' Klienci bd mogli rezerwowa wizyty tylko w godzinach, ktre tutaj ustawisz. Dni oznaczone jako "Zamknite" nie bd dostpne do rezerwacji.']})})]}):a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(_5,{className:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-yellow-800",children:"Brak profilu usugodawcy"}),a.jsx("p",{className:"text-yellow-700 mt-1",children:"Aby ustawi godziny pracy, najpierw utwrz swj profil usugodawcy."}),a.jsx("a",{href:"/biznes/dodaj-usluge",className:"inline-block mt-4 px-6 py-2 bg-yellow-600 text-white rounded-xl font-medium hover:bg-yellow-700 transition-colors",children:"Utwrz profil"})]})]})})]})},rM=()=>{var Te;const[t,e]=D.useState(!1),[n,r]=D.useState(!1),[s,o]=D.useState(!1),[l,h]=D.useState(!1),[f,m]=D.useState(!1),{isAuthenticated:g,user:x,logout:_}=Yt(),T=es(),k=Nr(),C=(x==null?void 0:x.accountType)==="provider"||!!(x!=null&&x.businessName),A=D.useRef(null),E=D.useRef(null),S=D.useRef(null),[I,H]=D.useState([]),[O,R]=D.useState(0);D.useEffect(()=>{if(!(x!=null&&x.id)){H([]);return}const fe=Nn.subscribe(x.id,le=>{H(le.slice(0,5))});return()=>fe()},[x==null?void 0:x.id]),D.useEffect(()=>{if(!(x!=null&&x.id)){R(0);return}const fe=Or.subscribeToUnreadCount(x.id,le=>{R(le)});return()=>fe()},[x==null?void 0:x.id]);const N=I.filter(fe=>!fe.read).length,b=fe=>{const le=new Date(fe),B=new Date().getTime()-le.getTime(),Q=Math.floor(B/6e4),F=Math.floor(B/36e5);return Q<1?"Teraz":Q<60?`${Q} min temu`:F<24?`${F}h temu`:le.toLocaleDateString("pl-PL")};D.useEffect(()=>{const fe=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",fe),()=>window.removeEventListener("scroll",fe)},[]),D.useEffect(()=>{const fe=le=>{A.current&&!A.current.contains(le.target)&&o(!1),E.current&&!E.current.contains(le.target)&&h(!1),S.current&&!S.current.contains(le.target)&&m(!1)};return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[]);const z=[{to:"/",label:"Strona Gwna"},{to:"/#services",label:"Usugi"},{to:"/#how",label:"Jak to dziaa"},{to:"/#reviews",label:"Opinie"},{to:"/#contact",label:"Kontakt"}],M=fe=>{if(e(!1),fe.startsWith("/#")){const le=fe.replace("/#",""),re=document.getElementById(le);re&&re.scrollIntoView({behavior:"smooth"})}},V=async()=>{if(x!=null&&x.id)try{await Nn.markAllAsRead(x.id)}catch(fe){console.error("Error marking notifications as read:",fe)}},$=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),a.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),a.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),U=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});return a.jsxs("header",{className:`sticky top-0 z-50 transition-all duration-300 ${n?"bg-white/95 backdrop-blur-xl shadow-lg":"bg-white/95 backdrop-blur-xl border-b border-gray-100"}`,children:[a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"h-[72px] flex items-center justify-between gap-8",children:[a.jsxs(ke,{to:"/",className:"flex items-center gap-3 transition-transform duration-300 hover:scale-105",children:[a.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),a.jsx("span",{className:"font-extrabold text-xl gradient-text hidden sm:block",children:"TOMYHOMEAPP"})]}),a.jsx("nav",{className:"hidden lg:flex items-center gap-8",children:z.map(fe=>a.jsx(ke,{to:fe.to,onClick:()=>M(fe.to),className:`text-gray-600 font-medium text-[15px] relative py-2 transition-colors hover:text-primary
                  after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 
                  after:bg-gradient-to-r after:from-primary after:to-secondary after:transition-all
                  hover:after:w-full ${T.pathname===fe.to?"text-primary after:w-full":""}`,children:fe.label},fe.to))}),a.jsx("div",{className:"hidden lg:flex items-center gap-3",children:g?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",ref:S,children:[a.jsxs("button",{onClick:()=>m(!f),className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[a.jsx(Ni,{className:"w-5 h-5"}),N>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:N})]}),f&&a.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-50",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-gray-900",children:"Powiadomienia"}),N>0&&a.jsx("button",{onClick:V,className:"text-sm text-primary hover:underline",children:"Oznacz jako przeczytane"})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:I.length===0?a.jsxs("div",{className:"p-6 text-center text-gray-500",children:[a.jsx(Ni,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),a.jsx("p",{className:"text-sm",children:"Brak powiadomie"})]}):I.map(fe=>a.jsxs("div",{onClick:async()=>{await Nn.markAsRead(fe.id),m(!1),k("/powiadomienia")},className:`p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer ${fe.read?"":"bg-blue-50"}`,children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Nn.getIcon(fe.type)," ",fe.title]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:fe.message}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:b(fe.createdAt)})]},fe.id))}),a.jsx(ke,{to:"/powiadomienia",className:"block p-3 text-center text-sm text-primary hover:bg-gray-50",onClick:()=>m(!1),children:"Zobacz wszystkie"})]})]}),a.jsxs(ke,{to:"/wiadomosci",className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[a.jsx(Yr,{className:"w-5 h-5"}),O>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary text-white text-xs font-bold rounded-full flex items-center justify-center",children:O>9?"9+":O})]}),C&&a.jsx(ke,{to:"/biznes",className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all text-sm",children:" Panel Biznes"}),a.jsxs("div",{className:"relative",ref:E,children:[a.jsxs("button",{onClick:()=>h(!l),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-xl transition-colors",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:((Te=x==null?void 0:x.username)==null?void 0:Te.charAt(0).toUpperCase())||"U"})}),a.jsx("span",{className:"text-sm font-medium text-gray-700 hidden xl:block",children:x==null?void 0:x.username}),a.jsx(Zh,{className:"w-4 h-4 text-gray-500"})]}),l&&a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[a.jsx("p",{className:"font-medium text-gray-900",children:x==null?void 0:x.username}),a.jsx("p",{className:"text-sm text-gray-500",children:x==null?void 0:x.email})]}),a.jsxs(ke,{to:"/profil",className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>h(!1),children:[a.jsx(jr,{className:"w-4 h-4"}),"Mj profil"]}),a.jsxs(ke,{to:"/wiadomosci",className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>h(!1),children:[a.jsx(Yr,{className:"w-4 h-4"}),"Wiadomoci"]}),a.jsx("hr",{className:"my-2"}),a.jsxs("button",{onClick:()=>{_(),h(!1),k("/")},className:"flex items-center gap-3 px-4 py-2 text-red-600 hover:bg-red-50 w-full text-left",children:[a.jsx(Gh,{className:"w-4 h-4"}),"Wyloguj si"]})]})]})]}):a.jsxs("div",{className:"relative",ref:A,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-primary transition-colors font-medium",children:[a.jsx(jr,{className:"w-5 h-5"}),a.jsx("span",{children:"Moje konto"}),a.jsx(Zh,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),s&&a.jsx("div",{className:"absolute right-0 mt-0 pt-2 z-50",children:a.jsxs("div",{className:"w-80 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[a.jsxs("div",{className:"p-6 text-center bg-gradient-to-b from-gray-50 to-white",children:[a.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[a.jsx("div",{className:"text-5xl",children:""}),a.jsx("div",{className:"text-5xl",children:""})]}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Witaj w ToMyHomeApp"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Zaloguj si, aby zobaczy swoje rezerwacje, ulubione usugi i powiadomienia."})]}),a.jsx("div",{className:"px-6 pb-4",children:a.jsx(ke,{to:"/auth?mode=login",className:"block w-full py-3 bg-gradient-to-r from-primary to-secondary text-white text-center rounded-xl font-bold hover:shadow-lg transition-all",onClick:()=>o(!1),children:"ZALOGUJ SI"})}),a.jsxs("div",{className:"px-6 pb-4",children:[a.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"Nie masz jeszcze konta? Za teraz."}),a.jsx(ke,{to:"/auth?mode=register&type=client",className:"flex items-center justify-center w-full py-3 mb-2 border-2 border-primary text-primary rounded-xl font-bold hover:bg-primary hover:text-white transition-all",onClick:()=>o(!1),children:"DLA KLIENTA"}),a.jsx(ke,{to:"/auth?mode=register&type=provider",className:"flex items-center justify-center w-full py-3 border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold hover:bg-emerald-500 hover:text-white transition-all",onClick:()=>o(!1),children:"DLA USUGODAWCY"})]})]})})]})}),a.jsx("button",{onClick:()=>e(!t),"aria-label":"Toggle menu",className:"lg:hidden flex items-center justify-center",style:{width:"44px",height:"44px",backgroundColor:"#ffffff",border:"2px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",color:"#374151",cursor:"pointer"},children:t?a.jsx(U,{}):a.jsx($,{})})]})}),t&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)}),a.jsx("div",{className:"lg:hidden fixed top-[72px] left-0 right-0 bg-white shadow-xl z-50 max-h-[calc(100vh-72px)] overflow-y-auto",style:{backgroundColor:"#ffffff"},children:a.jsxs("nav",{className:"p-6 flex flex-col gap-4",children:[z.map(fe=>a.jsx(ke,{to:fe.to,onClick:()=>M(fe.to),className:"py-3 border-b border-gray-100 text-gray-900 font-medium transition-all hover:text-primary hover:pl-2",children:fe.label},fe.to)),a.jsx("div",{className:"flex flex-col gap-3 mt-4",children:g?a.jsxs(a.Fragment,{children:[(x==null?void 0:x.accountType)==="provider"&&a.jsx(ke,{to:"/biznes",onClick:()=>e(!1),className:"w-full py-3 px-4 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold text-center",children:" Panel Biznes"}),a.jsx(ke,{to:"/wiadomosci",onClick:()=>e(!1),className:"w-full py-3 px-4 border border-gray-200 text-gray-700 rounded-xl font-medium text-center hover:bg-gray-50",children:" Wiadomoci"}),a.jsx(ke,{to:"/profil",onClick:()=>e(!1),className:"w-full py-3 px-4 border border-gray-200 text-gray-700 rounded-xl font-medium text-center hover:bg-gray-50",children:"Mj profil"}),a.jsx("button",{onClick:()=>{_(),e(!1)},className:"w-full py-3 px-4 border border-red-200 text-red-600 rounded-xl font-medium text-center hover:bg-red-50",children:"Wyloguj si"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center mb-2",children:[a.jsx("div",{className:"text-3xl mb-2",children:" "}),a.jsx("p",{className:"text-sm text-gray-600",children:"Zaloguj si, aby korzysta z penych funkcji"})]}),a.jsx(ke,{to:"/auth?mode=login",onClick:()=>e(!1),className:"w-full py-3 px-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold text-center",children:"ZALOGUJ SI"}),a.jsx(ke,{to:"/auth?mode=register&type=client",onClick:()=>e(!1),className:"w-full py-3 px-4 border-2 border-primary text-primary rounded-xl font-semibold text-center",children:"REJESTRACJA - KLIENT"}),a.jsx(ke,{to:"/auth?mode=register&type=provider",onClick:()=>e(!1),className:"w-full py-3 px-4 border-2 border-emerald-500 text-emerald-600 rounded-xl font-semibold text-center",children:"REJESTRACJA - USUGODAWCA"})]})})]})})]})]})},sM=()=>{const t=new Date().getFullYear(),e={services:[{label:"Fryzjer",to:"/uslugodawcy/fryzjer"},{label:"Manicure",to:"/uslugodawcy/paznokcie"},{label:"Masa",to:"/uslugodawcy/masaz"},{label:"Kosmetyka",to:"/uslugodawcy/kosmetyka"},{label:"Wszystkie usugi",to:"/uslugodawcy"}],company:[{label:"O nas",to:"/o-nas"},{label:"Kariera",to:"/kariera"},{label:"Blog",to:"/blog"},{label:"Kontakt",to:"/kontakt"}],help:[{label:"FAQ",to:"/faq"},{label:"Regulamin",to:"/regulamin"},{label:"Polityka prywatnoci",to:"/prywatnosc"},{label:"Wsparcie",to:"/wsparcie"}]};return a.jsxs("footer",{className:"bg-gray-900 text-white",id:"contact",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-6 pt-16 pb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 lg:gap-12",children:[a.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[a.jsx(ke,{to:"/",className:"inline-block mb-4",children:a.jsx("h4",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"TOMYHOMEAPP"})}),a.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"Profesjonalne usugi beauty i wellness w zaciszu Twojego domu. Znajd idealnego specjalist w kilka sekund."}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("a",{href:"mailto:kontakt@tomyhomeapp.pl",className:"flex items-center gap-3 text-gray-400 hover:text-white transition-colors",children:[a.jsx(Ri,{className:"w-4 h-4"}),a.jsx("span",{children:"kontakt@tomyhomeapp.pl"})]}),a.jsxs("a",{href:"tel:+48123456789",className:"flex items-center gap-3 text-gray-400 hover:text-white transition-colors",children:[a.jsx(Aa,{className:"w-4 h-4"}),a.jsx("span",{children:"+48 123 456 789"})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[a.jsx(Es,{className:"w-4 h-4"}),a.jsx("span",{children:"Pozna, Polska"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-primary hover:-translate-y-1",children:a.jsx(I5,{className:"w-5 h-5"})}),a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-gradient-to-r hover:from-purple-500 hover:to-pink-500 hover:-translate-y-1",children:a.jsx(L5,{className:"w-5 h-5"})}),a.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-blue-400 hover:-translate-y-1",children:a.jsx(K5,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Usugi"}),a.jsx("ul",{className:"space-y-3",children:e.services.map(n=>a.jsx("li",{children:a.jsx(ke,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Firma"}),a.jsx("ul",{className:"space-y-3",children:e.company.map(n=>a.jsx("li",{children:a.jsx(ke,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Pomoc"}),a.jsx("ul",{className:"space-y-3",children:e.help.map(n=>a.jsx("li",{children:a.jsx(ke,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]})]})}),a.jsx("div",{className:"border-t border-white/10",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-bold mb-1",children:"Zapisz si do newslettera"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Otrzymuj informacje o promocjach i nowociach"})]}),a.jsxs("div",{className:"flex w-full md:w-auto gap-2",children:[a.jsx("input",{type:"email",placeholder:"Twj email...",className:"flex-1 md:w-64 px-4 py-2.5 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-primary"}),a.jsx("button",{className:"px-6 py-2.5 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-primary/25 transition-all",children:"Zapisz si"})]})]})})}),a.jsx("div",{className:"border-t border-white/10",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-gray-500",children:[a.jsxs("p",{children:[" ",t," TOMYHOMEAPP. Wszystkie prawa zastrzeone."]}),a.jsxs("p",{className:"flex items-center gap-1",children:["Stworzone z ",a.jsx(cl,{className:"w-4 h-4 text-red-500 fill-red-500"})," w Poznaniu"]})]})})})]})},iM=({message:t,type:e="success",onClose:n})=>{const[r,s]=D.useState(!1);D.useEffect(()=>{s(!0);const h=setTimeout(()=>{s(!1),setTimeout(n,300)},2700);return()=>clearTimeout(h)},[n]);const o={success:a.jsx(St,{className:"w-5 h-5"}),error:a.jsx(Ra,{className:"w-5 h-5"}),info:a.jsx(R5,{className:"w-5 h-5"})},l={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return a.jsxs("div",{className:`bg-white rounded-xl shadow-xl flex items-center gap-3 px-6 py-4 transition-all duration-300 ${r?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[a.jsx("div",{className:`w-8 h-8 ${l[e]} text-white rounded-full flex items-center justify-center`,children:o[e]}),a.jsx("span",{className:"font-medium text-gray-900",children:t}),a.jsx("button",{onClick:()=>{s(!1),setTimeout(n,300)},className:"ml-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Ra,{className:"w-4 h-4"})})]})},aM=()=>a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden opacity-40 pointer-events-none",children:[a.jsx("div",{className:"absolute w-[600px] h-[600px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",top:"-200px",left:"-200px",animationDelay:"0s"}}),a.jsx("div",{className:"absolute w-[800px] h-[800px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",bottom:"-300px",right:"-300px",animationDelay:"7s"}}),a.jsx("div",{className:"absolute w-[500px] h-[500px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animationDelay:"14s"}})]}),oM=()=>{const{pathname:t}=es();return D.useEffect(()=>{window.scrollTo(0,0)},[t]),null},Rk=D.createContext({user:null,userData:null,firebaseUser:null,loading:!0,login:()=>{},logout:async()=>{},isAuthenticated:!1}),Lk=D.createContext({showToast:()=>{}}),Yt=()=>D.useContext(Rk),ar=()=>D.useContext(Lk),lM=()=>a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(oM,{}),a.jsx(aM,{}),a.jsx(rM,{}),a.jsx("main",{className:"flex-grow",children:a.jsxs(S1,{children:[a.jsx(Je,{path:"/",element:a.jsx(rD,{})}),a.jsx(Je,{path:"/auth",element:a.jsx(sD,{})}),a.jsx(Je,{path:"/profil",element:a.jsx(cD,{})}),a.jsx(Je,{path:"/uslugodawcy/profil/:id",element:a.jsx(vD,{})}),a.jsx(Je,{path:"/uslugodawcy/:category",element:a.jsx(t_,{})}),a.jsx(Je,{path:"/uslugodawcy",element:a.jsx(t_,{})}),a.jsx(Je,{path:"/wiadomosci",element:a.jsx(wD,{})}),a.jsx(Je,{path:"/powiadomienia",element:a.jsx(_D,{})}),a.jsx(Je,{path:"/o-nas",element:a.jsx(bD,{})}),a.jsx(Je,{path:"/kariera",element:a.jsx(jD,{})}),a.jsx(Je,{path:"/blog",element:a.jsx(ND,{})}),a.jsx(Je,{path:"/kontakt",element:a.jsx(kD,{})}),a.jsx(Je,{path:"/faq",element:a.jsx(TD,{})}),a.jsx(Je,{path:"/regulamin",element:a.jsx(ED,{})}),a.jsx(Je,{path:"/prywatnosc",element:a.jsx(SD,{})}),a.jsx(Je,{path:"/wsparcie",element:a.jsx(PD,{})})]})}),a.jsx(sM,{})]}),cM=()=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"adowanie..."})]})});function uM(){const[t,e]=D.useState(null),[n,r]=D.useState(null),[s,o]=D.useState(!0),[l,h]=D.useState(null),[f,m]=D.useState([]);D.useEffect(()=>{console.log(" Setting up auth listener...");const k=CC(Ur,async C=>{if(console.log(" Auth state changed:",(C==null?void 0:C.email)||"no user"),e(C),C)try{const A=await ol(ct(Ie,"users",C.uid));if(console.log(" User doc exists:",A.exists()),A.exists()){const E=A.data();console.log(" Firestore data:",E),r(E);const S={id:C.uid,email:C.email||E.email||"",username:E.username||C.displayName||"Uytkownik",phone:E.phone||"",accountType:E.accountType||"client",businessName:E.businessName,avatar:E.avatar||C.photoURL||void 0};console.log(" Legacy user:",S),h(S)}else{console.log(" No Firestore doc, creating basic user");const E={id:C.uid,email:C.email||"",username:C.displayName||"Uytkownik",phone:"",accountType:"client"};h(E),r(null)}}catch(A){console.error(" Error fetching user data:",A);const E={id:C.uid,email:C.email||"",username:C.displayName||"Uytkownik",phone:"",accountType:"client"};h(E),r(null)}else console.log(" User logged out"),h(null),r(null);o(!1)});return()=>k()},[]);const g=k=>{h(k)},x=async()=>{try{await zC(Ur),h(null),r(null),e(null)}catch(k){throw console.error("Logout error:",k),k}},_=(k,C="success")=>{const A=Date.now().toString();m(E=>[...E,{id:A,message:k,type:C}]),setTimeout(()=>{m(E=>E.filter(S=>S.id!==A))},3e3)},T=k=>{m(C=>C.filter(A=>A.id!==k))};return s?a.jsx(cM,{}):a.jsx(Rk.Provider,{value:{user:l,userData:n,firebaseUser:t,loading:s,login:g,logout:x,isAuthenticated:!!t},children:a.jsxs(Lk.Provider,{value:{showToast:_},children:[a.jsxs(S1,{children:[a.jsxs(Je,{path:"/biznes",element:a.jsx(zD,{}),children:[a.jsx(Je,{index:!0,element:a.jsx(r_,{})}),a.jsx(Je,{path:"uslugi",element:a.jsx(AD,{})}),a.jsx(Je,{path:"dodaj-usluge",element:a.jsx(JD,{})}),a.jsx(Je,{path:"godziny-pracy",element:a.jsx(nM,{})}),a.jsx(Je,{path:"kalendarz",element:a.jsx(XD,{})}),a.jsx(Je,{path:"wiadomosci",element:a.jsx(tM,{})}),a.jsx(Je,{path:"statystyki",element:a.jsx(eM,{})}),a.jsx(Je,{path:"profil",element:a.jsx(s_,{})}),a.jsx(Je,{path:"ustawienia",element:a.jsx(s_,{})}),a.jsx(Je,{path:"pomoc",element:a.jsx(r_,{})})]}),a.jsx(Je,{path:"/*",element:a.jsx(lM,{})})]}),a.jsx("div",{className:"fixed bottom-8 right-8 z-50 flex flex-col gap-3",children:f.map(k=>a.jsx(iM,{message:k.message,type:k.type,onClose:()=>T(k.id)},k.id))})]})})}qm.createRoot(document.getElementById("root")).render(a.jsx(kc.StrictMode,{children:a.jsx(FS,{children:a.jsx(uM,{})})}));
