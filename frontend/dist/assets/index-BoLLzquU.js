function V2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k_={exports:{}},cm={},T_={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xu=Symbol.for("react.element"),B2=Symbol.for("react.portal"),F2=Symbol.for("react.fragment"),W2=Symbol.for("react.strict_mode"),$2=Symbol.for("react.profiler"),H2=Symbol.for("react.provider"),q2=Symbol.for("react.context"),Z2=Symbol.for("react.forward_ref"),K2=Symbol.for("react.suspense"),G2=Symbol.for("react.memo"),Q2=Symbol.for("react.lazy"),y0=Symbol.iterator;function Y2(t){return t===null||typeof t!="object"?null:(t=y0&&t[y0]||t["@@iterator"],typeof t=="function"?t:null)}var E_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S_=Object.assign,P_={};function bl(t,e,n){this.props=t,this.context=e,this.refs=P_,this.updater=n||E_}bl.prototype.isReactComponent={};bl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function C_(){}C_.prototype=bl.prototype;function Fg(t,e,n){this.props=t,this.context=e,this.refs=P_,this.updater=n||E_}var Wg=Fg.prototype=new C_;Wg.constructor=Fg;S_(Wg,bl.prototype);Wg.isPureReactComponent=!0;var x0=Array.isArray,z_=Object.prototype.hasOwnProperty,$g={current:null},I_={key:!0,ref:!0,__self:!0,__source:!0};function A_(t,e,n){var r,i={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)z_.call(e,r)&&!I_.hasOwnProperty(r)&&(i[r]=e[r]);var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){for(var m=Array(h),f=0;f<h;f++)m[f]=arguments[f+2];i.children=m}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)i[r]===void 0&&(i[r]=h[r]);return{$$typeof:xu,type:t,key:o,ref:l,props:i,_owner:$g.current}}function J2(t,e){return{$$typeof:xu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hg(t){return typeof t=="object"&&t!==null&&t.$$typeof===xu}function X2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var w0=/\/+/g;function wf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X2(""+t.key):e.toString(36)}function Wd(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case xu:case B2:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+wf(l,0):r,x0(i)?(n="",t!=null&&(n=t.replace(w0,"$&/")+"/"),Wd(i,e,n,"",function(f){return f})):i!=null&&(Hg(i)&&(i=J2(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(w0,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",x0(t))for(var h=0;h<t.length;h++){o=t[h];var m=r+wf(o,h);l+=Wd(o,e,n,m,i)}else if(m=Y2(t),typeof m=="function")for(t=m.call(t),h=0;!(o=t.next()).done;)o=o.value,m=r+wf(o,h++),l+=Wd(o,e,n,m,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function gd(t,e,n){if(t==null)return t;var r=[],i=0;return Wd(t,r,"","",function(o){return e.call(n,o,i++)}),r}function eT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},$d={transition:null},tT={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:$d,ReactCurrentOwner:$g};function R_(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:gd,forEach:function(t,e,n){gd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gd(t,function(){e++}),e},toArray:function(t){return gd(t,function(e){return e})||[]},only:function(t){if(!Hg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=bl;Le.Fragment=F2;Le.Profiler=$2;Le.PureComponent=Fg;Le.StrictMode=W2;Le.Suspense=K2;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tT;Le.act=R_;Le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=S_({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=$g.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(m in e)z_.call(e,m)&&!I_.hasOwnProperty(m)&&(r[m]=e[m]===void 0&&h!==void 0?h[m]:e[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){h=Array(m);for(var f=0;f<m;f++)h[f]=arguments[f+2];r.children=h}return{$$typeof:xu,type:t.type,key:i,ref:o,props:r,_owner:l}};Le.createContext=function(t){return t={$$typeof:q2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H2,_context:t},t.Consumer=t};Le.createElement=A_;Le.createFactory=function(t){var e=A_.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:Z2,render:t}};Le.isValidElement=Hg;Le.lazy=function(t){return{$$typeof:Q2,_payload:{_status:-1,_result:t},_init:eT}};Le.memo=function(t,e){return{$$typeof:G2,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=$d.transition;$d.transition={};try{t()}finally{$d.transition=e}};Le.unstable_act=R_;Le.useCallback=function(t,e){return vn.current.useCallback(t,e)};Le.useContext=function(t){return vn.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Le.useEffect=function(t,e){return vn.current.useEffect(t,e)};Le.useId=function(){return vn.current.useId()};Le.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Le.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return vn.current.useMemo(t,e)};Le.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Le.useRef=function(t){return vn.current.useRef(t)};Le.useState=function(t){return vn.current.useState(t)};Le.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Le.useTransition=function(){return vn.current.useTransition()};Le.version="18.3.1";T_.exports=Le;var C=T_.exports;const Oc=N_(C),nT=V2({__proto__:null,default:Oc},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT=C,sT=Symbol.for("react.element"),iT=Symbol.for("react.fragment"),aT=Object.prototype.hasOwnProperty,oT=rT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lT={key:!0,ref:!0,__self:!0,__source:!0};function L_(t,e,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)aT.call(e,r)&&!lT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:sT,type:t,key:o,ref:l,props:i,_owner:oT.current}}cm.Fragment=iT;cm.jsx=L_;cm.jsxs=L_;k_.exports=cm;var s=k_.exports,lp={},D_={exports:{}},Kn={},M_={exports:{}},O_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,Y){var z=F.length;F.push(Y);e:for(;0<z;){var G=z-1>>>1,J=F[G];if(0<i(J,Y))F[G]=Y,F[z]=J,z=G;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],z=F.pop();if(z!==Y){F[0]=z;e:for(var G=0,J=F.length,fe=J>>>1;G<fe;){var X=2*(G+1)-1,se=F[X],he=X+1,Be=F[he];if(0>i(se,z))he<J&&0>i(Be,se)?(F[G]=Be,F[he]=z,G=he):(F[G]=se,F[X]=z,G=X);else if(he<J&&0>i(Be,z))F[G]=Be,F[he]=z,G=he;else break e}}return Y}function i(F,Y){var z=F.sortIndex-Y.sortIndex;return z!==0?z:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var m=[],f=[],g=1,x=null,v=3,P=!1,E=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var Y=n(f);Y!==null;){if(Y.callback===null)r(f);else if(Y.startTime<=F)r(f),Y.sortIndex=Y.expirationTime,e(m,Y);else break;Y=n(f)}}function W(F){if(S=!1,I(F),!E)if(n(m)!==null)E=!0,ce(D);else{var Y=n(f);Y!==null&&ne(W,Y.startTime-F)}}function D(F,Y){E=!1,S&&(S=!1,j(b),b=-1),P=!0;var z=v;try{for(I(Y),x=n(m);x!==null&&(!(x.expirationTime>Y)||F&&!B());){var G=x.callback;if(typeof G=="function"){x.callback=null,v=x.priorityLevel;var J=G(x.expirationTime<=Y);Y=t.unstable_now(),typeof J=="function"?x.callback=J:x===n(m)&&r(m),I(Y)}else r(m);x=n(m)}if(x!==null)var fe=!0;else{var X=n(f);X!==null&&ne(W,X.startTime-Y),fe=!1}return fe}finally{x=null,v=z,P=!1}}var O=!1,N=null,b=-1,R=5,U=-1;function B(){return!(t.unstable_now()-U<R)}function H(){if(N!==null){var F=t.unstable_now();U=F;var Y=!0;try{Y=N(!0,F)}finally{Y?A():(O=!1,N=null)}}else O=!1}var A;if(typeof T=="function")A=function(){T(H)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ue=me.port2;me.port1.onmessage=H,A=function(){ue.postMessage(null)}}else A=function(){M(H,0)};function ce(F){N=F,O||(O=!0,A())}function ne(F,Y){b=M(function(){F(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){E||P||(E=!0,ce(D))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(F){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var z=v;v=Y;try{return F()}finally{v=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=v;v=F;try{return Y()}finally{v=z}},t.unstable_scheduleCallback=function(F,Y,z){var G=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?G+z:G):z=G,F){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,F={id:g++,callback:Y,priorityLevel:F,startTime:z,expirationTime:J,sortIndex:-1},z>G?(F.sortIndex=z,e(f,F),n(m)===null&&F===n(f)&&(S?(j(b),b=-1):S=!0,ne(W,z-G))):(F.sortIndex=J,e(m,F),E||P||(E=!0,ce(D))),F},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(F){var Y=v;return function(){var z=v;v=Y;try{return F.apply(this,arguments)}finally{v=z}}}})(O_);M_.exports=O_;var cT=M_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT=C,Zn=cT;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V_=new Set,Vc={};function Za(t,e){il(t,e),il(t+"Capture",e)}function il(t,e){for(Vc[t]=e,t=0;t<e.length;t++)V_.add(e[t])}var Is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cp=Object.prototype.hasOwnProperty,dT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v0={},_0={};function hT(t){return cp.call(_0,t)?!0:cp.call(v0,t)?!1:dT.test(t)?_0[t]=!0:(v0[t]=!0,!1)}function mT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fT(t,e,n,r){if(e===null||typeof e>"u"||mT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var qg=/[\-:]([a-z])/g;function Zg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qg,Zg);en[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qg,Zg);en[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qg,Zg);en[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kg(t,e,n,r){var i=en.hasOwnProperty(e)?en[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fT(e,n,i,r)&&(n=null),r||i===null?hT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ws=uT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yd=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),Lo=Symbol.for("react.fragment"),Gg=Symbol.for("react.strict_mode"),up=Symbol.for("react.profiler"),U_=Symbol.for("react.provider"),B_=Symbol.for("react.context"),Qg=Symbol.for("react.forward_ref"),dp=Symbol.for("react.suspense"),hp=Symbol.for("react.suspense_list"),Yg=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),F_=Symbol.for("react.offscreen"),b0=Symbol.iterator;function rc(t){return t===null||typeof t!="object"?null:(t=b0&&t[b0]||t["@@iterator"],typeof t=="function"?t:null)}var ft=Object.assign,vf;function hc(t){if(vf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vf=e&&e[1]||""}return`
`+vf+t}var _f=!1;function bf(t,e){if(!t||_f)return"";_f=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,h=o.length-1;1<=l&&0<=h&&i[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(i[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||i[l]!==o[h]){var m=`
`+i[l].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=l&&0<=h);break}}}finally{_f=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hc(t):""}function pT(t){switch(t.tag){case 5:return hc(t.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return t=bf(t.type,!1),t;case 11:return t=bf(t.type.render,!1),t;case 1:return t=bf(t.type,!0),t;default:return""}}function mp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lo:return"Fragment";case Ro:return"Portal";case up:return"Profiler";case Gg:return"StrictMode";case dp:return"Suspense";case hp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case B_:return(t.displayName||"Context")+".Consumer";case U_:return(t._context.displayName||"Context")+".Provider";case Qg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yg:return e=t.displayName||null,e!==null?e:mp(t.type)||"Memo";case li:e=t._payload,t=t._init;try{return mp(t(e))}catch{}}return null}function gT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mp(e);case 8:return e===Gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function W_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yT(t){var e=W_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xd(t){t._valueTracker||(t._valueTracker=yT(t))}function $_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=W_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fp(t,e){var n=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function j0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function H_(t,e){e=e.checked,e!=null&&Kg(t,"checked",e,!1)}function pp(t,e){H_(t,e);var n=Li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gp(t,e.type,n):e.hasOwnProperty("defaultValue")&&gp(t,e.type,Li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function N0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gp(t,e,n){(e!=="number"||dh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mc=Array.isArray;function Zo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Li(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function k0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(mc(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Li(n)}}function q_(t,e){var n=Li(e.value),r=Li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function T0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Z_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Z_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wd,K_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wd=wd||document.createElement("div"),wd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xT=["Webkit","ms","Moz","O"];Object.keys(bc).forEach(function(t){xT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bc[e]=bc[t]})});function G_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bc.hasOwnProperty(t)&&bc[t]?(""+e).trim():e+"px"}function Q_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=G_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var wT=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wp(t,e){if(e){if(wT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function vp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _p=null;function Jg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bp=null,Ko=null,Go=null;function E0(t){if(t=_u(t)){if(typeof bp!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=fm(e),bp(t.stateNode,t.type,e))}}function Y_(t){Ko?Go?Go.push(t):Go=[t]:Ko=t}function J_(){if(Ko){var t=Ko,e=Go;if(Go=Ko=null,E0(t),e)for(t=0;t<e.length;t++)E0(e[t])}}function X_(t,e){return t(e)}function eb(){}var jf=!1;function tb(t,e,n){if(jf)return t(e,n);jf=!0;try{return X_(t,e,n)}finally{jf=!1,(Ko!==null||Go!==null)&&(eb(),J_())}}function Bc(t,e){var n=t.stateNode;if(n===null)return null;var r=fm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var jp=!1;if(Is)try{var sc={};Object.defineProperty(sc,"passive",{get:function(){jp=!0}}),window.addEventListener("test",sc,sc),window.removeEventListener("test",sc,sc)}catch{jp=!1}function vT(t,e,n,r,i,o,l,h,m){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(g){this.onError(g)}}var jc=!1,hh=null,mh=!1,Np=null,_T={onError:function(t){jc=!0,hh=t}};function bT(t,e,n,r,i,o,l,h,m){jc=!1,hh=null,vT.apply(_T,arguments)}function jT(t,e,n,r,i,o,l,h,m){if(bT.apply(this,arguments),jc){if(jc){var f=hh;jc=!1,hh=null}else throw Error(ae(198));mh||(mh=!0,Np=f)}}function Ka(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function S0(t){if(Ka(t)!==t)throw Error(ae(188))}function NT(t){var e=t.alternate;if(!e){if(e=Ka(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return S0(i),t;if(o===r)return S0(i),e;o=o.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,h=i.child;h;){if(h===n){l=!0,n=i,r=o;break}if(h===r){l=!0,r=i,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,r=i;break}if(h===r){l=!0,r=o,n=i;break}h=h.sibling}if(!l)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function rb(t){return t=NT(t),t!==null?sb(t):null}function sb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sb(t);if(e!==null)return e;t=t.sibling}return null}var ib=Zn.unstable_scheduleCallback,P0=Zn.unstable_cancelCallback,kT=Zn.unstable_shouldYield,TT=Zn.unstable_requestPaint,kt=Zn.unstable_now,ET=Zn.unstable_getCurrentPriorityLevel,Xg=Zn.unstable_ImmediatePriority,ab=Zn.unstable_UserBlockingPriority,fh=Zn.unstable_NormalPriority,ST=Zn.unstable_LowPriority,ob=Zn.unstable_IdlePriority,um=null,qr=null;function PT(t){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(um,t,void 0,(t.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:IT,CT=Math.log,zT=Math.LN2;function IT(t){return t>>>=0,t===0?32:31-(CT(t)/zT|0)|0}var vd=64,_d=4194304;function fc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ph(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~i;h!==0?r=fc(h):(o&=l,o!==0&&(r=fc(o)))}else l=n&~i,l!==0?r=fc(l):o!==0&&(r=fc(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nr(e),i=1<<n,r|=t[n],e&=~i;return r}function AT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Nr(o),h=1<<l,m=i[l];m===-1?(!(h&n)||h&r)&&(i[l]=AT(h,e)):m<=e&&(t.expiredLanes|=h),o&=~h}}function kp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lb(){var t=vd;return vd<<=1,!(vd&4194240)&&(vd=64),t}function Nf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nr(e),t[e]=n}function LT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Nr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function ey(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var et=0;function cb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ub,ty,db,hb,mb,Tp=!1,bd=[],bi=null,ji=null,Ni=null,Fc=new Map,Wc=new Map,ui=[],DT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C0(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":Fc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(e.pointerId)}}function ic(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=_u(e),e!==null&&ty(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function MT(t,e,n,r,i){switch(e){case"focusin":return bi=ic(bi,t,e,n,r,i),!0;case"dragenter":return ji=ic(ji,t,e,n,r,i),!0;case"mouseover":return Ni=ic(Ni,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Fc.set(o,ic(Fc.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Wc.set(o,ic(Wc.get(o)||null,t,e,n,r,i)),!0}return!1}function fb(t){var e=ba(t.target);if(e!==null){var n=Ka(e);if(n!==null){if(e=n.tag,e===13){if(e=nb(n),e!==null){t.blockedOn=e,mb(t.priority,function(){db(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ep(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_p=r,n.target.dispatchEvent(r),_p=null}else return e=_u(n),e!==null&&ty(e),t.blockedOn=n,!1;e.shift()}return!0}function z0(t,e,n){Hd(t)&&n.delete(e)}function OT(){Tp=!1,bi!==null&&Hd(bi)&&(bi=null),ji!==null&&Hd(ji)&&(ji=null),Ni!==null&&Hd(Ni)&&(Ni=null),Fc.forEach(z0),Wc.forEach(z0)}function ac(t,e){t.blockedOn===e&&(t.blockedOn=null,Tp||(Tp=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,OT)))}function $c(t){function e(i){return ac(i,t)}if(0<bd.length){ac(bd[0],t);for(var n=1;n<bd.length;n++){var r=bd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bi!==null&&ac(bi,t),ji!==null&&ac(ji,t),Ni!==null&&ac(Ni,t),Fc.forEach(e),Wc.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)fb(n),n.blockedOn===null&&ui.shift()}var Qo=Ws.ReactCurrentBatchConfig,gh=!0;function VT(t,e,n,r){var i=et,o=Qo.transition;Qo.transition=null;try{et=1,ny(t,e,n,r)}finally{et=i,Qo.transition=o}}function UT(t,e,n,r){var i=et,o=Qo.transition;Qo.transition=null;try{et=4,ny(t,e,n,r)}finally{et=i,Qo.transition=o}}function ny(t,e,n,r){if(gh){var i=Ep(t,e,n,r);if(i===null)Rf(t,e,r,yh,n),C0(t,r);else if(MT(i,t,e,n,r))r.stopPropagation();else if(C0(t,r),e&4&&-1<DT.indexOf(t)){for(;i!==null;){var o=_u(i);if(o!==null&&ub(o),o=Ep(t,e,n,r),o===null&&Rf(t,e,r,yh,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Rf(t,e,r,null,n)}}var yh=null;function Ep(t,e,n,r){if(yh=null,t=Jg(r),t=ba(t),t!==null)if(e=Ka(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yh=t,null}function pb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ET()){case Xg:return 1;case ab:return 4;case fh:case ST:return 16;case ob:return 536870912;default:return 16}default:return 16}}var yi=null,ry=null,qd=null;function gb(){if(qd)return qd;var t,e=ry,n=e.length,r,i="value"in yi?yi.value:yi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[o-r];r++);return qd=i.slice(t,1<r?1-r:void 0)}function Zd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jd(){return!0}function I0(){return!1}function Gn(t){function e(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?jd:I0,this.isPropagationStopped=I0,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jd)},persist:function(){},isPersistent:jd}),e}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sy=Gn(jl),vu=ft({},jl,{view:0,detail:0}),BT=Gn(vu),kf,Tf,oc,dm=ft({},vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oc&&(oc&&t.type==="mousemove"?(kf=t.screenX-oc.screenX,Tf=t.screenY-oc.screenY):Tf=kf=0,oc=t),kf)},movementY:function(t){return"movementY"in t?t.movementY:Tf}}),A0=Gn(dm),FT=ft({},dm,{dataTransfer:0}),WT=Gn(FT),$T=ft({},vu,{relatedTarget:0}),Ef=Gn($T),HT=ft({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),qT=Gn(HT),ZT=ft({},jl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KT=Gn(ZT),GT=ft({},jl,{data:0}),R0=Gn(GT),QT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JT[t])?!!e[t]:!1}function iy(){return XT}var eE=ft({},vu,{key:function(t){if(t.key){var e=QT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iy,charCode:function(t){return t.type==="keypress"?Zd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tE=Gn(eE),nE=ft({},dm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L0=Gn(nE),rE=ft({},vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iy}),sE=Gn(rE),iE=ft({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),aE=Gn(iE),oE=ft({},dm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lE=Gn(oE),cE=[9,13,27,32],ay=Is&&"CompositionEvent"in window,Nc=null;Is&&"documentMode"in document&&(Nc=document.documentMode);var uE=Is&&"TextEvent"in window&&!Nc,yb=Is&&(!ay||Nc&&8<Nc&&11>=Nc),D0=" ",M0=!1;function xb(t,e){switch(t){case"keyup":return cE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Do=!1;function dE(t,e){switch(t){case"compositionend":return wb(e);case"keypress":return e.which!==32?null:(M0=!0,D0);case"textInput":return t=e.data,t===D0&&M0?null:t;default:return null}}function hE(t,e){if(Do)return t==="compositionend"||!ay&&xb(t,e)?(t=gb(),qd=ry=yi=null,Do=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yb&&e.locale!=="ko"?null:e.data;default:return null}}var mE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mE[t.type]:e==="textarea"}function vb(t,e,n,r){Y_(r),e=xh(e,"onChange"),0<e.length&&(n=new sy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kc=null,Hc=null;function fE(t){zb(t,0)}function hm(t){var e=Vo(t);if($_(e))return t}function pE(t,e){if(t==="change")return e}var _b=!1;if(Is){var Sf;if(Is){var Pf="oninput"in document;if(!Pf){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),Pf=typeof V0.oninput=="function"}Sf=Pf}else Sf=!1;_b=Sf&&(!document.documentMode||9<document.documentMode)}function U0(){kc&&(kc.detachEvent("onpropertychange",bb),Hc=kc=null)}function bb(t){if(t.propertyName==="value"&&hm(Hc)){var e=[];vb(e,Hc,t,Jg(t)),tb(fE,e)}}function gE(t,e,n){t==="focusin"?(U0(),kc=e,Hc=n,kc.attachEvent("onpropertychange",bb)):t==="focusout"&&U0()}function yE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hm(Hc)}function xE(t,e){if(t==="click")return hm(e)}function wE(t,e){if(t==="input"||t==="change")return hm(e)}function vE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:vE;function qc(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cp.call(e,i)||!Tr(t[i],e[i]))return!1}return!0}function B0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F0(t,e){var n=B0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B0(n)}}function jb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Nb(){for(var t=window,e=dh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dh(t.document)}return e}function oy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _E(t){var e=Nb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jb(n.ownerDocument.documentElement,n)){if(r!==null&&oy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=F0(n,o);var l=F0(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bE=Is&&"documentMode"in document&&11>=document.documentMode,Mo=null,Sp=null,Tc=null,Pp=!1;function W0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pp||Mo==null||Mo!==dh(r)||(r=Mo,"selectionStart"in r&&oy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tc&&qc(Tc,r)||(Tc=r,r=xh(Sp,"onSelect"),0<r.length&&(e=new sy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mo)))}function Nd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oo={animationend:Nd("Animation","AnimationEnd"),animationiteration:Nd("Animation","AnimationIteration"),animationstart:Nd("Animation","AnimationStart"),transitionend:Nd("Transition","TransitionEnd")},Cf={},kb={};Is&&(kb=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function mm(t){if(Cf[t])return Cf[t];if(!Oo[t])return t;var e=Oo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kb)return Cf[t]=e[n];return t}var Tb=mm("animationend"),Eb=mm("animationiteration"),Sb=mm("animationstart"),Pb=mm("transitionend"),Cb=new Map,$0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(t,e){Cb.set(t,e),Za(e,[t])}for(var zf=0;zf<$0.length;zf++){var If=$0[zf],jE=If.toLowerCase(),NE=If[0].toUpperCase()+If.slice(1);Gi(jE,"on"+NE)}Gi(Tb,"onAnimationEnd");Gi(Eb,"onAnimationIteration");Gi(Sb,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(Pb,"onTransitionEnd");il("onMouseEnter",["mouseout","mouseover"]);il("onMouseLeave",["mouseout","mouseover"]);il("onPointerEnter",["pointerout","pointerover"]);il("onPointerLeave",["pointerout","pointerover"]);Za("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Za("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Za("onBeforeInput",["compositionend","keypress","textInput","paste"]);Za("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Za("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Za("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kE=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function H0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jT(r,e,void 0,t),t.currentTarget=null}function zb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var h=r[l],m=h.instance,f=h.currentTarget;if(h=h.listener,m!==o&&i.isPropagationStopped())break e;H0(i,h,f),o=m}else for(l=0;l<r.length;l++){if(h=r[l],m=h.instance,f=h.currentTarget,h=h.listener,m!==o&&i.isPropagationStopped())break e;H0(i,h,f),o=m}}}if(mh)throw t=Np,mh=!1,Np=null,t}function ot(t,e){var n=e[Rp];n===void 0&&(n=e[Rp]=new Set);var r=t+"__bubble";n.has(r)||(Ib(e,t,2,!1),n.add(r))}function Af(t,e,n){var r=0;e&&(r|=4),Ib(n,t,r,e)}var kd="_reactListening"+Math.random().toString(36).slice(2);function Zc(t){if(!t[kd]){t[kd]=!0,V_.forEach(function(n){n!=="selectionchange"&&(kE.has(n)||Af(n,!1,t),Af(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kd]||(e[kd]=!0,Af("selectionchange",!1,e))}}function Ib(t,e,n,r){switch(pb(e)){case 1:var i=VT;break;case 4:i=UT;break;default:i=ny}n=i.bind(null,e,n,t),i=void 0,!jp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rf(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var h=r.stateNode.containerInfo;if(h===i||h.nodeType===8&&h.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var m=l.tag;if((m===3||m===4)&&(m=l.stateNode.containerInfo,m===i||m.nodeType===8&&m.parentNode===i))return;l=l.return}for(;h!==null;){if(l=ba(h),l===null)return;if(m=l.tag,m===5||m===6){r=o=l;continue e}h=h.parentNode}}r=r.return}tb(function(){var f=o,g=Jg(n),x=[];e:{var v=Cb.get(t);if(v!==void 0){var P=sy,E=t;switch(t){case"keypress":if(Zd(n)===0)break e;case"keydown":case"keyup":P=tE;break;case"focusin":E="focus",P=Ef;break;case"focusout":E="blur",P=Ef;break;case"beforeblur":case"afterblur":P=Ef;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=A0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=WT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=sE;break;case Tb:case Eb:case Sb:P=qT;break;case Pb:P=aE;break;case"scroll":P=BT;break;case"wheel":P=lE;break;case"copy":case"cut":case"paste":P=KT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=L0}var S=(e&4)!==0,M=!S&&t==="scroll",j=S?v!==null?v+"Capture":null:v;S=[];for(var T=f,I;T!==null;){I=T;var W=I.stateNode;if(I.tag===5&&W!==null&&(I=W,j!==null&&(W=Bc(T,j),W!=null&&S.push(Kc(T,W,I)))),M)break;T=T.return}0<S.length&&(v=new P(v,E,null,n,g),x.push({event:v,listeners:S}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",v&&n!==_p&&(E=n.relatedTarget||n.fromElement)&&(ba(E)||E[As]))break e;if((P||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,P?(E=n.relatedTarget||n.toElement,P=f,E=E?ba(E):null,E!==null&&(M=Ka(E),E!==M||E.tag!==5&&E.tag!==6)&&(E=null)):(P=null,E=f),P!==E)){if(S=A0,W="onMouseLeave",j="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(S=L0,W="onPointerLeave",j="onPointerEnter",T="pointer"),M=P==null?v:Vo(P),I=E==null?v:Vo(E),v=new S(W,T+"leave",P,n,g),v.target=M,v.relatedTarget=I,W=null,ba(g)===f&&(S=new S(j,T+"enter",E,n,g),S.target=I,S.relatedTarget=M,W=S),M=W,P&&E)t:{for(S=P,j=E,T=0,I=S;I;I=So(I))T++;for(I=0,W=j;W;W=So(W))I++;for(;0<T-I;)S=So(S),T--;for(;0<I-T;)j=So(j),I--;for(;T--;){if(S===j||j!==null&&S===j.alternate)break t;S=So(S),j=So(j)}S=null}else S=null;P!==null&&q0(x,v,P,S,!1),E!==null&&M!==null&&q0(x,M,E,S,!0)}}e:{if(v=f?Vo(f):window,P=v.nodeName&&v.nodeName.toLowerCase(),P==="select"||P==="input"&&v.type==="file")var D=pE;else if(O0(v))if(_b)D=wE;else{D=yE;var O=gE}else(P=v.nodeName)&&P.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(D=xE);if(D&&(D=D(t,f))){vb(x,D,n,g);break e}O&&O(t,v,f),t==="focusout"&&(O=v._wrapperState)&&O.controlled&&v.type==="number"&&gp(v,"number",v.value)}switch(O=f?Vo(f):window,t){case"focusin":(O0(O)||O.contentEditable==="true")&&(Mo=O,Sp=f,Tc=null);break;case"focusout":Tc=Sp=Mo=null;break;case"mousedown":Pp=!0;break;case"contextmenu":case"mouseup":case"dragend":Pp=!1,W0(x,n,g);break;case"selectionchange":if(bE)break;case"keydown":case"keyup":W0(x,n,g)}var N;if(ay)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Do?xb(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(yb&&n.locale!=="ko"&&(Do||b!=="onCompositionStart"?b==="onCompositionEnd"&&Do&&(N=gb()):(yi=g,ry="value"in yi?yi.value:yi.textContent,Do=!0)),O=xh(f,b),0<O.length&&(b=new R0(b,t,null,n,g),x.push({event:b,listeners:O}),N?b.data=N:(N=wb(n),N!==null&&(b.data=N)))),(N=uE?dE(t,n):hE(t,n))&&(f=xh(f,"onBeforeInput"),0<f.length&&(g=new R0("onBeforeInput","beforeinput",null,n,g),x.push({event:g,listeners:f}),g.data=N))}zb(x,e)})}function Kc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Bc(t,n),o!=null&&r.unshift(Kc(t,o,i)),o=Bc(t,e),o!=null&&r.push(Kc(t,o,i))),t=t.return}return r}function So(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q0(t,e,n,r,i){for(var o=e._reactName,l=[];n!==null&&n!==r;){var h=n,m=h.alternate,f=h.stateNode;if(m!==null&&m===r)break;h.tag===5&&f!==null&&(h=f,i?(m=Bc(n,o),m!=null&&l.unshift(Kc(n,m,h))):i||(m=Bc(n,o),m!=null&&l.push(Kc(n,m,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var TE=/\r\n?/g,EE=/\u0000|\uFFFD/g;function Z0(t){return(typeof t=="string"?t:""+t).replace(TE,`
`).replace(EE,"")}function Td(t,e,n){if(e=Z0(e),Z0(t)!==e&&n)throw Error(ae(425))}function wh(){}var Cp=null,zp=null;function Ip(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ap=typeof setTimeout=="function"?setTimeout:void 0,SE=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,PE=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(t){return K0.resolve(null).then(t).catch(CE)}:Ap;function CE(t){setTimeout(function(){throw t})}function Lf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),$c(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$c(e)}function ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function G0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nl=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Nl,Gc="__reactProps$"+Nl,As="__reactContainer$"+Nl,Rp="__reactEvents$"+Nl,zE="__reactListeners$"+Nl,IE="__reactHandles$"+Nl;function ba(t){var e=t[Fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[As]||n[Fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=G0(t);t!==null;){if(n=t[Fr])return n;t=G0(t)}return e}t=n,n=t.parentNode}return null}function _u(t){return t=t[Fr]||t[As],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function fm(t){return t[Gc]||null}var Lp=[],Uo=-1;function Qi(t){return{current:t}}function ct(t){0>Uo||(t.current=Lp[Uo],Lp[Uo]=null,Uo--)}function it(t,e){Uo++,Lp[Uo]=t.current,t.current=e}var Di={},dn=Qi(Di),In=Qi(!1),Ra=Di;function al(t,e){var n=t.type.contextTypes;if(!n)return Di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function An(t){return t=t.childContextTypes,t!=null}function vh(){ct(In),ct(dn)}function Q0(t,e,n){if(dn.current!==Di)throw Error(ae(168));it(dn,e),it(In,n)}function Ab(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,gT(t)||"Unknown",i));return ft({},n,r)}function _h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Di,Ra=dn.current,it(dn,t),it(In,In.current),!0}function Y0(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=Ab(t,e,Ra),r.__reactInternalMemoizedMergedChildContext=t,ct(In),ct(dn),it(dn,t)):ct(In),it(In,n)}var bs=null,pm=!1,Df=!1;function Rb(t){bs===null?bs=[t]:bs.push(t)}function AE(t){pm=!0,Rb(t)}function Yi(){if(!Df&&bs!==null){Df=!0;var t=0,e=et;try{var n=bs;for(et=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bs=null,pm=!1}catch(i){throw bs!==null&&(bs=bs.slice(t+1)),ib(Xg,Yi),i}finally{et=e,Df=!1}}return null}var Bo=[],Fo=0,bh=null,jh=0,rr=[],sr=0,La=null,Ns=1,ks="";function wa(t,e){Bo[Fo++]=jh,Bo[Fo++]=bh,bh=t,jh=e}function Lb(t,e,n){rr[sr++]=Ns,rr[sr++]=ks,rr[sr++]=La,La=t;var r=Ns;t=ks;var i=32-Nr(r)-1;r&=~(1<<i),n+=1;var o=32-Nr(e)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Ns=1<<32-Nr(e)+i|n<<i|r,ks=o+t}else Ns=1<<o|n<<i|r,ks=t}function ly(t){t.return!==null&&(wa(t,1),Lb(t,1,0))}function cy(t){for(;t===bh;)bh=Bo[--Fo],Bo[Fo]=null,jh=Bo[--Fo],Bo[Fo]=null;for(;t===La;)La=rr[--sr],rr[sr]=null,ks=rr[--sr],rr[sr]=null,Ns=rr[--sr],rr[sr]=null}var qn=null,Fn=null,ut=!1,_r=null;function Db(t,e){var n=ar(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function J0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qn=t,Fn=ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=La!==null?{id:Ns,overflow:ks}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ar(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qn=t,Fn=null,!0):!1;default:return!1}}function Dp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mp(t){if(ut){var e=Fn;if(e){var n=e;if(!J0(t,e)){if(Dp(t))throw Error(ae(418));e=ki(n.nextSibling);var r=qn;e&&J0(t,e)?Db(r,n):(t.flags=t.flags&-4097|2,ut=!1,qn=t)}}else{if(Dp(t))throw Error(ae(418));t.flags=t.flags&-4097|2,ut=!1,qn=t}}}function X0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qn=t}function Ed(t){if(t!==qn)return!1;if(!ut)return X0(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ip(t.type,t.memoizedProps)),e&&(e=Fn)){if(Dp(t))throw Mb(),Error(ae(418));for(;e;)Db(t,e),e=ki(e.nextSibling)}if(X0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=ki(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=qn?ki(t.stateNode.nextSibling):null;return!0}function Mb(){for(var t=Fn;t;)t=ki(t.nextSibling)}function ol(){Fn=qn=null,ut=!1}function uy(t){_r===null?_r=[t]:_r.push(t)}var RE=Ws.ReactCurrentBatchConfig;function lc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=i.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Sd(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ew(t){var e=t._init;return e(t._payload)}function Ob(t){function e(j,T){if(t){var I=j.deletions;I===null?(j.deletions=[T],j.flags|=16):I.push(T)}}function n(j,T){if(!t)return null;for(;T!==null;)e(j,T),T=T.sibling;return null}function r(j,T){for(j=new Map;T!==null;)T.key!==null?j.set(T.key,T):j.set(T.index,T),T=T.sibling;return j}function i(j,T){return j=Pi(j,T),j.index=0,j.sibling=null,j}function o(j,T,I){return j.index=I,t?(I=j.alternate,I!==null?(I=I.index,I<T?(j.flags|=2,T):I):(j.flags|=2,T)):(j.flags|=1048576,T)}function l(j){return t&&j.alternate===null&&(j.flags|=2),j}function h(j,T,I,W){return T===null||T.tag!==6?(T=Wf(I,j.mode,W),T.return=j,T):(T=i(T,I),T.return=j,T)}function m(j,T,I,W){var D=I.type;return D===Lo?g(j,T,I.props.children,W,I.key):T!==null&&(T.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===li&&ew(D)===T.type)?(W=i(T,I.props),W.ref=lc(j,T,I),W.return=j,W):(W=eh(I.type,I.key,I.props,null,j.mode,W),W.ref=lc(j,T,I),W.return=j,W)}function f(j,T,I,W){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=$f(I,j.mode,W),T.return=j,T):(T=i(T,I.children||[]),T.return=j,T)}function g(j,T,I,W,D){return T===null||T.tag!==7?(T=Sa(I,j.mode,W,D),T.return=j,T):(T=i(T,I),T.return=j,T)}function x(j,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Wf(""+T,j.mode,I),T.return=j,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case yd:return I=eh(T.type,T.key,T.props,null,j.mode,I),I.ref=lc(j,null,T),I.return=j,I;case Ro:return T=$f(T,j.mode,I),T.return=j,T;case li:var W=T._init;return x(j,W(T._payload),I)}if(mc(T)||rc(T))return T=Sa(T,j.mode,I,null),T.return=j,T;Sd(j,T)}return null}function v(j,T,I,W){var D=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return D!==null?null:h(j,T,""+I,W);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case yd:return I.key===D?m(j,T,I,W):null;case Ro:return I.key===D?f(j,T,I,W):null;case li:return D=I._init,v(j,T,D(I._payload),W)}if(mc(I)||rc(I))return D!==null?null:g(j,T,I,W,null);Sd(j,I)}return null}function P(j,T,I,W,D){if(typeof W=="string"&&W!==""||typeof W=="number")return j=j.get(I)||null,h(T,j,""+W,D);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case yd:return j=j.get(W.key===null?I:W.key)||null,m(T,j,W,D);case Ro:return j=j.get(W.key===null?I:W.key)||null,f(T,j,W,D);case li:var O=W._init;return P(j,T,I,O(W._payload),D)}if(mc(W)||rc(W))return j=j.get(I)||null,g(T,j,W,D,null);Sd(T,W)}return null}function E(j,T,I,W){for(var D=null,O=null,N=T,b=T=0,R=null;N!==null&&b<I.length;b++){N.index>b?(R=N,N=null):R=N.sibling;var U=v(j,N,I[b],W);if(U===null){N===null&&(N=R);break}t&&N&&U.alternate===null&&e(j,N),T=o(U,T,b),O===null?D=U:O.sibling=U,O=U,N=R}if(b===I.length)return n(j,N),ut&&wa(j,b),D;if(N===null){for(;b<I.length;b++)N=x(j,I[b],W),N!==null&&(T=o(N,T,b),O===null?D=N:O.sibling=N,O=N);return ut&&wa(j,b),D}for(N=r(j,N);b<I.length;b++)R=P(N,j,b,I[b],W),R!==null&&(t&&R.alternate!==null&&N.delete(R.key===null?b:R.key),T=o(R,T,b),O===null?D=R:O.sibling=R,O=R);return t&&N.forEach(function(B){return e(j,B)}),ut&&wa(j,b),D}function S(j,T,I,W){var D=rc(I);if(typeof D!="function")throw Error(ae(150));if(I=D.call(I),I==null)throw Error(ae(151));for(var O=D=null,N=T,b=T=0,R=null,U=I.next();N!==null&&!U.done;b++,U=I.next()){N.index>b?(R=N,N=null):R=N.sibling;var B=v(j,N,U.value,W);if(B===null){N===null&&(N=R);break}t&&N&&B.alternate===null&&e(j,N),T=o(B,T,b),O===null?D=B:O.sibling=B,O=B,N=R}if(U.done)return n(j,N),ut&&wa(j,b),D;if(N===null){for(;!U.done;b++,U=I.next())U=x(j,U.value,W),U!==null&&(T=o(U,T,b),O===null?D=U:O.sibling=U,O=U);return ut&&wa(j,b),D}for(N=r(j,N);!U.done;b++,U=I.next())U=P(N,j,b,U.value,W),U!==null&&(t&&U.alternate!==null&&N.delete(U.key===null?b:U.key),T=o(U,T,b),O===null?D=U:O.sibling=U,O=U);return t&&N.forEach(function(H){return e(j,H)}),ut&&wa(j,b),D}function M(j,T,I,W){if(typeof I=="object"&&I!==null&&I.type===Lo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case yd:e:{for(var D=I.key,O=T;O!==null;){if(O.key===D){if(D=I.type,D===Lo){if(O.tag===7){n(j,O.sibling),T=i(O,I.props.children),T.return=j,j=T;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===li&&ew(D)===O.type){n(j,O.sibling),T=i(O,I.props),T.ref=lc(j,O,I),T.return=j,j=T;break e}n(j,O);break}else e(j,O);O=O.sibling}I.type===Lo?(T=Sa(I.props.children,j.mode,W,I.key),T.return=j,j=T):(W=eh(I.type,I.key,I.props,null,j.mode,W),W.ref=lc(j,T,I),W.return=j,j=W)}return l(j);case Ro:e:{for(O=I.key;T!==null;){if(T.key===O)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){n(j,T.sibling),T=i(T,I.children||[]),T.return=j,j=T;break e}else{n(j,T);break}else e(j,T);T=T.sibling}T=$f(I,j.mode,W),T.return=j,j=T}return l(j);case li:return O=I._init,M(j,T,O(I._payload),W)}if(mc(I))return E(j,T,I,W);if(rc(I))return S(j,T,I,W);Sd(j,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(n(j,T.sibling),T=i(T,I),T.return=j,j=T):(n(j,T),T=Wf(I,j.mode,W),T.return=j,j=T),l(j)):n(j,T)}return M}var ll=Ob(!0),Vb=Ob(!1),Nh=Qi(null),kh=null,Wo=null,dy=null;function hy(){dy=Wo=kh=null}function my(t){var e=Nh.current;ct(Nh),t._currentValue=e}function Op(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yo(t,e){kh=t,dy=Wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zn=!0),t.firstContext=null)}function ur(t){var e=t._currentValue;if(dy!==t)if(t={context:t,memoizedValue:e,next:null},Wo===null){if(kh===null)throw Error(ae(308));Wo=t,kh.dependencies={lanes:0,firstContext:t}}else Wo=Wo.next=t;return e}var ja=null;function fy(t){ja===null?ja=[t]:ja.push(t)}function Ub(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,fy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rs(t,r)}function Rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ci=!1;function py(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ps(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,He&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rs(t,n)}return i=r.interleaved,i===null?(e.next=e,fy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rs(t,n)}function Kd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ey(t,n)}}function tw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Th(t,e,n,r){var i=t.updateQueue;ci=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var m=h,f=m.next;m.next=null,l===null?o=f:l.next=f,l=m;var g=t.alternate;g!==null&&(g=g.updateQueue,h=g.lastBaseUpdate,h!==l&&(h===null?g.firstBaseUpdate=f:h.next=f,g.lastBaseUpdate=m))}if(o!==null){var x=i.baseState;l=0,g=f=m=null,h=o;do{var v=h.lane,P=h.eventTime;if((r&v)===v){g!==null&&(g=g.next={eventTime:P,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var E=t,S=h;switch(v=e,P=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){x=E.call(P,x,v);break e}x=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,v=typeof E=="function"?E.call(P,x,v):E,v==null)break e;x=ft({},x,v);break e;case 2:ci=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[h]:v.push(h))}else P={eventTime:P,lane:v,tag:h.tag,payload:h.payload,callback:h.callback,next:null},g===null?(f=g=P,m=x):g=g.next=P,l|=v;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;v=h,h=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(g===null&&(m=x),i.baseState=m,i.firstBaseUpdate=f,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ma|=l,t.lanes=l,t.memoizedState=x}}function nw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var bu={},Zr=Qi(bu),Qc=Qi(bu),Yc=Qi(bu);function Na(t){if(t===bu)throw Error(ae(174));return t}function gy(t,e){switch(it(Yc,e),it(Qc,t),it(Zr,bu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xp(e,t)}ct(Zr),it(Zr,e)}function cl(){ct(Zr),ct(Qc),ct(Yc)}function Fb(t){Na(Yc.current);var e=Na(Zr.current),n=xp(e,t.type);e!==n&&(it(Qc,t),it(Zr,n))}function yy(t){Qc.current===t&&(ct(Zr),ct(Qc))}var dt=Qi(0);function Eh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mf=[];function xy(){for(var t=0;t<Mf.length;t++)Mf[t]._workInProgressVersionPrimary=null;Mf.length=0}var Gd=Ws.ReactCurrentDispatcher,Of=Ws.ReactCurrentBatchConfig,Da=0,ht=null,Mt=null,Ht=null,Sh=!1,Ec=!1,Jc=0,LE=0;function rn(){throw Error(ae(321))}function wy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tr(t[n],e[n]))return!1;return!0}function vy(t,e,n,r,i,o){if(Da=o,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gd.current=t===null||t.memoizedState===null?VE:UE,t=n(r,i),Ec){o=0;do{if(Ec=!1,Jc=0,25<=o)throw Error(ae(301));o+=1,Ht=Mt=null,e.updateQueue=null,Gd.current=BE,t=n(r,i)}while(Ec)}if(Gd.current=Ph,e=Mt!==null&&Mt.next!==null,Da=0,Ht=Mt=ht=null,Sh=!1,e)throw Error(ae(300));return t}function _y(){var t=Jc!==0;return Jc=0,t}function Ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?ht.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function dr(){if(Mt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var e=Ht===null?ht.memoizedState:Ht.next;if(e!==null)Ht=e,Mt=t;else{if(t===null)throw Error(ae(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Ht===null?ht.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function Xc(t,e){return typeof e=="function"?e(t):e}function Vf(t){var e=dr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=Mt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var h=l=null,m=null,f=o;do{var g=f.lane;if((Da&g)===g)m!==null&&(m=m.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var x={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};m===null?(h=m=x,l=r):m=m.next=x,ht.lanes|=g,Ma|=g}f=f.next}while(f!==null&&f!==o);m===null?l=r:m.next=h,Tr(r,e.memoizedState)||(zn=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=m,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ht.lanes|=o,Ma|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uf(t){var e=dr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);Tr(o,e.memoizedState)||(zn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Wb(){}function $b(t,e){var n=ht,r=dr(),i=e(),o=!Tr(r.memoizedState,i);if(o&&(r.memoizedState=i,zn=!0),r=r.queue,by(Zb.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,eu(9,qb.bind(null,n,r,i,e),void 0,null),Zt===null)throw Error(ae(349));Da&30||Hb(n,e,i)}return i}function Hb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qb(t,e,n,r){e.value=n,e.getSnapshot=r,Kb(e)&&Gb(t)}function Zb(t,e,n){return n(function(){Kb(e)&&Gb(t)})}function Kb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tr(t,n)}catch{return!0}}function Gb(t){var e=Rs(t,1);e!==null&&kr(e,t,1,-1)}function rw(t){var e=Ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:t},e.queue=t,t=t.dispatch=OE.bind(null,ht,t),[e.memoizedState,t]}function eu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Qb(){return dr().memoizedState}function Qd(t,e,n,r){var i=Ur();ht.flags|=t,i.memoizedState=eu(1|e,n,void 0,r===void 0?null:r)}function gm(t,e,n,r){var i=dr();r=r===void 0?null:r;var o=void 0;if(Mt!==null){var l=Mt.memoizedState;if(o=l.destroy,r!==null&&wy(r,l.deps)){i.memoizedState=eu(e,n,o,r);return}}ht.flags|=t,i.memoizedState=eu(1|e,n,o,r)}function sw(t,e){return Qd(8390656,8,t,e)}function by(t,e){return gm(2048,8,t,e)}function Yb(t,e){return gm(4,2,t,e)}function Jb(t,e){return gm(4,4,t,e)}function Xb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ej(t,e,n){return n=n!=null?n.concat([t]):null,gm(4,4,Xb.bind(null,e,t),n)}function jy(){}function tj(t,e){var n=dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nj(t,e){var n=dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rj(t,e,n){return Da&21?(Tr(n,e)||(n=lb(),ht.lanes|=n,Ma|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zn=!0),t.memoizedState=n)}function DE(t,e){var n=et;et=n!==0&&4>n?n:4,t(!0);var r=Of.transition;Of.transition={};try{t(!1),e()}finally{et=n,Of.transition=r}}function sj(){return dr().memoizedState}function ME(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ij(t))aj(e,n);else if(n=Ub(t,e,n,r),n!==null){var i=wn();kr(n,t,r,i),oj(n,e,r)}}function OE(t,e,n){var r=Si(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ij(t))aj(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(i.hasEagerState=!0,i.eagerState=h,Tr(h,l)){var m=e.interleaved;m===null?(i.next=i,fy(e)):(i.next=m.next,m.next=i),e.interleaved=i;return}}catch{}finally{}n=Ub(t,e,i,r),n!==null&&(i=wn(),kr(n,t,r,i),oj(n,e,r))}}function ij(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function aj(t,e){Ec=Sh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ey(t,n)}}var Ph={readContext:ur,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},VE={readContext:ur,useCallback:function(t,e){return Ur().memoizedState=[t,e===void 0?null:e],t},useContext:ur,useEffect:sw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qd(4194308,4,Xb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qd(4,2,t,e)},useMemo:function(t,e){var n=Ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ME.bind(null,ht,t),[r.memoizedState,t]},useRef:function(t){var e=Ur();return t={current:t},e.memoizedState=t},useState:rw,useDebugValue:jy,useDeferredValue:function(t){return Ur().memoizedState=t},useTransition:function(){var t=rw(!1),e=t[0];return t=DE.bind(null,t[1]),Ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ht,i=Ur();if(ut){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Zt===null)throw Error(ae(349));Da&30||Hb(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,sw(Zb.bind(null,r,o,t),[t]),r.flags|=2048,eu(9,qb.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Ur(),e=Zt.identifierPrefix;if(ut){var n=ks,r=Ns;n=(r&~(1<<32-Nr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Jc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UE={readContext:ur,useCallback:tj,useContext:ur,useEffect:by,useImperativeHandle:ej,useInsertionEffect:Yb,useLayoutEffect:Jb,useMemo:nj,useReducer:Vf,useRef:Qb,useState:function(){return Vf(Xc)},useDebugValue:jy,useDeferredValue:function(t){var e=dr();return rj(e,Mt.memoizedState,t)},useTransition:function(){var t=Vf(Xc)[0],e=dr().memoizedState;return[t,e]},useMutableSource:Wb,useSyncExternalStore:$b,useId:sj,unstable_isNewReconciler:!1},BE={readContext:ur,useCallback:tj,useContext:ur,useEffect:by,useImperativeHandle:ej,useInsertionEffect:Yb,useLayoutEffect:Jb,useMemo:nj,useReducer:Uf,useRef:Qb,useState:function(){return Uf(Xc)},useDebugValue:jy,useDeferredValue:function(t){var e=dr();return Mt===null?e.memoizedState=t:rj(e,Mt.memoizedState,t)},useTransition:function(){var t=Uf(Xc)[0],e=dr().memoizedState;return[t,e]},useMutableSource:Wb,useSyncExternalStore:$b,useId:sj,unstable_isNewReconciler:!1};function wr(t,e){if(t&&t.defaultProps){e=ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ym={isMounted:function(t){return(t=t._reactInternals)?Ka(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wn(),i=Si(t),o=Ps(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ti(t,o,i),e!==null&&(kr(e,t,i,r),Kd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wn(),i=Si(t),o=Ps(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ti(t,o,i),e!==null&&(kr(e,t,i,r),Kd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wn(),r=Si(t),i=Ps(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ti(t,i,r),e!==null&&(kr(e,t,r,n),Kd(e,t,r))}};function iw(t,e,n,r,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!qc(n,r)||!qc(i,o):!0}function lj(t,e,n){var r=!1,i=Di,o=e.contextType;return typeof o=="object"&&o!==null?o=ur(o):(i=An(e)?Ra:dn.current,r=e.contextTypes,o=(r=r!=null)?al(t,i):Di),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ym,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function aw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ym.enqueueReplaceState(e,e.state,null)}function Up(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},py(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ur(o):(o=An(e)?Ra:dn.current,i.context=al(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Vp(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ym.enqueueReplaceState(i,i.state,null),Th(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ul(t,e){try{var n="",r=e;do n+=pT(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Bf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FE=typeof WeakMap=="function"?WeakMap:Map;function cj(t,e,n){n=Ps(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zh||(zh=!0,Yp=r),Bp(t,e)},n}function uj(t,e,n){n=Ps(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bp(t,e),typeof r!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function ow(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=nS.bind(null,t,e,n),e.then(t,t))}function lw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ps(-1,1),e.tag=2,Ti(n,e,1))),n.lanes|=1),t)}var WE=Ws.ReactCurrentOwner,zn=!1;function xn(t,e,n,r){e.child=t===null?Vb(e,null,n,r):ll(e,t.child,n,r)}function uw(t,e,n,r,i){n=n.render;var o=e.ref;return Yo(e,i),r=vy(t,e,n,r,o,i),n=_y(),t!==null&&!zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ls(t,e,i)):(ut&&n&&ly(e),e.flags|=1,xn(t,e,r,i),e.child)}function dw(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!zy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,dj(t,e,o,r,i)):(t=eh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:qc,n(l,r)&&t.ref===e.ref)return Ls(t,e,i)}return e.flags|=1,t=Pi(o,r),t.ref=e.ref,t.return=e,e.child=t}function dj(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(qc(o,r)&&t.ref===e.ref)if(zn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(zn=!0);else return e.lanes=t.lanes,Ls(t,e,i)}return Fp(t,e,n,r,i)}function hj(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Ho,Un),Un|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(Ho,Un),Un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,it(Ho,Un),Un|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,it(Ho,Un),Un|=r;return xn(t,e,i,n),e.child}function mj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fp(t,e,n,r,i){var o=An(n)?Ra:dn.current;return o=al(e,o),Yo(e,i),n=vy(t,e,n,r,o,i),r=_y(),t!==null&&!zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ls(t,e,i)):(ut&&r&&ly(e),e.flags|=1,xn(t,e,n,i),e.child)}function hw(t,e,n,r,i){if(An(n)){var o=!0;_h(e)}else o=!1;if(Yo(e,i),e.stateNode===null)Yd(t,e),lj(e,n,r),Up(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var m=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=ur(f):(f=An(n)?Ra:dn.current,f=al(e,f));var g=n.getDerivedStateFromProps,x=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==r||m!==f)&&aw(e,l,r,f),ci=!1;var v=e.memoizedState;l.state=v,Th(e,r,l,i),m=e.memoizedState,h!==r||v!==m||In.current||ci?(typeof g=="function"&&(Vp(e,n,g,r),m=e.memoizedState),(h=ci||iw(e,n,h,r,v,m,f))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=m),l.props=r,l.state=m,l.context=f,r=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Bb(t,e),h=e.memoizedProps,f=e.type===e.elementType?h:wr(e.type,h),l.props=f,x=e.pendingProps,v=l.context,m=n.contextType,typeof m=="object"&&m!==null?m=ur(m):(m=An(n)?Ra:dn.current,m=al(e,m));var P=n.getDerivedStateFromProps;(g=typeof P=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==x||v!==m)&&aw(e,l,r,m),ci=!1,v=e.memoizedState,l.state=v,Th(e,r,l,i);var E=e.memoizedState;h!==x||v!==E||In.current||ci?(typeof P=="function"&&(Vp(e,n,P,r),E=e.memoizedState),(f=ci||iw(e,n,f,r,v,E,m)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,E,m),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,E,m)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),l.props=r,l.state=E,l.context=m,r=f):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Wp(t,e,n,r,o,i)}function Wp(t,e,n,r,i,o){mj(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&Y0(e,n,!1),Ls(t,e,o);r=e.stateNode,WE.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=ll(e,t.child,null,o),e.child=ll(e,null,h,o)):xn(t,e,h,o),e.memoizedState=r.state,i&&Y0(e,n,!0),e.child}function fj(t){var e=t.stateNode;e.pendingContext?Q0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Q0(t,e.context,!1),gy(t,e.containerInfo)}function mw(t,e,n,r,i){return ol(),uy(i),e.flags|=256,xn(t,e,n,r),e.child}var $p={dehydrated:null,treeContext:null,retryLane:0};function Hp(t){return{baseLanes:t,cachePool:null,transitions:null}}function pj(t,e,n){var r=e.pendingProps,i=dt.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(i&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),it(dt,i&1),t===null)return Mp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=vm(l,r,0,null),t=Sa(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Hp(n),e.memoizedState=$p,t):Ny(e,l));if(i=t.memoizedState,i!==null&&(h=i.dehydrated,h!==null))return $E(t,e,l,r,h,i,n);if(o){o=r.fallback,l=e.mode,i=t.child,h=i.sibling;var m={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=m,e.deletions=null):(r=Pi(i,m),r.subtreeFlags=i.subtreeFlags&14680064),h!==null?o=Pi(h,o):(o=Sa(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?Hp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=$p,r}return o=t.child,t=o.sibling,r=Pi(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ny(t,e){return e=vm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pd(t,e,n,r){return r!==null&&uy(r),ll(e,t.child,null,n),t=Ny(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $E(t,e,n,r,i,o,l){if(n)return e.flags&256?(e.flags&=-257,r=Bf(Error(ae(422))),Pd(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=vm({mode:"visible",children:r.children},i,0,null),o=Sa(o,i,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ll(e,t.child,null,l),e.child.memoizedState=Hp(l),e.memoizedState=$p,o);if(!(e.mode&1))return Pd(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(ae(419)),r=Bf(o,r,void 0),Pd(t,e,l,r)}if(h=(l&t.childLanes)!==0,zn||h){if(r=Zt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Rs(t,i),kr(r,t,i,-1))}return Cy(),r=Bf(Error(ae(421))),Pd(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=rS.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Fn=ki(i.nextSibling),qn=e,ut=!0,_r=null,t!==null&&(rr[sr++]=Ns,rr[sr++]=ks,rr[sr++]=La,Ns=t.id,ks=t.overflow,La=e),e=Ny(e,r.children),e.flags|=4096,e)}function fw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Op(t.return,e,n)}function Ff(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function gj(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xn(t,e,r.children,n),r=dt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fw(t,n,e);else if(t.tag===19)fw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(it(dt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Eh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ff(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Eh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ff(e,!0,n,null,o);break;case"together":Ff(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ma|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HE(t,e,n){switch(e.tag){case 3:fj(e),ol();break;case 5:Fb(e);break;case 1:An(e.type)&&_h(e);break;case 4:gy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;it(Nh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(it(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?pj(t,e,n):(it(dt,dt.current&1),t=Ls(t,e,n),t!==null?t.sibling:null);it(dt,dt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gj(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),it(dt,dt.current),r)break;return null;case 22:case 23:return e.lanes=0,hj(t,e,n)}return Ls(t,e,n)}var yj,qp,xj,wj;yj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qp=function(){};xj=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Na(Zr.current);var o=null;switch(n){case"input":i=fp(t,i),r=fp(t,r),o=[];break;case"select":i=ft({},i,{value:void 0}),r=ft({},r,{value:void 0}),o=[];break;case"textarea":i=yp(t,i),r=yp(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wh)}wp(n,r);var l;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var h=i[f];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Vc.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var m=r[f];if(h=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&m!==h&&(m!=null||h!=null))if(f==="style")if(h){for(l in h)!h.hasOwnProperty(l)||m&&m.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in m)m.hasOwnProperty(l)&&h[l]!==m[l]&&(n||(n={}),n[l]=m[l])}else n||(o||(o=[]),o.push(f,n)),n=m;else f==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(o=o||[]).push(f,m)):f==="children"?typeof m!="string"&&typeof m!="number"||(o=o||[]).push(f,""+m):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Vc.hasOwnProperty(f)?(m!=null&&f==="onScroll"&&ot("scroll",t),o||h===m||(o=[])):(o=o||[]).push(f,m))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};wj=function(t,e,n,r){n!==r&&(e.flags|=4)};function cc(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qE(t,e,n){var r=e.pendingProps;switch(cy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return An(e.type)&&vh(),sn(e),null;case 3:return r=e.stateNode,cl(),ct(In),ct(dn),xy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ed(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_r!==null&&(eg(_r),_r=null))),qp(t,e),sn(e),null;case 5:yy(e);var i=Na(Yc.current);if(n=e.type,t!==null&&e.stateNode!=null)xj(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return sn(e),null}if(t=Na(Zr.current),Ed(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Fr]=e,r[Gc]=o,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(i=0;i<pc.length;i++)ot(pc[i],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":j0(r,o),ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ot("invalid",r);break;case"textarea":k0(r,o),ot("invalid",r)}wp(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&Td(r.textContent,h,t),i=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&Td(r.textContent,h,t),i=["children",""+h]):Vc.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&ot("scroll",r)}switch(n){case"input":xd(r),N0(r,o,!0);break;case"textarea":xd(r),T0(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=wh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Z_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Fr]=e,t[Gc]=r,yj(t,e,!1,!1),e.stateNode=t;e:{switch(l=vp(n,r),n){case"dialog":ot("cancel",t),ot("close",t),i=r;break;case"iframe":case"object":case"embed":ot("load",t),i=r;break;case"video":case"audio":for(i=0;i<pc.length;i++)ot(pc[i],t);i=r;break;case"source":ot("error",t),i=r;break;case"img":case"image":case"link":ot("error",t),ot("load",t),i=r;break;case"details":ot("toggle",t),i=r;break;case"input":j0(t,r),i=fp(t,r),ot("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ft({},r,{value:void 0}),ot("invalid",t);break;case"textarea":k0(t,r),i=yp(t,r),ot("invalid",t);break;default:i=r}wp(n,i),h=i;for(o in h)if(h.hasOwnProperty(o)){var m=h[o];o==="style"?Q_(t,m):o==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&K_(t,m)):o==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&Uc(t,m):typeof m=="number"&&Uc(t,""+m):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vc.hasOwnProperty(o)?m!=null&&o==="onScroll"&&ot("scroll",t):m!=null&&Kg(t,o,m,l))}switch(n){case"input":xd(t),N0(t,r,!1);break;case"textarea":xd(t),T0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Li(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Zo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Zo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)wj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Na(Yc.current),Na(Zr.current),Ed(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fr]=e,(o=r.nodeValue!==n)&&(t=qn,t!==null))switch(t.tag){case 3:Td(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Td(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fr]=e,e.stateNode=r}return sn(e),null;case 13:if(ct(dt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&Fn!==null&&e.mode&1&&!(e.flags&128))Mb(),ol(),e.flags|=98560,o=!1;else if(o=Ed(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ae(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ae(317));o[Fr]=e}else ol(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),o=!1}else _r!==null&&(eg(_r),_r=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Ot===0&&(Ot=3):Cy())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return cl(),qp(t,e),t===null&&Zc(e.stateNode.containerInfo),sn(e),null;case 10:return my(e.type._context),sn(e),null;case 17:return An(e.type)&&vh(),sn(e),null;case 19:if(ct(dt),o=e.memoizedState,o===null)return sn(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)cc(o,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Eh(t),l!==null){for(e.flags|=128,cc(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return it(dt,dt.current&1|2),e.child}t=t.sibling}o.tail!==null&&kt()>dl&&(e.flags|=128,r=!0,cc(o,!1),e.lanes=4194304)}else{if(!r)if(t=Eh(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!ut)return sn(e),null}else 2*kt()-o.renderingStartTime>dl&&n!==1073741824&&(e.flags|=128,r=!0,cc(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=kt(),e.sibling=null,n=dt.current,it(dt,r?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return Py(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Un&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function ZE(t,e){switch(cy(e),e.tag){case 1:return An(e.type)&&vh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cl(),ct(In),ct(dn),xy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yy(e),null;case 13:if(ct(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));ol()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(dt),null;case 4:return cl(),null;case 10:return my(e.type._context),null;case 22:case 23:return Py(),null;case 24:return null;default:return null}}var Cd=!1,ln=!1,KE=typeof WeakSet=="function"?WeakSet:Set,xe=null;function $o(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function Zp(t,e,n){try{n()}catch(r){yt(t,e,r)}}var pw=!1;function GE(t,e){if(Cp=gh,t=Nb(),oy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,m=-1,f=0,g=0,x=t,v=null;t:for(;;){for(var P;x!==n||i!==0&&x.nodeType!==3||(h=l+i),x!==o||r!==0&&x.nodeType!==3||(m=l+r),x.nodeType===3&&(l+=x.nodeValue.length),(P=x.firstChild)!==null;)v=x,x=P;for(;;){if(x===t)break t;if(v===n&&++f===i&&(h=l),v===o&&++g===r&&(m=l),(P=x.nextSibling)!==null)break;x=v,v=x.parentNode}x=P}n=h===-1||m===-1?null:{start:h,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(zp={focusedElem:t,selectionRange:n},gh=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,M=E.memoizedState,j=e.stateNode,T=j.getSnapshotBeforeUpdate(e.elementType===e.type?S:wr(e.type,S),M);j.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(W){yt(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return E=pw,pw=!1,E}function Sc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Zp(e,n,o)}i=i.next}while(i!==r)}}function xm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vj(t){var e=t.alternate;e!==null&&(t.alternate=null,vj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fr],delete e[Gc],delete e[Rp],delete e[zE],delete e[IE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _j(t){return t.tag===5||t.tag===3||t.tag===4}function gw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_j(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wh));else if(r!==4&&(t=t.child,t!==null))for(Gp(t,e,n),t=t.sibling;t!==null;)Gp(t,e,n),t=t.sibling}function Qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qp(t,e,n),t=t.sibling;t!==null;)Qp(t,e,n),t=t.sibling}var Gt=null,vr=!1;function si(t,e,n){for(n=n.child;n!==null;)bj(t,e,n),n=n.sibling}function bj(t,e,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(um,n)}catch{}switch(n.tag){case 5:ln||$o(n,e);case 6:var r=Gt,i=vr;Gt=null,si(t,e,n),Gt=r,vr=i,Gt!==null&&(vr?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(vr?(t=Gt,n=n.stateNode,t.nodeType===8?Lf(t.parentNode,n):t.nodeType===1&&Lf(t,n),$c(t)):Lf(Gt,n.stateNode));break;case 4:r=Gt,i=vr,Gt=n.stateNode.containerInfo,vr=!0,si(t,e,n),Gt=r,vr=i;break;case 0:case 11:case 14:case 15:if(!ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Zp(n,e,l),i=i.next}while(i!==r)}si(t,e,n);break;case 1:if(!ln&&($o(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){yt(n,e,h)}si(t,e,n);break;case 21:si(t,e,n);break;case 22:n.mode&1?(ln=(r=ln)||n.memoizedState!==null,si(t,e,n),ln=r):si(t,e,n);break;default:si(t,e,n)}}function yw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KE),e.forEach(function(r){var i=sS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Gt=h.stateNode,vr=!1;break e;case 3:Gt=h.stateNode.containerInfo,vr=!0;break e;case 4:Gt=h.stateNode.containerInfo,vr=!0;break e}h=h.return}if(Gt===null)throw Error(ae(160));bj(o,l,i),Gt=null,vr=!1;var m=i.alternate;m!==null&&(m.return=null),i.return=null}catch(f){yt(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jj(e,t),e=e.sibling}function jj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xr(e,t),Or(t),r&4){try{Sc(3,t,t.return),xm(3,t)}catch(S){yt(t,t.return,S)}try{Sc(5,t,t.return)}catch(S){yt(t,t.return,S)}}break;case 1:xr(e,t),Or(t),r&512&&n!==null&&$o(n,n.return);break;case 5:if(xr(e,t),Or(t),r&512&&n!==null&&$o(n,n.return),t.flags&32){var i=t.stateNode;try{Uc(i,"")}catch(S){yt(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&H_(i,o),vp(h,l);var f=vp(h,o);for(l=0;l<m.length;l+=2){var g=m[l],x=m[l+1];g==="style"?Q_(i,x):g==="dangerouslySetInnerHTML"?K_(i,x):g==="children"?Uc(i,x):Kg(i,g,x,f)}switch(h){case"input":pp(i,o);break;case"textarea":q_(i,o);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var P=o.value;P!=null?Zo(i,!!o.multiple,P,!1):v!==!!o.multiple&&(o.defaultValue!=null?Zo(i,!!o.multiple,o.defaultValue,!0):Zo(i,!!o.multiple,o.multiple?[]:"",!1))}i[Gc]=o}catch(S){yt(t,t.return,S)}}break;case 6:if(xr(e,t),Or(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(S){yt(t,t.return,S)}}break;case 3:if(xr(e,t),Or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$c(e.containerInfo)}catch(S){yt(t,t.return,S)}break;case 4:xr(e,t),Or(t);break;case 13:xr(e,t),Or(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Ey=kt())),r&4&&yw(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(ln=(f=ln)||g,xr(e,t),ln=f):xr(e,t),Or(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(xe=t,g=t.child;g!==null;){for(x=xe=g;xe!==null;){switch(v=xe,P=v.child,v.tag){case 0:case 11:case 14:case 15:Sc(4,v,v.return);break;case 1:$o(v,v.return);var E=v.stateNode;if(typeof E.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(S){yt(r,n,S)}}break;case 5:$o(v,v.return);break;case 22:if(v.memoizedState!==null){ww(x);continue}}P!==null?(P.return=v,xe=P):ww(x)}g=g.sibling}e:for(g=null,x=t;;){if(x.tag===5){if(g===null){g=x;try{i=x.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=x.stateNode,m=x.memoizedProps.style,l=m!=null&&m.hasOwnProperty("display")?m.display:null,h.style.display=G_("display",l))}catch(S){yt(t,t.return,S)}}}else if(x.tag===6){if(g===null)try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(S){yt(t,t.return,S)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;g===x&&(g=null),x=x.return}g===x&&(g=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:xr(e,t),Or(t),r&4&&yw(t);break;case 21:break;default:xr(e,t),Or(t)}}function Or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_j(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Uc(i,""),r.flags&=-33);var o=gw(t);Qp(t,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,h=gw(t);Gp(t,h,l);break;default:throw Error(ae(161))}}catch(m){yt(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QE(t,e,n){xe=t,Nj(t)}function Nj(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var i=xe,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Cd;if(!l){var h=i.alternate,m=h!==null&&h.memoizedState!==null||ln;h=Cd;var f=ln;if(Cd=l,(ln=m)&&!f)for(xe=i;xe!==null;)l=xe,m=l.child,l.tag===22&&l.memoizedState!==null?vw(i):m!==null?(m.return=l,xe=m):vw(i);for(;o!==null;)xe=o,Nj(o),o=o.sibling;xe=i,Cd=h,ln=f}xw(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,xe=o):xw(t)}}function xw(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||xm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ln)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:wr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&nw(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nw(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var x=g.dehydrated;x!==null&&$c(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}ln||e.flags&512&&Kp(e)}catch(v){yt(e,e.return,v)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function ww(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function vw(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xm(4,e)}catch(m){yt(e,n,m)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(m){yt(e,i,m)}}var o=e.return;try{Kp(e)}catch(m){yt(e,o,m)}break;case 5:var l=e.return;try{Kp(e)}catch(m){yt(e,l,m)}}}catch(m){yt(e,e.return,m)}if(e===t){xe=null;break}var h=e.sibling;if(h!==null){h.return=e.return,xe=h;break}xe=e.return}}var YE=Math.ceil,Ch=Ws.ReactCurrentDispatcher,ky=Ws.ReactCurrentOwner,lr=Ws.ReactCurrentBatchConfig,He=0,Zt=null,At=null,Jt=0,Un=0,Ho=Qi(0),Ot=0,tu=null,Ma=0,wm=0,Ty=0,Pc=null,Sn=null,Ey=0,dl=1/0,_s=null,zh=!1,Yp=null,Ei=null,zd=!1,xi=null,Ih=0,Cc=0,Jp=null,Jd=-1,Xd=0;function wn(){return He&6?kt():Jd!==-1?Jd:Jd=kt()}function Si(t){return t.mode&1?He&2&&Jt!==0?Jt&-Jt:RE.transition!==null?(Xd===0&&(Xd=lb()),Xd):(t=et,t!==0||(t=window.event,t=t===void 0?16:pb(t.type)),t):1}function kr(t,e,n,r){if(50<Cc)throw Cc=0,Jp=null,Error(ae(185));wu(t,n,r),(!(He&2)||t!==Zt)&&(t===Zt&&(!(He&2)&&(wm|=n),Ot===4&&di(t,Jt)),Rn(t,r),n===1&&He===0&&!(e.mode&1)&&(dl=kt()+500,pm&&Yi()))}function Rn(t,e){var n=t.callbackNode;RT(t,e);var r=ph(t,t===Zt?Jt:0);if(r===0)n!==null&&P0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&P0(n),e===1)t.tag===0?AE(_w.bind(null,t)):Rb(_w.bind(null,t)),PE(function(){!(He&6)&&Yi()}),n=null;else{switch(cb(r)){case 1:n=Xg;break;case 4:n=ab;break;case 16:n=fh;break;case 536870912:n=ob;break;default:n=fh}n=Ij(n,kj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kj(t,e){if(Jd=-1,Xd=0,He&6)throw Error(ae(327));var n=t.callbackNode;if(Jo()&&t.callbackNode!==n)return null;var r=ph(t,t===Zt?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ah(t,r);else{e=r;var i=He;He|=2;var o=Ej();(Zt!==t||Jt!==e)&&(_s=null,dl=kt()+500,Ea(t,e));do try{eS();break}catch(h){Tj(t,h)}while(!0);hy(),Ch.current=o,He=i,At!==null?e=0:(Zt=null,Jt=0,e=Ot)}if(e!==0){if(e===2&&(i=kp(t),i!==0&&(r=i,e=Xp(t,i))),e===1)throw n=tu,Ea(t,0),di(t,r),Rn(t,kt()),n;if(e===6)di(t,r);else{if(i=t.current.alternate,!(r&30)&&!JE(i)&&(e=Ah(t,r),e===2&&(o=kp(t),o!==0&&(r=o,e=Xp(t,o))),e===1))throw n=tu,Ea(t,0),di(t,r),Rn(t,kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:va(t,Sn,_s);break;case 3:if(di(t,r),(r&130023424)===r&&(e=Ey+500-kt(),10<e)){if(ph(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ap(va.bind(null,t,Sn,_s),e);break}va(t,Sn,_s);break;case 4:if(di(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Nr(r);o=1<<l,l=e[l],l>i&&(i=l),r&=~o}if(r=i,r=kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YE(r/1960))-r,10<r){t.timeoutHandle=Ap(va.bind(null,t,Sn,_s),r);break}va(t,Sn,_s);break;case 5:va(t,Sn,_s);break;default:throw Error(ae(329))}}}return Rn(t,kt()),t.callbackNode===n?kj.bind(null,t):null}function Xp(t,e){var n=Pc;return t.current.memoizedState.isDehydrated&&(Ea(t,e).flags|=256),t=Ah(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&eg(e)),t}function eg(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function JE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Tr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function di(t,e){for(e&=~Ty,e&=~wm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nr(e),r=1<<n;t[n]=-1,e&=~r}}function _w(t){if(He&6)throw Error(ae(327));Jo();var e=ph(t,0);if(!(e&1))return Rn(t,kt()),null;var n=Ah(t,e);if(t.tag!==0&&n===2){var r=kp(t);r!==0&&(e=r,n=Xp(t,r))}if(n===1)throw n=tu,Ea(t,0),di(t,e),Rn(t,kt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,va(t,Sn,_s),Rn(t,kt()),null}function Sy(t,e){var n=He;He|=1;try{return t(e)}finally{He=n,He===0&&(dl=kt()+500,pm&&Yi())}}function Oa(t){xi!==null&&xi.tag===0&&!(He&6)&&Jo();var e=He;He|=1;var n=lr.transition,r=et;try{if(lr.transition=null,et=1,t)return t()}finally{et=r,lr.transition=n,He=e,!(He&6)&&Yi()}}function Py(){Un=Ho.current,ct(Ho)}function Ea(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SE(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(cy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vh();break;case 3:cl(),ct(In),ct(dn),xy();break;case 5:yy(r);break;case 4:cl();break;case 13:ct(dt);break;case 19:ct(dt);break;case 10:my(r.type._context);break;case 22:case 23:Py()}n=n.return}if(Zt=t,At=t=Pi(t.current,null),Jt=Un=e,Ot=0,tu=null,Ty=wm=Ma=0,Sn=Pc=null,ja!==null){for(e=0;e<ja.length;e++)if(n=ja[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}ja=null}return t}function Tj(t,e){do{var n=At;try{if(hy(),Gd.current=Ph,Sh){for(var r=ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sh=!1}if(Da=0,Ht=Mt=ht=null,Ec=!1,Jc=0,ky.current=null,n===null||n.return===null){Ot=1,tu=e,At=null;break}e:{var o=t,l=n.return,h=n,m=e;if(e=Jt,h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var f=m,g=h,x=g.tag;if(!(g.mode&1)&&(x===0||x===11||x===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var P=lw(l);if(P!==null){P.flags&=-257,cw(P,l,h,o,e),P.mode&1&&ow(o,f,e),e=P,m=f;var E=e.updateQueue;if(E===null){var S=new Set;S.add(m),e.updateQueue=S}else E.add(m);break e}else{if(!(e&1)){ow(o,f,e),Cy();break e}m=Error(ae(426))}}else if(ut&&h.mode&1){var M=lw(l);if(M!==null){!(M.flags&65536)&&(M.flags|=256),cw(M,l,h,o,e),uy(ul(m,h));break e}}o=m=ul(m,h),Ot!==4&&(Ot=2),Pc===null?Pc=[o]:Pc.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var j=cj(o,m,e);tw(o,j);break e;case 1:h=m;var T=o.type,I=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ei===null||!Ei.has(I)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=uj(o,h,e);tw(o,W);break e}}o=o.return}while(o!==null)}Pj(n)}catch(D){e=D,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function Ej(){var t=Ch.current;return Ch.current=Ph,t===null?Ph:t}function Cy(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Zt===null||!(Ma&268435455)&&!(wm&268435455)||di(Zt,Jt)}function Ah(t,e){var n=He;He|=2;var r=Ej();(Zt!==t||Jt!==e)&&(_s=null,Ea(t,e));do try{XE();break}catch(i){Tj(t,i)}while(!0);if(hy(),He=n,Ch.current=r,At!==null)throw Error(ae(261));return Zt=null,Jt=0,Ot}function XE(){for(;At!==null;)Sj(At)}function eS(){for(;At!==null&&!kT();)Sj(At)}function Sj(t){var e=zj(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?Pj(t):At=e,ky.current=null}function Pj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ZE(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,At=null;return}}else if(n=qE(n,e,Un),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Ot===0&&(Ot=5)}function va(t,e,n){var r=et,i=lr.transition;try{lr.transition=null,et=1,tS(t,e,n,r)}finally{lr.transition=i,et=r}return null}function tS(t,e,n,r){do Jo();while(xi!==null);if(He&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(LT(t,o),t===Zt&&(At=Zt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zd||(zd=!0,Ij(fh,function(){return Jo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=lr.transition,lr.transition=null;var l=et;et=1;var h=He;He|=4,ky.current=null,GE(t,n),jj(n,t),_E(zp),gh=!!Cp,zp=Cp=null,t.current=n,QE(n),TT(),He=h,et=l,lr.transition=o}else t.current=n;if(zd&&(zd=!1,xi=t,Ih=i),o=t.pendingLanes,o===0&&(Ei=null),PT(n.stateNode),Rn(t,kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zh)throw zh=!1,t=Yp,Yp=null,t;return Ih&1&&t.tag!==0&&Jo(),o=t.pendingLanes,o&1?t===Jp?Cc++:(Cc=0,Jp=t):Cc=0,Yi(),null}function Jo(){if(xi!==null){var t=cb(Ih),e=lr.transition,n=et;try{if(lr.transition=null,et=16>t?16:t,xi===null)var r=!1;else{if(t=xi,xi=null,Ih=0,He&6)throw Error(ae(331));var i=He;for(He|=4,xe=t.current;xe!==null;){var o=xe,l=o.child;if(xe.flags&16){var h=o.deletions;if(h!==null){for(var m=0;m<h.length;m++){var f=h[m];for(xe=f;xe!==null;){var g=xe;switch(g.tag){case 0:case 11:case 15:Sc(8,g,o)}var x=g.child;if(x!==null)x.return=g,xe=x;else for(;xe!==null;){g=xe;var v=g.sibling,P=g.return;if(vj(g),g===f){xe=null;break}if(v!==null){v.return=P,xe=v;break}xe=P}}}var E=o.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var M=S.sibling;S.sibling=null,S=M}while(S!==null)}}xe=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,xe=l;else e:for(;xe!==null;){if(o=xe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Sc(9,o,o.return)}var j=o.sibling;if(j!==null){j.return=o.return,xe=j;break e}xe=o.return}}var T=t.current;for(xe=T;xe!==null;){l=xe;var I=l.child;if(l.subtreeFlags&2064&&I!==null)I.return=l,xe=I;else e:for(l=T;xe!==null;){if(h=xe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:xm(9,h)}}catch(D){yt(h,h.return,D)}if(h===l){xe=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,xe=W;break e}xe=h.return}}if(He=i,Yi(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(um,t)}catch{}r=!0}return r}finally{et=n,lr.transition=e}}return!1}function bw(t,e,n){e=ul(n,e),e=cj(t,e,1),t=Ti(t,e,1),e=wn(),t!==null&&(wu(t,1,e),Rn(t,e))}function yt(t,e,n){if(t.tag===3)bw(t,t,n);else for(;e!==null;){if(e.tag===3){bw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ei===null||!Ei.has(r))){t=ul(n,t),t=uj(e,t,1),e=Ti(e,t,1),t=wn(),e!==null&&(wu(e,1,t),Rn(e,t));break}}e=e.return}}function nS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wn(),t.pingedLanes|=t.suspendedLanes&n,Zt===t&&(Jt&n)===n&&(Ot===4||Ot===3&&(Jt&130023424)===Jt&&500>kt()-Ey?Ea(t,0):Ty|=n),Rn(t,e)}function Cj(t,e){e===0&&(t.mode&1?(e=_d,_d<<=1,!(_d&130023424)&&(_d=4194304)):e=1);var n=wn();t=Rs(t,e),t!==null&&(wu(t,e,n),Rn(t,n))}function rS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cj(t,n)}function sS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),Cj(t,n)}var zj;zj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||In.current)zn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zn=!1,HE(t,e,n);zn=!!(t.flags&131072)}else zn=!1,ut&&e.flags&1048576&&Lb(e,jh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yd(t,e),t=e.pendingProps;var i=al(e,dn.current);Yo(e,n),i=vy(null,e,r,t,i,n);var o=_y();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,An(r)?(o=!0,_h(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,py(e),i.updater=ym,e.stateNode=i,i._reactInternals=e,Up(e,r,t,n),e=Wp(null,e,r,!0,o,n)):(e.tag=0,ut&&o&&ly(e),xn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=aS(r),t=wr(r,t),i){case 0:e=Fp(null,e,r,t,n);break e;case 1:e=hw(null,e,r,t,n);break e;case 11:e=uw(null,e,r,t,n);break e;case 14:e=dw(null,e,r,wr(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),Fp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),hw(t,e,r,i,n);case 3:e:{if(fj(e),t===null)throw Error(ae(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Bb(t,e),Th(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ul(Error(ae(423)),e),e=mw(t,e,r,n,i);break e}else if(r!==i){i=ul(Error(ae(424)),e),e=mw(t,e,r,n,i);break e}else for(Fn=ki(e.stateNode.containerInfo.firstChild),qn=e,ut=!0,_r=null,n=Vb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ol(),r===i){e=Ls(t,e,n);break e}xn(t,e,r,n)}e=e.child}return e;case 5:return Fb(e),t===null&&Mp(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,Ip(r,i)?l=null:o!==null&&Ip(r,o)&&(e.flags|=32),mj(t,e),xn(t,e,l,n),e.child;case 6:return t===null&&Mp(e),null;case 13:return pj(t,e,n);case 4:return gy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ll(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),uw(t,e,r,i,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,l=i.value,it(Nh,r._currentValue),r._currentValue=l,o!==null)if(Tr(o.value,l)){if(o.children===i.children&&!In.current){e=Ls(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var m=h.firstContext;m!==null;){if(m.context===r){if(o.tag===1){m=Ps(-1,n&-n),m.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?m.next=m:(m.next=g.next,g.next=m),f.pending=m}}o.lanes|=n,m=o.alternate,m!==null&&(m.lanes|=n),Op(o.return,n,e),h.lanes|=n;break}m=m.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(ae(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Op(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}xn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Yo(e,n),i=ur(i),r=r(i),e.flags|=1,xn(t,e,r,n),e.child;case 14:return r=e.type,i=wr(r,e.pendingProps),i=wr(r.type,i),dw(t,e,r,i,n);case 15:return dj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),Yd(t,e),e.tag=1,An(r)?(t=!0,_h(e)):t=!1,Yo(e,n),lj(e,r,i),Up(e,r,i,n),Wp(null,e,r,!0,t,n);case 19:return gj(t,e,n);case 22:return hj(t,e,n)}throw Error(ae(156,e.tag))};function Ij(t,e){return ib(t,e)}function iS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(t,e,n,r){return new iS(t,e,n,r)}function zy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aS(t){if(typeof t=="function")return zy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qg)return 11;if(t===Yg)return 14}return 2}function Pi(t,e){var n=t.alternate;return n===null?(n=ar(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eh(t,e,n,r,i,o){var l=2;if(r=t,typeof t=="function")zy(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Lo:return Sa(n.children,i,o,e);case Gg:l=8,i|=8;break;case up:return t=ar(12,n,e,i|2),t.elementType=up,t.lanes=o,t;case dp:return t=ar(13,n,e,i),t.elementType=dp,t.lanes=o,t;case hp:return t=ar(19,n,e,i),t.elementType=hp,t.lanes=o,t;case F_:return vm(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U_:l=10;break e;case B_:l=9;break e;case Qg:l=11;break e;case Yg:l=14;break e;case li:l=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=ar(l,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Sa(t,e,n,r){return t=ar(7,t,r,e),t.lanes=n,t}function vm(t,e,n,r){return t=ar(22,t,r,e),t.elementType=F_,t.lanes=n,t.stateNode={isHidden:!1},t}function Wf(t,e,n){return t=ar(6,t,null,e),t.lanes=n,t}function $f(t,e,n){return e=ar(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nf(0),this.expirationTimes=Nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Iy(t,e,n,r,i,o,l,h,m){return t=new oS(t,e,n,h,m),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ar(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},py(o),t}function lS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Aj(t){if(!t)return Di;t=t._reactInternals;e:{if(Ka(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(An(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(An(n))return Ab(t,n,e)}return e}function Rj(t,e,n,r,i,o,l,h,m){return t=Iy(n,r,!0,t,i,o,l,h,m),t.context=Aj(null),n=t.current,r=wn(),i=Si(n),o=Ps(r,i),o.callback=e??null,Ti(n,o,i),t.current.lanes=i,wu(t,i,r),Rn(t,r),t}function _m(t,e,n,r){var i=e.current,o=wn(),l=Si(i);return n=Aj(n),e.context===null?e.context=n:e.pendingContext=n,e=Ps(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ti(i,e,l),t!==null&&(kr(t,i,l,o),Kd(t,i,l)),l}function Rh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ay(t,e){jw(t,e),(t=t.alternate)&&jw(t,e)}function cS(){return null}var Lj=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ry(t){this._internalRoot=t}bm.prototype.render=Ry.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));_m(t,e,null,null)};bm.prototype.unmount=Ry.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oa(function(){_m(null,t,null,null)}),e[As]=null}};function bm(t){this._internalRoot=t}bm.prototype.unstable_scheduleHydration=function(t){if(t){var e=hb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&fb(t)}};function Ly(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nw(){}function uS(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=Rh(l);o.call(f)}}var l=Rj(e,r,t,0,null,!1,!1,"",Nw);return t._reactRootContainer=l,t[As]=l.current,Zc(t.nodeType===8?t.parentNode:t),Oa(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var h=r;r=function(){var f=Rh(m);h.call(f)}}var m=Iy(t,0,!1,null,null,!1,!1,"",Nw);return t._reactRootContainer=m,t[As]=m.current,Zc(t.nodeType===8?t.parentNode:t),Oa(function(){_m(e,m,n,r)}),m}function Nm(t,e,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var h=i;i=function(){var m=Rh(l);h.call(m)}}_m(e,l,t,i)}else l=uS(n,e,t,i,r);return Rh(l)}ub=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fc(e.pendingLanes);n!==0&&(ey(e,n|1),Rn(e,kt()),!(He&6)&&(dl=kt()+500,Yi()))}break;case 13:Oa(function(){var r=Rs(t,1);if(r!==null){var i=wn();kr(r,t,1,i)}}),Ay(t,1)}};ty=function(t){if(t.tag===13){var e=Rs(t,134217728);if(e!==null){var n=wn();kr(e,t,134217728,n)}Ay(t,134217728)}};db=function(t){if(t.tag===13){var e=Si(t),n=Rs(t,e);if(n!==null){var r=wn();kr(n,t,e,r)}Ay(t,e)}};hb=function(){return et};mb=function(t,e){var n=et;try{return et=t,e()}finally{et=n}};bp=function(t,e,n){switch(e){case"input":if(pp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fm(r);if(!i)throw Error(ae(90));$_(r),pp(r,i)}}}break;case"textarea":q_(t,n);break;case"select":e=n.value,e!=null&&Zo(t,!!n.multiple,e,!1)}};X_=Sy;eb=Oa;var dS={usingClientEntryPoint:!1,Events:[_u,Vo,fm,Y_,J_,Sy]},uc={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hS={bundleType:uc.bundleType,version:uc.version,rendererPackageName:uc.rendererPackageName,rendererConfig:uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rb(t),t===null?null:t.stateNode},findFiberByHostInstance:uc.findFiberByHostInstance||cS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{um=Id.inject(hS),qr=Id}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dS;Kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ly(e))throw Error(ae(200));return lS(t,e,null,n)};Kn.createRoot=function(t,e){if(!Ly(t))throw Error(ae(299));var n=!1,r="",i=Lj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Iy(t,1,!1,null,null,n,!1,r,i),t[As]=e.current,Zc(t.nodeType===8?t.parentNode:t),new Ry(e)};Kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=rb(e),t=t===null?null:t.stateNode,t};Kn.flushSync=function(t){return Oa(t)};Kn.hydrate=function(t,e,n){if(!jm(e))throw Error(ae(200));return Nm(null,t,e,!0,n)};Kn.hydrateRoot=function(t,e,n){if(!Ly(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=Lj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Rj(e,null,t,1,n??null,i,!1,o,l),t[As]=e.current,Zc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new bm(e)};Kn.render=function(t,e,n){if(!jm(e))throw Error(ae(200));return Nm(null,t,e,!1,n)};Kn.unmountComponentAtNode=function(t){if(!jm(t))throw Error(ae(40));return t._reactRootContainer?(Oa(function(){Nm(null,null,t,!1,function(){t._reactRootContainer=null,t[As]=null})}),!0):!1};Kn.unstable_batchedUpdates=Sy;Kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jm(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Nm(t,e,n,!1,r)};Kn.version="18.3.1-next-f1338f8080-20240426";function Dj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dj)}catch(t){console.error(t)}}Dj(),D_.exports=Kn;var mS=D_.exports,kw=mS;lp.createRoot=kw.createRoot,lp.hydrateRoot=kw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nu(){return nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nu.apply(this,arguments)}var wi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wi||(wi={}));const Tw="popstate";function fS(t){t===void 0&&(t={});function e(i,o){let{pathname:l="/",search:h="",hash:m=""}=Ga(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),tg("",{pathname:l,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let m=i.location.href,f=m.indexOf("#");h=f===-1?m:m.slice(0,f)}return h+"#"+(typeof o=="string"?o:Lh(o))}function r(i,o){km(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return gS(e,n,r,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function km(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pS(){return Math.random().toString(36).substr(2,8)}function Ew(t,e){return{usr:t.state,key:t.key,idx:e}}function tg(t,e,n,r){return n===void 0&&(n=null),nu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ga(e):e,{state:n,key:e&&e.key||r||pS()})}function Lh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ga(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function gS(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,h=wi.Pop,m=null,f=g();f==null&&(f=0,l.replaceState(nu({},l.state,{idx:f}),""));function g(){return(l.state||{idx:null}).idx}function x(){h=wi.Pop;let M=g(),j=M==null?null:M-f;f=M,m&&m({action:h,location:S.location,delta:j})}function v(M,j){h=wi.Push;let T=tg(S.location,M,j);n&&n(T,M),f=g()+1;let I=Ew(T,f),W=S.createHref(T);try{l.pushState(I,"",W)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(W)}o&&m&&m({action:h,location:S.location,delta:1})}function P(M,j){h=wi.Replace;let T=tg(S.location,M,j);n&&n(T,M),f=g();let I=Ew(T,f),W=S.createHref(T);l.replaceState(I,"",W),o&&m&&m({action:h,location:S.location,delta:0})}function E(M){let j=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof M=="string"?M:Lh(M);return T=T.replace(/ $/,"%20"),mt(j,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,j)}let S={get action(){return h},get location(){return t(i,l)},listen(M){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(Tw,x),m=M,()=>{i.removeEventListener(Tw,x),m=null}},createHref(M){return e(i,M)},createURL:E,encodeLocation(M){let j=E(M);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:P,go(M){return l.go(M)}};return S}var Sw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sw||(Sw={}));function yS(t,e,n){return n===void 0&&(n="/"),xS(t,e,n)}function xS(t,e,n,r){let i=typeof e=="string"?Ga(e):e,o=hl(i.pathname||"/",n);if(o==null)return null;let l=Mj(t);wS(l);let h=null;for(let m=0;h==null&&m<l.length;++m){let f=CS(o);h=SS(l[m],f)}return h}function Mj(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};m.relativePath.startsWith("/")&&(mt(m.relativePath.startsWith(r),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(r.length));let f=Ci([r,m.relativePath]),g=n.concat(m);o.children&&o.children.length>0&&(mt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Mj(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:TS(f,o.index),routesMeta:g})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,l);else for(let m of Oj(o.path))i(o,l,m)}),e}function Oj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=Oj(r.join("/")),h=[];return h.push(...l.map(m=>m===""?o:[o,m].join("/"))),i&&h.push(...l),h.map(m=>t.startsWith("/")&&m===""?"/":m)}function wS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ES(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vS=/^:[\w-]+$/,_S=3,bS=2,jS=1,NS=10,kS=-2,Pw=t=>t==="*";function TS(t,e){let n=t.split("/"),r=n.length;return n.some(Pw)&&(r+=kS),e&&(r+=bS),n.filter(i=>!Pw(i)).reduce((i,o)=>i+(vS.test(o)?_S:o===""?jS:NS),r)}function ES(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function SS(t,e,n){let{routesMeta:r}=t,i={},o="/",l=[];for(let h=0;h<r.length;++h){let m=r[h],f=h===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",x=ng({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},g),v=m.route;if(!x)return null;Object.assign(i,x.params),l.push({params:i,pathname:Ci([o,x.pathname]),pathnameBase:LS(Ci([o,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(o=Ci([o,x.pathnameBase]))}return l}function ng(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PS(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((f,g,x)=>{let{paramName:v,isOptional:P}=g;if(v==="*"){let S=h[x]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const E=h[x];return P&&!E?f[v]=void 0:f[v]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function PS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),km(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,m)=>(r.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function CS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return km(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const zS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IS=t=>zS.test(t);function AS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ga(t):t,o;if(n)if(IS(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),km(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=Cw(n.substring(1),"/"):o=Cw(n,e)}else o=e;return{pathname:o,search:DS(r),hash:MS(i)}}function Cw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dy(t,e){let n=RS(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function My(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ga(t):(i=nu({},t),mt(!i.pathname||!i.pathname.includes("?"),Hf("?","pathname","search",i)),mt(!i.pathname||!i.pathname.includes("#"),Hf("#","pathname","hash",i)),mt(!i.search||!i.search.includes("#"),Hf("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,h;if(l==null)h=n;else{let x=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),x-=1;i.pathname=v.join("/")}h=x>=0?e[x]:"/"}let m=AS(i,h),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(f||g)&&(m.pathname+="/"),m}const Ci=t=>t.join("/").replace(/\/\/+/g,"/"),LS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Vj=["post","put","patch","delete"];new Set(Vj);const VS=["get",...Vj];new Set(VS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ru.apply(this,arguments)}const Tm=C.createContext(null),Uj=C.createContext(null),$s=C.createContext(null),Em=C.createContext(null),is=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Bj=C.createContext(null);function US(t,e){let{relative:n}=e===void 0?{}:e;kl()||mt(!1);let{basename:r,navigator:i}=C.useContext($s),{hash:o,pathname:l,search:h}=Sm(t,{relative:n}),m=l;return r!=="/"&&(m=l==="/"?r:Ci([r,l])),i.createHref({pathname:m,search:h,hash:o})}function kl(){return C.useContext(Em)!=null}function hr(){return kl()||mt(!1),C.useContext(Em).location}function Fj(t){C.useContext($s).static||C.useLayoutEffect(t)}function Pr(){let{isDataRoute:t}=C.useContext(is);return t?tP():BS()}function BS(){kl()||mt(!1);let t=C.useContext(Tm),{basename:e,future:n,navigator:r}=C.useContext($s),{matches:i}=C.useContext(is),{pathname:o}=hr(),l=JSON.stringify(Dy(i,n.v7_relativeSplatPath)),h=C.useRef(!1);return Fj(()=>{h.current=!0}),C.useCallback(function(f,g){if(g===void 0&&(g={}),!h.current)return;if(typeof f=="number"){r.go(f);return}let x=My(f,JSON.parse(l),o,g.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Ci([e,x.pathname])),(g.replace?r.replace:r.push)(x,g.state,g)},[e,r,l,o,t])}const FS=C.createContext(null);function WS(t){let e=C.useContext(is).outlet;return e&&C.createElement(FS.Provider,{value:t},e)}function Wj(){let{matches:t}=C.useContext(is),e=t[t.length-1];return e?e.params:{}}function Sm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext($s),{matches:i}=C.useContext(is),{pathname:o}=hr(),l=JSON.stringify(Dy(i,r.v7_relativeSplatPath));return C.useMemo(()=>My(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function $S(t,e){return HS(t,e)}function HS(t,e,n,r){kl()||mt(!1);let{navigator:i}=C.useContext($s),{matches:o}=C.useContext(is),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let m=l?l.pathnameBase:"/";l&&l.route;let f=hr(),g;if(e){var x;let M=typeof e=="string"?Ga(e):e;m==="/"||(x=M.pathname)!=null&&x.startsWith(m)||mt(!1),g=M}else g=f;let v=g.pathname||"/",P=v;if(m!=="/"){let M=m.replace(/^\//,"").split("/");P="/"+v.replace(/^\//,"").split("/").slice(M.length).join("/")}let E=yS(t,{pathname:P}),S=QS(E&&E.map(M=>Object.assign({},M,{params:Object.assign({},h,M.params),pathname:Ci([m,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?m:Ci([m,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),o,n,r);return e&&S?C.createElement(Em.Provider,{value:{location:ru({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:wi.Pop}},S):S}function qS(){let t=eP(),e=OS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,null)}const ZS=C.createElement(qS,null);class KS extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(is.Provider,{value:this.props.routeContext},C.createElement(Bj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GS(t){let{routeContext:e,match:n,children:r}=t,i=C.useContext(Tm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(is.Provider,{value:e},r)}function QS(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(i=n)==null?void 0:i.errors;if(h!=null){let g=l.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);g>=0||mt(!1),l=l.slice(0,Math.min(l.length,g+1))}let m=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let x=l[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=g),x.route.id){let{loaderData:v,errors:P}=n,E=x.route.loader&&v[x.route.id]===void 0&&(!P||P[x.route.id]===void 0);if(x.route.lazy||E){m=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((g,x,v)=>{let P,E=!1,S=null,M=null;n&&(P=h&&x.route.id?h[x.route.id]:void 0,S=x.route.errorElement||ZS,m&&(f<0&&v===0?(nP("route-fallback"),E=!0,M=null):f===v&&(E=!0,M=x.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,v+1)),T=()=>{let I;return P?I=S:E?I=M:x.route.Component?I=C.createElement(x.route.Component,null):x.route.element?I=x.route.element:I=g,C.createElement(GS,{match:x,routeContext:{outlet:g,matches:j,isDataRoute:n!=null},children:I})};return n&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?C.createElement(KS,{location:n.location,revalidation:n.revalidation,component:S,error:P,children:T(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):T()},null)}var $j=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($j||{}),Hj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Hj||{});function YS(t){let e=C.useContext(Tm);return e||mt(!1),e}function JS(t){let e=C.useContext(Uj);return e||mt(!1),e}function XS(t){let e=C.useContext(is);return e||mt(!1),e}function qj(t){let e=XS(),n=e.matches[e.matches.length-1];return n.route.id||mt(!1),n.route.id}function eP(){var t;let e=C.useContext(Bj),n=JS(),r=qj();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tP(){let{router:t}=YS($j.UseNavigateStable),e=qj(Hj.UseNavigateStable),n=C.useRef(!1);return Fj(()=>{n.current=!0}),C.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ru({fromRouteId:e},o)))},[t,e])}const zw={};function nP(t,e,n){zw[t]||(zw[t]=!0)}function rP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rg(t){let{to:e,replace:n,state:r,relative:i}=t;kl()||mt(!1);let{future:o,static:l}=C.useContext($s),{matches:h}=C.useContext(is),{pathname:m}=hr(),f=Pr(),g=My(e,Dy(h,o.v7_relativeSplatPath),m,i==="path"),x=JSON.stringify(g);return C.useEffect(()=>f(JSON.parse(x),{replace:n,state:r,relative:i}),[f,x,i,n,r]),null}function Zj(t){return WS(t.context)}function Ue(t){mt(!1)}function sP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=wi.Pop,navigator:o,static:l=!1,future:h}=t;kl()&&mt(!1);let m=e.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:m,navigator:o,static:l,future:ru({v7_relativeSplatPath:!1},h)}),[m,h,o,l]);typeof r=="string"&&(r=Ga(r));let{pathname:g="/",search:x="",hash:v="",state:P=null,key:E="default"}=r,S=C.useMemo(()=>{let M=hl(g,m);return M==null?null:{location:{pathname:M,search:x,hash:v,state:P,key:E},navigationType:i}},[m,g,x,v,P,E,i]);return S==null?null:C.createElement($s.Provider,{value:f},C.createElement(Em.Provider,{children:n,value:S}))}function Kj(t){let{children:e,location:n}=t;return $S(sg(e),n)}new Promise(()=>{});function sg(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,i)=>{if(!C.isValidElement(r))return;let o=[...e,i];if(r.type===C.Fragment){n.push.apply(n,sg(r.props.children,o));return}r.type!==Ue&&mt(!1),!r.props.index||!r.props.children||mt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=sg(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dh.apply(this,arguments)}function Gj(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function iP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aP(t,e){return t.button===0&&(!e||e==="_self")&&!iP(t)}function ig(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function oP(t,e){let n=ig(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const lP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],uP="6";try{window.__reactRouterVersion=uP}catch{}const dP=C.createContext({isTransitioning:!1}),hP="startTransition",Iw=nT[hP];function mP(t){let{basename:e,children:n,future:r,window:i}=t,o=C.useRef();o.current==null&&(o.current=fS({window:i,v5Compat:!0}));let l=o.current,[h,m]=C.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},g=C.useCallback(x=>{f&&Iw?Iw(()=>m(x)):m(x)},[m,f]);return C.useLayoutEffect(()=>l.listen(g),[l,g]),C.useEffect(()=>rP(r),[r]),C.createElement(sP,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}const fP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,be=C.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:h,target:m,to:f,preventScrollReset:g,viewTransition:x}=e,v=Gj(e,lP),{basename:P}=C.useContext($s),E,S=!1;if(typeof f=="string"&&pP.test(f)&&(E=f,fP))try{let I=new URL(window.location.href),W=f.startsWith("//")?new URL(I.protocol+f):new URL(f),D=hl(W.pathname,P);W.origin===I.origin&&D!=null?f=D+W.search+W.hash:S=!0}catch{}let M=US(f,{relative:i}),j=yP(f,{replace:l,state:h,target:m,preventScrollReset:g,relative:i,viewTransition:x});function T(I){r&&r(I),I.defaultPrevented||j(I)}return C.createElement("a",Dh({},v,{href:E||M,onClick:S||o?r:T,ref:n,target:m}))}),Aw=C.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:l=!1,style:h,to:m,viewTransition:f,children:g}=e,x=Gj(e,cP),v=Sm(m,{relative:x.relative}),P=hr(),E=C.useContext(Uj),{navigator:S,basename:M}=C.useContext($s),j=E!=null&&xP(v)&&f===!0,T=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,I=P.pathname,W=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(I=I.toLowerCase(),W=W?W.toLowerCase():null,T=T.toLowerCase()),W&&M&&(W=hl(W,M)||W);const D=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let O=I===T||!l&&I.startsWith(T)&&I.charAt(D)==="/",N=W!=null&&(W===T||!l&&W.startsWith(T)&&W.charAt(T.length)==="/"),b={isActive:O,isPending:N,isTransitioning:j},R=O?r:void 0,U;typeof o=="function"?U=o(b):U=[o,O?"active":null,N?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let B=typeof h=="function"?h(b):h;return C.createElement(be,Dh({},x,{"aria-current":R,className:U,ref:n,style:B,to:m,viewTransition:f}),typeof g=="function"?g(b):g)});var ag;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ag||(ag={}));var Rw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Rw||(Rw={}));function gP(t){let e=C.useContext(Tm);return e||mt(!1),e}function yP(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:h}=e===void 0?{}:e,m=Pr(),f=hr(),g=Sm(t,{relative:l});return C.useCallback(x=>{if(aP(x,n)){x.preventDefault();let v=r!==void 0?r:Lh(f)===Lh(g);m(t,{replace:v,state:i,preventScrollReset:o,relative:l,viewTransition:h})}},[f,m,g,r,i,n,t,o,l,h])}function Qj(t){let e=C.useRef(ig(t)),n=C.useRef(!1),r=hr(),i=C.useMemo(()=>oP(r.search,n.current?null:e.current),[r.search]),o=Pr(),l=C.useCallback((h,m)=>{const f=ig(typeof h=="function"?h(i):h);n.current=!0,o("?"+f,m)},[o,i]);return[i,l]}function xP(t,e){e===void 0&&(e={});let n=C.useContext(dP);n==null&&mt(!1);let{basename:r}=gP(ag.useViewTransitionState),i=Sm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=hl(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=hl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ng(i.pathname,l)!=null||ng(i.pathname,o)!=null}const wP=()=>{};var Lw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],l=t[n++],h=t[n++],m=((i&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Jj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],l=i+1<t.length,h=l?t[i+1]:0,m=i+2<t.length,f=m?t[i+2]:0,g=o>>2,x=(o&3)<<4|h>>4;let v=(h&15)<<2|f>>6,P=f&63;m||(P=64,l||(v=64)),r.push(n[g],n[x],n[v],n[P])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const x=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||h==null||f==null||x==null)throw new _P;const v=o<<2|h>>4;if(r.push(v),f!==64){const P=h<<4&240|f>>2;if(r.push(P),x!==64){const E=f<<6&192|x;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _P extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bP=function(t){const e=Yj(t);return Jj.encodeByteArray(e,!0)},Mh=function(t){return bP(t).replace(/\./g,"")},Xj=function(t){try{return Jj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=()=>jP().__FIREBASE_DEFAULTS__,kP=()=>{if(typeof process>"u"||typeof Lw>"u")return;const t=Lw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Xj(t[1]);return e&&JSON.parse(e)},Pm=()=>{try{return wP()||NP()||kP()||TP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eN=t=>{var e,n;return(n=(e=Pm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tN=t=>{const e=eN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nN=()=>{var t;return(t=Pm())==null?void 0:t.config},rN=t=>{var e;return(e=Pm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Oy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Mh(JSON.stringify(n)),Mh(JSON.stringify(l)),""].join(".")}const zc={};function SP(){const t={prod:[],emulator:[]};for(const e of Object.keys(zc))zc[e]?t.emulator.push(e):t.prod.push(e);return t}function PP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dw=!1;function Vy(t,e){if(typeof window>"u"||typeof document>"u"||!Ji(window.location.host)||zc[t]===e||zc[t]||Dw)return;zc[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=SP().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function h(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function m(v,P){v.setAttribute("width","24"),v.setAttribute("id",P),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Dw=!0,l()},v}function g(v,P){v.setAttribute("id",P),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function x(){const v=PP(r),P=n("text"),E=document.getElementById(P)||document.createElement("span"),S=n("learnmore"),M=document.getElementById(S)||document.createElement("a"),j=n("preprendIcon"),T=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const I=v.element;h(I),g(M,S);const W=f();m(T,j),I.append(T,E,M,W),document.body.appendChild(I)}o?(E.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function zP(){var e;const t=(e=Pm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LP(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DP(){return!zP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MP(){try{return typeof indexedDB=="object"}catch{return!1}}function OP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="FirebaseError";class as extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VP,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?UP(o,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new as(i,h,r)}}function UP(t,e){return t.replace(BP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const BP=/\{\$([^}]+)}/g;function FP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Va(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],l=e[i];if(Mw(o)&&Mw(l)){if(!Va(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Mw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function yc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function WP(t,e){const n=new $P(t,e);return n.subscribe.bind(n)}class $P{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qf),i.error===void 0&&(i.error=qf),i.complete===void 0&&(i.complete=qf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class Mi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KP(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZP(t){return t===_a?void 0:t}function KP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const QP={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},YP=De.INFO,JP={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},XP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=JP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uy{constructor(e){this.name=e,this._logLevel=YP,this._logHandler=XP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const eC=(t,e)=>e.some(n=>t instanceof n);let Ow,Vw;function tC(){return Ow||(Ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nC(){return Vw||(Vw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iN=new WeakMap,og=new WeakMap,aN=new WeakMap,Zf=new WeakMap,By=new WeakMap;function rC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(zi(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&iN.set(n,t)}).catch(()=>{}),By.set(e,t),e}function sC(t){if(og.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});og.set(t,e)}let lg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return og.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iC(t){lg=t(lg)}function aC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kf(this),e,...n);return aN.set(r,e.sort?e.sort():[e]),zi(r)}:nC().includes(t)?function(...e){return t.apply(Kf(this),e),zi(iN.get(this))}:function(...e){return zi(t.apply(Kf(this),e))}}function oC(t){return typeof t=="function"?aC(t):(t instanceof IDBTransaction&&sC(t),eC(t,tC())?new Proxy(t,lg):t)}function zi(t){if(t instanceof IDBRequest)return rC(t);if(Zf.has(t))return Zf.get(t);const e=oC(t);return e!==t&&(Zf.set(t,e),By.set(e,t)),e}const Kf=t=>By.get(t);function lC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(t,e),h=zi(l);return r&&l.addEventListener("upgradeneeded",m=>{r(zi(l.result),m.oldVersion,m.newVersion,zi(l.transaction),m)}),n&&l.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),i&&m.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const cC=["get","getKey","getAll","getAllKeys","count"],uC=["put","add","delete","clear"],Gf=new Map;function Uw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gf.get(e))return Gf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cC.includes(n)))return;const o=async function(l,...h){const m=this.transaction(l,i?"readwrite":"readonly");let f=m.store;return r&&(f=f.index(h.shift())),(await Promise.all([f[n](...h),i&&m.done]))[0]};return Gf.set(e,o),o}iC(t=>({...t,get:(e,n,r)=>Uw(e,n)||t.get(e,n,r),has:(e,n)=>!!Uw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cg="@firebase/app",Bw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Uy("@firebase/app"),mC="@firebase/app-compat",fC="@firebase/analytics-compat",pC="@firebase/analytics",gC="@firebase/app-check-compat",yC="@firebase/app-check",xC="@firebase/auth",wC="@firebase/auth-compat",vC="@firebase/database",_C="@firebase/data-connect",bC="@firebase/database-compat",jC="@firebase/functions",NC="@firebase/functions-compat",kC="@firebase/installations",TC="@firebase/installations-compat",EC="@firebase/messaging",SC="@firebase/messaging-compat",PC="@firebase/performance",CC="@firebase/performance-compat",zC="@firebase/remote-config",IC="@firebase/remote-config-compat",AC="@firebase/storage",RC="@firebase/storage-compat",LC="@firebase/firestore",DC="@firebase/ai",MC="@firebase/firestore-compat",OC="firebase",VC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="[DEFAULT]",UC={[cg]:"fire-core",[mC]:"fire-core-compat",[pC]:"fire-analytics",[fC]:"fire-analytics-compat",[yC]:"fire-app-check",[gC]:"fire-app-check-compat",[xC]:"fire-auth",[wC]:"fire-auth-compat",[vC]:"fire-rtdb",[_C]:"fire-data-connect",[bC]:"fire-rtdb-compat",[jC]:"fire-fn",[NC]:"fire-fn-compat",[kC]:"fire-iid",[TC]:"fire-iid-compat",[EC]:"fire-fcm",[SC]:"fire-fcm-compat",[PC]:"fire-perf",[CC]:"fire-perf-compat",[zC]:"fire-rc",[IC]:"fire-rc-compat",[AC]:"fire-gcs",[RC]:"fire-gcs-compat",[LC]:"fire-fst",[MC]:"fire-fst-compat",[DC]:"fire-vertex","fire-js":"fire-js",[OC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Map,BC=new Map,dg=new Map;function Fw(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ua(t){const e=t.name;if(dg.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;dg.set(e,t);for(const n of Oh.values())Fw(n,t);for(const n of BC.values())Fw(n,t);return!0}function Cm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new ju("app","Firebase",FC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=VC;function oN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ug,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ii.create("bad-app-name",{appName:String(i)});if(n||(n=nN()),!n)throw Ii.create("no-options");const o=Oh.get(i);if(o){if(Va(n,o.options)&&Va(r,o.config))return o;throw Ii.create("duplicate-app",{appName:i})}const l=new GP(i);for(const m of dg.values())l.addComponent(m);const h=new WC(n,r,l);return Oh.set(i,h),h}function Fy(t=ug){const e=Oh.get(t);if(!e&&t===ug&&nN())return oN();if(!e)throw Ii.create("no-app",{appName:t});return e}function Kr(t,e,n){let r=UC[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(l.join(" "));return}Ua(new Mi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="firebase-heartbeat-database",HC=1,su="firebase-heartbeat-store";let Qf=null;function lN(){return Qf||(Qf=lC($C,HC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(su)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),Qf}async function qC(t){try{const n=(await lN()).transaction(su),r=await n.objectStore(su).get(cN(t));return await n.done,r}catch(e){if(e instanceof as)Ds.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function Ww(t,e){try{const r=(await lN()).transaction(su,"readwrite");await r.objectStore(su).put(e,cN(t)),await r.done}catch(n){if(n instanceof as)Ds.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(r.message)}}}function cN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1024,KC=30;class GC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$w();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>KC){const l=JC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$w(),{heartbeatsToSend:r,unsentEntries:i}=QC(this._heartbeatsCache.heartbeats),o=Mh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ds.warn(n),""}}}function $w(){return new Date().toISOString().substring(0,10)}function QC(t,e=ZC){const n=[];let r=t.slice();for(const i of t){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Hw(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MP()?OP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ww(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ww(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Hw(t){return Mh(JSON.stringify({version:2,heartbeats:t})).length}function JC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){Ua(new Mi("platform-logger",e=>new dC(e),"PRIVATE")),Ua(new Mi("heartbeat",e=>new GC(e),"PRIVATE")),Kr(cg,Bw,t),Kr(cg,Bw,"esm2020"),Kr("fire-js","")}XC("");function uN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ez=uN,dN=new ju("auth","Firebase",uN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Uy("@firebase/auth");function tz(t,...e){Vh.logLevel<=De.WARN&&Vh.warn(`Auth (${Qa}): ${t}`,...e)}function th(t,...e){Vh.logLevel<=De.ERROR&&Vh.error(`Auth (${Qa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,...e){throw Wy(t,...e)}function Gr(t,...e){return Wy(t,...e)}function hN(t,e,n){const r={...ez(),[e]:n};return new ju("auth","Firebase",r).create(e,{appName:t.name})}function Cs(t){return hN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dN.create(t,...e)}function Te(t,e,...n){if(!t)throw Wy(e,...n)}function Ts(t){const e="INTERNAL ASSERTION FAILED: "+t;throw th(e),new Error(e)}function Ms(t,e){t||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function nz(){return qw()==="http:"||qw()==="https:"}function qw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nz()||AP()||"connection"in navigator)?navigator.onLine:!0}function sz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ms(n>e,"Short delay should be less than long delay!"),this.isMobile=CP()||RP()}get(){return rz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e){Ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oz=new ku(3e4,6e4);function Xi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function os(t,e,n,r,i={}){return fN(t,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const h=Nu({key:t.config.apiKey,...l}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:m,...o};return IP()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Ji(t.emulatorConfig.host)&&(f.credentials="include"),mN.fetch()(await pN(t,t.config.apiHost,n,h),f)})}async function fN(t,e,n){t._canInitEmulator=!1;const r={...iz,...e};try{const i=new cz(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Ad(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[m,f]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ad(t,"credential-already-in-use",l);if(m==="EMAIL_EXISTS")throw Ad(t,"email-already-in-use",l);if(m==="USER_DISABLED")throw Ad(t,"user-disabled",l);const g=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw hN(t,g,f);Er(t,g)}}catch(i){if(i instanceof as)throw i;Er(t,"network-request-failed",{message:String(i)})}}async function Tu(t,e,n,r,i={}){const o=await os(t,e,n,r,i);return"mfaPendingCredential"in o&&Er(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function pN(t,e,n,r){const i=`${e}${n}?${r}`,o=t,l=o.config.emulator?$y(t.config,i):`${t.config.apiScheme}://${i}`;return az.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function lz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gr(this.auth,"network-request-failed")),oz.get())})}}function Ad(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gr(t,e,r);return i.customData._tokenResponse=n,i}function Zw(t){return t!==void 0&&t.enterprise!==void 0}class uz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dz(t,e){return os(t,"GET","/v2/recaptchaConfig",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hz(t,e){return os(t,"POST","/v1/accounts:delete",e)}async function Uh(t,e){return os(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mz(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),i=Hy(r);Te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ic(Yf(i.auth_time)),issuedAtTime:Ic(Yf(i.iat)),expirationTime:Ic(Yf(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Yf(t){return Number(t)*1e3}function Hy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const i=Xj(n);return i?JSON.parse(i):(th("Failed to decode base64 JWT payload"),null)}catch(i){return th("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Kw(t){const e=Hy(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof as&&fz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t){var x;const e=t.auth,n=await t.getIdToken(),r=await Ba(t,Uh(e,{idToken:n}));Te(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(x=i.providerUserInfo)!=null&&x.length?gN(i.providerUserInfo):[],l=yz(t.providerData,o),h=t.isAnonymous,m=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=h?m:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new mg(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function gz(t){const e=Ye(t);await Bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yz(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function gN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xz(t,e){const n=await fN(t,{},async()=>{const r=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,l=await pN(t,i,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return t.emulatorConfig&&Ji(t.emulatorConfig.host)&&(m.credentials="include"),mN.fetch()(l,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wz(t,e){return os(t,"POST","/v2/accounts:revokeToken",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=Kw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await xz(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,l=new Xo;return r&&(Te(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Te(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Te(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class br{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new pz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ba(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mz(this,e)}reload(){return gz(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(Cs(this.auth));const e=await this.getIdToken();return await Ba(this,hz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,m=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:x,emailVerified:v,isAnonymous:P,providerData:E,stsTokenManager:S}=n;Te(x&&S,e,"internal-error");const M=Xo.fromJSON(this.name,S);Te(typeof x=="string",e,"internal-error"),ii(r,e.name),ii(i,e.name),Te(typeof v=="boolean",e,"internal-error"),Te(typeof P=="boolean",e,"internal-error"),ii(o,e.name),ii(l,e.name),ii(h,e.name),ii(m,e.name),ii(f,e.name),ii(g,e.name);const j=new br({uid:x,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:P,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:M,createdAt:f,lastLoginAt:g});return E&&Array.isArray(E)&&(j.providerData=E.map(T=>({...T}))),m&&(j._redirectEventId=m),j}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xo;i.updateFromServerResponse(n);const o=new br({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bh(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Te(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?gN(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),h=new Xo;h.updateFromIdToken(r);const m=new br({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new mg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,f),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map;function Es(t){Ms(t instanceof Function,"Expected a class definition");let e=Gw.get(t);return e?(Ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yN.type="NONE";const Qw=yN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t,e,n){return`firebase:${t}:${e}:${n}`}class el{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=nh(this.userKey,i.apiKey,o),this.fullPersistenceKey=nh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uh(this.auth,{idToken:e}).catch(()=>{});return n?br._fromGetAccountInfoResponse(this.auth,n,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new el(Es(Qw),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Es(Qw);const l=nh(r,e.config.apiKey,e.name);let h=null;for(const f of n)try{const g=await f._get(l);if(g){let x;if(typeof g=="string"){const v=await Uh(e,{idToken:g}).catch(()=>{});if(!v)break;x=await br._fromGetAccountInfoResponse(e,v,g)}else x=br._fromJSON(e,g);f!==o&&(h=x),o=f;break}}catch{}const m=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new el(o,e,r):(o=m[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new el(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_N(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jN(e))return"Blackberry";if(NN(e))return"Webos";if(wN(e))return"Safari";if((e.includes("chrome/")||vN(e))&&!e.includes("edge/"))return"Chrome";if(bN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xN(t=hn()){return/firefox\//i.test(t)}function wN(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vN(t=hn()){return/crios\//i.test(t)}function _N(t=hn()){return/iemobile/i.test(t)}function bN(t=hn()){return/android/i.test(t)}function jN(t=hn()){return/blackberry/i.test(t)}function NN(t=hn()){return/webos/i.test(t)}function qy(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vz(t=hn()){var e;return qy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function _z(){return LP()&&document.documentMode===10}function kN(t=hn()){return qy(t)||bN(t)||NN(t)||jN(t)||/windows phone/i.test(t)||_N(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t,e=[]){let n;switch(t){case"Browser":n=Yw(hn());break;case"Worker":n=`${Yw(hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,h)=>{try{const m=e(o);l(m)}catch(m){h(m)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jz(t,e={}){return os(t,"GET","/v2/passwordPolicy",Xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz=6;class kz{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Nz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jw(this),this.idTokenSubscription=new Jw(this),this.beforeStateQueue=new bz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Es(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await el.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uh(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Bn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===h)&&(m!=null&&m.user)&&(r=m.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(Cs(this));const n=e?Ye(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(Cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(Cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jz(this),n=new kz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ju("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Es(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await el.create(this,[Es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,i);return()=>{l=!0,m()}}else{const m=e.addObserver(n);return()=>{l=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&tz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ya(t){return Ye(t)}class Jw{constructor(e){this.auth=e,this.observer=null,this.addObserver=WP(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ez(t){zm=t}function EN(t){return zm.loadJS(t)}function Sz(){return zm.recaptchaEnterpriseScript}function Pz(){return zm.gapiScript}function Cz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zz{constructor(){this.enterprise=new Iz}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Iz{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Az="recaptcha-enterprise",SN="NO_RECAPTCHA";class Rz{constructor(e){this.type=Az,this.auth=Ya(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{dz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const f=new uz(m);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(m=>{h(m)})})}function i(o,l,h){const m=window.grecaptcha;Zw(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(SN)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zz().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(h=>{if(!n&&Zw(window.grecaptcha))i(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Sz();m.length!==0&&(m+=h),EN(m).then(()=>{i(h,o,l)}).catch(f=>{l(f)})}}).catch(h=>{l(h)})})}}async function Xw(t,e,n,r=!1,i=!1){const o=new Rz(t);let l;if(i)l=SN;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,f=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function fg(t,e,n,r,i){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Xw(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Xw(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(t,e){const n=Cm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Va(o,e??{}))return i;Er(i,"already-initialized")}return n.initialize({options:e})}function Dz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Mz(t,e,n){const r=Ya(t);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=PN(e),{host:l,port:h}=Oz(e),m=h===null?"":`:${h}`,f={url:`${o}//${l}${m}/`},g=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(Va(f,r.config.emulator)&&Va(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Ji(l)?(Oy(`${o}//${l}${m}`),Vy("Auth",!0)):Vz()}function PN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Oz(t){const e=PN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:ev(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:ev(l)}}}function ev(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Vz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,n){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function Uz(t,e){return os(t,"POST","/v1/accounts:update",e)}async function Bz(t,e){return os(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fz(t,e){return Tu(t,"POST","/v1/accounts:signInWithPassword",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wz(t,e){return Tu(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}async function $z(t,e){return Tu(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Zy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new iu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new iu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fg(e,n,"signInWithPassword",Fz);case"emailLink":return Wz(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fg(e,r,"signUpPassword",Bz);case"emailLink":return $z(e,{idToken:n,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t,e){return Tu(t,"POST","/v1/accounts:signInWithIdp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz="http://localhost";class Fa extends Zy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const l=new Fa(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return tl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,tl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,tl(e,n)}buildRequest(){const e={requestUri:Hz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zz(t){const e=gc(yc(t)).link,n=e?gc(yc(e)).deep_link_id:null,r=gc(yc(t)).deep_link_id;return(r?gc(yc(r)).link:null)||r||n||e||t}class Ky{constructor(e){const n=gc(yc(e)),r=n.apiKey??null,i=n.oobCode??null,o=qz(n.mode??null);Te(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Zz(e);try{return new Ky(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.providerId=ea.PROVIDER_ID}static credential(e,n){return iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ky.parseLink(n);return Te(r,"argument-error"),iu._fromEmailAndCode(e,r.code,r.tenantId)}}ea.PROVIDER_ID="password";ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends CN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Eu{constructor(){super("facebook.com")}static credential(e){return Fa._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fa._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return mi.credential(n,r)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Eu{constructor(){super("github.com")}static credential(e){return Fa._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com";fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Eu{constructor(){super("twitter.com")}static credential(e,n){return Fa._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pi.credential(n,r)}catch{return null}}}pi.TWITTER_SIGN_IN_METHOD="twitter.com";pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kz(t,e){return Tu(t,"POST","/v1/accounts:signUp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await br._fromIdTokenResponse(e,r,i),l=tv(r);return new Wa({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=tv(r);return new Wa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function tv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends as{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Fh(e,n,r,i)}}function zN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Fh._fromErrorAndOperation(t,o,e,r):o})}async function Gz(t,e,n=!1){const r=await Ba(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e,n=!1){const{auth:r}=t;if(Bn(r.app))return Promise.reject(Cs(r));const i="reauthenticate";try{const o=await Ba(t,zN(r,i,e,t),n);Te(o.idToken,r,"internal-error");const l=Hy(o.idToken);Te(l,r,"internal-error");const{sub:h}=l;return Te(t.uid===h,r,"user-mismatch"),Wa._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Er(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e,n=!1){if(Bn(t.app))return Promise.reject(Cs(t));const r="signIn",i=await zN(t,r,e),o=await Wa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function Qz(t,e){return AN(Ya(t),e)}async function RN(t,e){return IN(Ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(t){const e=Ya(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Yz(t,e,n){if(Bn(t.app))return Promise.reject(Cs(t));const r=Ya(t),l=await fg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kz).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&LN(t),m}),h=await Wa._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function Jz(t,e,n){return Bn(t.app)?Promise.reject(Cs(t)):Qz(Ye(t),ea.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xz(t,e){return os(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pg(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ye(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Ba(r,Xz(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const h=r.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function eI(t,e){return tI(Ye(t),null,e)}async function tI(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const l=await Ba(t,Uz(r,o));await t._updateTokensIfNecessary(l,!0)}function nI(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function rI(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function sI(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function iI(t){return Ye(t).signOut()}async function aI(t){return Ye(t).delete()}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=1e3,lI=10;class MN extends DN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,m)=>{this.notifyListeners(l,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);_z()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,lI):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}MN.type="LOCAL";const cI=MN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON extends DN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ON.type="SESSION";const VN=ON;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Im(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async f=>f(n.origin,o)),m=await uI(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((h,m)=>{const f=Gy("",20);i.port1.start();const g=setTimeout(()=>{m(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(x){const v=x;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(v.data.response);break;default:clearTimeout(g),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function hI(t){Qr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function mI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function pI(){return UN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="firebaseLocalStorageDb",gI=1,$h="firebaseLocalStorage",FN="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Am(t,e){return t.transaction([$h],e?"readwrite":"readonly").objectStore($h)}function yI(){const t=indexedDB.deleteDatabase(BN);return new Su(t).toPromise()}function gg(){const t=indexedDB.open(BN,gI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($h,{keyPath:FN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($h)?e(r):(r.close(),await yI(),e(await gg()))})})}async function nv(t,e,n){const r=Am(t,!0).put({[FN]:e,value:n});return new Su(r).toPromise()}async function xI(t,e){const n=Am(t,!1).get(e),r=await new Su(n).toPromise();return r===void 0?null:r.value}function rv(t,e){const n=Am(t,!0).delete(e);return new Su(n).toPromise()}const wI=800,vI=3;class WN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(pI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await mI(),!this.activeServiceWorker)return;this.sender=new dI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gg();return await nv(e,Wh,"1"),await rv(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Am(i,!1).getAll();return new Su(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WN.type="LOCAL";const _I=WN;new ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e){return e?Es(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends Zy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jI(t){return AN(t.auth,new Qy(t),t.bypassAuthState)}function NI(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),IN(n,new Qy(t),t.bypassAuthState)}async function kI(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),Gz(n,new Qy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jI;case"linkViaPopup":case"linkViaRedirect":return kI;case"reauthViaPopup":case"reauthViaRedirect":return NI;default:Er(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new ku(2e3,1e4);class qo extends $N{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=Gy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TI.get())};e()}}qo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="pendingRedirect",rh=new Map;class SI extends $N{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const r=await PI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PI(t,e){const n=II(e),r=zI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function CI(t,e){rh.set(t._key(),e)}function zI(t){return Es(t._redirectPersistence)}function II(t){return nh(EI,t.config.apiKey,t.name)}async function AI(t,e,n=!1){if(Bn(t.app))return Promise.reject(Cs(t));const r=Ya(t),i=bI(r,e),l=await new SI(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=10*60*1e3;class LI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HN(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RI&&this.cachedEventUids.clear(),this.cachedEventUids.has(sv(e))}saveEventToCache(e){this.cachedEventUids.add(sv(e)),this.lastProcessedEventTime=Date.now()}}function sv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(t,e={}){return os(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VI=/^https?/;async function UI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await MI(t);for(const n of e)try{if(BI(n))return}catch{}Er(t,"unauthorized-domain")}function BI(t){const e=hg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!VI.test(n))return!1;if(OI.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new ku(3e4,6e4);function iv(){const t=Qr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WI(t){return new Promise((e,n)=>{var i,o,l;function r(){iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iv(),n(Gr(t,"network-request-failed"))},timeout:FI.get()})}if((o=(i=Qr().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=Qr().gapi)!=null&&l.load)r();else{const h=Cz("iframefcb");return Qr()[h]=()=>{gapi.load?r():n(Gr(t,"network-request-failed"))},EN(`${Pz()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw sh=null,e})}let sh=null;function $I(t){return sh=sh||WI(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new ku(5e3,15e3),qI="__/auth/iframe",ZI="emulator/auth/iframe",KI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QI(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$y(e,ZI):`https://${t.config.authDomain}/${qI}`,r={apiKey:e.apiKey,appName:t.name,v:Qa},i=GI.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Nu(r).slice(1)}`}async function YI(t){const e=await $I(t),n=Qr().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:QI(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KI,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Gr(t,"network-request-failed"),h=Qr().setTimeout(()=>{o(l)},HI.get());function m(){Qr().clearTimeout(h),i(r)}r.ping(m).then(m,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XI=500,eA=600,tA="_blank",nA="http://localhost";class av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rA(t,e,n,r=XI,i=eA){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...JI,width:r.toString(),height:i.toString(),top:o,left:l},f=hn().toLowerCase();n&&(h=vN(f)?tA:n),xN(f)&&(e=e||nA,m.scrollbars="yes");const g=Object.entries(m).reduce((v,[P,E])=>`${v}${P}=${E},`,"");if(vz(f)&&h!=="_self")return sA(e||"",h),new av(null);const x=window.open(e||"",h,g);Te(x,t,"popup-blocked");try{x.focus()}catch{}return new av(x)}function sA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="__/auth/handler",aA="emulator/auth/handler",oA=encodeURIComponent("fac");async function ov(t,e,n,r,i,o){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qa,eventId:i};if(e instanceof CN){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",FP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,x]of Object.entries({}))l[g]=x}if(e instanceof Eu){const g=e.getScopes().filter(x=>x!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const m=await t._getAppCheckToken(),f=m?`#${oA}=${encodeURIComponent(m)}`:"";return`${lA(t)}?${Nu(h).slice(1)}${f}`}function lA({config:t}){return t.emulator?$y(t,aA):`https://${t.authDomain}/${iA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="webStorageSupport";class cA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VN,this._completeRedirectFn=AI,this._overrideRedirectResult=CI}async _openPopup(e,n,r,i){var l;Ms((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await ov(e,n,r,hg(),i);return rA(e,o,Gy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await ov(e,n,r,hg(),i);return hI(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ms(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await YI(e),r=new LI(e);return n.register("authEvent",i=>(Te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jf,{type:Jf},i=>{var l;const o=(l=i==null?void 0:i[0])==null?void 0:l[Jf];o!==void 0&&n(!!o),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kN()||wN()||qy()}}const uA=cA;var lv="@firebase/auth",cv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mA(t){Ua(new Mi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;Te(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TN(t)},f=new Tz(r,i,o,m);return Dz(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ua(new Mi("auth-internal",e=>{const n=Ya(e.getProvider("auth").getImmediate());return(r=>new dA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(lv,cv,hA(t)),Kr(lv,cv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=5*60,pA=rN("authIdTokenMaxAge")||fA;let uv=null;const gA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pA)return;const i=n==null?void 0:n.token;uv!==i&&(uv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yA(t=Fy()){const e=Cm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Lz(t,{popupRedirectResolver:uA,persistence:[_I,cI,VN]}),r=rN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=gA(o.toString());rI(n,l,()=>l(n.currentUser)),nI(n,h=>l(h))}}const i=eN("auth");return i&&Mz(n,`http://${i}`),n}function xA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Ez({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Gr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",xA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mA("Browser");var dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ai,qN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,b){function R(){}R.prototype=b.prototype,N.F=b.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(U,B,H){for(var A=Array(arguments.length-2),me=2;me<arguments.length;me++)A[me-2]=arguments[me];return b.prototype[B].apply(U,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,b,R){R||(R=0);const U=Array(16);if(typeof b=="string")for(var B=0;B<16;++B)U[B]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(B=0;B<16;++B)U[B]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=N.g[0],R=N.g[1],B=N.g[2];let H=N.g[3],A;A=b+(H^R&(B^H))+U[0]+3614090360&4294967295,b=R+(A<<7&4294967295|A>>>25),A=H+(B^b&(R^B))+U[1]+3905402710&4294967295,H=b+(A<<12&4294967295|A>>>20),A=B+(R^H&(b^R))+U[2]+606105819&4294967295,B=H+(A<<17&4294967295|A>>>15),A=R+(b^B&(H^b))+U[3]+3250441966&4294967295,R=B+(A<<22&4294967295|A>>>10),A=b+(H^R&(B^H))+U[4]+4118548399&4294967295,b=R+(A<<7&4294967295|A>>>25),A=H+(B^b&(R^B))+U[5]+1200080426&4294967295,H=b+(A<<12&4294967295|A>>>20),A=B+(R^H&(b^R))+U[6]+2821735955&4294967295,B=H+(A<<17&4294967295|A>>>15),A=R+(b^B&(H^b))+U[7]+4249261313&4294967295,R=B+(A<<22&4294967295|A>>>10),A=b+(H^R&(B^H))+U[8]+1770035416&4294967295,b=R+(A<<7&4294967295|A>>>25),A=H+(B^b&(R^B))+U[9]+2336552879&4294967295,H=b+(A<<12&4294967295|A>>>20),A=B+(R^H&(b^R))+U[10]+4294925233&4294967295,B=H+(A<<17&4294967295|A>>>15),A=R+(b^B&(H^b))+U[11]+2304563134&4294967295,R=B+(A<<22&4294967295|A>>>10),A=b+(H^R&(B^H))+U[12]+1804603682&4294967295,b=R+(A<<7&4294967295|A>>>25),A=H+(B^b&(R^B))+U[13]+4254626195&4294967295,H=b+(A<<12&4294967295|A>>>20),A=B+(R^H&(b^R))+U[14]+2792965006&4294967295,B=H+(A<<17&4294967295|A>>>15),A=R+(b^B&(H^b))+U[15]+1236535329&4294967295,R=B+(A<<22&4294967295|A>>>10),A=b+(B^H&(R^B))+U[1]+4129170786&4294967295,b=R+(A<<5&4294967295|A>>>27),A=H+(R^B&(b^R))+U[6]+3225465664&4294967295,H=b+(A<<9&4294967295|A>>>23),A=B+(b^R&(H^b))+U[11]+643717713&4294967295,B=H+(A<<14&4294967295|A>>>18),A=R+(H^b&(B^H))+U[0]+3921069994&4294967295,R=B+(A<<20&4294967295|A>>>12),A=b+(B^H&(R^B))+U[5]+3593408605&4294967295,b=R+(A<<5&4294967295|A>>>27),A=H+(R^B&(b^R))+U[10]+38016083&4294967295,H=b+(A<<9&4294967295|A>>>23),A=B+(b^R&(H^b))+U[15]+3634488961&4294967295,B=H+(A<<14&4294967295|A>>>18),A=R+(H^b&(B^H))+U[4]+3889429448&4294967295,R=B+(A<<20&4294967295|A>>>12),A=b+(B^H&(R^B))+U[9]+568446438&4294967295,b=R+(A<<5&4294967295|A>>>27),A=H+(R^B&(b^R))+U[14]+3275163606&4294967295,H=b+(A<<9&4294967295|A>>>23),A=B+(b^R&(H^b))+U[3]+4107603335&4294967295,B=H+(A<<14&4294967295|A>>>18),A=R+(H^b&(B^H))+U[8]+1163531501&4294967295,R=B+(A<<20&4294967295|A>>>12),A=b+(B^H&(R^B))+U[13]+2850285829&4294967295,b=R+(A<<5&4294967295|A>>>27),A=H+(R^B&(b^R))+U[2]+4243563512&4294967295,H=b+(A<<9&4294967295|A>>>23),A=B+(b^R&(H^b))+U[7]+1735328473&4294967295,B=H+(A<<14&4294967295|A>>>18),A=R+(H^b&(B^H))+U[12]+2368359562&4294967295,R=B+(A<<20&4294967295|A>>>12),A=b+(R^B^H)+U[5]+4294588738&4294967295,b=R+(A<<4&4294967295|A>>>28),A=H+(b^R^B)+U[8]+2272392833&4294967295,H=b+(A<<11&4294967295|A>>>21),A=B+(H^b^R)+U[11]+1839030562&4294967295,B=H+(A<<16&4294967295|A>>>16),A=R+(B^H^b)+U[14]+4259657740&4294967295,R=B+(A<<23&4294967295|A>>>9),A=b+(R^B^H)+U[1]+2763975236&4294967295,b=R+(A<<4&4294967295|A>>>28),A=H+(b^R^B)+U[4]+1272893353&4294967295,H=b+(A<<11&4294967295|A>>>21),A=B+(H^b^R)+U[7]+4139469664&4294967295,B=H+(A<<16&4294967295|A>>>16),A=R+(B^H^b)+U[10]+3200236656&4294967295,R=B+(A<<23&4294967295|A>>>9),A=b+(R^B^H)+U[13]+681279174&4294967295,b=R+(A<<4&4294967295|A>>>28),A=H+(b^R^B)+U[0]+3936430074&4294967295,H=b+(A<<11&4294967295|A>>>21),A=B+(H^b^R)+U[3]+3572445317&4294967295,B=H+(A<<16&4294967295|A>>>16),A=R+(B^H^b)+U[6]+76029189&4294967295,R=B+(A<<23&4294967295|A>>>9),A=b+(R^B^H)+U[9]+3654602809&4294967295,b=R+(A<<4&4294967295|A>>>28),A=H+(b^R^B)+U[12]+3873151461&4294967295,H=b+(A<<11&4294967295|A>>>21),A=B+(H^b^R)+U[15]+530742520&4294967295,B=H+(A<<16&4294967295|A>>>16),A=R+(B^H^b)+U[2]+3299628645&4294967295,R=B+(A<<23&4294967295|A>>>9),A=b+(B^(R|~H))+U[0]+4096336452&4294967295,b=R+(A<<6&4294967295|A>>>26),A=H+(R^(b|~B))+U[7]+1126891415&4294967295,H=b+(A<<10&4294967295|A>>>22),A=B+(b^(H|~R))+U[14]+2878612391&4294967295,B=H+(A<<15&4294967295|A>>>17),A=R+(H^(B|~b))+U[5]+4237533241&4294967295,R=B+(A<<21&4294967295|A>>>11),A=b+(B^(R|~H))+U[12]+1700485571&4294967295,b=R+(A<<6&4294967295|A>>>26),A=H+(R^(b|~B))+U[3]+2399980690&4294967295,H=b+(A<<10&4294967295|A>>>22),A=B+(b^(H|~R))+U[10]+4293915773&4294967295,B=H+(A<<15&4294967295|A>>>17),A=R+(H^(B|~b))+U[1]+2240044497&4294967295,R=B+(A<<21&4294967295|A>>>11),A=b+(B^(R|~H))+U[8]+1873313359&4294967295,b=R+(A<<6&4294967295|A>>>26),A=H+(R^(b|~B))+U[15]+4264355552&4294967295,H=b+(A<<10&4294967295|A>>>22),A=B+(b^(H|~R))+U[6]+2734768916&4294967295,B=H+(A<<15&4294967295|A>>>17),A=R+(H^(B|~b))+U[13]+1309151649&4294967295,R=B+(A<<21&4294967295|A>>>11),A=b+(B^(R|~H))+U[4]+4149444226&4294967295,b=R+(A<<6&4294967295|A>>>26),A=H+(R^(b|~B))+U[11]+3174756917&4294967295,H=b+(A<<10&4294967295|A>>>22),A=B+(b^(H|~R))+U[2]+718787259&4294967295,B=H+(A<<15&4294967295|A>>>17),A=R+(H^(B|~b))+U[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(B+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+B&4294967295,N.g[3]=N.g[3]+H&4294967295}r.prototype.v=function(N,b){b===void 0&&(b=N.length);const R=b-this.blockSize,U=this.C;let B=this.h,H=0;for(;H<b;){if(B==0)for(;H<=R;)i(this,N,H),H+=this.blockSize;if(typeof N=="string"){for(;H<b;)if(U[B++]=N.charCodeAt(H++),B==this.blockSize){i(this,U),B=0;break}}else for(;H<b;)if(U[B++]=N[H++],B==this.blockSize){i(this,U),B=0;break}}this.h=B,this.o+=b},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;b=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=b&255,b/=256;for(this.v(N),N=Array(16),b=0,R=0;R<4;++R)for(let U=0;U<32;U+=8)N[b++]=this.g[R]>>>U&255;return N};function o(N,b){var R=h;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=b(N)}function l(N,b){this.h=b;const R=[];let U=!0;for(let B=N.length-1;B>=0;B--){const H=N[B]|0;U&&H==b||(R[B]=H,U=!1)}this.g=R}var h={};function m(N){return-128<=N&&N<128?o(N,function(b){return new l([b|0],b<0?-1:0)}):new l([N|0],N<0?-1:0)}function f(N){if(isNaN(N)||!isFinite(N))return x;if(N<0)return M(f(-N));const b=[];let R=1;for(let U=0;N>=R;U++)b[U]=N/R|0,R*=4294967296;return new l(b,0)}function g(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return M(g(N.substring(1),b));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=f(Math.pow(b,8));let U=x;for(let H=0;H<N.length;H+=8){var B=Math.min(8,N.length-H);const A=parseInt(N.substring(H,H+B),b);B<8?(B=f(Math.pow(b,B)),U=U.j(B).add(f(A))):(U=U.j(R),U=U.add(f(A)))}return U}var x=m(0),v=m(1),P=m(16777216);t=l.prototype,t.m=function(){if(S(this))return-M(this).m();let N=0,b=1;for(let R=0;R<this.g.length;R++){const U=this.i(R);N+=(U>=0?U:4294967296+U)*b,b*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(E(this))return"0";if(S(this))return"-"+M(this).toString(N);const b=f(Math.pow(N,6));var R=this;let U="";for(;;){const B=W(R,b).g;R=j(R,B.j(b));let H=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=B,E(R))return H+U;for(;H.length<6;)H="0"+H;U=H+U}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function E(N){if(N.h!=0)return!1;for(let b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function S(N){return N.h==-1}t.l=function(N){return N=j(this,N),S(N)?-1:E(N)?0:1};function M(N){const b=N.g.length,R=[];for(let U=0;U<b;U++)R[U]=~N.g[U];return new l(R,~N.h).add(v)}t.abs=function(){return S(this)?M(this):this},t.add=function(N){const b=Math.max(this.g.length,N.g.length),R=[];let U=0;for(let B=0;B<=b;B++){let H=U+(this.i(B)&65535)+(N.i(B)&65535),A=(H>>>16)+(this.i(B)>>>16)+(N.i(B)>>>16);U=A>>>16,H&=65535,A&=65535,R[B]=A<<16|H}return new l(R,R[R.length-1]&-2147483648?-1:0)};function j(N,b){return N.add(M(b))}t.j=function(N){if(E(this)||E(N))return x;if(S(this))return S(N)?M(this).j(M(N)):M(M(this).j(N));if(S(N))return M(this.j(M(N)));if(this.l(P)<0&&N.l(P)<0)return f(this.m()*N.m());const b=this.g.length+N.g.length,R=[];for(var U=0;U<2*b;U++)R[U]=0;for(U=0;U<this.g.length;U++)for(let B=0;B<N.g.length;B++){const H=this.i(U)>>>16,A=this.i(U)&65535,me=N.i(B)>>>16,ue=N.i(B)&65535;R[2*U+2*B]+=A*ue,T(R,2*U+2*B),R[2*U+2*B+1]+=H*ue,T(R,2*U+2*B+1),R[2*U+2*B+1]+=A*me,T(R,2*U+2*B+1),R[2*U+2*B+2]+=H*me,T(R,2*U+2*B+2)}for(N=0;N<b;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=b;N<2*b;N++)R[N]=0;return new l(R,0)};function T(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function I(N,b){this.g=N,this.h=b}function W(N,b){if(E(b))throw Error("division by zero");if(E(N))return new I(x,x);if(S(N))return b=W(M(N),b),new I(M(b.g),M(b.h));if(S(b))return b=W(N,M(b)),new I(M(b.g),b.h);if(N.g.length>30){if(S(N)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var R=v,U=b;U.l(N)<=0;)R=D(R),U=D(U);var B=O(R,1),H=O(U,1);for(U=O(U,2),R=O(R,2);!E(U);){var A=H.add(U);A.l(N)<=0&&(B=B.add(R),H=A),U=O(U,1),R=O(R,1)}return b=j(N,B.j(b)),new I(B,b)}for(B=x;N.l(b)>=0;){for(R=Math.max(1,Math.floor(N.m()/b.m())),U=Math.ceil(Math.log(R)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),H=f(R),A=H.j(b);S(A)||A.l(N)>0;)R-=U,H=f(R),A=H.j(b);E(H)&&(H=v),B=B.add(H),N=j(N,A)}return new I(B,N)}t.B=function(N){return W(this,N).h},t.and=function(N){const b=Math.max(this.g.length,N.g.length),R=[];for(let U=0;U<b;U++)R[U]=this.i(U)&N.i(U);return new l(R,this.h&N.h)},t.or=function(N){const b=Math.max(this.g.length,N.g.length),R=[];for(let U=0;U<b;U++)R[U]=this.i(U)|N.i(U);return new l(R,this.h|N.h)},t.xor=function(N){const b=Math.max(this.g.length,N.g.length),R=[];for(let U=0;U<b;U++)R[U]=this.i(U)^N.i(U);return new l(R,this.h^N.h)};function D(N){const b=N.g.length+1,R=[];for(let U=0;U<b;U++)R[U]=N.i(U)<<1|N.i(U-1)>>>31;return new l(R,N.h)}function O(N,b){const R=b>>5;b%=32;const U=N.g.length-R,B=[];for(let H=0;H<U;H++)B[H]=b>0?N.i(H+R)>>>b|N.i(H+R+1)<<32-b:N.i(H+R);return new l(B,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qN=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,Ai=l}).apply(typeof dv<"u"?dv:typeof self<"u"?self:typeof window<"u"?window:{});var Rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZN,xc,KN,ih,yg,GN,QN,YN;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rd=="object"&&Rd];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(u,y){if(y)e:{var _=r;u=u.split(".");for(var V=0;V<u.length-1;V++){var q=u[V];if(!(q in _))break e;_=_[q]}u=u[u.length-1],V=_[u],y=y(V),y!=V&&y!=null&&e(_,u,{configurable:!0,writable:!0,value:y})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(y){var _=[],V;for(V in y)Object.prototype.hasOwnProperty.call(y,V)&&_.push([V,y[V]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function m(u,y,_){return u.call.apply(u.bind,arguments)}function f(u,y,_){return f=m,f.apply(null,arguments)}function g(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var V=_.slice();return V.push.apply(V,arguments),u.apply(this,V)}}function x(u,y){function _(){}_.prototype=y.prototype,u.Z=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(V,q,K){for(var oe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)oe[Pe-2]=arguments[Pe];return y.prototype[q].apply(V,oe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const y=u.length;if(y>0){const _=Array(y);for(let V=0;V<y;V++)_[V]=u[V];return _}return[]}function E(u,y){for(let V=1;V<arguments.length;V++){const q=arguments[V];var _=typeof q;if(_=_!="object"?_:q?Array.isArray(q)?"array":_:"null",_=="array"||_=="object"&&typeof q.length=="number"){_=u.length||0;const K=q.length||0;u.length=_+K;for(let oe=0;oe<K;oe++)u[_+oe]=q[oe]}else u.push(q)}}class S{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(u){l.setTimeout(()=>{throw u},0)}function j(){var u=N;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class T{constructor(){this.h=this.g=null}add(y,_){const V=I.get();V.set(y,_),this.h?this.h.next=V:this.g=V,this.h=V}}var I=new S(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let D,O=!1,N=new T,b=()=>{const u=Promise.resolve(void 0);D=()=>{u.then(R)}};function R(){for(var u;u=j();){try{u.h.call(u.g)}catch(_){M(_)}var y=I;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}O=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,y),l.removeEventListener("test",_,y)}catch{}return u}();function A(u){return/^[\s\xa0]*$/.test(u)}function me(u,y){B.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}x(me,B),me.prototype.init=function(u,y){const _=this.type=u.type,V=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(_=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),ce=0;function ne(u,y,_,V,q){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!V,this.ha=q,this.key=++ce,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Y(u,y,_){for(const V in u)y.call(_,u[V],V,u)}function z(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function G(u){const y={};for(const _ in u)y[_]=u[_];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(u,y){let _,V;for(let q=1;q<arguments.length;q++){V=arguments[q];for(_ in V)u[_]=V[_];for(let K=0;K<J.length;K++)_=J[K],Object.prototype.hasOwnProperty.call(V,_)&&(u[_]=V[_])}}function X(u){this.src=u,this.g={},this.h=0}X.prototype.add=function(u,y,_,V,q){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const oe=he(u,y,V,q);return oe>-1?(y=u[oe],_||(y.fa=!1)):(y=new ne(y,this.src,K,!!V,q),y.fa=_,u.push(y)),y};function se(u,y){const _=y.type;if(_ in u.g){var V=u.g[_],q=Array.prototype.indexOf.call(V,y,void 0),K;(K=q>=0)&&Array.prototype.splice.call(V,q,1),K&&(F(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function he(u,y,_,V){for(let q=0;q<u.length;++q){const K=u[q];if(!K.da&&K.listener==y&&K.capture==!!_&&K.ha==V)return q}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Ne={};function Je(u,y,_,V,q){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Je(u,y[K],_,V,q);return null}return _=sa(_),u&&u[ue]?u.J(y,_,h(V)?!!V.capture:!1,q):St(u,y,_,!1,V,q)}function St(u,y,_,V,q,K){if(!y)throw Error("Invalid event type");const oe=h(q)?!!q.capture:!!q;let Pe=bn(u);if(Pe||(u[Be]=Pe=new X(u)),_=Pe.add(y,_,V,oe,K),_.proxy)return _;if(V=ee(),_.proxy=V,V.src=u,V.listener=_,u.addEventListener)H||(q=oe),q===void 0&&(q=!1),u.addEventListener(y.toString(),V,q);else if(u.attachEvent)u.attachEvent(Re(y.toString()),V);else if(u.addListener&&u.removeListener)u.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ee(){function u(_){return y.call(u.src,u.listener,_)}const y=at;return u}function _e(u,y,_,V,q){if(Array.isArray(y))for(var K=0;K<y.length;K++)_e(u,y[K],_,V,q);else V=h(V)?!!V.capture:!!V,_=sa(_),u&&u[ue]?(u=u.i,K=String(y).toString(),K in u.g&&(y=u.g[K],_=he(y,_,V,q),_>-1&&(F(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete u.g[K],u.h--)))):u&&(u=bn(u))&&(y=u.g[y.toString()],u=-1,y&&(u=he(y,_,V,q)),(_=u>-1?y[u]:null)&&Fe(_))}function Fe(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[ue])se(y.i,u);else{var _=u.type,V=u.proxy;y.removeEventListener?y.removeEventListener(_,V,u.capture):y.detachEvent?y.detachEvent(Re(_),V):y.addListener&&y.removeListener&&y.removeListener(V),(_=bn(y))?(se(_,u),_.h==0&&(_.src=null,y[Be]=null)):F(u)}}}function Re(u){return u in Ne?Ne[u]:Ne[u]="on"+u}function at(u,y){if(u.da)u=!0;else{y=new me(y,this);const _=u.listener,V=u.ha||u.src;u.fa&&Fe(u),u=_.call(V,y)}return u}function bn(u){return u=u[Be],u instanceof X?u:null}var ls="__closure_events_fn_"+(Math.random()*1e9>>>0);function sa(u){return typeof u=="function"?u:(u[ls]||(u[ls]=function(y){return u.handleEvent(y)}),u[ls])}function Ut(){U.call(this),this.i=new X(this),this.M=this,this.G=null}x(Ut,U),Ut.prototype[ue]=!0,Ut.prototype.removeEventListener=function(u,y,_,V){_e(this,u,y,_,V)};function Bt(u,y){var _,V=u.G;if(V)for(_=[];V;V=V.G)_.push(V);if(u=u.M,V=y.type||y,typeof y=="string")y=new B(y,u);else if(y instanceof B)y.target=y.target||u;else{var q=y;y=new B(V,u),fe(y,q)}q=!0;let K,oe;if(_)for(oe=_.length-1;oe>=0;oe--)K=y.g=_[oe],q=Ks(K,V,!0,y)&&q;if(K=y.g=u,q=Ks(K,V,!0,y)&&q,q=Ks(K,V,!1,y)&&q,_)for(oe=0;oe<_.length;oe++)K=y.g=_[oe],q=Ks(K,V,!1,y)&&q}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const _=u.g[y];for(let V=0;V<_.length;V++)F(_[V]);delete u.g[y],u.h--}}this.G=null},Ut.prototype.J=function(u,y,_,V){return this.i.add(String(u),y,!1,_,V)},Ut.prototype.K=function(u,y,_,V){return this.i.add(String(u),y,!0,_,V)};function Ks(u,y,_,V){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let K=0;K<y.length;++K){const oe=y[K];if(oe&&!oe.da&&oe.capture==_){const Pe=oe.listener,Ze=oe.ha||oe.src;oe.fa&&se(u.i,oe),q=Pe.call(Ze,V)!==!1&&q}}return q&&!V.defaultPrevented}function Ou(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:l.setTimeout(u,y||0)}function zl(u){u.g=Ou(()=>{u.g=null,u.i&&(u.i=!1,zl(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class af extends U{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:zl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ia(u){U.call(this),this.h=u,this.g={}}x(ia,U);var eo=[];function Il(u){Y(u.g,function(y,_){this.g.hasOwnProperty(_)&&Fe(y)},u),u.g={}}ia.prototype.N=function(){ia.Z.N.call(this),Il(this)},ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var to=l.JSON.stringify,of=l.JSON.parse,Vu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Al(){}function Uu(){}var Gs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function aa(){B.call(this,"d")}x(aa,B);function no(){B.call(this,"c")}x(no,B);var cs={},Qs=null;function ro(){return Qs=Qs||new Ut}cs.Ia="serverreachability";function Bu(u){B.call(this,cs.Ia,u)}x(Bu,B);function Ys(u){const y=ro();Bt(y,new Bu(y))}cs.STAT_EVENT="statevent";function Rl(u,y){B.call(this,cs.STAT_EVENT,u),this.stat=y}x(Rl,B);function Ft(u){const y=ro();Bt(y,new Rl(y,u))}cs.Ja="timingevent";function Fu(u,y){B.call(this,cs.Ja,u),this.size=y}x(Fu,B);function oa(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},y)}function la(){this.g=!0}la.prototype.ua=function(){this.g=!1};function lf(u,y,_,V,q,K){u.info(function(){if(u.g)if(K){var oe="",Pe=K.split("&");for(let Ge=0;Ge<Pe.length;Ge++){var Ze=Pe[Ge].split("=");if(Ze.length>1){const bt=Ze[0];Ze=Ze[1];const er=bt.split("_");oe=er.length>=2&&er[1]=="type"?oe+(bt+"="+Ze+"&"):oe+(bt+"=redacted&")}}}else oe=null;else oe=K;return"XMLHTTP REQ ("+V+") [attempt "+q+"]: "+y+`
`+_+`
`+oe})}function cf(u,y,_,V,q,K,oe){u.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+q+"]: "+y+`
`+_+`
`+K+" "+oe})}function Js(u,y,_,V){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+uf(u,_)+(V?" "+V:"")})}function Ll(u,y){u.info(function(){return"TIMEOUT: "+y})}la.prototype.info=function(){};function uf(u,y){if(!u.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var _=K[u];if(!(_.length<2)){var V=_[1];if(Array.isArray(V)&&!(V.length<1)){var q=V[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<V.length;oe++)V[oe]=""}}}}return to(K)}catch{return y}}var so={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$u;function jn(){}x(jn,Al),jn.prototype.g=function(){return new XMLHttpRequest},$u=new jn;function ve(u){return encodeURIComponent(String(u))}function Hu(u){var y=1;u=u.split(":");const _=[];for(;y>0&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function mr(u,y,_,V){this.j=u,this.i=y,this.l=_,this.S=V||1,this.V=new ia(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Dl}function Dl(){this.i=null,this.g="",this.h=!1}var Ml={},ca={};function io(u,y,_){u.M=1,u.A=rt(fn(y)),u.u=_,u.R=!0,us(u,null)}function us(u,y){u.F=Date.now(),ao(u),u.B=fn(u.A);var _=u.B,V=u.S;Array.isArray(V)||(V=[String(V)]),ho(_.i,"t",V),u.C=0,_=u.j.L,u.h=new Dl,u.g=Yl(u.j,_?y:null,!u.u),u.P>0&&(u.O=new af(f(u.Y,u,u.g),u.P)),y=u.V,_=u.g,V=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(eo[0]=q.toString()),q=eo);for(let K=0;K<q.length;K++){const oe=Je(_,q[K],V||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=u.J?G(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Ys(),lf(u.i,u.v,u.B,u.l,u.S,u.u)}mr.prototype.ba=function(u){u=u.target;const y=this.O;y&&Ar(u)==3?y.j():this.Y(u)},mr.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=Ar(this.g),Ze=this.g.ya(),Ge=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||$l(this.g)))){this.K||Pe!=4||Ze==7||(Ze==8||Ge<=0?Ys(3):Ys(2)),oo(this);var y=this.g.ca();this.X=y;var _=qu(this);if(this.o=y==200,cf(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var V,q=this.g;if((V=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(V)){var K=V;break t}}K=null}if(u=K)Js(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ol(this,u);else{this.o=!1,this.m=3,Ft(12),Qn(this),ua(this);break e}}if(this.R){u=!0;let bt;for(;!this.K&&this.C<_.length;)if(bt=df(this,_),bt==ca){Pe==4&&(this.m=4,Ft(14),u=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Ml){this.m=4,Ft(15),Js(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Js(this.i,this.l,bt,null),Ol(this,bt);if(Zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||_.length!=0||this.h.h||(this.m=1,Ft(16),u=!1),this.o=this.o&&u,!u)Js(this.i,this.l,_,"[Invalid Chunked Response]"),Qn(this),ua(this);else if(_.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Gl(oe),oe.P=!0,Ft(11))}}else Js(this.i,this.l,_,null),Ol(this,_);Pe==4&&Qn(this),this.o&&!this.K&&(Pe==4?Vn(this.j,this):(this.o=!1,ao(this)))}else Hl(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),Qn(this),ua(this)}}}catch{}finally{}};function qu(u){if(!Zu(u))return u.g.la();const y=$l(u.g);if(y==="")return"";let _="";const V=y.length,q=Ar(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Qn(u),ua(u),"";u.h.i=new l.TextDecoder}for(let K=0;K<V;K++)u.h.h=!0,_+=u.h.i.decode(y[K],{stream:!(q&&K==V-1)});return y.length=0,u.h.g+=_,u.C=0,u.h.g}function Zu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function df(u,y){var _=u.C,V=y.indexOf(`
`,_);return V==-1?ca:(_=Number(y.substring(_,V)),isNaN(_)?Ml:(V+=1,V+_>y.length?ca:(y=y.slice(V,V+_),u.C=V+_,y)))}mr.prototype.cancel=function(){this.K=!0,Qn(this)};function ao(u){u.T=Date.now()+u.H,Ku(u,u.H)}function Ku(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=oa(f(u.aa,u),y)}function oo(u){u.D&&(l.clearTimeout(u.D),u.D=null)}mr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ll(this.i,this.B),this.M!=2&&(Ys(),Ft(17)),Qn(this),this.m=2,ua(this)):Ku(this,this.T-u)};function ua(u){u.j.I==0||u.K||Vn(u.j,u)}function Qn(u){oo(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Il(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function Ol(u,y){try{var _=u.j;if(_.I!=0&&(_.g==u||da(_.h,u))){if(!u.L&&da(_.h,u)&&_.I==3){try{var V=_.Ba.g.parse(y)}catch{V=null}if(Array.isArray(V)&&V.length==3){var q=V;if(q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)yo(_),po(_);else break e;Kl(_),Ft(18)}}else _.xa=q[1],0<_.xa-_.K&&q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=oa(f(_.Va,_),6e3));Yu(_.h)<=1&&_.ta&&(_.ta=void 0)}else Lr(_,11)}else if((u.L||_.g==u)&&yo(_),!A(y))for(q=_.Ba.g.parse(y),y=0;y<q.length;y++){let Ge=q[y];const bt=Ge[0];if(!(bt<=_.K))if(_.K=bt,Ge=Ge[1],_.I==2)if(Ge[0]=="c"){_.M=Ge[1],_.ba=Ge[2];const er=Ge[3];er!=null&&(_.ka=er,_.j.info("VER="+_.ka));const gr=Ge[4];gr!=null&&(_.za=gr,_.j.info("SVER="+_.za));const tr=Ge[5];tr!=null&&typeof tr=="number"&&tr>0&&(V=1.5*tr,_.O=V,_.j.info("backChannelRequestTimeoutMs_="+V)),V=_;const Dr=u.g;if(Dr){const vo=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var K=V.h;K.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ds(K,K.h),K.h=null))}if(V.G){const _o=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(V.wa=_o,ye(V.J,V.G,_o))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),V=_;var oe=u;if(V.na=Ql(V,V.L?V.ba:null,V.W),oe.L){Vl(V.h,oe);var Pe=oe,Ze=V.O;Ze&&(Pe.H=Ze),Pe.D&&(oo(Pe),ao(Pe)),V.g=oe}else Zl(V);_.i.length>0&&Rr(_)}else Ge[0]!="stop"&&Ge[0]!="close"||Lr(_,7);else _.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Lr(_,7):Ie(_):Ge[0]!="noop"&&_.l&&_.l.qa(Ge),_.A=0)}}Ys(4)}catch{}}var hf=class{constructor(u,y){this.g=u,this.map=y}};function Gu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Yu(u){return u.h?1:u.g?u.g.size:0}function da(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function ds(u,y){u.g?u.g.add(y):u.h=y}function Vl(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Gu.prototype.cancel=function(){if(this.i=Ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ul(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.G);return y}return P(u.i)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function We(u,y){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const V=u[_].indexOf("=");let q,K=null;V>=0?(q=u[_].substring(0,V),K=u[_].substring(V+1)):q=u[_],y(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function qe(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof qe?(this.l=u.l,Yn(this,u.j),this.o=u.o,this.g=u.g,Jn(this,u.u),this.h=u.h,ha(this,ma(u.i)),this.m=u.m):u&&(y=String(u).match(Xs))?(this.l=!1,Yn(this,y[1]||"",!0),this.o=hs(y[2]||""),this.g=hs(y[3]||"",!0),Jn(this,y[4]),this.h=hs(y[5]||"",!0),ha(this,y[6]||"",!0),this.m=hs(y[7]||"")):(this.l=!1,this.i=new fr(null,this.l))}qe.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(Cr(y,Ju,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Cr(y,Ju,!0),"@"),u.push(ve(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Cr(_,_.charAt(0)=="/"?ms:lo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Cr(_,fs)),u.join("")},qe.prototype.resolve=function(u){const y=fn(this);let _=!!u.j;_?Yn(y,u.j):_=!!u.o,_?y.o=u.o:_=!!u.g,_?y.g=u.g:_=u.u!=null;var V=u.h;if(_)Jn(y,u.u);else if(_=!!u.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var q=y.h.lastIndexOf("/");q!=-1&&(V=y.h.slice(0,q+1)+V)}if(q=V,q==".."||q==".")V="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){V=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let oe=0;oe<q.length;){const Pe=q[oe++];Pe=="."?V&&oe==q.length&&K.push(""):Pe==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),V&&oe==q.length&&K.push("")):(K.push(Pe),V=!0)}V=K.join("/")}else V=q}return _?y.h=V:_=u.i.toString()!=="",_?ha(y,ma(u.i)):_=!!u.m,_&&(y.m=u.m),y};function fn(u){return new qe(u)}function Yn(u,y,_){u.j=_?hs(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Jn(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function ha(u,y,_){y instanceof fr?(u.i=y,Bl(u.i,u.l)):(_||(y=Cr(y,gt)),u.i=new fr(y,u.l))}function ye(u,y,_){u.i.set(y,_)}function rt(u){return ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function hs(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Cr(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,Nn),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Nn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ju=/[#\/\?@]/g,lo=/[#\?:]/g,ms=/[#\?]/g,gt=/[#\?@]/g,fs=/#/g;function fr(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function On(u){u.g||(u.g=new Map,u.h=0,u.i&&We(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}t=fr.prototype,t.add=function(u,y){On(this),this.i=null,u=zr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function co(u,y){On(u),y=zr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function ei(u,y){return On(u),y=zr(u,y),u.g.has(y)}t.forEach=function(u,y){On(this),this.g.forEach(function(_,V){_.forEach(function(q){u.call(y,q,V,this)},this)},this)};function uo(u,y){On(u);let _=[];if(typeof y=="string")ei(u,y)&&(_=_.concat(u.g.get(zr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)_=_.concat(u[y]);return _}t.set=function(u,y){return On(this),this.i=null,u=zr(this,u),ei(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},t.get=function(u,y){return u?(u=uo(this,u),u.length>0?String(u[0]):y):y};function ho(u,y,_){co(u,y),_.length>0&&(u.i=null,u.g.set(zr(u,y),P(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let V=0;V<y.length;V++){var _=y[V];const q=ve(_);_=uo(this,_);for(let K=0;K<_.length;K++){let oe=q;_[K]!==""&&(oe+="="+ve(_[K])),u.push(oe)}}return this.i=u.join("&")};function ma(u){const y=new fr;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function zr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Bl(u,y){y&&!u.j&&(On(u),u.i=null,u.g.forEach(function(_,V){const q=V.toLowerCase();V!=q&&(co(this,V),ho(this,q,_))},u)),u.j=y}function mo(u,y){const _=new la;if(l.Image){const V=new Image;V.onload=g(Xn,_,"TestLoadImage: loaded",!0,y,V),V.onerror=g(Xn,_,"TestLoadImage: error",!1,y,V),V.onabort=g(Xn,_,"TestLoadImage: abort",!1,y,V),V.ontimeout=g(Xn,_,"TestLoadImage: timeout",!1,y,V),l.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=u}else y(!1)}function Xu(u,y){const _=new la,V=new AbortController,q=setTimeout(()=>{V.abort(),Xn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:V.signal}).then(K=>{clearTimeout(q),K.ok?Xn(_,"TestPingServer: ok",!0,y):Xn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Xn(_,"TestPingServer: error",!1,y)})}function Xn(u,y,_,V,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),V(_)}catch{}}function mf(){this.g=new Vu}function Se(u){this.i=u.Sb||null,this.h=u.ab||!1}x(Se,Al),Se.prototype.g=function(){return new pn(this.i,this.h)};function pn(u,y){Ut.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(pn,Ut),t=pn.prototype,t.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,ps(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||l).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xe(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xe(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?ti(this):ps(this),this.readyState==3&&Xe(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,ti(this))},t.Na=function(u){this.g&&(this.response=u,ti(this))},t.ga=function(){this.g&&ti(this)};function ti(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ps(u)}t.setRequestHeader=function(u,y){this.A.append(u,y)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function ps(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(pn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fo(u){let y="";return Y(u,function(_,V){y+=V,y+=":",y+=_,y+=`\r
`}),y}function fa(u,y,_){e:{for(V in _){var V=!1;break e}V=!0}V||(_=fo(_),typeof u=="string"?_!=null&&ve(_):ye(u,y,_))}function Ke(u){Ut.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Ke,Ut);var Fl=/^https?$/i,pa=["POST","PUT"];t=Ke.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,y,_,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$u.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(K){Pt(this,K);return}if(u=_||"",_=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var q in V)_.set(q,V[q]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const K of V.keys())_.set(K,V.get(K));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),q=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(pa,y,void 0)>=0)||V||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,oe]of _)this.g.setRequestHeader(K,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){Pt(this,K)}};function Pt(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,Ir(u),ga(u)}function Ir(u){u.A||(u.A=!0,Bt(u,"complete"),Bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Bt(this,"complete"),Bt(this,"abort"),ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ga(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Wl(this):this.Xa())},t.Xa=function(){Wl(this)};function Wl(u){if(u.h&&typeof o<"u"){if(u.v&&Ar(u)==4)setTimeout(u.Ca.bind(u),0);else if(Bt(u,"readystatechange"),Ar(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var V;if(V=K===0){let oe=String(u.D).match(Xs)[1]||null;!oe&&l.self&&l.self.location&&(oe=l.self.location.protocol.slice(0,-1)),V=!Fl.test(oe?oe.toLowerCase():"")}_=V}if(_)Bt(u,"complete"),Bt(u,"success");else{u.o=6;try{var q=Ar(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",Ir(u)}}finally{ga(u)}}}}function ga(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,y||Bt(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ar(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),of(y)}};function $l(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Hl(u){const y={};u=(u.g&&Ar(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<u.length;V++){if(A(u[V]))continue;var _=Hu(u[V]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=y[q]||[];y[q]=K,K.push(_)}z(y,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function ql(u){this.za=0,this.i=[],this.j=new la,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ya("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ya("baseRetryDelayMs",5e3,u),this.Za=ya("retryDelaySeedMs",1e4,u),this.Ta=ya("forwardChannelMaxRetries",2,u),this.va=ya("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Gu(u&&u.concurrentRequestLimit),this.Ba=new mf,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ql.prototype,t.ka=8,t.I=1,t.connect=function(u,y,_,V){Ft(0),this.W=u,this.H=y||{},_&&V!==void 0&&(this.H.OSID=_,this.H.OAID=V),this.F=this.X,this.J=Ql(this,null,this.W),Rr(this)};function Ie(u){if(kn(u),u.I==3){var y=u.V++,_=fn(u.J);if(ye(_,"SID",u.M),ye(_,"RID",y),ye(_,"TYPE","terminate"),gs(u,_),y=new mr(u,u.j,y),y.M=2,y.A=rt(fn(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=y.A,_=!0),_||(y.g=Yl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ao(y)}pr(u)}function po(u){u.g&&(Gl(u),u.g.cancel(),u.g=null)}function kn(u){po(u),u.v&&(l.clearTimeout(u.v),u.v=null),yo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function Rr(u){if(!Qu(u.h)&&!u.m){u.m=!0;var y=u.Ea;D||b(),O||(D(),O=!0),N.add(y,u),u.D=0}}function ed(u,y){return Yu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=oa(f(u.Ea,u,y),rd(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new mr(this,this.j,u);let K=this.o;if(this.U&&(K?(K=G(K),fe(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var V=this.i[_];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(y+=V,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=nd(this,q,y),_=fn(this.J),ye(_,"RID",u),ye(_,"CVER",22),this.G&&ye(_,"X-HTTP-Session-Id",this.G),gs(this,_),K&&(this.R?y="headers="+ve(fo(K))+"&"+y:this.u&&fa(_,this.u,K)),ds(this.h,q),this.Ra&&ye(_,"TYPE","init"),this.S?(ye(_,"$req",y),ye(_,"SID","null"),q.U=!0,io(q,_,null)):io(q,_,y),this.I=2}}else this.I==3&&(u?td(this,u):this.i.length==0||Qu(this.h)||td(this))};function td(u,y){var _;y?_=y.l:_=u.V++;const V=fn(u.J);ye(V,"SID",u.M),ye(V,"RID",_),ye(V,"AID",u.K),gs(u,V),u.u&&u.o&&fa(V,u.u,u.o),_=new mr(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),y&&(u.i=y.G.concat(u.i)),y=nd(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ds(u.h,_),io(_,V,y)}function gs(u,y){u.H&&Y(u.H,function(_,V){ye(y,V,_)}),u.l&&Y({},function(_,V){ye(y,V,_)})}function nd(u,y,_){_=Math.min(u.i.length,_);const V=u.l?f(u.l.Ka,u.l,u):null;e:{var q=u.i;let Pe=-1;for(;;){const Ze=["count="+_];Pe==-1?_>0?(Pe=q[0].g,Ze.push("ofs="+Pe)):Pe=0:Ze.push("ofs="+Pe);let Ge=!0;for(let bt=0;bt<_;bt++){var K=q[bt].g;const er=q[bt].map;if(K-=Pe,K<0)Pe=Math.max(0,q[bt].g-100),Ge=!1;else try{K="req"+K+"_"||"";try{var oe=er instanceof Map?er:Object.entries(er);for(const[gr,tr]of oe){let Dr=tr;h(tr)&&(Dr=to(tr)),Ze.push(K+gr+"="+encodeURIComponent(Dr))}}catch(gr){throw Ze.push(K+"type="+encodeURIComponent("_badmap")),gr}}catch{V&&V(er)}}if(Ge){oe=Ze.join("&");break e}}oe=void 0}return u=u.i.splice(0,_),y.G=u,oe}function Zl(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;D||b(),O||(D(),O=!0),N.add(y,u),u.A=0}}function Kl(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=oa(f(u.Da,u),rd(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,go(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=oa(f(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),po(this),go(this))};function Gl(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function go(u){u.g=new mr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=fn(u.na);ye(y,"RID","rpc"),ye(y,"SID",u.M),ye(y,"AID",u.K),ye(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&ye(y,"TO",u.ia),ye(y,"TYPE","xmlhttp"),gs(u,y),u.u&&u.o&&fa(y,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=rt(fn(y)),_.u=null,_.R=!0,us(_,u)}t.Va=function(){this.C!=null&&(this.C=null,po(this),Kl(this),Ft(19))};function yo(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function Vn(u,y){var _=null;if(u.g==y){yo(u),Gl(u),u.g=null;var V=2}else if(da(u.h,y))_=y.G,Vl(u.h,y),V=1;else return;if(u.I!=0){if(y.o)if(V==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var q=u.D;V=ro(),Bt(V,new Fu(V,_)),Rr(u)}else Zl(u);else if(q=y.m,q==3||q==0&&y.X>0||!(V==1&&ed(u,y)||V==2&&Kl(u)))switch(_&&_.length>0&&(y=u.h,y.i=y.i.concat(_)),q){case 1:Lr(u,5);break;case 4:Lr(u,10);break;case 3:Lr(u,6);break;default:Lr(u,2)}}}function rd(u,y){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*y}function Lr(u,y){if(u.j.info("Error code "+y),y==2){var _=f(u.bb,u),V=u.Ua;const q=!V;V=new qe(V||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Yn(V,"https"),rt(V),q?mo(V.toString(),_):Xu(V.toString(),_)}else Ft(2);u.I=0,u.l&&u.l.pa(y),pr(u),kn(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function pr(u){if(u.I=0,u.ja=[],u.l){const y=Ul(u.h);(y.length!=0||u.i.length!=0)&&(E(u.ja,y),E(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function Ql(u,y,_){var V=_ instanceof qe?fn(_):new qe(_);if(V.g!="")y&&(V.g=y+"."+V.g),Jn(V,V.u);else{var q=l.location;V=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const K=new qe(null);V&&Yn(K,V),y&&(K.g=y),q&&Jn(K,q),_&&(K.h=_),V=K}return _=u.G,y=u.wa,_&&y&&ye(V,_,y),ye(V,"VER",u.ka),gs(u,V),V}function Yl(u,y,_){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new Ke(new Se({ab:_})):new Ke(u.ma),y.Fa(u.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xo(){}t=xo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function wo(){}wo.prototype.g=function(u,y){return new nn(u,y)};function nn(u,y){Ut.call(this),this.g=new ql(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!A(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!A(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new ni(this)}x(nn,Ut),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ie(this.g)},nn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=to(u),u=_);y.i.push(new hf(y.Ya++,u)),y.I==3&&Rr(y)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ie(this.g),delete this.g,nn.Z.N.call(this)};function Jl(u){aa.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const _ in y){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}x(Jl,aa);function sd(){no.call(this),this.status=1}x(sd,no);function ni(u){this.g=u}x(ni,xo),ni.prototype.ra=function(){Bt(this.g,"a")},ni.prototype.qa=function(u){Bt(this.g,new Jl(u))},ni.prototype.pa=function(u){Bt(this.g,new sd)},ni.prototype.oa=function(){Bt(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,YN=function(){return new wo},QN=function(){return ro()},GN=cs,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},so.NO_ERROR=0,so.TIMEOUT=8,so.HTTP_ERROR=6,ih=so,Wu.COMPLETE="complete",KN=Wu,Uu.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,xc=Uu,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,ZN=Ke}).apply(typeof Rd<"u"?Rd:typeof self<"u"?self:typeof window<"u"?window:{});const hv="@firebase/firestore",mv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let on=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new Uy("@firebase/firestore");function Co(){return $a.logLevel}function ge(t,...e){if($a.logLevel<=De.DEBUG){const n=e.map(Yy);$a.debug(`Firestore (${Tl}): ${t}`,...n)}}function Os(t,...e){if($a.logLevel<=De.ERROR){const n=e.map(Yy);$a.error(`Firestore (${Tl}): ${t}`,...n)}}function ml(t,...e){if($a.logLevel<=De.WARN){const n=e.map(Yy);$a.warn(`Firestore (${Tl}): ${t}`,...n)}}function Yy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,JN(t,r,n)}function JN(t,e,n){let r=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Os(r),new Error(r)}function Qe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||JN(e,i,r)}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends as{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class vA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _A{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let o=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zs,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await i(this.currentUser)})},h=m=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zs)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new XN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class bA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new bA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=kA(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function xg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return Xf(i)===Xf(o)?Me(i,o):Xf(i)?1:-1}return Me(t.length,e.length)}const TA=55296,EA=57343;function Xf(t){const e=t.charCodeAt(0);return e>=TA&&e<=EA}function fl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="__name__";class Br{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Br.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Me(e.length,n.length)}static compareSegments(e,n){const r=Br.isNumericId(e),i=Br.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Br.extractNumericId(e).compare(Br.extractNumericId(n)):xg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ai.fromString(e.substring(4,e.length-2))}}class st extends Br{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new st(n)}static emptyPath(){return new st([])}}const SA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Br{construct(e,n,r){return new Yt(e,n,r)}static isValidIdentifier(e){return SA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pv}static keyField(){return new Yt([pv])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new de(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new de(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(o(),i++)}if(o(),l)throw new de(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(st.fromString(e))}static fromName(e){return new je(st.fromString(e).popFirst(5))}static empty(){return new je(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t,e,n){if(!n)throw new de(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function PA(t,e,n,r){if(e===!0&&r===!0)throw new de(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gv(t){if(!je.isDocumentKey(t))throw new de(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yv(t){if(je.isDocumentKey(t))throw new de(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function t1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Rm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee(12329,{type:typeof t})}function Ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rm(t);throw new de(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function CA(t,e){if(e<=0)throw new de(te.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Pu(t,e){if(!t1(t))throw new de(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new de(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=-62135596800,wv=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wv);return new lt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xv)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wv}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Lt("string",lt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new lt(0,0))}static max(){return new Ce(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=-1;function zA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new Oi(i,je.empty(),e)}function IA(t){return new Oi(t.readTime,t.key,au)}class Oi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Oi(Ce.min(),je.empty(),au)}static max(){return new Oi(Ce.max(),je.empty(),au)}}function AA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=je.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==RA)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,r)=>{n(e)})}static reject(e){return new re((n,r)=>{r(e)})}static waitFor(e){return new re((n,r)=>{let i=0,o=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++o,l&&o===i&&n()},m=>r(m))}),l=!0,o===i&&n()})}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next(i=>i?re.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new re((r,i)=>{const o=e.length,l=new Array(o);let h=0;for(let m=0;m<o;m++){const f=m;n(e[f]).next(g=>{l[f]=g,++h,h===o&&r(l)},g=>i(g))}})}static doWhile(e,n){return new re((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function DA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=-1;function Dm(t){return t==null}function Hh(t){return t===0&&1/t==-1/0}function MA(t){return typeof t=="number"&&Number.isInteger(t)&&!Hh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="";function OA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vv(e)),e=VA(t.get(n),e);return vv(e)}function VA(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case n1:n+="";break;default:n+=o}}return n}function vv(t){return t+n1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ld(this.root,e,this.comparator,!0)}}class Ld{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Qt.RED,this.left=i??Qt.EMPTY,this.right=o??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Qt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Qt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bv(this.data.getIterator())}getIteratorFrom(e){return new bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new Vt(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new s1("Invalid base64 string: "+o):o}}(e);return new tn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const UA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(t){if(Qe(!!t,39018),typeof t=="string"){let e=0;const n=UA.exec(t);if(Qe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ui(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="server_timestamp",a1="__type__",o1="__previous_value__",l1="__local_write_time__";function ex(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[a1])==null?void 0:r.stringValue)===i1}function Mm(t){const e=t.mapValue.fields[o1];return ex(e)?Mm(e):e}function ou(t){const e=Vi(t.mapValue.fields[l1].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,i,o,l,h,m,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=f,this.isUsingEmulator=g}}const qh="(default)";class lu{constructor(e,n){this.projectId=e,this.database=n||qh}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===qh}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="__type__",FA="__max__",Dd={mapValue:{}},u1="__vector__",Zh="value";function Bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ex(t)?4:$A(t)?9007199254740991:WA(t)?10:11:Ee(28295,{value:t})}function ss(t,e){if(t===e)return!0;const n=Bi(t);if(n!==Bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ou(t).isEqual(ou(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Vi(i.timestampValue),h=Vi(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ui(i.bytesValue).isEqual(Ui(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Nt(i.geoPointValue.latitude)===Nt(o.geoPointValue.latitude)&&Nt(i.geoPointValue.longitude)===Nt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Nt(i.integerValue)===Nt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Nt(i.doubleValue),h=Nt(o.doubleValue);return l===h?Hh(l)===Hh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return fl(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},h=o.mapValue.fields||{};if(_v(l)!==_v(h))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(h[m]===void 0||!ss(l[m],h[m])))return!1;return!0}(t,e);default:return Ee(52216,{left:t})}}function cu(t,e){return(t.values||[]).find(n=>ss(n,e))!==void 0}function pl(t,e){if(t===e)return 0;const n=Bi(t),r=Bi(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=Nt(o.integerValue||o.doubleValue),m=Nt(l.integerValue||l.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(t,e);case 3:return jv(t.timestampValue,e.timestampValue);case 4:return jv(ou(t),ou(e));case 5:return xg(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Ui(o),m=Ui(l);return h.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),m=l.split("/");for(let f=0;f<h.length&&f<m.length;f++){const g=Me(h[f],m[f]);if(g!==0)return g}return Me(h.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Me(Nt(o.latitude),Nt(l.latitude));return h!==0?h:Me(Nt(o.longitude),Nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Nv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var v,P,E,S;const h=o.fields||{},m=l.fields||{},f=(v=h[Zh])==null?void 0:v.arrayValue,g=(P=m[Zh])==null?void 0:P.arrayValue,x=Me(((E=f==null?void 0:f.values)==null?void 0:E.length)||0,((S=g==null?void 0:g.values)==null?void 0:S.length)||0);return x!==0?x:Nv(f,g)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Dd.mapValue&&l===Dd.mapValue)return 0;if(o===Dd.mapValue)return 1;if(l===Dd.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),f=l.fields||{},g=Object.keys(f);m.sort(),g.sort();for(let x=0;x<m.length&&x<g.length;++x){const v=xg(m[x],g[x]);if(v!==0)return v;const P=pl(h[m[x]],f[g[x]]);if(P!==0)return P}return Me(m.length,g.length)}(t.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=Vi(t),r=Vi(e),i=Me(n.seconds,r.seconds);return i!==0?i:Me(n.nanos,r.nanos)}function Nv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=pl(n[i],r[i]);if(o)return o}return Me(n.length,r.length)}function gl(t){return wg(t)}function wg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return je.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=wg(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${wg(n.fields[l])}`;return i+"}"}(t.mapValue):Ee(61005,{value:t})}function ah(t){switch(Bi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mm(t);return e?16+ah(e):16;case 5:return 2*t.stringValue.length;case 6:return Ui(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ah(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ta(r.fields,(o,l)=>{i+=o.length+ah(l)}),i}(t.mapValue);default:throw Ee(13486,{value:t})}}function kv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vg(t){return!!t&&"integerValue"in t}function tx(t){return!!t&&"arrayValue"in t}function Tv(t){return!!t&&"nullValue"in t}function Ev(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oh(t){return!!t&&"mapValue"in t}function WA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[c1])==null?void 0:r.stringValue)===u1}function Ac(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ta(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ac(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ac(t.arrayValue.values[n]);return e}return{...t}}function $A(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===FA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ac(n)}setAll(e){let n=Yt.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,r,i),r={},i=[],n=h.popLast()}l?r[h.lastSegment()]=Ac(l):i.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ta(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Cn(Ac(this.value))}}function d1(t){const e=[];return ta(t.fields,(n,r)=>{const i=new Yt([n]);if(oh(r)){const o=d1(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,r,i,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new cn(e,0,Ce.min(),Ce.min(),Ce.min(),Cn.empty(),0)}static newFoundDocument(e,n,r,i){return new cn(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new cn(e,2,n,Ce.min(),Ce.min(),Cn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Ce.min(),Ce.min(),Cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.position=e,this.inclusive=n}}function Sv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(o.field.isKeyField()?r=je.comparator(je.fromName(l.referenceValue),n.key):r=pl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function HA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h1=class{};class Rt extends h1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ZA(e,n,r):n==="array-contains"?new QA(e,r):n==="in"?new YA(e,r):n==="not-in"?new JA(e,r):n==="array-contains-any"?new XA(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KA(e,r):new GA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pl(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison(pl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends h1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Sr(e,n)}matches(e){return m1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function m1(t){return t.op==="and"}function f1(t){return qA(t)&&m1(t)}function qA(t){for(const e of t.filters)if(e instanceof Sr)return!1;return!0}function _g(t){if(t instanceof Rt)return t.field.canonicalString()+t.op.toString()+gl(t.value);if(f1(t))return t.filters.map(e=>_g(e)).join(",");{const e=t.filters.map(n=>_g(n)).join(",");return`${t.op}(${e})`}}function p1(t,e){return t instanceof Rt?function(r,i){return i instanceof Rt&&r.op===i.op&&r.field.isEqual(i.field)&&ss(r.value,i.value)}(t,e):t instanceof Sr?function(r,i){return i instanceof Sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,h)=>o&&p1(l,i.filters[h]),!0):!1}(t,e):void Ee(19439)}function g1(t){return t instanceof Rt?function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`}(t):t instanceof Sr?function(n){return n.op.toString()+" {"+n.getFilters().map(g1).join(" ,")+"}"}(t):"Filter"}class ZA extends Rt{constructor(e,n,r){super(e,n,r),this.key=je.fromName(r.referenceValue)}matches(e){const n=je.comparator(e.key,this.key);return this.matchesComparison(n)}}class KA extends Rt{constructor(e,n){super(e,"in",n),this.keys=y1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GA extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=y1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function y1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>je.fromName(r.referenceValue))}class QA extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tx(n)&&cu(n.arrayValue,this.value)}}class YA extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}}class JA extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cu(this.value.arrayValue,n)}}class XA extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n=null,r=[],i=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function Cv(t,e=null,n=[],r=[],i=null,o=null,l=null){return new eR(t,e,n,r,i,o,l)}function nx(t){const e=ze(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_g(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Dm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gl(r)).join(",")),e.Te=n}return e.Te}function rx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!p1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pv(t.startAt,e.startAt)&&Pv(t.endAt,e.endAt)}function bg(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n=null,r=[],i=[],o=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tR(t,e,n,r,i,o,l,h){return new Pl(t,e,n,r,i,o,l,h)}function Om(t){return new Pl(t)}function zv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function x1(t){return t.collectionGroup!==null}function Rc(t){const e=ze(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Vt(Yt.comparator);return l.filters.forEach(m=>{m.getFlattenedFilters().forEach(f=>{f.isInequality()&&(h=h.add(f.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new uu(o,r))}),n.has(Yt.keyField().canonicalString())||e.Ie.push(new uu(Yt.keyField(),r))}return e.Ie}function Yr(t){const e=ze(t);return e.Ee||(e.Ee=nR(e,Rc(t))),e.Ee}function nR(t,e){if(t.limitType==="F")return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new uu(i.field,o)});const n=t.endAt?new Kh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kh(t.startAt.position,t.startAt.inclusive):null;return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jg(t,e){const n=t.filters.concat([e]);return new Pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gh(t,e,n){return new Pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vm(t,e){return rx(Yr(t),Yr(e))&&t.limitType===e.limitType}function w1(t){return`${nx(Yr(t))}|lt:${t.limitType}`}function zo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>g1(i)).join(", ")}]`),Dm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>gl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>gl(i)).join(",")),`Target(${r})`}(Yr(t))}; limitType=${t.limitType})`}function Um(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):je.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Rc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,h,m){const f=Sv(l,h,m);return l.inclusive?f<=0:f<0}(r.startAt,Rc(r),i)||r.endAt&&!function(l,h,m){const f=Sv(l,h,m);return l.inclusive?f>=0:f>0}(r.endAt,Rc(r),i))}(t,e)}function rR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v1(t){return(e,n)=>{let r=!1;for(const i of Rc(t)){const o=sR(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function sR(t,e,n){const r=t.field.isKeyField()?je.comparator(e.key,n.key):function(o,l,h){const m=l.data.field(o),f=h.data.field(o);return m!==null&&f!==null?pl(m,f):Ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return r1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new pt(je.comparator);function Vs(){return iR}const _1=new pt(je.comparator);function wc(...t){let e=_1;for(const n of t)e=e.insert(n.key,n);return e}function b1(t){let e=_1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ka(){return Lc()}function j1(){return Lc()}function Lc(){return new Ja(t=>t.toString(),(t,e)=>t.isEqual(e))}const aR=new pt(je.comparator),oR=new Vt(je.comparator);function Oe(...t){let e=oR;for(const n of t)e=e.add(n);return e}const lR=new Vt(Me);function cR(){return lR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function N1(t){return{integerValue:""+t}}function uR(t,e){return MA(e)?N1(e):sx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this._=void 0}}function dR(t,e,n){return t instanceof du?function(i,o){const l={fields:{[a1]:{stringValue:i1},[l1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ex(o)&&(o=Mm(o)),o&&(l.fields[o1]=o),{mapValue:l}}(n,e):t instanceof hu?T1(t,e):t instanceof mu?E1(t,e):function(i,o){const l=k1(i,o),h=Iv(l)+Iv(i.Ae);return vg(l)&&vg(i.Ae)?N1(h):sx(i.serializer,h)}(t,e)}function hR(t,e,n){return t instanceof hu?T1(t,e):t instanceof mu?E1(t,e):n}function k1(t,e){return t instanceof Qh?function(r){return vg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class du extends Bm{}class hu extends Bm{constructor(e){super(),this.elements=e}}function T1(t,e){const n=S1(e);for(const r of t.elements)n.some(i=>ss(i,r))||n.push(r);return{arrayValue:{values:n}}}class mu extends Bm{constructor(e){super(),this.elements=e}}function E1(t,e){let n=S1(e);for(const r of t.elements)n=n.filter(i=>!ss(i,r));return{arrayValue:{values:n}}}class Qh extends Bm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Iv(t){return Nt(t.integerValue||t.doubleValue)}function S1(t){return tx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.field=e,this.transform=n}}function fR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hu&&i instanceof hu||r instanceof mu&&i instanceof mu?fl(r.elements,i.elements,ss):r instanceof Qh&&i instanceof Qh?ss(r.Ae,i.Ae):r instanceof du&&i instanceof du}(t.transform,e.transform)}class pR{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fm{}function P1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wm(t.key,Dn.none()):new Cu(t.key,t.data,Dn.none());{const n=t.data,r=Cn.empty();let i=new Vt(Yt.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new na(t.key,r,new Wn(i.toArray()),Dn.none())}}function gR(t,e,n){t instanceof Cu?function(i,o,l){const h=i.value.clone(),m=Rv(i.fieldTransforms,o,l.transformResults);h.setAll(m),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof na?function(i,o,l){if(!lh(i.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Rv(i.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(C1(i)),m.setAll(h),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(t,e,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Dc(t,e,n,r){return t instanceof Cu?function(o,l,h,m){if(!lh(o.precondition,l))return h;const f=o.value.clone(),g=Lv(o.fieldTransforms,m,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof na?function(o,l,h,m){if(!lh(o.precondition,l))return h;const f=Lv(o.fieldTransforms,m,l),g=l.data;return g.setAll(C1(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(x=>x.field))}(t,e,n,r):function(o,l,h){return lh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function yR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=k1(r.transform,i||null);o!=null&&(n===null&&(n=Cn.empty()),n.set(r.field,o))}return n||null}function Av(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fl(r,i,(o,l)=>fR(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cu extends Fm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class na extends Fm{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function C1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rv(t,e,n){const r=new Map;Qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,h=e.data.field(o.field);r.set(o.field,hR(l,h,n[i]))}return r}function Lv(t,e,n){const r=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);r.set(i.field,dR(o,l,e))}return r}class Wm extends Fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xR extends Fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&gR(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Dc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Dc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=j1();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(i.key)?null:h;const m=P1(l,h);m!==null&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,(n,r)=>Av(n,r))&&fl(this.baseMutations,e.baseMutations,(n,r)=>Av(n,r))}}class ix{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return aR}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new ix(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,$e;function bR(t){switch(t){case te.OK:return Ee(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ee(15467,{code:t})}}function z1(t){if(t===void 0)return Os("GRPC error has no .code"),te.UNKNOWN;switch(t){case zt.OK:return te.OK;case zt.CANCELLED:return te.CANCELLED;case zt.UNKNOWN:return te.UNKNOWN;case zt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case zt.INTERNAL:return te.INTERNAL;case zt.UNAVAILABLE:return te.UNAVAILABLE;case zt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case zt.NOT_FOUND:return te.NOT_FOUND;case zt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case zt.ABORTED:return te.ABORTED;case zt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case zt.DATA_LOSS:return te.DATA_LOSS;default:return Ee(39323,{code:t})}}($e=zt||(zt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Ai([4294967295,4294967295],0);function Dv(t){const e=jR().encode(t),n=new qN;return n.update(e),new Uint8Array(n.digest())}function Mv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ai([n,r],0),new Ai([i,o],0)]}class ax{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vc(`Invalid padding: ${n}`);if(r<0)throw new vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ai.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Ai.fromNumber(r)));return i.compare(NR)===1&&(i=new Ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Dv(e),[r,i]=Mv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new ax(o,i,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=Dv(e),[r,i]=Mv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,zu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $m(Ce.min(),i,new pt(Me),Vs(),Oe())}}class zu{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zu(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class I1{constructor(e,n){this.targetId=e,this.Ce=n}}class A1{constructor(e,n,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ov{constructor(){this.ve=0,this.Fe=Vv(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),r=Oe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ee(38017,{changeType:o})}}),new zu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Vv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class kR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vs(),this.Je=Md(),this.He=Md(),this.Ye=new pt(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(bg(o))if(r===0){const l=new je(o.path);this.et(n,l,cn.newNoDocument(l,Ce.min()))}else Qe(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const h=this.ut(e),m=h?this.ct(h,e,l):1;if(m!==0){this.it(n);const f=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let l,h;try{l=Ui(r).toUint8Array()}catch(m){if(m instanceof s1)return ml("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new ax(l,i,o)}catch(m){return ml(m instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&bg(h.target)){const m=new je(h.target.path);this.It(m).has(l)||this.Et(l,m)||this.et(l,m,cn.newNoDocument(m,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let r=Oe();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(m=>{const f=this.ot(m);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new $m(e,n,this.Ye,this.je,r);return this.je=Vs(),this.Je=Md(),this.He=Md(),this.Ye=new pt(Me),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ov,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ov),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Md(){return new pt(je.comparator)}function Vv(){return new pt(je.comparator)}const TR={asc:"ASCENDING",desc:"DESCENDING"},ER={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SR={and:"AND",or:"OR"};class PR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ng(t,e){return t.useProto3Json||Dm(e)?e:{value:e}}function Yh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CR(t,e){return Yh(t,e.toTimestamp())}function Jr(t){return Qe(!!t,49232),Ce.fromTimestamp(function(n){const r=Vi(n);return new lt(r.seconds,r.nanos)}(t))}function ox(t,e){return kg(t,e).canonicalString()}function kg(t,e){const n=function(i){return new st(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L1(t){const e=st.fromString(t);return Qe(U1(e),10190,{key:e.toString()}),e}function Tg(t,e){return ox(t.databaseId,e.path)}function ep(t,e){const n=L1(e);if(n.get(1)!==t.databaseId.projectId)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new je(M1(n))}function D1(t,e){return ox(t.databaseId,e)}function zR(t){const e=L1(t);return e.length===4?st.emptyPath():M1(e)}function Eg(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M1(t){return Qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Uv(t,e,n){return{name:Tg(t,e),fields:n.value.mapValue.fields}}function IR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ee(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Qe(g===void 0||typeof g=="string",58123),tn.fromBase64String(g||"")):(Qe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),tn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(f){const g=f.code===void 0?te.UNKNOWN:z1(f.code);return new de(g,f.message||"")}(l);n=new A1(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ep(t,r.document.name),o=Jr(r.document.updateTime),l=r.document.createTime?Jr(r.document.createTime):Ce.min(),h=new Cn({mapValue:{fields:r.document.fields}}),m=cn.newFoundDocument(i,o,l,h),f=r.targetIds||[],g=r.removedTargetIds||[];n=new ch(f,g,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ep(t,r.document),o=r.readTime?Jr(r.readTime):Ce.min(),l=cn.newNoDocument(i,o),h=r.removedTargetIds||[];n=new ch([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ep(t,r.document),o=r.removedTargetIds||[];n=new ch([],o,i,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new _R(i,o),h=r.targetId;n=new I1(h,l)}}return n}function AR(t,e){let n;if(e instanceof Cu)n={update:Uv(t,e.key,e.value)};else if(e instanceof Wm)n={delete:Tg(t,e.key)};else if(e instanceof na)n={update:Uv(t,e.key,e.data),updateMask:FR(e.fieldMask)};else{if(!(e instanceof xR))return Ee(16599,{Vt:e.type});n={verify:Tg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof du)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof hu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof mu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Qh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw Ee(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:CR(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ee(27497)}(t,e.precondition)),n}function RR(t,e){return t&&t.length>0?(Qe(e!==void 0,14353),t.map(n=>function(i,o){let l=i.updateTime?Jr(i.updateTime):Jr(o);return l.isEqual(Ce.min())&&(l=Jr(o)),new pR(l,i.transformResults||[])}(n,e))):[]}function LR(t,e){return{documents:[D1(t,e.path)]}}function DR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D1(t,i);const o=function(f){if(f.length!==0)return V1(Sr.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(g=>function(v){return{field:Io(v.field),direction:VR(v.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Ng(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:i}}function MR(t){let e=zR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qe(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(x){const v=O1(x);return v instanceof Sr&&f1(v)?v.getFilters():[v]}(n.where));let l=[];n.orderBy&&(l=function(x){return x.map(v=>function(E){return new uu(Ao(E.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(v))}(n.orderBy));let h=null;n.limit&&(h=function(x){let v;return v=typeof x=="object"?x.value:x,Dm(v)?null:v}(n.limit));let m=null;n.startAt&&(m=function(x){const v=!!x.before,P=x.values||[];return new Kh(P,v)}(n.startAt));let f=null;return n.endAt&&(f=function(x){const v=!x.before,P=x.values||[];return new Kh(P,v)}(n.endAt)),tR(e,i,l,o,h,"F",m,f)}function OR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function O1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ao(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ao(n.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ao(n.unaryFilter.field);return Rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ao(n.unaryFilter.field);return Rt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return Rt.create(Ao(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Sr.create(n.compositeFilter.filters.map(r=>O1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(n.compositeFilter.op))}(t):Ee(30097,{filter:t})}function VR(t){return TR[t]}function UR(t){return ER[t]}function BR(t){return SR[t]}function Io(t){return{fieldPath:t.canonicalString()}}function Ao(t){return Yt.fromServerFormat(t.fieldPath)}function V1(t){return t instanceof Rt?function(n){if(n.op==="=="){if(Ev(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NAN"}};if(Tv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ev(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NAN"}};if(Tv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(n.field),op:UR(n.op),value:n.value}}}(t):t instanceof Sr?function(n){const r=n.getFilters().map(i=>V1(i));return r.length===1?r[0]:{compositeFilter:{op:BR(n.op),filters:r}}}(t):Ee(54877,{filter:t})}function FR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function U1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,i,o=Ce.min(),l=Ce.min(),h=tn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.yt=e}}function $R(t){const e=MR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Cn=new qR}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Oi.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class qR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Vt(st.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B1=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(B1,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yl(0)}static cr(){return new yl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="LruGarbageCollector",ZR=1048576;function Wv([t,e],[n,r]){const i=Me(t,n);return i===0?Me(e,r):i}class KR{constructor(e){this.Ir=e,this.buffer=new Vt(Wv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Wv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(Fv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sl(n)?ge(Fv,"Ignoring IndexedDB error during garbage collection: ",n):await El(n)}await this.Vr(3e5)})}}class QR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Lm.ce);const r=new KR(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Bv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,l,h,m,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,l=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,h=Date.now(),this.removeTargets(e,r,n))).next(x=>(o=x,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(f=Date.now(),Co()<=De.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(h-l)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${x} documents in `+(f-m)+`ms
Total Duration: ${f-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:x})))}}function YR(t,e){return new QR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.changes=new Ja(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Dc(r.mutation,i,Wn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const i=ka();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let l=wc();return o.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=ka();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,i){let o=Vs();const l=Lc(),h=function(){return Lc()}();return n.forEach((m,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof na)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),Dc(g.mutation,f,g.mutation.getFieldMask(),lt.now())):l.set(f.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((f,g)=>l.set(f,g)),n.forEach((f,g)=>h.set(f,new XR(g,l.get(f)??null))),h))}recalculateAndSaveOverlays(e,n){const r=Lc();let i=new pt((l,h)=>l-h),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(m=>{const f=n.get(m);if(f===null)return;let g=r.get(m)||Wn.empty();g=h.applyToLocalView(f,g),r.set(m,g);const x=(i.get(h.batchId)||Oe()).add(m);i=i.insert(h.batchId,x)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),f=m.key,g=m.value,x=j1();g.forEach(v=>{if(!o.has(v)){const P=P1(n.get(v),r.get(v));P!==null&&x.set(v,P),o=o.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,x))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return je.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):x1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):re.resolve(ka());let h=au,m=o;return l.next(f=>re.forEach(f,(g,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),o.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{m=m.insert(g,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,m,f,Oe())).next(g=>({batchId:h,changes:b1(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new je(n)).next(r=>{let i=wc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let l=wc();return this.indexManager.getCollectionParents(e,o).next(h=>re.forEach(h,m=>{const f=function(x,v){return new Pl(v,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((x,v)=>{l=l.insert(x,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(l=>{o.forEach((m,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,cn.newInvalidDocument(g)))});let h=wc();return l.forEach((m,f)=>{const g=o.get(m);g!==void 0&&Dc(g.mutation,f,Wn.empty(),lt.now()),Um(n,f)&&(h=h.insert(m,f))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Jr(i.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:$R(i.bundledQuery),readTime:Jr(i.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.overlays=new pt(je.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ka();return re.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),re.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const i=ka(),o=n.length+1,l=new je(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,f=m.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return re.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new pt((f,g)=>f-g);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=ka(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const h=ka(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((f,g)=>h.set(f,g)),!(h.size()>=i)););return re.resolve(h)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new vR(n,r));let o=this.qr.get(n);o===void 0&&(o=Oe(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.Qr=new Vt($t.$r),this.Ur=new Vt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new $t(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new $t(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new je(new st([])),r=new $t(n,e),i=new $t(n,e+1),o=[];return this.Ur.forEachInRange([r,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new je(new st([])),r=new $t(n,e),i=new $t(n,e+1);let o=Oe();return this.Ur.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new $t(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return je.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vt($t.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new wR(o,n,r,i);this.mutationQueue.push(l);for(const h of i)this.Zr=this.Zr.add(new $t(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Xy:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $t(n,0),i=new $t(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],l=>{const h=this.Xr(l.Yr);o.push(h)}),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt(Me);return n.forEach(i=>{const o=new $t(i,0),l=new $t(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{r=r.add(h.Yr)})}),re.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;je.isDocumentKey(o)||(o=o.child(""));const l=new $t(new je(o),0);let h=new Vt(Me);return this.Zr.forEachWhile(m=>{const f=m.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(h=h.add(m.Yr)),!0)},l),re.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return re.forEach(n.mutations,i=>{const o=new $t(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new $t(n,0),i=this.Zr.firstAfterOrEqual(r);return re.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.ri=e,this.docs=function(){return new pt(je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=Vs();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():cn.newInvalidDocument(i))}),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Vs();const l=n.path,h=new je(l.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:f,value:{document:g}}=m.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||AA(IA(g),r)<=0||(i.has(g.key)||Um(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ee(9500)}ii(e,n){return re.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new a4(this)}getSize(e){return re.resolve(this.size)}}class a4 extends JR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.persistence=e,this.si=new Ja(n=>nx(n),rx),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new lx,this.targetCount=0,this.ai=yl.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),re.waitFor(o).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),re.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),re.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Lm(0),this.li=!1,this.li=!0,this.hi=new r4,this.referenceDelegate=e(this),this.Pi=new o4(this),this.indexManager=new HR,this.remoteDocumentCache=function(i){return new i4(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new WR(n),this.Ii=new t4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new n4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new s4(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const i=new l4(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return re.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class l4 extends LA{constructor(e){super(),this.currentSequenceNumber=e}}class cx{constructor(e){this.persistence=e,this.Ri=new lx,this.Vi=null}static mi(e){return new cx(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,r=>{const i=je.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Ce.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Jh{constructor(e,n){this.persistence=e,this.pi=new Ja(r=>OA(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=YR(this,n)}static mi(e,n){return new Jh(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return re.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?re.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,n).next(h=>{h||(r++,o.removeEntry(l,Ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ah(e.data.value)),n}br(e,n,r){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return re.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Oe(),i=Oe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new ux(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return DP()?8:DA(hn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new c4;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Co()<=De.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Co()<=De.DEBUG&&ge("QueryEngine","Query:",zo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Co()<=De.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(n))):re.resolve())}ys(e,n){if(zv(n))return re.resolve(null);let r=Yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gh(n,null,"F"),r=Yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Oe(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const f=this.Ds(n,h);return this.Cs(n,f,l,m.readTime)?this.ys(e,Gh(n,null,"F")):this.vs(e,f,n,m)}))})))}ws(e,n,r,i){return zv(n)||i.isEqual(Ce.min())?re.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,i)?re.resolve(null):(Co()<=De.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zo(n)),this.vs(e,l,n,zA(i,au)).next(h=>h))})}Ds(e,n){let r=new Vt(v1(e));return n.forEach((i,o)=>{Um(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Co()<=De.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",zo(n)),this.ps.getDocumentsMatchingQuery(e,n,Oi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="LocalStore",d4=3e8;class h4{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new pt(Me),this.xs=new Ja(o=>nx(o),rx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function m4(t,e,n,r){return new h4(t,e,n,r)}async function W1(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let m=Oe();for(const f of i){l.push(f.batchId);for(const g of f.mutations)m=m.add(g.key)}for(const f of o){h.push(f.batchId);for(const g of f.mutations)m=m.add(g.key)}return n.localDocuments.getDocuments(r,m).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:h}))})})}function f4(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,m,f,g){const x=f.batch,v=x.keys();let P=re.resolve();return v.forEach(E=>{P=P.next(()=>g.getEntry(m,E)).next(S=>{const M=f.docVersions.get(E);Qe(M!==null,48541),S.version.compareTo(M)<0&&(x.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),g.addEntry(S)))})}),P.next(()=>h.mutationQueue.removeMutationBatch(m,x))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let m=Oe();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(m=m.add(h.batch.mutations[f].key));return m}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function $1(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function p4(t,e){const n=ze(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const h=[];e.targetChanges.forEach((g,x)=>{const v=i.get(x);if(!v)return;h.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,x).next(()=>n.Pi.addMatchingKeys(o,g.addedDocuments,x)));let P=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?P=P.withResumeToken(tn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):g.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(g.resumeToken,r)),i=i.insert(x,P),function(S,M,j){return S.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=d4?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(v,P,g)&&h.push(n.Pi.updateTargetData(o,P))});let m=Vs(),f=Oe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),h.push(g4(o,l,e.documentUpdates).next(g=>{m=g.ks,f=g.qs})),!r.isEqual(Ce.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next(x=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(g)}return re.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,m,f)).next(()=>m)}).then(o=>(n.Ms=i,o))}function g4(t,e,n){let r=Oe(),i=Oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Vs();return n.forEach((h,m)=>{const f=o.get(h);m.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!f.isValidDocument()||m.version.compareTo(f.version)>0||m.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):ge(dx,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",m.version)}),{ks:l,qs:i}})}function y4(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Xy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function x4(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,re.resolve(i)):n.Pi.allocateTargetId(r).next(l=>(i=new vi(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Sg(t,e,n){const r=ze(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Sl(l))throw l;ge(dx,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function $v(t,e,n){const r=ze(t);let i=Ce.min(),o=Oe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(m,f,g){const x=ze(m),v=x.xs.get(g);return v!==void 0?re.resolve(x.Ms.get(v)):x.Pi.getTargetData(f,g)}(r,l,Yr(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next(m=>{o=m})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,n?i:Ce.min(),n?o:Oe())).next(h=>(w4(r,rR(e),h),{documents:h,Qs:o})))}function w4(t,e,n){let r=t.Os.get(e)||Ce.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Hv{constructor(){this.activeTargetIds=cR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v4{constructor(){this.Mo=new Hv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="ConnectivityMonitor";class Zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(qv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(qv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od=null;function Pg(){return Od===null?Od=function(){return 268435456+Math.round(2147483648*Math.random())}():Od++,"0x"+Od.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",b4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===qh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const l=Pg(),h=this.zo(e,n.toUriEncodedString());ge(tp,`Sending RPC '${e}' ${l}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,o);const{host:f}=new URL(h),g=Ji(f);return this.Jo(e,h,m,r,g).then(x=>(ge(tp,`Received RPC '${e}' ${l}: `,x),x),x=>{throw ml(tp,`RPC '${e}' ${l} failed with error: `,x,"url: ",h,"request:",r),x})}Ho(e,n,r,i,o,l){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=b4[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class k4 extends j4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const l=Pg();return new Promise((h,m)=>{const f=new ZN;f.setWithCredentials(!0),f.listenOnce(KN.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ih.NO_ERROR:const x=f.getResponseJson();ge(an,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(x)),h(x);break;case ih.TIMEOUT:ge(an,`RPC '${e}' ${l} timed out`),m(new de(te.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const v=f.getStatus();if(ge(an,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let P=f.getResponseJson();Array.isArray(P)&&(P=P[0]);const E=P==null?void 0:P.error;if(E&&E.status&&E.message){const S=function(j){const T=j.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(T)>=0?T:te.UNKNOWN}(E.status);m(new de(S,E.message))}else m(new de(te.UNKNOWN,"Server responded with status "+f.getStatus()))}else m(new de(te.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ge(an,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(i);ge(an,`RPC '${e}' ${l} sending request:`,i),f.send(n,"POST",g,r,15)})}T_(e,n,r){const i=Pg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=YN(),h=QN(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(m.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const g=o.join("");ge(an,`Creating RPC '${e}' stream ${i}: ${g}`,m);const x=l.createWebChannel(g,m);this.I_(x);let v=!1,P=!1;const E=new N4({Yo:M=>{P?ge(an,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(ge(an,`Opening RPC '${e}' stream ${i} transport.`),x.open(),v=!0),ge(an,`RPC '${e}' stream ${i} sending:`,M),x.send(M))},Zo:()=>x.close()}),S=(M,j,T)=>{M.listen(j,I=>{try{T(I)}catch(W){setTimeout(()=>{throw W},0)}})};return S(x,xc.EventType.OPEN,()=>{P||(ge(an,`RPC '${e}' stream ${i} transport opened.`),E.o_())}),S(x,xc.EventType.CLOSE,()=>{P||(P=!0,ge(an,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(x))}),S(x,xc.EventType.ERROR,M=>{P||(P=!0,ml(an,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),E.a_(new de(te.UNAVAILABLE,"The operation could not be completed")))}),S(x,xc.EventType.MESSAGE,M=>{var j;if(!P){const T=M.data[0];Qe(!!T,16349);const I=T,W=(I==null?void 0:I.error)||((j=I[0])==null?void 0:j.error);if(W){ge(an,`RPC '${e}' stream ${i} received error:`,W);const D=W.status;let O=function(R){const U=zt[R];if(U!==void 0)return z1(U)}(D),N=W.message;O===void 0&&(O=te.INTERNAL,N="Unknown error status: "+D+" with message "+W.message),P=!0,E.a_(new de(O,N)),x.close()}else ge(an,`RPC '${e}' stream ${i} received:`,T),E.u_(T)}}),S(h,GN.STAT_EVENT,M=>{M.stat===yg.PROXY?ge(an,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===yg.NOPROXY&&ge(an,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t){return new PR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="PersistentStream";class q1{constructor(e,n,r,i,o,l,h,m){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new H1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Os(n.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new de(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ge(Kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ge(Kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T4 extends q1{constructor(e,n,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IR(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ce.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ce.min():l.readTime?Jr(l.readTime):Ce.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Eg(this.serializer),n.addTarget=function(o,l){let h;const m=l.target;if(h=bg(m)?{documents:LR(o,m)}:{query:DR(o,m).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=R1(o,l.resumeToken);const f=Ng(o,l.expectedCount);f!==null&&(h.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ce.min())>0){h.readTime=Yh(o,l.snapshotVersion.toTimestamp());const f=Ng(o,l.expectedCount);f!==null&&(h.expectedCount=f)}return h}(this.serializer,e);const r=OR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Eg(this.serializer),n.removeTarget=e,this.q_(n)}}class E4 extends q1{constructor(e,n,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=RR(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Eg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>AR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{}class P4 extends S4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,kg(n,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(te.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,kg(n,r),i,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(te.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class C4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Os(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="RemoteStore";class z4{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Xa(this)&&(ge(Ha,"Restarting streams for network reachability change."),await async function(m){const f=ze(m);f.Ea.add(4),await Iu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await qm(f)}(this))})}),this.Ra=new C4(r,i)}}async function qm(t){if(Xa(t))for(const e of t.da)await e(!0)}async function Iu(t){for(const e of t.da)await e(!1)}function Z1(t,e){const n=ze(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),px(n)?fx(n):Cl(n).O_()&&mx(n,e))}function hx(t,e){const n=ze(t),r=Cl(n);n.Ia.delete(e),r.O_()&&K1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Xa(n)&&n.Ra.set("Unknown"))}function mx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cl(t).Y_(e)}function K1(t,e){t.Va.Ue(e),Cl(t).Z_(e)}function fx(t){t.Va=new kR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Cl(t).start(),t.Ra.ua()}function px(t){return Xa(t)&&!Cl(t).x_()&&t.Ia.size>0}function Xa(t){return ze(t).Ea.size===0}function G1(t){t.Va=void 0}async function I4(t){t.Ra.set("Online")}async function A4(t){t.Ia.forEach((e,n)=>{mx(t,e)})}async function R4(t,e){G1(t),px(t)?(t.Ra.ha(e),fx(t)):t.Ra.set("Unknown")}async function L4(t,e,n){if(t.Ra.set("Online"),e instanceof A1&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.Ia.delete(h),i.Va.removeTarget(h))}(t,e)}catch(r){ge(Ha,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xh(t,r)}else if(e instanceof ch?t.Va.Ze(e):e instanceof I1?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const r=await $1(t.localStore);n.compareTo(r)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((m,f)=>{if(m.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(m.resumeToken,l))}}),h.targetMismatches.forEach((m,f)=>{const g=o.Ia.get(m);if(!g)return;o.Ia.set(m,g.withResumeToken(tn.EMPTY_BYTE_STRING,g.snapshotVersion)),K1(o,m);const x=new vi(g.target,m,f,g.sequenceNumber);mx(o,x)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){ge(Ha,"Failed to raise snapshot:",r),await Xh(t,r)}}async function Xh(t,e,n){if(!Sl(e))throw e;t.Ea.add(1),await Iu(t),t.Ra.set("Offline"),n||(n=()=>$1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ge(Ha,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qm(t)})}function Q1(t,e){return e().catch(n=>Xh(t,n,e))}async function Zm(t){const e=ze(t),n=Fi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xy;for(;D4(e);)try{const i=await y4(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,M4(e,i)}catch(i){await Xh(e,i)}Y1(e)&&J1(e)}function D4(t){return Xa(t)&&t.Ta.length<10}function M4(t,e){t.Ta.push(e);const n=Fi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Y1(t){return Xa(t)&&!Fi(t).x_()&&t.Ta.length>0}function J1(t){Fi(t).start()}async function O4(t){Fi(t).ra()}async function V4(t){const e=Fi(t);for(const n of t.Ta)e.ea(n.mutations)}async function U4(t,e,n){const r=t.Ta.shift(),i=ix.from(r,e,n);await Q1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Zm(t)}async function B4(t,e){e&&Fi(t).X_&&await async function(r,i){if(function(l){return bR(l)&&l!==te.ABORTED}(i.code)){const o=r.Ta.shift();Fi(r).B_(),await Q1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Zm(r)}}(t,e),Y1(t)&&J1(t)}async function Gv(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),ge(Ha,"RemoteStore received new credentials");const r=Xa(n);n.Ea.add(3),await Iu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qm(n)}async function F4(t,e){const n=ze(t);e?(n.Ea.delete(2),await qm(n)):e||(n.Ea.add(2),await Iu(n),n.Ra.set("Unknown"))}function Cl(t){return t.ma||(t.ma=function(n,r,i){const o=ze(n);return o.sa(),new T4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:I4.bind(null,t),t_:A4.bind(null,t),r_:R4.bind(null,t),H_:L4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),px(t)?fx(t):t.Ra.set("Unknown")):(await t.ma.stop(),G1(t))})),t.ma}function Fi(t){return t.fa||(t.fa=function(n,r,i){const o=ze(n);return o.sa(),new E4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:O4.bind(null,t),r_:B4.bind(null,t),ta:V4.bind(null,t),na:U4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zm(t)):(await t.fa.stop(),t.Ta.length>0&&(ge(Ha,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const l=Date.now()+r,h=new gx(e,n,l,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yx(t,e){if(Os("AsyncQueue",`${e}: ${t}`),Sl(t))return new de(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{static emptySet(e){return new nl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||je.comparator(n.key,r.key):(n,r)=>je.comparator(n.key,r.key),this.keyedMap=wc(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.ga=new pt(je.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class xl{constructor(e,n,r,i,o,l,h,m,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new xl(e,n,nl.emptySet(n),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $4{constructor(){this.queries=Yv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ze(n),o=i.queries;i.queries=Yv(),o.forEach((l,h)=>{for(const m of h.Sa)m.onError(r)})})(this,new de(te.ABORTED,"Firestore shutting down"))}}function Yv(){return new Ja(t=>w1(t),Vm)}async function xx(t,e){const n=ze(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new W4,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const h=yx(l,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&vx(n)}async function wx(t,e){const n=ze(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function H4(t,e){const n=ze(t);let r=!1;for(const i of e){const o=i.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(i)&&(r=!0);l.wa=i}}r&&vx(n)}function q4(t,e,n){const r=ze(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function vx(t){t.Ca.forEach(e=>{e.next()})}var Cg,Jv;(Jv=Cg||(Cg={})).Ma="default",Jv.Cache="cache";class _x{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.key=e}}class ek{constructor(e){this.key=e}}class Z4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=v1(e),this.tu=new nl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Qv,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,x)=>{const v=i.get(g),P=Um(this.query,x)?x:null,E=!!v&&this.mutatedKeys.has(v.key),S=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let M=!1;v&&P?v.data.isEqual(P.data)?E!==S&&(r.track({type:3,doc:P}),M=!0):this.su(v,P)||(r.track({type:2,doc:P}),M=!0,(m&&this.eu(P,m)>0||f&&this.eu(P,f)<0)&&(h=!0)):!v&&P?(r.track({type:0,doc:P}),M=!0):v&&!P&&(r.track({type:1,doc:v}),M=!0,(m||f)&&(h=!0)),M&&(P?(l=l.add(P),o=S?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((g,x)=>function(P,E){const S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:M})}};return S(P)-S(E)}(g.type,x.type)||this.eu(g.doc,x.doc)),this.ou(r),i=i??!1;const h=n&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,f=m!==this.Za;return this.Za=m,l.length!==0||f?{snapshot:new xl(this.query,e.tu,o,l,e.mutatedKeys,m===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new ek(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new X1(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return xl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bx="SyncEngine";class K4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class G4{constructor(e){this.key=e,this.hu=!1}}class Q4{constructor(e,n,r,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ja(h=>w1(h),Vm),this.Iu=new Map,this.Eu=new Set,this.du=new pt(je.comparator),this.Au=new Map,this.Ru=new lx,this.Vu={},this.mu=new Map,this.fu=yl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Y4(t,e,n=!0){const r=ak(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await tk(r,e,n,!0),i}async function J4(t,e){const n=ak(t);await tk(n,e,!0,!1)}async function tk(t,e,n,r){const i=await x4(t.localStore,Yr(e)),o=i.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await X4(t,e,o,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&Z1(t.remoteStore,i),h}async function X4(t,e,n,r,i){t.pu=(x,v,P)=>async function(S,M,j,T){let I=M.view.ru(j);I.Cs&&(I=await $v(S.localStore,M.query,!1).then(({documents:N})=>M.view.ru(N,I)));const W=T&&T.targetChanges.get(M.targetId),D=T&&T.targetMismatches.get(M.targetId)!=null,O=M.view.applyChanges(I,S.isPrimaryClient,W,D);return e_(S,M.targetId,O.au),O.snapshot}(t,x,v,P);const o=await $v(t.localStore,e,!0),l=new Z4(e,o.Qs),h=l.ru(o.documents),m=zu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=l.applyChanges(h,t.isPrimaryClient,m);e_(t,n,f.au);const g=new K4(e,n,l);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function e5(t,e,n){const r=ze(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(l=>!Vm(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hx(r.remoteStore,i.targetId),zg(r,i.targetId)}).catch(El)):(zg(r,i.targetId),await Sg(r.localStore,i.targetId,!0))}async function t5(t,e){const n=ze(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hx(n.remoteStore,r.targetId))}async function n5(t,e,n){const r=c5(t);try{const i=await function(l,h){const m=ze(l),f=lt.now(),g=h.reduce((P,E)=>P.add(E.key),Oe());let x,v;return m.persistence.runTransaction("Locally write mutations","readwrite",P=>{let E=Vs(),S=Oe();return m.Ns.getEntries(P,g).next(M=>{E=M,E.forEach((j,T)=>{T.isValidDocument()||(S=S.add(j))})}).next(()=>m.localDocuments.getOverlayedDocuments(P,E)).next(M=>{x=M;const j=[];for(const T of h){const I=yR(T,x.get(T.key).overlayedDocument);I!=null&&j.push(new na(T.key,I,d1(I.value.mapValue),Dn.exists(!0)))}return m.mutationQueue.addMutationBatch(P,f,j,h)}).next(M=>{v=M;const j=M.applyToLocalDocumentSet(x,S);return m.documentOverlayCache.saveOverlays(P,M.batchId,j)})}).then(()=>({batchId:v.batchId,changes:b1(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,h,m){let f=l.Vu[l.currentUser.toKey()];f||(f=new pt(Me)),f=f.insert(h,m),l.Vu[l.currentUser.toKey()]=f}(r,i.batchId,n),await Au(r,i.changes),await Zm(r.remoteStore)}catch(i){const o=yx(i,"Failed to persist write");n.reject(o)}}async function nk(t,e){const n=ze(t);try{const r=await p4(n.localStore,e);e.targetChanges.forEach((i,o)=>{const l=n.Au.get(o);l&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Qe(l.hu,14607):i.removedDocuments.size>0&&(Qe(l.hu,42227),l.hu=!1))}),await Au(n,r,e)}catch(r){await El(r)}}function Xv(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(l,h){const m=ze(l);m.onlineState=h;let f=!1;m.queries.forEach((g,x)=>{for(const v of x.Sa)v.va(h)&&(f=!0)}),f&&vx(m)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function r5(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new pt(je.comparator);l=l.insert(o,cn.newNoDocument(o,Ce.min()));const h=Oe().add(o),m=new $m(Ce.min(),new Map,new pt(Me),l,h);await nk(r,m),r.du=r.du.remove(o),r.Au.delete(e),jx(r)}else await Sg(r.localStore,e,!1).then(()=>zg(r,e,n)).catch(El)}async function s5(t,e){const n=ze(t),r=e.batch.batchId;try{const i=await f4(n.localStore,e);sk(n,r,null),rk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Au(n,i)}catch(i){await El(i)}}async function i5(t,e,n){const r=ze(t);try{const i=await function(l,h){const m=ze(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return m.mutationQueue.lookupMutationBatch(f,h).next(x=>(Qe(x!==null,37113),g=x.keys(),m.mutationQueue.removeMutationBatch(f,x))).next(()=>m.mutationQueue.performConsistencyCheck(f)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(f,g,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>m.localDocuments.getDocuments(f,g))})}(r.localStore,e);sk(r,e,n),rk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Au(r,i)}catch(i){await El(i)}}function rk(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function sk(t,e,n){const r=ze(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function zg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||ik(t,r)})}function ik(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(hx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),jx(t))}function e_(t,e,n){for(const r of n)r instanceof X1?(t.Ru.addReference(r.key,e),a5(t,r)):r instanceof ek?(ge(bx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ik(t,r.key)):Ee(19791,{wu:r})}function a5(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ge(bx,"New document in limbo: "+n),t.Eu.add(r),jx(t))}function jx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new je(st.fromString(e)),r=t.fu.next();t.Au.set(r,new G4(n)),t.du=t.du.insert(n,r),Z1(t.remoteStore,new vi(Yr(Om(n.path)),r,"TargetPurposeLimboResolution",Lm.ce))}}async function Au(t,e,n){const r=ze(t),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((h,m)=>{l.push(r.pu(m,e,n).then(f=>{var g;if((f||n)&&r.isPrimaryClient){const x=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(m.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(m.targetId,x?"current":"not-current")}if(f){i.push(f);const x=ux.As(m.targetId,f);o.push(x)}}))}),await Promise.all(l),r.Pu.H_(i),await async function(m,f){const g=ze(m);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>re.forEach(f,v=>re.forEach(v.Es,P=>g.persistence.referenceDelegate.addReference(x,v.targetId,P)).next(()=>re.forEach(v.ds,P=>g.persistence.referenceDelegate.removeReference(x,v.targetId,P)))))}catch(x){if(!Sl(x))throw x;ge(dx,"Failed to update sequence numbers: "+x)}for(const x of f){const v=x.targetId;if(!x.fromCache){const P=g.Ms.get(v),E=P.snapshotVersion,S=P.withLastLimboFreeSnapshotVersion(E);g.Ms=g.Ms.insert(v,S)}}}(r.localStore,o))}async function o5(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){ge(bx,"User change. New user:",e.toKey());const r=await W1(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(m=>{m.reject(new de(te.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Au(n,r.Ls)}}function l5(t,e){const n=ze(t),r=n.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let i=Oe();const o=n.Iu.get(e);if(!o)return i;for(const l of o){const h=n.Tu.get(l);i=i.unionWith(h.view.nu)}return i}}function ak(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r5.bind(null,e),e.Pu.H_=H4.bind(null,e.eventManager),e.Pu.yu=q4.bind(null,e.eventManager),e}function c5(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i5.bind(null,e),e}class em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return m4(this.persistence,new u4,e.initialUser,this.serializer)}Cu(e){return new F1(cx.mi,this.serializer)}Du(e){return new v4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}em.provider={build:()=>new em};class u5 extends em{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof Jh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new GR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new F1(r=>Jh.mi(r,n),this.serializer)}}class Ig{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o5.bind(null,this.syncEngine),await F4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $4}()}createDatastore(e){const n=Hm(e.databaseInfo.databaseId),r=function(o){return new k4(o)}(e.databaseInfo);return function(o,l,h,m){return new P4(o,l,h,m)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,l,h){return new z4(r,i,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Xv(this.syncEngine,n,0),function(){return Zv.v()?new Zv:new _4}())}createSyncEngine(e,n){return function(i,o,l,h,m,f,g){const x=new Q4(i,o,l,h,m,f);return g&&(x.gu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ze(i);ge(Ha,"RemoteStore shutting down."),o.Ea.add(5),await Iu(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ig.provider={build:()=>new Ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="FirestoreClient";class d5{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=Jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ge(Wi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ge(Wi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rp(t,e){t.asyncQueue.verifyOperationInProgress(),ge(Wi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await W1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await h5(t);ge(Wi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Gv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Gv(e.remoteStore,i)),t._onlineComponents=e}async function h5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(Wi,"Using user provided OfflineComponentProvider");try{await rp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ml("Error using user provided cache. Falling back to memory cache: "+n),await rp(t,new em)}}else ge(Wi,"Using default OfflineComponentProvider"),await rp(t,new u5(void 0));return t._offlineComponents}async function ok(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(Wi,"Using user provided OnlineComponentProvider"),await t_(t,t._uninitializedComponentsProvider._online)):(ge(Wi,"Using default OnlineComponentProvider"),await t_(t,new Ig))),t._onlineComponents}function m5(t){return ok(t).then(e=>e.syncEngine)}async function tm(t){const e=await ok(t),n=e.eventManager;return n.onListen=Y4.bind(null,e.syncEngine),n.onUnlisten=e5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=t5.bind(null,e.syncEngine),n}function f5(t,e,n={}){const r=new zs;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,m,f){const g=new Nx({next:v=>{g.Nu(),l.enqueueAndForget(()=>wx(o,x));const P=v.docs.has(h);!P&&v.fromCache?f.reject(new de(te.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&v.fromCache&&m&&m.source==="server"?f.reject(new de(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),x=new _x(Om(h.path),g,{includeMetadataChanges:!0,qa:!0});return xx(o,x)}(await tm(t),t.asyncQueue,e,n,r)),r.promise}function p5(t,e,n={}){const r=new zs;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,m,f){const g=new Nx({next:v=>{g.Nu(),l.enqueueAndForget(()=>wx(o,x)),v.fromCache&&m.source==="server"?f.reject(new de(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),x=new _x(h,g,{includeMetadataChanges:!0,qa:!0});return xx(o,x)}(await tm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="firestore.googleapis.com",r_=!0;class s_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ck,this.ssl=r_}else this.host=e.host,this.ssl=e.ssl??r_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=B1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZR)throw new de(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Km{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wA;switch(r.type){case"firstParty":return new jA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n_.get(n);r&&(ge("ComponentProvider","Removing Datastore"),n_.delete(n),r.terminate())}(this),Promise.resolve()}}function g5(t,e,n,r={}){var f;t=Ln(t,Km);const i=Ji(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;i&&(Oy(`https://${h}`),Vy("Firestore",!0)),o.host!==ck&&o.host!==h&&ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:h,ssl:i,emulatorOptions:r};if(!Va(m,l)&&(t._setSettings(m),r.mockUserToken)){let g,x;if(typeof r.mockUserToken=="string")g=r.mockUserToken,x=on.MOCK_USER;else{g=sN(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new de(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new on(v)}t._authCredentials=new vA(new XN(g,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hs(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Pu(n,xt._jsonSchema))return new xt(e,r||null,new je(st.fromString(n.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Lt("string",xt._jsonSchemaVersion),referencePath:Lt("string")};class Ri extends Hs{constructor(e,n,r){super(e,n,Om(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new je(e))}withConverter(e){return new Ri(this.firestore,e,this._path)}}function nt(t,e,...n){if(t=Ye(t),e1("collection","path",e),t instanceof Km){const r=st.fromString(e,...n);return yv(r),new Ri(t,null,r)}{if(!(t instanceof xt||t instanceof Ri))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return yv(r),new Ri(t.firestore,null,r)}}function Ve(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=Jy.newId()),e1("doc","path",e),t instanceof Km){const r=st.fromString(e,...n);return gv(r),new xt(t,null,new je(r))}{if(!(t instanceof xt||t instanceof Ri))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return gv(r),new xt(t.firestore,t instanceof Ri?t.converter:null,new je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="AsyncQueue";class a_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new H1(this,"async_queue_retry"),this._c=()=>{const r=np();r&&ge(i_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=np();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=np();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sl(e))throw e;ge(i_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Os("INTERNAL UNHANDLED ERROR: ",o_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=gx.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Ee(47125,{Pc:o_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function o_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Us extends Km{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new a_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a_(e),this._firestoreClient=void 0,await e}}}function y5(t,e){const n=typeof t=="object"?t:Fy(),r=typeof t=="string"?t:qh,i=Cm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=tN("firestore");o&&g5(i,...o)}return i}function Ru(t){if(t._terminated)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||x5(t),t._firestoreClient}function x5(t){var r,i,o;const e=t._freezeSettings(),n=function(h,m,f,g){return new BA(h,m,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,lk(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new d5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(tn.fromBase64String(e))}catch(n){throw new de(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ir(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pu(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:Lt("string",ir._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xr._jsonSchemaVersion}}static fromJSON(e){if(Pu(e,Xr._jsonSchema))return new Xr(e.latitude,e.longitude)}}Xr._jsonSchemaVersion="firestore/geoPoint/1.0",Xr._jsonSchema={type:Lt("string",Xr._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pu(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new es(e.vectorValues);throw new de(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:Lt("string",es._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=/^__.*__$/;class v5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new na(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}class uk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new na(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:t})}}class kx{constructor(e,n,r,i,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dk(this.Ac)&&w5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hm(e)}Cc(e,n,r,i=!1){return new kx({Ac:e,methodName:n,Dc:r,path:Yt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qm(t){const e=t._freezeSettings(),n=Hm(t._databaseId);return new _5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hk(t,e,n,r,i,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Ex("Data must be an object, but it was:",l,r);const h=pk(r,l);let m,f;if(o.merge)m=new Wn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const x of o.mergeFields){const v=Ag(e,x,n);if(!l.contains(v))throw new de(te.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);yk(g,v)||g.push(v)}m=new Wn(g),f=l.fieldTransforms.filter(x=>m.covers(x.field))}else m=null,f=l.fieldTransforms;return new v5(new Cn(h),m,f)}class Ym extends Gm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ym}}class Tx extends Gm{_toFieldTransform(e){return new mR(e.path,new du)}isEqual(e){return e instanceof Tx}}function mk(t,e,n,r){const i=t.Cc(1,e,n);Ex("Data must be an object, but it was:",i,r);const o=[],l=Cn.empty();ta(r,(m,f)=>{const g=Sx(e,m,n);f=Ye(f);const x=i.yc(g);if(f instanceof Ym)o.push(g);else{const v=Du(f,x);v!=null&&(o.push(g),l.set(g,v))}});const h=new Wn(o);return new uk(l,h,i.fieldTransforms)}function fk(t,e,n,r,i,o){const l=t.Cc(1,e,n),h=[Ag(e,r,n)],m=[i];if(o.length%2!=0)throw new de(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)h.push(Ag(e,o[v])),m.push(o[v+1]);const f=[],g=Cn.empty();for(let v=h.length-1;v>=0;--v)if(!yk(f,h[v])){const P=h[v];let E=m[v];E=Ye(E);const S=l.yc(P);if(E instanceof Ym)f.push(P);else{const M=Du(E,S);M!=null&&(f.push(P),g.set(P,M))}}const x=new Wn(f);return new uk(g,x,l.fieldTransforms)}function b5(t,e,n,r=!1){return Du(n,t.Cc(r?4:3,e))}function Du(t,e){if(gk(t=Ye(t)))return Ex("Unsupported field value:",e,t),pk(t,e);if(t instanceof Gm)return function(r,i){if(!dk(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const h of r){let m=Du(h,i.wc(l));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=lt.fromDate(r);return{timestampValue:Yh(i.serializer,o)}}if(r instanceof lt){const o=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yh(i.serializer,o)}}if(r instanceof Xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ir)return{bytesValue:R1(i.serializer,r._byteString)};if(r instanceof xt){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ox(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof es)return function(l,h){return{mapValue:{fields:{[c1]:{stringValue:u1},[Zh]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return sx(h.serializer,f)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Rm(r)}`)}(t,e)}function pk(t,e){const n={};return r1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(t,(r,i)=>{const o=Du(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function gk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Xr||t instanceof ir||t instanceof xt||t instanceof Gm||t instanceof es)}function Ex(t,e,n){if(!gk(n)||!t1(n)){const r=Rm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ag(t,e,n){if((e=Ye(e))instanceof Lu)return e._internalPath;if(typeof e=="string")return Sx(t,e);throw nm("Field path arguments must be of type string or ",t,!1,void 0,n)}const j5=new RegExp("[~\\*/\\[\\]]");function Sx(t,e,n){if(e.search(j5)>=0)throw nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lu(...e.split("."))._internalPath}catch{throw nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nm(t,e,n,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||l)&&(m+=" (found",o&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new de(te.INVALID_ARGUMENT,h+t+m)}function yk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N5 extends xk{data(){return super.data()}}function Jm(t,e){return typeof e=="string"?Sx(t,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Px{}class Cx extends Px{}function It(t,e,...n){let r=[];e instanceof Px&&r.push(e),r=r.concat(n),function(o){const l=o.filter(m=>m instanceof zx).length,h=o.filter(m=>m instanceof Xm).length;if(l>1||l>0&&h>0)throw new de(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Xm extends Cx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xm(e,n,r)}_apply(e){const n=this._parse(e);return vk(e._query,n),new Hs(e.firestore,e.converter,jg(e._query,n))}_parse(e){const n=Qm(e.firestore);return function(o,l,h,m,f,g,x){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new de(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){u_(x,g);const E=[];for(const S of x)E.push(c_(m,o,S));v={arrayValue:{values:E}}}else v=c_(m,o,x)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||u_(x,g),v=b5(h,l,x,g==="in"||g==="not-in");return Rt.create(f,g,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jt(t,e,n){const r=e,i=Jm("where",t);return Xm._create(i,r,n)}class zx extends Px{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let l=i;const h=o.getFlattenedFilters();for(const m of h)vk(l,m),l=jg(l,m)}(e._query,n),new Hs(e.firestore,e.converter,jg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ix extends Cx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ix(e,n)}_apply(e){const n=function(i,o,l){if(i.startAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uu(o,l)}(e._query,this._field,this._direction);return new Hs(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new Pl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function k5(t,e="asc"){const n=e,r=Jm("orderBy",t);return Ix._create(r,n)}class Ax extends Cx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ax(e,n,r)}_apply(e){return new Hs(e.firestore,e.converter,Gh(e._query,this._limit,this._limitType))}}function T5(t){return CA("limit",t),Ax._create("limit",t,"F")}function c_(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new de(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x1(e)&&n.indexOf("/")!==-1)throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!je.isDocumentKey(r))throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kv(t,new je(r))}if(n instanceof xt)return kv(t,n._key);throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rm(n)}.`)}function u_(t,e){if(!Array.isArray(t)||t.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vk(t,e){const n=function(i,o){for(const l of i)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class E5{convertValue(e,n="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ta(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Zh].arrayValue)==null?void 0:i.values)==null?void 0:o.map(l=>Nt(l.doubleValue));return new es(n)}convertGeoPoint(e){return new Xr(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const n=Vi(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Qe(U1(r),9688,{name:e});const i=new lu(r.get(1),r.get(3)),o=new je(r.popFirst(5));return i.isEqual(n)||Os(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class _c{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pa extends xk{constructor(e,n,r,i,o,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Pa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Pa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pa._jsonSchema={type:Lt("string",Pa._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class uh extends Pa{data(e={}){return super.data(e)}}class Ca{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _c(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uh(this._firestore,this._userDataWriter,r.key,r,new _c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(h=>{const m=new uh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new _c(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const m=new uh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new _c(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return h.type!==0&&(f=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:S5(h.type),doc:m,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ca._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function S5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){t=Ln(t,xt);const e=Ln(t.firestore,Us);return f5(Ru(e),t._key).then(n=>bk(e,t,n))}Ca._jsonSchemaVersion="firestore/querySnapshot/1.0",Ca._jsonSchema={type:Lt("string",Ca._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Rx extends E5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Et(t){t=Ln(t,Hs);const e=Ln(t.firestore,Us),n=Ru(e),r=new Rx(e);return wk(t._query),p5(n,t._query).then(i=>new Ca(e,r,t,i))}function wl(t,e,n){t=Ln(t,xt);const r=Ln(t.firestore,Us),i=_k(t.converter,e,n);return ef(r,[hk(Qm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Dn.none())])}function Kt(t,e,n,...r){t=Ln(t,xt);const i=Ln(t.firestore,Us),o=Qm(i);let l;return l=typeof(e=Ye(e))=="string"||e instanceof Lu?fk(o,"updateDoc",t._key,e,n,r):mk(o,"updateDoc",t._key,e),ef(i,[l.toMutation(t._key,Dn.exists(!0))])}function Mu(t){return ef(Ln(t.firestore,Us),[new Wm(t._key,Dn.none())])}function rl(t,...e){var m,f,g;t=Ye(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||l_(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(l_(e[r])){const x=e[r];e[r]=(m=x.next)==null?void 0:m.bind(x),e[r+1]=(f=x.error)==null?void 0:f.bind(x),e[r+2]=(g=x.complete)==null?void 0:g.bind(x)}let o,l,h;if(t instanceof xt)l=Ln(t.firestore,Us),h=Om(t._key.path),o={next:x=>{e[r]&&e[r](bk(l,t,x))},error:e[r+1],complete:e[r+2]};else{const x=Ln(t,Hs);l=Ln(x.firestore,Us),h=x._query;const v=new Rx(l);o={next:P=>{e[r]&&e[r](new Ca(l,v,x,P))},error:e[r+1],complete:e[r+2]},wk(t._query)}return function(v,P,E,S){const M=new Nx(S),j=new _x(P,M,E);return v.asyncQueue.enqueueAndForget(async()=>xx(await tm(v),j)),()=>{M.Nu(),v.asyncQueue.enqueueAndForget(async()=>wx(await tm(v),j))}}(Ru(l),h,i,o)}function ef(t,e){return function(r,i){const o=new zs;return r.asyncQueue.enqueueAndForget(async()=>n5(await m5(r),i,o)),o.promise}(Ru(t),e)}function bk(t,e,n){const r=n.docs.get(e._key),i=new Rx(t);return new Pa(t,i,e._key,r,new _c(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qm(e)}set(e,n,r){this._verifyNotCommitted();const i=sp(e,this._firestore),o=_k(i.converter,n,r),l=hk(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,Dn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=sp(e,this._firestore);let l;return l=typeof(n=Ye(n))=="string"||n instanceof Lu?fk(this._dataReader,"WriteBatch.update",o._key,n,r,i):mk(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sp(e,this._firestore);return this._mutations=this._mutations.concat(new Wm(n._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sp(t,e){if((t=Ye(t)).firestore!==e)throw new de(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function C5(){return new Tx("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){return Ru(t=Ln(t,Us)),new P5(t,e=>ef(t,e))}(function(e,n=!0){(function(i){Tl=i})(Qa),Ua(new Mi("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new Us(new _A(r.getProvider("auth-internal")),new NA(l,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(f.options.projectId,g)}(l,i),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Kr(hv,mv,e),Kr(hv,mv,"esm2020")})();var z5="firebase",I5="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(z5,I5,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="firebasestorage.googleapis.com",Nk="storageBucket",A5=2*60*1e3,R5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt extends as{constructor(e,n,r=0){super(ip(e),`Firebase Storage: ${n} (${ip(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wt||(wt={}));function ip(t){return"storage/"+t}function Lx(){const t="An unknown error occurred, please check the error payload for server response.";return new vt(wt.UNKNOWN,t)}function L5(t){return new vt(wt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function D5(t){return new vt(wt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function M5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vt(wt.UNAUTHENTICATED,t)}function O5(){return new vt(wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function V5(t){return new vt(wt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function U5(){return new vt(wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function B5(){return new vt(wt.CANCELED,"User canceled the upload/download.")}function F5(t){return new vt(wt.INVALID_URL,"Invalid URL '"+t+"'.")}function W5(t){return new vt(wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $5(){return new vt(wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Nk+"' property when initializing the app?")}function H5(){return new vt(wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function q5(){return new vt(wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Z5(t){return new vt(wt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rg(t){return new vt(wt.INVALID_ARGUMENT,t)}function kk(){return new vt(wt.APP_DELETED,"The Firebase app was deleted.")}function K5(t){return new vt(wt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mc(t,e){return new vt(wt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function dc(t){throw new vt(wt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$n.makeFromUrl(e,n)}catch{return new $n(e,"")}if(r.path==="")return r;throw W5(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+i+l,"i"),m={bucket:1,path:3};function f(W){W.path_=decodeURIComponent(W.path)}const g="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",P=new RegExp(`^https?://${x}/${g}/b/${i}/o${v}`,"i"),E={bucket:1,path:3},S=n===jk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",j=new RegExp(`^https?://${S}/${i}/${M}`,"i"),I=[{regex:h,indices:m,postModify:o},{regex:P,indices:E,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let W=0;W<I.length;W++){const D=I[W],O=D.regex.exec(e);if(O){const N=O[D.indices.bucket];let b=O[D.indices.path];b||(b=""),r=new $n(N,b),D.postModify(r);break}}if(r==null)throw F5(e);return r}}class G5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t,e,n){let r=1,i=null,o=null,l=!1,h=0;function m(){return h===2}let f=!1;function g(...M){f||(f=!0,e.apply(null,M))}function x(M){i=setTimeout(()=>{i=null,t(P,m())},M)}function v(){o&&clearTimeout(o)}function P(M,...j){if(f){v();return}if(M){v(),g.call(null,M,...j);return}if(m()||l){v(),g.call(null,M,...j);return}r<64&&(r*=2);let I;h===1?(h=2,I=0):I=(r+Math.random())*1e3,x(I)}let E=!1;function S(M){E||(E=!0,v(),!f&&(i!==null?(M||(h=2),clearTimeout(i),x(0)):M||(h=1)))}return x(0),o=setTimeout(()=>{l=!0,S(!0)},n),S}function Y5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t){return t!==void 0}function X5(t){return typeof t=="object"&&!Array.isArray(t)}function Dx(t){return typeof t=="string"||t instanceof String}function h_(t){return Mx()&&t instanceof Blob}function Mx(){return typeof Blob<"u"}function m_(t,e,n,r){if(r<e)throw Rg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Rg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Tk(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var za;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(za||(za={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n,r,i,o,l,h,m,f,g,x,v=!0,P=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=x,this.retry=v,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Vd(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{const m=h.loaded,f=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===za.NO_ERROR,m=o.getStatus();if(!h||eL(m,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===za.ABORT;r(!1,new Vd(!1,null,g));return}const f=this.successCodes_.indexOf(m)!==-1;r(!0,new Vd(f,o))})},n=(r,i)=>{const o=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());J5(m)?o(m):o()}catch(m){l(m)}else if(h!==null){const m=Lx();m.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,m)):l(m)}else if(i.canceled){const m=this.appDelete_?kk():B5();l(m)}else{const m=U5();l(m)}};this.canceled_?n(!1,new Vd(!1,null,!0)):this.backoffId_=Q5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Y5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function iL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function aL(t,e,n,r,i,o,l=!0,h=!1){const m=Tk(t.urlParams),f=t.url+m,g=Object.assign({},t.headers);return sL(g,e),nL(g,n),rL(g,o),iL(g,r),new tL(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lL(...t){const e=oL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Mx())return new Blob(t);throw new vt(wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){if(typeof atob>"u")throw Z5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ap{constructor(e,n){this.data=e,this.contentType=n||null}}function dL(t,e){switch(t){case $r.RAW:return new ap(Ek(e));case $r.BASE64:case $r.BASE64URL:return new ap(Sk(t,e));case $r.DATA_URL:return new ap(mL(e),fL(e))}throw Lx()}function Ek(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=t.charCodeAt(++n);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function hL(t){let e;try{e=decodeURIComponent(t)}catch{throw Mc($r.DATA_URL,"Malformed data URL.")}return Ek(e)}function Sk(t,e){switch(t){case $r.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Mc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case $r.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Mc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uL(e)}catch(i){throw i.message.includes("polyfill")?i:Mc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Pk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Mc($r.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function mL(t){const e=new Pk(t);return e.base64?Sk($r.BASE64,e.rest):hL(e.rest)}function fL(t){return new Pk(t).contentType}function pL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){let r=0,i="";h_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(h_(this.data_)){const r=this.data_,i=cL(r,e,n);return i===null?null:new gi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new gi(r,!0)}}static getBlob(...e){if(Mx()){const n=e.map(r=>r instanceof gi?r.data_:r);return new gi(lL.apply(null,n))}else{const n=e.map(l=>Dx(l)?dL($r.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let h=0;h<l.length;h++)i[o++]=l[h]}),new gi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){let e;try{e=JSON.parse(t)}catch{return null}return X5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function yL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function zk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t,e){return e}class yn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||xL}}let Ud=null;function wL(t){return!Dx(t)||t.length<2?t:zk(t)}function Ik(){if(Ud)return Ud;const t=[];t.push(new yn("bucket")),t.push(new yn("generation")),t.push(new yn("metageneration")),t.push(new yn("name","fullPath",!0));function e(o,l){return wL(l)}const n=new yn("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const i=new yn("size");return i.xform=r,t.push(i),t.push(new yn("timeCreated")),t.push(new yn("updated")),t.push(new yn("md5Hash",null,!0)),t.push(new yn("cacheControl",null,!0)),t.push(new yn("contentDisposition",null,!0)),t.push(new yn("contentEncoding",null,!0)),t.push(new yn("contentLanguage",null,!0)),t.push(new yn("contentType",null,!0)),t.push(new yn("metadata","customMetadata",!0)),Ud=t,Ud}function vL(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new $n(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function _L(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return vL(r,t),r}function Ak(t,e,n){const r=Ck(e);return r===null?null:_L(t,r,n)}function bL(t,e,n,r){const i=Ck(e);if(i===null||!Dx(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const g=t.bucket,x=t.fullPath,v="/b/"+l(g)+"/o/"+l(x),P=tf(v,n,r),E=Tk({alt:"media",token:f});return P+E})[0]}function jL(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Ox{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t){if(!t)throw Lx()}function NL(t,e){function n(r,i){const o=Ak(t,i,e);return Rk(o!==null),o}return n}function kL(t,e){function n(r,i){const o=Ak(t,i,e);return Rk(o!==null),bL(o,i,t.host,t._protocol)}return n}function Lk(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=O5():i=M5():n.getStatus()===402?i=D5(t.bucket):n.getStatus()===403?i=V5(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Dk(t){const e=Lk(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=L5(t.path)),o.serverResponse=i.serverResponse,o}return n}function TL(t,e,n){const r=e.fullServerUrl(),i=tf(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,h=new Ox(i,o,kL(t,n),l);return h.errorHandler=Dk(e),h}function EL(t,e){const n=e.fullServerUrl(),r=tf(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function l(m,f){}const h=new Ox(r,i,l,o);return h.successCodes=[200,204],h.errorHandler=Dk(e),h}function SL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function PL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=SL(null,e)),r}function CL(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function h(){let I="";for(let W=0;W<2;W++)I=I+Math.random().toString().slice(2);return I}const m=h();l["Content-Type"]="multipart/related; boundary="+m;const f=PL(e,r,i),g=jL(f,n),x="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+m+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+m+"--",P=gi.getBlob(x,r,v);if(P===null)throw H5();const E={name:f.fullPath},S=tf(o,t.host,t._protocol),M="POST",j=t.maxUploadRetryTime,T=new Ox(S,M,NL(t,n),j);return T.urlParams=E,T.headers=l,T.body=P.uploadData(),T.errorHandler=Lk(e),T}class zL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=za.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=za.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=za.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw dc("cannot .send() more than once");if(Ji(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class IL extends zL{initXhr(){this.xhr_.responseType="text"}}function Vx(){return new IL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n){this._service=e,n instanceof $n?this._location=n:this._location=$n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new qa(e,n)}get root(){const e=new $n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zk(this._location.path)}get storage(){return this._service}get parent(){const e=gL(this._location.path);if(e===null)return null;const n=new $n(this._location.bucket,e);return new qa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw K5(e)}}function AL(t,e,n){t._throwIfRoot("uploadBytes");const r=CL(t.storage,t._location,Ik(),new gi(e,!0),n);return t.storage.makeRequestWithTokens(r,Vx).then(i=>({metadata:i,ref:t}))}function RL(t){t._throwIfRoot("getDownloadURL");const e=TL(t.storage,t._location,Ik());return t.storage.makeRequestWithTokens(e,Vx).then(n=>{if(n===null)throw q5();return n})}function LL(t){t._throwIfRoot("deleteObject");const e=EL(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Vx)}function DL(t,e){const n=yL(t._location.path,e),r=new $n(t._location.bucket,n);return new qa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){return/^[A-Za-z]+:\/\//.test(t)}function OL(t,e){return new qa(t,e)}function Mk(t,e){if(t instanceof Ux){const n=t;if(n._bucket==null)throw $5();const r=new qa(n,n._bucket);return e!=null?Mk(r,e):r}else return e!==void 0?DL(t,e):t}function VL(t,e){if(e&&ML(e)){if(t instanceof Ux)return OL(t,e);throw Rg("To use ref(service, url), the first argument must be a Storage instance.")}else return Mk(t,e)}function f_(t,e){const n=e==null?void 0:e[Nk];return n==null?null:$n.makeFromBucketSpec(n,t)}function UL(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ji(e);i&&(Oy(`https://${t.host}/b`),Vy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:sN(o,t.app.options.projectId))}class Ux{constructor(e,n,r,i,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=jk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A5,this._maxUploadRetryTime=R5,this._requests=new Set,i!=null?this._bucket=$n.makeFromBucketSpec(i,this._host):this._bucket=f_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,e):this._bucket=f_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){m_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){m_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qa(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new G5(kk());{const l=aL(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const p_="@firebase/storage",g_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="storage";function Vk(t,e,n){return t=Ye(t),AL(t,e,n)}function Uk(t){return t=Ye(t),RL(t)}function BL(t){return t=Ye(t),LL(t)}function Bx(t,e){return t=Ye(t),VL(t,e)}function FL(t=Fy(),e){t=Ye(t);const r=Cm(t,Ok).getImmediate({identifier:e}),i=tN("storage");return i&&WL(r,...i),r}function WL(t,e,n,r={}){UL(t,e,n,r)}function $L(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ux(n,r,i,e,Qa)}function HL(){Ua(new Mi(Ok,$L,"PUBLIC").setMultipleInstances(!0)),Kr(p_,g_,""),Kr(p_,g_,"esm2020")}HL();const qL={apiKey:"AIzaSyCBgcl8j_uJDVMpcNFEQvW-EqnshPiW2n8",authDomain:"tomyhomeapp-b7bf1.firebaseapp.com",projectId:"tomyhomeapp-b7bf1",storageBucket:"tomyhomeapp-b7bf1.firebasestorage.app",messagingSenderId:"1034110443870",appId:"1:1034110443870:web:1aa986bfe6fdf770e62fcf",measurementId:"G-Y5P06F4581"},Fx=oN(qL),Hr=yA(Fx),we=y5(Fx),Wx=FL(Fx),ZL=({service:t})=>s.jsxs(be,{to:`/uslugodawcy/${t.slug}`,className:"block bg-white rounded-2xl shadow-sm p-6 text-center hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-r from-primary/10 to-secondary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:t.icon})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:t.name}),t.price>0?s.jsxs("p",{className:"text-sm text-gray-500",children:["od ",t.price," z"]}):s.jsx("p",{className:"text-sm text-gray-500",children:"Zobacz wszystkie"})]});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:h="",children:m,...f},g)=>C.createElement("svg",{ref:g,...KL,width:i,height:i,stroke:r,strokeWidth:l?Number(o)*24/Number(i):o,className:["lucide",`lucide-${GL(t)}`,h].join(" "),...f},[...e.map(([x,v])=>C.createElement(x,v)),...Array.isArray(m)?m:[m]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=le("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=le("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=le("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=le("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=le("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=le("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=le("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=le("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=le("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=le("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=le("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=le("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=le("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=le("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=le("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=le("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=le("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=le("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=le("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=le("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=le("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=le("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=le("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=le("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=le("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=le("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=le("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=le("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=le("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=le("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=le("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=le("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=le("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),k6=({review:t})=>{const[e,n]=C.useState(t.helpful),[r,i]=C.useState(!1),o=()=>{r||(n(l=>l+1),i(!0))};return s.jsxs("div",{className:"card card-hover p-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-full ${t.gradientClass} flex items-center justify-center text-white font-bold text-lg`,children:t.avatar}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:t.author}),s.jsxs("p",{className:"text-sm text-gray-500",children:[t.service,"  ",t.date]})]})]}),s.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((l,h)=>s.jsx(jr,{className:`w-4 h-4 ${h<t.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},h))}),s.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:t.content}),s.jsxs("button",{onClick:o,disabled:r,className:`flex items-center gap-2 text-sm transition-colors ${r?"text-accent cursor-default":"text-gray-500 hover:text-accent"}`,children:[s.jsx(y6,{className:"w-4 h-4"}),s.jsxs("span",{children:["Pomocne (",e,")"]})]})]})},T6=({target:t,label:e,suffix:n=""})=>{const[r,i]=C.useState(0),[o,l]=C.useState(!1),h=C.useRef(null);C.useEffect(()=>{const f=new IntersectionObserver(g=>{g[0].isIntersecting&&!o&&(l(!0),m())},{threshold:.5});return h.current&&f.observe(h.current),()=>f.disconnect()},[o,t]);const m=()=>{const x=t/60;let v=0;const P=setInterval(()=>{v+=x,v>=t?(i(t),clearInterval(P)):i(Math.floor(v))},2e3/60)};return s.jsxs("div",{ref:h,className:"text-center",children:[s.jsxs("div",{className:"text-4xl lg:text-5xl font-black text-white mb-2",children:[r.toLocaleString(),n]}),s.jsx("div",{className:"text-white/80",children:e})]})},E6=()=>{const t=[{target:1e4,label:"Zadowolonych klientw",suffix:"+"},{target:500,label:"Specjalistw",suffix:"+"},{target:50,label:"Miast w Polsce",suffix:""},{target:98,label:"Pozytywnych opinii",suffix:"%"}];return s.jsx("section",{className:"py-20 bg-gradient-to-r from-primary to-secondary",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:t.map((e,n)=>s.jsx(T6,{target:e.target,label:e.label,suffix:e.suffix},n))})})})},S6=()=>{const{showToast:t}=mn(),{isAuthenticated:e,user:n}=_t(),r=Pr(),i=C.useRef(null),o=[{id:"fryzjer",name:"Fryzjer",icon:"",price:80,slug:"fryzjer"},{id:"tatuaze",name:"Tatuae",icon:"",price:200,slug:"tatuaze"},{id:"paznokcie",name:"Paznokcie",icon:"",price:60,slug:"paznokcie"},{id:"masaz",name:"Masa",icon:"",price:120,slug:"masaz"},{id:"makijaz",name:"Makija",icon:"",price:100,slug:"makijaz"},{id:"twarz",name:"Twarz",icon:"",price:120,slug:"twarz"},{id:"inne",name:"Inne usugi",icon:"",price:0,slug:"inne"}],l=[{id:1,author:"Anna Kowalska",avatar:"A",service:"Fryzjer",date:"2 dni temu",rating:5,content:"wietna usuga! Fryzjer przyjecha punktualnie, by bardzo profesjonalny. Efekt przekroczy moje oczekiwania. Na pewno skorzystam ponownie!",helpful:23,gradientClass:"bg-gradient-to-r from-primary to-secondary"},{id:2,author:"Krzysztof Chjan",avatar:"K",service:"Masa",date:"Tydzie temu",rating:5,content:"Bardzo wygodne rozwizanie. Masaysta przywiz profesjonalny st, wszystko przebiego sprawnie. Polecam kademu!",helpful:18,gradientClass:"bg-gradient-to-r from-pink-500 to-rose-500"},{id:3,author:"Magdalena Winiewska",avatar:"M",service:"Manicure",date:"3 dni temu",rating:5,content:"Profesjonalny manicure w domu - wietny efekt, przystpna cena. Oszczdno czasu nieoceniona!",helpful:31,gradientClass:"bg-gradient-to-r from-purple-500 to-indigo-500"}],h=[{step:1,title:"Wybierz usug",description:"Przegldaj kategorie i wybierz specjalist wedug opinii i ceny",gradient:"from-red-400 to-orange-500"},{step:2,title:"Zarezerwuj termin",description:"Wybierz dogodny termin i potwierd rezerwacj online",gradient:"from-primary to-secondary"},{step:3,title:"Specjalista przyjeda",description:"Profesjonalista przyjedzie pod wskazany adres z caym sprztem",gradient:"from-pink-400 to-rose-500"}],m=()=>{var f;(f=i.current)==null||f.scrollIntoView({behavior:"smooth"})};return C.useEffect(()=>{const f=new IntersectionObserver(g=>{g.forEach(x=>{x.isIntersecting&&(x.target.classList.add("opacity-100","translate-y-0"),x.target.classList.remove("opacity-0","translate-y-10"))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return document.querySelectorAll(".fade-in-scroll").forEach(g=>{f.observe(g)}),()=>f.disconnect()},[]),s.jsxs("div",{children:[s.jsx("section",{className:"py-20 lg:py-32 animate-fade-in",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[s.jsxs("div",{className:"animate-slide-in-left",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-accent/10 text-accent px-4 py-2 rounded-full text-sm font-semibold mb-6 animate-bounce-slow",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Nowy w Twojej okolicy"})]}),s.jsxs("h1",{className:"text-4xl lg:text-6xl font-black leading-tight mb-6",children:["Zamw usug i nie tylko",s.jsx("br",{}),s.jsx("span",{className:"gradient-text",children:"Usugi z dojazdem do domu"})]}),s.jsx("p",{className:"text-gray-600 text-lg mb-8 leading-relaxed",children:"Specjalici przyjad pod wskazany adres  fryzjer, manicure, tatuaysta, masa i wicej."}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("button",{onClick:()=>{e?m():r("/auth?mode=register&type=client")},className:"btn btn-cta animate-pulse-slow group",children:[s.jsx("span",{children:"Zarezerwuj usug"}),s.jsx("span",{className:"transition-transform group-hover:translate-x-1",children:""})]}),(!e||(n==null?void 0:n.accountType)==="provider")&&s.jsxs(be,{to:e?"/biznes/dodaj-usluge":"/auth?mode=register&type=provider",className:"btn btn-ghost border-2 border-primary text-primary hover:bg-primary hover:text-white group",children:[s.jsx("span",{children:" Dodaj usug"}),s.jsx("span",{className:"transition-transform group-hover:translate-x-1",children:""})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-6 mt-8 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-500",children:""})," Bez opat za dojazd"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-500",children:""})," Sprawdzeni specjalici"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-500",children:""})," Gwarancja satysfakcji"]})]})]}),s.jsx("div",{className:"animate-slide-in-right",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-3xl blur-3xl"}),s.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl overflow-hidden",children:[s.jsx("img",{src:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=600&h=400&fit=crop",alt:"Profesjonalna usuga fryzjerska",className:"w-full h-64 lg:h-80 object-cover"}),s.jsxs("div",{className:"p-6 flex gap-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"10K+"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Zadowolonych klientw"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"500+"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Specjalistw"})]})]})]})]})})]})})}),s.jsx("section",{id:"services",ref:i,className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"USUGI"}),s.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Popularne usugi"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Wybierz spord szerokiej gamy profesjonalnych usug"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-4",children:o.map(f=>s.jsx(ZL,{service:f},f.id))})]})}),s.jsx("section",{id:"how",className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"JAK TO DZIAA"}),s.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Proste 3 kroki"}),s.jsx("p",{className:"text-gray-600",children:"Od rezerwacji do realizacji usugi"})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:h.map((f,g)=>s.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",style:{animationDelay:`${g*100}ms`},children:[s.jsxs("div",{className:"text-sm font-bold text-gray-400 mb-4",children:["Krok ",f.step]}),s.jsx("div",{className:`w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-r ${f.gradient} flex items-center justify-center`,children:s.jsx("span",{className:"text-white text-2xl",children:""})}),s.jsx("h3",{className:"text-xl font-bold mb-3",children:f.title}),s.jsx("p",{className:"text-gray-600",children:f.description})]},f.step))})]})}),s.jsx("section",{id:"reviews",className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:"OPINIE"}),s.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Co mwi nasi klienci"}),s.jsx("p",{className:"text-gray-600",children:"Ponad 10 000 zadowolonych uytkownikw"})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:l.map(f=>s.jsx(k6,{review:f},f.id))})]})}),s.jsx(E6,{}),s.jsx("section",{className:"py-20 fade-in-scroll opacity-0 translate-y-10 transition-all duration-700",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-3xl p-12 lg:p-16 text-center text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(255,255,255,0.1),transparent_70%)]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("span",{className:"inline-block bg-white/20 px-4 py-2 rounded-full text-sm font-bold tracking-wider mb-6",children:" ZACZNIJ JU DZI"}),s.jsx("h2",{className:"text-3xl lg:text-5xl font-black mb-4",children:"Gotowy, by zamwi?"}),s.jsx("p",{className:"text-lg opacity-95 max-w-xl mx-auto mb-8",children:"Docz do tysicy zadowolonych klientw. Pierwsze zamwienie z rabatem 20%!"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[s.jsxs("button",{onClick:()=>{m(),t("Wybierz usug powyej, aby rozpocz rezerwacj","info")},className:"btn bg-white text-gray-900 font-bold shadow-lg hover:shadow-xl hover:-translate-y-1",children:[s.jsx("span",{children:"Zarezerwuj usug"}),s.jsx("span",{children:""})]}),s.jsx("button",{className:"btn border-2 border-white/30 text-white hover:bg-white/10",children:"Dowiedz si wicej"})]}),s.jsxs("div",{className:"flex flex-wrap gap-6 justify-center text-sm opacity-90",children:[s.jsx("span",{children:" Bez ukrytych kosztw"}),s.jsx("span",{children:" Anuluj bezpatnie"}),s.jsx("span",{children:" Patno po usudze"})]})]})]})})})]})},Og=[{code:"+48",flag:"",name:"Polska",minDigits:9,maxDigits:9},{code:"+49",flag:"",name:"Niemcy",minDigits:10,maxDigits:11},{code:"+33",flag:"",name:"Francja",minDigits:9,maxDigits:9},{code:"+34",flag:"",name:"Hiszpania",minDigits:9,maxDigits:9},{code:"+39",flag:"",name:"Wochy",minDigits:9,maxDigits:10},{code:"+44",flag:"",name:"Wielka Brytania",minDigits:10,maxDigits:10},{code:"+31",flag:"",name:"Holandia",minDigits:9,maxDigits:9},{code:"+32",flag:"",name:"Belgia",minDigits:8,maxDigits:9},{code:"+420",flag:"",name:"Czechy",minDigits:9,maxDigits:9},{code:"+421",flag:"",name:"Sowacja",minDigits:9,maxDigits:9},{code:"+43",flag:"",name:"Austria",minDigits:10,maxDigits:13},{code:"+41",flag:"",name:"Szwajcaria",minDigits:9,maxDigits:9},{code:"+351",flag:"",name:"Portugalia",minDigits:9,maxDigits:9},{code:"+353",flag:"",name:"Irlandia",minDigits:9,maxDigits:9},{code:"+352",flag:"",name:"Luksemburg",minDigits:8,maxDigits:9},{code:"+45",flag:"",name:"Dania",minDigits:8,maxDigits:8},{code:"+46",flag:"",name:"Szwecja",minDigits:9,maxDigits:9},{code:"+47",flag:"",name:"Norwegia",minDigits:8,maxDigits:8},{code:"+358",flag:"",name:"Finlandia",minDigits:9,maxDigits:10},{code:"+354",flag:"",name:"Islandia",minDigits:7,maxDigits:7},{code:"+30",flag:"",name:"Grecja",minDigits:10,maxDigits:10},{code:"+356",flag:"",name:"Malta",minDigits:8,maxDigits:8},{code:"+357",flag:"",name:"Cypr",minDigits:8,maxDigits:8},{code:"+36",flag:"",name:"Wgry",minDigits:9,maxDigits:9},{code:"+40",flag:"",name:"Rumunia",minDigits:9,maxDigits:9},{code:"+359",flag:"",name:"Bugaria",minDigits:9,maxDigits:9},{code:"+385",flag:"",name:"Chorwacja",minDigits:9,maxDigits:9},{code:"+386",flag:"",name:"Sowenia",minDigits:8,maxDigits:8},{code:"+381",flag:"",name:"Serbia",minDigits:9,maxDigits:9},{code:"+382",flag:"",name:"Czarnogra",minDigits:8,maxDigits:8},{code:"+383",flag:"",name:"Kosowo",minDigits:8,maxDigits:8},{code:"+389",flag:"",name:"Macedonia Pn.",minDigits:8,maxDigits:8},{code:"+380",flag:"",name:"Ukraina",minDigits:9,maxDigits:9},{code:"+375",flag:"",name:"Biaoru",minDigits:9,maxDigits:9},{code:"+7",flag:"",name:"Rosja",minDigits:10,maxDigits:10}],Kk=t=>Og.find(e=>e.code===t)||Og[0],qx=(t,e)=>{const n=Kk(t),r=e.replace(/\D/g,"");return r?r.length<n.minDigits?{valid:!1,message:`Numer dla ${n.name} musi mie min. ${n.minDigits} cyfr`}:r.length>n.maxDigits?{valid:!1,message:`Numer dla ${n.name} moe mie max. ${n.maxDigits} cyfr`}:{valid:!0,message:""}:{valid:!1,message:"Numer telefonu jest wymagany"}},Zx=({value:t,countryCode:e,onChange:n,className:r="",error:i})=>{const[o,l]=C.useState(!1),[h,m]=C.useState(""),f=C.useRef(null),g=C.useRef(null),x=Kk(e);C.useEffect(()=>{const M=j=>{f.current&&!f.current.contains(j.target)&&(l(!1),m(""))};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]);const v=Og.filter(M=>M.name.toLowerCase().includes(h.toLowerCase())||M.code.includes(h)),P=M=>{var j;n(t,M.code),l(!1),m(""),(j=g.current)==null||j.focus()},E=M=>{const j=M.target.value.replace(/[^\d\s]/g,"");n(j,e)},S=()=>`${x.minDigits===x.maxDigits?x.minDigits:`${x.minDigits}-${x.maxDigits}`} cyfr`;return s.jsxs("div",{className:`relative ${r}`,ref:f,children:[s.jsxs("div",{className:`flex rounded-xl border-2 ${i?"border-red-300":"border-gray-200"} focus-within:border-primary overflow-hidden`,children:[s.jsxs("button",{type:"button",onClick:()=>l(!o),className:"flex items-center gap-1 px-3 py-3 bg-gray-50 hover:bg-gray-100 border-r border-gray-200 transition-colors min-w-[100px]",children:[s.jsx("span",{className:"text-xl",children:x.flag}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:x.code}),s.jsx(im,{className:`w-4 h-4 text-gray-500 transition-transform ${o?"rotate-180":""}`})]}),s.jsx("input",{ref:g,type:"tel",value:t,onChange:E,placeholder:S(),maxLength:x.maxDigits+3,className:"flex-1 px-4 py-3 focus:outline-none"})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.name,": ",x.minDigits===x.maxDigits?`${x.minDigits} cyfr`:`${x.minDigits}-${x.maxDigits} cyfr`]}),i&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:i}),o&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-primary/30 rounded-xl shadow-2xl max-h-80 overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-gray-100",children:s.jsx("input",{type:"text",value:h,onChange:M=>m(M.target.value),placeholder:"Szukaj kraju...",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-primary",autoFocus:!0})}),s.jsx("div",{className:"overflow-y-auto max-h-60",children:v.map(M=>s.jsxs("button",{type:"button",onClick:()=>P(M),className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-primary/10 transition-colors text-left ${M.code===e?"bg-primary/5":""}`,children:[s.jsx("span",{className:"text-2xl",children:M.flag}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:M.name}),s.jsx("div",{className:"text-xs text-gray-500",children:M.code})]}),M.code===e&&s.jsx(Tt,{className:"w-5 h-5 text-primary"})]},M.code))})]})]})},P6=()=>{const t=Pr(),[e]=Qj(),{isAuthenticated:n}=_t(),{showToast:r}=mn(),[i,o]=C.useState("select"),[l,h]=C.useState({email:"",password:""}),[m,f]=C.useState(!1),[g,x]=C.useState({email:"",username:"",phone:"",phoneCountryCode:"+48",password:"",confirmPassword:"",businessName:"",terms:!1,accountType:"client"}),[v,P]=C.useState(!1),[E,S]=C.useState(!1),[M,j]=C.useState("");C.useEffect(()=>{const D=e.get("mode"),O=e.get("type");D==="login"?o("login"):D==="register"&&(O==="provider"?(o("register-provider"),x(N=>({...N,accountType:"provider"}))):(o("register-client"),x(N=>({...N,accountType:"client"}))))},[e]),C.useEffect(()=>{if(n){const D=e.get("redirect");t(D||"/")}},[n,t,e]);const T=async D=>{D.preventDefault(),j(""),S(!0);try{await Jz(Hr,l.email,l.password),r("Logowanie pomylne! Witaj z powrotem!","success");const O=e.get("redirect");t(O||"/")}catch(O){console.error("Login error:",O);let N="Nieprawidowy email lub haso";switch(O.code){case"auth/user-not-found":N="Nie znaleziono uytkownika z tym adresem email";break;case"auth/wrong-password":N="Nieprawidowe haso";break;case"auth/invalid-credential":N="Nieprawidowy email lub haso";break;case"auth/too-many-requests":N="Zbyt wiele nieudanych prb. Sprbuj ponownie pniej";break;case"auth/user-disabled":N="To konto zostao zablokowane";break;case"auth/invalid-email":N="Nieprawidowy format adresu email";break}j(N),r("Bd logowania","error")}finally{S(!1)}},I=async D=>{if(D.preventDefault(),j(""),!g.terms){j("Musisz zaakceptowa regulamin!");return}const O=g.username.trim().split(/\s+/);if(O.length<2||O.some(b=>b.length<2)){j("Podaj pene imi i nazwisko (np. Jan Kowalski)");return}const N=qx(g.phoneCountryCode,g.phone);if(!N.valid){j(N.message);return}if(g.password.length<8){j("Haso musi mie co najmniej 8 znakw");return}if(!/[A-Z]/.test(g.password)){j("Haso musi zawiera co najmniej jedn wielk liter");return}if(!/[a-z]/.test(g.password)){j("Haso musi zawiera co najmniej jedn ma liter");return}if(!/[0-9]/.test(g.password)){j("Haso musi zawiera co najmniej jedn cyfr");return}if(g.password!==g.confirmPassword){j("Hasa nie s takie same");return}S(!0);try{const R=(await Yz(Hr,g.email,g.password)).user;await pg(R,{displayName:g.username});const U=g.phone.replace(/\D/g,""),B=`${g.phoneCountryCode} ${U}`;await wl(Ve(we,"users",R.uid),{uid:R.uid,username:g.username,email:g.email,phone:B,accountType:g.accountType,role:"user",businessName:g.businessName||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...g.accountType==="provider"&&{isVerified:!1,rating:0,reviewsCount:0,servicesCount:0}}),r("Konto utworzone pomylnie! Witamy w ToMyHomeApp!","success"),g.accountType==="provider"?t("/biznes/dodaj-usluge"):t("/")}catch(b){console.error("Registration error:",b);let R="Bd podczas rejestracji";switch(b.code){case"auth/email-already-in-use":R="Ten adres email jest ju zajty";break;case"auth/invalid-email":R="Nieprawidowy format adresu email";break;case"auth/weak-password":R="Haso jest zbyt sabe";break;case"auth/operation-not-allowed":R="Rejestracja jest tymczasowo niedostpna";break}j(R),r("Bd rejestracji","error")}finally{S(!1)}};if(i==="select")return s.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:s.jsxs("div",{className:"max-w-lg w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[s.jsx("div",{className:"text-5xl",children:""}),s.jsx("div",{className:"text-5xl",children:""})]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Witaj w ToMyHomeApp"}),s.jsx("p",{className:"text-gray-600",children:"Znajd specjalistw beauty lub oferuj swoje usugi"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsx("button",{onClick:()=>o("login"),className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all mb-6",children:"ZALOGUJ SI"}),s.jsxs("div",{className:"relative my-6",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Nie masz konta? Zarejestruj si jako"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{onClick:()=>{o("register-client"),x(D=>({...D,accountType:"client"}))},className:"w-full py-4 border-2 border-primary text-primary rounded-xl font-bold text-lg hover:bg-primary hover:text-white transition-all flex items-center justify-center gap-3",children:[s.jsx(Mn,{className:"w-6 h-6"}),"DLA KLIENTA"]}),s.jsx("p",{className:"text-center text-sm text-gray-500",children:"Szukasz fryzjera, kosmetyczki lub masaysty?"}),s.jsxs("button",{onClick:()=>{o("register-provider"),x(D=>({...D,accountType:"provider"}))},className:"w-full py-4 border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold text-lg hover:bg-emerald-500 hover:text-white transition-all flex items-center justify-center gap-3",children:[s.jsx(Hi,{className:"w-6 h-6"}),"DLA USUGODAWCY"]}),s.jsx("p",{className:"text-center text-sm text-gray-500",children:"Oferujesz usugi beauty i chcesz zdobywa klientw?"})]})]})]})});if(i==="login")return s.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("button",{onClick:()=>o("select"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[s.jsx(fu,{className:"w-5 h-5"}),"Wr"]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zaloguj si"}),s.jsx("p",{className:"text-gray-600",children:"Wpisz swoje dane logowania"})]}),M&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm flex items-start gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:M})]}),s.jsxs("form",{onSubmit:T,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:l.email,onChange:D=>h({...l,email:D.target.value}),placeholder:"twoj@email.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haso"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:m?"text":"password",value:l.password,onChange:D=>h({...l,password:D.target.value}),placeholder:"",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),s.jsx("button",{type:"button",onClick:()=>f(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?s.jsx(Aa,{className:"w-5 h-5"}):s.jsx(cr,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(be,{to:"/reset-hasla",className:"text-sm text-primary hover:underline",children:"Zapomniae hasa?"})}),s.jsx("button",{type:"submit",disabled:E,className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:E?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-5 h-5 animate-spin mr-2"}),"Logowanie..."]}):"ZALOGUJ SI"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-gray-600",children:["Nie masz konta?"," ",s.jsx("button",{onClick:()=>o("select"),className:"text-primary font-semibold hover:underline",children:"Zarejestruj si"})]})})]})]})});const W=i==="register-provider";return s.jsx("div",{className:"min-h-screen py-12 px-6 flex items-center justify-center",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("button",{onClick:()=>o("select"),className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[s.jsx(fu,{className:"w-5 h-5"}),"Wr"]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${W?"bg-emerald-100":"bg-primary/10"}`,children:W?s.jsx(Hi,{className:"w-8 h-8 text-emerald-600"}):s.jsx(Mn,{className:"w-8 h-8 text-primary"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:W?"Rejestracja usugodawcy":"Rejestracja klienta"}),s.jsx("p",{className:"text-gray-600",children:W?"Docz i zacznij zdobywa klientw":"Za konto i rezerwuj usugi"})]}),s.jsxs("div",{className:`mb-6 p-4 rounded-xl ${W?"bg-emerald-50":"bg-primary/5"}`,children:[s.jsx("p",{className:"font-semibold mb-2 text-sm",children:W?" Korzyci dla usugodawcy:":" Korzyci dla klienta:"}),s.jsx("ul",{className:"text-sm space-y-1",children:W?s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-emerald-500"})," Wasny profil i portfolio"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-emerald-500"})," Zarzdzanie rezerwacjami online"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-emerald-500"})," Dostp do nowych klientw"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-primary"})," atwe rezerwacje online"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-primary"})," Historia wizyt i ulubieni"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-primary"})," Powiadomienia i przypomnienia"]})]})})]}),M&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm flex items-start gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:M})]}),s.jsxs("form",{onSubmit:I,className:"space-y-4",children:[W&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa firmy / salonu"}),s.jsx("input",{type:"text",value:g.businessName,onChange:D=>x({...g,businessName:D.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),s.jsx("input",{type:"text",value:g.username,onChange:D=>x({...g,username:D.target.value}),placeholder:"Jan Kowalski",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:g.email,onChange:D=>x({...g,email:D.target.value}),placeholder:"twoj@email.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numer telefonu"}),s.jsx(Zx,{value:g.phone,countryCode:g.phoneCountryCode,onChange:(D,O)=>x({...g,phone:D,phoneCountryCode:O})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haso"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:v?"text":"password",value:g.password,onChange:D=>x({...g,password:D.target.value}),placeholder:"Wprowad haso",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),s.jsx("button",{type:"button",onClick:()=>P(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:v?s.jsx(Aa,{className:"w-5 h-5"}):s.jsx(cr,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[s.jsxs("p",{className:g.password.length>=8?"text-green-600":"",children:[g.password.length>=8?"":""," Minimum 8 znakw"]}),s.jsxs("p",{className:/[A-Z]/.test(g.password)?"text-green-600":"",children:[/[A-Z]/.test(g.password)?"":""," Co najmniej jedna wielka litera (A-Z)"]}),s.jsxs("p",{className:/[a-z]/.test(g.password)?"text-green-600":"",children:[/[a-z]/.test(g.password)?"":""," Co najmniej jedna maa litera (a-z)"]}),s.jsxs("p",{className:/[0-9]/.test(g.password)?"text-green-600":"",children:[/[0-9]/.test(g.password)?"":""," Co najmniej jedna cyfra (0-9)"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Powtrz haso"}),s.jsx("input",{type:"password",value:g.confirmPassword,onChange:D=>x({...g,confirmPassword:D.target.value}),placeholder:"Powtrz haso",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-primary focus:ring-0 focus:outline-none",required:!0}),g.confirmPassword&&s.jsx("p",{className:`text-xs mt-1 ${g.password===g.confirmPassword?"text-green-600":"text-red-500"}`,children:g.password===g.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",id:"terms",checked:g.terms,onChange:D=>x({...g,terms:D.target.checked}),className:"mt-1 w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600",children:["Akceptuj"," ",s.jsx(be,{to:"/regulamin",className:"text-primary hover:underline",children:"Regulamin"})," ","oraz"," ",s.jsx(be,{to:"/prywatnosc",className:"text-primary hover:underline",children:"Polityk Prywatnoci"})]})]}),s.jsx("button",{type:"submit",disabled:E,className:`w-full py-4 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${W?"bg-gradient-to-r from-emerald-500 to-teal-600":"bg-gradient-to-r from-primary to-secondary"}`,children:E?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-5 h-5 animate-spin mr-2"}),"Rejestracja..."]}):"ZAREJESTRUJ SI"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-gray-600",children:["Masz ju konto?"," ",s.jsx("button",{onClick:()=>o("login"),className:"text-primary font-semibold hover:underline",children:"Zaloguj si"})]})})]})]})})},C6=async t=>{try{const e=Ve(we,"users",t),n=await $i(e);return n.exists()?{uid:n.id,...n.data()}:null}catch(e){throw console.error("Error getting user profile:",e),e}},Gk=async(t,e)=>{try{const n=Ve(we,"users",t),r={};Object.entries(e).forEach(([i,o])=>{o!==void 0&&(r[i]=o)}),Object.keys(r).length>0&&await Kt(n,{...r,updatedAt:C5()}),e.username&&Hr.currentUser&&await pg(Hr.currentUser,{displayName:e.username}),e.avatar&&Hr.currentUser&&await pg(Hr.currentUser,{photoURL:e.avatar})}catch(n){throw console.error("Error updating user profile:",n),n}},z6=async(t,e)=>{try{if(!e.type.startsWith("image/"))throw new Error("Plik musi by obrazem");if(e.size>5*1024*1024)throw new Error("Plik jest za duy (max 5MB)");const n=e.name.split(".").pop(),r=`avatars/${t}_${Date.now()}.${n}`,i=Bx(Wx,r),o=await Vk(i,e),l=await Uk(o.ref);return await Gk(t,{avatar:l}),l}catch(n){throw console.error("Error uploading avatar:",n),n}},I6=async(t,e)=>{try{const n=Hr.currentUser;if(!n||!n.email)throw new Error("Brak zalogowanego uytkownika");if(e.length<8)throw new Error("Haso musi mie co najmniej 8 znakw");if(!/[A-Z]/.test(e))throw new Error("Haso musi zawiera wielk liter");if(!/[a-z]/.test(e))throw new Error("Haso musi zawiera ma liter");if(!/[0-9]/.test(e))throw new Error("Haso musi zawiera cyfr");const r=ea.credential(n.email,t);await RN(n,r),await eI(n,e)}catch(n){throw console.error("Error changing password:",n),n.code==="auth/wrong-password"?new Error("Nieprawidowe obecne haso"):n.code==="auth/weak-password"?new Error("Nowe haso jest za sabe"):n.code==="auth/requires-recent-login"?new Error("Zaloguj si ponownie i sprbuj jeszcze raz"):n}},A6=async t=>{try{const e=Hr.currentUser;if(!e||!e.email)throw new Error("Brak zalogowanego uytkownika");const n=ea.credential(e.email,t);await RN(e,n);try{const r=await C6(e.uid);if(r!=null&&r.avatar&&r.avatar.includes("firebase")){const i=Bx(Wx,r.avatar);await BL(i)}}catch{console.log("Avatar deletion skipped")}await Mu(Ve(we,"users",e.uid)),await aI(e)}catch(e){throw console.error("Error deleting account:",e),e.code==="auth/wrong-password"?new Error("Nieprawidowe haso"):e.code==="auth/requires-recent-login"?new Error("Zaloguj si ponownie i sprbuj jeszcze raz"):e}},R6=()=>{var T;const t=Pr(),{user:e,userData:n,isAuthenticated:r,logout:i}=_t(),{showToast:o}=mn(),[l,h]=C.useState("dashboard"),[m,f]=C.useState(new Date);C.useEffect(()=>{r||t("/auth")},[r,t]);const g=[{id:"dashboard",label:"Panel Gwny",icon:a6},{id:"referral",label:"Pole znajomym",icon:r6},{id:"favorites",label:"Ulubione",icon:vl},{id:"wallet",label:"Portfel",icon:j6},{id:"visits",label:"Moje wizyty",icon:un},{id:"settings",label:"Ustawienia",icon:nf},{id:"help",label:"Pomoc",icon:sl}],x=async()=>{if(window.confirm("Czy na pewno chcesz si wylogowa?"))try{await i(),o("Wylogowano pomylnie","success"),t("/")}catch{o("Bd wylogowania","error")}},v=I=>new Date(I.getFullYear(),I.getMonth()+1,0).getDate(),P=I=>{const W=new Date(I.getFullYear(),I.getMonth(),1).getDay();return W===0?6:W-1},E=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],S=()=>{const I=v(m),W=P(m),D=new Date,O=["Pn","Wt","r","Cz","Pt","Sb","Nd"];return s.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-100 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-100",children:[s.jsx("button",{onClick:()=>f(new Date(m.getFullYear(),m.getMonth()-1)),className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:s.jsx(Hk,{className:"w-4 h-4"})}),s.jsxs("div",{className:"font-bold text-lg",children:[E[m.getMonth()]," ",m.getFullYear()]}),s.jsx("button",{onClick:()=>f(new Date(m.getFullYear(),m.getMonth()+1)),className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:s.jsx(pu,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-2 text-center",children:[O.map(N=>s.jsx("div",{className:"font-semibold text-gray-500 text-sm py-2",children:N},N)),[...Array(W)].map((N,b)=>s.jsx("div",{},`empty-${b}`)),[...Array(I)].map((N,b)=>{const R=b+1,U=R===D.getDate()&&m.getMonth()===D.getMonth()&&m.getFullYear()===D.getFullYear();return s.jsx("div",{className:`py-3 rounded-lg cursor-pointer transition-all hover:scale-110 ${U?"bg-primary text-white font-bold":"bg-gray-50 hover:bg-gray-100"}`,children:R},R)})]})]})},M=()=>{switch(l){case"dashboard":return s.jsxs("div",{children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Witaj z powrotem, ",(e==null?void 0:e.username)||(n==null?void 0:n.username),"!"]}),s.jsx("p",{className:"opacity-90",children:"Mio Ci widzie. Oto Twj panel uytkownika gdzie moesz zarzdza swoim kontem i rezerwacjami."})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"card p-6 text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0"}),s.jsx("div",{className:"text-gray-500",children:"Nadchodzcych wizyt"})]}),s.jsxs("div",{className:"card p-6 text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0"}),s.jsx("div",{className:"text-gray-500",children:"Ulubionych miejsc"})]}),s.jsxs("div",{className:"card p-6 text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:"0 z"}),s.jsx("div",{className:"text-gray-500",children:"W portfelu"})]})]})]});case"referral":return s.jsxs("div",{children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Zapraszaj i zarabiaj!"}),s.jsxs("p",{className:"text-lg opacity-95",children:["Kady polecony znajomy to ",s.jsx("strong",{children:"50 z"})," na Twoje konto!"]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-8",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"Twj unikalny link:"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("input",{type:"text",readOnly:!0,value:`https://tomyhomeapp.pl/ref/${(e==null?void 0:e.id)||"user"}`,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl bg-white"}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`https://tomyhomeapp.pl/ref/${(e==null?void 0:e.id)||"user"}`),o("Link skopiowany!","success")},className:"btn btn-primary",children:"Kopiuj"})]})]})]});case"favorites":return s.jsxs("div",{className:"text-center py-16",children:[s.jsx(vl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Nie masz jeszcze ulubionych miejsc."})]});case"wallet":return s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-400 text-white rounded-2xl p-8",children:[s.jsx("h2",{className:"text-xl mb-2",children:"Dostpne rodki"}),s.jsx("div",{className:"text-5xl font-bold mb-6",children:"0.00 z"}),s.jsx("button",{onClick:()=>o("Funkcja w budowie","info"),className:"btn bg-white text-emerald-600 font-bold",children:"Doaduj"})]});case"visits":return s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"Kalendarz wizyt"}),S()]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"Nadchodzce wizyty"}),s.jsx("p",{className:"text-gray-500",children:"Brak nadchodzcych wizyt."})]})]});case"settings":return s.jsx(j,{});case"help":return s.jsxs("div",{className:"card p-8",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Centrum Pomocy"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Masz pytania? Skontaktuj si z nami!"}),s.jsx("p",{className:"text-primary font-semibold",children:"pomoc@tomyhomeapp.pl"})]});default:return null}},j=()=>{const I=C.useRef(null),D=(Ne=>{if(!Ne)return{countryCode:"+48",number:""};const Je=Ne.match(/^(\+\d{1,3})\s?(.*)$/);return Je?{countryCode:Je[1],number:Je[2]}:{countryCode:"+48",number:Ne}})((n==null?void 0:n.phone)||(e==null?void 0:e.phone)),[O,N]=C.useState({username:(n==null?void 0:n.username)||(e==null?void 0:e.username)||"",phone:D.number,phoneCountryCode:D.countryCode,businessName:(n==null?void 0:n.businessName)||""}),[b,R]=C.useState((n==null?void 0:n.avatar)||(e==null?void 0:e.avatar)||""),[U,B]=C.useState(!1),[H,A]=C.useState(!1),[me,ue]=C.useState(!1),[ce,ne]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[F,Y]=C.useState(!1),[z,G]=C.useState(!1),[J,fe]=C.useState(!1),X=async Ne=>{var St;const Je=(St=Ne.target.files)==null?void 0:St[0];if(!(!Je||!(e!=null&&e.id))){A(!0);try{const ee=await z6(e.id,Je);R(ee),o("Zdjcie zostao zmienione!","success")}catch(ee){o(ee.message||"Bd przesyania zdjcia","error")}finally{A(!1)}}},se=async Ne=>{Ne.preventDefault();const Je=O.username.trim().split(/\s+/);if(Je.length<2||Je.some(ee=>ee.length<2)){o("Podaj pene imi i nazwisko (np. Jan Kowalski)","error");return}const St=qx(O.phoneCountryCode,O.phone);if(!St.valid){o(St.message,"error");return}if(e!=null&&e.id){B(!0);try{const ee=`${O.phoneCountryCode} ${O.phone.replace(/\D/g,"")}`,_e={username:O.username,phone:ee};O.businessName&&O.businessName.trim()&&(_e.businessName=O.businessName.trim()),await Gk(e.id,_e),o("Zmiany zostay zapisane!","success")}catch(ee){o(ee.message||"Bd zapisywania zmian","error")}finally{B(!1)}}},he=async Ne=>{if(Ne.preventDefault(),ce.newPassword!==ce.confirmPassword){o("Hasa nie s zgodne","error");return}if(ce.newPassword.length<8){o("Haso musi mie co najmniej 8 znakw","error");return}fe(!0);try{await I6(ce.currentPassword,ce.newPassword),o("Haso zostao zmienione!","success"),ue(!1),ne({currentPassword:"",newPassword:"",confirmPassword:""})}catch(Je){o(Je.message||"Bd zmiany hasa","error")}finally{fe(!1)}},Be=async()=>{const Ne=window.prompt("Aby usun konto, wpisz swoje haso:");if(Ne!==null){if(!Ne||Ne.length<8){o("Nieprawidowe haso","error");return}if(window.confirm("UWAGA: Czy na pewno chcesz usun swoje konto? Ta operacja jest nieodwracalna!"))try{await A6(Ne),o("Konto zostao usunite","info"),t("/")}catch(Je){o(Je.message||"Bd usuwania konta","error")}}};return s.jsxs("div",{className:"max-w-2xl space-y-6",children:[s.jsxs("div",{className:"card p-8",children:[s.jsx("h3",{className:"font-bold text-lg mb-6",children:"Zdjcie profilowe"}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-3xl",children:H?s.jsx(tt,{className:"w-8 h-8 animate-spin"}):b?s.jsx("img",{src:b,alt:"Avatar",className:"w-full h-full object-cover"}):""}),s.jsx("button",{onClick:()=>{var Ne;return(Ne=I.current)==null?void 0:Ne.click()},disabled:H,className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-100 transition-colors disabled:opacity-50",children:s.jsx(XL,{className:"w-4 h-4 text-gray-600"})}),s.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:X,className:"hidden"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Kliknij ikon aparatu aby zmieni zdjcie."}),s.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Max 5MB, formaty: JPG, PNG, GIF"})]})]})]}),s.jsxs("div",{className:"card p-8",children:[s.jsx("h3",{className:"font-bold text-lg mb-6",children:"Dane osobowe"}),s.jsxs("form",{onSubmit:se,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Imi i Nazwisko"}),s.jsx("input",{type:"text",value:O.username,onChange:Ne=>N({...O,username:Ne.target.value}),placeholder:"Jan Kowalski",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wpisz imi i nazwisko"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:(n==null?void 0:n.email)||(e==null?void 0:e.email)||"",readOnly:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-500"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email nie moe by zmieniony"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Telefon"}),s.jsx(Zx,{value:O.phone,countryCode:O.phoneCountryCode,onChange:(Ne,Je)=>{N({...O,phone:Ne,phoneCountryCode:Je})}})]}),((n==null?void 0:n.accountType)==="provider"||(e==null?void 0:e.accountType)==="provider")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Nazwa firmy / salonu"}),s.jsx("input",{type:"text",value:O.businessName,onChange:Ne=>N({...O,businessName:Ne.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none"})]}),s.jsx("button",{type:"submit",disabled:U,className:"btn btn-primary mt-4 flex items-center gap-2",children:U?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_i,{className:"w-5 h-5"}),"Zapisz zmiany"]})})]})]}),s.jsxs("div",{className:"card p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-lg",children:"Zmiana hasa"}),s.jsx("button",{onClick:()=>ue(!me),className:"text-primary hover:underline text-sm font-medium",children:me?"Anuluj":"Zmie haso"})]}),me?s.jsxs("form",{onSubmit:he,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Obecne haso"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:F?"text":"password",value:ce.currentPassword,onChange:Ne=>ne({...ce,currentPassword:Ne.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),s.jsx("button",{type:"button",onClick:()=>Y(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:F?s.jsx(Aa,{className:"w-5 h-5"}):s.jsx(cr,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Nowe haso"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:z?"text":"password",value:ce.newPassword,onChange:Ne=>ne({...ce,newPassword:Ne.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),s.jsx("button",{type:"button",onClick:()=>G(!z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:z?s.jsx(Aa,{className:"w-5 h-5"}):s.jsx(cr,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[s.jsxs("p",{className:ce.newPassword.length>=8?"text-green-600":"",children:[ce.newPassword.length>=8?"":""," Minimum 8 znakw"]}),s.jsxs("p",{className:/[A-Z]/.test(ce.newPassword)?"text-green-600":"",children:[/[A-Z]/.test(ce.newPassword)?"":""," Wielka litera"]}),s.jsxs("p",{className:/[a-z]/.test(ce.newPassword)?"text-green-600":"",children:[/[a-z]/.test(ce.newPassword)?"":""," Maa litera"]}),s.jsxs("p",{className:/[0-9]/.test(ce.newPassword)?"text-green-600":"",children:[/[0-9]/.test(ce.newPassword)?"":""," Cyfra"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-500 mb-2",children:"Potwierd nowe haso"}),s.jsx("input",{type:"password",value:ce.confirmPassword,onChange:Ne=>ne({...ce,confirmPassword:Ne.target.value}),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 focus:outline-none",required:!0}),ce.confirmPassword&&s.jsx("p",{className:`text-xs mt-1 ${ce.newPassword===ce.confirmPassword?"text-green-600":"text-red-500"}`,children:ce.newPassword===ce.confirmPassword?" Hasa s zgodne":" Hasa nie s zgodne"})]}),s.jsx("button",{type:"submit",disabled:J,className:"btn btn-primary flex items-center gap-2",children:J?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-5 h-5 animate-spin"}),"Zmieniam..."]}):s.jsxs(s.Fragment,{children:[s.jsx(js,{className:"w-5 h-5"}),"Zmie haso"]})})]}):s.jsx("p",{className:"text-gray-500 text-sm",children:"Zalecamy regularn zmian hasa dla bezpieczestwa konta."})]}),s.jsxs("div",{className:"card p-8 border-2 border-red-200 bg-red-50",children:[s.jsx("h3",{className:"font-bold text-lg text-red-600 mb-4",children:"Strefa zagroenia"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Po usuniciu konta wszystkie Twoje dane, rezerwacje i historia zostan trwale usunite. Ta operacja jest nieodwracalna."}),s.jsx("button",{onClick:Be,className:"px-4 py-2 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-colors",children:"Usu moje konto"})]})]})};return r?s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[s.jsx("div",{className:"lg:hidden mb-6 overflow-x-auto",children:s.jsxs("div",{className:"flex gap-2 pb-2 min-w-max",children:[g.map(I=>s.jsxs("button",{onClick:()=>h(I.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all ${l===I.id?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.jsx(I.icon,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:I.label})]},I.id)),s.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap bg-red-50 text-red-600 hover:bg-red-100 transition-all",children:[s.jsx(yu,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Wyloguj"})]})]})}),s.jsxs("div",{className:"flex gap-8",children:[s.jsx("aside",{className:"w-72 shrink-0 hidden lg:block",children:s.jsxs("div",{className:"card p-6 sticky top-24",children:[s.jsxs("div",{className:"text-center mb-6 pb-6 border-b border-gray-100",children:[s.jsx("div",{className:"relative inline-block",children:s.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-3xl",children:n!=null&&n.avatar||e!=null&&e.avatar?s.jsx("img",{src:(n==null?void 0:n.avatar)||(e==null?void 0:e.avatar),alt:"Avatar",className:"w-full h-full object-cover"}):""})}),s.jsx("div",{className:"font-bold text-lg mt-3",children:(n==null?void 0:n.username)||(e==null?void 0:e.username)}),s.jsx("div",{className:"text-gray-500 text-sm",children:(n==null?void 0:n.phone)||(e==null?void 0:e.phone)}),((n==null?void 0:n.accountType)==="provider"||(e==null?void 0:e.accountType)==="provider")&&s.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full",children:"Usugodawca"})]}),s.jsxs("nav",{className:"space-y-1",children:[g.map(I=>s.jsxs("button",{onClick:()=>h(I.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${l===I.id?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(I.icon,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:I.label})]},I.id)),s.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 transition-all",children:[s.jsx(yu,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Wyloguj"})]})]})]})}),s.jsxs("main",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:((T=g.find(I=>I.id===l))==null?void 0:T.label)||"Panel Gwny"}),s.jsxs("p",{className:"text-gray-500",children:[l==="dashboard"&&"Przegld Twojej aktywnoci",l==="referral"&&"Zapraszaj znajomych i zarabiaj",l==="favorites"&&"Twoje ulubione miejsca i usugi",l==="wallet"&&"Zarzdzaj swoimi rodkami",l==="visits"&&"Kalendarz i historia rezerwacji",l==="settings"&&"Personalizuj swoje konto",l==="help"&&"FAQ i Kontakt"]})]}),M()]})]})]}):null},xa="providers",Vg=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),L6=()=>({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),Po=(t,e)=>{var h,m;const n=new Date().toISOString(),r=e||((h=t.id)==null?void 0:h.toString())||Vg();let i=[];t.services&&Array.isArray(t.services)&&(i=t.services.map((f,g)=>({id:f.id||`service-${g}`,name:f.name||"",description:f.description||"",duration:f.duration||"30 min",price:Number(f.price)||0,oldPrice:f.oldPrice?Number(f.oldPrice):void 0,discount:f.discount?Number(f.discount):void 0,badge:f.badge,category:f.category||"Usugi"})));let o;t.location&&typeof t.location=="object"?o={city:t.location.city||"",district:t.location.district||"",address:t.location.address||"",postalCode:t.location.postalCode||"",lat:Number(t.location.lat)||52.2297,lng:Number(t.location.lng)||21.0122}:o={city:"",district:"",address:"",postalCode:"",lat:52.2297,lng:21.0122};const l=[o.city,o.district].filter(Boolean).join(", ")||"Nie podano";return{id:r,ownerId:((m=t.ownerId)==null?void 0:m.toString())||"",name:t.name||"",profession:t.profession||"",description:t.description||"",experience:t.experience||"",category:t.category||"",location:o,locationString:l,travelRadius:Number(t.travelRadius)||10,hasTravel:t.hasTravel??!0,image:t.image||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",portfolio:t.portfolio||[],services:i,serviceNames:i.map(f=>f.name),features:t.features||[],priceFrom:i.length>0?Math.min(...i.map(f=>f.price)):0,rating:Number(t.rating)||0,reviewsCount:Number(t.reviewsCount)||0,completedServices:Number(t.completedServices)||0,punctuality:Number(t.punctuality)||95,regularClients:Number(t.regularClients)||0,certifications:t.certifications||[],workingHours:t.workingHours||L6(),acceptsCard:t.acceptsCard??!0,responseTime:t.responseTime||"24h",isPremium:t.isPremium||!1,isVerified:t.isVerified||!1,isActive:t.isActive??!0,isAvailableToday:t.isAvailableToday??!0,createdAt:t.createdAt||n,updatedAt:t.updatedAt||n,ownerEmail:t.ownerEmail||"",ownerUsername:t.ownerUsername||"",ownerPhone:t.ownerPhone||"",ownerAvatar:t.ownerAvatar||""}},Xt={async getAll(){try{const t=await Et(nt(we,xa));return console.log("Firebase getAll - znaleziono:",t.docs.length),t.docs.map(e=>Po({...e.data(),id:e.id}))}catch(t){return console.error("Firebase getAll error:",t),[]}},async getById(t){try{const e=Ve(we,xa,t),n=await $i(e);return n.exists()?Po({...n.data(),id:n.id}):null}catch(e){return console.error("Firebase getById error:",e),null}},async getByCategory(t){try{const e=It(nt(we,xa),jt("category","==",t));return(await Et(e)).docs.map(r=>Po({...r.data(),id:r.id}))}catch(e){return console.error("Firebase getByCategory error:",e),[]}},async getByOwner(t){try{const e=It(nt(we,xa),jt("ownerId","==",t));return(await Et(e)).docs.map(r=>Po({...r.data(),id:r.id}))}catch(e){return console.error("Firebase getByOwner error:",e),[]}},async create(t,e){const n=Vg(),r=Po({...t,ownerId:e,isActive:!0},n),i=JSON.parse(JSON.stringify(r));try{return console.log("Firebase create - zapisuj:",i),await wl(Ve(we,xa,n),i),console.log("Firebase create - zapisano pomylnie"),window.dispatchEvent(new CustomEvent("providerCreated",{detail:r})),r}catch(o){throw console.error("Firebase create error:",o),o}},async update(t,e){try{const n=await this.getById(t);if(!n)return null;const r=Po({...n,...e},t);r.updatedAt=new Date().toISOString();const i=JSON.parse(JSON.stringify(r));return await Kt(Ve(we,xa,t),i),window.dispatchEvent(new CustomEvent("providerUpdated",{detail:r})),r}catch(n){throw console.error("Firebase update error:",n),n}},async delete(t){try{return await Mu(Ve(we,xa,t)),window.dispatchEvent(new CustomEvent("providerDeleted",{detail:{id:t}})),!0}catch(e){return console.error("Firebase delete error:",e),!1}},async uploadImage(t,e){try{const n=`providers/${e}/${Date.now()}_${t.name}`,r=Bx(Wx,n);return await Vk(r,t),Uk(r)}catch(n){throw console.error("Firebase upload error:",n),n}},async addService(t,e){const n=await this.getById(t);if(!n)return null;const r={...e,id:Vg()},i=[...n.services,r];return this.update(t,{services:i,serviceNames:i.map(o=>o.name),priceFrom:Math.min(...i.map(o=>o.price))})},async removeService(t,e){const n=await this.getById(t);if(!n)return null;const r=n.services.filter(i=>i.id!==e);return this.update(t,{services:r,serviceNames:r.map(i=>i.name),priceFrom:r.length>0?Math.min(...r.map(i=>i.price)):0})}},D6={fryzjer:["fryzjer","fryzjerstwo","hair"],pedicure:["pedicure","pedikre"],paznokcie:["paznokcie","manicure","nails","stylizacja paznokci"],masaz:["masa","masaz","massage"],makijaz:["makija","makijaz","makeup","wiza"],"pielegnacja-twarzy":["pielgnacja twarzy","kosmetyka","facial"],depilacja:["depilacja","wax","waxing"],barber:["barber","fryzjer mski","barbershop"],tatuaz:["tatua","tatuaz","tattoo"],kosmetyka:["kosmetyka","kosmetyczka","beauty"],"brwi-rzesy":["brwi","rzsy","lashes","brows"],inne:["inne","other"]},M6=["Wszystkie miasta","Warszawa","Krakw","d","Wrocaw","Pozna","Gdask","Szczecin","Bydgoszcz","Lublin","Biaystok","Katowice","Gdynia","Czstochowa","Radom","Sosnowiec","Toru","Kielce","Rzeszw","Gliwice","Zabrze","Olsztyn","Bielsko-Biaa","Bytom","Zielona Gra","Rybnik","Ruda lska","Opole","Tychy","Gorzw Wielkopolski","Pock","Dbrowa Grnicza","Elblg","Wabrzych","Wocawek","Tarnw","Chorzw","Koszalin"],O6=["Wszystkie specjalizacje","Fryzjer","Barber","Kosmetyka","Paznokcie / Manicure","Pedicure","Masa","Makija","Pielgnacja twarzy","Depilacja","Brwi i rzsy","Tatua","Inne usugi"],V6={Fryzjer:["fryzjer","fryzjerstwo","hair"],Barber:["barber","fryzjer mski","barbershop"],Kosmetyka:["kosmetyka","kosmetyczka","beauty"],"Paznokcie / Manicure":["paznokcie","manicure","nails","stylizacja paznokci"],Pedicure:["pedicure","pedikre"],Masa:["masa","masaz","massage"],Makija:["makija","makijaz","makeup","wiza"],"Pielgnacja twarzy":["pielgnacja twarzy","kosmetyka","facial"],Depilacja:["depilacja","wax","waxing"],"Brwi i rzsy":["brwi","rzsy","lashes","brows"],Tatua:["tatua","tatuaz","tattoo"],"Inne usugi":["inne","other"]},U6=(t,e,n,r)=>{const o=(n-t)*Math.PI/180,l=(r-e)*Math.PI/180,h=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))},v_=()=>{const{category:t}=Wj(),{showToast:e}=mn(),[n,r]=C.useState([]),[i,o]=C.useState(!0),[l,h]=C.useState(!1),[m,f]=C.useState(!0),[g,x]=C.useState(0),[v,P]=C.useState([]),[E,S]=C.useState("Wszystkie miasta"),[M,j]=C.useState("Wszystkie specjalizacje"),[T,I]=C.useState(null),[W,D]=C.useState("rating"),[O,N]=C.useState(null),[b,R]=C.useState(!1),U=()=>{if(!navigator.geolocation){e("Twoja przegldarka nie wspiera geolokalizacji","error");return}R(!0),navigator.geolocation.getCurrentPosition(F=>{N({lat:F.coords.latitude,lng:F.coords.longitude}),R(!1),e("Lokalizacja pobrana!","success")},F=>{switch(console.error("Bd geolokalizacji:",F),R(!1),F.code){case F.PERMISSION_DENIED:e("Brak zgody na lokalizacj. Wcz w ustawieniach przegldarki.","error");break;case F.POSITION_UNAVAILABLE:e("Nie mona ustali lokalizacji","error");break;case F.TIMEOUT:e("Przekroczono czas oczekiwania na lokalizacj","error");break;default:e("Bd pobierania lokalizacji","error")}D("rating")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};C.useEffect(()=>{W==="distance"&&!O&&U()},[W]);const B=async(F=!1)=>{F?h(!0):o(!0);try{let Y=await Xt.getAll();if(t){const z=D6[t]||[t];Y=Y.filter(G=>{if(!G.category)return!1;const J=G.category.toLowerCase();return z.some(fe=>J.includes(fe.toLowerCase()))})}if(M&&M!=="Wszystkie specjalizacje"){const z=V6[M]||[];z.length>0&&(Y=Y.filter(G=>{if(!G.category)return!1;const J=G.category.toLowerCase();return z.some(fe=>J.includes(fe.toLowerCase()))}))}E&&E!=="Wszystkie miasta"&&(Y=Y.filter(z=>{var fe,X,se;const G=((fe=z.locationString)==null?void 0:fe.toLowerCase())||"",J=((se=(X=z.location)==null?void 0:X.city)==null?void 0:se.toLowerCase())||"";return G.includes(E.toLowerCase())||J.includes(E.toLowerCase())})),T&&(Y=Y.filter(z=>z.rating>=T)),v.includes("available-today")&&(Y=Y.filter(z=>z.isAvailableToday)),v.includes("with-travel")&&(Y=Y.filter(z=>z.hasTravel)),W==="rating"?Y.sort((z,G)=>G.rating-z.rating):W==="price-asc"?Y.sort((z,G)=>z.priceFrom-G.priceFrom):W==="price-desc"?Y.sort((z,G)=>G.priceFrom-z.priceFrom):W==="distance"&&O&&(Y=Y.map(z=>{var J,fe;let G=1/0;return(J=z.location)!=null&&J.lat&&((fe=z.location)!=null&&fe.lng)&&(G=U6(O.lat,O.lng,z.location.lat,z.location.lng)),{...z,_distance:G}}).sort((z,G)=>z._distance-G._distance)),r(Y),x(Y.length),f(!1)}catch(Y){console.error("Bd pobierania usugodawcw:",Y),e("Bd adowania danych","error")}finally{o(!1),h(!1)}};C.useEffect(()=>{B()},[t,E,M,T,W,v,O]);const H={ratings:[{label:"Wszystkie oceny",value:null},{label:" 5.0",value:5},{label:" 4.5+",value:4.5},{label:" 4.0+",value:4},{label:" 3.5+",value:3.5}]},A=[{id:"available-today",label:"Dostpny dzi"},{id:"with-travel",label:"Z dojazdem"},{id:"recommended",label:"Polecany"},{id:"discount",label:"Nowi uytkownicy -20%"},{id:"weekend",label:"Weekend"}],me=F=>{P(Y=>Y.includes(F)?Y.filter(z=>z!==F):[...Y,F])},ue=()=>{P([]),S("Wszystkie miasta"),j("Wszystkie specjalizacje"),I(null),D("rating"),e("Filtry wyczyszczone","info")},ce=t?t.charAt(0).toUpperCase()+t.slice(1):"Wszystkie usugi",ne=()=>{!l&&m&&B(!0)};return s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[s.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-6",children:[s.jsx(be,{to:"/",className:"hover:text-primary transition-colors",children:"Strona gwna"}),s.jsx("span",{children:"/"}),s.jsx(be,{to:"/uslugodawcy",className:"hover:text-primary transition-colors",children:"Usugi"}),t&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-gray-900",children:ce})]})]}),s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("span",{className:"inline-block bg-primary/10 text-primary px-4 py-1 rounded-full text-sm font-semibold mb-4",children:ce.toUpperCase()}),s.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Wybierz swojego specjalist"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Znajd idealnego specjalist w Twojej okolicy. Sprawd opinie, ceny i dostpne terminy."})]}),s.jsxs("section",{className:"card p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[s.jsx($x,{className:"w-5 h-5"}),"Filtry wyszukiwania"]}),s.jsx("button",{onClick:ue,className:"text-sm text-primary hover:underline",children:"Wyczy filtry"})]}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Miasto"}),s.jsx("select",{value:E,onChange:F=>S(F.target.value),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:M6.map(F=>s.jsx("option",{value:F,children:F},F))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Specjalizacja"}),s.jsx("select",{value:M,onChange:F=>j(F.target.value),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:O6.map(F=>s.jsx("option",{value:F,children:F},F))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Ocena"}),s.jsx("select",{value:T??"",onChange:F=>I(F.target.value?parseFloat(F.target.value):null),className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:H.ratings.map(F=>s.jsx("option",{value:F.value??"",children:F.label},F.label))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Twoja lokalizacja"}),s.jsx("button",{onClick:U,disabled:b,className:`w-full px-4 py-2.5 border-2 rounded-xl flex items-center justify-center gap-2 transition-colors ${O?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-primary hover:text-primary"}`,children:b?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-4 h-4 animate-spin"}),"Pobieranie..."]}):O?s.jsxs(s.Fragment,{children:[s.jsx(op,{className:"w-4 h-4"}),"Lokalizacja pobrana"]}):s.jsxs(s.Fragment,{children:[s.jsx(op,{className:"w-4 h-4"}),"Pobierz lokalizacj"]})})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(F=>s.jsx("button",{onClick:()=>me(F.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${v.includes(F.id)?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:F.label},F.id))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[s.jsx("div",{className:"text-gray-600",children:i?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(tt,{className:"w-4 h-4 animate-spin"}),"adowanie..."]}):s.jsxs(s.Fragment,{children:["Znaleziono ",s.jsxs("strong",{className:"text-gray-900",children:[g," specjalistw"]}),E!=="Wszystkie miasta"&&` w miecie ${E}`]})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Sortuj:"}),s.jsxs("select",{value:W,onChange:F=>D(F.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 text-sm",children:[s.jsx("option",{value:"rating",children:"Najwyej oceniane"}),s.jsx("option",{value:"recommended",children:"Polecane"}),s.jsx("option",{value:"price-asc",children:"Cena: od najniszej"}),s.jsx("option",{value:"price-desc",children:"Cena: od najwyszej"}),s.jsx("option",{value:"distance",children:"Najbliej mnie"})]})]})]}),W==="distance"&&!O&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[s.jsx(op,{className:"w-5 h-5 text-yellow-600"}),s.jsx("p",{className:"text-yellow-700 text-sm",children:'Aby sortowa po odlegoci, kliknij "Pobierz lokalizacj" lub zezwl przegldarce na dostp do lokalizacji.'})]}),i&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[s.jsx(tt,{className:"w-12 h-12 animate-spin text-primary mb-4"}),s.jsx("p",{className:"text-gray-500",children:"adowanie specjalistw..."})]}),!i&&n.length===0&&s.jsxs("div",{className:"text-center py-20",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Brak wynikw"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Nie znaleziono specjalistw speniajcych kryteria wyszukiwania."}),s.jsx("button",{onClick:ue,className:"btn btn-primary",children:"Wyczy filtry"})]}),!i&&n.length>0&&s.jsx("div",{className:"grid gap-6",children:n.map(F=>s.jsxs("div",{className:"card card-hover p-6 grid md:grid-cols-[200px,1fr,200px] gap-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:F.image,alt:F.name,className:"w-full h-48 md:h-full object-cover rounded-xl"}),F.isPremium&&s.jsx("div",{className:"absolute top-3 left-3 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:" Premium"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:F.name}),s.jsx("p",{className:"text-gray-500",children:F.profession})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((Y,z)=>s.jsx(jr,{className:`w-4 h-4 ${z<Math.floor(F.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},z))}),s.jsx("span",{className:"font-bold text-gray-900",children:F.rating}),s.jsxs("span",{className:"text-gray-500",children:["(",F.reviewsCount," opinii)"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-4",children:[s.jsx(ns,{className:"w-4 h-4"}),s.jsx("span",{children:F.locationString}),W==="distance"&&F._distance&&F._distance!==1/0&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-primary/10 text-primary rounded-full text-xs font-medium",children:F._distance<1?`${Math.round(F._distance*1e3)} m`:`${F._distance.toFixed(1)} km`})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[F.serviceNames.slice(0,4).map((Y,z)=>s.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:Y},z)),F.serviceNames.length>4&&s.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:["+",F.serviceNames.length-4]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:F.description}),s.jsx("div",{className:"flex flex-wrap gap-4",children:F.features.slice(0,3).map(Y=>s.jsxs("span",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(Tt,{className:"w-4 h-4 text-green-500"}),Y]},Y))})]}),s.jsxs("div",{className:"flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm mb-4 ${F.isAvailableToday?"text-green-600":"text-orange-500"}`,children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${F.isAvailableToday?"bg-green-500":"bg-orange-500"}`}),F.isAvailableToday?"Dostpna dzi":"Zajta dzi"]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Od"}),s.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[F.priceFrom," ",s.jsx("span",{className:"text-base font-normal text-gray-500",children:"z"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{to:`/uslugodawcy/profil/${F.id}`,className:"w-full btn btn-primary justify-center",children:"Zarezerwuj"}),s.jsx(be,{to:`/uslugodawcy/profil/${F.id}`,className:"w-full btn btn-ghost justify-center",children:"Zobacz profil"})]})]})]},F.id))}),!i&&m&&n.length>0&&s.jsx("div",{className:"flex justify-center mt-10",children:s.jsx("button",{onClick:ne,disabled:l,className:"btn btn-ghost px-8 py-3 text-lg",children:l?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-5 h-5 animate-spin mr-2"}),"adowanie..."]}):"Zaaduj wicej"})}),!i&&!m&&n.length>0&&s.jsx("div",{className:"text-center mt-10 py-6 border-t border-gray-200",children:s.jsxs("p",{className:"text-gray-500",children:["To wszyscy dostpni specjalici (",g,")"]})}),s.jsxs("button",{className:"fixed bottom-6 right-6 btn btn-primary shadow-xl",children:[s.jsx(ns,{className:"w-5 h-5"}),s.jsx("span",{children:"Poka na mapie"})]})]})},ai="notifications",B6=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),Pn={async create(t){const e=B6(),n=new Date().toISOString(),r={id:e,userId:t.userId,type:t.type,title:t.title,message:t.message,data:t.data,read:!1,createdAt:n};try{return await wl(Ve(we,ai,e),r),console.log("Notification created:",r),window.dispatchEvent(new CustomEvent("newNotification",{detail:r})),r}catch(i){throw console.error("Notification create error:",i),i}},async getByUser(t){try{const e=It(nt(we,ai),jt("userId","==",t));return(await Et(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Notification getByUser error:",e),[]}},async getUnreadByUser(t){try{const e=It(nt(we,ai),jt("userId","==",t));return(await Et(e)).docs.map(i=>i.data()).filter(i=>!i.read).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Notification getUnreadByUser error:",e),[]}},async countUnread(t){try{return(await this.getUnreadByUser(t)).length}catch(e){return console.error("Notification countUnread error:",e),0}},async markAsRead(t){try{await Kt(Ve(we,ai,t),{read:!0})}catch(e){throw console.error("Notification markAsRead error:",e),e}},async markAllAsRead(t){try{const e=await this.getUnreadByUser(t);if(e.length===0)return;const n=d_(we);e.forEach(r=>{const i=Ve(we,ai,r.id);n.update(i,{read:!0})}),await n.commit()}catch(e){throw console.error("Notification markAllAsRead error:",e),e}},async delete(t){try{await Mu(Ve(we,ai,t))}catch(e){throw console.error("Notification delete error:",e),e}},async deleteAllByUser(t){try{const e=await this.getByUser(t);if(e.length===0)return;const n=d_(we);e.forEach(r=>{const i=Ve(we,ai,r.id);n.delete(i)}),await n.commit()}catch(e){throw console.error("Notification deleteAllByUser error:",e),e}},subscribe(t,e){const n=It(nt(we,ai),jt("userId","==",t));return rl(n,r=>{const i=r.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(i)})},getIcon(t){return{booking_request:"",booking_confirmed:"",booking_cancelled:"",booking_completed:"",booking_reminder:"",new_message:"",new_review:"",system:""}[t]||""},getColor(t){return{booking_request:"bg-blue-100 text-blue-600",booking_confirmed:"bg-green-100 text-green-600",booking_cancelled:"bg-red-100 text-red-600",booking_completed:"bg-purple-100 text-purple-600",booking_reminder:"bg-yellow-100 text-yellow-600",new_message:"bg-indigo-100 text-indigo-600",new_review:"bg-orange-100 text-orange-600",system:"bg-gray-100 text-gray-600"}[t]||"bg-gray-100 text-gray-600"}},Vr="bookings",F6=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),or={async create(t){const e=F6(),n=new Date().toISOString(),r={id:e,...t,status:"pending",createdAt:n,updatedAt:n};try{return await wl(Ve(we,Vr,e),r),console.log("Booking created:",r),await Pn.create({userId:t.providerId,type:"booking_request",title:"Nowa proba o rezerwacj",message:`${t.clientName} chce zarezerwowa ${t.serviceName} na ${t.date} o ${t.time}`,data:{bookingId:e}}),r}catch(i){throw console.error("Booking create error:",i),i}},async getById(t){try{const e=Ve(we,Vr,t),n=await $i(e);return n.exists()?n.data():null}catch(e){return console.error("Booking getById error:",e),null}},async getByClient(t){try{const e=It(nt(we,Vr),jt("clientId","==",t));return(await Et(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Booking getByClient error:",e),[]}},async getByProvider(t){try{const e=It(nt(we,Vr),jt("providerId","==",t));return(await Et(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Booking getByProvider error:",e),[]}},async getByProviderAndDate(t,e){try{const n=It(nt(we,Vr),jt("providerId","==",t),jt("date","==",e));return(await Et(n)).docs.map(i=>i.data())}catch(n){return console.error("Booking getByProviderAndDate error:",n),[]}},async confirm(t){try{const e=await this.getById(t);if(!e)return null;const n=new Date().toISOString(),r={status:"confirmed",updatedAt:n,confirmedAt:n};return await Kt(Ve(we,Vr,t),r),await Pn.create({userId:e.clientId,type:"booking_confirmed",title:"Rezerwacja potwierdzona! ",message:`${e.providerName} potwierdzi Twoj rezerwacj na ${e.date} o ${e.time}`,data:{bookingId:t}}),{...e,...r}}catch(e){throw console.error("Booking confirm error:",e),e}},async cancel(t,e){try{const n=await this.getById(t);if(!n)return null;const r=new Date().toISOString(),i={status:"cancelled",updatedAt:r,cancelledAt:r};await Kt(Ve(we,Vr,t),i);const o=e==="client"?n.providerId:n.clientId,l=e==="client"?n.clientName:n.providerName;return await Pn.create({userId:o,type:"booking_cancelled",title:"Rezerwacja anulowana ",message:`${l} anulowa rezerwacj na ${n.date} o ${n.time}`,data:{bookingId:t}}),{...n,...i}}catch(n){throw console.error("Booking cancel error:",n),n}},async complete(t){try{const e=await this.getById(t);if(!e)return null;const n=new Date().toISOString(),r={status:"completed",updatedAt:n,completedAt:n};return await Kt(Ve(we,Vr,t),r),await Pn.create({userId:e.clientId,type:"booking_completed",title:"Usuga zakoczona! ",message:`Jak oceniasz usug ${e.serviceName} u ${e.providerName}? Zostaw opini!`,data:{bookingId:t,providerId:e.providerId}}),{...e,...r}}catch(e){throw console.error("Booking complete error:",e),e}},async isTimeSlotAvailable(t,e,n){try{return!(await this.getByProviderAndDate(t,e)).find(o=>o.time===n&&(o.status==="pending"||o.status==="confirmed"))}catch(r){return console.error("isTimeSlotAvailable error:",r),!1}},async getBookedSlots(t,e){try{return(await this.getByProviderAndDate(t,e)).filter(r=>r.status==="pending"||r.status==="confirmed").map(r=>r.time)}catch(n){return console.error("getBookedSlots error:",n),[]}},async getProviderStats(t){try{const e=await this.getByProvider(t),n=new Date,r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,i=e.filter(f=>f.status==="completed"),o=e.filter(f=>f.status==="pending"),l=e.filter(f=>f.status==="cancelled"),h=e.filter(f=>f.date.startsWith(r)),m=h.filter(f=>f.status==="completed");return{totalBookings:e.length,completedBookings:i.length,pendingBookings:o.length,cancelledBookings:l.length,totalRevenue:i.reduce((f,g)=>f+g.servicePrice,0),thisMonthRevenue:m.reduce((f,g)=>f+g.servicePrice,0),thisMonthBookings:h.length}}catch(e){return console.error("getProviderStats error:",e),{totalBookings:0,completedBookings:0,pendingBookings:0,cancelledBookings:0,totalRevenue:0,thisMonthRevenue:0,thisMonthBookings:0}}},subscribeToProviderBookings(t,e){const n=It(nt(we,Vr),jt("providerId","==",t));return rl(n,r=>{const i=r.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(i)})},subscribeToClientBookings(t,e){const n=It(nt(we,Vr),jt("clientId","==",t));return rl(n,r=>{const i=r.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),e(i)})}},Bd=({icon:t,value:e,label:n,color:r})=>s.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl ${r}`,children:[s.jsx(t,{className:"w-4 h-4"}),s.jsx("span",{className:"font-bold",children:e}),s.jsx("span",{className:"text-sm opacity-80",children:n})]}),W6=({service:t,isSelected:e,onToggle:n})=>s.jsxs("div",{onClick:n,className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${e?"border-primary bg-primary/5 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-bold text-gray-900",children:t.name}),t.badge&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${t.badge==="Premium"?"bg-yellow-100 text-yellow-700":"bg-primary/10 text-primary"}`,children:t.badge})]}),t.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:t.description})]}),s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${e?"bg-primary border-primary":"border-gray-300"}`,children:e&&s.jsx(Tt,{className:"w-4 h-4 text-white"})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx(Dt,{className:"w-4 h-4"}),s.jsx("span",{children:t.duration})]}),s.jsxs("div",{className:"text-right",children:[t.oldPrice&&s.jsxs("span",{className:"text-sm text-gray-400 line-through mr-2",children:[t.oldPrice," z"]}),s.jsxs("span",{className:"text-lg font-bold text-primary",children:[t.price," z"]}),t.discount&&s.jsxs("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:["-",t.discount,"%"]})]})]})]}),$6=()=>{var G,J,fe;const{id:t}=Wj(),e=Pr(),{showToast:n}=mn(),{user:r}=_t(),[i,o]=C.useState(null),[l,h]=C.useState(!0),[m,f]=C.useState(!1),[g,x]=C.useState([]),[v,P]=C.useState(null),[E,S]=C.useState(null),[M,j]=C.useState("Wszystkie"),[T,I]=C.useState(!1),[W,D]=C.useState([]),[O,N]=C.useState(!1),[b]=C.useState({month:"Grudzie",year:2025});C.useEffect(()=>{(async()=>{if(t){h(!0);try{const he=await Xt.getById(t);he?o(he):n("Nie znaleziono profilu usugodawcy","error")}catch(he){console.error("Error loading provider:",he),n("Bd adowania profilu","error")}finally{h(!1)}}})();const se=he=>{var Be;((Be=he.detail)==null?void 0:Be.id)===t&&o(he.detail)};return window.addEventListener("providerUpdated",se),()=>window.removeEventListener("providerUpdated",se)},[t]);const R=i!=null&&i.services?["Wszystkie",...new Set(i.services.map(X=>X.category).filter(Boolean))]:["Wszystkie"],U=((G=i==null?void 0:i.services)==null?void 0:G.filter(X=>M==="Wszystkie"||X.category===M))||[],B=g.reduce((X,se)=>X+se.price,0),H=g.reduce((X,se)=>{const he=se.duration.match(/(\d+)/);return X+(he?parseInt(he[1]):30)},0),A=X=>{x(se=>se.find(he=>he.id===X.id)?se.filter(he=>he.id!==X.id):[...se,X])},ue=(()=>{var Je;const X=new Date,se=[],he=new Date(X.getFullYear(),X.getMonth(),1),Be=he.getDay()===0?6:he.getDay()-1,Ne={1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"};for(let St=0;St<35;St++){const ee=new Date(X.getFullYear(),X.getMonth(),St-Be+1),_e=ee.getMonth()===X.getMonth(),Fe=ee<new Date(X.getFullYear(),X.getMonth(),X.getDate());let Re=!1;if(i){const at=Ne[ee.getDay()];Re=!((Je=i.workingHours[at])!=null&&Je.enabled)}se.push({day:ee.getDate(),isToday:ee.toDateString()===X.toDateString(),disabled:!_e||Fe||Re,isClosed:Re,fullDate:ee})}return se})();C.useEffect(()=>{(async()=>{if(!(i!=null&&i.id)||!v)return;const se=new Date,he=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,Be=await or.getBookedSlots(i.id,he);D(Be)})()},[i==null?void 0:i.id,v]);const ce=X=>({1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"})[X.getDay()]||null,F=(()=>{if(!i||!v)return[];const X=[],se=new Date,he=new Date(se.getFullYear(),se.getMonth(),v),Be=ce(he);if(!Be)return[];const Ne=i.workingHours[Be];if(!Ne.enabled)return[];const[Je,St]=Ne.from.split(":").map(Number),[ee,_e]=Ne.to.split(":").map(Number);let Fe=Je,Re=St;for(;Fe<ee||Fe===ee&&Re<_e;){const at=`${String(Fe).padStart(2,"0")}:${String(Re).padStart(2,"0")}`,ls=he.toDateString()===se.toDateString()&&(Fe<se.getHours()||Fe===se.getHours()&&Re<=se.getMinutes());X.push({time:at,disabled:W.includes(at)||ls}),Re+=30,Re>=60&&(Re=0,Fe++)}return X})(),Y=async()=>{if(!r||!r.id){n("Zaloguj si, aby zarezerwowa wizyt","info"),e(`/auth?mode=login&redirect=/uslugodawcy/profil/${t}`);return}if(g.length===0){n("Wybierz przynajmniej jedn usug","error");return}if(!v||!E){n("Wybierz dat i godzin","error");return}if(i){f(!0),console.log("Creating booking for user:",r.id);try{const X=new Date,se=`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`;if(!await or.isTimeSlotAvailable(i.id,se,E)){n("Ten termin jest ju zajty. Wybierz inny.","error"),f(!1);return}const Be=g[0];await or.create({clientId:r.id,clientName:r.username||"Klient",clientEmail:r.email||"",clientPhone:r.phone||"",providerId:i.id,providerName:i.name,providerImage:i.image,serviceId:Be.id,serviceName:g.map(Ne=>Ne.name).join(", "),servicePrice:B,serviceDuration:`${H} min`,date:se,time:E}),console.log("Booking created successfully"),I(!0)}catch(X){console.error("Bd rezerwacji:",X),n("Bd podczas tworzenia rezerwacji","error")}finally{f(!1)}}};if(l)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"adowanie profilu..."})]})});if(!i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Nie znaleziono profilu"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Ten usugodawca nie istnieje lub zosta usunity"}),s.jsx("button",{onClick:()=>e("/uslugodawcy"),className:"px-6 py-2 bg-primary text-white rounded-xl hover:bg-primary/90",children:"Wr do listy"})]})});const z={monday:"Pon",tuesday:"Wt",wednesday:"r",thursday:"Czw",friday:"Pt",saturday:"Sob",sunday:"Nd"};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b sticky top-0 z-40",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:s.jsxs("div",{className:"flex items-center justify-between h-14",children:[s.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-gray-600 hover:text-primary transition-colors",children:[s.jsx(fu,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Wr"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>N(!O),className:`p-2 rounded-full transition-colors ${O?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,children:s.jsx(vl,{className:`w-5 h-5 ${O?"fill-current":""}`})}),s.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-primary hover:bg-primary/10 transition-colors",children:s.jsx(f6,{className:"w-5 h-5"})})]})]})})}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"relative h-48 sm:h-64",children:[s.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),s.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[i.isPremium&&s.jsxs("span",{className:"px-3 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full flex items-center gap-1",children:[s.jsx(jr,{className:"w-3 h-3 fill-current"})," Premium"]}),i.isVerified&&s.jsxs("span",{className:"px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full flex items-center gap-1",children:[s.jsx(Hn,{className:"w-3 h-3"})," Zweryfikowany"]})]}),s.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:i.name}),s.jsx("p",{className:"text-white/90",children:i.profession})]})]}),s.jsxs("div",{className:"p-4 flex flex-wrap gap-3",children:[s.jsx(Bd,{icon:jr,value:i.rating>0?i.rating.toFixed(1):"Nowy",label:i.reviewsCount>0?`(${i.reviewsCount} opinii)`:"",color:"bg-yellow-50 text-yellow-700"}),i.completedServices>0&&s.jsx(Bd,{icon:sm,value:i.completedServices,label:"usug",color:"bg-blue-50 text-blue-700"}),i.hasTravel&&s.jsx(Bd,{icon:e6,value:`${i.travelRadius} km`,label:"dojazd",color:"bg-green-50 text-green-700"}),i.acceptsCard&&s.jsx(Bd,{icon:am,value:"Karta",label:"",color:"bg-purple-50 text-purple-700"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"O mnie"}),i.description?s.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:i.description}):s.jsx("p",{className:"text-gray-400 italic",children:"Brak opisu"}),i.experience&&s.jsxs("p",{className:"mt-4 text-sm text-gray-500 flex items-center gap-2",children:[s.jsx(sm,{className:"w-4 h-4 text-primary"}),i.experience]}),i.features.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"font-medium mb-3",children:"Udogodnienia"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.features.map((X,se)=>s.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:X},se))})]}),i.certifications.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"font-medium mb-3",children:"Certyfikaty"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.certifications.map((X,se)=>s.jsxs("span",{className:"px-3 py-1 bg-green-50 text-green-700 text-sm rounded-full flex items-center gap-1",children:[s.jsx(Tt,{className:"w-3 h-3"})," ",X]},se))})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Usugi i cennik"}),R.length>1&&s.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:R.map(X=>s.jsx("button",{onClick:()=>j(X),className:`px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors ${M===X?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X},X))}),s.jsx("div",{className:"space-y-3",children:U.length>0?U.map(X=>s.jsx(W6,{service:X,isSelected:g.some(se=>se.id===X.id),onToggle:()=>A(X)},X.id)):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500 mb-2",children:"Brak usug"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Ten usugodawca nie doda jeszcze usug"})]})})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Lokalizacja"}),s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx(ns,{className:"w-5 h-5 text-primary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:i.locationString}),i.location.address&&s.jsx("p",{className:"text-sm text-gray-500",children:i.location.address}),i.hasTravel&&s.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" Dojazd do klienta (do ",i.travelRadius," km)"]})]})]}),(J=i.location)!=null&&J.lat&&((fe=i.location)!=null&&fe.lng)?s.jsxs("div",{className:"h-48 rounded-xl overflow-hidden",children:[s.jsx("iframe",{title:"Lokalizacja usugodawcy",width:"100%",height:"100%",style:{border:0},loading:"lazy",src:`https://www.openstreetmap.org/export/embed.html?bbox=${i.location.lng-.01}%2C${i.location.lat-.01}%2C${i.location.lng+.01}%2C${i.location.lat+.01}&layer=mapnik&marker=${i.location.lat}%2C${i.location.lng}`}),s.jsx("a",{href:`https://www.openstreetmap.org/?mlat=${i.location.lat}&mlon=${i.location.lng}#map=16/${i.location.lat}/${i.location.lng}`,target:"_blank",rel:"noopener noreferrer",className:"block text-center text-sm text-primary hover:underline mt-2",children:"Otwrz wiksz map"})]}):s.jsx("div",{className:"h-48 bg-gray-100 rounded-xl flex items-center justify-center",children:s.jsx("p",{className:"text-gray-400",children:"Brak danych lokalizacji"})})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Godziny pracy"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(i.workingHours).map(([X,se])=>s.jsxs("div",{className:`p-3 rounded-xl ${se.enabled?"bg-green-50":"bg-gray-100"}`,children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:z[X]}),s.jsx("p",{className:`text-sm ${se.enabled?"text-green-700":"text-gray-500"}`,children:se.enabled?`${se.from} - ${se.to}`:"Zamknite"})]},X))})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 sticky top-20",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Zarezerwuj wizyt"}),g.length>0?s.jsxs("div",{className:"mb-4 p-4 bg-primary/5 rounded-xl",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Wybrane usugi:"}),g.map(X=>s.jsxs("div",{className:"flex justify-between text-sm py-1",children:[s.jsx("span",{children:X.name}),s.jsxs("span",{className:"font-medium",children:[X.price," z"]})]},X.id)),s.jsxs("div",{className:"flex justify-between mt-2 pt-2 border-t border-primary/20",children:[s.jsx("span",{className:"font-bold",children:"Razem:"}),s.jsxs("span",{className:"font-bold text-primary",children:[B," z"]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Czas: ~",H," min"]})]}):s.jsx("p",{className:"text-sm text-gray-500 mb-4 p-4 bg-gray-50 rounded-xl",children:"Wybierz usugi z listy"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Data"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[b.month," ",b.year]})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[["Pn","Wt","r","Cz","Pt","So","Nd"].map(X=>s.jsx("div",{className:"text-xs font-medium text-gray-400 py-1",children:X},X)),ue.slice(0,35).map((X,se)=>s.jsx("button",{disabled:X.disabled,onClick:()=>!X.disabled&&P(X.day),className:`aspect-square text-sm rounded-lg transition-colors ${X.disabled?"opacity-30 cursor-not-allowed":v===X.day?"bg-primary text-white":X.isToday?"ring-2 ring-primary text-primary":"hover:bg-gray-100"}`,children:X.day},se))]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Godzina"}),v?F.length===0?s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-center",children:[s.jsx("p",{className:"text-red-600 font-medium",children:"Dzie zamknity"}),s.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Wybierz inny dzie"})]}):s.jsx("div",{className:"grid grid-cols-3 gap-2",children:F.map(X=>s.jsx("button",{disabled:X.disabled,onClick:()=>!X.disabled&&S(X.time),className:`py-2 text-sm rounded-lg transition-colors ${X.disabled?"opacity-30 cursor-not-allowed bg-gray-100":E===X.time?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"}`,children:X.time},X.time))}):s.jsx("p",{className:"text-sm text-gray-500 p-4 bg-gray-50 rounded-xl text-center",children:"Wybierz dat, aby zobaczy dostpne godziny"})]}),s.jsx("button",{onClick:Y,disabled:g.length===0||m,className:`w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${g.length>0&&!m?"bg-gradient-to-r from-primary to-secondary text-white hover:shadow-lg hover:-translate-y-0.5":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:m?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-5 h-5 animate-spin"}),"Rezerwuj..."]}):g.length>0?`Zarezerwuj za ${B} z`:"Wybierz usug"}),s.jsxs("button",{onClick:()=>{if(!r){n("Zaloguj si, aby napisa wiadomo","info"),e(`/auth?mode=login&redirect=/uslugodawcy/profil/${t}`);return}e(`/wiadomosci?providerId=${t}`)},className:"w-full mt-3 py-3 border-2 border-gray-200 rounded-xl font-medium text-gray-700 hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2",children:[s.jsx(Mg,{className:"w-5 h-5"}),"Napisz wiadomo"]})]})})]})}),T&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-5xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Rezerwacja wysana!"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Twoja proba o rezerwacj u ",s.jsx("strong",{children:i.name})," zostaa wysana. Czekaj na potwierdzenie od usugodawcy."]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-left mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 font-medium mb-2",children:[s.jsx(Dt,{className:"w-4 h-4"}),"Oczekuje na potwierdzenie"]}),s.jsx("p",{className:"text-sm text-yellow-600",children:"Otrzymasz powiadomienie gdy usugodawca potwierdzi Twoj wizyt."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-left mb-4",children:[s.jsxs("p",{className:"text-sm mb-1",children:[s.jsx("strong",{children:"Data:"})," ",v," ",b.month]}),s.jsxs("p",{className:"text-sm mb-1",children:[s.jsx("strong",{children:"Godzina:"})," ",E]}),s.jsxs("p",{className:"text-sm mb-1",children:[s.jsx("strong",{children:"Usugi:"})," ",g.map(X=>X.name).join(", ")]}),s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:"cznie:"})," ",B," z"]})]}),s.jsx("button",{onClick:()=>{I(!1),x([]),P(null),S(null),n("Rezerwacja wysana! Czekaj na potwierdzenie.","success")},className:"w-full py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90",children:"OK, rozumiem"})]})})})]})},oi="conversations",Fd="messages",__=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),Wr={async getOrCreateConversation(t,e,n,r,i,o,l){try{const h=It(nt(we,oi),jt("providerId","==",r),jt("clientId","==",t)),m=await Et(h);if(!m.empty)return m.docs[0].data();const f=__(),g=new Date().toISOString(),x={id:f,participants:[t,i],participantNames:{[t]:e,[i]:o},participantAvatars:{[t]:n||"",[i]:l||""},providerId:r,providerOwnerId:i,clientId:t,lastMessage:"",lastMessageAt:g,lastMessageSenderId:"",unreadCount:{[t]:0,[i]:0},createdAt:g};return await wl(Ve(we,oi,f),x),x}catch(h){throw console.error("getOrCreateConversation error:",h),h}},async getConversations(t){try{const e=It(nt(we,oi),jt("participants","array-contains",t));return(await Et(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.lastMessageAt).getTime()-new Date(i.lastMessageAt).getTime())}catch(e){return console.error("getConversations error:",e),[]}},async getConversationsByProvider(t){try{const e=It(nt(we,oi),jt("providerId","==",t));return(await Et(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(o.lastMessageAt).getTime()-new Date(i.lastMessageAt).getTime())}catch(e){return console.error("getConversationsByProvider error:",e),[]}},subscribeToConversations(t,e){const n=It(nt(we,oi),jt("participants","array-contains",t));return rl(n,r=>{const i=r.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.lastMessageAt).getTime()-new Date(o.lastMessageAt).getTime()),e(i)})},subscribeToProviderConversations(t,e){const n=It(nt(we,oi),jt("providerId","==",t));return rl(n,r=>{const i=r.docs.map(o=>o.data());i.sort((o,l)=>new Date(l.lastMessageAt).getTime()-new Date(o.lastMessageAt).getTime()),e(i)})},async getMessages(t){try{const e=It(nt(we,Fd),jt("conversationId","==",t));return(await Et(e)).docs.map(i=>i.data()).sort((i,o)=>new Date(i.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(e){return console.error("getMessages error:",e),[]}},subscribeToMessages(t,e){const n=It(nt(we,Fd),jt("conversationId","==",t));return rl(n,r=>{const i=r.docs.map(o=>o.data());i.sort((o,l)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime()),e(i)})},async sendMessage(t,e,n,r,i,o){try{const l=__(),h=new Date().toISOString(),m={id:l,conversationId:t,senderId:e,senderName:n,senderAvatar:r||"",text:i,createdAt:h,read:!1};await wl(Ve(we,Fd,l),m);const f=Ve(we,oi,t),g=await $i(f);if(g.exists()){const v={...g.data().unreadCount};v[o]=(v[o]||0)+1,await Kt(f,{lastMessage:i,lastMessageAt:h,lastMessageSenderId:e,unreadCount:v})}return m}catch(l){throw console.error("sendMessage error:",l),l}},async markAsRead(t,e){try{const n=It(nt(we,Fd),jt("conversationId","==",t)),i=(await Et(n)).docs.filter(h=>{const m=h.data();return m.senderId!==e&&!m.read}).map(h=>Kt(h.ref,{read:!0}));await Promise.all(i);const o=Ve(we,oi,t),l=await $i(o);if(l.exists()){const m={...l.data().unreadCount};m[e]=0,await Kt(o,{unreadCount:m})}}catch(n){console.error("markAsRead error:",n)}},async countUnread(t){try{return(await this.getConversations(t)).reduce((n,r)=>n+(r.unreadCount[t]||0),0)}catch(e){return console.error("countUnread error:",e),0}},subscribeToUnreadCount(t,e){return this.subscribeToConversations(t,n=>{const r=n.reduce((i,o)=>i+(o.unreadCount[t]||0),0);e(r)})}},H6=()=>{const{user:t}=_t(),e=Pr(),[n]=Qj(),[r,i]=C.useState([]),[o,l]=C.useState(null),[h,m]=C.useState([]),[f,g]=C.useState(""),[x,v]=C.useState(""),[P,E]=C.useState(!0),[S,M]=C.useState(!1),j=C.useRef(null);C.useEffect(()=>{(async()=>{const N=n.get("providerId");if(!(!N||!(t!=null&&t.id)))try{const b=await Xt.getById(N);if(!b)return;const R=await Wr.getOrCreateConversation(t.id,t.username||"Uytkownik",t.avatar||"",b.id,b.ownerId,b.name,b.image||"");l(R)}catch(b){console.error("Error initializing conversation:",b)}})()},[n,t]),C.useEffect(()=>{if(!(t!=null&&t.id)){E(!1);return}const O=Wr.subscribeToConversations(t.id,N=>{i(N),E(!1)});return()=>O()},[t==null?void 0:t.id]),C.useEffect(()=>{if(!o||!(t!=null&&t.id))return;Wr.markAsRead(o.id,t.id);const O=Wr.subscribeToMessages(o.id,N=>{m(N)});return()=>O()},[o,t==null?void 0:t.id]),C.useEffect(()=>{var O;(O=j.current)==null||O.scrollIntoView({behavior:"smooth"})},[h]);const T=async()=>{if(!(!f.trim()||!o||!(t!=null&&t.id))){M(!0);try{const O=o.participants.find(N=>N!==t.id)||"";await Wr.sendMessage(o.id,t.id,t.username||"Uytkownik",t.avatar||"",f.trim(),O),g("")}catch(O){console.error("Error sending message:",O)}finally{M(!1)}}},I=O=>{if(!(t!=null&&t.id))return{name:"Nieznany",avatar:""};const N=O.participants.find(b=>b!==t.id)||"";return{name:O.participantNames[N]||"Nieznany",avatar:O.participantAvatars[N]||""}},W=O=>{const N=new Date(O),R=new Date().getTime()-N.getTime(),U=Math.floor(R/6e4),B=Math.floor(R/36e5),H=Math.floor(R/864e5);return U<1?"Teraz":U<60?`${U} min`:B<24?`${B}h`:H<7?`${H}d`:N.toLocaleDateString("pl-PL")},D=r.filter(O=>I(O).name.toLowerCase().includes(x.toLowerCase()));return t?P?s.jsx("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center",children:s.jsx(tt,{className:"w-12 h-12 animate-spin text-primary"})}):s.jsx("div",{className:"min-h-screen pt-20 pb-0",children:s.jsx("div",{className:"max-w-6xl mx-auto px-6",children:s.jsxs("div",{className:"h-[calc(100vh-120px)] flex bg-white rounded-2xl shadow-lg overflow-hidden",children:[s.jsxs("div",{className:`w-full md:w-80 lg:w-96 border-r border-gray-100 flex flex-col ${o?"hidden md:flex":""}`,children:[s.jsxs("div",{className:"p-4 border-b border-gray-100",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Wiadomoci"}),s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Szukaj...",value:x,onChange:O=>v(O.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:D.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(rs,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"Brak wiadomoci"}),s.jsx("p",{className:"text-sm mt-1",children:"Napisz do usugodawcy ze strony jego profilu"})]}):D.map(O=>{const N=I(O),b=t!=null&&t.id&&O.unreadCount[t.id]||0;return s.jsx("div",{onClick:()=>l(O),className:`p-4 border-b border-gray-50 cursor-pointer transition-colors ${(o==null?void 0:o.id)===O.id?"bg-primary/10":"hover:bg-gray-50"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[N.avatar?s.jsx("img",{src:N.avatar,alt:N.name,className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white font-bold",children:N.name.charAt(0).toUpperCase()}),b>0&&s.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:b})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-900",children:N.name}),s.jsx("span",{className:"text-xs text-gray-500",children:W(O.lastMessageAt)})]}),s.jsx("p",{className:`text-sm truncate ${b>0?"font-medium text-gray-900":"text-gray-500"}`,children:O.lastMessage||"Brak wiadomoci"})]})]})},O.id)})})]}),o?s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center gap-3",children:[s.jsx("button",{onClick:()=>l(null),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(fu,{className:"w-5 h-5"})}),(()=>{const O=I(o);return s.jsxs(s.Fragment,{children:[O.avatar?s.jsx("img",{src:O.avatar,alt:O.name,className:"w-10 h-10 rounded-full object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white font-bold",children:O.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:O.name}),s.jsx("div",{className:"text-xs text-gray-500",children:"Usugodawca"})]})]})})()]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[h.length===0?s.jsxs("div",{className:"text-center text-gray-500 py-8",children:[s.jsx("p",{children:"Rozpocznij rozmow"}),s.jsx("p",{className:"text-sm",children:"Napisz do usugodawcy"})]}):h.map(O=>{const N=O.senderId===(t==null?void 0:t.id);return s.jsx("div",{className:`flex ${N?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2 ${N?"bg-gradient-to-r from-primary to-secondary text-white":"bg-white text-gray-900 shadow-sm"}`,children:[s.jsx("p",{children:O.text}),s.jsx("div",{className:`text-xs mt-1 ${N?"text-white/70":"text-gray-400"}`,children:W(O.createdAt)})]})},O.id)}),s.jsx("div",{ref:j})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-white",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:f,onChange:O=>g(O.target.value),onKeyPress:O=>O.key==="Enter"&&T(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary"}),s.jsx("button",{onClick:T,disabled:!f.trim()||S,className:"p-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:S?s.jsx(tt,{className:"w-5 h-5 animate-spin"}):s.jsx(om,{className:"w-5 h-5"})})]})})]}):s.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(rs,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg",children:"Wybierz konwersacj"}),s.jsx("p",{className:"text-sm",children:"lub napisz do usugodawcy z jego profilu"})]})})]})})}):s.jsx("div",{className:"min-h-screen pt-24 pb-12",children:s.jsx("div",{className:"max-w-4xl mx-auto px-6",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[s.jsx(rs,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Zaloguj si"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Musisz by zalogowany, aby korzysta z wiadomoci"}),s.jsx("button",{onClick:()=>e("/auth?mode=login"),className:"px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold",children:"Zaloguj si"})]})})})},q6=()=>{const{user:t}=_t(),{showToast:e}=mn(),n=Pr(),[r,i]=C.useState([]),[o,l]=C.useState(!0),[h,m]=C.useState("all"),[f,g]=C.useState("all");C.useEffect(()=>{if(!t||!t.id){console.log("NotificationsPage: No user or user.id"),l(!1);return}console.log("NotificationsPage: Subscribing for user",t.id);const D=Pn.subscribe(t.id,O=>{console.log("NotificationsPage: Got notifications",O.length),i(O),l(!1)});return()=>D()},[t]);const x=async D=>{try{await Pn.markAsRead(D)}catch{e("Bd oznaczania jako przeczytane","error")}},v=async()=>{if(!(!t||!t.id))try{await Pn.markAllAsRead(t.id),e("Wszystkie oznaczone jako przeczytane","success")}catch{e("Bd oznaczania powiadomie","error")}},P=async D=>{try{await Pn.delete(D),e("Powiadomienie usunite","success")}catch{e("Bd usuwania powiadomienia","error")}},E=async()=>{if(!(!t||!t.id)&&confirm("Czy na pewno chcesz usun wszystkie powiadomienia?"))try{await Pn.deleteAllByUser(t.id),e("Wszystkie powiadomienia usunite","success")}catch{e("Bd usuwania powiadomie","error")}},S=D=>{var O,N;x(D.id),(O=D.data)!=null&&O.bookingId?n("/profil"):D.type==="new_message"?n("/wiadomosci"):D.type==="new_review"&&((N=D.data)!=null&&N.providerId)&&n(`/uslugodawcy/profil/${D.data.providerId}`)},M=D=>{switch(D){case"booking_request":case"booking_confirmed":case"booking_cancelled":case"booking_completed":case"booking_reminder":return s.jsx(un,{className:"w-5 h-5"});case"new_message":return s.jsx(rs,{className:"w-5 h-5"});case"new_review":return s.jsx(jr,{className:"w-5 h-5"});default:return s.jsx(ts,{className:"w-5 h-5"})}},j=D=>{switch(D){case"booking_request":return"bg-blue-100 text-blue-600";case"booking_confirmed":return"bg-green-100 text-green-600";case"booking_cancelled":return"bg-red-100 text-red-600";case"booking_completed":return"bg-purple-100 text-purple-600";case"booking_reminder":return"bg-yellow-100 text-yellow-600";case"new_message":return"bg-indigo-100 text-indigo-600";case"new_review":return"bg-amber-100 text-amber-600";default:return"bg-gray-100 text-gray-600"}},T=D=>{const O=new Date(D),b=new Date().getTime()-O.getTime(),R=Math.floor(b/6e4),U=Math.floor(b/36e5),B=Math.floor(b/864e5);return R<1?"Teraz":R<60?`${R} min temu`:U<24?`${U}h temu`:B===1?"Wczoraj":B<7?`${B} dni temu`:O.toLocaleDateString("pl-PL")},I=r.filter(D=>!(h==="unread"&&D.read||f!=="all"&&(f==="booking"&&!D.type.startsWith("booking")||f==="message"&&D.type!=="new_message"||f==="system"&&D.type!=="system"))),W=r.filter(D=>!D.read).length;return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx(tt,{className:"w-8 h-8 animate-spin text-primary"})}):t?s.jsx("div",{className:"min-h-screen bg-gray-50 pt-8 pb-16",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Powiadomienia"}),s.jsx("p",{className:"text-gray-600",children:W>0?`${W} nieprzeczytanych`:"Wszystkie przeczytane"})]}),s.jsx("div",{className:"flex items-center gap-2",children:W>0&&s.jsxs("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:[s.jsx(Tt,{className:"w-4 h-4 inline mr-1"}),"Przeczytaj wszystkie"]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>m("all"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${h==="all"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:"Wszystkie"}),s.jsxs("button",{onClick:()=>m("unread"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${h==="unread"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:["Nieprzeczytane (",W,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($x,{className:"w-4 h-4 text-gray-400"}),s.jsxs("select",{value:f,onChange:D=>g(D.target.value),className:"bg-transparent text-sm text-gray-600 focus:outline-none cursor-pointer",children:[s.jsx("option",{value:"all",children:"Wszystkie typy"}),s.jsx("option",{value:"booking",children:"Rezerwacje"}),s.jsx("option",{value:"message",children:"Wiadomoci"}),s.jsx("option",{value:"system",children:"Systemowe"})]})]}),r.length>0&&s.jsx("button",{onClick:E,className:"ml-auto text-sm text-red-500 hover:text-red-600",children:"Usu wszystkie"})]})}),s.jsx("div",{className:"space-y-3",children:I.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[s.jsx(ts,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak powiadomie"}),s.jsx("p",{className:"text-gray-500",children:h==="unread"?"Wszystkie powiadomienia zostay przeczytane":"Nie masz jeszcze adnych powiadomie"})]}):I.map(D=>s.jsxs("div",{className:`bg-white rounded-xl shadow-sm p-4 flex items-start gap-4 transition-all hover:shadow-md cursor-pointer ${D.read?"":"border-l-4 border-primary"}`,onClick:()=>S(D),children:[s.jsx("div",{className:`p-3 rounded-xl ${j(D.type)}`,children:M(D.type)}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:`font-semibold ${D.read?"text-gray-700":"text-gray-900"}`,children:[Pn.getIcon(D.type)," ",D.title]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D.message}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:T(D.createdAt)})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-4",onClick:O=>O.stopPropagation(),children:[!D.read&&s.jsx("button",{onClick:()=>x(D.id),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Oznacz jako przeczytane",children:s.jsx(Tt,{className:"w-4 h-4 text-gray-400"})}),s.jsx("button",{onClick:()=>P(D.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:s.jsx(Ki,{className:"w-4 h-4 text-gray-400 hover:text-red-500"})})]})]})})]},D.id))})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ts,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Zaloguj si"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Zaloguj si, aby zobaczy powiadomienia"}),s.jsx(be,{to:"/auth",className:"text-primary hover:underline",children:"Przejd do logowania"})]})})},Z6=()=>{const t=[{icon:vl,title:"Pasja",description:"Kochamy to co robimy i wkadamy serce w kady aspekt naszej platformy."},{icon:_l,title:"Spoeczno",description:"Budujemy mosty midzy specjalistami a klientami, tworzc siln spoeczno."},{icon:Hn,title:"Zaufanie",description:"Bezpieczestwo i wiarygodno to fundamenty naszej dziaalnoci."},{icon:p6,title:"Innowacja",description:"Cigle rozwijamy platform, by oferowa najlepsze dowiadczenia."}],e=[{value:"10,000+",label:"Zadowolonych klientw"},{value:"500+",label:"Specjalistw"},{value:"25,000+",label:"Wykonanych usug"},{value:"4.9",label:"rednia ocena"}],n=[{name:"Mykyta Ivchenko",role:"Co-Founder & Developer",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200"},{name:"Grzegorz Rychlicki",role:"Co-Founder & CEO",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200"},{name:"Jakub Biaasik",role:"Co-Founder & CTO",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=200"}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"O nas"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"ToMyHomeApp to platforma czca profesjonalnych specjalistw beauty i wellness z klientami szukajcymi usug w zaciszu wasnego domu."})]})}),s.jsx("section",{className:"py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 text-primary rounded-full text-sm font-semibold mb-6",children:[s.jsx(g6,{className:"w-4 h-4"}),"Nasza misja"]}),s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Demokratyzujemy dostp do profesjonalnych usug beauty"}),s.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:"Wierzymy, e kady zasuguje na profesjonaln pielgnacj bez wychodzenia z domu. Nasza platforma powstaa z myl o wygodzie klientw i rozwoju specjalistw."}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:"czymy najlepszych specjalistw z klientami, zapewniajc bezpieczestwo, wygod i najwysz jako usug. Od fryzjerstwa po masae - wszystko dostpne na wycignicie rki."})]}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=600",alt:"Nasza misja",className:"rounded-2xl shadow-xl"}),s.jsx("div",{className:"absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-lg",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:s.jsx(sm,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-gray-900",children:"Od 2024"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Na rynku"})]})]})})]})]})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((r,i)=>s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-4xl font-bold text-primary mb-2",children:r.value}),s.jsx("p",{className:"text-gray-600",children:r.label})]},i))})})}),s.jsx("section",{className:"py-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Nasze wartoci"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Kierujemy si zasadami, ktre pomagaj nam tworzy lepsz platform dla wszystkich."})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((r,i)=>s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4",children:s.jsx(r.icon,{className:"w-6 h-6 text-primary"})}),s.jsx("h3",{className:"font-bold text-lg mb-2",children:r.title}),s.jsx("p",{className:"text-gray-600 text-sm",children:r.description})]},i))})]})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Nasz zesp"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Poznaj ludzi, ktrzy tworz ToMyHomeApp i dbaj o Twoje dowiadczenia."})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-3xl mx-auto",children:n.map((r,i)=>s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:r.image,alt:r.name,className:"w-32 h-32 rounded-full mx-auto mb-4 object-cover"}),s.jsx("h3",{className:"font-bold text-lg",children:r.name}),s.jsx("p",{className:"text-gray-500",children:r.role})]},i))})]})}),s.jsx("section",{className:"py-16 bg-gradient-to-r from-primary to-secondary text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Docz do nas!"}),s.jsx("p",{className:"text-white/90 mb-8 max-w-2xl mx-auto",children:"Zosta czci naszej spoecznoci - jako klient lub specjalista."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx("a",{href:"/uslugodawcy",className:"px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Znajd specjalist"}),s.jsx("a",{href:"/auth?mode=register&type=provider",className:"px-8 py-3 bg-white/20 text-white font-semibold rounded-xl hover:bg-white/30 transition-all",children:"Zosta specjalist"})]})]})})]})},K6=()=>{const t=[{icon:vl,title:"Ubezpieczenie zdrowotne",description:"Peny pakiet medyczny dla Ciebie i rodziny"},{icon:N6,title:"Elastyczna praca",description:"Hybrydowy model pracy - biuro lub zdalnie"},{icon:_l,title:"wietny zesp",description:"Pracuj z pasjonatami technologii i beauty"},{icon:t6,title:"Benefity",description:"Karta sportowa, owocowe wtorki, integracje"}],e=[{title:"Senior Frontend Developer",department:"Engineering",location:"Pozna / Remote",type:"Peny etat",description:"Szukamy dowiadczonego frontend developera do rozwoju naszej platformy React."},{title:"Product Designer",department:"Design",location:"Pozna / Remote",type:"Peny etat",description:"Docz do zespou designu i twrz pikne interfejsy dla naszych uytkownikw."},{title:"Customer Success Manager",department:"Operations",location:"Pozna",type:"Peny etat",description:"Pomagaj naszym specjalistom rozwija ich biznesy na platformie."},{title:"Marketing Specialist",department:"Marketing",location:"Pozna / Remote",type:"Peny etat",description:"Twrz kampanie marketingowe i rozwijaj nasz obecno w social media."}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Kariera"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Docz do zespou, ktry zmienia bran beauty i wellness w Polsce. Szukamy talentw, ktre pomog nam rosn!"})]})}),s.jsx("section",{className:"py-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Dlaczego warto z nami pracowa?"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Oferujemy nie tylko prac, ale moliwo rozwoju w dynamicznym startupie."})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((n,r)=>s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center",children:[s.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(n.icon,{className:"w-7 h-7 text-primary"})}),s.jsx("h3",{className:"font-bold text-lg mb-2",children:n.title}),s.jsx("p",{className:"text-gray-600 text-sm",children:n.description})]},r))})]})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Otwarte stanowiska"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Znajd swoj wymarzon rol i docz do naszego zespou."})]}),s.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:e.map((n,r)=>s.jsx("div",{className:"bg-gray-50 p-6 rounded-2xl hover:shadow-md transition-shadow cursor-pointer group",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary text-xs font-semibold rounded-full",children:n.department})}),s.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-primary transition-colors",children:n.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:n.description}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ns,{className:"w-4 h-4"}),n.location]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Dt,{className:"w-4 h-4"}),n.type]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold group-hover:translate-x-2 transition-transform",children:["Aplikuj",s.jsx(pu,{className:"w-5 h-5"})]})]})},r))})]})}),s.jsx("section",{className:"py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[s.jsx(Hi,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie znalaze odpowiedniej oferty?"}),s.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Wylij nam swoje CV, a odezwiemy si gdy pojawi si stanowisko odpowiadajce Twoim umiejtnociom."}),s.jsxs("a",{href:"mailto:kariera@tomyhomeapp.pl",className:"inline-flex items-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:["Wylij CV",s.jsx(pu,{className:"w-5 h-5"})]})]})})})]})},G6=()=>{const t={title:"Jak wybra idealnego fryzjera mobilnego? Kompletny przewodnik",excerpt:"Dowiedz si, na co zwraca uwag przy wyborze specjalisty, ktry przyjedzie do Twojego domu. Porady ekspertw i wskazwki od naszych najlepszych fryzjerw.",image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800",author:"Anna Kowalska",date:"20 grudnia 2024",readTime:"8 min",category:"Porady"},e=[{title:"5 trendw w manicure na 2025 rok",excerpt:"Poznaj najgortsze trendy w stylizacji paznokci, ktre bd krlowa w nadchodzcym roku.",image:"https://images.unsplash.com/photo-1604654894610-df63bc536371?w=400",author:"Marta Winiewska",date:"18 grudnia 2024",readTime:"5 min",category:"Trendy"},{title:"Masa relaksacyjny w domu - co przygotowa?",excerpt:"Lista rzeczy, ktre warto mie pod rk przed wizyt masaysty w Twoim domu.",image:"https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=400",author:"Tomasz Zieliski",date:"15 grudnia 2024",readTime:"4 min",category:"Porady"},{title:"Jak zosta specjalist na ToMyHomeApp?",excerpt:"Przewodnik krok po kroku dla profesjonalistw, ktrzy chc doczy do naszej platformy.",image:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=400",author:"Piotr Nowak",date:"12 grudnia 2024",readTime:"6 min",category:"Dla specjalistw"},{title:"Pielgnacja wosw zim - porady eksperta",excerpt:"Jak dba o wosy w chodne miesice? Nasze specjalistki dziel si sekretami.",image:"https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=400",author:"Karolina Maj",date:"10 grudnia 2024",readTime:"5 min",category:"Porady"},{title:"Historia sukcesu: Od maego salonu do 100 klientw miesicznie",excerpt:"Poznaj histori Ewy, ktra dziki ToMyHomeApp rozwina swj biznes.",image:"https://images.unsplash.com/photo-1582095133179-bfd08e2fc6b3?w=400",author:"Ewa Szymaska",date:"8 grudnia 2024",readTime:"7 min",category:"Historie sukcesu"},{title:"Bezpieczestwo usug mobilnych - na co zwraca uwag?",excerpt:"Wskazwki dotyczce bezpieczestwa zarwno dla klientw, jak i specjalistw.",image:"https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=400",author:"Anna Kowalska",date:"5 grudnia 2024",readTime:"6 min",category:"Bezpieczestwo"}],n=["Wszystkie","Porady","Trendy","Dla specjalistw","Historie sukcesu","Bezpieczestwo"];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Blog"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Porady, inspiracje i nowoci ze wiata beauty i wellness. Bd na bieco z najnowszymi trendami!"})]})}),s.jsx("section",{className:"py-8 bg-white border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:n.map((r,i)=>s.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i===0?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:r},i))})})}),s.jsx("section",{className:"py-12",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:s.jsxs("div",{className:"grid lg:grid-cols-2",children:[s.jsx("img",{src:t.image,alt:t.title,className:"w-full h-64 lg:h-full object-cover"}),s.jsxs("div",{className:"p-8 lg:p-12 flex flex-col justify-center",children:[s.jsx("span",{className:"inline-block px-3 py-1 bg-primary/10 text-primary text-sm font-semibold rounded-full w-fit mb-4",children:t.category}),s.jsx("h2",{className:"text-2xl lg:text-3xl font-bold mb-4",children:t.title}),s.jsx("p",{className:"text-gray-600 mb-6",children:t.excerpt}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-6",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Mn,{className:"w-4 h-4"}),t.author]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(un,{className:"w-4 h-4"}),t.date]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Dt,{className:"w-4 h-4"}),t.readTime]})]}),s.jsxs("button",{className:"flex items-center gap-2 text-primary font-semibold hover:gap-3 transition-all",children:["Czytaj wicej",s.jsx(QL,{className:"w-5 h-5"})]})]})]})})})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8",children:"Najnowsze artykuy"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((r,i)=>s.jsxs("article",{className:"bg-white rounded-2xl shadow-sm overflow-hidden hover:shadow-md transition-shadow cursor-pointer group",children:[s.jsxs("div",{className:"relative overflow-hidden",children:[s.jsx("img",{src:r.image,alt:r.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx("span",{className:"absolute top-4 left-4 px-3 py-1 bg-white/90 text-sm font-medium rounded-full",children:r.category})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 group-hover:text-primary transition-colors",children:r.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:r.excerpt}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Mn,{className:"w-4 h-4"}),r.author]}),s.jsx("span",{children:r.readTime})]})]})]},i))})]})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie przegap adnego artykuu!"}),s.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Zapisz si do naszego newslettera i otrzymuj najnowsze porady i inspiracje prosto na swoj skrzynk."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center max-w-md mx-auto",children:[s.jsx("input",{type:"email",placeholder:"Twj email...",className:"flex-1 px-4 py-3 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"}),s.jsx("button",{className:"px-6 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Zapisz si"})]})]})})})]})},Q6=()=>{const[t,e]=C.useState({name:"",email:"",subject:"",message:""}),[n,r]=C.useState(!1),[i,o]=C.useState(!1),l=async f=>{f.preventDefault(),r(!0),await new Promise(g=>setTimeout(g,1e3)),r(!1),o(!0),e({name:"",email:"",subject:"",message:""})},h=[{icon:Bs,title:"Email",value:"kontakt@tomyhomeapp.pl",link:"mailto:kontakt@tomyhomeapp.pl"},{icon:Zi,title:"Telefon",value:"+48 123 456 789",link:"tel:+48123456789"},{icon:ns,title:"Adres",value:"ul. Przykadowa 1, 61-001 Pozna",link:"https://maps.google.com"},{icon:Dt,title:"Godziny pracy",value:"Pn-Pt: 9:00 - 17:00",link:null}],m=[{icon:i6,title:"Obsuga klienta",description:"Pomoc z rezerwacjami i kontem",email:"pomoc@tomyhomeapp.pl"},{icon:JL,title:"Dla specjalistw",description:"Pytania dotyczce wsppracy",email:"specjalisci@tomyhomeapp.pl"},{icon:rs,title:"Media i PR",description:"Zapytania prasowe i wspprace",email:"media@tomyhomeapp.pl"}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Kontakt"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Masz pytania? Chtnie pomoemy! Skontaktuj si z nami w dogodny dla Ciebie sposb."})]})}),s.jsx("section",{className:"py-12 -mt-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:h.map((f,g)=>s.jsxs("a",{href:f.link||"#",className:`bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow ${f.link?"cursor-pointer":"cursor-default"}`,children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4",children:s.jsx(f.icon,{className:"w-6 h-6 text-primary"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:f.title}),s.jsx("p",{className:"text-gray-600",children:f.value})]},g))})})}),s.jsx("section",{className:"py-12",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Wylij wiadomo"}),i?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(om,{className:"w-8 h-8 text-green-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Wiadomo wysana!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Dzikujemy za kontakt. Odpowiemy najszybciej jak to moliwe."}),s.jsx("button",{onClick:()=>o(!1),className:"text-primary font-semibold hover:underline",children:"Wylij kolejn wiadomo"})]}):s.jsxs("form",{onSubmit:l,className:"space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),s.jsx("input",{type:"text",required:!0,value:t.name,onChange:f=>e({...t,name:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",placeholder:"Jan Kowalski"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",required:!0,value:t.email,onChange:f=>e({...t,email:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",placeholder:"jan@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temat"}),s.jsxs("select",{required:!0,value:t.subject,onChange:f=>e({...t,subject:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0",children:[s.jsx("option",{value:"",children:"Wybierz temat"}),s.jsx("option",{value:"general",children:"Pytanie oglne"}),s.jsx("option",{value:"booking",children:"Problem z rezerwacj"}),s.jsx("option",{value:"account",children:"Problem z kontem"}),s.jsx("option",{value:"specialist",children:"Chc zosta specjalist"}),s.jsx("option",{value:"partnership",children:"Wsppraca biznesowa"}),s.jsx("option",{value:"other",children:"Inne"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wiadomo"}),s.jsx("textarea",{required:!0,rows:5,value:t.message,onChange:f=>e({...t,message:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 resize-none",placeholder:"Opisz swoje pytanie lub problem..."})]}),s.jsx("button",{type:"submit",disabled:n,className:"w-full py-3 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-xl hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:n?"Wysyanie...":s.jsxs(s.Fragment,{children:[s.jsx(om,{className:"w-5 h-5"}),"Wylij wiadomo"]})})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Dziay"}),s.jsx("div",{className:"space-y-4 mb-8",children:m.map((f,g)=>s.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx(f.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900",children:f.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:f.description}),s.jsx("a",{href:`mailto:${f.email}`,className:"text-primary font-medium hover:underline",children:f.email})]})]})},g))}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[s.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Nasza lokalizacja"}),s.jsx("div",{className:"h-64 bg-gray-100 rounded-xl overflow-hidden",children:s.jsx("iframe",{title:"Lokalizacja",width:"100%",height:"100%",style:{border:0},loading:"lazy",src:"https://www.openstreetmap.org/export/embed.html?bbox=16.90%2C52.40%2C16.95%2C52.42&layer=mapnik"})}),s.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"ul. Przykadowa 1, 61-001 Pozna"})]})]})]})})})]})},Y6=()=>{const[t,e]=C.useState("all"),[n,r]=C.useState(""),[i,o]=C.useState(null),l=[{id:"all",label:"Wszystkie",icon:sl},{id:"client",label:"Dla klientw",icon:Mn},{id:"specialist",label:"Dla specjalistw",icon:Hi},{id:"payments",label:"Patnoci",icon:am},{id:"safety",label:"Bezpieczestwo",icon:Hn}],m=[{category:"client",question:"Jak zarezerwowa wizyt u specjalisty?",answer:"Aby zarezerwowa wizyt, wyszukaj interesujc Ci usug lub specjalist, wybierz odpowiedni termin z kalendarza i potwierd rezerwacj. Otrzymasz powiadomienie email z potwierdzeniem oraz przypomnienie przed wizyt."},{category:"client",question:"Czy mog anulowa rezerwacj?",answer:'Tak, moesz anulowa rezerwacj w dowolnym momencie. Zalecamy jednak anulowanie z minimum 24-godzinnym wyprzedzeniem, aby specjalista mg przyj innych klientw. Anulowanie moesz wykona w zakadce "Moje rezerwacje".'},{category:"client",question:"Jak dziaa usuga z dojazdem do domu?",answer:"Specjalici oferujcy usugi mobilne przyjedaj do Twojego domu z penym wyposaeniem. Przy rezerwacji podajesz swj adres, a specjalista potwierdza moliwo dojazdu. Niektrzy specjalici mog doliczy opat za dojazd."},{category:"client",question:"Co jeli nie jestem zadowolony z usugi?",answer:"Twoje zadowolenie jest dla nas najwaniejsze. Jeli usuga nie spenia Twoich oczekiwa, skontaktuj si z nami przez formularz kontaktowy w cigu 48 godzin. Rozpatrzymy kad reklamacj indywidualnie."},{category:"specialist",question:"Jak zosta specjalist na platformie?",answer:'Zarejestruj si wybierajc opcj "Konto specjalisty", uzupenij swj profil, dodaj usugi i zdjcia portfolio. Po weryfikacji Twoje konto zostanie aktywowane i bdziesz widoczny dla klientw.'},{category:"specialist",question:"Ile kosztuje konto specjalisty?",answer:"Rejestracja i podstawowe konto s cakowicie bezpatne. Pobieramy niewielk prowizj tylko od zrealizowanych rezerwacji. Oferujemy te plany Premium z dodatkowymi funkcjami promocyjnymi."},{category:"specialist",question:"Jak ustawi swoje godziny pracy?",answer:'W panelu specjalisty przejd do sekcji "Godziny pracy". Moesz ustawi godziny dla kadego dnia tygodnia osobno, a take blokowa konkretne daty gdy nie pracujesz.'},{category:"specialist",question:"Jak otrzymuj patnoci za usugi?",answer:"Patnoci s przetwarzane przez nasz platform. Po zrealizowanej usudze rodki trafiaj na Twoje konto w systemie. Moesz je wypaci na konto bankowe w dowolnym momencie (minimum 50 z)."},{category:"payments",question:"Jakie formy patnoci s akceptowane?",answer:"Akceptujemy patnoci kart (Visa, Mastercard), BLIK, szybkie przelewy oraz tradycyjne przelewy bankowe. Niektrzy specjalici akceptuj te patno gotwk na miejscu."},{category:"payments",question:"Kiedy nastpuje patno za usug?",answer:"Patno jest pobierana po potwierdzeniu rezerwacji przez specjalist. rodki s blokowane na Twoim koncie i przekazywane specjalicie po wykonaniu usugi."},{category:"payments",question:"Czy otrzymam faktur?",answer:"Tak, po kadej transakcji otrzymasz potwierdzenie patnoci na email. Jeli potrzebujesz faktury VAT, moesz j wygenerowa w panelu uytkownika lub poprosi o ni specjalist."},{category:"safety",question:"Czy specjalici s weryfikowani?",answer:"Tak, kady specjalista przechodzi proces weryfikacji tosamoci. Sprawdzamy dokumenty, certyfikaty i dowiadczenie. Dodatkowo system opinii pozwala klientom ocenia jako usug."},{category:"safety",question:"Jak chronione s moje dane osobowe?",answer:"Stosujemy najwysze standardy bezpieczestwa danych zgodne z RODO. Twoje dane s szyfrowane i nigdy nie s udostpniane osobom trzecim bez Twojej zgody. Wicej w naszej Polityce Prywatnoci."},{category:"safety",question:"Co zrobi w przypadku problemu podczas wizyty?",answer:"W nagych przypadkach skontaktuj si z nami przez formularz kontaktowy lub telefon. Nasz zesp wsparcia jest dostpny 7 dni w tygodniu i pomoe rozwiza kady problem."}].filter(f=>{const g=t==="all"||f.category===t,x=f.question.toLowerCase().includes(n.toLowerCase())||f.answer.toLowerCase().includes(n.toLowerCase());return g&&x});return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Czsto zadawane pytania"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto mb-8",children:"Znajd odpowiedzi na najczstsze pytania dotyczce naszej platformy."}),s.jsxs("div",{className:"max-w-xl mx-auto relative",children:[s.jsx(qs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Szukaj pytania...",value:n,onChange:f=>r(f.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"})]})]})}),s.jsx("section",{className:"py-8 bg-white border-b sticky top-16 z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:l.map(f=>s.jsxs("button",{onClick:()=>e(f.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${t===f.id?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.jsx(f.icon,{className:"w-4 h-4"}),f.label]},f.id))})})}),s.jsx("section",{className:"py-12",children:s.jsx("div",{className:"max-w-3xl mx-auto px-6",children:m.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(sl,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak wynikw"}),s.jsx("p",{className:"text-gray-600",children:"Nie znaleziono pyta pasujcych do kryteriw. Sprbuj innych sw kluczowych."})]}):s.jsx("div",{className:"space-y-4",children:m.map((f,g)=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[s.jsxs("button",{onClick:()=>o(i===g?null:g),className:"w-full px-6 py-5 text-left flex items-center justify-between gap-4",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:f.question}),s.jsx(im,{className:`w-5 h-5 text-gray-400 transition-transform ${i===g?"rotate-180":""}`})]}),i===g&&s.jsx("div",{className:"px-6 pb-5",children:s.jsx("p",{className:"text-gray-600 leading-relaxed",children:f.answer})})]},g))})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[s.jsx(sl,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nie znalaze odpowiedzi?"}),s.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Nasz zesp wsparcia chtnie odpowie na Twoje pytania. Skontaktuj si z nami!"}),s.jsx("a",{href:"/kontakt",className:"inline-flex items-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:"Skontaktuj si z nami"})]})})})]})},J6=()=>{const t="1 grudnia 2024",e=[{title:"1. Postanowienia oglne",content:`
        <p>1.1. Niniejszy Regulamin okrela zasady korzystania z platformy ToMyHomeApp, dostpnej pod adresem tomyhomeapp.pl.</p>
        <p>1.2. Wacicielem i operatorem platformy jest ToMyHomeApp Sp. z o.o. z siedzib w Poznaniu, ul. Przykadowa 1, 61-001 Pozna, wpisana do rejestru przedsibiorcw KRS pod numerem 0000000000.</p>
        <p>1.3. Korzystanie z platformy oznacza akceptacj niniejszego Regulaminu.</p>
        <p>1.4. Platforma umoliwia czenie Klientw ze Specjalistami wiadczcymi usugi z zakresu beauty i wellness.</p>
      `},{title:"2. Definicje",content:`
        <p><strong>Platforma</strong> - serwis internetowy ToMyHomeApp umoliwiajcy rezerwacj usug.</p>
        <p><strong>Klient</strong> - osoba fizyczna korzystajca z Platformy w celu rezerwacji usug.</p>
        <p><strong>Specjalista</strong> - osoba fizyczna lub prawna oferujca swoje usugi za porednictwem Platformy.</p>
        <p><strong>Usuga</strong> - wiadczenie oferowane przez Specjalist za porednictwem Platformy.</p>
        <p><strong>Rezerwacja</strong> - umowa o wiadczenie Usugi zawarta midzy Klientem a Specjalist.</p>
        <p><strong>Konto</strong> - indywidualne konto uytkownika na Platformie.</p>
      `},{title:"3. Rejestracja i Konto",content:`
        <p>3.1. Korzystanie z penej funkcjonalnoci Platformy wymaga utworzenia Konta.</p>
        <p>3.2. Rejestracja jest bezpatna i wymaga podania prawdziwych danych osobowych.</p>
        <p>3.3. Uytkownik zobowizuje si do zachowania poufnoci danych logowania.</p>
        <p>3.4. Jedno Konto moe by uywane wycznie przez jedn osob.</p>
        <p>3.5. Operator zastrzega sobie prawo do zawieszenia lub usunicia Konta w przypadku naruszenia Regulaminu.</p>
      `},{title:"4. Rezerwacje",content:`
        <p>4.1. Rezerwacja zostaje dokonana po wyborze Usugi, terminu i potwierdzeniu przez Specjalist.</p>
        <p>4.2. Klient otrzymuje potwierdzenie Rezerwacji drog elektroniczn.</p>
        <p>4.3. Anulowanie Rezerwacji jest moliwe zgodnie z polityk anulowania danego Specjalisty.</p>
        <p>4.4. Zalecamy anulowanie z minimum 24-godzinnym wyprzedzeniem.</p>
        <p>4.5. Niestawienie si na umwion wizyt bez uprzedniego anulowania moe skutkowa naliczeniem opaty.</p>
      `},{title:"5. Patnoci",content:`
        <p>5.1. Ceny Usug s okrelane przez Specjalistw i widoczne przy kadej ofercie.</p>
        <p>5.2. Platforma umoliwia patnoci online za porednictwem zaufanych operatorw patnoci.</p>
        <p>5.3. Patno jest pobierana po potwierdzeniu Rezerwacji przez Specjalist.</p>
        <p>5.4. W przypadku anulowania Rezerwacji, zwrot rodkw nastpuje zgodnie z polityk zwrotw.</p>
        <p>5.5. Platforma pobiera prowizj od Specjalistw za zrealizowane Rezerwacje.</p>
      `},{title:"6. Obowizki Specjalistw",content:`
        <p>6.1. Specjalista zobowizuje si do wiadczenia Usug zgodnie z opisem i najwysz starannoci.</p>
        <p>6.2. Specjalista ponosi pen odpowiedzialno za jako wiadczonych Usug.</p>
        <p>6.3. Specjalista zobowizuje si do posiadania wymaganych kwalifikacji i uprawnie.</p>
        <p>6.4. Specjalista zobowizuje si do przestrzegania zasad higieny i bezpieczestwa.</p>
        <p>6.5. Specjalista zobowizuje si do terminowego realizowania Rezerwacji.</p>
      `},{title:"7. Obowizki Klientw",content:`
        <p>7.1. Klient zobowizuje si do podawania prawdziwych danych przy Rezerwacji.</p>
        <p>7.2. Klient zobowizuje si do terminowego stawiania si na umwione wizyty.</p>
        <p>7.3. Klient zobowizuje si do informowania o wszelkich przeciwwskazaniach zdrowotnych.</p>
        <p>7.4. Klient zobowizuje si do traktowania Specjalisty z szacunkiem.</p>
        <p>7.5. Klient zobowizuje si do terminowej zapaty za Usugi.</p>
      `},{title:"8. Odpowiedzialno",content:`
        <p>8.1. Platforma peni rol porednika midzy Klientem a Specjalist.</p>
        <p>8.2. Platforma nie ponosi odpowiedzialnoci za jako Usug wiadczonych przez Specjalistw.</p>
        <p>8.3. Platforma nie ponosi odpowiedzialnoci za szkody wynike z dziaa Specjalistw.</p>
        <p>8.4. Wszelkie spory midzy Klientem a Specjalist powinny by rozwizywane bezporednio midzy stronami.</p>
        <p>8.5. Platforma moe poredniczy w rozwizywaniu sporw na prob stron.</p>
      `},{title:"9. Reklamacje",content:`
        <p>9.1. Reklamacje mona skada drog elektroniczn na adres: reklamacje@tomyhomeapp.pl.</p>
        <p>9.2. Reklamacja powinna zawiera opis problemu i dane kontaktowe.</p>
        <p>9.3. Reklamacje s rozpatrywane w terminie 14 dni roboczych.</p>
        <p>9.4. O wyniku rozpatrzenia reklamacji Uytkownik zostanie poinformowany drog elektroniczn.</p>
      `},{title:"10. Ochrona danych osobowych",content:`
        <p>10.1. Administratorem danych osobowych jest ToMyHomeApp Sp. z o.o.</p>
        <p>10.2. Dane osobowe s przetwarzane zgodnie z RODO i Polityk Prywatnoci.</p>
        <p>10.3. Uytkownik ma prawo dostpu do swoich danych, ich poprawiania i usunicia.</p>
        <p>10.4. Szczegowe informacje znajduj si w Polityce Prywatnoci.</p>
      `},{title:"11. Postanowienia kocowe",content:`
        <p>11.1. Operator zastrzega sobie prawo do zmiany Regulaminu.</p>
        <p>11.2. O zmianach Uytkownicy zostan poinformowani z 14-dniowym wyprzedzeniem.</p>
        <p>11.3. W sprawach nieuregulowanych stosuje si przepisy prawa polskiego.</p>
        <p>11.4. Spory bd rozstrzygane przez sd waciwy dla siedziby Operatora.</p>
        <p>11.5. Regulamin wchodzi w ycie z dniem publikacji na Platformie.</p>
      `}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Regulamin"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Zasady korzystania z platformy ToMyHomeApp"})]})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-8 flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:s.jsx(un,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Ostatnia aktualizacja"}),s.jsx("p",{className:"font-semibold text-gray-900",children:t})]})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:e.map((n,r)=>s.jsxs("div",{className:`p-6 ${r!==e.length-1?"border-b border-gray-100":""}`,children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[s.jsx(gu,{className:"w-5 h-5 text-primary"}),n.title]}),s.jsx("div",{className:"prose prose-gray max-w-none text-gray-600 space-y-2",dangerouslySetInnerHTML:{__html:n.content}})]},r))}),s.jsxs("div",{className:"mt-8 bg-primary/5 rounded-2xl p-6 text-center",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"Masz pytania dotyczce regulaminu?"}),s.jsx("a",{href:"/kontakt",className:"text-primary font-semibold hover:underline",children:"Skontaktuj si z nami "})]})]})})]})},X6=()=>{const t="1 grudnia 2024",e=[{icon:js,title:"Szyfrowanie",description:"Wszystkie dane s szyfrowane SSL/TLS"},{icon:cr,title:"Transparentno",description:"Jasno informujemy o przetwarzaniu danych"},{icon:Lg,title:"Minimalizacja",description:"Zbieramy tylko niezbdne dane"},{icon:Zk,title:"Twoje prawa",description:"Pena kontrola nad swoimi danymi"}],n=[{title:"1. Administrator danych",content:`
        <p>Administratorem Twoich danych osobowych jest:</p>
        <p><strong>ToMyHomeApp Sp. z o.o.</strong><br>
        ul. Przykadowa 1<br>
        61-001 Pozna<br>
        NIP: 0000000000<br>
        Email: dane@tomyhomeapp.pl</p>
      `},{title:"2. Jakie dane zbieramy?",content:`
        <p>Zbieramy nastpujce kategorie danych:</p>
        <ul>
          <li><strong>Dane identyfikacyjne:</strong> imi, nazwisko, adres email, numer telefonu</li>
          <li><strong>Dane adresowe:</strong> adres zamieszkania (dla usug z dojazdem)</li>
          <li><strong>Dane finansowe:</strong> informacje o patnociach (przetwarzane przez operatorw patnoci)</li>
          <li><strong>Dane techniczne:</strong> adres IP, informacje o urzdzeniu, pliki cookies</li>
          <li><strong>Dane o aktywnoci:</strong> historia rezerwacji, preferencje, opinie</li>
        </ul>
      `},{title:"3. Cele przetwarzania danych",content:`
        <p>Twoje dane przetwarzamy w celu:</p>
        <ul>
          <li>wiadczenia usug platformy i realizacji rezerwacji</li>
          <li>Komunikacji z uytkownikami (powiadomienia, przypomnienia)</li>
          <li>Obsugi patnoci i rozlicze</li>
          <li>Zapewnienia bezpieczestwa platformy</li>
          <li>Analizy i ulepszania usug</li>
          <li>Marketingu bezporedniego (za zgod)</li>
          <li>Wypeniania obowizkw prawnych</li>
        </ul>
      `},{title:"4. Podstawy prawne przetwarzania",content:`
        <p>Przetwarzamy dane na podstawie:</p>
        <ul>
          <li><strong>Art. 6 ust. 1 lit. a RODO</strong> - zgoda (np. na marketing)</li>
          <li><strong>Art. 6 ust. 1 lit. b RODO</strong> - wykonanie umowy (realizacja rezerwacji)</li>
          <li><strong>Art. 6 ust. 1 lit. c RODO</strong> - obowizek prawny (rachunkowo)</li>
          <li><strong>Art. 6 ust. 1 lit. f RODO</strong> - prawnie uzasadniony interes (bezpieczestwo)</li>
        </ul>
      `},{title:"5. Udostpnianie danych",content:`
        <p>Twoje dane mog by udostpniane:</p>
        <ul>
          <li><strong>Specjalistom</strong> - w zakresie niezbdnym do realizacji usugi</li>
          <li><strong>Operatorom patnoci</strong> - do przetwarzania transakcji</li>
          <li><strong>Dostawcom usug IT</strong> - hosting, analityka (na podstawie umw powierzenia)</li>
          <li><strong>Organom publicznym</strong> - gdy wymagaj tego przepisy prawa</li>
        </ul>
        <p>Nie sprzedajemy danych osobowych podmiotom trzecim.</p>
      `},{title:"6. Okres przechowywania danych",content:`
        <p>Dane przechowujemy przez okres:</p>
        <ul>
          <li><strong>Dane konta:</strong> do momentu usunicia konta + 30 dni</li>
          <li><strong>Historia rezerwacji:</strong> 5 lat (wymogi ksigowe)</li>
          <li><strong>Dane marketingowe:</strong> do cofnicia zgody</li>
          <li><strong>Logi systemowe:</strong> 12 miesicy</li>
          <li><strong>Cookies:</strong> zgodnie z ustawieniami przegldarki</li>
        </ul>
      `},{title:"7. Twoje prawa",content:`
        <p>Przysuguj Ci nastpujce prawa:</p>
        <ul>
          <li><strong>Prawo dostpu</strong> - moesz uzyska informacje o przetwarzanych danych</li>
          <li><strong>Prawo do sprostowania</strong> - moesz poprawi nieprawidowe dane</li>
          <li><strong>Prawo do usunicia</strong> - moesz da usunicia danych ("prawo do bycia zapomnianym")</li>
          <li><strong>Prawo do ograniczenia</strong> - moesz ograniczy przetwarzanie</li>
          <li><strong>Prawo do przenoszenia</strong> - moesz otrzyma dane w formacie elektronicznym</li>
          <li><strong>Prawo do sprzeciwu</strong> - moesz sprzeciwi si przetwarzaniu</li>
          <li><strong>Prawo do cofnicia zgody</strong> - w dowolnym momencie</li>
        </ul>
        <p>Aby skorzysta z tych praw, skontaktuj si z nami: dane@tomyhomeapp.pl</p>
      `},{title:"8. Pliki cookies",content:`
        <p>Uywamy plikw cookies do:</p>
        <ul>
          <li><strong>Niezbdne:</strong> funkcjonowanie strony, logowanie, bezpieczestwo</li>
          <li><strong>Analityczne:</strong> analiza ruchu, ulepszanie usug (Google Analytics)</li>
          <li><strong>Marketingowe:</strong> personalizacja reklam (za zgod)</li>
        </ul>
        <p>Moesz zarzdza cookies w ustawieniach przegldarki.</p>
      `},{title:"9. Bezpieczestwo danych",content:`
        <p>Stosujemy nastpujce zabezpieczenia:</p>
        <ul>
          <li>Szyfrowanie SSL/TLS wszystkich pocze</li>
          <li>Hashowanie hase (bcrypt)</li>
          <li>Regularne kopie zapasowe</li>
          <li>Kontrola dostpu do danych</li>
          <li>Monitoring bezpieczestwa 24/7</li>
          <li>Regularne audyty bezpieczestwa</li>
        </ul>
      `},{title:"10. Zmiany polityki",content:`
        <p>Zastrzegamy sobie prawo do aktualizacji niniejszej Polityki Prywatnoci.</p>
        <p>O istotnych zmianach poinformujemy uytkownikw drog elektroniczn z 14-dniowym wyprzedzeniem.</p>
        <p>Aktualna wersja jest zawsze dostpna na tej stronie.</p>
      `},{title:"11. Kontakt",content:`
        <p>W sprawach zwizanych z ochron danych osobowych moesz skontaktowa si z nami:</p>
        <p><strong>Email:</strong> dane@tomyhomeapp.pl<br>
        <strong>Adres:</strong> ToMyHomeApp Sp. z o.o., ul. Przykadowa 1, 61-001 Pozna</p>
        <p>Masz rwnie prawo wnie skarg do Prezesa Urzdu Ochrony Danych Osobowych.</p>
      `}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Polityka Prywatnoci"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Twoje dane s dla nas wane. Dowiedz si, jak je chronimy."})]})}),s.jsx("section",{className:"py-12 -mt-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.map((r,i)=>s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(r.icon,{className:"w-6 h-6 text-primary"})}),s.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:r.title}),s.jsx("p",{className:"text-gray-600 text-sm",children:r.description})]},i))})})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-8 flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:s.jsx(un,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Ostatnia aktualizacja"}),s.jsx("p",{className:"font-semibold text-gray-900",children:t})]})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:n.map((r,i)=>s.jsxs("div",{className:`p-6 ${i!==n.length-1?"border-b border-gray-100":""}`,children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[s.jsx(Hn,{className:"w-5 h-5 text-primary"}),r.title]}),s.jsx("div",{className:"prose prose-gray max-w-none text-gray-600 [&>ul]:list-disc [&>ul]:pl-5 [&>ul]:space-y-1",dangerouslySetInnerHTML:{__html:r.content}})]},i))}),s.jsxs("div",{className:"mt-8 grid md:grid-cols-2 gap-4",children:[s.jsxs("a",{href:"mailto:dane@tomyhomeapp.pl",className:"bg-white rounded-2xl p-6 shadow-sm flex items-center gap-4 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:s.jsx(Bs,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900",children:"Masz pytania?"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Napisz do nas: dane@tomyhomeapp.pl"})]})]}),s.jsxs("a",{href:"/profil",className:"bg-white rounded-2xl p-6 shadow-sm flex items-center gap-4 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:s.jsx(Ki,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900",children:"Usu swoje dane"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Zarzdzaj w ustawieniach konta"})]})]})]})]})})]})},eD=()=>{const t=[{icon:Mg,title:"Chat na ywo",description:"Porozmawiaj z naszym konsultantem w czasie rzeczywistym",availability:"Pn-Pt: 9:00 - 20:00, Sob: 10:00 - 16:00",action:"Rozpocznij chat",primary:!0},{icon:Bs,title:"Email",description:"Wylij wiadomo, odpowiemy w cigu 24 godzin",availability:"pomoc@tomyhomeapp.pl",action:"Wylij email",href:"mailto:pomoc@tomyhomeapp.pl"},{icon:Zi,title:"Telefon",description:"Zadzwo do nas w godzinach pracy",availability:"+48 123 456 789",action:"Zadzwo",href:"tel:+48123456789"}],e=[{icon:sl,title:"FAQ",description:"Odpowiedzi na najczstsze pytania",to:"/faq"},{icon:gu,title:"Regulamin",description:"Zasady korzystania z platformy",to:"/regulamin"},{icon:gu,title:"Polityka prywatnoci",description:"Jak chronimy Twoje dane",to:"/prywatnosc"}],n=[{title:"Jak zarezerwowa wizyt?",steps:["Wyszukaj usug lub specjalist","Wybierz odpowiedni termin z kalendarza","Potwierd rezerwacj i dokonaj patnoci","Otrzymaj potwierdzenie na email"]},{title:"Jak anulowa rezerwacj?",steps:["Zaloguj si na swoje konto",'Przejd do "Moje rezerwacje"','Znajd rezerwacj i kliknij "Anuluj"',"Potwierd anulowanie"]},{title:"Jak zmieni dane konta?",steps:["Zaloguj si na swoje konto","Kliknij w ikon profilu",'Wybierz "Ustawienia"',"Edytuj dane i zapisz zmiany"]}],r=[{problem:"Nie mog si zalogowa",solution:'Sprawd czy wpisujesz prawidowy email. Uyj opcji "Zapomniaem hasa" aby je zresetowa.'},{problem:"Nie otrzymaem potwierdzenia rezerwacji",solution:"Sprawd folder SPAM. Jeli wiadomoci tam nie ma, skontaktuj si z nami."},{problem:"Specjalista nie pojawi si na wizycie",solution:"Skontaktuj si z nami natychmiast. Pomoemy rozwiza sytuacj i zapewnimy zwrot rodkw."},{problem:"Chc zmieni termin wizyty",solution:"Anuluj obecn rezerwacj i utwrz now z innym terminem. Moesz te skontaktowa si ze specjalist."}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-br from-primary via-secondary to-accent text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Centrum wsparcia"}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Jestemy tu, aby Ci pomc. Wybierz preferowany sposb kontaktu lub znajd odpowied w naszych poradnikach."})]})}),s.jsx("section",{className:"py-12 -mt-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:t.map((i,o)=>s.jsxs("div",{className:`p-6 rounded-2xl ${i.primary?"bg-gradient-to-br from-primary to-secondary text-white":"bg-white shadow-sm"}`,children:[s.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center mb-4 ${i.primary?"bg-white/20":"bg-primary/10"}`,children:s.jsx(i.icon,{className:`w-7 h-7 ${i.primary?"text-white":"text-primary"}`})}),s.jsx("h3",{className:`text-xl font-bold mb-2 ${i.primary?"text-white":"text-gray-900"}`,children:i.title}),s.jsx("p",{className:`mb-3 ${i.primary?"text-white/80":"text-gray-600"}`,children:i.description}),s.jsxs("p",{className:`text-sm mb-4 flex items-center gap-2 ${i.primary?"text-white/70":"text-gray-500"}`,children:[s.jsx(Dt,{className:"w-4 h-4"}),i.availability]}),s.jsxs("a",{href:i.href||"#",className:`inline-flex items-center gap-2 font-semibold ${i.primary?"text-white hover:underline":"text-primary hover:underline"}`,children:[i.action,s.jsx(pu,{className:"w-4 h-4"})]})]},o))})})}),s.jsx("section",{className:"py-12 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Przydatne linki"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:e.map((i,o)=>s.jsx(be,{to:i.to,className:"p-6 bg-gray-50 rounded-2xl hover:bg-gray-100 transition-colors group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx(i.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900 group-hover:text-primary transition-colors",children:i.title}),s.jsx("p",{className:"text-gray-600 text-sm",children:i.description})]})]})},o))})]})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Poradniki krok po kroku"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map((i,o)=>s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-4",children:i.title}),s.jsx("ol",{className:"space-y-3",children:i.steps.map((l,h)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"w-6 h-6 bg-primary/10 text-primary rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:h+1}),s.jsx("span",{className:"text-gray-600 text-sm",children:l})]},h))})]},o))})]})}),s.jsx("section",{className:"py-12 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Najczstsze problemy"}),s.jsx("div",{className:"max-w-3xl mx-auto space-y-4",children:r.map((i,o)=>s.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[s.jsxs("h3",{className:"font-bold text-gray-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),i.problem]}),s.jsx("p",{className:"text-gray-600 pl-4",children:i.solution})]},o))})]})}),s.jsx("section",{className:"py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 lg:p-12 text-white text-center",children:[s.jsx(Mg,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nadal potrzebujesz pomocy?"}),s.jsx("p",{className:"text-white/90 mb-6 max-w-2xl mx-auto",children:"Nasz zesp wsparcia jest dostpny 7 dni w tygodniu. Chtnie odpowiemy na wszystkie Twoje pytania!"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(be,{to:"/kontakt",className:"inline-flex items-center justify-center gap-2 px-8 py-3 bg-white text-primary font-semibold rounded-xl hover:shadow-lg transition-all",children:[s.jsx(Bs,{className:"w-5 h-5"}),"Napisz do nas"]}),s.jsxs("a",{href:"tel:+48123456789",className:"inline-flex items-center justify-center gap-2 px-8 py-3 bg-white/20 text-white font-semibold rounded-xl hover:bg-white/30 transition-all",children:[s.jsx(Zi,{className:"w-5 h-5"}),"+48 123 456 789"]})]})]})})})]})},tD=()=>{var l;const[t,e]=C.useState(!1),[n,r]=C.useState(!1),{user:i,logout:o}=_t();return s.jsxs("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:[s.jsx("div",{className:"px-4 lg:px-8",children:s.jsxs("div",{className:"h-16 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{className:"lg:hidden p-2 bg-white rounded-lg border border-gray-200 hover:bg-gray-50",onClick:()=>e(!t),style:{backgroundColor:"white"},children:t?s.jsx(Fs,{className:"w-5 h-5 text-gray-700"}):s.jsx(qk,{className:"w-5 h-5 text-gray-700"})}),s.jsxs(be,{to:"/biznes",className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("span",{className:"font-extrabold text-lg text-gray-900",children:"TOMYHOMEAPP"}),s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full",children:"BIZNES"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(be,{to:"/",className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",children:[s.jsx("span",{className:"hidden sm:inline",children:"Widok klienta"}),s.jsx("span",{className:"sm:hidden",children:""}),s.jsx("span",{children:""})]}),s.jsxs("button",{className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:[s.jsx(ts,{className:"w-5 h-5"}),s.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:((l=i==null?void 0:i.username)==null?void 0:l.charAt(0).toUpperCase())||"U"})}),s.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:(i==null?void 0:i.username)||"Uytkownik"})]}),n&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-50",children:[s.jsxs(be,{to:"/biznes/profil",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>r(!1),children:[s.jsx(Mn,{className:"w-4 h-4"}),"Mj profil"]}),s.jsxs(be,{to:"/biznes/ustawienia",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>r(!1),children:[s.jsx(nf,{className:"w-4 h-4"}),"Ustawienia"]}),s.jsx("hr",{className:"my-2"}),s.jsxs("button",{onClick:()=>{o(),r(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[s.jsx(yu,{className:"w-4 h-4"}),"Wyloguj si"]})]})]})]})]})}),t&&s.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)})]})},nD=({isOpen:t=!0,onClose:e})=>{const n=hr(),r=[{icon:Dg,label:"Dashboard",to:"/biznes",exact:!0},{icon:Hi,label:"Moje usugi",to:"/biznes/uslugi"},{icon:m6,label:"Dodaj usug",to:"/biznes/dodaj-usluge"},{icon:Dt,label:"Godziny pracy",to:"/biznes/godziny-pracy"},{icon:un,label:"Kalendarz",to:"/biznes/kalendarz"},{icon:rs,label:"Wiadomoci",to:"/biznes/wiadomosci",badge:3},{icon:$k,label:"Statystyki",to:"/biznes/statystyki"}],i=[{icon:nf,label:"Ustawienia",to:"/biznes/ustawienia"},{icon:sl,label:"Pomoc",to:"/biznes/pomoc"}],o=(l,h=!1)=>h?n.pathname===l:n.pathname.startsWith(l);return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:e}),s.jsx("aside",{className:`
          fixed lg:sticky top-16 left-0 z-40
          w-64 h-[calc(100vh-64px)] bg-white border-r border-gray-200
          transform transition-transform duration-300 ease-in-out
          lg:translate-x-0
          ${t?"translate-x-0":"-translate-x-full"}
        `,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider px-3",children:"Menu gwne"})}),r.map(l=>s.jsxs(be,{to:l.to,onClick:e,className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
                  transition-all duration-200
                  ${o(l.to,l.exact)?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                `,children:[s.jsx(l.icon,{className:"w-5 h-5"}),s.jsx("span",{className:"flex-1",children:l.label}),l.badge&&s.jsx("span",{className:`
                    px-2 py-0.5 text-xs font-bold rounded-full
                    ${o(l.to,l.exact)?"bg-white/20 text-white":"bg-red-100 text-red-600"}
                  `,children:l.badge})]},l.to))]}),s.jsx("div",{className:"p-4 border-t border-gray-100",children:i.map(l=>s.jsxs(be,{to:l.to,onClick:e,className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
                  transition-all duration-200
                  ${o(l.to)?"bg-gray-100 text-gray-900":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}
                `,children:[s.jsx(l.icon,{className:"w-5 h-5"}),s.jsx("span",{children:l.label})]},l.to))}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"p-4 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl text-white",children:[s.jsx("h4",{className:"font-bold mb-1",children:"Przejd na PRO"}),s.jsx("p",{className:"text-xs text-white/80 mb-3",children:"Odblokuj wszystkie funkcje i zwiksz widoczno"}),s.jsx("button",{className:"w-full py-2 bg-white text-emerald-600 rounded-lg text-sm font-semibold hover:bg-gray-50 transition-colors",children:"Sprawd ofert"})]})})]})})]})},rD=()=>{const{isAuthenticated:t,user:e}=_t(),[n,r]=C.useState(!1),{pathname:i}=hr();C.useEffect(()=>{window.scrollTo(0,0)},[i]);const o=(e==null?void 0:e.accountType)==="provider"||!!(e!=null&&e.businessName);return t?o?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tD,{}),s.jsxs("div",{className:"flex",children:[s.jsx(nD,{isOpen:n,onClose:()=>r(!1)}),s.jsx("main",{className:"flex-1 min-h-[calc(100vh-64px)] p-4 lg:p-8",children:s.jsx(Zj,{})})]})]}):s.jsx(rg,{to:"/",replace:!0}):s.jsx(rg,{to:"/auth?redirect=/biznes",replace:!0})},b_=()=>{const{user:t}=_t(),{showToast:e}=mn(),[n,r]=C.useState({totalBookings:0,pendingBookings:0,completedBookings:0,revenue:0,thisMonthRevenue:0,rating:0,reviewsCount:0}),[i,o]=C.useState([]),[l,h]=C.useState(!1),[m,f]=C.useState(!0);C.useEffect(()=>{(async()=>{if(!t||!t.id){console.log("BusinessDashboard: No user or user.id"),f(!1);return}console.log("BusinessDashboard: Loading for user",t.id);try{const S=await Xt.getByOwner(t.id);if(console.log("BusinessDashboard: Found providers",S.length),S.length>0){h(!0);const M=S[0],j=await or.getProviderStats(M.id);r({totalBookings:j.totalBookings,pendingBookings:j.pendingBookings,completedBookings:j.completedBookings,revenue:j.totalRevenue,thisMonthRevenue:j.thisMonthRevenue,rating:M.rating||0,reviewsCount:M.reviewsCount||0});const T=or.subscribeToProviderBookings(M.id,I=>{const W=I.filter(D=>D.status==="pending"||D.status==="confirmed").slice(0,5);o(W)});return()=>T()}else h(!1)}catch(S){console.error("Bd adowania danych:",S)}finally{f(!1)}})()},[t]);const g=async E=>{try{await or.confirm(E),e("Rezerwacja potwierdzona! ","success")}catch{e("Bd potwierdzania rezerwacji","error")}},x=async E=>{try{await or.cancel(E,"provider"),e("Rezerwacja anulowana","info")}catch{e("Bd anulowania rezerwacji","error")}},v=[{title:"Rezerwacje",value:n.totalBookings,subtitle:`${n.pendingBookings} oczekuje`,icon:un,color:"emerald"},{title:"Przychd",value:`${n.revenue} z`,subtitle:`${n.thisMonthRevenue} z ten miesic`,icon:qi,color:"blue"},{title:"Ukoczone",value:n.completedBookings,subtitle:"wizyt",icon:Tt,color:"purple"},{title:"Ocena",value:n.rating>0?n.rating.toFixed(1):"-",subtitle:n.reviewsCount>0?`${n.reviewsCount} opinii`:"brak opinii",icon:jr,color:"amber"}],P=E=>{switch(E){case"confirmed":return s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Potwierdzona"});case"pending":return s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full",children:"Oczekuje"});case"completed":return s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Zakoczona"});default:return null}};return m?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(tt,{className:"w-12 h-12 animate-spin text-emerald-500"})}):l?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Witaj, ",(t==null?void 0:t.username)||"Uytkowniku","! "]}),s.jsx("p",{className:"text-gray-600",children:"Oto przegld Twojego biznesu"})]}),s.jsxs(be,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Dodaj usug"]})]}),s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map((E,S)=>s.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center bg-${E.color}-100`,children:s.jsx(E.icon,{className:`w-5 h-5 text-${E.color}-600`})})}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E.value}),s.jsx("div",{className:"text-sm text-gray-500",children:E.subtitle})]},S))}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm",children:[s.jsx("div",{className:"p-5 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Nadchodzce rezerwacje"}),s.jsx(be,{to:"/biznes/kalendarz",className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:"Zobacz wszystkie "})]})}),s.jsxs("div",{className:"divide-y divide-gray-100",children:[i.map(E=>s.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:E.clientName.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:E.clientName}),s.jsx("div",{className:"text-sm text-gray-500",children:E.serviceName})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-gray-600",children:E.date}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[s.jsx(Dt,{className:"w-3 h-3"}),E.time]})]}),E.status==="pending"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>g(E.id),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Potwierd",children:s.jsx(Tt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>x(E.id),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Anuluj",children:s.jsx(Fs,{className:"w-4 h-4"})})]}),E.status==="confirmed"&&P(E.status)]})]},E.id)),i.length===0&&s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(un,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"Brak nadchodzcych rezerwacji"}),s.jsx("p",{className:"text-sm mt-1",children:"Rezerwacje pojawi si tutaj, gdy klienci je zo"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Szybkie akcje"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(be,{to:"/biznes/uslugi",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center",children:s.jsx(cr,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Zobacz swj profil"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Tak widz Ci klienci"})]})]}),s.jsxs(be,{to:"/biznes/kalendarz",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(un,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Zarzdzaj kalendarzem"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Dostpno i godziny"})]})]}),s.jsxs(be,{to:"/biznes/statystyki",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center",children:s.jsx(Hx,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Zobacz statystyki"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Analizuj swj biznes"})]})]})]})]})]})]}):s.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(Ss,{className:"w-12 h-12 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Witaj w ToMyHomeApp Biznes!"}),s.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Nie masz jeszcze profilu usugodawcy. Dodaj swoj pierwsz usug, aby zacz przyjmowa rezerwacje od klientw."}),s.jsxs(be,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Dodaj pierwsz usug"]}),s.jsxs("div",{className:"mt-12 grid md:grid-cols-3 gap-6 text-left",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center mb-4",children:s.jsx(Ss,{className:"w-5 h-5"})}),s.jsx("h3",{className:"font-bold mb-2",children:"1. Dodaj usug"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Opisz swoj usug, ustal ceny i godziny pracy"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-4",children:s.jsx(cr,{className:"w-5 h-5"})}),s.jsx("h3",{className:"font-bold mb-2",children:"2. Bd widoczny"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Klienci znajd Ci w wyszukiwarce usug"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center mb-4",children:s.jsx(un,{className:"w-5 h-5"})}),s.jsx("h3",{className:"font-bold mb-2",children:"3. Przyjmuj rezerwacje"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Zarzdzaj kalendarzem i rozwijaj biznes"})]})]})]})},sD=()=>{const{user:t}=_t(),{showToast:e}=mn(),[n,r]=C.useState(null),[i,o]=C.useState(null),[l,h]=C.useState(!0),[m,f]=C.useState("");C.useEffect(()=>{g()},[t]);const g=async()=>{if(!(t!=null&&t.id)){h(!1);return}h(!0);try{const E=await Xt.getByOwner(t.id.toString());if(E.length>0){const S=E[0],M=S.services.map(j=>({id:j.id,name:j.name,description:j.description||"",price:j.price||0,duration:j.duration||"30 min",isActive:!0,category:j.category||"Inne"}));o(S.id),r({id:S.id,name:S.name,profession:S.profession||"",location:S.locationString||"",image:S.image||"",services:M,isActive:S.isActive})}}catch(E){console.error("Bd adowania profilu z Firebase:",E),e("Bd adowania danych","error")}finally{h(!1)}},x=async E=>{if(!n||!i)return;const S=n.services.map(M=>M.id===E?{...M,isActive:!M.isActive}:M);r({...n,services:S});try{await Xt.update(i,{services:S.map(M=>({id:M.id,name:M.name,description:M.description,price:M.price,duration:M.duration,category:M.category}))}),e("Status usugi zmieniony","success")}catch(M){console.error("Bd aktualizacji:",M),e("Bd aktualizacji","error"),g()}},v=async E=>{if(!n||!i)return;const S=n.services.filter(M=>M.id!==E);r({...n,services:S});try{await Xt.removeService(i,E),e("Usuga usunita","info")}catch(M){console.error("Bd usuwania:",M),e("Bd usuwania usugi","error"),g()}},P=(n==null?void 0:n.services.filter(E=>E.name.toLowerCase().includes(m.toLowerCase())))||[];return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Moje usugi"}),s.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoimi usugami i cenami"})]}),s.jsxs(be,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Dodaj usug"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("img",{src:n.image||"https://via.placeholder.com/80",alt:n.name,className:"w-20 h-20 rounded-xl object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n.name}),s.jsx("p",{className:"text-gray-500",children:n.profession}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n.location})]}),s.jsxs(be,{to:`/uslugodawcy/profil/${n.id}`,target:"_blank",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[s.jsx(cr,{className:"w-4 h-4"}),"Podgld profilu"]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Szukaj usugi...",value:m,onChange:E=>f(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx($x,{className:"w-5 h-5"}),"Filtruj"]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsxs("h3",{className:"font-semibold text-gray-900",children:["Wszystkie usugi (",P.length,")"]})}),P.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:m?"Nie znaleziono usug":"Brak usug"}):s.jsx("div",{className:"divide-y divide-gray-100",children:P.map(E=>s.jsxs("div",{className:`p-4 flex items-center justify-between hover:bg-gray-50 transition-colors ${E.isActive?"":"opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx("button",{onClick:()=>x(E.id),className:`p-1 rounded transition-colors ${E.isActive?"text-emerald-500":"text-gray-400"}`,title:E.isActive?"Aktywna":"Nieaktywna",children:E.isActive?s.jsx(w6,{className:"w-8 h-8"}):s.jsx(x6,{className:"w-8 h-8"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:E.name}),s.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:E.description||"Brak opisu"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right mr-4",children:[s.jsxs("div",{className:"flex items-center gap-1 text-gray-900 font-semibold",children:[s.jsx(qi,{className:"w-4 h-4"}),E.price," z"]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[s.jsx(Dt,{className:"w-3 h-3"}),E.duration]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{e("Funkcja edycji w przygotowaniu","info")},className:"p-2 text-gray-500 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"Edytuj",children:s.jsx(u6,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{window.confirm("Czy na pewno chcesz usun t usug?")&&v(E.id)},className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:s.jsx(Ki,{className:"w-5 h-5"})})]})]})]},E.id))})]})]}):s.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(Ss,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Nie masz jeszcze usug"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Dodaj swoj pierwsz usug, aby klienci mogli j znale i zarezerwowa."}),s.jsxs(be,{to:"/biznes/dodaj-usluge",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Dodaj pierwsz usug"]})]})};function iD(t,e){const n=C.useRef(e);C.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const aD=1;function oD(t){return Object.freeze({__version:aD,map:t})}function lD(t,e){return Object.freeze({...t,...e})}const Qk=C.createContext(null),Yk=Qk.Provider;function Jk(){const t=C.useContext(Qk);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function cD(t){function e(n,r){const{instance:i,context:o}=t(n).current;return C.useImperativeHandle(r,()=>i),n.children==null?null:Oc.createElement(Yk,{value:o},n.children)}return C.forwardRef(e)}function uD(t){function e(n,r){const{instance:i}=t(n).current;return C.useImperativeHandle(r,()=>i),null}return C.forwardRef(e)}function dD(t,e){const n=C.useRef();C.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Xk(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Ug={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(U2,function(n){var r="1.9.4";function i(a){var c,d,p,w;for(d=1,p=arguments.length;d<p;d++){w=arguments[d];for(c in w)a[c]=w[c]}return a}var o=Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}();function l(a,c){var d=Array.prototype.slice;if(a.bind)return a.bind.apply(a,d.call(arguments,1));var p=d.call(arguments,2);return function(){return a.apply(c,p.length?p.concat(d.call(arguments)):arguments)}}var h=0;function m(a){return"_leaflet_id"in a||(a._leaflet_id=++h),a._leaflet_id}function f(a,c,d){var p,w,k,$;return $=function(){p=!1,w&&(k.apply(d,w),w=!1)},k=function(){p?w=arguments:(a.apply(d,arguments),setTimeout($,c),p=!0)},k}function g(a,c,d){var p=c[1],w=c[0],k=p-w;return a===p&&d?a:((a-w)%k+k)%k+w}function x(){return!1}function v(a,c){if(c===!1)return a;var d=Math.pow(10,c===void 0?6:c);return Math.round(a*d)/d}function P(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function E(a){return P(a).split(/\s+/)}function S(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?o(a.options):{});for(var d in c)a.options[d]=c[d];return a.options}function M(a,c,d){var p=[];for(var w in a)p.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(a[w]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function T(a,c){return a.replace(j,function(d,p){var w=c[p];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(c)),w})}var I=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function W(a,c){for(var d=0;d<a.length;d++)if(a[d]===c)return d;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var N=0;function b(a){var c=+new Date,d=Math.max(0,16-(c-N));return N=c+d,window.setTimeout(a,d)}var R=window.requestAnimationFrame||O("RequestAnimationFrame")||b,U=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function B(a,c,d){if(d&&R===b)a.call(c);else return R.call(window,l(a,c))}function H(a){a&&U.call(window,a)}var A={__proto__:null,extend:i,create:o,bind:l,get lastId(){return h},stamp:m,throttle:f,wrapNum:g,falseFn:x,formatNum:v,trim:P,splitWords:E,setOptions:S,getParamString:M,template:T,isArray:I,indexOf:W,emptyImageUrl:D,requestFn:R,cancelFn:U,requestAnimFrame:B,cancelAnimFrame:H};function me(){}me.extend=function(a){var c=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=c.__super__=this.prototype,p=o(d);p.constructor=c,c.prototype=p;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(c[w]=this[w]);return a.statics&&i(c,a.statics),a.includes&&(ue(a.includes),i.apply(null,[p].concat(a.includes))),i(p,a),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},i(p.options,a.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,$=p._initHooks.length;k<$;k++)p._initHooks[k].call(this)}},c},me.include=function(a){var c=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},me.mergeOptions=function(a){return i(this.prototype.options,a),this},me.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),d=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ue(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=I(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ce={on:function(a,c,d){if(typeof a=="object")for(var p in a)this._on(p,a[p],c);else{a=E(a);for(var w=0,k=a.length;w<k;w++)this._on(a[w],c,d)}return this},off:function(a,c,d){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var p in a)this._off(p,a[p],c);else{a=E(a);for(var w=arguments.length===1,k=0,$=a.length;k<$;k++)w?this._off(a[k]):this._off(a[k],c,d)}return this},_on:function(a,c,d,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,d)===!1){d===this&&(d=void 0);var w={fn:c,ctx:d};p&&(w.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(w)}},_off:function(a,c,d){var p,w,k;if(this._events&&(p=this._events[a],!!p)){if(arguments.length===1){if(this._firingCount)for(w=0,k=p.length;w<k;w++)p[w].fn=x;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var $=this._listens(a,c,d);if($!==!1){var Z=p[$];this._firingCount&&(Z.fn=x,this._events[a]=p=p.slice()),p.splice($,1)}}},fire:function(a,c,d){if(!this.listens(a,d))return this;var p=i({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var w=this._events[a];if(w){this._firingCount=this._firingCount+1||1;for(var k=0,$=w.length;k<$;k++){var Z=w[k],Q=Z.fn;Z.once&&this.off(a,Q,Z.ctx),Q.call(Z.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(a,c,d,p){typeof a!="string"&&console.warn('"string" type argument expected');var w=c;typeof c!="function"&&(p=!!c,w=void 0,d=void 0);var k=this._events&&this._events[a];if(k&&k.length&&this._listens(a,w,d)!==!1)return!0;if(p){for(var $ in this._eventParents)if(this._eventParents[$].listens(a,c,d,p))return!0}return!1},_listens:function(a,c,d){if(!this._events)return!1;var p=this._events[a]||[];if(!c)return!!p.length;d===this&&(d=void 0);for(var w=0,k=p.length;w<k;w++)if(p[w].fn===c&&p[w].ctx===d)return w;return!1},once:function(a,c,d){if(typeof a=="object")for(var p in a)this._on(p,a[p],c,!0);else{a=E(a);for(var w=0,k=a.length;w<k;w++)this._on(a[w],c,d,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[m(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[m(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};ce.addEventListener=ce.on,ce.removeEventListener=ce.clearAllEventListeners=ce.off,ce.addOneTimeEventListener=ce.once,ce.fireEvent=ce.fire,ce.hasEventListeners=ce.listens;var ne=me.extend(ce);function F(a,c,d){this.x=d?Math.round(a):a,this.y=d?Math.round(c):c}var Y=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(a){return this.clone()._add(z(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(z(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new F(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new F(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Y(this.x),this.y=Y(this.y),this},distanceTo:function(a){a=z(a);var c=a.x-this.x,d=a.y-this.y;return Math.sqrt(c*c+d*d)},equals:function(a){return a=z(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=z(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function z(a,c,d){return a instanceof F?a:I(a)?new F(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new F(a.x,a.y):new F(a,c,d)}function G(a,c){if(a)for(var d=c?[a,c]:a,p=0,w=d.length;p<w;p++)this.extend(d[p])}G.prototype={extend:function(a){var c,d;if(!a)return this;if(a instanceof F||typeof a[0]=="number"||"x"in a)c=d=z(a);else if(a=J(a),c=a.min,d=a.max,!c||!d)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=d.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(a){return z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return z(this.min.x,this.max.y)},getTopRight:function(){return z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,d;return typeof a[0]=="number"||a instanceof F?a=z(a):a=J(a),a instanceof G?(c=a.min,d=a.max):c=d=a,c.x>=this.min.x&&d.x<=this.max.x&&c.y>=this.min.y&&d.y<=this.max.y},intersects:function(a){a=J(a);var c=this.min,d=this.max,p=a.min,w=a.max,k=w.x>=c.x&&p.x<=d.x,$=w.y>=c.y&&p.y<=d.y;return k&&$},overlaps:function(a){a=J(a);var c=this.min,d=this.max,p=a.min,w=a.max,k=w.x>c.x&&p.x<d.x,$=w.y>c.y&&p.y<d.y;return k&&$},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,d=this.max,p=Math.abs(c.x-d.x)*a,w=Math.abs(c.y-d.y)*a;return J(z(c.x-p,c.y-w),z(d.x+p,d.y+w))},equals:function(a){return a?(a=J(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function J(a,c){return!a||a instanceof G?a:new G(a,c)}function fe(a,c){if(a)for(var d=c?[a,c]:a,p=0,w=d.length;p<w;p++)this.extend(d[p])}fe.prototype={extend:function(a){var c=this._southWest,d=this._northEast,p,w;if(a instanceof se)p=a,w=a;else if(a instanceof fe){if(p=a._southWest,w=a._northEast,!p||!w)return this}else return a?this.extend(he(a)||X(a)):this;return!c&&!d?(this._southWest=new se(p.lat,p.lng),this._northEast=new se(w.lat,w.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(a){var c=this._southWest,d=this._northEast,p=Math.abs(c.lat-d.lat)*a,w=Math.abs(c.lng-d.lng)*a;return new fe(new se(c.lat-p,c.lng-w),new se(d.lat+p,d.lng+w))},getCenter:function(){return new se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new se(this.getNorth(),this.getWest())},getSouthEast:function(){return new se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof se||"lat"in a?a=he(a):a=X(a);var c=this._southWest,d=this._northEast,p,w;return a instanceof fe?(p=a.getSouthWest(),w=a.getNorthEast()):p=w=a,p.lat>=c.lat&&w.lat<=d.lat&&p.lng>=c.lng&&w.lng<=d.lng},intersects:function(a){a=X(a);var c=this._southWest,d=this._northEast,p=a.getSouthWest(),w=a.getNorthEast(),k=w.lat>=c.lat&&p.lat<=d.lat,$=w.lng>=c.lng&&p.lng<=d.lng;return k&&$},overlaps:function(a){a=X(a);var c=this._southWest,d=this._northEast,p=a.getSouthWest(),w=a.getNorthEast(),k=w.lat>c.lat&&p.lat<d.lat,$=w.lng>c.lng&&p.lng<d.lng;return k&&$},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=X(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function X(a,c){return a instanceof fe?a:new fe(a,c)}function se(a,c,d){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,d!==void 0&&(this.alt=+d)}se.prototype={equals:function(a,c){if(!a)return!1;a=he(a);var d=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return d<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+v(this.lat,a)+", "+v(this.lng,a)+")"},distanceTo:function(a){return Ne.distance(this,he(a))},wrap:function(){return Ne.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,d=c/Math.cos(Math.PI/180*this.lat);return X([this.lat-c,this.lng-d],[this.lat+c,this.lng+d])},clone:function(){return new se(this.lat,this.lng,this.alt)}};function he(a,c,d){return a instanceof se?a:I(a)&&typeof a[0]!="object"?a.length===3?new se(a[0],a[1],a[2]):a.length===2?new se(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new se(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new se(a,c,d)}var Be={latLngToPoint:function(a,c){var d=this.projection.project(a),p=this.scale(c);return this.transformation._transform(d,p)},pointToLatLng:function(a,c){var d=this.scale(c),p=this.transformation.untransform(a,d);return this.projection.unproject(p)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,d=this.scale(a),p=this.transformation.transform(c.min,d),w=this.transformation.transform(c.max,d);return new G(p,w)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?g(a.lng,this.wrapLng,!0):a.lng,d=this.wrapLat?g(a.lat,this.wrapLat,!0):a.lat,p=a.alt;return new se(d,c,p)},wrapLatLngBounds:function(a){var c=a.getCenter(),d=this.wrapLatLng(c),p=c.lat-d.lat,w=c.lng-d.lng;if(p===0&&w===0)return a;var k=a.getSouthWest(),$=a.getNorthEast(),Z=new se(k.lat-p,k.lng-w),Q=new se($.lat-p,$.lng-w);return new fe(Z,Q)}},Ne=i({},Be,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var d=Math.PI/180,p=a.lat*d,w=c.lat*d,k=Math.sin((c.lat-a.lat)*d/2),$=Math.sin((c.lng-a.lng)*d/2),Z=k*k+Math.cos(p)*Math.cos(w)*$*$,Q=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*Q}}),Je=6378137,St={R:Je,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,a.lat),-d),w=Math.sin(p*c);return new F(this.R*a.lng*c,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(a){var c=180/Math.PI;return new se((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=Je*Math.PI;return new G([-a,-a],[a,a])}()};function ee(a,c,d,p){if(I(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=d,this._d=p}ee.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new F((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function _e(a,c,d,p){return new ee(a,c,d,p)}var Fe=i({},Ne,{code:"EPSG:3857",projection:St,transformation:function(){var a=.5/(Math.PI*St.R);return _e(a,.5,-a,.5)}()}),Re=i({},Fe,{code:"EPSG:900913"});function at(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function bn(a,c){var d="",p,w,k,$,Z,Q;for(p=0,k=a.length;p<k;p++){for(Z=a[p],w=0,$=Z.length;w<$;w++)Q=Z[w],d+=(w?"L":"M")+Q.x+" "+Q.y;d+=c?ve.svg?"z":"x":""}return d||"M0 0"}var ls=document.documentElement.style,sa="ActiveXObject"in window,Ut=sa&&!document.addEventListener,Bt="msLaunchUri"in navigator&&!("documentMode"in document),Ks=jn("webkit"),Ou=jn("android"),zl=jn("android 2")||jn("android 3"),af=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ia=Ou&&jn("Google")&&af<537&&!("AudioNode"in window),eo=!!window.opera,Il=!Bt&&jn("chrome"),to=jn("gecko")&&!Ks&&!eo&&!sa,of=!Il&&jn("safari"),Vu=jn("phantom"),Al="OTransition"in ls,Uu=navigator.platform.indexOf("Win")===0,Gs=sa&&"transition"in ls,aa="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zl,no="MozPerspective"in ls,cs=!window.L_DISABLE_3D&&(Gs||aa||no)&&!Al&&!Vu,Qs=typeof orientation<"u"||jn("mobile"),ro=Qs&&Ks,Bu=Qs&&aa,Ys=!window.PointerEvent&&window.MSPointerEvent,Rl=!!(window.PointerEvent||Ys),Ft="ontouchstart"in window||!!window.TouchEvent,Fu=!window.L_NO_TOUCH&&(Ft||Rl),oa=Qs&&eo,la=Qs&&to,lf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,cf=function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",x,c),window.removeEventListener("testPassiveEventSupport",x,c)}catch{}return a}(),Js=function(){return!!document.createElement("canvas").getContext}(),Ll=!!(document.createElementNS&&at("svg").createSVGRect),uf=!!Ll&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),so=!Ll&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Wu=navigator.platform.indexOf("Mac")===0,$u=navigator.platform.indexOf("Linux")===0;function jn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ve={ie:sa,ielt9:Ut,edge:Bt,webkit:Ks,android:Ou,android23:zl,androidStock:ia,opera:eo,chrome:Il,gecko:to,safari:of,phantom:Vu,opera12:Al,win:Uu,ie3d:Gs,webkit3d:aa,gecko3d:no,any3d:cs,mobile:Qs,mobileWebkit:ro,mobileWebkit3d:Bu,msPointer:Ys,pointer:Rl,touch:Fu,touchNative:Ft,mobileOpera:oa,mobileGecko:la,retina:lf,passiveEvents:cf,canvas:Js,svg:Ll,vml:so,inlineSvg:uf,mac:Wu,linux:$u},Hu=ve.msPointer?"MSPointerDown":"pointerdown",mr=ve.msPointer?"MSPointerMove":"pointermove",Dl=ve.msPointer?"MSPointerUp":"pointerup",Ml=ve.msPointer?"MSPointerCancel":"pointercancel",ca={touchstart:Hu,touchmove:mr,touchend:Dl,touchcancel:Ml},io={touchstart:Ol,touchmove:Qn,touchend:Qn,touchcancel:Qn},us={},qu=!1;function Zu(a,c,d){return c==="touchstart"&&ua(),io[c]?(d=io[c].bind(this,d),a.addEventListener(ca[c],d,!1),d):(console.warn("wrong event specified:",c),x)}function df(a,c,d){if(!ca[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(ca[c],d,!1)}function ao(a){us[a.pointerId]=a}function Ku(a){us[a.pointerId]&&(us[a.pointerId]=a)}function oo(a){delete us[a.pointerId]}function ua(){qu||(document.addEventListener(Hu,ao,!0),document.addEventListener(mr,Ku,!0),document.addEventListener(Dl,oo,!0),document.addEventListener(Ml,oo,!0),qu=!0)}function Qn(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var d in us)c.touches.push(us[d]);c.changedTouches=[c],a(c)}}function Ol(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Pt(c),Qn(a,c)}function hf(a){var c={},d,p;for(p in a)d=a[p],c[p]=d&&d.bind?d.bind(a):d;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Gu=200;function Qu(a,c){a.addEventListener("dblclick",c);var d=0,p;function w(k){if(k.detail!==1){p=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var $=Wl(k);if(!($.some(function(Q){return Q instanceof HTMLLabelElement&&Q.attributes.for})&&!$.some(function(Q){return Q instanceof HTMLInputElement||Q instanceof HTMLSelectElement}))){var Z=Date.now();Z-d<=Gu?(p++,p===2&&c(hf(k))):p=1,d=Z}}}return a.addEventListener("click",w),{dblclick:c,simDblclick:w}}function Yu(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var da=lo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ds=lo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Vl=ds==="webkitTransition"||ds==="OTransition"?ds+"End":"transitionend";function Ul(a){return typeof a=="string"?document.getElementById(a):a}function Xs(a,c){var d=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(a,null);d=p?p[c]:null}return d==="auto"?null:d}function We(a,c,d){var p=document.createElement(a);return p.className=c||"",d&&d.appendChild(p),p}function qe(a){var c=a.parentNode;c&&c.removeChild(a)}function fn(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Yn(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function Jn(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function ha(a,c){if(a.classList!==void 0)return a.classList.contains(c);var d=Cr(a);return d.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(d)}function ye(a,c){if(a.classList!==void 0)for(var d=E(c),p=0,w=d.length;p<w;p++)a.classList.add(d[p]);else if(!ha(a,c)){var k=Cr(a);hs(a,(k?k+" ":"")+c)}}function rt(a,c){a.classList!==void 0?a.classList.remove(c):hs(a,P((" "+Cr(a)+" ").replace(" "+c+" "," ")))}function hs(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function Cr(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Nn(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&Ju(a,c)}function Ju(a,c){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=a.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),d?(d.Enabled=c!==100,d.Opacity=c):a.style.filter+=" progid:"+p+"(opacity="+c+")"}function lo(a){for(var c=document.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1}function ms(a,c,d){var p=c||new F(0,0);a.style[da]=(ve.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function gt(a,c){a._leaflet_pos=c,ve.any3d?ms(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function fs(a){return a._leaflet_pos||new F(0,0)}var fr,On,co;if("onselectstart"in document)fr=function(){Se(window,"selectstart",Pt)},On=function(){Xe(window,"selectstart",Pt)};else{var ei=lo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);fr=function(){if(ei){var a=document.documentElement.style;co=a[ei],a[ei]="none"}},On=function(){ei&&(document.documentElement.style[ei]=co,co=void 0)}}function uo(){Se(window,"dragstart",Pt)}function ho(){Xe(window,"dragstart",Pt)}var ma,zr;function Bl(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(mo(),ma=a,zr=a.style.outlineStyle,a.style.outlineStyle="none",Se(window,"keydown",mo))}function mo(){ma&&(ma.style.outlineStyle=zr,ma=void 0,zr=void 0,Xe(window,"keydown",mo))}function Xu(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Xn(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var mf={__proto__:null,TRANSFORM:da,TRANSITION:ds,TRANSITION_END:Vl,get:Ul,getStyle:Xs,create:We,remove:qe,empty:fn,toFront:Yn,toBack:Jn,hasClass:ha,addClass:ye,removeClass:rt,setClass:hs,getClass:Cr,setOpacity:Nn,testProp:lo,setTransform:ms,setPosition:gt,getPosition:fs,get disableTextSelection(){return fr},get enableTextSelection(){return On},disableImageDrag:uo,enableImageDrag:ho,preventOutline:Bl,restoreOutline:mo,getSizedParentNode:Xu,getScale:Xn};function Se(a,c,d,p){if(c&&typeof c=="object")for(var w in c)fo(a,w,c[w],d);else{c=E(c);for(var k=0,$=c.length;k<$;k++)fo(a,c[k],d,p)}return this}var pn="_leaflet_events";function Xe(a,c,d,p){if(arguments.length===1)ti(a),delete a[pn];else if(c&&typeof c=="object")for(var w in c)fa(a,w,c[w],d);else if(c=E(c),arguments.length===2)ti(a,function(Z){return W(c,Z)!==-1});else for(var k=0,$=c.length;k<$;k++)fa(a,c[k],d,p);return this}function ti(a,c){for(var d in a[pn]){var p=d.split(/\d/)[0];(!c||c(p))&&fa(a,p,null,null,d)}}var ps={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fo(a,c,d,p){var w=c+m(d)+(p?"_"+m(p):"");if(a[pn]&&a[pn][w])return this;var k=function(Z){return d.call(p||a,Z||window.event)},$=k;!ve.touchNative&&ve.pointer&&c.indexOf("touch")===0?k=Zu(a,c,k):ve.touch&&c==="dblclick"?k=Qu(a,k):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(ps[c]||c,k,ve.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(k=function(Z){Z=Z||window.event,Hl(a,Z)&&$(Z)},a.addEventListener(ps[c],k,!1)):a.addEventListener(c,$,!1):a.attachEvent("on"+c,k),a[pn]=a[pn]||{},a[pn][w]=k}function fa(a,c,d,p,w){w=w||c+m(d)+(p?"_"+m(p):"");var k=a[pn]&&a[pn][w];if(!k)return this;!ve.touchNative&&ve.pointer&&c.indexOf("touch")===0?df(a,c,k):ve.touch&&c==="dblclick"?Yu(a,k):"removeEventListener"in a?a.removeEventListener(ps[c]||c,k,!1):a.detachEvent("on"+c,k),a[pn][w]=null}function Ke(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Fl(a){return fo(a,"wheel",Ke),this}function pa(a){return Se(a,"mousedown touchstart dblclick contextmenu",Ke),a._leaflet_disable_click=!0,this}function Pt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Ir(a){return Pt(a),Ke(a),this}function Wl(a){if(a.composedPath)return a.composedPath();for(var c=[],d=a.target;d;)c.push(d),d=d.parentNode;return c}function ga(a,c){if(!c)return new F(a.clientX,a.clientY);var d=Xn(c),p=d.boundingClientRect;return new F((a.clientX-p.left)/d.x-c.clientLeft,(a.clientY-p.top)/d.y-c.clientTop)}var Ar=ve.linux&&ve.chrome?window.devicePixelRatio:ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $l(a){return ve.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Ar:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Hl(a,c){var d=c.relatedTarget;if(!d)return!0;try{for(;d&&d!==a;)d=d.parentNode}catch{return!1}return d!==a}var ya={__proto__:null,on:Se,off:Xe,stopPropagation:Ke,disableScrollPropagation:Fl,disableClickPropagation:pa,preventDefault:Pt,stop:Ir,getPropagationPath:Wl,getMousePosition:ga,getWheelDelta:$l,isExternalTarget:Hl,addListener:Se,removeListener:Xe},ql=ne.extend({run:function(a,c,d,p){this.stop(),this._el=a,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=fs(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,d=this._duration*1e3;c<d?this._runFrame(this._easeOut(c/d),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var d=this._startPos.add(this._offset.multiplyBy(a));c&&d._round(),gt(this._el,d),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Ie=ne.extend({options:{crs:Fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=S(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(he(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ds&&ve.any3d&&!ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,Vl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,d){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(he(a),c,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=i({animate:d.animate},d.zoom),d.pan=i({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,d.zoom):this._tryAnimatedPan(a,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,d.pan&&d.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,d){var p=this.getZoomScale(c),w=this.getSize().divideBy(2),k=a instanceof F?a:this.latLngToContainerPoint(a),$=k.subtract(w).multiplyBy(1-1/p),Z=this.containerPointToLatLng(w.add($));return this.setView(Z,c,{zoom:d})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():X(a);var d=z(c.paddingTopLeft||c.padding||[0,0]),p=z(c.paddingBottomRight||c.padding||[0,0]),w=this.getBoundsZoom(a,!1,d.add(p));if(w=typeof c.maxZoom=="number"?Math.min(c.maxZoom,w):w,w===1/0)return{center:a.getCenter(),zoom:w};var k=p.subtract(d).divideBy(2),$=this.project(a.getSouthWest(),w),Z=this.project(a.getNorthEast(),w),Q=this.unproject($.add(Z).divideBy(2).add(k),w);return{center:Q,zoom:w}},fitBounds:function(a,c){if(a=X(a),!a.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(a,c);return this.setView(d.center,d.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=z(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ql,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ye(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,d,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,d){if(d=d||{},d.animate===!1||!ve.any3d)return this.setView(a,c,d);this._stop();var p=this.project(this.getCenter()),w=this.project(a),k=this.getSize(),$=this._zoom;a=he(a),c=c===void 0?$:c;var Z=Math.max(k.x,k.y),Q=Z*this.getZoomScale($,c),ie=w.distanceTo(p)||1,pe=1.42,ke=pe*pe;function Ae(Ct){var pd=Ct?-1:1,L2=Ct?Q:Z,D2=Q*Q-Z*Z+pd*ke*ke*ie*ie,M2=2*L2*ke*ie,xf=D2/M2,g0=Math.sqrt(xf*xf+1)-xf,O2=g0<1e-9?-18:Math.log(g0);return O2}function gn(Ct){return(Math.exp(Ct)-Math.exp(-Ct))/2}function Wt(Ct){return(Math.exp(Ct)+Math.exp(-Ct))/2}function nr(Ct){return gn(Ct)/Wt(Ct)}var Tn=Ae(0);function Eo(Ct){return Z*(Wt(Tn)/Wt(Tn+pe*Ct))}function z2(Ct){return Z*(Wt(Tn)*nr(Tn+pe*Ct)-gn(Tn))/ke}function I2(Ct){return 1-Math.pow(1-Ct,1.5)}var A2=Date.now(),f0=(Ae(1)-Tn)/pe,R2=d.duration?1e3*d.duration:1e3*f0*.8;function p0(){var Ct=(Date.now()-A2)/R2,pd=I2(Ct)*f0;Ct<=1?(this._flyToFrame=B(p0,this),this._move(this.unproject(p.add(w.subtract(p).multiplyBy(z2(pd)/ie)),$),this.getScaleZoom(Z/Eo(pd),$),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),p0.call(this),this},flyToBounds:function(a,c){var d=this._getBoundsCenterZoom(a,c);return this.flyTo(d.center,d.zoom,c)},setMaxBounds:function(a){return a=X(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,X(a));return d.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var d=z(c.paddingTopLeft||c.padding||[0,0]),p=z(c.paddingBottomRight||c.padding||[0,0]),w=this.project(this.getCenter()),k=this.project(a),$=this.getPixelBounds(),Z=J([$.min.add(d),$.max.subtract(p)]),Q=Z.getSize();if(!Z.contains(k)){this._enforcingBounds=!0;var ie=k.subtract(Z.getCenter()),pe=Z.extend(k).getSize().subtract(Q);w.x+=ie.x<0?-pe.x:pe.x,w.y+=ie.y<0?-pe.y:pe.y,this.panTo(this.unproject(w),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=c.divideBy(2).round(),w=d.divideBy(2).round(),k=p.subtract(w);return!k.x&&!k.y?this:(a.animate&&a.pan?this.panBy(k):(a.pan&&this._rawPanBy(k),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=l(this._handleGeolocationResponse,this),d=l(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,d,a):navigator.geolocation.getCurrentPosition(c,d,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,d=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,d=a.coords.longitude,p=new se(c,d),w=p.toBounds(a.coords.accuracy*2),k=this._locateOptions;if(k.setView){var $=this.getBoundsZoom(w);this.setView(p,k.maxZoom?Math.min($,k.maxZoom):$)}var Z={latlng:p,bounds:w,timestamp:a.timestamp};for(var Q in a.coords)typeof a.coords[Q]=="number"&&(Z[Q]=a.coords[Q]);this.fire("locationfound",Z)}},addHandler:function(a,c){if(!c)return this;var d=this[a]=new c(this);return this._handlers.push(d),this.options[a]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)qe(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var d="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),p=We("div",d,c||this._mapPane);return a&&(this._panes[a]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),d=this.unproject(a.getTopRight());return new fe(c,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,d){a=X(a),d=z(d||[0,0]);var p=this.getZoom()||0,w=this.getMinZoom(),k=this.getMaxZoom(),$=a.getNorthWest(),Z=a.getSouthEast(),Q=this.getSize().subtract(d),ie=J(this.project(Z,p),this.project($,p)).getSize(),pe=ve.any3d?this.options.zoomSnap:1,ke=Q.x/ie.x,Ae=Q.y/ie.y,gn=c?Math.max(ke,Ae):Math.min(ke,Ae);return p=this.getScaleZoom(gn,p),pe&&(p=Math.round(p/(pe/100))*(pe/100),p=c?Math.ceil(p/pe)*pe:Math.floor(p/pe)*pe),Math.max(w,Math.min(k,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var d=this._getTopLeftPoint(a,c);return new G(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var d=this.options.crs;return c=c===void 0?this._zoom:c,d.scale(a)/d.scale(c)},getScaleZoom:function(a,c){var d=this.options.crs;c=c===void 0?this._zoom:c;var p=d.zoom(a*d.scale(c));return isNaN(p)?1/0:p},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(he(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(z(a),c)},layerPointToLatLng:function(a){var c=z(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(he(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(he(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(X(a))},distance:function(a,c){return this.options.crs.distance(he(a),he(c))},containerPointToLayerPoint:function(a){return z(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return z(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(z(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(he(a)))},mouseEventToContainerPoint:function(a){return ga(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=Ul(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Se(c,"scroll",this._onScroll,this),this._containerId=m(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ve.any3d,ye(a,"leaflet-container"+(ve.touch?" leaflet-touch":"")+(ve.retina?" leaflet-retina":"")+(ve.ielt9?" leaflet-oldie":"")+(ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Xs(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),gt(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(a.markerPane,"leaflet-zoom-hide"),ye(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,d){gt(this._mapPane,new F(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var w=this._zoom!==c;this._moveStart(w,d)._move(a,c)._moveEnd(w),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,d,p){c===void 0&&(c=this._zoom);var w=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),p?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){gt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[m(this._container)]=this;var c=a?Xe:Se;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ve.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var d=[],p,w=c==="mouseout"||c==="mouseover",k=a.target||a.srcElement,$=!1;k;){if(p=this._targets[m(k)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){$=!0;break}if(p&&p.listens(c,!0)&&(w&&!Hl(k,a)||(d.push(p),w))||k===this._container)break;k=k.parentNode}return!d.length&&!$&&!w&&this.listens(c,!0)&&(d=[this]),d},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var d=a.type;d==="mousedown"&&Bl(c),this._fireDOMEvent(a,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,d){if(a.type==="click"){var p=i({},a);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var w=this._findEventTargets(a,c);if(d){for(var k=[],$=0;$<d.length;$++)d[$].listens(c,!0)&&k.push(d[$]);w=k.concat(w)}if(w.length){c==="contextmenu"&&Pt(a);var Z=w[0],Q={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ie=Z.getLatLng&&(!Z._radius||Z._radius<=10);Q.containerPoint=ie?this.latLngToContainerPoint(Z.getLatLng()):this.mouseEventToContainerPoint(a),Q.layerPoint=this.containerPointToLayerPoint(Q.containerPoint),Q.latlng=ie?Z.getLatLng():this.layerPointToLatLng(Q.layerPoint)}for($=0;$<w.length;$++)if(w[$].fire(c,Q,!0),Q.originalEvent._stopped||w[$].options.bubblingMouseEvents===!1&&W(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return fs(this._mapPane)||new F(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var d=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var d=this.getSize()._divideBy(2);return this.project(a,c)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,d){var p=this._getNewPixelOrigin(d,c);return this.project(a,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(a,c,d){var p=this._getNewPixelOrigin(d,c);return J([this.project(a.getSouthWest(),c)._subtract(p),this.project(a.getNorthWest(),c)._subtract(p),this.project(a.getSouthEast(),c)._subtract(p),this.project(a.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,d){if(!d)return a;var p=this.project(a,c),w=this.getSize().divideBy(2),k=new G(p.subtract(w),p.add(w)),$=this._getBoundsOffset(k,d,c);return Math.abs($.x)<=1&&Math.abs($.y)<=1?a:this.unproject(p.add($),c)},_limitOffset:function(a,c){if(!c)return a;var d=this.getPixelBounds(),p=new G(d.min.add(a),d.max.add(a));return a.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(a,c,d){var p=J(this.project(c.getNorthEast(),d),this.project(c.getSouthWest(),d)),w=p.min.subtract(a.min),k=p.max.subtract(a.max),$=this._rebound(w.x,-k.x),Z=this._rebound(w.y,-k.y);return new F($,Z)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),d=this.getMaxZoom(),p=ve.any3d?this.options.zoomSnap:1;return p&&(a=Math.round(a/p)*p),Math.max(c,Math.min(d,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var d=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,c),!0)},_createAnimProxy:function(){var a=this._proxy=We("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var d=da,p=this._proxy.style[d];ms(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();ms(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),w=this._getCenterOffset(a)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(w)?!1:(B(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function po(a,c){return new Ie(a,c)}var kn=me.extend({options:{position:"topright"},initialize:function(a){S(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),d=this.getPosition(),p=a._controlCorners[d];return ye(c,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Rr=function(a){return new kn(a)};Ie.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",d=this._controlContainer=We("div",c+"control-container",this._container);function p(w,k){var $=c+w+" "+c+k;a[w+k]=We("div",$,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)qe(this._controlCorners[a]);qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ed=kn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,d,p){return d<p?-1:p<d?1:0}},initialize:function(a,c,d){S(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in a)this._addLayer(a[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return kn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(m(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):rt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=We("div",a),d=this.options.collapsed;c.setAttribute("aria-haspopup",!0),pa(c),Fl(c);var p=this._section=We("section",a+"-list");d&&(this._map.on("click",this.collapse,this),Se(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=We("a",a+"-toggle",c);w.href="#",w.title="Layers",w.setAttribute("role","button"),Se(w,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Pt(k),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=We("div",a+"-base",p),this._separator=We("div",a+"-separator",p),this._overlaysList=We("div",a+"-overlays",p),c.appendChild(p)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&m(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,d){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:d}),this.options.sortLayers&&this._layers.sort(l(function(p,w){return this.options.sortFunction(p.layer,w.layer,p.name,w.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fn(this._baseLayersList),fn(this._overlaysList),this._layerControlInputs=[];var a,c,d,p,w=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),c=c||p.overlay,a=a||!p.overlay,w+=p.overlay?0:1;return this.options.hideSingleBase&&(a=a&&w>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(m(a.target)),d=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;d&&this._map.fire(d,c)},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(a){var c=document.createElement("label"),d=this._map.hasLayer(a.layer),p;a.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+m(this),d),this._layerControlInputs.push(p),p.layerId=m(a.layer),Se(p,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+a.name;var k=document.createElement("span");c.appendChild(k),k.appendChild(p),k.appendChild(w);var $=a.overlay?this._overlaysList:this._baseLayersList;return $.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,d,p=[],w=[];this._handlingClick=!0;for(var k=a.length-1;k>=0;k--)c=a[k],d=this._getLayer(c.layerId).layer,c.checked?p.push(d):c.checked||w.push(d);for(k=0;k<w.length;k++)this._map.hasLayer(w[k])&&this._map.removeLayer(w[k]);for(k=0;k<p.length;k++)this._map.hasLayer(p[k])||this._map.addLayer(p[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,d,p=this._map.getZoom(),w=a.length-1;w>=0;w--)c=a[w],d=this._getLayer(c.layerId).layer,c.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Se(a,"click",Pt),this.expand();var c=this;setTimeout(function(){Xe(a,"click",Pt),c._preventClick=!1})}}),td=function(a,c,d){return new ed(a,c,d)},gs=kn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",d=We("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",d,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,d,p,w){var k=We("a",d,p);return k.innerHTML=a,k.href="#",k.title=c,k.setAttribute("role","button"),k.setAttribute("aria-label",c),pa(k),Se(k,"click",Ir),Se(k,"click",w,this),Se(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";rt(this._zoomInButton,c),rt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(ye(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(ye(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new gs,this.addControl(this.zoomControl))});var nd=function(a){return new gs(a)},Zl=kn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",d=We("div",c),p=this.options;return this._addScales(p,c+"-line",d),a.on(p.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),d},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,d){a.metric&&(this._mScale=We("div",c,d)),a.imperial&&(this._iScale=We("div",c,d))},_update:function(){var a=this._map,c=a.getSize().y/2,d=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(d)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),d=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,d,c/a)},_updateImperial:function(a){var c=a*3.2808399,d,p,w;c>5280?(d=c/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(w=this._getRoundNum(c),this._updateScale(this._iScale,w+" ft",w/c))},_updateScale:function(a,c,d){a.style.width=Math.round(this.options.maxWidth*d)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),d=a/c;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,c*d}}),Kl=function(a){return new Zl(a)},Gl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',go=kn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ve.inlineSvg?Gl+" ":"")+"Leaflet</a>"},initialize:function(a){S(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=We("div","leaflet-control-attribution"),pa(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var d=[];this.options.prefix&&d.push(this.options.prefix),a.length&&d.push(a.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new go().addTo(this)});var yo=function(a){return new go(a)};kn.Layers=ed,kn.Zoom=gs,kn.Scale=Zl,kn.Attribution=go,Rr.layers=td,Rr.zoom=nd,Rr.scale=Kl,Rr.attribution=yo;var Vn=me.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vn.addTo=function(a,c){return a.addHandler(c,this),this};var rd={Events:ce},Lr=ve.touch?"touchstart mousedown":"mousedown",pr=ne.extend({options:{clickTolerance:3},initialize:function(a,c,d,p){S(this,p),this._element=a,this._dragStartTarget=c||a,this._preventOutline=d},enable:function(){this._enabled||(Se(this._dragStartTarget,Lr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(pr._dragging===this&&this.finishDrag(!0),Xe(this._dragStartTarget,Lr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!ha(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){pr._dragging===this&&this.finishDrag();return}if(!(pr._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(pr._dragging=this,this._preventOutline&&Bl(this._element),uo(),fr(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,d=Xu(this._element);this._startPoint=new F(c.clientX,c.clientY),this._startPos=fs(this._element),this._parentScale=Xn(d);var p=a.type==="mousedown";Se(document,p?"mousemove":"touchmove",this._onMove,this),Se(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,d=new F(c.clientX,c.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Pt(a),this._moved||(this.fire("dragstart"),this._moved=!0,ye(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),gt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){rt(document.body,"leaflet-dragging"),this._lastTarget&&(rt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xe(document,"mousemove touchmove",this._onMove,this),Xe(document,"mouseup touchend touchcancel",this._onUp,this),ho(),On();var c=this._moved&&this._moving;this._moving=!1,pr._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Ql(a,c,d){var p,w=[1,4,2,8],k,$,Z,Q,ie,pe,ke,Ae;for(k=0,pe=a.length;k<pe;k++)a[k]._code=K(a[k],c);for(Z=0;Z<4;Z++){for(ke=w[Z],p=[],k=0,pe=a.length,$=pe-1;k<pe;$=k++)Q=a[k],ie=a[$],Q._code&ke?ie._code&ke||(Ae=q(ie,Q,ke,c,d),Ae._code=K(Ae,c),p.push(Ae)):(ie._code&ke&&(Ae=q(ie,Q,ke,c,d),Ae._code=K(Ae,c),p.push(Ae)),p.push(Q));a=p}return a}function Yl(a,c){var d,p,w,k,$,Z,Q,ie,pe;if(!a||a.length===0)throw new Error("latlngs not passed");Ze(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var ke=he([0,0]),Ae=X(a),gn=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());gn<1700&&(ke=xo(a));var Wt=a.length,nr=[];for(d=0;d<Wt;d++){var Tn=he(a[d]);nr.push(c.project(he([Tn.lat-ke.lat,Tn.lng-ke.lng])))}for(Z=Q=ie=0,d=0,p=Wt-1;d<Wt;p=d++)w=nr[d],k=nr[p],$=w.y*k.x-k.y*w.x,Q+=(w.x+k.x)*$,ie+=(w.y+k.y)*$,Z+=$*3;Z===0?pe=nr[0]:pe=[Q/Z,ie/Z];var Eo=c.unproject(z(pe));return he([Eo.lat+ke.lat,Eo.lng+ke.lng])}function xo(a){for(var c=0,d=0,p=0,w=0;w<a.length;w++){var k=he(a[w]);c+=k.lat,d+=k.lng,p++}return he([c/p,d/p])}var wo={__proto__:null,clipPolygon:Ql,polygonCenter:Yl,centroid:xo};function nn(a,c){if(!c||!a.length)return a.slice();var d=c*c;return a=y(a,d),a=ni(a,d),a}function Jl(a,c,d){return Math.sqrt(Pe(a,c,d,!0))}function sd(a,c,d){return Pe(a,c,d)}function ni(a,c){var d=a.length,p=typeof Uint8Array<"u"?Uint8Array:Array,w=new p(d);w[0]=w[d-1]=1,u(a,w,c,0,d-1);var k,$=[];for(k=0;k<d;k++)w[k]&&$.push(a[k]);return $}function u(a,c,d,p,w){var k=0,$,Z,Q;for(Z=p+1;Z<=w-1;Z++)Q=Pe(a[Z],a[p],a[w],!0),Q>k&&($=Z,k=Q);k>d&&(c[$]=1,u(a,c,d,p,$),u(a,c,d,$,w))}function y(a,c){for(var d=[a[0]],p=1,w=0,k=a.length;p<k;p++)oe(a[p],a[w])>c&&(d.push(a[p]),w=p);return w<k-1&&d.push(a[k-1]),d}var _;function V(a,c,d,p,w){var k=p?_:K(a,d),$=K(c,d),Z,Q,ie;for(_=$;;){if(!(k|$))return[a,c];if(k&$)return!1;Z=k||$,Q=q(a,c,Z,d,w),ie=K(Q,d),Z===k?(a=Q,k=ie):(c=Q,$=ie)}}function q(a,c,d,p,w){var k=c.x-a.x,$=c.y-a.y,Z=p.min,Q=p.max,ie,pe;return d&8?(ie=a.x+k*(Q.y-a.y)/$,pe=Q.y):d&4?(ie=a.x+k*(Z.y-a.y)/$,pe=Z.y):d&2?(ie=Q.x,pe=a.y+$*(Q.x-a.x)/k):d&1&&(ie=Z.x,pe=a.y+$*(Z.x-a.x)/k),new F(ie,pe,w)}function K(a,c){var d=0;return a.x<c.min.x?d|=1:a.x>c.max.x&&(d|=2),a.y<c.min.y?d|=4:a.y>c.max.y&&(d|=8),d}function oe(a,c){var d=c.x-a.x,p=c.y-a.y;return d*d+p*p}function Pe(a,c,d,p){var w=c.x,k=c.y,$=d.x-w,Z=d.y-k,Q=$*$+Z*Z,ie;return Q>0&&(ie=((a.x-w)*$+(a.y-k)*Z)/Q,ie>1?(w=d.x,k=d.y):ie>0&&(w+=$*ie,k+=Z*ie)),$=a.x-w,Z=a.y-k,p?$*$+Z*Z:new F(w,k)}function Ze(a){return!I(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Ge(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ze(a)}function bt(a,c){var d,p,w,k,$,Z,Q,ie;if(!a||a.length===0)throw new Error("latlngs not passed");Ze(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var pe=he([0,0]),ke=X(a),Ae=ke.getNorthWest().distanceTo(ke.getSouthWest())*ke.getNorthEast().distanceTo(ke.getNorthWest());Ae<1700&&(pe=xo(a));var gn=a.length,Wt=[];for(d=0;d<gn;d++){var nr=he(a[d]);Wt.push(c.project(he([nr.lat-pe.lat,nr.lng-pe.lng])))}for(d=0,p=0;d<gn-1;d++)p+=Wt[d].distanceTo(Wt[d+1])/2;if(p===0)ie=Wt[0];else for(d=0,k=0;d<gn-1;d++)if($=Wt[d],Z=Wt[d+1],w=$.distanceTo(Z),k+=w,k>p){Q=(k-p)/w,ie=[Z.x-Q*(Z.x-$.x),Z.y-Q*(Z.y-$.y)];break}var Tn=c.unproject(z(ie));return he([Tn.lat+pe.lat,Tn.lng+pe.lng])}var er={__proto__:null,simplify:nn,pointToSegmentDistance:Jl,closestPointOnSegment:sd,clipSegment:V,_getEdgeIntersection:q,_getBitCode:K,_sqClosestPointOnSegment:Pe,isFlat:Ze,_flat:Ge,polylineCenter:bt},gr={project:function(a){return new F(a.lng,a.lat)},unproject:function(a){return new se(a.y,a.x)},bounds:new G([-180,-90],[180,90])},tr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,d=this.R,p=a.lat*c,w=this.R_MINOR/d,k=Math.sqrt(1-w*w),$=k*Math.sin(p),Z=Math.tan(Math.PI/4-p/2)/Math.pow((1-$)/(1+$),k/2);return p=-d*Math.log(Math.max(Z,1e-10)),new F(a.lng*c*d,p)},unproject:function(a){for(var c=180/Math.PI,d=this.R,p=this.R_MINOR/d,w=Math.sqrt(1-p*p),k=Math.exp(-a.y/d),$=Math.PI/2-2*Math.atan(k),Z=0,Q=.1,ie;Z<15&&Math.abs(Q)>1e-7;Z++)ie=w*Math.sin($),ie=Math.pow((1-ie)/(1+ie),w/2),Q=Math.PI/2-2*Math.atan(k*ie)-$,$+=Q;return new se($*c,a.x*c/d)}},Dr={__proto__:null,LonLat:gr,Mercator:tr,SphericalMercator:St},vo=i({},Ne,{code:"EPSG:3395",projection:tr,transformation:function(){var a=.5/(Math.PI*tr.R);return _e(a,.5,-a,.5)}()}),_o=i({},Ne,{code:"EPSG:4326",projection:gr,transformation:_e(1/180,1,-1/180,.5)}),c2=i({},Be,{projection:gr,transformation:_e(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var d=c.lng-a.lng,p=c.lat-a.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Be.Earth=Ne,Be.EPSG3395=vo,Be.EPSG3857=Fe,Be.EPSG900913=Re,Be.EPSG4326=_o,Be.Simple=c2;var yr=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[m(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[m(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var d=this.getEvents();c.on(d,this),this.once("remove",function(){c.off(d,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=m(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=m(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return m(a)in this._layers},eachLayer:function(a,c){for(var d in this._layers)a.call(c,this._layers[d]);return this},_addLayers:function(a){a=a?I(a)?a:[a]:[];for(var c=0,d=a.length;c<d;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[m(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=m(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var w=this._zoomBoundLayers[p].options;a=w.minZoom===void 0?a:Math.min(a,w.minZoom),c=w.maxZoom===void 0?c:Math.max(c,w.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bo=yr.extend({initialize:function(a,c){S(this,c),this._layers={};var d,p;if(a)for(d=0,p=a.length;d<p;d++)this.addLayer(a[d])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[a]&&p[a].apply(p,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var d in this._layers)a.call(c,this._layers[d]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return m(a)}}),u2=function(a,c){return new bo(a,c)},ys=bo.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),bo.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),bo.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new fe;for(var c in this._layers){var d=this._layers[c];a.extend(d.getBounds?d.getBounds():d.getLatLng())}return a}}),d2=function(a,c){return new ys(a,c)},jo=me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){S(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var d=this._getIconUrl(a);if(!d){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(a,c){var d=this.options,p=d[c+"Size"];typeof p=="number"&&(p=[p,p]);var w=z(p),k=z(c==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(d.className||""),k&&(a.style.marginLeft=-k.x+"px",a.style.marginTop=-k.y+"px"),w&&(a.style.width=w.x+"px",a.style.height=w.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return ve.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function h2(a){return new jo(a)}var Xl=jo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Xl.imagePath!="string"&&(Xl.imagePath=this._detectIconPath()),(this.options.imagePath||Xl.imagePath)+jo.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(d,p,w){var k=p.exec(d);return k&&k[w]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=We("div","leaflet-default-icon-path",document.body),c=Xs(a,"background-image")||Xs(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Gx=Vn.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new pr(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,d=c._map,p=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,k=fs(c._icon),$=d.getPixelBounds(),Z=d.getPixelOrigin(),Q=J($.min._subtract(Z).add(w),$.max._subtract(Z).subtract(w));if(!Q.contains(k)){var ie=z((Math.max(Q.max.x,k.x)-Q.max.x)/($.max.x-Q.max.x)-(Math.min(Q.min.x,k.x)-Q.min.x)/($.min.x-Q.min.x),(Math.max(Q.max.y,k.y)-Q.max.y)/($.max.y-Q.max.y)-(Math.min(Q.min.y,k.y)-Q.min.y)/($.min.y-Q.min.y)).multiplyBy(p);d.panBy(ie,{animate:!1}),this._draggable._newPos._add(ie),this._draggable._startPos._add(ie),gt(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=B(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,d=c._shadow,p=fs(c._icon),w=c._map.layerPointToLatLng(p);d&&gt(d,p),c._latlng=w,a.latlng=w,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),id=yr.extend({options:{icon:new Xl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){S(this,c),this._latlng=he(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=he(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=a.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,a.title&&(d.title=a.title),d.tagName==="IMG"&&(d.alt=a.alt||"")),ye(d,c),a.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Se(d,"focus",this._panOnFocus,this);var w=a.icon.createShadow(this._shadow),k=!1;w!==this._shadow&&(this._removeShadow(),k=!0),w&&(ye(w,c),w.alt=""),this._shadow=w,a.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&k&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(this._icon,"focus",this._panOnFocus,this),qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qe(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&gt(this._icon,a),this._shadow&&gt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gx)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gx(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Nn(this._icon,a),this._shadow&&Nn(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,d=c.iconSize?z(c.iconSize):z(0,0),p=c.iconAnchor?z(c.iconAnchor):z(0,0);a.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function m2(a,c){return new id(a,c)}var ri=yr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return S(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ad=ri.extend({options:{fill:!0,radius:10},initialize:function(a,c){S(this,c),this._latlng=he(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=he(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return ri.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,d=this._clickTolerance(),p=[a+d,c+d];this._pxBounds=new G(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function f2(a,c){return new ad(a,c)}var ff=ad.extend({initialize:function(a,c,d){if(typeof c=="number"&&(c=i({},d,{radius:c})),S(this,c),this._latlng=he(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:ri.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Ne.distance){var w=Math.PI/180,k=this._mRadius/Ne.R/w,$=d.project([c+k,a]),Z=d.project([c-k,a]),Q=$.add(Z).divideBy(2),ie=d.unproject(Q).lat,pe=Math.acos((Math.cos(k*w)-Math.sin(c*w)*Math.sin(ie*w))/(Math.cos(c*w)*Math.cos(ie*w)))/w;(isNaN(pe)||pe===0)&&(pe=k/Math.cos(Math.PI/180*c)),this._point=Q.subtract(d.getPixelOrigin()),this._radius=isNaN(pe)?0:Q.x-d.project([ie,a-pe]).x,this._radiusY=Q.y-$.y}else{var ke=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ke).x}this._updateBounds()}});function p2(a,c,d){return new ff(a,c,d)}var xs=ri.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){S(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,d=null,p=Pe,w,k,$=0,Z=this._parts.length;$<Z;$++)for(var Q=this._parts[$],ie=1,pe=Q.length;ie<pe;ie++){w=Q[ie-1],k=Q[ie];var ke=p(a,w,k,!0);ke<c&&(c=ke,d=p(a,w,k))}return d&&(d.distance=Math.sqrt(c)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=he(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new fe,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Ze(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],d=Ze(a),p=0,w=a.length;p<w;p++)d?(c[p]=he(a[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(a[p]);return c},_project:function(){var a=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new F(a,a);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,d){var p=a[0]instanceof se,w=a.length,k,$;if(p){for($=[],k=0;k<w;k++)$[k]=this._map.latLngToLayerPoint(a[k]),d.extend($[k]);c.push($)}else for(k=0;k<w;k++)this._projectLatlngs(a[k],c,d)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,d,p,w,k,$,Z,Q;for(d=0,w=0,k=this._rings.length;d<k;d++)for(Q=this._rings[d],p=0,$=Q.length;p<$-1;p++)Z=V(Q[p],Q[p+1],a,p,!0),Z&&(c[w]=c[w]||[],c[w].push(Z[0]),(Z[1]!==Q[p+1]||p===$-2)&&(c[w].push(Z[1]),w++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,d=0,p=a.length;d<p;d++)a[d]=nn(a[d],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var d,p,w,k,$,Z,Q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(d=0,k=this._parts.length;d<k;d++)for(Z=this._parts[d],p=0,$=Z.length,w=$-1;p<$;w=p++)if(!(!c&&p===0)&&Jl(a,Z[w],Z[p])<=Q)return!0;return!1}});function g2(a,c){return new xs(a,c)}xs._flat=Ge;var No=xs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=xs.prototype._convertLatLngs.call(this,a),d=c.length;return d>=2&&c[0]instanceof se&&c[0].equals(c[d-1])&&c.pop(),c},_setLatLngs:function(a){xs.prototype._setLatLngs.call(this,a),Ze(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ze(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,d=new F(c,c);if(a=new G(a.min.subtract(d),a.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,w=this._rings.length,k;p<w;p++)k=Ql(this._rings[p],a,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,d,p,w,k,$,Z,Q,ie;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(k=0,Q=this._parts.length;k<Q;k++)for(d=this._parts[k],$=0,ie=d.length,Z=ie-1;$<ie;Z=$++)p=d[$],w=d[Z],p.y>a.y!=w.y>a.y&&a.x<(w.x-p.x)*(a.y-p.y)/(w.y-p.y)+p.x&&(c=!c);return c||xs.prototype._containsPoint.call(this,a,!0)}});function y2(a,c){return new No(a,c)}var ws=ys.extend({initialize:function(a,c){S(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=I(a)?a:a.features,d,p,w;if(c){for(d=0,p=c.length;d<p;d++)w=c[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var k=this.options;if(k.filter&&!k.filter(a))return this;var $=od(a,k);return $?($.feature=ud(a),$.defaultOptions=$.options,this.resetStyle($),k.onEachFeature&&k.onEachFeature(a,$),this.addLayer($)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function od(a,c){var d=a.type==="Feature"?a.geometry:a,p=d?d.coordinates:null,w=[],k=c&&c.pointToLayer,$=c&&c.coordsToLatLng||pf,Z,Q,ie,pe;if(!p&&!d)return null;switch(d.type){case"Point":return Z=$(p),Qx(k,a,Z,c);case"MultiPoint":for(ie=0,pe=p.length;ie<pe;ie++)Z=$(p[ie]),w.push(Qx(k,a,Z,c));return new ys(w);case"LineString":case"MultiLineString":return Q=ld(p,d.type==="LineString"?0:1,$),new xs(Q,c);case"Polygon":case"MultiPolygon":return Q=ld(p,d.type==="Polygon"?1:2,$),new No(Q,c);case"GeometryCollection":for(ie=0,pe=d.geometries.length;ie<pe;ie++){var ke=od({geometry:d.geometries[ie],type:"Feature",properties:a.properties},c);ke&&w.push(ke)}return new ys(w);case"FeatureCollection":for(ie=0,pe=d.features.length;ie<pe;ie++){var Ae=od(d.features[ie],c);Ae&&w.push(Ae)}return new ys(w);default:throw new Error("Invalid GeoJSON object.")}}function Qx(a,c,d,p){return a?a(c,d):new id(d,p&&p.markersInheritOptions&&p)}function pf(a){return new se(a[1],a[0],a[2])}function ld(a,c,d){for(var p=[],w=0,k=a.length,$;w<k;w++)$=c?ld(a[w],c-1,d):(d||pf)(a[w]),p.push($);return p}function gf(a,c){return a=he(a),a.alt!==void 0?[v(a.lng,c),v(a.lat,c),v(a.alt,c)]:[v(a.lng,c),v(a.lat,c)]}function cd(a,c,d,p){for(var w=[],k=0,$=a.length;k<$;k++)w.push(c?cd(a[k],Ze(a[k])?0:c-1,d,p):gf(a[k],p));return!c&&d&&w.length>0&&w.push(w[0].slice()),w}function ko(a,c){return a.feature?i({},a.feature,{geometry:c}):ud(c)}function ud(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var yf={toGeoJSON:function(a){return ko(this,{type:"Point",coordinates:gf(this.getLatLng(),a)})}};id.include(yf),ff.include(yf),ad.include(yf),xs.include({toGeoJSON:function(a){var c=!Ze(this._latlngs),d=cd(this._latlngs,c?1:0,!1,a);return ko(this,{type:(c?"Multi":"")+"LineString",coordinates:d})}}),No.include({toGeoJSON:function(a){var c=!Ze(this._latlngs),d=c&&!Ze(this._latlngs[0]),p=cd(this._latlngs,d?2:c?1:0,!0,a);return c||(p=[p]),ko(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),bo.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(d){c.push(d.toGeoJSON(a).geometry.coordinates)}),ko(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var d=c==="GeometryCollection",p=[];return this.eachLayer(function(w){if(w.toGeoJSON){var k=w.toGeoJSON(a);if(d)p.push(k.geometry);else{var $=ud(k);$.type==="FeatureCollection"?p.push.apply(p,$.features):p.push($)}}}),d?ko(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Yx(a,c){return new ws(a,c)}var x2=Yx,dd=yr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,d){this._url=a,this._bounds=X(c),S(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Yn(this._image),this},bringToBack:function(){return this._map&&Jn(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=X(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:We("img");if(ye(c,"leaflet-image-layer"),this._zoomAnimated&&ye(c,"leaflet-zoom-animated"),this.options.className&&ye(c,this.options.className),c.onselectstart=x,c.onmousemove=x,c.onload=l(this.fire,this,"load"),c.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;ms(this._image,d,c)},_reset:function(){var a=this._image,c=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=c.getSize();gt(a,c.min),a.style.width=d.x+"px",a.style.height=d.y+"px"},_updateOpacity:function(){Nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),w2=function(a,c,d){return new dd(a,c,d)},Jx=dd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:We("video");if(ye(c,"leaflet-image-layer"),this._zoomAnimated&&ye(c,"leaflet-zoom-animated"),this.options.className&&ye(c,this.options.className),c.onselectstart=x,c.onmousemove=x,c.onloadeddata=l(this.fire,this,"load"),a){for(var d=c.getElementsByTagName("source"),p=[],w=0;w<d.length;w++)p.push(d[w].src);this._url=d.length>0?p:[c.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var $=We("source");$.src=this._url[k],c.appendChild($)}}});function v2(a,c,d){return new Jx(a,c,d)}var Xx=dd.extend({_initImage:function(){var a=this._image=this._url;ye(a,"leaflet-image-layer"),this._zoomAnimated&&ye(a,"leaflet-zoom-animated"),this.options.className&&ye(a,this.options.className),a.onselectstart=x,a.onmousemove=x}});function _2(a,c,d){return new Xx(a,c,d)}var Mr=yr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof se||I(a))?(this._latlng=he(a),S(this,c)):(S(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Nn(this._container,1),this.bringToFront(),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Nn(this._container,0),this._removeTimeout=setTimeout(l(qe,void 0,this._container),200)):qe(this._container),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=he(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yn(this._container),this},bringToBack:function(){return this._map&&Jn(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof ys){c=null;var d=this._source._layers;for(var p in d)if(d[p]._map){c=d[p];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=z(this.options.offset),d=this._getAnchor();this._zoomAnimated?gt(this._container,a.add(d)):c=c.add(a).add(d);var p=this._containerBottom=-c.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(a,c,d,p){var w=c;return w instanceof a||(w=new a(p).setContent(c)),d&&w.setLatLng(d),w}}),yr.include({_initOverlay:function(a,c,d,p){var w=d;return w instanceof a?(S(w,p),w._source=this):(w=c&&!p?c:new a(p,this),w.setContent(d)),w}});var hd=Mr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Mr.prototype.openOn.call(this,a)},onAdd:function(a){Mr.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ri||this._source.on("preclick",Ke))},onRemove:function(a){Mr.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ri||this._source.off("preclick",Ke))},getEvents:function(){var a=Mr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=We("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=We("div",a+"-content-wrapper",c);if(this._contentNode=We("div",a+"-content",d),pa(c),Fl(this._contentNode),Se(c,"contextmenu",Ke),this._tipContainer=We("div",a+"-tip-container",c),this._tip=We("div",a+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=We("a",a+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Se(p,"click",function(w){Pt(w),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var d=a.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),c.width=d+1+"px",c.whiteSpace="",c.height="";var p=a.offsetHeight,w=this.options.maxHeight,k="leaflet-popup-scrolled";w&&p>w?(c.height=w+"px",ye(a,k)):rt(a,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),d=this._getAnchor();gt(this._container,c.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(Xs(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+c,p=this._containerWidth,w=new F(this._containerLeft,-d-this._containerBottom);w._add(fs(this._container));var k=a.layerPointToContainerPoint(w),$=z(this.options.autoPanPadding),Z=z(this.options.autoPanPaddingTopLeft||$),Q=z(this.options.autoPanPaddingBottomRight||$),ie=a.getSize(),pe=0,ke=0;k.x+p+Q.x>ie.x&&(pe=k.x+p-ie.x+Q.x),k.x-pe-Z.x<0&&(pe=k.x-Z.x),k.y+d+Q.y>ie.y&&(ke=k.y+d-ie.y+Q.y),k.y-ke-Z.y<0&&(ke=k.y-Z.y),(pe||ke)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([pe,ke]))}},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),b2=function(a,c){return new hd(a,c)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(a,c,d){return this._initOverlay(hd,a,c,d).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),yr.include({bindPopup:function(a,c){return this._popup=this._initOverlay(hd,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof ys||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Ir(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof ri)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var md=Mr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Mr.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Mr.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Mr.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=We("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,d,p=this._map,w=this._container,k=p.latLngToContainerPoint(p.getCenter()),$=p.layerPointToContainerPoint(a),Z=this.options.direction,Q=w.offsetWidth,ie=w.offsetHeight,pe=z(this.options.offset),ke=this._getAnchor();Z==="top"?(c=Q/2,d=ie):Z==="bottom"?(c=Q/2,d=0):Z==="center"?(c=Q/2,d=ie/2):Z==="right"?(c=0,d=ie/2):Z==="left"?(c=Q,d=ie/2):$.x<k.x?(Z="right",c=0,d=ie/2):(Z="left",c=Q+(pe.x+ke.x)*2,d=ie/2),a=a.subtract(z(c,d,!0)).add(pe).add(ke),rt(w,"leaflet-tooltip-right"),rt(w,"leaflet-tooltip-left"),rt(w,"leaflet-tooltip-top"),rt(w,"leaflet-tooltip-bottom"),ye(w,"leaflet-tooltip-"+Z),gt(w,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Nn(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),j2=function(a,c){return new md(a,c)};Ie.include({openTooltip:function(a,c,d){return this._initOverlay(md,a,c,d).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),yr.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(md,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[c](d),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof ys||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(Se(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Se(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,d,p;this._tooltip.options.sticky&&a.originalEvent&&(d=this._map.mouseEventToContainerPoint(a.originalEvent),p=this._map.containerPointToLayerPoint(d),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var e0=jo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),d=this.options;if(d.html instanceof Element?(fn(c),c.appendChild(d.html)):c.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=z(d.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function N2(a){return new e0(a)}jo.Default=Xl;var ec=yr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){S(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),qe(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Jn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof F?a:new F(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,d=-a(-1/0,1/0),p=0,w=c.length,k;p<w;p++)k=c[p].style.zIndex,c[p]!==this._container&&k&&(d=a(d,+k));isFinite(d)&&(this.options.zIndex=d+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ve.ielt9){Nn(this._container,this.options.opacity);var a=+new Date,c=!1,d=!1;for(var p in this._tiles){var w=this._tiles[p];if(!(!w.current||!w.loaded)){var k=Math.min(1,(a-w.loaded)/200);Nn(w.el,k),k<1?c=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),c&&(H(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=We("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===a?(this._levels[d].el.style.zIndex=c-Math.abs(a-d),this._onUpdateLevel(d)):(qe(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[a],w=this._map;return p||(p=this._levels[a]={},p.el=We("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=w.project(w.unproject(w.getPixelOrigin()),a).round(),p.zoom=a,this._setZoomTransform(p,w.getCenter(),w.getZoom()),x(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var a,c,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)qe(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,d,p){var w=Math.floor(a/2),k=Math.floor(c/2),$=d-1,Z=new F(+w,+k);Z.z=+$;var Q=this._tileCoordsToKey(Z),ie=this._tiles[Q];return ie&&ie.active?(ie.retain=!0,!0):(ie&&ie.loaded&&(ie.retain=!0),$>p?this._retainParent(w,k,$,p):!1)},_retainChildren:function(a,c,d,p){for(var w=2*a;w<2*a+2;w++)for(var k=2*c;k<2*c+2;k++){var $=new F(w,k);$.z=d+1;var Z=this._tileCoordsToKey($),Q=this._tiles[Z];if(Q&&Q.active){Q.retain=!0;continue}else Q&&Q.loaded&&(Q.retain=!0);d+1<p&&this._retainChildren(w,k,d+1,p)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,d,p){var w=Math.round(c);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var k=this.options.updateWhenZooming&&w!==this._tileZoom;(!p||k)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(a),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var d in this._levels)this._setZoomTransform(this._levels[d],a,c)},_setZoomTransform:function(a,c,d){var p=this._map.getZoomScale(d,a.zoom),w=a.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,d)).round();ve.any3d?ms(a.el,w,p):gt(a.el,w)},_resetGrid:function(){var a=this._map,c=a.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],p).x/d.x),Math.ceil(a.project([0,c.wrapLng[1]],p).x/d.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],p).y/d.x),Math.ceil(a.project([c.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,d=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(d,this._tileZoom),w=c.project(a,this._tileZoom).floor(),k=c.getSize().divideBy(p*2);return new G(w.subtract(k),w.add(k))},_update:function(a){var c=this._map;if(c){var d=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(a),w=this._pxBoundsToTileRange(p),k=w.getCenter(),$=[],Z=this.options.keepBuffer,Q=new G(w.getBottomLeft().subtract([Z,-Z]),w.getTopRight().add([Z,-Z]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ie in this._tiles){var pe=this._tiles[ie].coords;(pe.z!==this._tileZoom||!Q.contains(new F(pe.x,pe.y)))&&(this._tiles[ie].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(a,d);return}for(var ke=w.min.y;ke<=w.max.y;ke++)for(var Ae=w.min.x;Ae<=w.max.x;Ae++){var gn=new F(Ae,ke);if(gn.z=this._tileZoom,!!this._isValidTile(gn)){var Wt=this._tiles[this._tileCoordsToKey(gn)];Wt?Wt.current=!0:$.push(gn)}}if($.sort(function(Tn,Eo){return Tn.distanceTo(k)-Eo.distanceTo(k)}),$.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var nr=document.createDocumentFragment();for(Ae=0;Ae<$.length;Ae++)this._addTile($[Ae],nr);this._level.el.appendChild(nr)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var d=this._globalTileRange;if(!c.wrapLng&&(a.x<d.min.x||a.x>d.max.x)||!c.wrapLat&&(a.y<d.min.y||a.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(a);return X(this.options.bounds).overlaps(p)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,d=this.getTileSize(),p=a.scaleBy(d),w=p.add(d),k=c.unproject(p,a.z),$=c.unproject(w,a.z);return[k,$]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),d=new fe(c[0],c[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),d=new F(+c[0],+c[1]);return d.z=+c[2],d},_removeTile:function(a){var c=this._tiles[a];c&&(qe(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){ye(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=x,a.onmousemove=x,ve.ielt9&&this.options.opacity<1&&Nn(a,this.options.opacity)},_addTile:function(a,c){var d=this._getTilePos(a),p=this._tileCoordsToKey(a),w=this.createTile(this._wrapCoords(a),l(this._tileReady,this,a));this._initTile(w),this.createTile.length<2&&B(l(this._tileReady,this,a,null,w)),gt(w,d),this._tiles[p]={el:w,coords:a,current:!0},c.appendChild(w),this.fire("tileloadstart",{tile:w,coords:a})},_tileReady:function(a,c,d){c&&this.fire("tileerror",{error:c,tile:d,coords:a});var p=this._tileCoordsToKey(a);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(Nn(d.el,0),H(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),c||(ye(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ve.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new F(this._wrapX?g(a.x,this._wrapX):a.x,this._wrapY?g(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new G(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function k2(a){return new ec(a)}var To=ec.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=S(this,c),c.detectRetina&&ve.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var d=document.createElement("img");return Se(d,"load",l(this._tileOnLoad,this,c,d)),Se(d,"error",l(this._tileOnError,this,c,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(a),d},getTileUrl:function(a){var c={r:ve.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=d),c["-y"]=d}return T(this._url,i(c,this.options))},_tileOnLoad:function(a,c){ve.ielt9?setTimeout(l(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,d){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),a(d,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(a=c-a),a+p},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=x,c.onerror=x,!c.complete)){c.src=D;var d=this._tiles[a].coords;qe(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:d})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",D),ec.prototype._removeTile.call(this,a)},_tileReady:function(a,c,d){if(!(!this._map||d&&d.getAttribute("src")===D))return ec.prototype._tileReady.call(this,a,c,d)}});function t0(a,c){return new To(a,c)}var n0=To.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var d=i({},this.defaultWmsParams);for(var p in c)p in this.options||(d[p]=c[p]);c=S(this,c);var w=c.detectRetina&&ve.retina?2:1,k=this.getTileSize();d.width=k.x*w,d.height=k.y*w,this.wmsParams=d},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,To.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),d=this._crs,p=J(d.project(c[0]),d.project(c[1])),w=p.min,k=p.max,$=(this._wmsVersion>=1.3&&this._crs===_o?[w.y,w.x,k.y,k.x]:[w.x,w.y,k.x,k.y]).join(","),Z=To.prototype.getTileUrl.call(this,a);return Z+M(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$},setParams:function(a,c){return i(this.wmsParams,a),c||this.redraw(),this}});function T2(a,c){return new n0(a,c)}To.WMS=n0,t0.wms=T2;var vs=yr.extend({options:{padding:.1},initialize:function(a){S(this,a),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var d=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,c),k=p.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(a,c));ve.any3d?ms(this._container,k,d):gt(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),d=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new G(d,d.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),r0=vs.extend({options:{tolerance:0},getEvents:function(){var a=vs.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Se(a,"mousemove",this._onMouseMove,this),Se(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,qe(this._container),Xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vs.prototype._update.call(this);var a=this._bounds,c=this._container,d=a.getSize(),p=ve.retina?2:1;gt(c,a.min),c.width=p*d.x,c.height=p*d.y,c.style.width=d.x+"px",c.style.height=d.y+"px",ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){vs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[m(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,d=c.next,p=c.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete a._order,delete this._layers[m(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),d=[],p,w;for(w=0;w<c.length;w++){if(p=Number(c[w]),isNaN(p))return;d.push(p)}a.options._dashArray=d}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var d=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)a=p.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var d,p,w,k,$=a._parts,Z=$.length,Q=this._ctx;if(Z){for(Q.beginPath(),d=0;d<Z;d++){for(p=0,w=$[d].length;p<w;p++)k=$[d][p],Q[p?"lineTo":"moveTo"](k.x,k.y);c&&Q.closePath()}this._fillStroke(Q,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,d=this._ctx,p=Math.max(Math.round(a._radius),1),w=(Math.max(Math.round(a._radiusY),1)||p)/p;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(c.x,c.y/w,p,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,a)}},_fillStroke:function(a,c){var d=c.options;d.fill&&(a.globalAlpha=d.fillOpacity,a.fillStyle=d.fillColor||d.color,a.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=d.opacity,a.lineWidth=d.weight,a.strokeStyle=d.color,a.lineCap=d.lineCap,a.lineJoin=d.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(rt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(c)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(a),p&&(ye(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,d){this._map._fireDOMEvent(c,d||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var d=c.next,p=c.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var d=c.next,p=c.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function s0(a){return ve.canvas?new r0(a):null}var tc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),E2={_initContainer:function(){this._container=We("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vs.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=tc("shape");ye(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=tc("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;qe(c),a.removeInteractiveTarget(c),delete this._layers[m(a)]},_updateStyle:function(a){var c=a._stroke,d=a._fill,p=a.options,w=a._container;w.stroked=!!p.stroke,w.filled=!!p.fill,p.stroke?(c||(c=a._stroke=tc("stroke")),w.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=I(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(w.removeChild(c),a._stroke=null),p.fill?(d||(d=a._fill=tc("fill")),w.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(w.removeChild(d),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),d=Math.round(a._radius),p=Math.round(a._radiusY||d);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){Yn(a._container)},_bringToBack:function(a){Jn(a._container)}},fd=ve.vml?tc:at,nc=vs.extend({_initContainer:function(){this._container=fd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qe(this._container),Xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vs.prototype._update.call(this);var a=this._bounds,c=a.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,d.setAttribute("width",c.x),d.setAttribute("height",c.y)),gt(d,a.min),d.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=fd("path");a.options.className&&ye(c,a.options.className),a.options.interactive&&ye(c,"leaflet-interactive"),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){qe(a._path),a.removeInteractiveTarget(a._path),delete this._layers[m(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,d=a.options;c&&(d.stroke?(c.setAttribute("stroke",d.color),c.setAttribute("stroke-opacity",d.opacity),c.setAttribute("stroke-width",d.weight),c.setAttribute("stroke-linecap",d.lineCap),c.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?c.setAttribute("stroke-dasharray",d.dashArray):c.removeAttribute("stroke-dasharray"),d.dashOffset?c.setAttribute("stroke-dashoffset",d.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),d.fill?(c.setAttribute("fill",d.fillColor||d.color),c.setAttribute("fill-opacity",d.fillOpacity),c.setAttribute("fill-rule",d.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,bn(a._parts,c))},_updateCircle:function(a){var c=a._point,d=Math.max(Math.round(a._radius),1),p=Math.max(Math.round(a._radiusY),1)||d,w="a"+d+","+p+" 0 1,0 ",k=a._empty()?"M0 0":"M"+(c.x-d)+","+c.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(a,k)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){Yn(a._path)},_bringToBack:function(a){Jn(a._path)}});ve.vml&&nc.include(E2);function i0(a){return ve.svg||ve.vml?new nc(a):null}Ie.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&s0(a)||i0(a)}});var a0=No.extend({initialize:function(a,c){No.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=X(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function S2(a,c){return new a0(a,c)}nc.create=fd,nc.pointsToPath=bn,ws.geometryToLayer=od,ws.coordsToLatLng=pf,ws.coordsToLatLngs=ld,ws.latLngToCoords=gf,ws.latLngsToCoords=cd,ws.getFeature=ko,ws.asFeature=ud,Ie.mergeOptions({boxZoom:!0});var o0=Vn.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),fr(),uo(),this._startPoint=this._map.mouseEventToContainerPoint(a),Se(document,{contextmenu:Ir,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=We("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new G(this._point,this._startPoint),d=c.getSize();gt(this._box,c.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(qe(this._box),rt(this._container,"leaflet-crosshair")),On(),ho(),Xe(document,{contextmenu:Ir,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var c=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",o0),Ie.mergeOptions({doubleClickZoom:!0});var l0=Vn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,d=c.getZoom(),p=c.options.zoomDelta,w=a.originalEvent.shiftKey?d-p:d+p;c.options.doubleClickZoom==="center"?c.setZoom(w):c.setZoomAround(a.containerPoint,w)}});Ie.addInitHook("addHandler","doubleClickZoom",l0),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var c0=Vn.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new pr(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rt(this._map._container,"leaflet-grab"),rt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=X(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,w=(p-c+d)%a+c-d,k=(p+c+d)%a-c-d,$=Math.abs(w+d)<Math.abs(k+d)?w:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$},_onDragEnd:function(a){var c=this._map,d=c.options,p=!d.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),p)c.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,$=d.easeLinearity,Z=w.multiplyBy($/k),Q=Z.distanceTo([0,0]),ie=Math.min(d.inertiaMaxSpeed,Q),pe=Z.multiplyBy(ie/Q),ke=ie/(d.inertiaDeceleration*$),Ae=pe.multiplyBy(-ke/2).round();!Ae.x&&!Ae.y?c.fire("moveend"):(Ae=c._limitOffset(Ae,c.options.maxBounds),B(function(){c.panBy(Ae,{duration:ke,easeLinearity:$,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",c0),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var u0=Vn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Se(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,d=a.scrollTop||c.scrollTop,p=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},d=this.keyCodes,p,w;for(p=0,w=d.left.length;p<w;p++)c[d.left[p]]=[-1*a,0];for(p=0,w=d.right.length;p<w;p++)c[d.right[p]]=[a,0];for(p=0,w=d.down.length;p<w;p++)c[d.down[p]]=[0,a];for(p=0,w=d.up.length;p<w;p++)c[d.up[p]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},d=this.keyCodes,p,w;for(p=0,w=d.zoomIn.length;p<w;p++)c[d.zoomIn[p]]=a;for(p=0,w=d.zoomOut.length;p<w;p++)c[d.zoomOut[p]]=-a},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,d=this._map,p;if(c in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[c],a.shiftKey&&(p=z(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(z(p),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(w)}else d.panBy(p)}else if(c in this._zoomKeys)d.setZoom(d.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Ir(a)}}});Ie.addInitHook("addHandler","keyboard",u0),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var d0=Vn.extend({addHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=$l(a),d=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),p),Ir(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),d=this._map.options.zoomSnap||0;a._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,k=d?Math.ceil(w/d)*d:w,$=a._limitZoom(c+(this._delta>0?k:-k))-c;this._delta=0,this._startTime=null,$&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+$):a.setZoomAround(this._lastMousePos,c+$))}});Ie.addInitHook("addHandler","scrollWheelZoom",d0);var P2=600;Ie.mergeOptions({tapHold:ve.touchNative&&ve.safari&&ve.mobile,tapTolerance:15});var h0=Vn.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new F(c.clientX,c.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Se(document,"touchend",Pt),Se(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),P2),Se(document,"touchend touchcancel contextmenu",this._cancel,this),Se(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Xe(document,"touchend",Pt),Xe(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new F(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var d=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});d._simulated=!0,c.target.dispatchEvent(d)}});Ie.addInitHook("addHandler","tapHold",h0),Ie.mergeOptions({touchZoom:ve.touch,bounceAtZoomLimits:!0});var m0=Vn.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var d=c.mouseEventToContainerPoint(a.touches[0]),p=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend touchcancel",this._onTouchEnd,this),Pt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,d=c.mouseEventToContainerPoint(a.touches[0]),p=c.mouseEventToContainerPoint(a.touches[1]),w=d.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(w,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&w<1||this._zoom>c.getMaxZoom()&&w>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var k=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(w===1&&k.x===0&&k.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var $=l(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B($,this,!0),Pt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",m0),Ie.BoxZoom=o0,Ie.DoubleClickZoom=l0,Ie.Drag=c0,Ie.Keyboard=u0,Ie.ScrollWheelZoom=d0,Ie.TapHold=h0,Ie.TouchZoom=m0,n.Bounds=G,n.Browser=ve,n.CRS=Be,n.Canvas=r0,n.Circle=ff,n.CircleMarker=ad,n.Class=me,n.Control=kn,n.DivIcon=e0,n.DivOverlay=Mr,n.DomEvent=ya,n.DomUtil=mf,n.Draggable=pr,n.Evented=ne,n.FeatureGroup=ys,n.GeoJSON=ws,n.GridLayer=ec,n.Handler=Vn,n.Icon=jo,n.ImageOverlay=dd,n.LatLng=se,n.LatLngBounds=fe,n.Layer=yr,n.LayerGroup=bo,n.LineUtil=er,n.Map=Ie,n.Marker=id,n.Mixin=rd,n.Path=ri,n.Point=F,n.PolyUtil=wo,n.Polygon=No,n.Polyline=xs,n.Popup=hd,n.PosAnimation=ql,n.Projection=Dr,n.Rectangle=a0,n.Renderer=vs,n.SVG=nc,n.SVGOverlay=Xx,n.TileLayer=To,n.Tooltip=md,n.Transformation=ee,n.Util=A,n.VideoOverlay=Jx,n.bind=l,n.bounds=J,n.canvas=s0,n.circle=p2,n.circleMarker=f2,n.control=Rr,n.divIcon=N2,n.extend=i,n.featureGroup=d2,n.geoJSON=Yx,n.geoJson=x2,n.gridLayer=k2,n.icon=h2,n.imageOverlay=w2,n.latLng=he,n.latLngBounds=X,n.layerGroup=u2,n.map=po,n.marker=m2,n.point=z,n.polygon=y2,n.polyline=g2,n.popup=b2,n.rectangle=S2,n.setOptions=S,n.stamp=m,n.svg=i0,n.svgOverlay=_2,n.tileLayer=t0,n.tooltip=j2,n.transformation=_e,n.version=r,n.videoOverlay=v2;var C2=window.L;n.noConflict=function(){return window.L=C2,this},window.L=n})})(Ug,Ug.exports);var rf=Ug.exports;const e2=N_(rf);function t2(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function n2(t,e){return e==null?function(r,i){const o=C.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=C.useRef();o.current||(o.current=t(r,i));const l=C.useRef(r),{instance:h}=o.current;return C.useEffect(function(){l.current!==r&&(e(h,r,l.current),l.current=r)},[h,r,i]),o}}function hD(t,e){C.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function r2(t){return function(n){const r=Jk(),i=t(Xk(n,r),r);return iD(r.map,n.attribution),dD(i.current,n.eventHandlers),hD(i.current,r),i}}function mD(t,e){const n=n2(t,e),r=r2(n);return cD(r)}function fD(t,e){const n=n2(t,e),r=r2(n);return uD(r)}function pD(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function s2(){return Jk().map}function gD(t){const e=s2();return C.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Bg(){return Bg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bg.apply(this,arguments)}function yD({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:l,style:h,whenReady:m,zoom:f,...g},x){const[v]=C.useState({className:i,id:o,style:h}),[P,E]=C.useState(null);C.useImperativeHandle(x,()=>(P==null?void 0:P.map)??null,[P]);const S=C.useCallback(j=>{if(j!==null&&P===null){const T=new rf.Map(j,g);n!=null&&f!=null?T.setView(n,f):t!=null&&T.fitBounds(t,e),m!=null&&T.whenReady(m),E(oD(T))}},[]);C.useEffect(()=>()=>{P==null||P.map.remove()},[P]);const M=P?Oc.createElement(Yk,{value:P},r):l??null;return Oc.createElement("div",Bg({},v,{ref:S}),M)}const xD=C.forwardRef(yD),wD=mD(function({position:e,...n},r){const i=new rf.Marker(e,n);return t2(i,lD(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),vD=fD(function({url:e,...n},r){const i=new rf.TileLayer(e,Xk(n,r));return t2(i,r)},function(e,n,r){pD(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});delete e2.Icon.Default.prototype._getIconUrl;e2.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const _D=({onLocationSelect:t})=>(gD({click:e=>{t(e.latlng.lat,e.latlng.lng)}}),null),bD=({lat:t,lng:e})=>{const n=s2();return C.useEffect(()=>{n.setView([t,e],16)},[t,e,n]),null},jD=()=>{var St;const t=Pr(),{isAuthenticated:e,user:n,userData:r}=_t(),{showToast:i}=mn(),[o,l]=C.useState(1),[h,m]=C.useState(!1),[f,g]=C.useState(null),[x,v]=C.useState(null),[P,E]=C.useState(""),[S,M]=C.useState(!1),[j,T]=C.useState([]),[I,W]=C.useState(!1),D=C.useRef(null),[O,N]=C.useState({businessName:"",profession:"",description:"",experience:"",location:{city:"",district:"",address:"",postalCode:"",lat:52.2297,lng:21.0122},services:[],features:[],workingHours:{monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"10:00",to:"14:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!1}},image:"",category:"",travelRadius:10}),[b,R]=C.useState({name:"",price:0,duration:"30 min",description:""}),[U,B]=C.useState(""),[H,A]=C.useState([52.2297,21.0122]),me=async ee=>{if(!ee||ee.length<3){T([]),W(!1);return}M(!0);try{const Fe=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(ee)}&countrycodes=pl&addressdetails=1&limit=5`,{headers:{"Accept-Language":"pl"}})).json();T(Fe),W(!0)}catch(_e){console.error("Bd wyszukiwania:",_e)}finally{M(!1)}},ue=ee=>{E(ee),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{me(ee)},500)},ce=ee=>{const _e=parseFloat(ee.lat),Fe=parseFloat(ee.lon),Re=ee.address;A([_e,Fe]),N(at=>({...at,location:{city:Re.city||Re.town||Re.village||"",district:Re.suburb||Re.neighbourhood||"",address:`${Re.road||""}${Re.house_number?" "+Re.house_number:""}`.trim(),postalCode:Re.postcode||"",lat:_e,lng:Fe}})),W(!1),E(ee.display_name.split(",")[0])},ne=async(ee,_e)=>{try{const at=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${ee}&lon=${_e}&addressdetails=1`,{headers:{"Accept-Language":"pl"}})).json()).address;N(bn=>({...bn,location:{city:at.city||at.town||at.village||"",district:at.suburb||at.neighbourhood||"",address:`${at.road||""}${at.house_number?" "+at.house_number:""}`.trim(),postalCode:at.postcode||"",lat:ee,lng:_e}}))}catch(Fe){console.error("Bd reverse geocoding:",Fe)}},F=(ee,_e)=>{A([ee,_e]),ne(ee,_e)},Y=ee=>{var Fe;const _e=(Fe=ee.target.files)==null?void 0:Fe[0];if(_e){if(!_e.type.startsWith("image/")){i("Wybierz plik graficzny","error");return}if(_e.size>5*1024*1024){i("Plik za duy (max 5MB)","error");return}v(_e);const Re=new FileReader;Re.onloadend=()=>g(Re.result),Re.readAsDataURL(_e)}},z=()=>{v(null),g(null)},G=()=>{if(!b.name||b.price<=0){i("Podaj nazw i cen usugi","error");return}const ee={id:Date.now().toString(),...b};N(_e=>({..._e,services:[..._e.services,ee]})),R({name:"",price:0,duration:"30 min",description:""}),i("Usuga dodana!","success")},J=ee=>{N(_e=>({..._e,services:_e.services.filter(Fe=>Fe.id!==ee)}))},fe=ee=>{ee.trim()&&(O.features.includes(ee)||(N(_e=>({..._e,features:[..._e.features,ee]})),B("")))},X=ee=>{N(_e=>({..._e,features:_e.features.filter(Fe=>Fe!==ee)}))},se=async()=>{var ee;if(!e){i("Musisz by zalogowany","error"),t("/auth?redirect=/biznes/dodaj-usluge");return}if(!O.businessName){i("Podaj nazw firmy","error"),l(1);return}if(!O.category){i("Wybierz kategori","error"),l(1);return}if(!O.location.city){i("Podaj lokalizacj","error"),l(2);return}if(O.services.length===0){i("Dodaj przynajmniej jedn usug","error"),l(3);return}m(!0);try{const _e=((ee=n==null?void 0:n.id)==null?void 0:ee.toString())||"";if(console.log("=== DEBUG SAVE ==="),console.log("user:",n),console.log("ownerId:",_e),console.log("formData:",O),!_e){i("Bd: brak ID uytkownika","error"),m(!1);return}const Fe=await Xt.getByOwner(_e);console.log("existingProviders:",Fe);const Re=Fe[0],at={name:O.businessName,profession:O.profession,category:O.category,description:O.description,experience:O.experience||"",location:O.location,services:O.services.map(bn=>({...bn,id:bn.id||`service_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,category:"Usugi"})),features:O.features,image:f||(Re==null?void 0:Re.image)||"https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop",workingHours:O.workingHours,travelRadius:O.travelRadius,hasTravel:O.features.includes("Dojazd do klienta"),acceptsCard:O.features.includes("Patno kart"),ownerEmail:(r==null?void 0:r.email)||(n==null?void 0:n.email)||"",ownerUsername:(r==null?void 0:r.username)||(n==null?void 0:n.username)||"",ownerPhone:(r==null?void 0:r.phone)||(n==null?void 0:n.phone)||"",ownerAvatar:(r==null?void 0:r.avatar)||(n==null?void 0:n.avatar)||"",isVerified:(r==null?void 0:r.isVerified)||!1};if(Re)console.log("Aktualizuj istniejcy profil:",Re.id),await Xt.update(Re.id,at),i(" Profil zaktualizowany!","success");else{console.log("Tworz nowy profil z ownerId:",_e),console.log("providerData:",at);const bn=await Xt.create(at,_e);console.log("Utworzony provider:",bn),i(" Profil utworzony pomylnie!","success")}t("/biznes/uslugi")}catch(_e){console.error("Bd zapisywania:",_e),i("Bd podczas zapisywania","error")}finally{m(!1)}},he=[{id:"fryzjer",name:"Fryzjer / Barber",icon:""},{id:"paznokcie",name:"Paznokcie / Manicure",icon:""},{id:"masaz",name:"Masa",icon:""},{id:"makijaz",name:"Makija",icon:""},{id:"tatuaze",name:"Tatuae",icon:""},{id:"kosmetyka",name:"Kosmetyka / Twarz",icon:""},{id:"inne",name:"Inne usugi",icon:""}],Be=["15 min","30 min","45 min","1h","1h 30min","2h","2h 30min","3h"],Ne=["Dojazd do klienta","Produkty premium","Konsultacja gratis","Parking","WiFi","Klimatyzacja","Patno kart","Rezerwacja online"],Je=[{number:1,title:"Podstawowe info",icon:w_},{number:2,title:"Lokalizacja",icon:ns},{number:3,title:"Usugi i ceny",icon:qi},{number:4,title:"Szczegy",icon:gu}];return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-gray-600 hover:text-emerald-600 mb-4 transition-colors",children:[s.jsx(fu,{className:"w-5 h-5"}),"Wr"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dodaj now usug"}),s.jsx("p",{className:"text-gray-600",children:"Stwrz profil swojej usugi i zacznij przyjmowa klientw"})]}),s.jsx("div",{className:"flex items-center justify-between mb-8 bg-white rounded-2xl p-4 shadow-sm",children:Je.map((ee,_e)=>s.jsxs("div",{className:"flex items-center",children:[s.jsxs("button",{onClick:()=>l(ee.number),className:`flex items-center gap-3 px-4 py-2 rounded-xl transition-all ${o===ee.number?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":o>ee.number?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:[s.jsx(ee.icon,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline font-medium",children:ee.title})]}),_e<Je.length-1&&s.jsx("div",{className:`w-8 lg:w-16 h-1 mx-2 rounded ${o>ee.number?"bg-green-400":"bg-gray-200"}`})]},ee.number))}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[o===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[s.jsx(w_,{className:"w-6 h-6 text-emerald-500"}),"Podstawowe informacje"]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nazwa firmy / salonu ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:O.businessName,onChange:ee=>N({...O,businessName:ee.target.value}),placeholder:"np. Beauty Studio Anna",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kategoria ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:he.map(ee=>s.jsxs("button",{type:"button",onClick:()=>N({...O,category:ee.id}),className:`p-4 rounded-xl border-2 text-center transition-all ${O.category===ee.id?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("span",{className:"text-2xl mb-2 block",children:ee.icon}),s.jsx("span",{className:"text-sm font-medium",children:ee.name})]},ee.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tytu zawodowy"}),s.jsx("input",{type:"text",value:O.profession,onChange:ee=>N({...O,profession:ee.target.value}),placeholder:"np. Mistrz Fryzjerstwa",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zdjcie profilowe"}),f?s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:f,alt:"Podgld",className:"w-48 h-48 object-cover rounded-xl shadow-md"}),s.jsx("button",{type:"button",onClick:z,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:s.jsx(Fs,{className:"w-4 h-4"})})]}):s.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-emerald-500 hover:bg-emerald-50 transition-all",children:[s.jsx(_6,{className:"w-10 h-10 mb-3 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-500",children:s.jsx("span",{className:"font-semibold text-emerald-600",children:"Kliknij aby wybra"})}),s.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG (max. 5MB)"}),s.jsx("input",{type:"file",accept:"image/*",onChange:Y,className:"hidden"})]})]})]}),o===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[s.jsx(ns,{className:"w-6 h-6 text-emerald-500"}),"Lokalizacja"]}),s.jsxs("div",{className:"relative z-20",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wyszukaj adres"}),s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:P,onChange:ee=>ue(ee.target.value),placeholder:"Wpisz adres, np. Marszakowska 10, Warszawa",className:"w-full pl-10 pr-10 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"}),S&&s.jsx(tt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-500 animate-spin"})]}),I&&j.length>0&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-emerald-300 rounded-xl shadow-2xl max-h-72 overflow-y-auto",children:[s.jsx("div",{className:"p-2 bg-emerald-50 border-b border-emerald-200 text-sm text-emerald-700 font-medium",children:" Wybierz adres z listy:"}),j.map(ee=>s.jsxs("button",{onClick:()=>ce(ee),className:"w-full px-4 py-3 text-left hover:bg-emerald-50 border-b border-gray-100 last:border-0 transition-colors",children:[s.jsx("div",{className:"font-medium text-gray-900",children:ee.display_name.split(",")[0]}),s.jsx("div",{className:"text-sm text-gray-500 truncate",children:ee.display_name})]},ee.place_id))]})]}),s.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gray-200 relative z-10",style:{height:"300px"},children:s.jsxs(xD,{center:H,zoom:13,style:{height:"100%",width:"100%"},children:[s.jsx(vD,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(wD,{position:H}),s.jsx(_D,{onLocationSelect:F}),s.jsx(bD,{lat:H[0],lng:H[1]})]})}),s.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-2",children:[s.jsx(ns,{className:"w-4 h-4"}),"Kliknij na map aby wybra dokadn lokalizacj"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Miasto ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:O.location.city,onChange:ee=>N({...O,location:{...O.location,city:ee.target.value}}),placeholder:"np. Warszawa",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dzielnica"}),s.jsx("input",{type:"text",value:O.location.district,onChange:ee=>N({...O,location:{...O.location,district:ee.target.value}}),placeholder:"np. Mokotw",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ulica i numer"}),s.jsx("input",{type:"text",value:O.location.address,onChange:ee=>N({...O,location:{...O.location,address:ee.target.value}}),placeholder:"np. ul. Marszakowska 1",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kod pocztowy"}),s.jsx("input",{type:"text",value:O.location.postalCode,onChange:ee=>N({...O,location:{...O.location,postalCode:ee.target.value}}),placeholder:"np. 00-001",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Maksymalny zasig dojazdu: ",s.jsxs("span",{className:"font-bold text-emerald-600",children:[O.travelRadius," km"]})]}),s.jsx("input",{type:"range",min:"1",max:"50",value:O.travelRadius,onChange:ee=>N({...O,travelRadius:parseInt(ee.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-emerald-500"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"1 km"}),s.jsx("span",{children:"25 km"}),s.jsx("span",{children:"50 km"})]})]})]}),o===3&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[s.jsx(qi,{className:"w-6 h-6 text-emerald-500"}),"Usugi i ceny"]}),O.services.length>0&&s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("h3",{className:"font-medium text-gray-700",children:["Dodane usugi (",O.services.length,")"]}),O.services.map(ee=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:ee.name}),s.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Dt,{className:"w-3 h-3"})," ",ee.duration]}),s.jsxs("span",{className:"font-semibold text-emerald-600",children:[ee.price," z"]})]})]}),s.jsx("button",{onClick:()=>J(ee.id),className:"p-2 text-red-500 hover:bg-red-100 rounded-lg",children:s.jsx(Ki,{className:"w-5 h-5"})})]},ee.id))]}),s.jsxs("div",{className:"p-6 bg-emerald-50 rounded-xl",children:[s.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Dodaj now usug"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nazwa usugi *"}),s.jsx("input",{type:"text",value:b.name,onChange:ee=>R({...b,name:ee.target.value}),placeholder:"np. Strzyenie damskie",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Cena (z) *"}),s.jsx("input",{type:"number",value:b.price||"",onChange:ee=>R({...b,price:Number(ee.target.value)}),placeholder:"np. 80",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Czas trwania"}),s.jsx("select",{value:b.duration,onChange:ee=>R({...b,duration:ee.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none",children:Be.map(ee=>s.jsx("option",{value:ee,children:ee},ee))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Opis (opcjonalnie)"}),s.jsx("input",{type:"text",value:b.description,onChange:ee=>R({...b,description:ee.target.value}),placeholder:"Krtki opis",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none"})]})]}),s.jsxs("button",{type:"button",onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Dodaj usug"]})]})]}),o===4&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[s.jsx(gu,{className:"w-6 h-6 text-emerald-500"}),"Dodatkowe informacje"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis dziaalnoci"}),s.jsx("textarea",{value:O.description,onChange:ee=>N({...O,description:ee.target.value}),placeholder:"Opisz swoj dziaalno...",rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none resize-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[s.jsx(sm,{className:"w-5 h-5"}),"Dowiadczenie i kwalifikacje"]}),s.jsx("textarea",{value:O.experience,onChange:ee=>N({...O,experience:ee.target.value}),placeholder:"np. 10 lat dowiadczenia, certyfikaty...",rows:3,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 focus:outline-none resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Udogodnienia"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:O.features.map(ee=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm",children:[ee,s.jsx("button",{onClick:()=>X(ee),className:"hover:text-red-500",children:""})]},ee))}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Ne.filter(ee=>!O.features.includes(ee)).map(ee=>s.jsxs("button",{type:"button",onClick:()=>fe(ee),className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm hover:bg-gray-200",children:["+ ",ee]},ee))})]}),s.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:" Podsumowanie"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Nazwa:"})," ",s.jsx("strong",{children:O.businessName||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Kategoria:"})," ",s.jsx("strong",{children:((St=he.find(ee=>ee.id===O.category))==null?void 0:St.name)||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Lokalizacja:"})," ",s.jsxs("strong",{children:[O.location.city,O.location.district&&`, ${O.location.district}`]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Liczba usug:"})," ",s.jsx("strong",{children:O.services.length})]})]})]})]}),s.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-100",children:[s.jsx("button",{type:"button",onClick:()=>l(ee=>Math.max(1,ee-1)),disabled:o===1,className:"px-6 py-2 border border-gray-300 rounded-xl font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:" Wstecz"}),o<4?s.jsx("button",{type:"button",onClick:()=>l(ee=>Math.min(4,ee+1)),className:"px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg",children:"Dalej "}):s.jsx("button",{type:"button",onClick:se,disabled:h,className:"px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg disabled:opacity-50 flex items-center gap-2",children:h?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_i,{className:"w-5 h-5"}),"Zapisz usug"]})})]})]})]})},ND=()=>{const{user:t}=_t(),{showToast:e}=mn(),[n,r]=C.useState(new Date),[i,o]=C.useState(new Date().toISOString().split("T")[0]),[l,h]=C.useState("week"),[m,f]=C.useState([]),[g,x]=C.useState(null),[v,P]=C.useState(!1),[E,S]=C.useState(!0);C.useEffect(()=>{(async()=>{if(!t||!t.id){console.log("BusinessCalendar: No user or user.id"),S(!1);return}console.log("BusinessCalendar: Loading for user",t.id);try{const F=await Xt.getByOwner(t.id);if(console.log("BusinessCalendar: Found providers",F.length),F.length>0){const Y=F[0],z=or.subscribeToProviderBookings(Y.id,G=>{console.log("BusinessCalendar: Got bookings",G.length),f(G),S(!1)});return()=>z()}else S(!1)}catch(F){console.error("BusinessCalendar: Error loading bookings:",F),S(!1)}})()},[t]);const M=async ne=>{try{await or.confirm(ne),e("Rezerwacja potwierdzona! ","success")}catch{e("Bd potwierdzania rezerwacji","error")}},j=async ne=>{try{await or.cancel(ne,"provider"),e("Rezerwacja anulowana","info"),P(!1),x(null)}catch{e("Bd anulowania rezerwacji","error")}},T=async ne=>{try{await or.complete(ne),e("Usuga oznaczona jako zakoczona! ","success"),P(!1),x(null)}catch{e("Bd oznaczania usugi","error")}},I=()=>{const ne=new Date(n);l==="month"?ne.setMonth(ne.getMonth()-1):l==="week"?ne.setDate(ne.getDate()-7):ne.setDate(ne.getDate()-1),r(ne)},W=()=>{const ne=new Date(n);l==="month"?ne.setMonth(ne.getMonth()+1):l==="week"?ne.setDate(ne.getDate()+7):ne.setDate(ne.getDate()+1),r(ne)},D=()=>{r(new Date),o(new Date().toISOString().split("T")[0])},O=ne=>{const F=ne.getFullYear(),Y=ne.getMonth(),z=new Date(F,Y,1),G=new Date(F,Y+1,0),J=[],fe=z.getDay()||7;for(let se=fe-1;se>0;se--)J.push(new Date(F,Y,1-se));for(let se=1;se<=G.getDate();se++)J.push(new Date(F,Y,se));const X=42-J.length;for(let se=1;se<=X;se++)J.push(new Date(F,Y+1,se));return J},N=ne=>{const F=[],Y=new Date(ne),z=Y.getDay()||7;Y.setDate(Y.getDate()-z+1);for(let G=0;G<7;G++)F.push(new Date(Y.getTime()+G*864e5));return F},b=ne=>ne.toISOString().split("T")[0],R=ne=>m.filter(F=>F.date===ne).sort((F,Y)=>F.time.localeCompare(Y.time)),U=ne=>{switch(ne){case"confirmed":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"completed":return"bg-gray-100 text-gray-700 border-gray-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700"}},B=ne=>{switch(ne){case"confirmed":return"Potwierdzona";case"pending":return"Oczekuje";case"completed":return"Zakoczona";case"cancelled":return"Anulowana";default:return ne}},H=async(ne,F)=>{try{F==="confirmed"?await M(ne):F==="cancelled"?await j(ne):F==="completed"&&await T(ne)}catch{e("Bd zmiany statusu","error")}};if(E)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(tt,{className:"w-12 h-12 animate-spin text-emerald-500"})});const A=Array.from({length:12},(ne,F)=>F+8),me=["Pon","Wt","r","Czw","Pt","Sob","Nd"],ue=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],ce=N(n);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kalendarz"}),s.jsx("p",{className:"text-gray-600",children:"Zarzdzaj swoimi rezerwacjami"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:D,className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-medium hover:bg-gray-50",children:"Dzisiaj"}),s.jsx("div",{className:"flex bg-white border border-gray-200 rounded-lg overflow-hidden",children:["day","week","month"].map(ne=>s.jsx("button",{onClick:()=>h(ne),className:`px-4 py-2 text-sm font-medium transition-colors ${l===ne?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:ne==="day"?"Dzie":ne==="week"?"Tydzie":"Miesic"},ne))})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Hk,{className:"w-5 h-5"})}),s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:l==="day"?new Date(i).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):l==="week"?`${ce[0].toLocaleDateString("pl-PL",{day:"numeric",month:"short"})} - ${ce[6].toLocaleDateString("pl-PL",{day:"numeric",month:"short",year:"numeric"})}`:`${ue[n.getMonth()]} ${n.getFullYear()}`}),s.jsx("button",{onClick:W,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(pu,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[l==="week"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[s.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500 border-r border-gray-200",children:"Godzina"}),ce.map((ne,F)=>{const Y=b(ne),z=Y===new Date().toISOString().split("T")[0],G=R(Y);return s.jsxs("div",{className:`p-3 text-center border-r border-gray-200 last:border-r-0 cursor-pointer hover:bg-gray-50 ${z?"bg-emerald-50":""}`,onClick:()=>o(Y),children:[s.jsx("div",{className:"text-xs text-gray-500",children:me[F]}),s.jsx("div",{className:`text-lg font-bold ${z?"text-emerald-600":"text-gray-900"}`,children:ne.getDate()}),G.length>0&&s.jsxs("div",{className:"text-xs text-emerald-600 font-medium",children:[G.length," rez."]})]},F)})]}),s.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:A.map(ne=>s.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-100",children:[s.jsxs("div",{className:"p-2 text-center text-sm text-gray-500 border-r border-gray-200 bg-gray-50",children:[ne,":00"]}),ce.map((F,Y)=>{const z=b(F),G=m.filter(J=>J.date===z&&parseInt(J.time.split(":")[0])===ne);return s.jsx("div",{className:"p-1 border-r border-gray-100 last:border-r-0 min-h-[60px] relative",children:G.map(J=>s.jsxs("button",{onClick:()=>{x(J),P(!0)},className:`w-full text-left p-2 rounded-lg text-xs mb-1 border ${U(J.status)} hover:shadow-md transition-shadow`,children:[s.jsx("div",{className:"font-bold truncate",children:J.time}),s.jsx("div",{className:"truncate",children:J.clientName}),s.jsx("div",{className:"truncate text-gray-600",children:J.serviceName})]},J.id))},Y)})]},ne))})]}),l==="day"&&s.jsxs("div",{className:"p-4",children:[s.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[s.jsx(un,{className:"w-5 h-5 text-emerald-500"}),"Rezerwacje na ",new Date(i).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long"})]}),s.jsx("div",{className:"space-y-3",children:A.map(ne=>{const F=m.filter(Y=>Y.date===i&&parseInt(Y.time.split(":")[0])===ne);return s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"w-16 text-sm text-gray-500 font-medium pt-2",children:[ne,":00"]}),s.jsx("div",{className:"flex-1 min-h-[60px] border-l-2 border-gray-200 pl-4",children:F.length===0?s.jsx("div",{className:"text-sm text-gray-400 py-2",children:""}):F.map(Y=>s.jsx("button",{onClick:()=>{x(Y),P(!0)},className:`w-full text-left p-4 rounded-xl border-2 mb-2 ${U(Y.status)} hover:shadow-lg transition-all`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-bold text-gray-900",children:[Y.time," - ",Y.clientName]}),s.jsx("div",{className:"text-sm mt-1",children:Y.serviceName}),s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[Y.serviceDuration," min  ",Y.servicePrice," z"]})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U(Y.status)}`,children:B(Y.status)})]})},Y.id))})]},ne)})})]}),l==="month"&&s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:me.map(ne=>s.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:ne},ne))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:O(n).map((ne,F)=>{const Y=b(ne),z=ne.getMonth()===n.getMonth(),G=Y===new Date().toISOString().split("T")[0],J=Y===i,fe=R(Y);return s.jsxs("button",{onClick:()=>{o(Y),h("day")},className:`p-2 min-h-[80px] rounded-lg text-left transition-all ${z?"bg-white":"bg-gray-50"} ${G?"ring-2 ring-emerald-500":""} ${J?"bg-emerald-50":""} hover:bg-gray-100`,children:[s.jsx("div",{className:`text-sm font-medium ${z?"text-gray-900":"text-gray-400"}`,children:ne.getDate()}),fe.slice(0,2).map(X=>s.jsxs("div",{className:`text-xs p-1 rounded mt-1 truncate ${U(X.status)}`,children:[X.time," ",X.clientName.split(" ")[0]]},X.id)),fe.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",fe.length-2," wicej"]})]},F)})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"Podsumowanie dnia"}),s.jsxs("div",{className:"grid sm:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R(new Date().toISOString().split("T")[0]).length}),s.jsx("div",{className:"text-sm text-blue-600",children:"Rezerwacje dzi"})]}),s.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:m.filter(ne=>ne.status==="pending").length}),s.jsx("div",{className:"text-sm text-yellow-600",children:"Oczekujce"})]}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-xl",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.filter(ne=>ne.status==="confirmed").length}),s.jsx("div",{className:"text-sm text-green-600",children:"Potwierdzone"})]}),s.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[m.filter(ne=>ne.date===new Date().toISOString().split("T")[0]).reduce((ne,F)=>ne+F.servicePrice,0)," z"]}),s.jsx("div",{className:"text-sm text-purple-600",children:"Przychd dzi"})]})]})]}),v&&g&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Szczegy rezerwacji"}),s.jsx("button",{onClick:()=>{P(!1),x(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(Fs,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${U(g.status)}`,children:B(g.status)})]}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Mn,{className:"w-5 h-5 text-gray-400"}),s.jsx("span",{className:"font-medium",children:g.clientName})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zi,{className:"w-5 h-5 text-gray-400"}),s.jsx("a",{href:`tel:${g.clientPhone}`,className:"text-emerald-600 hover:underline",children:g.clientPhone})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Bs,{className:"w-5 h-5 text-gray-400"}),s.jsx("a",{href:`mailto:${g.clientEmail}`,className:"text-emerald-600 hover:underline",children:g.clientEmail})]})]}),s.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl",children:[s.jsx("div",{className:"font-bold text-emerald-700",children:g.serviceName}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-emerald-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Dt,{className:"w-4 h-4"}),g.time]}),s.jsx("span",{children:g.serviceDuration}),s.jsxs("span",{className:"font-bold",children:[g.servicePrice," z"]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[g.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>H(g.id,"confirmed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600",children:[s.jsx(Tt,{className:"w-5 h-5"}),"Potwierd"]}),s.jsxs("button",{onClick:()=>H(g.id,"cancelled"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600",children:[s.jsx(Fs,{className:"w-5 h-5"}),"Anuluj"]})]}),g.status==="confirmed"&&s.jsxs("button",{onClick:()=>H(g.id,"completed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600",children:[s.jsx(Tt,{className:"w-5 h-5"}),"Oznacz jako zakoczone"]})]})]})]})})})]})},kD=()=>{const{user:t}=_t(),[e,n]=C.useState("month"),[r,i]=C.useState(!0),[o,l]=C.useState({revenue:{total:0,change:0,byDay:[]},bookings:{total:0,change:0,completed:0,cancelled:0,pending:0,confirmed:0},clients:{total:0,new:0,returning:0},rating:{average:0,count:0,distribution:[]},topServices:[],peakHours:[]});if(C.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){i(!1);return}try{const E=await Xt.getByOwner(t.id);if(E.length===0){i(!1);return}const S=E[0],M=await or.getByProvider(S.id),j=new Date;let T;e==="week"?T=new Date(j.getTime()-6048e5):e==="month"?T=new Date(j.getTime()-2592e6):T=new Date(j.getTime()-31536e6);const I=M.filter(J=>new Date(J.createdAt)>=T),W=I.filter(J=>J.status==="completed").length,D=I.filter(J=>J.status==="cancelled").length,O=I.filter(J=>J.status==="pending").length,N=I.filter(J=>J.status==="confirmed").length,b=I.filter(J=>J.status==="completed"||J.status==="confirmed").reduce((J,fe)=>J+(fe.servicePrice||0),0),U=["Nd","Pon","Wt","r","Czw","Pt","Sob"].map(J=>({day:J,amount:0}));I.filter(J=>J.status==="completed"||J.status==="confirmed").forEach(J=>{const fe=new Date(J.date).getDay();U[fe].amount+=J.servicePrice||0});const B=U.shift();U.push(B);const H=new Set(I.map(J=>J.clientId)),A={};I.forEach(J=>{A[J.clientId]=(A[J.clientId]||0)+1});const me=Object.values(A).filter(J=>J>1).length,ue={};I.forEach(J=>{ue[J.serviceName]||(ue[J.serviceName]={count:0,revenue:0}),ue[J.serviceName].count++,(J.status==="completed"||J.status==="confirmed")&&(ue[J.serviceName].revenue+=J.servicePrice||0)});const ce=Object.entries(ue).map(([J,fe])=>({name:J,...fe})).sort((J,fe)=>fe.revenue-J.revenue).slice(0,4),ne={};for(let J=9;J<=18;J++)ne[`${J}:00`]=0;I.forEach(J=>{var X;const fe=(X=J.time)==null?void 0:X.split(":")[0];fe&&ne[`${fe}:00`]!==void 0&&ne[`${fe}:00`]++});const F=Object.entries(ne).map(([J,fe])=>({hour:J,bookings:fe})),Y=S.rating||0,z=S.reviewsCount||0,G=[{stars:5,count:Math.round(z*.7)},{stars:4,count:Math.round(z*.2)},{stars:3,count:Math.round(z*.07)},{stars:2,count:Math.round(z*.02)},{stars:1,count:Math.round(z*.01)}];l({revenue:{total:b,change:0,byDay:U},bookings:{total:I.length,change:0,completed:W,cancelled:D,pending:O,confirmed:N},clients:{total:H.size,new:H.size-me,returning:me},rating:{average:Y,count:z,distribution:G},topServices:ce,peakHours:F})}catch(E){console.error("Error loading stats:",E)}finally{i(!1)}})()},[t,e]),r)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(tt,{className:"w-12 h-12 animate-spin text-emerald-500"})});const h=Math.max(...o.revenue.byDay.map(P=>P.amount),1),m=Math.max(...o.peakHours.map(P=>P.bookings),1),f=o.rating.distribution.reduce((P,E)=>P+E.count,0)||1,g=o.bookings.total||1,x=o.peakHours.reduce((P,E)=>E.bookings>P.bookings?E:P,{hour:"-",bookings:0}),v=[{title:"Przychd",value:`${o.revenue.total.toLocaleString()} z`,change:o.revenue.change,icon:qi,bgColor:"bg-emerald-100",textColor:"text-emerald-600"},{title:"Rezerwacje",value:o.bookings.total,change:o.bookings.change,icon:un,bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Klienci",value:o.clients.total,subtitle:`${o.clients.new} nowych`,icon:_l,bgColor:"bg-purple-100",textColor:"text-purple-600"},{title:"Ocena",value:o.rating.average.toFixed(1),subtitle:`${o.rating.count} opinii`,icon:jr,bgColor:"bg-amber-100",textColor:"text-amber-600"},{title:"Ukoczone",value:o.bookings.completed,subtitle:"usug",icon:Dt,bgColor:"bg-pink-100",textColor:"text-pink-600"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Statystyki"}),s.jsx("p",{className:"text-gray-600",children:"Analizuj wyniki swojego biznesu"})]}),s.jsx("div",{className:"flex bg-white border border-gray-200 rounded-lg overflow-hidden",children:["week","month","year"].map(P=>s.jsx("button",{onClick:()=>n(P),className:`px-4 py-2 text-sm font-medium transition-colors ${e===P?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:P==="week"?"Tydzie":P==="month"?"Miesic":"Rok"},P))})]}),s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-5 gap-4",children:v.map((P,E)=>s.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${P.bgColor}`,children:s.jsx(P.icon,{className:`w-5 h-5 ${P.textColor}`})}),P.change!==void 0&&P.change!==0&&s.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${P.change>=0?"text-green-600":"text-red-600"}`,children:[P.change>=0?s.jsx(Wk,{className:"w-4 h-4"}):s.jsx(Fk,{className:"w-4 h-4"}),Math.abs(P.change),"%"]})]}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:P.value}),s.jsx("div",{className:"text-sm text-gray-500",children:P.subtitle||P.title})]},E))}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[s.jsx($k,{className:"w-5 h-5 text-emerald-500"}),"Przychody wedug dni"]}),s.jsxs("span",{className:"text-2xl font-bold text-emerald-600",children:[o.revenue.total.toLocaleString()," z"]})]}),s.jsx("div",{className:"flex items-end justify-between gap-2 h-48",children:o.revenue.byDay.map((P,E)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[s.jsx("div",{className:"w-full relative flex flex-col justify-end h-40",children:s.jsx("div",{className:"w-full bg-gradient-to-t from-emerald-500 to-emerald-400 rounded-t-lg transition-all hover:from-emerald-600 hover:to-emerald-500",style:{height:`${P.amount/h*100}%`,minHeight:P.amount>0?"8px":"0"}})}),s.jsx("div",{className:"mt-2 text-xs text-gray-500 font-medium",children:P.day}),s.jsx("div",{className:"text-xs text-gray-400",children:P.amount>0?`${P.amount}`:"-"})]},E))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[s.jsx(Dt,{className:"w-5 h-5 text-blue-500"}),"Godziny rezerwacji"]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.peakHours.map((P,E)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 text-sm text-gray-600 font-medium",children:P.hour}),s.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full",style:{width:`${P.bookings/m*100}%`}})}),s.jsx("div",{className:"w-8 text-sm text-gray-600 font-medium text-right",children:P.bookings})]},E))}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:s.jsxs("p",{className:"text-sm text-gray-500",children:[" Popularna godzina: ",s.jsx("strong",{children:x.hour})," (",x.bookings," rez.)"]})})]})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[s.jsx(d6,{className:"w-5 h-5 text-purple-500"}),"Status rezerwacji"]}),s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsxs("div",{className:"relative w-40 h-40",children:[o.bookings.total>0?s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90",children:[s.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10b981",strokeWidth:"20",strokeDasharray:`${o.bookings.completed/g*251.2} 251.2`}),s.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3b82f6",strokeWidth:"20",strokeDasharray:`${o.bookings.confirmed/g*251.2} 251.2`,strokeDashoffset:`-${o.bookings.completed/g*251.2}`}),s.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#f59e0b",strokeWidth:"20",strokeDasharray:`${o.bookings.pending/g*251.2} 251.2`,strokeDashoffset:`-${(o.bookings.completed+o.bookings.confirmed)/g*251.2}`}),s.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ef4444",strokeWidth:"20",strokeDasharray:`${o.bookings.cancelled/g*251.2} 251.2`,strokeDashoffset:`-${(o.bookings.completed+o.bookings.confirmed+o.bookings.pending)/g*251.2}`})]}):s.jsx("div",{className:"w-full h-full rounded-full border-8 border-gray-200"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:o.bookings.total}),s.jsx("div",{className:"text-xs text-gray-500",children:"rezerwacji"})]})})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Zakoczone"})]}),s.jsx("span",{className:"font-medium",children:o.bookings.completed})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Potwierdzone"})]}),s.jsx("span",{className:"font-medium",children:o.bookings.confirmed})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Oczekujce"})]}),s.jsx("span",{className:"font-medium",children:o.bookings.pending})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Anulowane"})]}),s.jsx("span",{className:"font-medium",children:o.bookings.cancelled})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[s.jsx(jr,{className:"w-5 h-5 text-amber-500"}),"Rozkad ocen"]}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-5xl font-bold text-gray-900",children:o.rating.average.toFixed(1)}),s.jsx("div",{className:"flex items-center justify-center gap-1 mt-2",children:[1,2,3,4,5].map(P=>s.jsx(jr,{className:`w-5 h-5 ${P<=Math.round(o.rating.average)?"text-amber-400 fill-amber-400":"text-gray-300"}`},P))}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[o.rating.count," opinii"]})]}),s.jsx("div",{className:"space-y-2",children:o.rating.distribution.map(P=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1 w-12",children:[s.jsx("span",{className:"text-sm font-medium",children:P.stars}),s.jsx(jr,{className:"w-3 h-3 text-amber-400 fill-amber-400"})]}),s.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-amber-400 rounded-full",style:{width:`${P.count/f*100}%`}})}),s.jsx("span",{className:"text-sm text-gray-600 w-8 text-right",children:P.count})]},P.stars))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[s.jsx(Hx,{className:"w-5 h-5 text-emerald-500"}),"Top usugi"]}),o.topServices.length>0?s.jsx("div",{className:"space-y-4",children:o.topServices.map((P,E)=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-white ${E===0?"bg-amber-500":E===1?"bg-gray-400":E===2?"bg-amber-700":"bg-gray-300"}`,children:E+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-gray-900 truncate",children:P.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:[P.count," rezerwacji"]})]}),s.jsxs("div",{className:"font-bold text-emerald-600",children:[P.revenue," z"]})]},E))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(un,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"Brak danych"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[s.jsx(_l,{className:"w-5 h-5 text-purple-500"}),"Klienci"]}),s.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl",children:[s.jsx("div",{className:"text-4xl font-bold text-purple-600",children:o.clients.total}),s.jsx("div",{className:"text-sm text-purple-600 mt-1",children:"Wszystkich klientw"})]}),s.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-xl",children:[s.jsx("div",{className:"text-4xl font-bold text-green-600",children:o.clients.new}),s.jsx("div",{className:"text-sm text-green-600 mt-1",children:"Nowych klientw"})]}),s.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-xl",children:[s.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[o.clients.total>0?Math.round(o.clients.returning/o.clients.total*100):0,"%"]}),s.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Powracajcych"})]})]})]})]})},TD=()=>{const{user:t}=_t(),[e,n]=C.useState([]),[r,i]=C.useState(null),[o,l]=C.useState([]),[h,m]=C.useState(""),[f,g]=C.useState(""),[x,v]=C.useState(!0),[P,E]=C.useState(!1),[,S]=C.useState(null),M=C.useRef(null);C.useEffect(()=>{if(!(t!=null&&t.id)){v(!1);return}const D=async()=>{try{const N=await Xt.getByOwner(t.id);if(N.length===0){v(!1);return}const b=N[0];return S(b.id),Wr.subscribeToProviderConversations(b.id,U=>{n(U),v(!1)})}catch(N){console.error("Error loading messages:",N),v(!1)}};let O;return D().then(N=>{O=N}),()=>{O&&O()}},[t==null?void 0:t.id]),C.useEffect(()=>{if(!r||!(t!=null&&t.id))return;Wr.markAsRead(r.id,t.id);const D=Wr.subscribeToMessages(r.id,O=>{l(O)});return()=>D()},[r,t==null?void 0:t.id]),C.useEffect(()=>{var D;(D=M.current)==null||D.scrollIntoView({behavior:"smooth"})},[o]);const j=async()=>{if(!(!h.trim()||!r||!(t!=null&&t.id))){E(!0);try{const D=r.participants.find(O=>O!==t.id)||"";await Wr.sendMessage(r.id,t.id,t.username||"Uytkownik",t.avatar||"",h.trim(),D),m("")}catch(D){console.error("Error sending message:",D)}finally{E(!1)}}},T=D=>{if(!(t!=null&&t.id))return{name:"Nieznany",avatar:""};const O=D.participants.find(N=>N!==t.id)||"";return{name:D.participantNames[O]||"Nieznany",avatar:D.participantAvatars[O]||""}},I=D=>{const O=new Date(D),b=new Date().getTime()-O.getTime(),R=Math.floor(b/6e4),U=Math.floor(b/36e5),B=Math.floor(b/864e5);return R<1?"Teraz":R<60?`${R} min`:U<24?`${U}h`:B<7?`${B}d`:O.toLocaleDateString("pl-PL")},W=e.filter(D=>T(D).name.toLowerCase().includes(f.toLowerCase()));return x?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(tt,{className:"w-12 h-12 animate-spin text-emerald-500"})}):s.jsxs("div",{className:"h-[calc(100vh-180px)] flex bg-white rounded-xl shadow-sm overflow-hidden",children:[s.jsxs("div",{className:`w-full md:w-80 lg:w-96 border-r border-gray-100 flex flex-col ${r?"hidden md:flex":""}`,children:[s.jsxs("div",{className:"p-4 border-b border-gray-100",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Wiadomoci"}),s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Szukaj...",value:f,onChange:D=>g(D.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:W.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(rs,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"Brak wiadomoci"}),s.jsx("p",{className:"text-sm mt-1",children:"Gdy klient napisze, pojawi si tutaj"})]}):W.map(D=>{const O=T(D),N=t!=null&&t.id&&D.unreadCount[t.id]||0;return s.jsx("div",{onClick:()=>i(D),className:`p-4 border-b border-gray-50 cursor-pointer transition-colors ${(r==null?void 0:r.id)===D.id?"bg-emerald-50":"hover:bg-gray-50"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[O.avatar?s.jsx("img",{src:O.avatar,alt:O.name,className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center text-white font-bold",children:O.name.charAt(0).toUpperCase()}),N>0&&s.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:N})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-900",children:O.name}),s.jsx("span",{className:"text-xs text-gray-500",children:I(D.lastMessageAt)})]}),s.jsx("p",{className:`text-sm truncate ${N>0?"font-medium text-gray-900":"text-gray-500"}`,children:D.lastMessage||"Brak wiadomoci"})]})]})},D.id)})})]}),r?s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>i(null),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg",children:""}),(()=>{const D=T(r);return s.jsxs(s.Fragment,{children:[D.avatar?s.jsx("img",{src:D.avatar,alt:D.name,className:"w-10 h-10 rounded-full object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center text-white font-bold",children:D.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:D.name}),s.jsx("div",{className:"text-xs text-gray-500",children:"Klient"})]})]})})()]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:s.jsx(Zi,{className:"w-5 h-5"})}),s.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:s.jsx(b6,{className:"w-5 h-5"})}),s.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:s.jsx(c6,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[o.length===0?s.jsx("div",{className:"text-center text-gray-500 py-8",children:s.jsx("p",{children:"Rozpocznij rozmow"})}):o.map(D=>{const O=D.senderId===(t==null?void 0:t.id);return s.jsx("div",{className:`flex ${O?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2 ${O?"bg-emerald-500 text-white":"bg-white text-gray-900 shadow-sm"}`,children:[s.jsx("p",{children:D.text}),s.jsx("div",{className:`text-xs mt-1 ${O?"text-emerald-100":"text-gray-400"}`,children:I(D.createdAt)})]})},D.id)}),s.jsx("div",{ref:M})]}),s.jsx("div",{className:"p-4 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:h,onChange:D=>m(D.target.value),onKeyPress:D=>D.key==="Enter"&&j(),placeholder:"Napisz wiadomo...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("button",{onClick:j,disabled:!h.trim()||P,className:"p-3 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed",children:P?s.jsx(tt,{className:"w-5 h-5 animate-spin"}):s.jsx(om,{className:"w-5 h-5"})})]})})]}):s.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(rs,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg",children:"Wybierz konwersacj"}),s.jsx("p",{className:"text-sm",children:"lub poczekaj na wiadomo od klienta"})]})})]})},j_=()=>{const{user:t,login:e,logout:n}=_t(),{showToast:r}=mn(),[i,o]=C.useState(null),[l,h]=C.useState(!0),f=(z=>{if(!z)return{countryCode:"+48",number:""};const G=z.match(/^(\+\d{1,3})\s?(.*)$/);return G?{countryCode:G[1],number:G[2]}:{countryCode:"+48",number:z}})(t==null?void 0:t.phone),[g,x]=C.useState({username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||"",phone:f.number,phoneCountryCode:f.countryCode,businessName:(t==null?void 0:t.businessName)||""}),[v,P]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[E,S]=C.useState({current:!1,new:!1,confirm:!1}),[M,j]=C.useState({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),[T,I]=C.useState({emailBookings:!0,emailMessages:!0,emailMarketing:!1,smsBookings:!0,smsReminders:!0,pushNotifications:!0}),[W,D]=C.useState({profileVisible:!0,showPhone:!1,showEmail:!1}),[O,N]=C.useState("profile"),[b,R]=C.useState(!1);C.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){h(!1);return}try{const G=await Xt.getByOwner(t.id);if(G.length>0){const J=G[0];o(J),j(J.workingHours)}}catch(G){console.error("Error loading provider:",G)}finally{h(!1)}})()},[t==null?void 0:t.id]);const U=async()=>{R(!0);const z=g.username.trim().split(/\s+/);if(z.length<2||z.some(se=>se.length<2)){r("Podaj pene imi i nazwisko (np. Jan Kowalski)","error"),R(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)){r("Nieprawidowy adres email","error"),R(!1);return}if(g.phone){const se=qx(g.phoneCountryCode,g.phone);if(!se.valid){r(se.message,"error"),R(!1);return}}await new Promise(se=>setTimeout(se,500));const J=g.phone.replace(/\D/g,""),fe=`${g.phoneCountryCode} ${J}`,X={...t,username:g.username,email:g.email,phone:fe,businessName:g.businessName};e(X),r("Profil zaktualizowany pomylnie","success"),R(!1)},B=async()=>{if(!i){r("Najpierw utwrz profil usugodawcy","error");return}for(const[z,G]of Object.entries(M))if(G.enabled){const J=parseInt(G.from.split(":")[0]),fe=parseInt(G.to.split(":")[0]);if(J>=fe){r(`${{monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"}[z]}: Godzina otwarcia musi by wczeniejsza ni zamknicia`,"error");return}}R(!0);try{await Xt.update(i.id,{workingHours:M}),o({...i,workingHours:M}),r("Godziny pracy zostay zapisane","success")}catch(z){console.error("Error saving working hours:",z),r("Bd zapisu godzin pracy","error")}finally{R(!1)}},H=async()=>{if(!v.currentPassword){r("Podaj aktualne haso","error");return}if(v.newPassword.length<8){r("Nowe haso musi mie minimum 8 znakw","error");return}if(!/[A-Z]/.test(v.newPassword)){r("Haso musi zawiera co najmniej jedn wielk liter","error");return}if(!/[a-z]/.test(v.newPassword)){r("Haso musi zawiera co najmniej jedn ma liter","error");return}if(!/[0-9]/.test(v.newPassword)){r("Haso musi zawiera co najmniej jedn cyfr","error");return}if(v.newPassword!==v.confirmPassword){r("Hasa nie s takie same","error");return}R(!0),await new Promise(z=>setTimeout(z,500)),r("Haso zostao zmienione","success"),P({currentPassword:"",newPassword:"",confirmPassword:""}),R(!1)},A=async()=>{R(!0),await new Promise(z=>setTimeout(z,500)),r("Ustawienia powiadomie zapisane","success"),R(!1)},me=async()=>{R(!0),await new Promise(z=>setTimeout(z,500)),r("Ustawienia prywatnoci zapisane","success"),R(!1)},ue=()=>{const z=window.prompt("Aby usun konto, wpisz swoje haso:");if(z!==null){if(!z||z.length<8){r("Nieprawidowe haso","error");return}window.confirm("UWAGA: Czy na pewno chcesz usun swoje konto? Wszystkie Twoje dane, usugi i rezerwacje zostan trwale usunite. Ta operacja jest nieodwracalna!")&&(n(),r("Konto zostao usunite","info"))}},ce=(z,G,J)=>{j(fe=>({...fe,[z]:{...fe[z],[G]:J}}))},ne=[];for(let z=0;z<24;z++)for(let G=0;G<60;G+=30){const J=`${String(z).padStart(2,"0")}:${String(G).padStart(2,"0")}`;ne.push(J)}const F={monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"},Y=[{id:"profile",label:"Profil",icon:Mn},{id:"hours",label:"Godziny pracy",icon:Dt},{id:"password",label:"Haso",icon:js},{id:"notifications",label:"Powiadomienia",icon:ts},{id:"privacy",label:"Prywatno",icon:Hn},{id:"billing",label:"Patnoci",icon:am},{id:"danger",label:"Strefa zagroenia",icon:rm}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ustawienia"}),s.jsx("p",{className:"text-gray-600",children:"Zarzdzaj ustawieniami swojego konta i profilu"})]}),s.jsxs("div",{className:"grid lg:grid-cols-[250px,1fr] gap-6",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:s.jsx("nav",{className:"space-y-1",children:Y.map(z=>s.jsxs("button",{onClick:()=>N(z.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-colors ${O===z.id?"bg-emerald-50 text-emerald-700 font-medium":"text-gray-600 hover:bg-gray-50"} ${z.id==="danger"?"text-red-600 hover:bg-red-50":""}`,children:[s.jsx(z.icon,{className:`w-5 h-5 ${z.id==="danger"?"text-red-500":""}`}),z.label]},z.id))})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[O==="profile"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Informacje profilowe"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Zaktualizuj swoje dane osobowe"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imi i nazwisko"}),s.jsxs("div",{className:"relative",children:[s.jsx(Mn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:g.username,onChange:z=>x({...g,username:z.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"Jan Kowalski"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"email",value:g.email,onChange:z=>x({...g,email:z.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"jan@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numer telefonu"}),s.jsx(Zx,{value:g.phone,countryCode:g.phoneCountryCode,onChange:(z,G)=>x({...g,phone:z,phoneCountryCode:G})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa firmy (opcjonalnie)"}),s.jsx("input",{type:"text",value:g.businessName,onChange:z=>x({...g,businessName:z.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0",placeholder:"Salon Urody Anna"})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsxs("button",{onClick:U,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[s.jsx(_i,{className:"w-5 h-5"}),b?"Zapisywanie...":"Zapisz zmiany"]})})]}),O==="hours"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Godziny pracy"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Ustaw godziny, w ktrych przyjmujesz klientw. Te godziny bd widoczne przy rezerwacji."})]}),l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(tt,{className:"w-8 h-8 animate-spin text-emerald-500"})}):i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-4",children:Object.keys(M).map(z=>s.jsx("div",{className:`p-4 rounded-xl border-2 transition-colors ${M[z].enabled?"border-emerald-200 bg-emerald-50/50":"border-gray-200 bg-gray-50"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M[z].enabled,onChange:G=>ce(z,"enabled",G.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]}),s.jsx("span",{className:`font-medium min-w-[100px] ${M[z].enabled?"text-gray-900":"text-gray-400"}`,children:F[z]})]}),M[z].enabled?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("select",{value:M[z].from,onChange:G=>ce(z,"from",G.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-0 text-sm",children:ne.map(G=>s.jsx("option",{value:G,children:G},`from-${G}`))}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("select",{value:M[z].to,onChange:G=>ce(z,"to",G.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-0 text-sm",children:ne.map(G=>s.jsx("option",{value:G,children:G},`to-${G}`))})]}):s.jsx("span",{className:"text-sm text-gray-400",children:"Zamknite"})]})},z))}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Szybkie ustawienia:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>{j({monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"00:00",to:"00:00",enabled:!1},sunday:{from:"00:00",to:"00:00",enabled:!1}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Standardowe (Pn-Pt 9-17)"}),s.jsx("button",{onClick:()=>{j({monday:{from:"08:00",to:"20:00",enabled:!0},tuesday:{from:"08:00",to:"20:00",enabled:!0},wednesday:{from:"08:00",to:"20:00",enabled:!0},thursday:{from:"08:00",to:"20:00",enabled:!0},friday:{from:"08:00",to:"20:00",enabled:!0},saturday:{from:"09:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Rozszerzone (8-20 + Sob)"}),s.jsx("button",{onClick:()=>{j({monday:{from:"10:00",to:"18:00",enabled:!0},tuesday:{from:"10:00",to:"18:00",enabled:!0},wednesday:{from:"10:00",to:"18:00",enabled:!0},thursday:{from:"10:00",to:"18:00",enabled:!0},friday:{from:"10:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"16:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!0}})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Cay tydzie"})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsxs("button",{onClick:B,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[s.jsx(_i,{className:"w-5 h-5"}),b?"Zapisywanie...":"Zapisz godziny pracy"]})})]}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[s.jsx(Dt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak profilu usugodawcy"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Najpierw utwrz profil usugodawcy, aby ustawi godziny pracy."}),s.jsx("a",{href:"/biznes/uslugi/dodaj",className:"text-emerald-600 font-medium hover:underline",children:"Utwrz profil "})]})]}),O==="password"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Zmiana hasa"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Upewnij si, e uywasz silnego hasa"})]}),s.jsxs("div",{className:"space-y-4 max-w-md",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aktualne haso"}),s.jsxs("div",{className:"relative",children:[s.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:E.current?"text":"password",value:v.currentPassword,onChange:z=>P({...v,currentPassword:z.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),s.jsx("button",{type:"button",onClick:()=>S({...E,current:!E.current}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:E.current?s.jsx(Aa,{className:"w-5 h-5"}):s.jsx(cr,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nowe haso"}),s.jsxs("div",{className:"relative",children:[s.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:E.new?"text":"password",value:v.newPassword,onChange:z=>P({...v,newPassword:z.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),s.jsx("button",{type:"button",onClick:()=>S({...E,new:!E.new}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:E.new?s.jsx(Aa,{className:"w-5 h-5"}):s.jsx(cr,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Min. 8 znakw, wielka litera, maa litera, cyfra"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Potwierd nowe haso"}),s.jsxs("div",{className:"relative",children:[s.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:E.confirm?"text":"password",value:v.confirmPassword,onChange:z=>P({...v,confirmPassword:z.target.value}),className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0"}),s.jsx("button",{type:"button",onClick:()=>S({...E,confirm:!E.confirm}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:E.confirm?s.jsx(Aa,{className:"w-5 h-5"}):s.jsx(cr,{className:"w-5 h-5"})})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsxs("button",{onClick:H,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[s.jsx(js,{className:"w-5 h-5"}),b?"Zmienianie...":"Zmie haso"]})})]}),O==="notifications"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Powiadomienia"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Zarzdzaj preferencjami powiadomie"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx(Bs,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia email"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Nowe rezerwacje"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj email gdy kto zarezerwuje wizyt"})]}),s.jsx("input",{type:"checkbox",checked:T.emailBookings,onChange:z=>I({...T,emailBookings:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Nowe wiadomoci"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj email gdy kto wyle wiadomo"})]}),s.jsx("input",{type:"checkbox",checked:T.emailMessages,onChange:z=>I({...T,emailMessages:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Newsletter i promocje"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Informacje o nowociach i promocjach"})]}),s.jsx("input",{type:"checkbox",checked:T.emailMarketing,onChange:z=>I({...T,emailMarketing:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx(Zi,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia SMS"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Nowe rezerwacje"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj SMS gdy kto zarezerwuje wizyt"})]}),s.jsx("input",{type:"checkbox",checked:T.smsBookings,onChange:z=>I({...T,smsBookings:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Przypomnienia o wizytach"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj SMS przed nadchodzc wizyt"})]}),s.jsx("input",{type:"checkbox",checked:T.smsReminders,onChange:z=>I({...T,smsReminders:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx(ts,{className:"w-5 h-5 text-gray-400"}),"Powiadomienia push"]}),s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Powiadomienia w przegldarce"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Otrzymuj powiadomienia w czasie rzeczywistym"})]}),s.jsx("input",{type:"checkbox",checked:T.pushNotifications,onChange:z=>I({...T,pushNotifications:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsxs("button",{onClick:A,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[s.jsx(_i,{className:"w-5 h-5"}),b?"Zapisywanie...":"Zapisz ustawienia"]})})]}),O==="privacy"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Prywatno"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Kontroluj widoczno swoich danych"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Profil widoczny publicznie"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Pozwl klientom znale Twj profil w wyszukiwarce"})]}),s.jsx("input",{type:"checkbox",checked:W.profileVisible,onChange:z=>D({...W,profileVisible:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Poka numer telefonu"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Wywietlaj numer telefonu na profilu publicznym"})]}),s.jsx("input",{type:"checkbox",checked:W.showPhone,onChange:z=>D({...W,showPhone:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]}),s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Poka adres email"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Wywietlaj adres email na profilu publicznym"})]}),s.jsx("input",{type:"checkbox",checked:W.showEmail,onChange:z=>D({...W,showEmail:z.target.checked}),className:"w-5 h-5 rounded text-emerald-500 focus:ring-emerald-500"})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsxs("button",{onClick:me,disabled:b,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:[s.jsx(_i,{className:"w-5 h-5"}),b?"Zapisywanie...":"Zapisz ustawienia"]})})]}),O==="billing"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:"Patnoci i subskrypcja"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Zarzdzaj swoim planem i metodami patnoci"})]}),s.jsxs("div",{className:"p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Aktualny plan"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Darmowy"})]}),s.jsx("div",{className:"px-3 py-1 bg-emerald-500 text-white rounded-full text-sm font-medium",children:"Aktywny"})]}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-emerald-500"}),"Do 10 rezerwacji miesicznie"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-emerald-500"}),"Podstawowy profil"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-emerald-500"}),"Wiadomoci z klientami"]})]}),s.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Przejd na Premium"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Metody patnoci"}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[s.jsx(am,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Brak dodanych metod patnoci"}),s.jsx("button",{className:"mt-3 text-emerald-600 font-medium hover:underline",children:"+ Dodaj kart"})]})]})]}),O==="danger"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-red-600 mb-1",children:"Strefa zagroenia"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Nieodwracalne akcje dotyczce Twojego konta"})]}),s.jsx("div",{className:"p-6 border-2 border-red-200 rounded-xl bg-red-50",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:s.jsx(Ki,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-red-900",children:"Usu konto"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Po usuniciu konta wszystkie Twoje dane, rezerwacje i historia zostan trwale usunite. Ta operacja jest nieodwracalna."}),s.jsx("button",{onClick:ue,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Usu moje konto"})]})]})}),s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(rm,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-yellow-800",children:"Przed usuniciem konta"}),s.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[s.jsx("li",{children:" Upewnij si, e nie masz aktywnych rezerwacji"}),s.jsx("li",{children:" Poinformuj swoich klientw o zamkniciu dziaalnoci"}),s.jsx("li",{children:" Pobierz kopi swoich danych jeli potrzebujesz"})]})]})]})})]})]})]})]})},ED=()=>{const{user:t}=_t(),{showToast:e}=mn(),[n,r]=C.useState(null),[i,o]=C.useState(!0),[l,h]=C.useState(!1),[m,f]=C.useState({monday:{from:"09:00",to:"18:00",enabled:!0},tuesday:{from:"09:00",to:"18:00",enabled:!0},wednesday:{from:"09:00",to:"18:00",enabled:!0},thursday:{from:"09:00",to:"18:00",enabled:!0},friday:{from:"09:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}}),g={monday:"Poniedziaek",tuesday:"Wtorek",wednesday:"roda",thursday:"Czwartek",friday:"Pitek",saturday:"Sobota",sunday:"Niedziela"},x=[];for(let S=0;S<24;S++)for(let M=0;M<60;M+=30){const j=`${String(S).padStart(2,"0")}:${String(M).padStart(2,"0")}`;x.push(j)}C.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){o(!1);return}try{const M=await Xt.getByOwner(t.id);if(M.length>0){const j=M[0];r(j),f(j.workingHours)}}catch(M){console.error("Error loading provider:",M),e("Bd adowania danych","error")}finally{o(!1)}})()},[t==null?void 0:t.id]);const v=(S,M,j)=>{f(T=>({...T,[S]:{...T[S],[M]:j}}))},P=async()=>{if(!n){e("Najpierw utwrz profil usugodawcy","error");return}for(const[S,M]of Object.entries(m))if(M.enabled){const j=parseInt(M.from.split(":")[0]),T=parseInt(M.to.split(":")[0]);if(j>=T){e(`${g[S]}: Godzina otwarcia musi by wczeniejsza ni zamknicia`,"error");return}}h(!0);try{await Xt.update(n.id,{workingHours:m}),r({...n,workingHours:m}),e("Godziny pracy zostay zapisane!","success")}catch(S){console.error("Error saving working hours:",S),e("Bd zapisu godzin pracy","error")}finally{h(!1)}},E=S=>{f({standard:{monday:{from:"09:00",to:"17:00",enabled:!0},tuesday:{from:"09:00",to:"17:00",enabled:!0},wednesday:{from:"09:00",to:"17:00",enabled:!0},thursday:{from:"09:00",to:"17:00",enabled:!0},friday:{from:"09:00",to:"17:00",enabled:!0},saturday:{from:"00:00",to:"00:00",enabled:!1},sunday:{from:"00:00",to:"00:00",enabled:!1}},extended:{monday:{from:"08:00",to:"20:00",enabled:!0},tuesday:{from:"08:00",to:"20:00",enabled:!0},wednesday:{from:"08:00",to:"20:00",enabled:!0},thursday:{from:"08:00",to:"20:00",enabled:!0},friday:{from:"08:00",to:"20:00",enabled:!0},saturday:{from:"09:00",to:"15:00",enabled:!0},sunday:{from:"00:00",to:"00:00",enabled:!1}},fullWeek:{monday:{from:"10:00",to:"18:00",enabled:!0},tuesday:{from:"10:00",to:"18:00",enabled:!0},wednesday:{from:"10:00",to:"18:00",enabled:!0},thursday:{from:"10:00",to:"18:00",enabled:!0},friday:{from:"10:00",to:"18:00",enabled:!0},saturday:{from:"10:00",to:"16:00",enabled:!0},sunday:{from:"10:00",to:"14:00",enabled:!0}}}[S]),e("Szablon zastosowany","info")};return i?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(tt,{className:"w-8 h-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(Dt,{className:"w-7 h-7 text-primary"}),"Godziny pracy"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Ustaw godziny, w ktrych przyjmujesz klientw. Bd widoczne przy rezerwacji."})]})}),n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Szybkie szablony"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>E("standard"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Standardowe (Pn-Pt 9-17)"}),s.jsx("button",{onClick:()=>E("extended"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Rozszerzone (8-20 + Sob)"}),s.jsx("button",{onClick:()=>E("fullWeek"),className:"px-5 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:" Cay tydzie"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-6",children:"Dostosuj godziny dla kadego dnia"}),s.jsx("div",{className:"space-y-4",children:Object.keys(m).map(S=>s.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${m[S].enabled?"border-emerald-200 bg-emerald-50/50":"border-gray-200 bg-gray-50"}`,children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:m[S].enabled,onChange:M=>v(S,"enabled",M.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-12 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]}),s.jsx("span",{className:`font-semibold text-lg min-w-[120px] ${m[S].enabled?"text-gray-900":"text-gray-400"}`,children:g[S]})]}),m[S].enabled?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"od"}),s.jsx("select",{value:m[S].from,onChange:M=>v(S,"from",M.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0 font-medium",children:x.map(M=>s.jsx("option",{value:M,children:M},`from-${M}`))})]}),s.jsx("span",{className:"text-gray-400 text-xl",children:""}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"do"}),s.jsx("select",{value:m[S].to,onChange:M=>v(S,"to",M.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-0 font-medium",children:x.map(M=>s.jsx("option",{value:M,children:M},`to-${M}`))})]})]}):s.jsx("span",{className:"text-gray-400 font-medium px-4 py-2 bg-gray-100 rounded-xl",children:" Zamknite"})]})},S))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:P,disabled:l,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:l?s.jsxs(s.Fragment,{children:[s.jsx(tt,{className:"w-5 h-5 animate-spin"}),"Zapisywanie..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_i,{className:"w-5 h-5"}),"Zapisz godziny pracy"]})})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:s.jsxs("p",{className:"text-blue-700 text-sm",children:[" ",s.jsx("strong",{children:"Wskazwka:"}),' Klienci bd mogli rezerwowa wizyty tylko w godzinach, ktre tutaj ustawisz. Dni oznaczone jako "Zamknite" nie bd dostpne do rezerwacji.']})})]}):s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Bk,{className:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-yellow-800",children:"Brak profilu usugodawcy"}),s.jsx("p",{className:"text-yellow-700 mt-1",children:"Aby ustawi godziny pracy, najpierw utwrz swj profil usugodawcy."}),s.jsx("a",{href:"/biznes/dodaj-usluge",className:"inline-block mt-4 px-6 py-2 bg-yellow-600 text-white rounded-xl font-medium hover:bg-yellow-700 transition-colors",children:"Utwrz profil"})]})]})})]})},SD=({onMenuClick:t,isSuperAdmin:e=!1})=>{var r;const{user:n}=_t();return s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-30",children:s.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:t,className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(qk,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 rounded-xl px-4 py-2 w-64 lg:w-96",children:[s.jsx(qs,{className:"w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Szukaj uytkownikw, rezerwacji...",className:"bg-transparent focus:outline-none text-sm flex-1"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${e?"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[e?s.jsx(Ta,{className:"w-4 h-4"}):s.jsx(Hn,{className:"w-4 h-4"}),e?"Super Admin":"Administrator"]}),s.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-xl",children:[s.jsx(ts,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),s.jsxs("div",{className:"flex items-center gap-3 pl-3 border-l border-gray-200",children:[s.jsxs("div",{className:"hidden sm:block text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:n==null?void 0:n.username}),s.jsx("p",{className:"text-xs text-gray-500",children:n==null?void 0:n.email})]}),s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${e?"bg-gradient-to-br from-amber-500 to-orange-600":"bg-red-600"}`,children:((r=n==null?void 0:n.username)==null?void 0:r.charAt(0).toUpperCase())||"A"})]})]})]})})},PD=({isOpen:t,onClose:e,isSuperAdmin:n=!1})=>{const{logout:r}=_t(),i=[{icon:Dg,label:"Dashboard",to:"/admin"},{icon:_l,label:"Uytkownicy",to:"/admin/uzytkownicy"},{icon:Hi,label:"Usugodawcy",to:"/admin/uslugodawcy"},{icon:un,label:"Rezerwacje",to:"/admin/rezerwacje"},{icon:nf,label:"Ustawienia",to:"/admin/ustawienia"}],o=async()=>{await r(),window.location.href="/#/"};return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:e}),s.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-gray-900 text-white transform transition-transform duration-300 lg:transform-none ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b border-white/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n?"bg-gradient-to-br from-amber-500 to-orange-600":"bg-red-600"}`,children:n?s.jsx(Ta,{className:"w-6 h-6"}):s.jsx(Hn,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold text-lg",children:n?"Super Admin":"Admin Panel"}),s.jsx("p",{className:"text-xs text-gray-400",children:"ToMyHomeApp"})]})]}),s.jsx("button",{onClick:e,className:"lg:hidden p-2 hover:bg-white/10 rounded-lg",children:s.jsx(Fs,{className:"w-5 h-5"})})]})}),s.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:i.map(l=>s.jsxs(Aw,{to:l.to,end:l.to==="/admin",onClick:e,className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${h?n?"bg-gradient-to-r from-amber-500 to-orange-600 text-white":"bg-red-600 text-white":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:[s.jsx(l.icon,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:l.label})]},l.to))}),s.jsxs("div",{className:"p-4 border-t border-white/10",children:[s.jsxs(Aw,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-gray-300 hover:bg-white/10 hover:text-white rounded-xl transition-all mb-2",children:[s.jsx(Dg,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Wr do strony"})]}),s.jsxs("button",{onClick:o,className:"flex items-center gap-3 px-4 py-3 text-red-400 hover:bg-red-600/20 hover:text-red-300 rounded-xl transition-all w-full",children:[s.jsx(yu,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Wyloguj si"})]})]})]})})]})},Zs="users",ra="providers",sf="bookings",Kx=async t=>{try{const e=await $i(Ve(we,Zs,t));return e.exists()&&e.data().role||"user"}catch(e){return console.error("Error getting user role:",e),"user"}},CD=async t=>{const e=await Kx(t);return e==="admin"||e==="superadmin"},zD=async t=>await Kx(t)==="superadmin",ID=async()=>{try{const e=(await Et(nt(we,Zs))).docs.map(S=>({id:S.id,...S.data()})),r=(await Et(nt(we,ra))).docs.map(S=>({id:S.id,...S.data()})),o=(await Et(nt(we,sf))).docs.map(S=>({id:S.id,...S.data()})),l=new Date,h=new Date(l.getFullYear(),l.getMonth(),l.getDate()).toISOString(),m=new Date(l.getTime()-7*24*60*60*1e3).toISOString(),f=new Date(l.getTime()-30*24*60*60*1e3).toISOString(),g=o.filter(S=>S.createdAt>=h).length,x=o.filter(S=>S.createdAt>=m).length,v=o.filter(S=>S.createdAt>=f).length,E=o.filter(S=>S.status==="completed").reduce((S,M)=>S+(M.totalPrice||0),0);return{totalUsers:e.length,totalProviders:r.length,totalBookings:o.length,pendingVerifications:r.filter(S=>!S.isVerified&&!S.rejectedAt).length,activeProviders:r.filter(S=>S.isVerified&&S.isActive!==!1).length,blockedUsers:e.filter(S=>S.isBlocked).length,todayBookings:g,weekBookings:x,monthBookings:v,totalRevenue:E,totalAdmins:e.filter(S=>S.role==="admin").length,totalSuperAdmins:e.filter(S=>S.role==="superadmin").length}}catch(t){return console.error("Error getting platform stats:",t),{totalUsers:0,totalProviders:0,totalBookings:0,pendingVerifications:0,activeProviders:0,blockedUsers:0,todayBookings:0,weekBookings:0,monthBookings:0,totalRevenue:0,totalAdmins:0,totalSuperAdmins:0}}},AD=async()=>{try{return(await Et(nt(we,Zs))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("Error getting users:",t),[]}},RD=async t=>{try{const e=await $i(Ve(we,Zs,t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){return console.error("Error getting user:",e),null}},LD=async(t,e)=>{try{return await Kt(Ve(we,Zs,t),{...e,updatedAt:new Date().toISOString()}),!0}catch(n){return console.error("Error updating user:",n),!1}},DD=(t,e,n)=>{const r=e||"user";return t==="superadmin"?!0:r==="superadmin"||t==="admin"&&r==="admin"&&(n==="changeRole"||n==="delete")?!1:t==="admin"&&n==="changeRole"?r==="user"||r==="admin":!0},MD=async(t,e)=>{try{return await Kt(Ve(we,Zs,t),{isBlocked:!0,blockedAt:new Date().toISOString(),blockedReason:e}),!0}catch(n){return console.error("Error blocking user:",n),!1}},OD=async t=>{try{return await Kt(Ve(we,Zs,t),{isBlocked:!1,blockedAt:null,blockedReason:null}),!0}catch(e){return console.error("Error unblocking user:",e),!1}},VD=async t=>{try{return await Mu(Ve(we,Zs,t)),!0}catch(e){return console.error("Error deleting user:",e),!1}},UD=async(t,e)=>{try{return await Kt(Ve(we,Zs,t),{role:e}),!0}catch(n){return console.error("Error setting user role:",n),!1}},BD=async()=>{try{return(await Et(nt(we,ra))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("Error getting providers:",t),[]}},FD=async()=>{try{const t=It(nt(we,ra),jt("isVerified","==",!1));return(await Et(t)).docs.map(n=>({id:n.id,...n.data()})).filter(n=>!n.rejectedAt)}catch(t){return console.error("Error getting pending providers:",t),[]}},WD=async(t,e)=>{try{return await Kt(Ve(we,ra,t),{isVerified:!0,isActive:!0,verifiedAt:new Date().toISOString(),verifiedBy:e}),!0}catch(n){return console.error("Error verifying provider:",n),!1}},$D=async(t,e)=>{try{return await Kt(Ve(we,ra,t),{isVerified:!1,rejectedAt:new Date().toISOString(),rejectedReason:e}),!0}catch(n){return console.error("Error rejecting provider:",n),!1}},HD=async(t,e)=>{try{return await Kt(Ve(we,ra,t),{isActive:!1,suspendedAt:new Date().toISOString(),suspendedReason:e}),!0}catch(n){return console.error("Error suspending provider:",n),!1}},qD=async t=>{try{return await Kt(Ve(we,ra,t),{isActive:!0,suspendedAt:null,suspendedReason:null}),!0}catch(e){return console.error("Error activating provider:",e),!1}},ZD=async t=>{try{return await Mu(Ve(we,ra,t)),!0}catch(e){return console.error("Error deleting provider:",e),!1}},KD=async()=>{try{return(await Et(nt(we,sf))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("Error getting bookings:",t),[]}},GD=async(t=20)=>{try{const e=It(nt(we,sf),k5("createdAt","desc"),T5(t));return(await Et(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting recent bookings:",e),[]}},QD=async(t,e,n)=>{try{const r={status:e,updatedAt:new Date().toISOString()};return e==="cancelled"&&n&&(r.cancelledAt=new Date().toISOString(),r.cancelledBy="admin",r.cancelReason=n),await Kt(Ve(we,sf,t),r),!0}catch(r){return console.error("Error updating booking status:",r),!1}},qt={getUserRole:Kx,checkIsAdmin:CD,checkIsSuperAdmin:zD,canPerformActionOnUser:DD,getPlatformStats:ID,getAllUsers:AD,getUserById:RD,updateUser:LD,blockUser:MD,unblockUser:OD,deleteUser:VD,setUserRole:UD,getAllProviders:BD,getPendingProviders:FD,verifyProvider:WD,rejectProvider:$D,suspendProvider:HD,activateProvider:qD,deleteProvider:ZD,getAllBookings:KD,getRecentBookings:GD,updateBookingStatus:QD},i2=C.createContext({role:"user",isSuperAdmin:!1}),a2=()=>C.useContext(i2),YD=()=>{const{isAuthenticated:t,user:e}=_t(),[n,r]=C.useState(!1),[i,o]=C.useState("user"),[l,h]=C.useState(!0),{pathname:m}=hr();C.useEffect(()=>{window.scrollTo(0,0)},[m]),C.useEffect(()=>{t&&e?(async()=>{if(!(e!=null&&e.id)){o("user"),h(!1);return}try{const v=await qt.getUserRole(e.id);o(v)}catch(v){console.error("Error checking user role:",v),o("user")}finally{h(!1)}})():h(!1)},[t,e]);const f=i==="admin"||i==="superadmin",g=i==="superadmin";return t?l?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(tt,{className:"w-12 h-12 text-red-500 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"Weryfikacja uprawnie..."})]})}):f?s.jsx(i2.Provider,{value:{role:i,isSuperAdmin:g},children:s.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[s.jsx(PD,{isOpen:n,onClose:()=>r(!1),isSuperAdmin:g}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[s.jsx(SD,{onMenuClick:()=>r(!0),isSuperAdmin:g}),s.jsx("main",{className:"flex-1 p-4 lg:p-6",children:s.jsx(Zj,{})})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(Hn,{className:"w-10 h-10 text-red-500"})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Brak dostpu"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Nie masz uprawnie do panelu administracyjnego. Ta strona jest dostpna tylko dla administratorw platformy."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("a",{href:"/#/",className:"block w-full py-3 bg-red-600 text-white font-semibold rounded-xl hover:bg-red-700 transition-colors",children:"Wr do strony gwnej"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Jeli uwaasz, e to bd, skontaktuj si z administratorem."})]})]})}):s.jsx(rg,{to:"/auth?redirect=/admin",replace:!0})},JD=()=>{const[t,e]=C.useState(null),[n,r]=C.useState([]),[i,o]=C.useState([]),[l,h]=C.useState(!0);C.useEffect(()=>{m()},[]);const m=async()=>{h(!0);try{const[v,P,E]=await Promise.all([qt.getPlatformStats(),qt.getRecentBookings(5),qt.getPendingProviders()]);e(v),r(P),o(E)}catch(v){console.error("Error loading dashboard data:",v)}finally{h(!1)}},f=t?[{title:"Uytkownicy",value:t.totalUsers,icon:_l,color:"bg-blue-500",bgColor:"bg-blue-50",change:"+12%",positive:!0},{title:"Usugodawcy",value:t.totalProviders,subtitle:`${t.activeProviders} aktywnych`,icon:Hi,color:"bg-emerald-500",bgColor:"bg-emerald-50",change:"+8%",positive:!0},{title:"Rezerwacje",value:t.totalBookings,subtitle:`${t.todayBookings} dzisiaj`,icon:un,color:"bg-purple-500",bgColor:"bg-purple-50",change:"+23%",positive:!0},{title:"Przychody",value:`${t.totalRevenue.toLocaleString()} z`,subtitle:"z prowizji",icon:qi,color:"bg-amber-500",bgColor:"bg-amber-50",change:"+15%",positive:!0}]:[],g=v=>{switch(v){case"confirmed":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"completed":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},x=v=>{switch(v){case"confirmed":return"Potwierdzona";case"pending":return"Oczekujca";case"completed":return"Zakoczona";case"cancelled":return"Anulowana";default:return v}};return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(tt,{className:"w-8 h-8 text-red-500 animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-500",children:"Przegld statystyk platformy"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((v,P)=>s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${v.bgColor}`,children:s.jsx(v.icon,{className:`w-6 h-6 ${v.color.replace("bg-","text-")}`})}),s.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${v.positive?"text-green-600":"text-red-600"}`,children:[v.positive?s.jsx(Wk,{className:"w-4 h-4"}):s.jsx(Fk,{className:"w-4 h-4"}),v.change]})]}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:v.value}),s.jsx("p",{className:"text-gray-500 text-sm",children:v.title}),v.subtitle&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:v.subtitle})]},P))}),t&&t.pendingVerifications>0&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center gap-4",children:[s.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:s.jsx(Bk,{className:"w-6 h-6 text-amber-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-semibold text-amber-800",children:[t.pendingVerifications," usugodawcw oczekuje na weryfikacj"]}),s.jsx("p",{className:"text-sm text-amber-600",children:"Sprawd nowe zgoszenia i zweryfikuj profile"})]}),s.jsx(be,{to:"/admin/uslugodawcy",className:"px-4 py-2 bg-amber-600 text-white font-medium rounded-lg hover:bg-amber-700 transition-colors",children:"Weryfikuj"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Dt,{className:"w-5 h-5 text-gray-400"}),s.jsx("h3",{className:"font-semibold text-gray-900",children:"Rezerwacje w czasie"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500",children:"Dzisiaj"}),s.jsx("span",{className:"font-bold text-gray-900",children:(t==null?void 0:t.todayBookings)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500",children:"Ten tydzie"}),s.jsx("span",{className:"font-bold text-gray-900",children:(t==null?void 0:t.weekBookings)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500",children:"Ten miesic"}),s.jsx("span",{className:"font-bold text-gray-900",children:(t==null?void 0:t.monthBookings)||0})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Hx,{className:"w-5 h-5 text-gray-400"}),s.jsx("h3",{className:"font-semibold text-gray-900",children:"Status platformy"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500",children:"Aktywni usugodawcy"}),s.jsx("span",{className:"font-bold text-green-600",children:(t==null?void 0:t.activeProviders)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500",children:"Oczekujce weryfikacje"}),s.jsx("span",{className:"font-bold text-amber-600",children:(t==null?void 0:t.pendingVerifications)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500",children:"Zablokowani uytkownicy"}),s.jsx("span",{className:"font-bold text-red-600",children:(t==null?void 0:t.blockedUsers)||0})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Ia,{className:"w-5 h-5 text-gray-400"}),s.jsx("h3",{className:"font-semibold text-gray-900",children:"Szybkie akcje"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{to:"/admin/uzytkownicy",className:"block w-full py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",children:"Zarzdzaj uytkownikami"}),s.jsx(be,{to:"/admin/uslugodawcy",className:"block w-full py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",children:"Weryfikuj usugodawcw"}),s.jsx(be,{to:"/admin/rezerwacje",className:"block w-full py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",children:"Przegld rezerwacji"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Ostatnie rezerwacje"}),s.jsx(be,{to:"/admin/rezerwacje",className:"text-sm text-red-600 hover:underline",children:"Zobacz wszystkie"})]})}),s.jsx("div",{className:"divide-y divide-gray-100",children:n.length===0?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"Brak rezerwacji"}):n.map(v=>s.jsxs("div",{className:"p-4 hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:v.clientName}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g(v.status)}`,children:x(v.status)})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[v.providerName,"  ",v.date," ",v.time]}),s.jsxs("div",{className:"text-sm font-medium text-gray-900 mt-1",children:[v.totalPrice," z"]})]},v.id))})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Oczekujce weryfikacje"}),s.jsx(be,{to:"/admin/uslugodawcy",className:"text-sm text-red-600 hover:underline",children:"Zobacz wszystkie"})]})}),s.jsx("div",{className:"divide-y divide-gray-100",children:i.length===0?s.jsxs("div",{className:"p-6 text-center text-gray-500",children:[s.jsx(Ia,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),"Wszystko zweryfikowane!"]}):i.slice(0,5).map(v=>s.jsx("div",{className:"p-4 hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:v.image||"https://via.placeholder.com/40",alt:v.name,className:"w-10 h-10 rounded-full object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-900",children:v.name}),s.jsx("p",{className:"text-sm text-gray-500",children:v.profession})]}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Oczekuje"})]})},v.id))})]})]})]})},XD=()=>{const{showToast:t}=mn(),{user:e}=_t(),{role:n,isSuperAdmin:r}=a2(),[i,o]=C.useState([]),[l,h]=C.useState([]),[m,f]=C.useState(!0),[g,x]=C.useState(""),[v,P]=C.useState("all"),[E,S]=C.useState(null),[M,j]=C.useState(!1),[T,I]=C.useState(!1),[W,D]=C.useState(""),[O,N]=C.useState("user"),[b,R]=C.useState(!1);C.useEffect(()=>{U()},[]),C.useEffect(()=>{B()},[i,g,v]);const U=async()=>{f(!0);try{const z=await qt.getAllUsers();o(z)}catch(z){console.error("Error loading users:",z),t("Bd adowania uytkownikw","error")}finally{f(!1)}},B=()=>{let z=[...i];if(g){const G=g.toLowerCase();z=z.filter(J=>{var fe,X,se;return((fe=J.username)==null?void 0:fe.toLowerCase().includes(G))||((X=J.email)==null?void 0:X.toLowerCase().includes(G))||((se=J.phone)==null?void 0:se.includes(G))})}switch(v){case"client":z=z.filter(G=>G.accountType==="client");break;case"provider":z=z.filter(G=>G.accountType==="provider");break;case"admin":z=z.filter(G=>G.role==="admin");break;case"superadmin":z=z.filter(G=>G.role==="superadmin");break;case"blocked":z=z.filter(G=>G.isBlocked);break}h(z)},H=(z,G)=>z.id===(e==null?void 0:e.id)?!1:qt.canPerformActionOnUser(n,z.role,G),A=async()=>{if(!E||!W.trim()){t("Podaj powd blokady","error");return}if(!H(E,"block")){t("Nie masz uprawnie do tej akcji","error");return}R(!0);try{await qt.blockUser(E.id,W)?(t("Uytkownik zablokowany","success"),j(!1),D(""),U()):t("Bd blokowania uytkownika","error")}catch{t("Bd blokowania uytkownika","error")}finally{R(!1)}},me=async z=>{if(!H(z,"block")){t("Nie masz uprawnie do tej akcji","error");return}R(!0);try{await qt.unblockUser(z.id)?(t("Uytkownik odblokowany","success"),U()):t("Bd odblokowywania uytkownika","error")}catch{t("Bd odblokowywania uytkownika","error")}finally{R(!1)}},ue=async z=>{if(!H(z,"delete")){t("Nie masz uprawnie do usunicia tego uytkownika","error");return}if(window.confirm(`Czy na pewno chcesz usun uytkownika ${z.username}? Ta operacja jest nieodwracalna.`)){R(!0);try{await qt.deleteUser(z.id)?(t("Uytkownik usunity","success"),U()):t("Bd usuwania uytkownika","error")}catch{t("Bd usuwania uytkownika","error")}finally{R(!1)}}},ce=z=>{if(!H(z,"changeRole")){t("Nie masz uprawnie do zmiany roli tego uytkownika","error");return}S(z),N(z.role||"user"),I(!0)},ne=async()=>{if(E){if(!r&&O==="superadmin"){t("Tylko Super Admin moe nadawa rol Super Admin","error");return}R(!0);try{await qt.setUserRole(E.id,O)?(t("Rola zmieniona pomylnie","success"),I(!1),U()):t("Bd zmiany roli","error")}catch{t("Bd zmiany roli","error")}finally{R(!1)}}},F=z=>{switch(z){case"superadmin":return s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700",children:[s.jsx(Ta,{className:"w-3 h-3"}),"Super Admin"]});case"admin":return s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:[s.jsx(Hn,{className:"w-3 h-3"}),"Admin"]});default:return null}},Y=[{value:"all",label:"Wszyscy",count:i.length},{value:"client",label:"Klienci",count:i.filter(z=>z.accountType==="client").length},{value:"provider",label:"Usugodawcy",count:i.filter(z=>z.accountType==="provider").length},{value:"admin",label:"Administratorzy",count:i.filter(z=>z.role==="admin").length},{value:"superadmin",label:"Super Admini",count:i.filter(z=>z.role==="superadmin").length},{value:"blocked",label:"Zablokowani",count:i.filter(z=>z.isBlocked).length}];return m?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(tt,{className:"w-8 h-8 text-red-500 animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Uytkownicy"}),s.jsx("p",{className:"text-gray-500",children:"Zarzdzaj uytkownikami platformy"})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Szukaj po nazwie, emailu lub telefonie...",value:g,onChange:z=>x(z.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map(z=>s.jsxs("button",{onClick:()=>P(z.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${v===z.value?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[z.label," (",z.count,")"]},z.value))})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Uytkownik"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Kontakt"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Typ / Rola"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Status"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Data rejestracji"}),s.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-600",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:l.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"Nie znaleziono uytkownikw"})}):l.map(z=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center overflow-hidden ${z.role==="superadmin"?"bg-gradient-to-br from-amber-500 to-orange-600 text-white":z.role==="admin"?"bg-red-600 text-white":"bg-gray-200"}`,children:z.avatar?s.jsx("img",{src:z.avatar,alt:"",className:"w-full h-full object-cover"}):z.role==="superadmin"?s.jsx(Ta,{className:"w-5 h-5"}):z.role==="admin"?s.jsx(Hn,{className:"w-5 h-5"}):s.jsx(Mn,{className:"w-5 h-5 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:z.username}),z.businessName&&s.jsx("p",{className:"text-xs text-gray-500",children:z.businessName})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[s.jsx(Bs,{className:"w-3 h-3"}),z.email]}),z.phone&&s.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[s.jsx(Zi,{className:"w-3 h-3"}),z.phoneCountryCode||""," ",z.phone]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z.accountType==="provider"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:z.accountType==="provider"?"Usugodawca":"Klient"}),F(z.role)]})}),s.jsx("td",{className:"px-6 py-4",children:z.isBlocked?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:[s.jsx(lm,{className:"w-3 h-3"}),"Zablokowany"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:[s.jsx(Ia,{className:"w-3 h-3"}),"Aktywny"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-500",children:z.createdAt?new Date(z.createdAt).toLocaleDateString("pl-PL"):"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[H(z,"block")&&(z.isBlocked?s.jsx("button",{onClick:()=>me(z),disabled:b,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Odblokuj",children:s.jsx(Zk,{className:"w-5 h-5"})}):s.jsx("button",{onClick:()=>{S(z),j(!0)},disabled:b,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Zablokuj",children:s.jsx(YL,{className:"w-5 h-5"})})),H(z,"changeRole")&&s.jsx("button",{onClick:()=>ce(z),disabled:b,className:`p-2 rounded-lg transition-colors ${z.role==="superadmin"?"text-amber-600 hover:bg-amber-50":z.role==="admin"?"text-red-600 hover:bg-red-50":"text-gray-600 hover:bg-gray-100"}`,title:"Zmie rol",children:z.role==="superadmin"?s.jsx(Ta,{className:"w-5 h-5"}):s.jsx(Hn,{className:"w-5 h-5"})}),H(z,"delete")&&s.jsx("button",{onClick:()=>ue(z),disabled:b,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Usu",children:s.jsx(Ki,{className:"w-5 h-5"})}),!H(z,"block")&&!H(z,"changeRole")&&!H(z,"delete")&&s.jsx("span",{className:"text-gray-400 px-2",children:""})]})})]},z.id))})]})})}),M&&E&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Zablokuj uytkownika"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Zamierzasz zablokowa uytkownika ",s.jsx("strong",{children:E.username}),". Podaj powd blokady:"]}),s.jsx("textarea",{value:W,onChange:z=>D(z.target.value),placeholder:"Powd blokady...",rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none mb-4"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{j(!1),D("")},className:"flex-1 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Anuluj"}),s.jsx("button",{onClick:A,disabled:b||!W.trim(),className:"flex-1 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:b?"Blokowanie...":"Zablokuj"})]})]})}),T&&E&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Zmie rol uytkownika"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Zmie rol uytkownika ",s.jsx("strong",{children:E.username}),":"]}),s.jsxs("div",{className:"space-y-2 mb-6",children:[s.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-xl cursor-pointer transition-colors ${O==="user"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"role",value:"user",checked:O==="user",onChange:()=>N("user"),className:"sr-only"}),s.jsx(Mn,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Uytkownik"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Standardowe uprawnienia"})]})]}),s.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-xl cursor-pointer transition-colors ${O==="admin"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"role",value:"admin",checked:O==="admin",onChange:()=>N("admin"),className:"sr-only"}),s.jsx(Hn,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Administrator"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Zarzdzanie platform"})]})]}),r&&s.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-xl cursor-pointer transition-colors ${O==="superadmin"?"border-amber-500 bg-amber-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"role",value:"superadmin",checked:O==="superadmin",onChange:()=>N("superadmin"),className:"sr-only"}),s.jsx(Ta,{className:"w-5 h-5 text-amber-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Super Admin"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Pena kontrola nad platform"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>I(!1),className:"flex-1 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Anuluj"}),s.jsx("button",{onClick:ne,disabled:b,className:"flex-1 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:b?"Zapisywanie...":"Zapisz"})]})]})})]})},eM=()=>{const{showToast:t}=mn(),{user:e}=_t(),[n,r]=C.useState([]),[i,o]=C.useState([]),[l,h]=C.useState(!0),[m,f]=C.useState(""),[g,x]=C.useState("all"),[v,P]=C.useState(null),[E,S]=C.useState(!1),[M,j]=C.useState(""),[T,I]=C.useState(!1);C.useEffect(()=>{W()},[]),C.useEffect(()=>{D()},[n,m,g]);const W=async()=>{h(!0);try{const A=await qt.getAllProviders();r(A)}catch(A){console.error("Error loading providers:",A),t("Bd adowania usugodawcw","error")}finally{h(!1)}},D=()=>{let A=[...n];if(m){const me=m.toLowerCase();A=A.filter(ue=>{var ce,ne,F;return((ce=ue.name)==null?void 0:ce.toLowerCase().includes(me))||((ne=ue.profession)==null?void 0:ne.toLowerCase().includes(me))||((F=ue.locationString)==null?void 0:F.toLowerCase().includes(me))})}switch(g){case"pending":A=A.filter(me=>!me.isVerified&&!me.rejectedAt);break;case"verified":A=A.filter(me=>me.isVerified&&me.isActive!==!1);break;case"rejected":A=A.filter(me=>me.rejectedAt);break;case"suspended":A=A.filter(me=>me.isVerified&&me.isActive===!1);break}o(A)},O=async A=>{if(e!=null&&e.id){I(!0);try{await qt.verifyProvider(A.id,e.id)?(t("Usugodawca zweryfikowany pomylnie","success"),W()):t("Bd weryfikacji","error")}catch{t("Bd weryfikacji","error")}finally{I(!1)}}},N=async()=>{if(!v||!M.trim()){t("Podaj powd odrzucenia","error");return}I(!0);try{await qt.rejectProvider(v.id,M)?(t("Usugodawca odrzucony","success"),S(!1),j(""),W()):t("Bd odrzucania","error")}catch{t("Bd odrzucania","error")}finally{I(!1)}},b=async A=>{const me=window.prompt("Podaj powd zawieszenia:");if(me){I(!0);try{await qt.suspendProvider(A.id,me)?(t("Usugodawca zawieszony","success"),W()):t("Bd zawieszania","error")}catch{t("Bd zawieszania","error")}finally{I(!1)}}},R=async A=>{I(!0);try{await qt.activateProvider(A.id)?(t("Usugodawca aktywowany","success"),W()):t("Bd aktywacji","error")}catch{t("Bd aktywacji","error")}finally{I(!1)}},U=async A=>{if(window.confirm(`Czy na pewno chcesz usun profil ${A.name}? Ta operacja jest nieodwracalna.`)){I(!0);try{await qt.deleteProvider(A.id)?(t("Profil usunity","success"),W()):t("Bd usuwania","error")}catch{t("Bd usuwania","error")}finally{I(!1)}}},B=A=>A.rejectedAt?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:[s.jsx(lm,{className:"w-3 h-3"}),"Odrzucony"]}):A.isVerified?A.isActive===!1?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700",children:[s.jsx(y_,{className:"w-3 h-3"}),"Zawieszony"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:[s.jsx(Ia,{className:"w-3 h-3"}),"Zweryfikowany"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:[s.jsx(Dt,{className:"w-3 h-3"}),"Oczekuje"]}),H=[{value:"all",label:"Wszyscy",count:n.length},{value:"pending",label:"Oczekujce",count:n.filter(A=>!A.isVerified&&!A.rejectedAt).length},{value:"verified",label:"Zweryfikowani",count:n.filter(A=>A.isVerified&&A.isActive!==!1).length},{value:"suspended",label:"Zawieszeni",count:n.filter(A=>A.isVerified&&A.isActive===!1).length},{value:"rejected",label:"Odrzuceni",count:n.filter(A=>A.rejectedAt).length}];return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(tt,{className:"w-8 h-8 text-red-500 animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Usugodawcy"}),s.jsx("p",{className:"text-gray-500",children:"Weryfikuj i zarzdzaj profilami usugodawcw"})]}),H[1].count>0&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center gap-4",children:[s.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:s.jsx(Dt,{className:"w-6 h-6 text-amber-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-semibold text-amber-800",children:[H[1].count," usugodawcw oczekuje na weryfikacj"]}),s.jsx("p",{className:"text-sm text-amber-600",children:"Sprawd profile i zatwierd lub odrzu"})]}),s.jsx("button",{onClick:()=>x("pending"),className:"px-4 py-2 bg-amber-600 text-white font-medium rounded-lg hover:bg-amber-700 transition-colors",children:"Poka oczekujce"})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Szukaj po nazwie, zawodzie lub lokalizacji...",value:m,onChange:A=>f(A.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:H.map(A=>s.jsxs("button",{onClick:()=>x(A.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${g===A.value?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[A.label," (",A.count,")"]},A.value))})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.length===0?s.jsx("div",{className:"col-span-full bg-white rounded-2xl p-12 text-center",children:s.jsx("p",{className:"text-gray-500",children:"Nie znaleziono usugodawcw"})}):i.map(A=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"relative h-48",children:[s.jsx("img",{src:A.image||"https://via.placeholder.com/400x200?text=Brak+zdjcia",alt:A.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute top-3 right-3",children:B(A)})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900",children:A.name}),s.jsx("p",{className:"text-gray-600",children:A.profession}),s.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ns,{className:"w-4 h-4"}),A.locationString||"Brak lokalizacji"]}),A.rating>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(jr,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),A.rating.toFixed(1)," (",A.reviewsCount,")"]})]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Utworzono: ",new Date(A.createdAt).toLocaleDateString("pl-PL")]}),s.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[!A.isVerified&&!A.rejectedAt&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>O(A),disabled:T,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[s.jsx(Tt,{className:"w-4 h-4"}),"Zatwierd"]}),s.jsxs("button",{onClick:()=>{P(A),S(!0)},disabled:T,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[s.jsx(Fs,{className:"w-4 h-4"}),"Odrzu"]})]}),A.isVerified&&A.isActive!==!1&&s.jsxs(s.Fragment,{children:[s.jsxs("a",{href:`/#/uslugodawcy/profil/${A.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-1 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(cr,{className:"w-4 h-4"}),"Podgld"]}),s.jsxs("button",{onClick:()=>b(A),disabled:T,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-amber-100 text-amber-700 font-medium rounded-lg hover:bg-amber-200 transition-colors disabled:opacity-50",children:[s.jsx(y_,{className:"w-4 h-4"}),"Zawie"]})]}),A.isVerified&&A.isActive===!1&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>R(A),disabled:T,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[s.jsx(h6,{className:"w-4 h-4"}),"Aktywuj"]}),s.jsx("button",{onClick:()=>U(A),disabled:T,className:"py-2 px-4 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50",children:s.jsx(Ki,{className:"w-4 h-4"})})]}),A.rejectedAt&&s.jsxs("button",{onClick:()=>U(A),disabled:T,className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50",children:[s.jsx(Ki,{className:"w-4 h-4"}),"Usu"]})]})]})]},A.id))}),E&&v&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Odrzu usugodawc"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Zamierzasz odrzuci profil ",s.jsx("strong",{children:v.name}),". Podaj powd odrzucenia (uytkownik go zobaczy):"]}),s.jsx("textarea",{value:M,onChange:A=>j(A.target.value),placeholder:"Powd odrzucenia...",rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none mb-4"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{S(!1),j("")},className:"flex-1 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Anuluj"}),s.jsx("button",{onClick:N,disabled:T||!M.trim(),className:"flex-1 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:T?"Odrzucanie...":"Odrzu"})]})]})})]})},tM=()=>{const{showToast:t}=mn(),[e,n]=C.useState([]),[r,i]=C.useState([]),[o,l]=C.useState(!0),[h,m]=C.useState(""),[f,g]=C.useState("all"),[x,v]=C.useState(!1);C.useEffect(()=>{P()},[]),C.useEffect(()=>{E()},[e,h,f]);const P=async()=>{l(!0);try{const D=await qt.getAllBookings();D.sort((O,N)=>new Date(N.createdAt).getTime()-new Date(O.createdAt).getTime()),n(D)}catch(D){console.error("Error loading bookings:",D),t("Bd adowania rezerwacji","error")}finally{l(!1)}},E=()=>{let D=[...e];if(h){const O=h.toLowerCase();D=D.filter(N=>{var b,R,U,B;return((b=N.clientName)==null?void 0:b.toLowerCase().includes(O))||((R=N.clientEmail)==null?void 0:R.toLowerCase().includes(O))||((U=N.providerName)==null?void 0:U.toLowerCase().includes(O))||((B=N.id)==null?void 0:B.toLowerCase().includes(O))})}f!=="all"&&(D=D.filter(O=>O.status===f)),i(D)},S=async(D,O)=>{let N="";if(!(O==="cancelled"&&(N=window.prompt("Podaj powd anulowania:")||"",!N))){v(!0);try{await qt.updateBookingStatus(D.id,O,N)?(t("Status zaktualizowany","success"),P()):t("Bd aktualizacji statusu","error")}catch{t("Bd aktualizacji statusu","error")}finally{v(!1)}}},M=D=>{switch(D){case"confirmed":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"completed":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},j=D=>{switch(D){case"confirmed":return"Potwierdzona";case"pending":return"Oczekujca";case"completed":return"Zakoczona";case"cancelled":return"Anulowana";default:return D}},T=[{value:"all",label:"Wszystkie",count:e.length},{value:"pending",label:"Oczekujce",count:e.filter(D=>D.status==="pending").length},{value:"confirmed",label:"Potwierdzone",count:e.filter(D=>D.status==="confirmed").length},{value:"completed",label:"Zakoczone",count:e.filter(D=>D.status==="completed").length},{value:"cancelled",label:"Anulowane",count:e.filter(D=>D.status==="cancelled").length}],I=e.filter(D=>D.status==="completed").reduce((D,O)=>D+(O.totalPrice||0),0),W=e.filter(D=>new Date(D.date).toDateString()===new Date().toDateString()).length;return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(tt,{className:"w-8 h-8 text-red-500 animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rezerwacje"}),s.jsx("p",{className:"text-gray-500",children:"Przegld wszystkich rezerwacji na platformie"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(un,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length}),s.jsx("p",{className:"text-sm text-gray-500",children:"Wszystkich"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:s.jsx(Dt,{className:"w-5 h-5 text-amber-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:W}),s.jsx("p",{className:"text-sm text-gray-500",children:"Dzisiaj"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Ia,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T[3].count}),s.jsx("p",{className:"text-sm text-gray-500",children:"Zakoczonych"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:s.jsx(qi,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[I.toLocaleString()," z"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Przychd"})]})]})})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Szukaj po kliencie, usugodawcy lub ID...",value:h,onChange:D=>m(D.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(D=>s.jsxs("button",{onClick:()=>g(D.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${f===D.value?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[D.label," (",D.count,")"]},D.value))})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"ID"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Klient"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Usugodawca"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Termin"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Usugi"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Kwota"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Status"}),s.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-600",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"Nie znaleziono rezerwacji"})}):r.map(D=>{var O;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[D.id.slice(0,8),"..."]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Mn,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:D.clientName||"Nieznany"}),s.jsx("p",{className:"text-xs text-gray-500",children:D.clientEmail})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(Hi,{className:"w-4 h-4 text-purple-600"})}),s.jsx("span",{className:"font-medium text-gray-900",children:D.providerName||"Nieznany"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:D.date}),s.jsx("p",{className:"text-sm text-gray-500",children:D.time})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"max-w-[200px]",children:((O=D.services)==null?void 0:O.map((N,b)=>s.jsxs("span",{className:"text-sm text-gray-600",children:[N.name,b<D.services.length-1?", ":""]},b)))||"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:"font-bold text-gray-900",children:[D.totalPrice," z"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M(D.status)}`,children:j(D.status)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[D.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>S(D,"confirmed"),disabled:x,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Potwierd",children:s.jsx(Ia,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>S(D,"cancelled"),disabled:x,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Anuluj",children:s.jsx(lm,{className:"w-5 h-5"})})]}),D.status==="confirmed"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>S(D,"completed"),disabled:x,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Oznacz jako zakoczone",children:s.jsx(Ia,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>S(D,"cancelled"),disabled:x,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Anuluj",children:s.jsx(lm,{className:"w-5 h-5"})})]}),(D.status==="completed"||D.status==="cancelled")&&s.jsx("span",{className:"text-sm text-gray-400 px-2",children:""})]})})]},D.id)})})]})})})]})},nM=()=>{const{showToast:t}=mn(),{isSuperAdmin:e}=a2(),[n,r]=C.useState("general"),[i,o]=C.useState(!1),[l,h]=C.useState({siteName:"ToMyHomeApp",siteDescription:"Profesjonalne usugi beauty i wellness w zaciszu Twojego domu",contactEmail:"kontakt@tomyhomeapp.pl",contactPhone:"+48 123 456 789",maintenanceMode:!1}),[m,f]=C.useState({platformCommission:10,minWithdrawal:50,payoutDelay:7}),[g,x]=C.useState({emailNotifications:!0,bookingReminders:!0,marketingEmails:!1,providerAlerts:!0}),[v,P]=C.useState({requireEmailVerification:!1,requirePhoneVerification:!1,autoVerifyProviders:!1,maxLoginAttempts:5}),E=[{id:"general",label:"Oglne",icon:s6,superAdminOnly:!1},{id:"commission",label:"Prowizje",icon:qi,superAdminOnly:!0},{id:"notifications",label:"Powiadomienia",icon:ts,superAdminOnly:!1},{id:"security",label:"Bezpieczestwo",icon:Hn,superAdminOnly:!0},{id:"maintenance",label:"Konserwacja",icon:Lg,superAdminOnly:!0}],S=async()=>{o(!0),await new Promise(j=>setTimeout(j,1e3)),t("Ustawienia zapisane","success"),o(!1)},M=j=>j.superAdminOnly&&!e;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ustawienia"}),s.jsx("p",{className:"text-gray-500",children:"Konfiguracja platformy"})]}),s.jsxs("button",{onClick:S,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:[i?s.jsx(x_,{className:"w-5 h-5 animate-spin"}):s.jsx(_i,{className:"w-5 h-5"}),"Zapisz zmiany"]})]}),!e&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center gap-4",children:[s.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:s.jsx(Ta,{className:"w-6 h-6 text-amber-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-amber-800",children:"Ograniczone uprawnienia"}),s.jsx("p",{className:"text-sm text-amber-600",children:"Niektre ustawienia s dostpne tylko dla Super Adminw"})]})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsx("div",{className:"lg:w-64 bg-white rounded-2xl shadow-sm p-4",children:s.jsx("nav",{className:"space-y-1",children:E.map(j=>{const T=M(j);return s.jsxs("button",{onClick:()=>!T&&r(j.id),disabled:T,className:`w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl transition-colors ${T?"text-gray-400 cursor-not-allowed":n===j.id?"bg-red-50 text-red-600":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(j.icon,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:j.label})]}),T&&s.jsx(js,{className:"w-4 h-4"})]},j.id)})})}),s.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-sm p-6",children:[n==="general"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ustawienia oglne"}),s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nazwa strony"}),s.jsx("input",{type:"text",value:l.siteName,onChange:j=>h({...l,siteName:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis strony"}),s.jsx("textarea",{value:l.siteDescription,onChange:j=>h({...l,siteDescription:j.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 resize-none"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email kontaktowy"}),s.jsx("input",{type:"email",value:l.contactEmail,onChange:j=>h({...l,contactEmail:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon kontaktowy"}),s.jsx("input",{type:"tel",value:l.contactPhone,onChange:j=>h({...l,contactPhone:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]})]})]})]}),n==="commission"&&e&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ustawienia prowizji"}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Super Admin"})]}),s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prowizja platformy (%)"}),s.jsx("input",{type:"number",min:"0",max:"100",value:m.platformCommission,onChange:j=>f({...m,platformCommission:Number(j.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Procent pobierany od kadej transakcji"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimalna kwota wypaty (z)"}),s.jsx("input",{type:"number",min:"0",value:m.minWithdrawal,onChange:j=>f({...m,minWithdrawal:Number(j.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opnienie wypaty (dni)"}),s.jsx("input",{type:"number",min:"0",value:m.payoutDelay,onChange:j=>f({...m,payoutDelay:Number(j.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Liczba dni po zakoczeniu usugi, po ktrych mona wypaci rodki"})]})]})]}),n==="notifications"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ustawienia powiadomie"}),s.jsx("div",{className:"space-y-4",children:[{key:"emailNotifications",label:"Powiadomienia email",desc:"Wysyaj powiadomienia email do uytkownikw"},{key:"bookingReminders",label:"Przypomnienia o rezerwacjach",desc:"Przypominaj o nadchodzcych wizytach"},{key:"marketingEmails",label:"Emaile marketingowe",desc:"Wysyaj newslettery i promocje"},{key:"providerAlerts",label:"Alerty dla usugodawcw",desc:"Powiadamiaj o nowych rezerwacjach i wiadomociach"}].map(j=>s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:j.label}),s.jsx("p",{className:"text-sm text-gray-500",children:j.desc})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"checkbox",checked:g[j.key],onChange:T=>x({...g,[j.key]:T.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-checked:bg-red-600 rounded-full transition-colors"}),s.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]})]},j.key))})]}),n==="security"&&e&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ustawienia bezpieczestwa"}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Super Admin"})]}),s.jsxs("div",{className:"space-y-4",children:[[{key:"requireEmailVerification",label:"Wymagaj weryfikacji email",desc:"Uytkownicy musz potwierdzi email przed aktywacj konta"},{key:"requirePhoneVerification",label:"Wymagaj weryfikacji telefonu",desc:"Uytkownicy musz potwierdzi numer telefonu SMS-em"},{key:"autoVerifyProviders",label:"Auto-weryfikacja usugodawcw",desc:"Automatycznie zatwierdzaj nowych usugodawcw (niezalecane)"}].map(j=>s.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:j.label}),s.jsx("p",{className:"text-sm text-gray-500",children:j.desc})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"checkbox",checked:v[j.key],onChange:T=>P({...v,[j.key]:T.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-checked:bg-red-600 rounded-full transition-colors"}),s.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]})]},j.key)),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maksymalna liczba prb logowania"}),s.jsx("input",{type:"number",min:"1",max:"10",value:v.maxLoginAttempts,onChange:j=>P({...v,maxLoginAttempts:Number(j.target.value)}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-red-500 focus:ring-0"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Po przekroczeniu konto zostanie tymczasowo zablokowane"})]})]})]}),n==="maintenance"&&e&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Tryb konserwacji"}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Super Admin"})]}),s.jsx("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(rm,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-amber-800",children:"Uwaga"}),s.jsx("p",{className:"text-amber-700 mb-4",children:"Wczenie trybu konserwacji spowoduje, e strona bdzie niedostpna dla wszystkich uytkownikw oprcz administratorw."}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"checkbox",checked:l.maintenanceMode,onChange:j=>h({...l,maintenanceMode:j.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-checked:bg-red-600 rounded-full transition-colors"}),s.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]}),s.jsx("span",{className:"font-medium text-gray-900",children:l.maintenanceMode?"Tryb konserwacji WCZONY":"Tryb konserwacji wyczony"})]})]})]})}),s.jsxs("div",{className:"p-6 bg-gray-50 rounded-xl",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Akcje bazy danych"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{className:"w-full py-3 px-4 bg-white border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors text-left flex items-center gap-3",children:[s.jsx(Lg,{className:"w-5 h-5 text-gray-400"}),"Eksportuj dane (JSON)"]}),s.jsxs("button",{className:"w-full py-3 px-4 bg-white border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors text-left flex items-center gap-3",children:[s.jsx(x_,{className:"w-5 h-5 text-gray-400"}),"Wyczy cache"]}),s.jsxs("button",{className:"w-full py-3 px-4 bg-red-50 border border-red-200 text-red-700 font-medium rounded-xl hover:bg-red-100 transition-colors text-left flex items-center gap-3",children:[s.jsx(rm,{className:"w-5 h-5 text-red-500"}),"Resetuj baz danych (NIEBEZPIECZNE)"]})]})]})]}),(n==="commission"||n==="security"||n==="maintenance")&&!e&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(js,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Brak dostpu"}),s.jsx("p",{className:"text-gray-500",children:"Te ustawienia s dostpne tylko dla Super Adminw"})]})]})]})]})},rM=()=>{var me;const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[i,o]=C.useState(!1),[l,h]=C.useState(!1),[m,f]=C.useState(!1),{isAuthenticated:g,user:x,logout:v}=_t(),P=hr(),E=Pr(),S=(x==null?void 0:x.accountType)==="provider"||!!(x!=null&&x.businessName),M=C.useRef(null),j=C.useRef(null),T=C.useRef(null),[I,W]=C.useState([]),[D,O]=C.useState(0);C.useEffect(()=>{if(!(x!=null&&x.id)){W([]);return}const ue=Pn.subscribe(x.id,ce=>{W(ce.slice(0,5))});return()=>ue()},[x==null?void 0:x.id]),C.useEffect(()=>{if(!(x!=null&&x.id)){O(0);return}const ue=Wr.subscribeToUnreadCount(x.id,ce=>{O(ce)});return()=>ue()},[x==null?void 0:x.id]);const N=I.filter(ue=>!ue.read).length,b=ue=>{const ce=new Date(ue),F=new Date().getTime()-ce.getTime(),Y=Math.floor(F/6e4),z=Math.floor(F/36e5);return Y<1?"Teraz":Y<60?`${Y} min temu`:z<24?`${z}h temu`:ce.toLocaleDateString("pl-PL")};C.useEffect(()=>{const ue=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",ue),()=>window.removeEventListener("scroll",ue)},[]),C.useEffect(()=>{const ue=ce=>{M.current&&!M.current.contains(ce.target)&&o(!1),j.current&&!j.current.contains(ce.target)&&h(!1),T.current&&!T.current.contains(ce.target)&&f(!1)};return document.addEventListener("mousedown",ue),()=>document.removeEventListener("mousedown",ue)},[]);const R=[{to:"/",label:"Strona Gwna"},{to:"/#services",label:"Usugi"},{to:"/#how",label:"Jak to dziaa"},{to:"/#reviews",label:"Opinie"},{to:"/#contact",label:"Kontakt"}],U=ue=>{if(e(!1),ue.startsWith("/#")){const ce=ue.replace("/#",""),ne=document.getElementById(ce);ne&&ne.scrollIntoView({behavior:"smooth"})}},B=async()=>{if(x!=null&&x.id)try{await Pn.markAllAsRead(x.id)}catch(ue){console.error("Error marking notifications as read:",ue)}},H=()=>s.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),s.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),s.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),A=()=>s.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});return s.jsxs("header",{className:`sticky top-0 z-50 transition-all duration-300 ${n?"bg-white/95 backdrop-blur-xl shadow-lg":"bg-white/95 backdrop-blur-xl border-b border-gray-100"}`,children:[s.jsx("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"h-[72px] flex items-center justify-between gap-8",children:[s.jsxs(be,{to:"/",className:"flex items-center gap-3 transition-transform duration-300 hover:scale-105",children:[s.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),s.jsx("span",{className:"font-extrabold text-xl gradient-text hidden sm:block",children:"TOMYHOMEAPP"})]}),s.jsx("nav",{className:"hidden lg:flex items-center gap-8",children:R.map(ue=>s.jsx(be,{to:ue.to,onClick:()=>U(ue.to),className:`text-gray-600 font-medium text-[15px] relative py-2 transition-colors hover:text-primary
                  after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 
                  after:bg-gradient-to-r after:from-primary after:to-secondary after:transition-all
                  hover:after:w-full ${P.pathname===ue.to?"text-primary after:w-full":""}`,children:ue.label},ue.to))}),s.jsx("div",{className:"hidden lg:flex items-center gap-3",children:g?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative",ref:T,children:[s.jsxs("button",{onClick:()=>f(!m),className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(ts,{className:"w-5 h-5"}),N>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:N})]}),m&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-50",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[s.jsx("h3",{className:"font-bold text-gray-900",children:"Powiadomienia"}),N>0&&s.jsx("button",{onClick:B,className:"text-sm text-primary hover:underline",children:"Oznacz jako przeczytane"})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:I.length===0?s.jsxs("div",{className:"p-6 text-center text-gray-500",children:[s.jsx(ts,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"Brak powiadomie"})]}):I.map(ue=>s.jsxs("div",{onClick:async()=>{await Pn.markAsRead(ue.id),f(!1),E("/powiadomienia")},className:`p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer ${ue.read?"":"bg-blue-50"}`,children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Pn.getIcon(ue.type)," ",ue.title]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ue.message}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:b(ue.createdAt)})]},ue.id))}),s.jsx(be,{to:"/powiadomienia",className:"block p-3 text-center text-sm text-primary hover:bg-gray-50",onClick:()=>f(!1),children:"Zobacz wszystkie"})]})]}),s.jsxs(be,{to:"/wiadomosci",className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(rs,{className:"w-5 h-5"}),D>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary text-white text-xs font-bold rounded-full flex items-center justify-center",children:D>9?"9+":D})]}),S&&s.jsx(be,{to:"/biznes",className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all text-sm",children:" Panel Biznes"}),s.jsxs("div",{className:"relative",ref:j,children:[s.jsxs("button",{onClick:()=>h(!l),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-xl transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:((me=x==null?void 0:x.username)==null?void 0:me.charAt(0).toUpperCase())||"U"})}),s.jsx("span",{className:"text-sm font-medium text-gray-700 hidden xl:block",children:x==null?void 0:x.username}),s.jsx(im,{className:"w-4 h-4 text-gray-500"})]}),l&&s.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[s.jsx("p",{className:"font-medium text-gray-900",children:x==null?void 0:x.username}),s.jsx("p",{className:"text-sm text-gray-500",children:x==null?void 0:x.email})]}),s.jsxs(be,{to:"/profil",className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>h(!1),children:[s.jsx(Mn,{className:"w-4 h-4"}),"Mj profil"]}),s.jsxs(be,{to:"/wiadomosci",className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>h(!1),children:[s.jsx(rs,{className:"w-4 h-4"}),"Wiadomoci"]}),s.jsx("hr",{className:"my-2"}),s.jsxs("button",{onClick:()=>{v(),h(!1),E("/")},className:"flex items-center gap-3 px-4 py-2 text-red-600 hover:bg-red-50 w-full text-left",children:[s.jsx(yu,{className:"w-4 h-4"}),"Wyloguj si"]})]})]})]}):s.jsxs("div",{className:"relative",ref:M,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-primary transition-colors font-medium",children:[s.jsx(Mn,{className:"w-5 h-5"}),s.jsx("span",{children:"Moje konto"}),s.jsx(im,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&s.jsx("div",{className:"absolute right-0 mt-0 pt-2 z-50",children:s.jsxs("div",{className:"w-80 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"p-6 text-center bg-gradient-to-b from-gray-50 to-white",children:[s.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[s.jsx("div",{className:"text-5xl",children:""}),s.jsx("div",{className:"text-5xl",children:""})]}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Witaj w ToMyHomeApp"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Zaloguj si, aby zobaczy swoje rezerwacje, ulubione usugi i powiadomienia."})]}),s.jsx("div",{className:"px-6 pb-4",children:s.jsx(be,{to:"/auth?mode=login",className:"block w-full py-3 bg-gradient-to-r from-primary to-secondary text-white text-center rounded-xl font-bold hover:shadow-lg transition-all",onClick:()=>o(!1),children:"ZALOGUJ SI"})}),s.jsxs("div",{className:"px-6 pb-4",children:[s.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"Nie masz jeszcze konta? Za teraz."}),s.jsx(be,{to:"/auth?mode=register&type=client",className:"flex items-center justify-center w-full py-3 mb-2 border-2 border-primary text-primary rounded-xl font-bold hover:bg-primary hover:text-white transition-all",onClick:()=>o(!1),children:"DLA KLIENTA"}),s.jsx(be,{to:"/auth?mode=register&type=provider",className:"flex items-center justify-center w-full py-3 border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold hover:bg-emerald-500 hover:text-white transition-all",onClick:()=>o(!1),children:"DLA USUGODAWCY"})]})]})})]})}),s.jsx("button",{onClick:()=>e(!t),"aria-label":"Toggle menu",className:"lg:hidden flex items-center justify-center",style:{width:"44px",height:"44px",backgroundColor:"#ffffff",border:"2px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",color:"#374151",cursor:"pointer"},children:t?s.jsx(A,{}):s.jsx(H,{})})]})}),t&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)}),s.jsx("div",{className:"lg:hidden fixed top-[72px] left-0 right-0 bg-white shadow-xl z-50 max-h-[calc(100vh-72px)] overflow-y-auto",style:{backgroundColor:"#ffffff"},children:s.jsxs("nav",{className:"p-6 flex flex-col gap-4",children:[R.map(ue=>s.jsx(be,{to:ue.to,onClick:()=>U(ue.to),className:"py-3 border-b border-gray-100 text-gray-900 font-medium transition-all hover:text-primary hover:pl-2",children:ue.label},ue.to)),s.jsx("div",{className:"flex flex-col gap-3 mt-4",children:g?s.jsxs(s.Fragment,{children:[(x==null?void 0:x.accountType)==="provider"&&s.jsx(be,{to:"/biznes",onClick:()=>e(!1),className:"w-full py-3 px-4 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-semibold text-center",children:" Panel Biznes"}),s.jsx(be,{to:"/wiadomosci",onClick:()=>e(!1),className:"w-full py-3 px-4 border border-gray-200 text-gray-700 rounded-xl font-medium text-center hover:bg-gray-50",children:" Wiadomoci"}),s.jsx(be,{to:"/profil",onClick:()=>e(!1),className:"w-full py-3 px-4 border border-gray-200 text-gray-700 rounded-xl font-medium text-center hover:bg-gray-50",children:"Mj profil"}),s.jsx("button",{onClick:()=>{v(),e(!1)},className:"w-full py-3 px-4 border border-red-200 text-red-600 rounded-xl font-medium text-center hover:bg-red-50",children:"Wyloguj si"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center mb-2",children:[s.jsx("div",{className:"text-3xl mb-2",children:" "}),s.jsx("p",{className:"text-sm text-gray-600",children:"Zaloguj si, aby korzysta z penych funkcji"})]}),s.jsx(be,{to:"/auth?mode=login",onClick:()=>e(!1),className:"w-full py-3 px-4 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold text-center",children:"ZALOGUJ SI"}),s.jsx(be,{to:"/auth?mode=register&type=client",onClick:()=>e(!1),className:"w-full py-3 px-4 border-2 border-primary text-primary rounded-xl font-semibold text-center",children:"REJESTRACJA - KLIENT"}),s.jsx(be,{to:"/auth?mode=register&type=provider",onClick:()=>e(!1),className:"w-full py-3 px-4 border-2 border-emerald-500 text-emerald-600 rounded-xl font-semibold text-center",children:"REJESTRACJA - USUGODAWCA"})]})})]})})]})]})},sM=()=>{const t=new Date().getFullYear(),e={services:[{label:"Fryzjer",to:"/uslugodawcy/fryzjer"},{label:"Manicure",to:"/uslugodawcy/paznokcie"},{label:"Masa",to:"/uslugodawcy/masaz"},{label:"Kosmetyka",to:"/uslugodawcy/kosmetyka"},{label:"Wszystkie usugi",to:"/uslugodawcy"}],company:[{label:"O nas",to:"/o-nas"},{label:"Kariera",to:"/kariera"},{label:"Blog",to:"/blog"},{label:"Kontakt",to:"/kontakt"}],help:[{label:"FAQ",to:"/faq"},{label:"Regulamin",to:"/regulamin"},{label:"Polityka prywatnoci",to:"/prywatnosc"},{label:"Wsparcie",to:"/wsparcie"}]};return s.jsxs("footer",{className:"bg-gray-900 text-white",id:"contact",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-6 pt-16 pb-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 lg:gap-12",children:[s.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[s.jsx(be,{to:"/",className:"inline-block mb-4",children:s.jsx("h4",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"TOMYHOMEAPP"})}),s.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"Profesjonalne usugi beauty i wellness w zaciszu Twojego domu. Znajd idealnego specjalist w kilka sekund."}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("a",{href:"mailto:kontakt@tomyhomeapp.pl",className:"flex items-center gap-3 text-gray-400 hover:text-white transition-colors",children:[s.jsx(Bs,{className:"w-4 h-4"}),s.jsx("span",{children:"kontakt@tomyhomeapp.pl"})]}),s.jsxs("a",{href:"tel:+48123456789",className:"flex items-center gap-3 text-gray-400 hover:text-white transition-colors",children:[s.jsx(Zi,{className:"w-4 h-4"}),s.jsx("span",{children:"+48 123 456 789"})]}),s.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[s.jsx(ns,{className:"w-4 h-4"}),s.jsx("span",{children:"Pozna, Polska"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-primary hover:-translate-y-1",children:s.jsx(n6,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-gradient-to-r hover:from-purple-500 hover:to-pink-500 hover:-translate-y-1",children:s.jsx(l6,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center transition-all hover:bg-blue-400 hover:-translate-y-1",children:s.jsx(v6,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Usugi"}),s.jsx("ul",{className:"space-y-3",children:e.services.map(n=>s.jsx("li",{children:s.jsx(be,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Firma"}),s.jsx("ul",{className:"space-y-3",children:e.company.map(n=>s.jsx("li",{children:s.jsx(be,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-bold uppercase tracking-wider text-white mb-5",children:"Pomoc"}),s.jsx("ul",{className:"space-y-3",children:e.help.map(n=>s.jsx("li",{children:s.jsx(be,{to:n.to,className:"text-gray-400 hover:text-white transition-all hover:translate-x-1 inline-block",children:n.label})},n.to))})]})]})}),s.jsx("div",{className:"border-t border-white/10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-lg font-bold mb-1",children:"Zapisz si do newslettera"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Otrzymuj informacje o promocjach i nowociach"})]}),s.jsxs("div",{className:"flex w-full md:w-auto gap-2",children:[s.jsx("input",{type:"email",placeholder:"Twj email...",className:"flex-1 md:w-64 px-4 py-2.5 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-primary"}),s.jsx("button",{className:"px-6 py-2.5 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-primary/25 transition-all",children:"Zapisz si"})]})]})})}),s.jsx("div",{className:"border-t border-white/10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-gray-500",children:[s.jsxs("p",{children:[" ",t," TOMYHOMEAPP. Wszystkie prawa zastrzeone."]}),s.jsxs("p",{className:"flex items-center gap-1",children:["Stworzone z ",s.jsx(vl,{className:"w-4 h-4 text-red-500 fill-red-500"})," w Poznaniu"]})]})})})]})},iM=({message:t,type:e="success",onClose:n})=>{const[r,i]=C.useState(!1);C.useEffect(()=>{i(!0);const h=setTimeout(()=>{i(!1),setTimeout(n,300)},2700);return()=>clearTimeout(h)},[n]);const o={success:s.jsx(Tt,{className:"w-5 h-5"}),error:s.jsx(Fs,{className:"w-5 h-5"}),info:s.jsx(o6,{className:"w-5 h-5"})},l={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return s.jsxs("div",{className:`bg-white rounded-xl shadow-xl flex items-center gap-3 px-6 py-4 transition-all duration-300 ${r?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[s.jsx("div",{className:`w-8 h-8 ${l[e]} text-white rounded-full flex items-center justify-center`,children:o[e]}),s.jsx("span",{className:"font-medium text-gray-900",children:t}),s.jsx("button",{onClick:()=>{i(!1),setTimeout(n,300)},className:"ml-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Fs,{className:"w-4 h-4"})})]})},aM=()=>s.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden opacity-40 pointer-events-none",children:[s.jsx("div",{className:"absolute w-[600px] h-[600px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",top:"-200px",left:"-200px",animationDelay:"0s"}}),s.jsx("div",{className:"absolute w-[800px] h-[800px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",bottom:"-300px",right:"-300px",animationDelay:"7s"}}),s.jsx("div",{className:"absolute w-[500px] h-[500px] rounded-full blur-[100px] animate-float",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animationDelay:"14s"}})]}),oM=()=>{const{pathname:t}=hr();return C.useEffect(()=>{window.scrollTo(0,0)},[t]),null},o2=C.createContext({user:null,userData:null,firebaseUser:null,loading:!0,login:()=>{},logout:async()=>{},isAuthenticated:!1,isAdmin:!1,isSuperAdmin:!1}),l2=C.createContext({showToast:()=>{}}),_t=()=>C.useContext(o2),mn=()=>C.useContext(l2),lM=()=>s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(oM,{}),s.jsx(aM,{}),s.jsx(rM,{}),s.jsx("main",{className:"flex-grow",children:s.jsxs(Kj,{children:[s.jsx(Ue,{path:"/",element:s.jsx(S6,{})}),s.jsx(Ue,{path:"/auth",element:s.jsx(P6,{})}),s.jsx(Ue,{path:"/profil",element:s.jsx(R6,{})}),s.jsx(Ue,{path:"/uslugodawcy/profil/:id",element:s.jsx($6,{})}),s.jsx(Ue,{path:"/uslugodawcy/:category",element:s.jsx(v_,{})}),s.jsx(Ue,{path:"/uslugodawcy",element:s.jsx(v_,{})}),s.jsx(Ue,{path:"/wiadomosci",element:s.jsx(H6,{})}),s.jsx(Ue,{path:"/powiadomienia",element:s.jsx(q6,{})}),s.jsx(Ue,{path:"/o-nas",element:s.jsx(Z6,{})}),s.jsx(Ue,{path:"/kariera",element:s.jsx(K6,{})}),s.jsx(Ue,{path:"/blog",element:s.jsx(G6,{})}),s.jsx(Ue,{path:"/kontakt",element:s.jsx(Q6,{})}),s.jsx(Ue,{path:"/faq",element:s.jsx(Y6,{})}),s.jsx(Ue,{path:"/regulamin",element:s.jsx(J6,{})}),s.jsx(Ue,{path:"/prywatnosc",element:s.jsx(X6,{})}),s.jsx(Ue,{path:"/wsparcie",element:s.jsx(eD,{})})]})}),s.jsx(sM,{})]}),cM=()=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"adowanie..."})]})});function uM(){const[t,e]=C.useState(null),[n,r]=C.useState(null),[i,o]=C.useState(!0),[l,h]=C.useState(null),[m,f]=C.useState([]);C.useEffect(()=>{console.log(" Setting up auth listener...");const E=sI(Hr,async S=>{if(console.log(" Auth state changed:",(S==null?void 0:S.email)||"no user"),e(S),S)try{const M=await $i(Ve(we,"users",S.uid));if(console.log(" User doc exists:",M.exists()),M.exists()){const j=M.data();console.log(" Firestore data:",j),r(j);const T={id:S.uid,email:S.email||j.email||"",username:j.username||S.displayName||"Uytkownik",phone:j.phone||"",accountType:j.accountType||"client",businessName:j.businessName,avatar:j.avatar||S.photoURL||void 0};console.log(" Legacy user:",T),h(T)}else{console.log(" No Firestore doc, creating basic user");const j={id:S.uid,email:S.email||"",username:S.displayName||"Uytkownik",phone:"",accountType:"client"};h(j),r(null)}}catch(M){console.error(" Error fetching user data:",M);const j={id:S.uid,email:S.email||"",username:S.displayName||"Uytkownik",phone:"",accountType:"client"};h(j),r(null)}else console.log(" User logged out"),h(null),r(null);o(!1)});return()=>E()},[]);const g=E=>{h(E)},x=async()=>{try{await iI(Hr),h(null),r(null),e(null)}catch(E){throw console.error("Logout error:",E),E}},v=(E,S="success")=>{const M=Date.now().toString();f(j=>[...j,{id:M,message:E,type:S}]),setTimeout(()=>{f(j=>j.filter(T=>T.id!==M))},3e3)},P=E=>{f(S=>S.filter(M=>M.id!==E))};return i?s.jsx(cM,{}):s.jsx(o2.Provider,{value:{user:l,userData:n,firebaseUser:t,loading:i,login:g,logout:x,isAuthenticated:!!t,isAdmin:(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="superadmin",isSuperAdmin:(n==null?void 0:n.role)==="superadmin"},children:s.jsxs(l2.Provider,{value:{showToast:v},children:[s.jsxs(Kj,{children:[s.jsxs(Ue,{path:"/admin",element:s.jsx(YD,{}),children:[s.jsx(Ue,{index:!0,element:s.jsx(JD,{})}),s.jsx(Ue,{path:"uzytkownicy",element:s.jsx(XD,{})}),s.jsx(Ue,{path:"uslugodawcy",element:s.jsx(eM,{})}),s.jsx(Ue,{path:"rezerwacje",element:s.jsx(tM,{})}),s.jsx(Ue,{path:"ustawienia",element:s.jsx(nM,{})})]}),s.jsxs(Ue,{path:"/biznes",element:s.jsx(rD,{}),children:[s.jsx(Ue,{index:!0,element:s.jsx(b_,{})}),s.jsx(Ue,{path:"uslugi",element:s.jsx(sD,{})}),s.jsx(Ue,{path:"dodaj-usluge",element:s.jsx(jD,{})}),s.jsx(Ue,{path:"godziny-pracy",element:s.jsx(ED,{})}),s.jsx(Ue,{path:"kalendarz",element:s.jsx(ND,{})}),s.jsx(Ue,{path:"wiadomosci",element:s.jsx(TD,{})}),s.jsx(Ue,{path:"statystyki",element:s.jsx(kD,{})}),s.jsx(Ue,{path:"profil",element:s.jsx(j_,{})}),s.jsx(Ue,{path:"ustawienia",element:s.jsx(j_,{})}),s.jsx(Ue,{path:"pomoc",element:s.jsx(b_,{})})]}),s.jsx(Ue,{path:"/*",element:s.jsx(lM,{})})]}),s.jsx("div",{className:"fixed bottom-8 right-8 z-50 flex flex-col gap-3",children:m.map(E=>s.jsx(iM,{message:E.message,type:E.type,onClose:()=>P(E.id)},E.id))})]})})}lp.createRoot(document.getElementById("root")).render(s.jsx(Oc.StrictMode,{children:s.jsx(mP,{children:s.jsx(uM,{})})}));
